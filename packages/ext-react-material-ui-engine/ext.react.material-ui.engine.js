console.log("generated: " + new Date());var s=document.createElement("script");s.type = "text/javascript";s.text =`var Ext=Ext||{};Ext.Boot=Ext.Boot||function(u){function o(){var e,t,i,n,r=!1,s=Array.prototype.shift.call(arguments);for("boolean"==typeof arguments[arguments.length-1]&&(r=Array.prototype.pop.call(arguments)),i=arguments.length,e=0;e<i;e++)if("object"==typeof(n=arguments[e]))for(t in n)s[r?t.toLowerCase():t]=n[t];return s}var d=document,a=[],l={disableCaching:!(/[?&](?:cache|disableCacheBuster)\\b/i.test(location.search)||!/http[s]?\\:/i.test(location.href)||/(^|[ ;])ext-cache=1/.test(d.cookie)),disableCachingParam:"_dc",loadDelay:!1,preserveScripts:!0,charset:"UTF-8"},i=/\\.css(?:\\?|$)/i,c=d.createElement("a"),e="undefined"!=typeof window,h={browser:e,node:!e&&"function"==typeof require,phantom:window&&(window._phantom||window.callPhantom)||/PhantomJS/.test(window.navigator.userAgent)},f=Ext.platformTags={},g=function(e,t,i){if(i&&g(e,i),e&&t&&"object"==typeof t)for(var n in t)e[n]=t[n];return e},p="function"==typeof Object.keys?function(e){return e?Object.keys(e):[]}:function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t);return i},m={loading:0,loaded:0,apply:g,env:h,config:l,assetConfig:{},scripts:{},currentFile:null,suspendedQueue:[],currentRequest:null,syncMode:!1,debug:function(e){},useElements:!0,listeners:[],Request:r,Entry:x,allowMultipleBrowsers:!1,browserNames:{ie:"IE",firefox:"Firefox",safari:"Safari",chrome:"Chrome",opera:"Opera",dolfin:"Dolfin",edge:"Edge",webosbrowser:"webOSBrowser",chromeMobile:"ChromeMobile",chromeiOS:"ChromeiOS",silk:"Silk",other:"Other"},osNames:{ios:"iOS",android:"Android",windowsPhone:"WindowsPhone",webos:"webOS",blackberry:"BlackBerry",rimTablet:"RIMTablet",mac:"MacOS",win:"Windows",tizen:"Tizen",linux:"Linux",bada:"Bada",chromeOS:"ChromeOS",other:"Other"},browserPrefixes:{ie:"MSIE ",edge:"Edge/",firefox:"Firefox/",chrome:"Chrome/",safari:"Version/",opera:"OPR/",dolfin:"Dolfin/",webosbrowser:"wOSBrowser/",chromeMobile:"CrMo/",chromeiOS:"CriOS/",silk:"Silk/"},browserPriority:["edge","opera","dolfin","webosbrowser","silk","chromeiOS","chromeMobile","ie","firefox","safari","chrome"],osPrefixes:{tizen:"(Tizen )",ios:"i(?:Pad|Phone|Pod)(?:.*)CPU(?: iPhone)? OS ",android:"(Android |HTC_|Silk/)",windowsPhone:"Windows Phone ",blackberry:"(?:BlackBerry|BB)(?:.*)Version/",rimTablet:"RIM Tablet OS ",webos:"(?:webOS|hpwOS)/",bada:"Bada/",chromeOS:"CrOS "},fallbackOSPrefixes:{windows:"win",mac:"mac",linux:"linux"},devicePrefixes:{iPhone:"iPhone",iPod:"iPod",iPad:"iPad"},maxIEVersion:12,detectPlatformTags:function(){var d=this,h=navigator.userAgent,e=/Mobile(\\/|\\s)/.test(h),r=document.createElement("div"),t=function(){var e,t,i,n,r,s,o,a,l,c={};for(s=d.browserPriority.length,r=0;r<s;r++)n=d.browserPriority[r],l?a=0:(i=d.browserPrefixes[n],(a=(o=h.match(new RegExp("("+i+")([\\\\w\\\\._]+)")))&&1<o.length?parseInt(o[2]):0)&&(l=!0)),c[n]=a;if(c.ie){var u=document.documentMode;8<=u&&(c.ie=u)}for(a=c.ie||!1,e=Math.max(a,d.maxIEVersion),r=8;r<=e;++r)c[(t="ie"+r)+"m"]=a?a<=r:0,c[t]=a?a===r:0,c[t+"p"]=a?r<=a:0;return c}(),i=function(){var e,t,i,n,r,s,o,a,l,c={};for(r=(i=p(d.osPrefixes)).length,l=n=0;n<r;n++)t=i[n],e=d.osPrefixes[t],(a=!(o=(s=h.match(new RegExp("("+e+")([^\\\\s;]+)")))?s[1]:null)||"HTC_"!==o&&"Silk/"!==o?s&&1<s.length?parseFloat(s[s.length-1]):0:2.3)&&l++,c[t]=a;for(r=(i=p(d.fallbackOSPrefixes)).length,n=0;n<r;n++)t=i[n],0===l?(e=d.fallbackOSPrefixes[t],s=h.toLowerCase().match(new RegExp(e)),c[t]=!!s||0):c[t]=0;return c}(),n=function(){var e,t,i,n,r,s,o={};for(r=(i=p(d.devicePrefixes)).length,n=0;n<r;n++)t=i[n],e=d.devicePrefixes[t],s=h.match(new RegExp(e)),o[t]=!!s||0;return o}(),s=m.loadPlatformsParam();o(f,t,i,n,s,!0),f.phone=!!(f.iphone||f.ipod||!f.silk&&f.android&&(f.android<3||e)||f.blackberry&&e||f.windowsphone),f.tablet=!(f.phone||!(f.ipad||f.android||f.silk||f.rimtablet||f.ie10&&/; Touch/.test(h))),f.touch=function(e,t){void 0===t&&(t=window);var i="on"+e.toLowerCase(),n=i in r;return n||r.setAttribute&&r.removeAttribute&&(r.setAttribute(i,""),n="function"==typeof r[i],void 0!==r[i]&&(r[i]=void 0),r.removeAttribute(i)),n}("touchend")||navigator.maxTouchPoints||navigator.msMaxTouchPoints,f.desktop=!f.phone&&!f.tablet,f.cordova=f.phonegap=!!(window.PhoneGap||window.Cordova||window.cordova),f.webview=/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(h),f.androidstock=f.android<=4.3&&(f.safari||f.silk),o(f,s,!0)},loadPlatformsParam:function(){var e,t,i,n,r,s,o=window.location.search.substr(1).split("&"),a={},l={};for(e=0;e<o.length;e++)a[(t=o[e].split("="))[0]]=t[1];if(a.platformTags)for(i=(t=a.platformTags.split(",")).length,e=0;e<i;e++)r=(n=t[e].split(":"))[0],s=!0,1<n.length&&("false"!==(s=n[1])&&"0"!==s||(s=!1)),l[r]=s;return l},filterPlatform:function(e,t){e=a.concat(e||a),t=a.concat(t||a);var i,n,r=e.length,s=t.length,o=!r&&s;for(i=0;i<r&&!o;i++)n=e[i],o=!!f[n];for(i=0;i<s&&o;i++)n=t[i],o=!f[n];return o},init:function(){var e,t,i,n,r,s,o=d.getElementsByTagName("script"),a=o[0],l=o.length,c=/\\/ext(\\-[a-z\\-]+)?\\.js$/;m.hasReadyState="readyState"in a,m.hasAsync="async"in a,m.hasDefer="defer"in a,m.hasOnLoad="onload"in a,m.isIE8=m.hasReadyState&&!m.hasAsync&&m.hasDefer&&!m.hasOnLoad,m.isIE9=m.hasReadyState&&!m.hasAsync&&m.hasDefer&&m.hasOnLoad,m.isIE10p=m.hasReadyState&&m.hasAsync&&m.hasDefer&&m.hasOnLoad,m.isIE8?(m.isIE10=!1,m.isIE10m=!0):(m.isIE10=-1!==navigator.appVersion.indexOf("MSIE 10"),m.isIE10m=m.isIE10||m.isIE9||m.isIE8),m.isIE11=m.isIE10p&&!m.isIE10;for(r=0;r<l;r++)(e=(a=o[r]).src)&&(t=a.readyState||null,!i&&c.test(e)&&(i=e),m.scripts[n=m.canonicalUrl(e)]||new x({key:n,url:e,done:null===t||"loaded"===t||"complete"===t,el:a,prop:"src"}));i=i||(a=o[o.length-1]).src,m.baseUrl=i.substring(0,i.lastIndexOf("/")+1),s=window.location.origin||window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),m.origin=s,m.detectPlatformTags(),Ext.filterPlatform=m.filterPlatform},canonicalUrl:function(e){c.href=e;var t,i,n=c.href,r=l.disableCachingParam,s=r?n.indexOf(r+"="):-1;return 0<s&&("?"===(t=n.charAt(s-1))||"&"===t)&&((i=(i=n.indexOf("&",s))<0?"":n.substring(i))&&"?"===t&&(++s,i=i.substring(1)),n=n.substring(0,s-1)+i),n},getConfig:function(e){return e?m.config[e]:m.config},setConfig:function(e,t){if("string"==typeof e)m.config[e]=t;else for(var i in e)m.setConfig(i,e[i]);return m},getHead:function(){return m.docHead||(m.docHead=d.head||d.getElementsByTagName("head")[0])},create:function(e,t,i){var n=i||{};return n.url=e,n.key=t,m.scripts[t]=new x(n)},getEntry:function(e,t,i){var n,r;return n=i?e:m.canonicalUrl(e),(r=m.scripts[n])||(r=m.create(e,n,t),i&&(r.canonicalPath=!0)),r},registerContent:function(e,t,i){var n={content:i,loaded:!0,css:"css"===t};return m.getEntry(e,n)},processRequest:function(e,t){e.loadEntries(t)},load:function(e){return(e=new r(e)).sync||m.syncMode?m.loadSync(e):(m.currentRequest?(e.getEntries(),m.suspendedQueue.push(e)):(m.currentRequest=e,m.processRequest(e,!1)),m)},loadSync:function(e){e=new r(e);return m.syncMode++,m.processRequest(e,!0),m.syncMode--,m},loadBasePrefix:function(e){return(e=new r(e)).prependBaseUrl=!0,m.load(e)},loadSyncBasePrefix:function(e){return(e=new r(e)).prependBaseUrl=!0,m.loadSync(e)},requestComplete:function(e){var t;if(m.currentRequest===e)for(m.currentRequest=null;0<m.suspendedQueue.length;)if(!(t=m.suspendedQueue.shift()).done){m.load(t);break}m.currentRequest||0!=m.suspendedQueue.length||m.fireListeners()},isLoading:function(){return!m.currentRequest&&0==m.suspendedQueue.length},fireListeners:function(){for(var e;m.isLoading()&&(e=m.listeners.shift());)e()},onBootReady:function(e){m.isLoading()?m.listeners.push(e):e()},getPathsFromIndexes:function(e,t){if(!("length"in e)){var i,n=[];for(i in e)isNaN(+i)||(n[+i]=e[i]);e=n}return r.prototype.getPathsFromIndexes(e,t)},createLoadOrderMap:function(e){return r.prototype.createLoadOrderMap(e)},fetch:function(e,t,i,n){n=void 0===n?!!t:n;function r(){l&&4==l.readyState&&(o=1223===l.status?204:0!==l.status||"file:"!==(self.location||{}).protocol&&"ionp:"!==(self.location||{}).protocol?l.status:200,a=l.responseText,s={content:a,status:o,exception:c},t&&t.call(i,s),l.onreadystatechange=u,l=null)}var s,o,a,l=new XMLHttpRequest,c=!1;n&&(l.onreadystatechange=r);try{l.open("GET",e,n),l.send(null)}catch(e){return c=e,r(),s}return n||r(),s},notifyAll:function(e){e.notifyRequests()}};function r(e){if(e.$isRequest)return e;var t=(e=e.url?e:{url:e}).url,i=t.charAt?[t]:t,n=e.charset||m.config.charset;g(this,e),delete this.url,this.urls=i,this.charset=n}function x(e){if(e.$isEntry)return e;var t,i=e.charset||m.config.charset,n=Ext.manifest,r=n&&n.loader,s=void 0!==e.cache?e.cache:r&&r.cache;m.config.disableCaching&&(void 0===s&&(s=!m.config.disableCaching),!1===s?t=+new Date:!0!==s&&(t=s),t=t&&(r&&r.cacheParam||m.config.disableCachingParam)+"="+t),g(this,e),this.charset=i,this.buster=t,this.requests=[]}return x.prototype={$isEntry:!0,done:!(r.prototype={$isRequest:!0,createLoadOrderMap:function(e){var t,i,n=e.length,r={};for(t=0;t<n;t++)r[(i=e[t]).path]=i;return r},getLoadIndexes:function(e,t,i,n,r){var s,o,a,l,c,u=[],d=[e],h=e.idx;if(t[h])return u;for(t[h]=u[h]=!0;e=d.shift();)if(s=e.canonicalPath?m.getEntry(e.path,null,!0):m.getEntry(this.prepareUrl(e.path)),!r||!s.done)for(l=0,c=(o=n&&e.uses&&e.uses.length?e.requires.concat(e.uses):e.requires).length;l<c;l++)t[a=o[l]]||(t[a]=u[a]=!0,d.push(i[a]));return u},getPathsFromIndexes:function(e,t){var i,n,r=[];for(i=0,n=e.length;i<n;i++)e[i]&&r.push(t[i].path);return r},expandUrl:function(e,t,i,n,r,s){var o,a;return t&&(o=i[e])&&(a=this.getLoadIndexes(o,n,t,r,s)).length?this.getPathsFromIndexes(a,t):[e]},expandUrls:function(e,t){var i,n,r,s,o,a,l,c=this.loadOrder,u=[],d={},h=[];for("string"==typeof e&&(e=[e]),c&&(i=(i=this.loadOrderMap)||(this.loadOrderMap=this.createLoadOrderMap(c))),r=0,s=e.length;r<s;r++)for(o=0,a=(n=this.expandUrl(e[r],c,i,h,t,!1)).length;o<a;o++)d[l=n[o]]||(d[l]=!0,u.push(l));return 0===u.length&&(u=e),u},expandLoadOrder:function(){var e,t=this,i=t.urls;return t.expanded?e=i:(e=this.expandUrls(i,!0),t.expanded=!0),t.urls=e,i.length!=e.length&&(t.sequential=!0),t},getUrls:function(){return this.expandLoadOrder(),this.urls},prepareUrl:function(e){return this.prependBaseUrl?m.baseUrl+e:e},getEntries:function(){var e,t,i,n,r,s,o=this,a=o.entries;if(!a){for(a=[],r=o.getUrls(),o.loadOrder&&(e=o.loadOrderMap),i=0;i<r.length;i++)s=o.prepareUrl(r[i]),e&&(t=e[s]),(n=m.getEntry(s,{buster:o.buster,charset:o.charset},t&&t.canonicalPath)).requests.push(o),a.push(n);o.entries=a}return a},loadEntries:function(e){var t,i,n,r=this,s=(t=r.getEntries()).length,o=r.loadStart||0;for(void 0!==e&&(r.sync=e),r.loaded=r.loaded||0,r.loading=r.loading||s,n=o;n<s;n++)if(!(!!(i=t[n]).loaded||t[n].load(r.sync))){r.loadStart=n,i.onDone(function(){r.loadEntries(e)});break}r.processLoadedEntries()},processLoadedEntries:function(){var e,t,i=this,n=i.getEntries(),r=n.length,s=i.startIndex||0;if(!i.done){for(e=s;e<r;e++){if(!(t=n[e]).loaded)return void(i.startIndex=e);t.evaluated||t.evaluate(),t.error&&(i.error=!0)}i.notify()}},notify:function(){var e=this;if(!e.done){var t=e.error,i=e[t?"failure":"success"],n="delay"in e?e.delay:t?1:m.config.chainDelay,r=e.scope||e;e.done=!0,i&&(0===n||0<n?setTimeout(function(){i.call(r,e)},n):i.call(r,e)),e.fireListeners(),m.requestComplete(e)}},onDone:function(e){var t=this.listeners||(this.listeners=[]);this.done?e(this):t.push(e)},fireListeners:function(){var e,t=this.listeners;if(t)for(;e=t.shift();)e(this)}}),evaluated:!1,loaded:!1,isCrossDomain:function(){return void 0===this.crossDomain&&(this.crossDomain=0!==this.getLoadUrl().indexOf(m.origin)),this.crossDomain},isCss:function(){var e=this;if(void 0===e.css)if(e.url){var t=m.assetConfig[e.url];e.css=t?"css"===t.type:i.test(e.url)}else e.css=!1;return this.css},getElement:function(e){var t=this,i=t.el;return i||(t.isCss()?(e=e||"link",i=d.createElement(e),"link"==e?(i.rel="stylesheet",t.prop="href"):t.prop="textContent",i.type="text/css"):(e=e||"script",(i=d.createElement(e)).type="text/javascript",t.prop="src",t.charset&&(i.charset=t.charset),m.hasAsync&&(i.async=!1)),t.el=i),i},getLoadUrl:function(){var e,t=this;return e=t.canonicalPath?t.url:m.canonicalUrl(t.url),t.loadUrl||(t.loadUrl=t.buster?e+(-1===e.indexOf("?")?"?":"&")+t.buster:e),t.loadUrl},fetch:function(e){var t=this.getLoadUrl(),i=!!e.async,n=e.complete;m.fetch(t,n,this,i)},onContentLoaded:function(e){var t=this,i=e.status,n=e.content,r=e.exception,s=this.getLoadUrl();t.loaded=!0,!r&&0!==i||h.phantom?200<=i&&i<300||304===i||h.phantom||0===i&&0<n.length?t.content=n:(t.error="Failed loading synchronously via XHR: '"+s+"'. Please verify that the file exists. XHR status code: "+i||!0,t.evaluated=!0):(t.error="Failed loading synchronously via XHR: '"+s+"'. It's likely that the file is either being loaded from a different domain or from the local file system where cross origin requests are not allowed for security reasons. Try asynchronous loading instead."||!0,t.evaluated=!0)},createLoadElement:function(e){var t=this,i=t.getElement();t.preserve=!0,i.onerror=function(){t.error=!0,e&&(e(),e=null)},m.isIE10m?i.onreadystatechange=function(){"loaded"!==this.readyState&&"complete"!==this.readyState||e&&(e(),e=this.onreadystatechange=this.onerror=null)}:i.onload=function(){e(),e=this.onload=this.onerror=null},i[t.prop]=t.getLoadUrl()},onLoadElementReady:function(){m.getHead().appendChild(this.getElement()),this.evaluated=!0},inject:function(e,t){var i,n,r,s,o=this,a=m.getHead(),l=o.url,c=o.key;return o.isCss()?(o.preserve=!0,s=c.substring(0,c.lastIndexOf("/")+1),(i=d.createElement("base")).href=s,a.firstChild?a.insertBefore(i,a.firstChild):a.appendChild(i),i.href=i.href,l&&(e+="\\n/*# sourceURL="+c+" */"),r="styleSheet"in(n=o.getElement("style")),a.appendChild(i),r?(a.appendChild(n),n.styleSheet.cssText=e):(n.textContent=e,a.appendChild(n)),a.removeChild(i)):(l&&(e+="\\n//# sourceURL="+c),Ext.globalEval(e)),o},loadCrossDomain:function(){var e=this;return e.createLoadElement(function(){e.el.onerror=e.el.onload=u,e.el=null,e.loaded=e.evaluated=e.done=!0,e.notifyRequests()}),e.evaluateLoadElement(),!1},loadElement:function(){var e=this;return e.createLoadElement(function(){e.el.onerror=e.el.onload=u,e.el=null,e.loaded=e.evaluated=e.done=!0,e.notifyRequests()}),e.evaluateLoadElement(),!0},loadSync:function(){var t=this;t.fetch({async:!1,complete:function(e){t.onContentLoaded(e)}}),t.evaluate(),t.notifyRequests()},load:function(e){var t=this;if(!t.loaded){if(t.loading)return!1;if(t.loading=!0,e)t.loadSync();else{if(m.isIE10||t.isCrossDomain())return t.loadCrossDomain();if(!t.isCss()&&m.hasReadyState)t.createLoadElement(function(){t.loaded=!0,t.notifyRequests()});else{if(!(!m.useElements||t.isCss()&&h.phantom))return t.loadElement();t.fetch({async:!e,complete:function(e){t.onContentLoaded(e),t.notifyRequests()}})}}}return!0},evaluateContent:function(){this.inject(this.content),this.content=null},evaluateLoadElement:function(){m.getHead().appendChild(this.getElement())},evaluate:function(){var e=this;if(!e.evaluated){if(e.evaluating)return;e.evaluating=!0,void 0!==e.content?e.evaluateContent():e.error||e.evaluateLoadElement(),e.evaluated=e.done=!0,e.cleanup()}},cleanup:function(){var e,t=this.el;if(t){if(!this.preserve)for(e in this.el=null,t.parentNode.removeChild(t),t)try{e!==this.prop&&(t[e]=null),delete t[e]}catch(e){}t.onload=t.onerror=t.onreadystatechange=u}},notifyRequests:function(){var e,t=this.requests,i=t.length;for(e=0;e<i;e++)t[e].processLoadedEntries();this.done&&this.fireListeners()},onDone:function(e){var t=this.listeners||(this.listeners=[]);this.done?e(this):t.push(e)},fireListeners:function(){var e,t=this.listeners;if(t&&0<t.length)for(;e=t.shift();)e(this)}},Ext.disableCacheBuster=function(e,t){var i=new Date;i.setTime(i.getTime()+24*(e?3650:-1)*60*60*1e3),i=i.toGMTString(),d.cookie="ext-cache=1; expires="+i+"; path="+(t||"/")},m.init(),m}(function(){}),Ext.globalEval=Ext.globalEval||(this.execScript?function(e){execScript(e)}:function(e){eval.call(window,e)}),Function.prototype.bind||function(){function e(t){var i=r.call(arguments,1),n=this;return i.length?function(){var e=arguments;return n.apply(t,e.length?i.concat(r.call(e)):i)}:(i=null,function(){return n.apply(t,arguments)})}var r=Array.prototype.slice;(Function.prototype.bind=e).$extjs=!0}(),Ext.setResourcePath=function(e,t){var i=Ext.manifest||(Ext.manifest={}),n=i.resources||(i.resources={});i&&("string"!=typeof e?Ext.apply(n,e):n[e]=t,i.resources=n)},Ext.getResourcePath=function(e,t,i){"string"!=typeof e&&(t=e.pool,i=e.packageName,e=e.path);var n=Ext.manifest,r=n&&n.resources,s=r[t],o=[];return null==s&&null==(s=r.path)&&(s="resources"),s&&o.push(s),i&&o.push(i),o.push(e),o.join("/")};var Ext=Ext||{},color,toolbarIsDynamic,head,meta;!function(){function e(){}function t(e){return e}var s,o,a,l,i,c,n=this,u=Object.prototype.toString,d=["valueOf","toLocaleString","toString","constructor"],r=Ext.fireIdle=function(){},h=function(){var e=h.caller.caller;return e.$owner.prototype[e.$name].apply(this,arguments)},f=Ext.manifest||{},g=/\\[object\\s*(?:Array|Arguments|\\w*Collection|\\w*List|HTML\\s+document\\.all\\s+class)\\]/,p=/^\\\\?\\/Date\\(([-+])?(\\d+)(?:[+-]\\d{4})?\\)\\\\?\\/$/;for(i in Ext.global=n,Ext.$nextIid=0,Ext.now=Date.now||(Date.now=function(){return+new Date}),Ext.ticks=n.performance&&n.performance.now?function(){return performance.now()}:Ext.now,Ext._startTime=Ext.ticks(),r.$nullFn=t.$nullFn=r.$emptyFn=t.$identityFn=e.$nullFn=!0,e.$privacy="framework",r.$noClearOnDestroy=t.$noClearOnDestroy=!0,e.$noClearOnDestroy=!0,Ext.suspendLayouts=Ext.resumeLayouts=r,{toString:1})d=null;function m(e,t,i){var n,r;for(n in i)i.hasOwnProperty(n)&&("function"==typeof(r=i[n])&&(t.$className&&(r.name=t.$className+"#"+n),r.$name=n,r.$owner=t,r.$previous=e.hasOwnProperty(n)?e[n]:h),e[n]=r)}Ext.enumerables=d,Ext.apply=function(e,t,i){var n,r,s;if(e&&(i&&Ext.apply(e,i),t&&"object"==typeof t)){for(n in t)e[n]=t[n];if(d)for(r=d.length;r--;)s=d[r],t.hasOwnProperty(s)&&(e[s]=t[s])}return e},Ext.buildSettings=Ext.apply({baseCSSPrefix:"x-"},Ext.buildSettings||{}),Ext.apply(Ext,{idSeed:0,idPrefix:"ext-",isRobot:!1,isSecure:/^https/i.test(window.location.protocol),enableGarbageCollector:!1,enableListenerCollection:!0,name:Ext.sandboxName||"Ext",privateFn:e,emptyFn:r,identityFn:t,frameStartTime:Ext.now(),manifest:f,debugConfig:Ext.debugConfig||f.debug||{hooks:{"*":!0}},enableAria:!0,startsWithHashRe:/^#/,validIdRe:/^[a-z_][a-z0-9\\-_]*$/i,BLANK_IMAGE_URL:"data:image/gif;base64,R0lGODlhAQABAID/AMDAwAAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==",makeIdSelector:function(e){return Ext.validIdRe.test(e)||Ext.raise('Invalid id selector: "'+e+'"'),"#"+e},id:function(e,t){if(e&&e.id)return e.id;var i=(t||Ext.idPrefix)+ ++Ext.idSeed;return e&&(e.id=i),i},returnId:function(e){return e.getId()},returnTrue:function(){return!0},emptyString:new String,emptyArray:Object.freeze?Object.freeze([]):[],baseCSSPrefix:Ext.buildSettings.baseCSSPrefix,$eventNameMap:{},$vendorEventRe:/^(DOMMouse|Moz.+|MS.+|webkit.+)/,canonicalEventName:function(e){return Ext.$eventNameMap[e]||(Ext.$eventNameMap[e]=Ext.$vendorEventRe.test(e)?e:e.toLowerCase())},applyIf:function(e,t){var i;if(e&&t&&"object"==typeof t)for(i in t)void 0===e[i]&&(e[i]=t[i]);return e},destroy:function(){var e,t,i=arguments.length;for(e=0;e<i;e++)(t=arguments[e])&&(Ext.isArray(t)?this.destroy.apply(this,t):Ext.isFunction(t.destroy)&&!t.destroyed&&t.destroy());return null},destroyMembers:function(e){for(var t,i,n=1,r=arguments,s=r.length;n<s;n++)null!=(t=e[i=r[n]])&&(e[i]=Ext.destroy(t))},override:function(e,t){if(e.$isClass)e.override(t);else if("function"==typeof e)Ext.apply(e.prototype,t);else{var i,n=e.self;n&&n.$isClass?((i=t.privates)&&(delete(t=Ext.apply({},t)).privates,m(e,n,i)),m(e,n,t)):Ext.apply(e,t)}return e},valueFrom:function(e,t,i){return Ext.isEmpty(e,i)?t:e},isEmpty:function(e,t){return null==e||!t&&""===e||Ext.isArray(e)&&0===e.length},isArray:"isArray"in Array?Array.isArray:function(e){return"[object Array]"===u.call(e)},isDate:function(e){return"[object Date]"===u.call(e)},isMSDate:function(e){return!!Ext.isString(e)&&p.test(e)},isObject:"[object Object]"===u.call(null)?function(e){return null!=e&&"[object Object]"===u.call(e)&&void 0===e.ownerDocument}:function(e){return"[object Object]"===u.call(e)},isSimpleObject:function(e){return e instanceof Object&&e.constructor===Object},isPrimitive:function(e){var t=typeof e;return"string"==t||"number"==t||"boolean"==t},isFunction:"undefined"!=typeof document&&"function"==typeof document.getElementsByTagName("body")?function(e){return!!e&&"[object Function]"===u.call(e)}:function(e){return!!e&&"function"==typeof e},isNumber:function(e){return"number"==typeof e&&isFinite(e)},isNumeric:function(e){return!isNaN(parseFloat(e))&&isFinite(e)},isString:function(e){return"string"==typeof e},isBoolean:function(e){return"boolean"==typeof e},isElement:function(e){return!!e&&1===e.nodeType},isTextNode:function(e){return!!e&&"#text"===e.nodeName},isDefined:function(e){return void 0!==e},isIterable:function(e){return!(!e||"number"!=typeof e.length||"string"==typeof e||Ext.isFunction(e))&&(e.propertyIsEnumerable?!(!e.hasOwnProperty("length")||e.propertyIsEnumerable("length"))||g.test(u.call(e)):!!e.item)},isDebugEnabled:function(e,t){var i=Ext.debugConfig.hooks;if(i.hasOwnProperty(e))return i[e];var n=i["*"],r=0;if(void 0!==t&&(n=t),!e)return n;for(var s in i){var o=i[s];"."===e.charAt(s.length)&&e.substring(0,s.length)===s&&r<s.length&&(r=s.length,n=o)}return n},clone:function(e,t){if(null==e)return e;if(!1!==t&&e.nodeType&&e.cloneNode)return e.cloneNode(!0);var i,n,r,s,o,a=u.call(e);if("[object Date]"===a)return new Date(e.getTime());if("[object Array]"===a)for(i=e.length,s=[];i--;)s[i]=Ext.clone(e[i],t);else if("[object Object]"===a&&e.constructor===Object){for(o in s={},e)s[o]=Ext.clone(e[o],t);if(d)for(n=d.length;n--;)r=d[n],e.hasOwnProperty(r)&&(s[r]=e[r])}return s||e},getUniqueGlobalNamespace:function(){var e,t=this.uniqueGlobalNamespace;if(void 0===t){for(e=0;t="ExtBox"+ ++e,void 0!==n[t];);n[t]=Ext,this.uniqueGlobalNamespace=t}return t},functionFactoryCache:{},cacheableFunctionFactory:function(){var e,t,i,n=Array.prototype.slice.call(arguments),r=this.functionFactoryCache;return Ext.isSandboxed&&0<(i=n.length)&&(n[--i]="var Ext=window."+Ext.name+";"+n[i]),(t=r[e=n.join("")])||(t=Function.prototype.constructor.apply(Function.prototype,n),r[e]=t),t},functionFactory:function(){var e,t=Array.prototype.slice.call(arguments);return Ext.isSandboxed&&0<(e=t.length)&&(t[--e]="var Ext=window."+Ext.name+";"+t[e]),Function.prototype.constructor.apply(Function.prototype,t)},Logger:{log:function(e,t){e&&n.console&&(t&&t in n.console||(t="log"),e="["+t.toUpperCase()+"] "+e,n.console[t](e))},verbose:function(e){this.log(e,"verbose")},info:function(e){this.log(e,"info")},warn:function(e){this.log(e,"warn")},error:function(e){throw new Error(e)},deprecate:function(e){this.log(e,"warn")}},ariaWarn:function(e,t){Ext.enableAria&&!Ext.slicer&&(Ext.ariaWarn.first||(Ext.ariaWarn.first=!0,Ext.log.warn("WAI-ARIA compatibility warnings can be suppressed by adding the following to application startup code:"),Ext.log.warn("    Ext.ariaWarn = Ext.emptyFn;")),Ext.log.warn({msg:t,dump:e}))},getElementById:function(e){return document.getElementById(e)},splitAndUnescape:function(e,t){if(!e)return[];if(!t)return[e];var i,n,r=c[t]||(c[t]=new RegExp("\\\\\\\\"+t,"g")),s=[];for(i=e.split(t);void 0!==(n=i.shift());){for(;"\\\\"===n.charAt(n.length-1)&&0<i.length;)n=n+t+i.shift();n=n.replace(r,t),s.push(n)}return s},doElevate:function(){var e=o,t=s,i=l;o=s=l=null,a=t?e.apply(i,t):e.call(i),Ext.fireIdle()},elevate:function(e,t,i,n){var r;return i&&!i.length&&(i=null),Ext._suppressIdle=!1,n&&n.tick(),Ext.elevateFunction?(o=e,l=t,s=i,Ext.elevateFunction(Ext.doElevate),r=a,a=null):(r=i?e.apply(t,i):e.call(t),Ext.fireIdle()),n&&n.tock(),r},Timer:{all:{},track:!(c={}),captureStack:!0,created:function(e,t,i){if(!Ext.Timer.track)return null;var n=Ext.apply({kind:e,id:t,done:!1,firing:!1,creator:Ext.Timer.captureStack?(new Error).stack:null,tick:Ext.Timer.tick,tock:Ext.Timer.tock},i);return(Ext.Timer.all[e]||(Ext.Timer.all[e]={}))[n.id]=n,Ext.Timer.hook&&Ext.Timer.hook(n),n},get:function(e,t){t=t||"timeout";var i=Ext.Timer.all[t];return i&&i[e]||null},cancel:function(e,t){var i=Ext.Timer.all[e],n=i&&i[t];n&&(n.cancelled=!0,i[t]=null,delete i[t])},tick:function(){Ext.Timer.firing&&Ext.log.error("Previous timer state not cleaned up properly: "+Ext.Timer.firing.creator),"interval"!==this.kind&&(this.done=!0,Ext.Timer.all[this.kind][this.id]=null,delete Ext.Timer.all[this.kind][this.id]),this.firing=!0,Ext.Timer.firing=this},tock:function(){this.firing=!1,Ext.Timer.firing===this&&(Ext.Timer.firing=null)}},getExpando:function(e,t){var i=e.$expandos;return i&&i[t]||null},setExpando:function(e,t,i){var n=e.$expandos;return void 0!==i?(n||(e.$expandos={}))[t]=i:n&&delete n[t],i}}),Ext.returnTrue.$nullFn=Ext.returnId.$nullFn=!0}(),Ext.platformTags.classic=!(Ext.platformTags.modern=Ext.isModern=!0),function(){function r(){var e=this.sourceClass,t=this.sourceMethod,i=this.msg;return t&&(i?(t+="(): ",t+=i):t+="()"),e&&(t=t?e+"."+t:e),t||i||""}Ext.Error=function(e){var t=new Error;return Ext.isString(e)&&(e={msg:e}),Ext.apply(t,e),t.message=t.message||t.msg,t.toString=r,t},Ext.apply(Ext.Error,{ignore:!1,raise:function(e){var t,i,n=this.raise.caller;if(e=e||{},Ext.isString(e)&&(e={msg:e}),n===Ext.raise&&(n=n.caller),n&&(!e.sourceMethod&&(i=n.$name)&&(e.sourceMethod=i),!e.sourceClass&&(i=n.$owner)&&(i=i.$className)&&(e.sourceClass=i)),!0!==this.handle(e))throw t=r.call(e),Ext.log({msg:t,level:"error",dump:e,stack:!0}),new Ext.Error(e)},handle:function(){return this.ignore}})}(),Ext.deprecated=function(t){return t=t||"",function e(){Ext.raise('The method "'+e.$owner.$className+"."+e.$name+'" has been removed. '+t)}},Ext.raise=function(){Ext.Error.raise.apply(Ext.Error,arguments)},function(){if(!!!window.__UNIT_TESTING__&&"undefined"!=typeof window){function e(){var e,t=Ext.log&&Ext.log.counters,i=t&&t.error+t.warn+t.info+t.log;i&&n!==i&&(e=[],t.error&&e.push("Errors: "+t.error),t.warn&&e.push("Warnings: "+t.warn),t.info&&e.push("Info: "+t.info),t.log&&e.push("Log: "+t.log),window.status="*** "+e.join(" -- "),n=i)}var n=0;e.$skipTimerCheck=!0,setInterval(e,1e3)}}(),Ext.Array=function(){var n=Array.prototype,g=n.slice,e=function(){var e,t=[],i=20;if(!t.splice)return!1;for(;i--;)t.push("A");return t.splice(15,0,"F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F","F"),e=t.length,t.splice(13,0,"XXX"),e+1===t.length}(),t="indexOf"in n,s=!0;try{"undefined"!=typeof document&&g.call(document.getElementsByTagName("body"))}catch(e){s=!1}function f(e,t){return t<0?Math.max(0,e.length+t):Math.min(e.length,t)}function o(e,t,i,n){var r=n?n.length:0,s=e.length,o=f(e,t);if(o===s)r&&e.push.apply(e,n);else{var a,l=Math.min(i,s-o),c=o+l,u=c+r-l,d=s-c,h=s-l;if(u<c)for(a=0;a<d;++a)e[u+a]=e[c+a];else if(c<u)for(a=d;a--;)e[u+a]=e[c+a];if(r&&o===h)e.length=h,e.push.apply(e,n);else for(e.length=h+r,a=0;a<r;++a)e[o+a]=n[a]}return e}function i(e,t,i){var n,r=arguments.length,s=f(e,t);return r<3&&(i=e.length-s),n=e.slice(t,f(e,s+i)),r<4?o(e,s,i):o(e,s,i,g.call(arguments,3)),n}var p=e?function(e,t,i){return e.splice(t,i),e}:function(e,t,i){return o(e,t,i)},r=e?function(e,t,i,n){return n&&n.length?0!==t||i?t<e.length?e.splice.apply(e,[t,i].concat(n)):e.push.apply(e,n):e.unshift.apply(e,n):e.splice(t,i),e}:o,a=e?function(e){return e.splice.apply(e,g.call(arguments,1))}:i,m={binarySearch:function(e,t,i,n,r){var s,o,a=e.length;for(i instanceof Function?(r=i,i=0,n=a):n instanceof Function?(r=n,n=a):(void 0===i&&(i=0),void 0===n&&(n=a),r=r||m.lexicalCompare),--n;i<=n;)0<=(o=r(t,e[s=i+n>>1]))?i=1+s:o<0&&(n=s-1);return i},defaultCompare:function(e,t){return e<t?-1:t<e?1:0},lexicalCompare:function(e,t){return(e=String(e))<(t=String(t))?-1:t<e?1:0},each:function(e,t,i,n){var r,s;if(s=(e=m.from(e)).length,!0!==n){for(r=0;r<s;r++)if(!1===t.call(i||e[r],e[r],r,e))return r}else for(r=s-1;-1<r;r--)if(!1===t.call(i||e[r],e[r],r,e))return r;return!0},findInsertionIndex:function(e,t,i,n){var r,s,o=t.length;return i=i||m.lexicalCompare,0<=n&&n<o&&(r=0<n?i(e,t[n-1]):0,s=n<o?i(e,t[n]):0,0<=r&&s<1)?n:m.binarySearch(t,e,i)},forEach:"forEach"in n?function(e,t,i){e.forEach(t,i)}:function(e,t,i){var n,r;for(n=0,r=e.length;n<r;n++)t.call(i,e[n],n,e)},indexOf:t?function(e,t,i){return e?n.indexOf.call(e,t,i):-1}:function(e,t,i){var n,r=e?e.length:0;for(n=i<0?Math.max(0,r+i):i||0;n<r;n++)if(e[n]===t)return n;return-1},contains:t?function(e,t){return-1!==n.indexOf.call(e,t)}:function(e,t){var i,n;for(i=0,n=e.length;i<n;i++)if(e[i]===t)return!0;return!1},toArray:function(e,t,i){var n,r=[];if(!e||!e.length)return r;if("string"==typeof e&&(e=e.split("")),s)return g.call(e,t||0,i||e.length);for(t=t||0,i=i?i<0?e.length+i:i:e.length,n=t;n<i;n++)r.push(e[n]);return r},pluck:function(e,t){var i,n,r,s=[];for(i=0,n=e.length;i<n;i++)r=e[i],s.push(r[t]);return s},map:"map"in n?function(e,t,i){return Ext.Assert.isFunction(t,"Ext.Array.map must have a callback function passed as second argument."),e.map(t,i)}:function(e,t,i){Ext.Assert.isFunction(t,"Ext.Array.map must have a callback function passed as second argument.");var n,r=e.length,s=new Array(r);for(n=0;n<r;n++)s[n]=t.call(i,e[n],n,e);return s},every:"every"in n?function(e,t,i){return Ext.Assert.isFunction(t,"Ext.Array.every must have a callback function passed as second argument."),e.every(t,i)}:function(e,t,i){var n,r;for(Ext.Assert.isFunction(t,"Ext.Array.every must have a callback function passed as second argument."),n=0,r=e.length;n<r;++n)if(!t.call(i,e[n],n,e))return!1;return!0},some:"some"in n?function(e,t,i){return Ext.Assert.isFunction(t,"Ext.Array.some must have a callback function passed as second argument."),e.some(t,i)}:function(e,t,i){var n,r;for(Ext.Assert.isFunction(t,"Ext.Array.some must have a callback function passed as second argument."),n=0,r=e.length;n<r;++n)if(t.call(i,e[n],n,e))return!0;return!1},equals:function(e,t){var i,n=e.length,r=t.length;if(e===t)return!0;if(n!==r)return!1;for(i=0;i<n;++i)if(e[i]!==t[i])return!1;return!0},clean:function(e){var t,i,n,r=[];for(t=0,i=e.length;t<i;t++)n=e[t],Ext.isEmpty(n)||r.push(n);return r},unique:function(e){var t,i,n,r=[];for(t=0,i=e.length;t<i;t++)n=e[t],-1===m.indexOf(r,n)&&r.push(n);return r},filter:"filter"in n?function(e,t,i){return Ext.Assert.isFunction(t,"Ext.Array.filter must have a filter function passed as second argument."),e.filter(t,i)}:function(e,t,i){var n,r,s=[];for(Ext.Assert.isFunction(t,"Ext.Array.filter must have a filter function passed as second argument."),n=0,r=e.length;n<r;n++)t.call(i,e[n],n,e)&&s.push(e[n]);return s},findBy:function(e,t,i){var n,r;for(n=0,r=e.length;n<r;n++)if(t.call(i||e,e[n],n))return e[n];return null},from:function(e,t){var i;return null==e?[]:Ext.isArray(e)?t?g.call(e):e:(i=typeof e,!e||void 0===e.length||"string"==i||"function"==i&&e.apply?[e]:m.toArray(e))},remove:function(e,t){var i=m.indexOf(e,t);return-1!==i&&p(e,i,1),e},removeAt:function(e,t,i){var n=e.length;return 0<=t&&t<n&&(i=i||1,i=Math.min(i,n-t),p(e,t,i)),e},include:function(e,t){m.contains(e,t)||e.push(t)},clone:function(e){return g.call(e)},merge:function(){var e,t,i=g.call(arguments),n=[];for(e=0,t=i.length;e<t;e++)n=n.concat(i[e]);return m.unique(n)},intersect:function(){var e,t,i,n,r,s,o,a,l,c,u,d,h=[],f=g.call(arguments);if(!f.length)return h;for(e=f.length,c=r=0;c<e;c++)s=f[c],(!n||s.length<n.length)&&(n=s,r=c);for(n=m.unique(n),p(f,r,1),o=n.length,e=f.length,c=0;c<o;c++){for(a=n[c],u=l=0;u<e;u++)for(i=(t=f[u]).length,d=0;d<i;d++)if(a===t[d]){l++;break}l===e&&h.push(a)}return h},difference:function(e,t){var i,n,r,s=g.call(e),o=s.length;for(i=0,r=t.length;i<r;i++)for(n=0;n<o;n++)s[n]===t[i]&&(p(s,n,1),n--,o--);return s},reduce:Array.prototype.reduce?function(e,t,i){return 3===arguments.length?Array.prototype.reduce.call(e,t,i):Array.prototype.reduce.call(e,t)}:function(e,t,i){e=Object(e),Ext.isFunction(t)||Ext.raise("Invalid parameter: expected a function.");var n=0,r=e.length>>>0,s=i;if(arguments.length<3)for(;;){if(n in e){s=e[n++];break}if(++n>=r)throw new TypeError("Reduce of empty array with no initial value")}for(;n<r;++n)n in e&&(s=t(s,e[n],n,e));return s},slice:[1,2].slice(1,void 0).length?function(e,t,i){return g.call(e,t,i)}:function(e,t,i){return void 0===t?g.call(e):void 0===i?g.call(e,t):g.call(e,t,i)},sort:function(e,t){return function(i,n){var e,t=i.length,r=new Array(t);for(e=0;e<t;e++)r[e]=e;for(r.sort(function(e,t){return n(i[e],i[t])||e-t}),e=0;e<t;e++)r[e]=i[r[e]];for(e=0;e<t;e++)i[e]=r[e];return i}(e,t||m.lexicalCompare)},flatten:function(e){var s=[];return function e(t){var i,n,r;for(i=0,n=t.length;i<n;i++)r=t[i],Ext.isArray(r)?e(r):s.push(r);return s}(e)},min:function(e,t){var i,n,r,s=e[0];for(i=0,n=e.length;i<n;i++)r=e[i],t?1===t(s,r)&&(s=r):r<s&&(s=r);return s},max:function(e,t){var i,n,r,s=e[0];for(i=0,n=e.length;i<n;i++)r=e[i],t?-1===t(s,r)&&(s=r):s<r&&(s=r);return s},mean:function(e){return 0<e.length?m.sum(e)/e.length:void 0},sum:function(e){var t,i,n=0;for(t=0,i=e.length;t<i;t++)n+=e[t];return n},toMap:function(e,t,i){var n,r;if(!e)return null;if(n={},r=e.length,"string"==typeof e)n[e]=1;else if(t)if("string"==typeof t)for(;r--;)n[e[r][t]]=r+1;else for(;r--;)n[t.call(i,e[r])]=r+1;else for(;r--;)n[e[r]]=r+1;return n},toValueMap:function(e,t,i,n){var r,s,o,a,l,c,u={},d=e.length;if(t)for((a="string"!=typeof t)||(n=i),s=1===n,r=2===n;d--;)c=e[d],l=a?t.call(i,c):c[t],s?l in u?u[l].push(c):u[l]=[c]:r&&l in u?(o=u[l])instanceof Array?o.push(c):u[l]=[o,c]:u[l]=c;else for(;d--;)u[c=e[d]]=c;return u},_replaceSim:o,_spliceSim:i,erase:p,insert:function(e,t,i){return r(e,t,0,i)},move:function(e,t,i){if(i!==t){var n,r=e[t],s=t<i?1:-1;for(n=t;n!==i;n+=s)e[n]=e[n+s];e[i]=r}},replace:r,splice:a,push:function(e){var t,i,n=arguments,r=n.length;for(void 0===e?e=[]:Ext.isArray(e)||(e=[e]),t=1;t<r;t++)i=n[t],Array.prototype.push[Ext.isIterable(i)?"apply":"call"](e,i);return e},numericSortFn:function(e,t){return e-t}};return Ext.each=m.each,m.union=m.merge,Ext.min=m.min,Ext.max=m.max,Ext.sum=m.sum,Ext.mean=m.mean,Ext.flatten=m.flatten,Ext.clean=m.clean,Ext.unique=m.unique,Ext.pluck=m.pluck,Ext.toArray=function(){return m.toArray.apply(m,arguments)},m}(),Ext.Assert={falsey:function(e,t){e&&Ext.raise(t||"Expected a falsey value but was "+e)},falseyProp:function(e,t){var i;Ext.Assert.truthy(e),(i=e[t])&&(e.$className&&(t=e.$className+"#"+t),Ext.raise("Expected a falsey value for "+t+" but was "+i))},truthy:function(e,t){e||Ext.raise(t||"Expected a truthy value but was "+typeof e)},truthyProp:function(e,t){var i;Ext.Assert.truthy(e),(i=e[t])||(e.$className&&(t=e.$className+"#"+t),Ext.raise("Expected a truthy value for "+t+" but was "+typeof i))}},function(){var e,t;function i(e,i){var n,r=Ext[e];return function(e,t){r(e)||Ext.raise(t||n||(n="Expected value to be "+i))}}function n(e,i){var n,r=Ext[e];return function(e,t){Ext.Assert.truthy(e),r(e[t])||Ext.raise(n=n||"Expected "+(e.$className?e.$className+"#":"")+t+" to be "+i)}}function r(e,i){var n,r=Ext[e];return function(e,t){r(e)&&Ext.raise(t||n||(n="Expected value to NOT be "+i))}}function s(e,i){var n,r=Ext[e];return function(e,t){Ext.Assert.truthy(e),r(e[t])&&Ext.raise(n=n||"Expected "+(e.$className?e.$className+"#":"")+t+" to NOT be "+i)}}for(e in Ext)"is"===e.substring(0,2)&&Ext.isFunction(Ext[e])&&(t=e.substring(2),Ext.Assert[e]=i(e,t),Ext.Assert[e+"Prop"]=n(e,t),Ext.Assert["isNot"+t]=r(e,t),Ext.Assert["isNot"+t+"Prop"]=s(e,t))}(),Ext.String=function(){function t(e,t){return s[t]}function i(e,t){return t in o?o[t]:String.fromCharCode(parseInt(t.substr(2),10))}function r(e,t){return null!=e&&null!=t&&t.length<=e.length}var s,o,a,l,c,n=/^[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]+|[\\x09\\x0a\\x0b\\x0c\\x0d\\x20\\xa0\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u2028\\u2029\\u202f\\u205f\\u3000]+$/g,u=/('|\\\\)/g,d=/([-.*+?\\^\$\{\}()|\\[\\]\\/\\\\])/g,h=/^\\s+|\\s+$/g,f=/\\s+/,g=/(^[^a-z]*|[^\\w])/gi,p=String.fromCharCode;return c={fromCodePoint:String.fromCodePoint||function(){for(var e,t="",i=[],n=-1,r=arguments.length;++n<r;)e=Number(arguments[n]),(!isFinite(e)||e<0||1114111<e||Math.floor(e)!==e)&&Ext.raise("Invalid code point: "+e),e<=65535?i.push(e):(e-=65536,i.push(55296+(e>>10),e%1024+56320)),n+1===r&&(t+=p(i),i.length=0);return t},insert:function(e,t,i){var n;return e?(t&&(n=e.length,i||0===i||(i=n),i<0&&(i=n<=(i*=-1)?0:n-i),0===i?e=t+e:i>=e.length?e+=t:e=e.substr(0,i)+t+e.substr(i)),e):t},startsWith:function(e,t,i){var n=r(e,t);return n&&(i&&(e=e.toLowerCase(),t=t.toLowerCase()),n=0===e.lastIndexOf(t,0)),n},endsWith:function(e,t,i){var n=r(e,t);return n&&(i&&(e=e.toLowerCase(),t=t.toLowerCase()),n=-1!==e.indexOf(t,e.length-t.length)),n},createVarName:function(e){return e.replace(g,"")},htmlEncode:function(e){return e?String(e).replace(a,t):e},htmlDecode:function(e){return e?String(e).replace(l,i):e},hasHtmlCharacters:function(e){return a.test(e)},addCharacterEntities:function(e){var t,i,n=[],r=[];for(t in e)i=e[t],o[t]=i,s[i]=t,n.push(i),r.push(t);a=new RegExp("("+n.join("|")+")","g"),l=new RegExp("("+r.join("|")+"|&#[0-9]{1,5};)","g")},resetCharacterEntities:function(){s={},o={},this.addCharacterEntities({"&amp;":"&","&gt;":">","&lt;":"<","&quot;":'"',"&#39;":"'"})},urlAppend:function(e,t){return Ext.isEmpty(t)?e:e+(-1===e.indexOf("?")?"?":"&")+t},trim:function(e){return(e=e&&e.replace(n,""))||""},capitalize:function(e){return(e=e&&e.charAt(0).toUpperCase()+e.substr(1))||""},uncapitalize:function(e){return(e=e&&e.charAt(0).toLowerCase()+e.substr(1))||""},ellipsis:function(e,t,i){var n,r;return e&&e.length>t?i&&(n=e.substr(0,t-2),-1!==(r=Math.max(n.lastIndexOf(" "),n.lastIndexOf("."),n.lastIndexOf("!"),n.lastIndexOf("?")))&&t-15<=r)?n.substr(0,r)+"...":e.substr(0,t-3)+"...":e},escapeRegex:function(e){return e.replace(d,"\\\\$1")},createRegex:function(e,t,i,n){var r=e;return null==e||e.exec||(r=c.escapeRegex(String(e)),!1!==t&&(r="^"+r),!1!==i&&(r+="$"),r=new RegExp(r,!1!==n?"i":"")),r},escape:function(e){return e.replace(u,"\\\\$1")},toggle:function(e,t,i){return e===t?i:t},leftPad:function(e,t,i){var n=String(e);for(i=i||" ";n.length<t;)n=i+n;return n},repeat:function(e,t,i){var n,r=[];for(t<1&&(t=0),n=t;n--;)r.push(e);return r.join(i||"")},splitWords:function(e){return e&&"string"==typeof e?e.replace(h,"").split(f):e||[]}}}(),Ext.String.resetCharacterEntities(),Ext.htmlEncode=Ext.String.htmlEncode,Ext.htmlDecode=Ext.String.htmlDecode,Ext.urlAppend=Ext.String.urlAppend,Ext.Date=function(){var d,i,l=Date,t=/(\\\\.)/g,n=/([gGhHisucUOPZ]|MS)/,r=/([djzmnYycU]|MS)/,s=/\\\\/gi,o=/\\{(\\d+)\\}/g,a=new RegExp("\\\\/Date\\\\(([-+])?(\\\\d+)(?:[+-]\\\\d{4})?\\\\)\\\\/"),c=/^(?:(\\d{1,4})|(\\w{3,}))[/\\-.\\\\\\s](?:(\\d{1,2})|(\\w{3,}))[/\\-.\\\\\\s](\\d{1,4})$/,u=Ext.String.leftPad,h={d:!0,j:!0},f={F:!0,m:!0,M:!0,n:!0},g={o:!0,Y:!0,y:!0},p=["var me = this, dt, y, m, d, h, i, s, ms, o, O, z, zz, u, v, W, year, jan4, week1monday, daysInMonth, dayMatched,","def = me.defaults,","from = Ext.Number.from,","results = String(input).match(me.parseRegexes[{0}]);","if(results){","{1}","if(u != null){","v = new Date(u * 1000);","}else{","dt = me.clearTime(new Date);","y = from(y, from(def.y, dt.getFullYear()));","m = from(m, from(def.m - 1, dt.getMonth()));","dayMatched = d !== undefined;","d = from(d, from(def.d, dt.getDate()));","if (!dayMatched) {","dt.setDate(1);","dt.setMonth(m);","dt.setFullYear(y);","daysInMonth = me.getDaysInMonth(dt);","if (d > daysInMonth) {","d = daysInMonth;","}","}","h  = from(h, from(def.h, dt.getHours()));","i  = from(i, from(def.i, dt.getMinutes()));","s  = from(s, from(def.s, dt.getSeconds()));","ms = from(ms, from(def.ms, dt.getMilliseconds()));","if(z >= 0 && y >= 0){","v = me.add(new Date(y < 100 ? 100 : y, 0, 1, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","v = !strict? v : (strict === true && (z <= 364 || (me.isLeapYear(v) && z <= 365))? me.add(v, me.DAY, z) : null);","}else if(strict === true && !me.isValid(y, m + 1, d, h, i, s, ms)){","v = null;","}else{","if (W) {","year = y || (new Date()).getFullYear();","jan4 = new Date(year, 0, 4, 0, 0, 0);","d = jan4.getDay();","week1monday = new Date(jan4.getTime() - ((d === 0 ? 6 : d - 1) * 86400000));","v = Ext.Date.clearTime(new Date(week1monday.getTime() + ((W - 1) * 604800000 + 43200000)));","} else {","v = me.add(new Date(y < 100 ? 100 : y, m, d, h, i, s, ms), me.YEAR, y < 100 ? y - 100 : 0);","}","}","}","}","if(v){","if(zz != null){","v = me.add(v, me.SECOND, -v.getTimezoneOffset() * 60 - zz);","}else if(o){","v = me.add(v, me.MINUTE, -v.getTimezoneOffset() + (sn == '+'? -1 : 1) * (hr * 60 + mn));","}","}","return (v != null) ? v : null;"].join("\\n");function m(e){var i=Array.prototype.slice.call(arguments,1);return e.replace(o,function(e,t){return i[t]})}return Date.prototype.toISOString||(Date.prototype.toISOString=function(){var e=this;return u(e.getUTCFullYear(),4,"0")+"-"+u(e.getUTCMonth()+1,2,"0")+"-"+u(e.getUTCDate(),2,"0")+"T"+u(e.getUTCHours(),2,"0")+":"+u(e.getUTCMinutes(),2,"0")+":"+u(e.getUTCSeconds(),2,"0")+"."+u(e.getUTCMilliseconds(),3,"0")+"Z"}),(d={now:l.now,toString:function(e){return(e=e||new l).getFullYear()+"-"+u(e.getMonth()+1,2,"0")+"-"+u(e.getDate(),2,"0")+"T"+u(e.getHours(),2,"0")+":"+u(e.getMinutes(),2,"0")+":"+u(e.getSeconds(),2,"0")},getElapsed:function(e,t){return Math.abs(e-(t||d.now()))},useStrict:!1,formatCodeToRegex:function(e,t){var i=d.parseCodes[e];return i&&(i="function"==typeof i?i():i,d.parseCodes[e]=i),i?Ext.applyIf({c:i.c?m(i.c,t||"{0}"):i.c},i):{g:0,c:null,s:Ext.String.escapeRegex(e)}},parseFunctions:{MS:function(e,t){var i=(e||"").match(a);return i?new l(+((i[1]||"")+i[2])):null},time:function(e,t){var i=parseInt(e,10);return i||0===i?new l(i):null},timestamp:function(e,t){var i=parseInt(e,10);return i||0===i?new l(1e3*i):null}},parseRegexes:[],formatFunctions:{MS:function(){return"\\\\/Date("+this.getTime()+")\\\\/"},time:function(){return this.getTime().toString()},timestamp:function(){return d.format(this,"U")}},y2kYear:50,MILLI:"ms",SECOND:"s",MINUTE:"mi",HOUR:"h",DAY:"d",MONTH:"mo",YEAR:"y",DAYS_IN_WEEK:7,MONTHS_IN_YEAR:12,MAX_DAYS_IN_MONTH:31,SUNDAY:0,MONDAY:1,TUESDAY:2,WEDNESDAY:3,THURSDAY:4,FRIDAY:5,SATURDAY:6,defaults:{},dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNumbers:{January:0,Jan:0,February:1,Feb:1,March:2,Mar:2,April:3,Apr:3,May:4,June:5,Jun:5,July:6,Jul:6,August:7,Aug:7,September:8,Sep:8,October:9,Oct:9,November:10,Nov:10,December:11,Dec:11},defaultFormat:"m/d/Y",defaultTimeFormat:"h:i A",firstDayOfWeek:0,weekendDays:[0,6],getShortMonthName:function(e){return d.monthNames[e].substring(0,3)},getShortDayName:function(e){return d.dayNames[e].substring(0,3)},getMonthNumber:function(e){return d.monthNumbers[e.substring(0,1).toUpperCase()+e.substring(1,3).toLowerCase()]},formatContainsHourInfo:function(e){return n.test(e.replace(t,""))},formatContainsDateInfo:function(e){return r.test(e.replace(t,""))},isMonthFormat:function(e){return!!f[e]},isYearFormat:function(e){return!!g[e]},unescapeFormat:function(e){return e.replace(s,"")},formatCodes:{d:"Ext.String.leftPad(m.getDate(), 2, '0')",D:"Ext.Date.getShortDayName(m.getDay())",j:"m.getDate()",l:"Ext.Date.dayNames[m.getDay()]",N:"(m.getDay() ? m.getDay() : 7)",S:"Ext.Date.getSuffix(m)",w:"m.getDay()",z:"Ext.Date.getDayOfYear(m)",W:"Ext.String.leftPad(Ext.Date.getWeekOfYear(m), 2, '0')",F:"Ext.Date.monthNames[m.getMonth()]",m:"Ext.String.leftPad(m.getMonth() + 1, 2, '0')",M:"Ext.Date.getShortMonthName(m.getMonth())",n:"(m.getMonth() + 1)",t:"Ext.Date.getDaysInMonth(m)",L:"(Ext.Date.isLeapYear(m) ? 1 : 0)",o:"(m.getFullYear() + (Ext.Date.getWeekOfYear(m) == 1 && m.getMonth() > 0 ? +1 : (Ext.Date.getWeekOfYear(m) >= 52 && m.getMonth() < 11 ? -1 : 0)))",Y:"Ext.String.leftPad(m.getFullYear(), 4, '0')",y:"('' + m.getFullYear()).substring(2, 4)",a:"(m.getHours() < 12 ? 'am' : 'pm')",A:"(m.getHours() < 12 ? 'AM' : 'PM')",g:"((m.getHours() % 12) ? m.getHours() % 12 : 12)",G:"m.getHours()",h:"Ext.String.leftPad((m.getHours() % 12) ? m.getHours() % 12 : 12, 2, '0')",H:"Ext.String.leftPad(m.getHours(), 2, '0')",i:"Ext.String.leftPad(m.getMinutes(), 2, '0')",s:"Ext.String.leftPad(m.getSeconds(), 2, '0')",u:"Ext.String.leftPad(m.getMilliseconds(), 3, '0')",O:"Ext.Date.getGMTOffset(m)",P:"Ext.Date.getGMTOffset(m, true)",T:"Ext.Date.getTimezone(m)",Z:"(m.getTimezoneOffset() * -60)",c:function(){var e,t,i="Y-m-dTH:i:sP",n=[],r=i.length;for(e=0;e<r;++e)t=i.charAt(e),n.push("T"===t?"'T'":d.getFormatCode(t));return n.join(" + ")},C:function(){return"m.toISOString()"},U:"Math.round(m.getTime() / 1000)"},isValid:function(e,t,i,n,r,s,o){var a;return n=n||0,r=r||0,s=s||0,o=o||0,e===(a=d.add(new l(e<100?100:e,t-1,i,n,r,s,o),d.YEAR,e<100?e-100:0)).getFullYear()&&t===a.getMonth()+1&&i===a.getDate()&&n===a.getHours()&&r===a.getMinutes()&&s===a.getSeconds()&&o===a.getMilliseconds()},parse:function(e,t,i){var n;return t?(null==(n=d.parseFunctions)[t]&&d.createParser(t),n[t].call(d,e,Ext.isDefined(i)?i:d.useStrict)):d.flexParse(e)},parseDate:function(e,t,i){return d.parse(e,t,i)},getFormatCode:function(e){var t=d.formatCodes[e];return t&&(t="function"==typeof t?t():t,d.formatCodes[e]=t),t||"'"+Ext.String.escape(e)+"'"},createFormat:function(e){var t,i=[],n=!1,r="";for(t=0;t<e.length;++t)r=e.charAt(t),n||"\\\\"!==r?n?(n=!1,i.push("'"+Ext.String.escape(r)+"'")):"\\n"===r?i.push("'\\\\n'"):i.push(d.getFormatCode(r)):n=!0;d.formatFunctions[e]=Ext.functionFactory("var m = this; return "+i.join("+"))},createParser:function(e){for(var t,i=d.parseRegexes.length,n=1,r=[],s=[],o=!1,a="",l=0,c=e.length,u=[];l<c;++l)a=e.charAt(l),o||"\\\\"!==a?o?(o=!1,s.push(Ext.String.escape(a))):(n+=(t=d.formatCodeToRegex(a,n)).g,s.push(t.s),t.g&&t.c&&(t.calcAtEnd?u.push(t.c):r.push(t.c))):o=!0;r=r.concat(u),d.parseRegexes[i]=new RegExp("^"+s.join("")+"$","i"),d.parseFunctions[e]=Ext.functionFactory("input","strict",m(p,i,r.join("")))},parseCodes:{d:{g:1,c:"d = parseInt(results[{0}], 10);\\n",s:"(3[0-1]|[1-2][0-9]|0[1-9])"},j:{g:1,c:"d = parseInt(results[{0}], 10);\\n",s:"(3[0-1]|[1-2][0-9]|[1-9])"},D:function(){var e,t=[];for(e=0;e<7;e++)t.push(d.getShortDayName(e));return{g:0,c:null,s:"(?:"+t.join("|")+")"}},l:function(){return{g:0,c:null,s:"(?:"+d.dayNames.join("|")+")"}},N:{g:0,c:null,s:"[1-7]"},S:{g:0,c:null,s:"(?:st|nd|rd|th)"},w:{g:0,c:null,s:"[0-6]"},z:{g:1,c:"z = parseInt(results[{0}], 10);\\n",s:"(\\\\d{1,3})"},W:{g:1,c:"W = parseInt(results[{0}], 10);\\n",s:"(\\\\d{2})"},F:function(){return{g:1,c:"m = parseInt(me.getMonthNumber(results[{0}]), 10);\\n",s:"("+d.monthNames.join("|")+")"}},M:function(){var e,t=[];for(e=0;e<12;e++)t.push(d.getShortMonthName(e));return Ext.applyIf({s:"("+t.join("|")+")"},d.formatCodeToRegex("F"))},m:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\\n",s:"(1[0-2]|0[1-9])"},n:{g:1,c:"m = parseInt(results[{0}], 10) - 1;\\n",s:"(1[0-2]|[1-9])"},t:{g:0,c:null,s:"(?:\\\\d{2})"},L:{g:0,c:null,s:"(?:1|0)"},o:{g:1,c:"y = parseInt(results[{0}], 10);\\n",s:"(\\\\d{4})"},Y:{g:1,c:"y = parseInt(results[{0}], 10);\\n",s:"(\\\\d{4})"},y:{g:1,c:"var ty = parseInt(results[{0}], 10);\\ny = ty > me.y2kYear ? 1900 + ty : 2000 + ty;\\n",s:"(\\\\d{2})"},a:{g:1,c:"if (/(am)/i.test(results[{0}])) {\\nif (!h || h == 12) { h = 0; }\\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(am|pm|AM|PM)",calcAtEnd:!0},A:{g:1,c:"if (/(am)/i.test(results[{0}])) {\\nif (!h || h == 12) { h = 0; }\\n} else { if (!h || h < 12) { h = (h || 0) + 12; }}",s:"(AM|PM|am|pm)",calcAtEnd:!0},g:{g:1,c:"h = parseInt(results[{0}], 10);\\n",s:"(1[0-2]|[1-9])"},G:{g:1,c:"h = parseInt(results[{0}], 10);\\n",s:"(2[0-3]|1[0-9]|[0-9])"},h:{g:1,c:"h = parseInt(results[{0}], 10);\\n",s:"(1[0-2]|0[1-9])"},H:{g:1,c:"h = parseInt(results[{0}], 10);\\n",s:"(2[0-3]|[0-1][0-9])"},i:{g:1,c:"i = parseInt(results[{0}], 10);\\n",s:"([0-5][0-9])"},s:{g:1,c:"s = parseInt(results[{0}], 10);\\n",s:"([0-5][0-9])"},u:{g:1,c:"ms = results[{0}]; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\\n",s:"(\\\\d+)"},O:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(3,5) / 60),","mn = o.substring(3,5) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\\n"].join("\\n"),s:"([+-]\\\\d{4})"},P:{g:1,c:["o = results[{0}];","var sn = o.substring(0,1),","hr = o.substring(1,3)*1 + Math.floor(o.substring(4,6) / 60),","mn = o.substring(4,6) % 60;","o = ((-12 <= (hr*60 + mn)/60) && ((hr*60 + mn)/60 <= 14))? (sn + Ext.String.leftPad(hr, 2, '0') + Ext.String.leftPad(mn, 2, '0')) : null;\\n"].join("\\n"),s:"([+-]\\\\d{2}:\\\\d{2})"},T:{g:0,c:null,s:"[A-Z]{1,5}"},Z:{g:1,c:"zz = results[{0}] * 1;\\nzz = (-43200 <= zz && zz <= 50400)? zz : null;\\n",s:"([+-]?\\\\d{1,5})"},c:function(){var e,t,i=[],n=[d.formatCodeToRegex("Y",1),d.formatCodeToRegex("m",2),d.formatCodeToRegex("d",3),d.formatCodeToRegex("H",4),d.formatCodeToRegex("i",5),d.formatCodeToRegex("s",6),{c:"ms = results[7] || '0'; ms = parseInt(ms, 10)/Math.pow(10, ms.length - 3);\\n"},{c:["if (results[8]) {","if (results[8] == 'Z') {","zz = 0;","}","else if (results[8].indexOf(':') > -1) {",d.formatCodeToRegex("P",8).c,"}","else {",d.formatCodeToRegex("O",8).c,"}","}"].join("\\n")}];for(e=0,t=n.length;e<t;++e)i.push(n[e].c);return{g:1,c:i.join(""),s:[n[0].s,"(?:","-",n[1].s,"(?:","-",n[2].s,"(?:","(?:T| )?",n[3].s,":",n[4].s,"(?::",n[5].s,")?","(?:(?:\\\\.|,)(\\\\d+))?","(Z|(?:[-+]\\\\d{2}(?::)?\\\\d{2}))?",")?",")?",")?"].join("")}},U:{g:1,c:"u = parseInt(results[{0}], 10);\\n",s:"(-?\\\\d+)"}},compare:function(e,t,i){var n,r;return"string"==typeof e&&(e=Ext.Date.parse(e)),"string"==typeof t&&(t=Ext.Date.parse(t)),n=Ext.Date.format(e,"C"),r=Ext.Date.format(t,"C"),i||(n=n.substr(0,10),r=r.substr(0,10)),n<r?-1:r<n?1:0},dateFormat:function(e,t){return d.format(e,t)},isEqual:function(e,t){return e&&t?+e==+t:!(e||t)},format:function(e,t){var i=d.formatFunctions;return Ext.isDate(e)?(null==i[t]&&d.createFormat(t),i[t].call(e)+""):""},getTimezone:function(e){return e.toString().replace(/^.* (?:\\((.*)\\)|([A-Z]{1,5})(?:[\\-+][0-9]{4})?(?: -?\\d+)?)$/,"$1$2").replace(/[^A-Z]/g,"")},getGMTOffset:function(e,t){var i=e.getTimezoneOffset();return(0<i?"-":"+")+Ext.String.leftPad(Math.floor(Math.abs(i)/60),2,"0")+(t?":":"")+Ext.String.leftPad(Math.abs(i%60),2,"0")},getDayOfYear:function(e){var t,i=0,n=d.clone(e),r=e.getMonth();for(t=0,n.setDate(1),n.setMonth(0);t<r;n.setMonth(++t))i+=d.getDaysInMonth(n);return i+e.getDate()-1},getWeekOfYear:function(e){var t=l.UTC(e.getFullYear(),e.getMonth(),e.getDate()+3)/864e5,i=Math.floor(t/7),n=new l(6048e5*i).getUTCFullYear();return i-Math.floor(l.UTC(n,0,7)/6048e5)+1},isLeapYear:function(e){var t=e.getFullYear();return!(0!=(3&t)||!(t%100||t%400==0&&t))},getFirstDayOfMonth:function(e){var t=(e.getDay()-(e.getDate()-1))%7;return t<0?7+t:t},getLastDayOfMonth:function(e){return d.getLastDateOfMonth(e).getDay()},getFirstDateOfMonth:function(e){return new l(e.getFullYear(),e.getMonth(),1)},getLastDateOfMonth:function(e){return new l(e.getFullYear(),e.getMonth(),d.getDaysInMonth(e))},getDaysInMonth:(i=[31,28,31,30,31,30,31,31,30,31,30,31],function(e){var t=e.getMonth();return 1===t&&d.isLeapYear(e)?29:i[t]}),getSuffix:function(e){switch(e.getDate()){case 1:case 21:case 31:return"st";case 2:case 22:return"nd";case 3:case 23:return"rd";default:return"th"}},clone:function(e){return new l(e.getTime())},isDST:function(e){return new l(e.getFullYear(),0,1).getTimezoneOffset()!==e.getTimezoneOffset()},clearTime:function(e,t){var i,n,r;if(isNaN(e.getTime()))return e;if(t)return d.clearTime(d.clone(e));if(i=e.getDate(),e.setHours(0),e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),e.getDate()!==i){for(n=1,r=d.add(e,d.HOUR,n);r.getDate()!==i;n++,r=d.add(e,d.HOUR,n));e.setDate(i),e.setHours(r.getHours())}return e},add:function(e,t,i,n){var r,s,o=d.clone(e),a=0;if(!t||0===i)return o;if(s=i-parseInt(i,10),i=parseInt(i,10))switch(t.toLowerCase()){case d.MILLI:n?o.setMilliseconds(o.getMilliseconds()+i):o.setTime(o.getTime()+i);break;case d.SECOND:n?o.setSeconds(o.getSeconds()+i):o.setTime(o.getTime()+1e3*i);break;case d.MINUTE:n?o.setMinutes(o.getMinutes()+i):o.setTime(o.getTime()+60*i*1e3);break;case d.HOUR:n?o.setHours(o.getHours()+i):o.setTime(o.getTime()+60*i*60*1e3);break;case d.DAY:!1===n?o.setTime(o.getTime()+24*i*60*60*1e3):o.setDate(o.getDate()+i);break;case d.MONTH:28<(r=e.getDate())&&(r=Math.min(r,d.getLastDateOfMonth(d.add(d.getFirstDateOfMonth(e),d.MONTH,i)).getDate())),o.setDate(r),o.setMonth(e.getMonth()+i);break;case d.YEAR:28<(r=e.getDate())&&(r=Math.min(r,d.getLastDateOfMonth(d.add(d.getFirstDateOfMonth(e),d.YEAR,i)).getDate())),o.setDate(r),o.setFullYear(e.getFullYear()+i)}if(s){switch(t.toLowerCase()){case d.MILLI:a=1;break;case d.SECOND:a=1e3;break;case d.MINUTE:a=6e4;break;case d.HOUR:a=36e5;break;case d.DAY:a=864e5;break;case d.MONTH:a=864e5*(r=d.getDaysInMonth(o));break;case d.YEAR:a=864e5*(r=d.isLeapYear(o)?366:365)}a&&o.setTime(o.getTime()+a*s)}return o},subtract:function(e,t,i,n){return d.add(e,t,-i,n)},between:function(e,t,i){var n=e.getTime();return t.getTime()<=n&&n<=i.getTime()},isWeekend:function(e){return-1<Ext.Array.indexOf(this.weekendDays,e.getDay())},utcToLocal:function(e){return new Date(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate(),e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds())},localToUtc:function(e){return d.utc(e.getFullYear(),e.getMonth(),e.getDate(),e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds())},utc:function(e,t,i,n,r,s,o){return new Date(Date.UTC(e,t,i,n||0,r||0,s||0,o||0))},compat:function(){var e,t,i,n,r=["useStrict","formatCodeToRegex","parseFunctions","parseRegexes","formatFunctions","y2kYear","MILLI","SECOND","MINUTE","HOUR","DAY","MONTH","YEAR","defaults","dayNames","monthNames","monthNumbers","getShortMonthName","getShortDayName","getMonthNumber","formatCodes","isValid","parseDate","getFormatCode","createFormat","createParser","parseCodes"],s=["dateFormat","format","getTimezone","getGMTOffset","getDayOfYear","getWeekOfYear","isLeapYear","getFirstDayOfMonth","getLastDayOfMonth","getDaysInMonth","getSuffix","clone","isDST","clearTime","add","between"],o=r.length,a=s.length;for(n=0;n<o;n++)l[t=r[n]]=d[t];for(e=0;e<a;e++)i=s[e],l.prototype[i]=function(){var e=Array.prototype.slice.call(arguments);return e.unshift(this),d[i].apply(d,e)}},diff:function(e,t,i){var n,r=t-e;switch(i){case d.MILLI:return r;case d.SECOND:return Math.floor(r/1e3);case d.MINUTE:return Math.floor(r/6e4);case d.HOUR:return Math.floor(r/36e5);case d.DAY:return Math.floor(r/864e5);case"w":return Math.floor(r/6048e5);case d.MONTH:return n=12*t.getFullYear()+t.getMonth()-(12*e.getFullYear()+e.getMonth()),d.add(e,i,n)>t?n-1:n;case d.YEAR:return n=t.getFullYear()-e.getFullYear(),d.add(e,i,n)>t?n-1:n}},align:function(e,t,i){var n=new l(+e);switch(t.toLowerCase()){case d.MILLI:return n;case d.SECOND:return n.setUTCSeconds(n.getUTCSeconds()-n.getUTCSeconds()%i),n.setUTCMilliseconds(0),n;case d.MINUTE:return n.setUTCMinutes(n.getUTCMinutes()-n.getUTCMinutes()%i),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n;case d.HOUR:return n.setUTCHours(n.getUTCHours()-n.getUTCHours()%i),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n;case d.DAY:return 7!==i&&14!==i||n.setUTCDate(n.getUTCDate()-n.getUTCDay()+1),n.setUTCHours(0),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n;case d.MONTH:return n.setUTCMonth(n.getUTCMonth()-(n.getUTCMonth()-1)%i,1),n.setUTCHours(0),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),n;case d.YEAR:return n.setUTCFullYear(n.getUTCFullYear()-n.getUTCFullYear()%i,1,1),n.setUTCHours(0),n.setUTCMinutes(0),n.setUTCSeconds(0),n.setUTCMilliseconds(0),e}},flexParse:function(e,t){var i,n,r,s,o,a=c.exec(e);if(!a)return Ext.Date.parse(e,"C");if(t=t||Ext.Date.defaultFormat,a[2]||a[4]){if(a[2]&&a[4])return null;s=(a[2]?(r=d.monthNumbers[Ext.String.capitalize(a[2].substr(0,3))],n=parseInt(a[3])):(n=parseInt(a[1]),r=d.monthNumbers[Ext.String.capitalize(a[4].substr(0,3))]),parseInt(a[5]))}else i=t[0],!g[i]&&(h[i]||12<a[1]&&a[3]<13)?(n=parseInt(a[1]),r=parseInt(a[3])-1,s=parseInt(a[5])):!g[i]&&(f[i]||12<a[3]&&a[1]<13)?(r=parseInt(a[1])-1,n=parseInt(a[3]),s=parseInt(a[5])):(s=parseInt(a[1]),r=parseInt(a[3])-1,n=parseInt(a[5]));return isNaN(r)||r<0||11<r?null:(s<d.y2kYear&&(s+=2e3),o=new Date(s,r,1,0,0,0),n<1||n>Ext.Date.getDaysInMonth(o)?null:(o.setDate(n),o))}}).parseCodes.C=d.parseCodes.c,d}(),Ext.Function=function(){function e(){var e,t,i,n,r=l.length;for(o=null,t=0;t<r;t++)e=(i=l[t])[3],d[e]&&(delete d[e],(n=Ext.Timer.get(e,"raf"))&&n.tick(),i[0].apply(i[1]||g,i[2]||c),n&&n.tock());l=l.slice(r)}function s(){Ext.elevate(e)}var o,a=0,l=[],c=[],u=0,d={},h=Array.prototype.slice,f=window,g=Ext.global,t=!Ext.disableImmediate&&!(!g.setImmediate||!g.clearImmediate),p=f.requestAnimationFrame||f.webkitRequestAnimationFrame||f.mozRequestAnimationFrame||f.oRequestAnimationFrame||function(e){function t(){e(n+r)}var i,n=Ext.now(),r=Math.max(0,16-(n-a));return t.$origFn=e.$origFn||e,t.$skipTimerCheck=t.$origFn.$skipTimerCheck,i=f.setTimeout(t,r),a=n+r,i},m={flexSetter:function(r){return function(e,t){var i,n;if(null!==e)if("string"!=typeof e){for(i in e)e.hasOwnProperty(i)&&r.call(this,i,e[i]);if(Ext.enumerables)for(n=Ext.enumerables.length;n--;)i=Ext.enumerables[n],e.hasOwnProperty(i)&&r.call(this,i,e[i])}else r.call(this,e,t);return this}},bind:function(e,t,i,n){if(arguments.length<=2)return e.bind(t);var r=e;return function(){var e=i||arguments;return!0===n?e=(e=h.call(arguments,0)).concat(i):"number"==typeof n&&(e=h.call(arguments,0),Ext.Array.insert(e,n,i)),r.apply(t||g,e)}},bindCallback:function(t,i,n,r,s){return function(){var e=h.call(arguments);return Ext.callback(t,i,n?n.concat(e):e,r,s)}},pass:function(t,i,n){return Ext.isArray(i)||(i=Ext.isIterable(i)?Ext.Array.clone(i):void 0!==i?[i]:[]),function(){var e=i.slice();return e.push.apply(e,arguments),t.apply(n||this,e)}},alias:function(e,t){return function(){return e[t].apply(e,arguments)}},clone:function(e){var t,i;for(i in t=function(){return e.apply(this,arguments)},e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t},createInterceptor:function(t,i,n,r){return Ext.isFunction(i)?(r=Ext.isDefined(r)?r:null,function(){var e=arguments;return!1!==i.apply(n||this||g,e)?t.apply(this||g,e):r}):t},createDelayed:function(s,o,e,t,i){var a=s;return(e||t)&&(a=Ext.Function.bind(s,e,t,i)),function(){var e,t,i,n=this,r=h.call(arguments);e=function(){Ext.elevate(a,n,r,i)},t=setTimeout(e,o),e.$origFn=s.$origFn||s,e.$skipTimerCheck=e.$origFn.$skipTimerCheck,i=Ext.Timer.created("timeout",t,{type:"createDelayed",fn:s,timerFn:e})}},defer:function(e,t,i,n,r){var s,o,a,l=0;return o=i||n||r?Ext.Function.bind(e,i,n,r):e,0<t?(s=function(){Ext.elevate(o,null,null,a)},l=setTimeout(s,t),s.$origFn=e.$origFn||e,s.$skipTimerCheck=s.$origFn.$skipTimerCheck,a=Ext.Timer.created("timeout",l,{type:"defer",fn:e,timerFn:s})):o(),l},interval:function(e,t,i,n,r){var s,o,a,l;return a=Ext.Function.bind(e,i,n,r),s=function(){Ext.elevate(a,null,null,l)},o=setInterval(s,t),s.$origFn=a.$origFn||e,s.$skipTimerCheck=s.$origFn.$skipTimerCheck,l=Ext.Timer.created("interval",o,{type:"interval",fn:e,timerFn:s}),o},createSequence:function(t,i,n){return i?function(){var e=t.apply(this,arguments);return i.apply(n||this,arguments),e}:t},createBuffered:function(r,s,o,a){var l,c=function(){var e,t,i=a||h.call(arguments,0),n=o||this;l&&Ext.undefer(l),e=function(){Ext.elevate(r,n,i,t)},c.timer=l=setTimeout(e,s),e.$origFn=r.$origFn||r,e.$skipTimerCheck=e.$origFn.$skipTimerCheck,t=Ext.Timer.created("timeout",l,{type:"createBuffered",fn:r,timerFn:e})};return c},createAnimationFrame:function(i,n,r,s){var o,a;return s=s||3,o=function(){var e,t=r||h.call(arguments,0);n=n||this,3===s&&a&&m.cancelAnimationFrame(a),(1&s||!a)&&((e=function(){a=o.timerId=null,i.apply(n,t)}).$origFn=i.$origFn||i,e.$skipTimerCheck=e.$origFn.$skipTimerCheck,a=o.timerId=m.requestAnimationFrame(e))}},requestAnimationFrame:function(e,t,i){var n=++u,r=h.call(arguments,0);return r[3]=n,d[n]=1,Ext.Timer.created("raf",n,{type:"raf",fn:e}),l.push(r),o=o||p(s),n},cancelAnimationFrame:function(e){delete d[e],Ext.Timer.cancel("raf",e)},createThrottled:function(e,t,i){function n(){e.apply(i,s),a=Ext.now(),s=o=null}var r,s,o,a=0;return n.$origFn=e.$origFn||e,n.$skipTimerCheck=n.$origFn.$skipTimerCheck,function(){i=i||this,r=Ext.now()-a,s=Ext.Array.slice(arguments),t<=r?(Ext.undefer(o),n()):o=o||Ext.defer(n,t-r)}},createBarrier:function(e,t,i){function n(){--e||t.apply(i,arguments)}return n.$origFn=t.$origFn||t,n.$skipTimerCheck=n.$origFn.$skipTimerCheck,n},interceptBefore:function(e,t,i,n){var r=e[t]||Ext.emptyFn;return e[t]=function(){var e=i.apply(n||this,arguments);return r.apply(this,arguments),e}},interceptAfter:function(e,t,i,n){var r=e[t]||Ext.emptyFn;return e[t]=function(){return r.apply(this,arguments),i.apply(n||this,arguments)}},interceptAfterOnce:function(t,i,n,r){var s,o=t[i];return s=function(){var e;return o&&o.apply(this,arguments),e=n.apply(r||this,arguments),t[i]=o,t=i=n=r=o=s=null,e},t[i]=s},makeCallback:function(e,t){return t[e]||(t.$className&&Ext.raise('No method "'+e+'" on '+t.$className),Ext.raise('No method "'+e+'"')),function(){return t[e].apply(t,arguments)}},memoize:function(i,n,r){var s={},o=r&&Ext.isFunction(r);return function(e){var t=o?r.apply(n,arguments):e;return t in s||(s[t]=i.apply(n,arguments)),s[t]}},_stripCommentRe:/(\\/\\*([^*]|[\\r\\n]|(\\*+([^*/]|[\\r\\n])))*\\*+\\/)|(\\/\\/.*)/g,toCode:function(e){var t=e?e.toString():"";return t=t.replace(m._stripCommentRe,"")},fireElevatedHandlers:function(){s()}};return Ext.asap=t?function(e,t,i){var n,r,s,o=e;return null==t&&null==i||(o=m.bind(e,t,i)),n=function(){Ext.elevate(o,null,null,s)},r=setImmediate(n),n.$origFn=e.$origFn||e,n.$skipTimerCheck=n.$origFn.$skipTimerCheck,s=Ext.Timer.created("asap",r,{type:"asap",fn:e,timerFn:n}),r}:function(e,t,i){var n,r,s,o=e;return null==t&&null==i||(o=m.bind(e,t,i)),n=function(){Ext.elevate(o,null,null,s)},r=setTimeout(n,0,!0),n.$origFn=e.$origFn||e,n.$skipTimerCheck=n.$origFn.$skipTimerCheck,s=Ext.Timer.created("timeout",r,{type:"asap",fn:e,timerFn:n}),r},Ext.unasap=t?function(e){return e&&(clearImmediate(e),Ext.Timer.cancel("asap",e)),null}:function(e){return Ext.undefer(e)},Ext.asapCancel=function(e){return Ext.unasap(e)},Ext.defer=m.defer,Ext.undefer=function(e){return e&&(clearTimeout(e),Ext.Timer.cancel("timeout",e)),null},Ext.interval=m.interval,Ext.uninterval=function(e){return e&&(clearInterval(e),Ext.Timer.cancel("interval",e)),null},Ext.pass=m.pass,Ext.bind=m.bind,Ext.raf=function(){return m.requestAnimationFrame.apply(m,arguments)},Ext.unraf=function(e){m.cancelAnimationFrame(e)},m}(),Ext.Number=new function(){var s=this,e="1"!==.9.toFixed(),n=Math,l={count:!1,inclusive:!1,wrap:!0};Number.MIN_SAFE_INTEGER=Number.MIN_SAFE_INTEGER||-(n.pow(2,53)-1),Number.MAX_SAFE_INTEGER=Number.MAX_SAFE_INTEGER||n.pow(2,53)-1,Ext.apply(s,{MIN_SAFE_INTEGER:Number.MIN_SAFE_INTEGER,MAX_SAFE_INTEGER:Number.MAX_SAFE_INTEGER,MAX_32BIT_INTEGER:n.pow(2,31)-1,floatRe:/^[-+]?(?:\\d+|\\d*\\.\\d*)(?:[Ee][+-]?\\d+)?$/,intRe:/^[-+]?\\d+(?:[Ee]\\+?\\d+)?$/,Clip:{DEFAULT:l,COUNT:Ext.applyIf({count:!0},l),INCLUSIVE:Ext.applyIf({inclusive:!0},l),NOWRAP:Ext.applyIf({wrap:!1},l)},parseFloat:function(e){return void 0===e&&(e=null),null!==e&&"number"!=typeof e&&(e=String(e),e=s.floatRe.test(e)?+e:null,isNaN(e)&&(e=null)),e},parseInt:function(e){return void 0===e&&(e=null),"number"==typeof e?e=Math.floor(e):null!==e&&(e=String(e),e=s.intRe.test(e)?+e:null),e},binarySearch:function(e,t,i,n){var r,s;for(void 0===i&&(i=0),void 0===n&&(n=e.length),--n;i<=n;){if(t===(s=e[r=i+n>>>1]))return r;s<t?i=1+r:n=r-1}return i},bisectTuples:function(e,t,i,n,r){var s,o;for(void 0===n&&(n=0),void 0===r&&(r=e.length),--r;n<=r;){if(t===(o=e[s=n+r>>>1][i]))return s;o<t?n=1+s:r=s-1}return n},clipIndices:function(e,t,i){var n,r,s,o,a=0;for(n=(i=i||l).wrap,t=t||[],o=0;o<2;++o)r=s,s=null==(s=t[o])?a:o&&i.count?e<(s+=r)?e:s:(n&&(s=s<0?e+s:s),o&&i.inclusive&&++s,s<0?0:e<s?e:s),a=e;return t[0]=r,t[1]=s<r?r:s,t},constrain:function(e,t,i){var n=parseFloat(e);return null===t&&(t=e),null===i&&(i=e),n<t?t:i<n?i:n},snap:function(e,t,i,n){var r;return void 0===e||e<i?i||0:(t&&0!=(r=e%t)&&(e-=r,t<=2*r?e+=t:2*r<-t&&(e-=t)),s.constrain(e,i,n))},snapInRange:function(e,t,i,n){var r;return i=i||0,void 0===e||e<i?i:(t&&(r=(e-i)%t)&&(e-=r,t<=(r*=2)&&(e+=t)),void 0!==n&&e>(n=s.snapInRange(n,t,i))&&(e=n),e)},roundToNearest:function(e,t){return(t=t||1)*n.round(e/t)},roundToPrecision:function(e,t){var i=n.pow(10,t||1);return n.round(e*i)/i},truncateToPrecision:function(e,t){var i=n.pow(10,t||1);return parseInt(e*i,10)/i},sign:n.sign||function(e){return 0===(e=+e)||isNaN(e)?e:0<e?1:-1},log10:n.log10||function(e){return n.log(e)*n.LOG10E},isEqual:function(e,t,i){return"number"==typeof e&&"number"==typeof t&&"number"==typeof i||Ext.raise("All parameters should be valid numbers."),n.abs(e-t)<i},isFinite:Number.isFinite||function(e){return"number"==typeof e&&isFinite(e)},isInteger:Number.isInteger||function(e){return~~(e+0)===e},toFixed:e?function(e,t){var i;return t=t||0,i=n.pow(10,t),(n.round(e*i)/i).toFixed(t)}:function(e,t){return e.toFixed(t)},from:function(e,t){return isFinite(e)&&(e=parseFloat(e)),isNaN(e)?t:e},randomInt:function(e,t){return n.floor(n.random()*(t-e+1)+e)},correctFloat:function(e){return parseFloat(e.toPrecision(14))}}),Ext.num=function(){return s.from.apply(this,arguments)}},function(){function i(){}var u,y=/^\\?/,v=/(\\[):?([^\\]]*)\\]/g,E=/^([^\\[]+)/,b=/\\+/g;function n(e,t){var i;for(i in e)if(e.hasOwnProperty(i)&&e[i]!==t[i])return!1;return!0}u=Ext.Object={chain:Object.create||function(e){var t;return i.prototype=e,t=new i,i.prototype=null,t},clear:function(e){var t;for(t in e)delete e[t];return e},freeze:Object.freeze?function(e,t){var i;if(e&&"object"==typeof e&&!Object.isFrozen(e)&&(Object.freeze(e),t))for(i in e)u.freeze(e[i],t);return e}:Ext.identityFn,toQueryObjects:function(e,t,i){var n,r,s=u.toQueryObjects,o=[];if(Ext.isArray(t))for(n=0,r=t.length;n<r;n++)i?o=o.concat(s(e+"["+n+"]",t[n],!0)):o.push({name:e,value:t[n]});else if(Ext.isObject(t))for(n in t)t.hasOwnProperty(n)&&(i?o=o.concat(s(e+"["+n+"]",t[n],!0)):o.push({name:e,value:t[n]}));else o.push({name:e,value:t});return o},toQueryString:function(e,t){var i,n,r,s,o,a=[],l=[];for(i in e)e.hasOwnProperty(i)&&(a=a.concat(u.toQueryObjects(i,e[i],t)));for(n=0,r=a.length;n<r;n++)o=(s=a[n]).value,Ext.isEmpty(o)?o="":Ext.isDate(o)&&(o=Ext.Date.toString(o)),l.push(encodeURIComponent(s.name)+"="+encodeURIComponent(String(o)));return l.join("&")},fromQueryString:function(e,t){var i,n,r,s,o,a,l,c,u,d,h,f,g,p,m=e.replace(y,"").split("&"),x={};for(o=0,a=m.length;o<a;o++)if(0<(l=m[o]).length)if(r=(r=(n=l.split("="))[0]).replace(b,"%20"),r=decodeURIComponent(r),s=void 0!==(s=n[1])?(s=s.replace(b,"%20"),decodeURIComponent(s)):"",t){if(d=r.match(v),!(h=r.match(E)))throw new Error('[Ext.Object.fromQueryString] Malformed query string given, failed parsing name from "'+l+'"');if(r=h[0],f=[],null===d){x[r]=s;continue}for(c=0,u=d.length;c<u;c++)g=2===(g=d[c]).length?"":g.substring(1,g.length-1),f.push(g);for(f.unshift(r),i=x,c=0,u=f.length;c<u;c++)g=f[c],c===u-1?Ext.isArray(i)&&""===g?i.push(s):i[g]=s:(void 0!==i[g]&&"string"!=typeof i[g]||(p=f[c+1],i[g]=Ext.isNumeric(p)||""===p?[]:{}),i=i[g])}else x.hasOwnProperty(r)?(Ext.isArray(x[r])||(x[r]=[x[r]]),x[r].push(s)):x[r]=s;return x},each:function(e,t,i){var n,r,s=Ext.enumerables;if(e){for(r in i=i||e,e)if(e.hasOwnProperty(r)&&!1===t.call(i,r,e[r],e))return;if(s)for(n=s.length;n--;)if(e.hasOwnProperty(r=s[n])&&!1===t.call(i,r,e[r],e))return}},eachValue:function(e,t,i){var n,r,s=Ext.enumerables;for(r in i=i||e,e)if(e.hasOwnProperty(r)&&!1===t.call(i,e[r]))return;if(s)for(n=s.length;n--;)if(e.hasOwnProperty(r=s[n])&&!1===t.call(i,e[r]))return},merge:function(e){for(var t,i,n,r,s=1,o=arguments,a=o.length,l=u.merge,c=Ext.clone;s<a;s++)for(i in t=o[s])(n=t[i])&&n.constructor===Object?(r=e[i])&&r.constructor===Object?l(r,n):e[i]=c(n):e[i]=n;return e},mergeIf:function(e){for(var t,i,n,r=1,s=arguments.length,o=Ext.clone;r<s;r++)for(i in t=arguments[r])i in e||((n=t[i])&&n.constructor===Object?e[i]=o(n):e[i]=n);return e},getAllKeys:function(e){var t,i=[];for(t in e)i.push(t);return i},getKey:function(e,t){var i;for(i in e)if(e.hasOwnProperty(i)&&e[i]===t)return i;return null},getValues:function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(e[t]);return i},getKeys:"function"==typeof Object.keys?function(e){return e?Object.keys(e):[]}:function(e){var t,i=[];for(t in e)e.hasOwnProperty(t)&&i.push(t);return i},getSize:function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i},isEmpty:function(e){var t;for(t in e)if(e.hasOwnProperty(t))return!1;return!0},equals:function(e,t){return e===t||(e&&t?n(e,t)&&n(t,e):!e&&!t&&e===t)},fork:function(e){var t,i,n;if(e&&e.constructor===Object)for(i in t=u.chain(e),e)(n=e[i])&&(n.constructor===Object?t[i]=u.fork(n):n instanceof Array&&(t[i]=Ext.Array.clone(n)));else t=e;return t},defineProperty:"defineProperty"in Object?Object.defineProperty:function(e,t,i){Object.prototype.__defineGetter__&&(i.get&&e.__defineGetter__(t,i.get),i.set&&e.__defineSetter__(t,i.set))},classify:function(e){var t,i,n,r=e,s=[],o={};for(i in t=function(){var e,t,i;for(t=0,i=s.length;t<i;t++)this[e=s[t]]=new o[e]},e)e.hasOwnProperty(i)&&(n=e[i])&&n.constructor===Object&&(s.push(i),o[i]=u.classify(n));return t.prototype=r,t}},Ext.merge=Ext.Object.merge,Ext.mergeIf=Ext.Object.mergeIf}(),Ext.apply(Ext,{_namedScopes:{this:{isThis:1},controller:{isController:1},owner:{isOwner:1},up:{isUp:1},self:{isSelf:1},"self.controller":{isSelf:1,isController:1}},scrollbar:{_size:null,size:function(e){var t=Ext.scrollbar,i=t._size;if(Ext.isDomReady||Ext.raise("Ext.scrollbar.size() called before DomReady"),e||!i){var n,r,s=document.body,o=document.createElement("div");o.style.width=o.style.height="100px",o.style.overflow="scroll",o.style.position="absolute",s.appendChild(o),t._size=i={width:r=o.offsetWidth-o.clientWidth,height:n=o.offsetHeight-o.clientHeight},i.reservedWidth=r?"calc(100% - "+r+"px)":"",i.reservedHeight=n?"calc(100% - "+n+"px)":"",s.removeChild(o)}return i},height:function(e){return Ext.scrollbar.size(e).height},width:function(e){return Ext.scrollbar.size(e).width}},escapeId:function(){function t(e,t){return"\\\\"+t}function i(e,t){return"\\\\00"+t.charCodeAt(0).toString(16)+" "}var n=/^[a-zA-Z_][a-zA-Z0-9_\\-]*$/i,r=/([\\W]{1})/g,s=/^(\\d)/g;return function(e){return n.test(e)?e:e.replace(r,t).replace(s,i)}}(),lookUpFn:function(e,t){var i,n;for(e&&Ext.isFunction(e.up)||Ext.raise('Callback "up" syntax requires a caller with "up" method'),n=e.up();n&&!n[t];n=n.up())if((i=n.controller)&&i[t]){n=i;break}return n&&Ext.isFunction(n[t])||Ext.raise('No such method "'+t+'" found up() from '+(e.getId?e.getId():e.id)),n},callback:function(e,t,i,n,r,s){if(e){var o,a=t in Ext._namedScopes;return e.charAt?("."===e[2]?("up"!==e.substr(0,2)&&Ext.raise('Invalid callback method name "'+e+'"'),t&&Ext.raise('Callback "up" syntax is incompatible with scopes'),t=Ext.lookUpFn(r,e=e.substr(3))):r&&(a&&a.isUp?t=Ext.lookUpFn(r,e):t&&!a||(t=r.resolveListenerScope(a?t:s))),t&&Ext.isObject(t)||Ext.raise('Named method "'+e+'" requires a scope object'),Ext.isFunction(t[e])||Ext.raise('No method named "'+e+'" on '+(t.$className||"scope object")),e=t[e]):t=a?s||r:t||r,e&&Ext.isFunction(e)&&(t=t||Ext.global,n?Ext.defer(e,n,t,i):o=i?e.apply(t,i):e.call(t)),o}},coerce:function(e,t){var i=Ext.typeOf(e),n=Ext.typeOf(t),r="string"==typeof e;if(i!==n)switch(n){case"string":return String(e);case"number":return Number(e);case"boolean":return!(r&&(!e||"false"===e||"0"===e))&&Boolean(e);case"null":return r&&(!e||"null"===e)&&null;case"undefined":return r&&(!e||"undefined"===e)&&void 0;case"date":return r&&isNaN(e)?Ext.Date.parse(e,Ext.Date.defaultFormat):Date(Number(e))}return e},copyTo:function(e,t,i,n){var r,s,o;for("string"==typeof i&&(i=i.split(Ext.propertyNameSplitRe)),s=0,o=i?i.length:0;s<o;s++)r=i[s],(n||t.hasOwnProperty(r))&&(e[r]=t[r]);return e},copy:function(e,t,i,n){var r,s,o;for("string"==typeof i&&(i=i.split(Ext.propertyNameSplitRe)),s=0,o=i?i.length:0;s<o;s++)r=i[s],(t.hasOwnProperty(r)||n&&r in t)&&(e[r]=t[r]);return e},propertyNameSplitRe:/[,;\\s]+/,copyToIf:function(e,t,i){var n,r,s;for("string"==typeof i&&(i=i.split(Ext.propertyNameSplitRe)),r=0,s=i?i.length:0;r<s;r++)void 0===e[n=i[r]]&&(e[n]=t[n]);return e},copyIf:function(e,t,i){var n,r,s;for("string"==typeof i&&(i=i.split(Ext.propertyNameSplitRe)),r=0,s=i?i.length:0;r<s;r++)!((n=i[r])in e)&&n in t&&(e[n]=t[n]);return e},extend:function(){function o(e){var t;for(t in e)e.hasOwnProperty(t)&&(this[t]=e[t])}var a=Object.prototype.constructor;return function(t,e,i){Ext.isObject(e)&&(i=e,e=t,t=i.constructor!==a?i.constructor:function(){e.apply(this,arguments)}),e||Ext.raise({sourceClass:"Ext",sourceMethod:"extend",msg:"Attempting to extend from a class which has not been loaded on the page."});function n(){}var r,s=e.prototype;return n.prototype=s,(((r=t.prototype=new n).constructor=t).superclass=s).constructor===a&&(s.constructor=e),t.override=function(e){Ext.override(t,e)},r.override=o,r.proto=r,t.override(i),t.extend=function(e){return Ext.extend(t,e)},t}}(),isOnline:function(){return Ext.global.navigator.onLine},iterate:function(e,t,i){Ext.isEmpty(e)||(void 0===i&&(i=e),Ext.isIterable(e)?Ext.Array.each.call(Ext.Array,e,t,i):Ext.Object.each.call(Ext.Object,e,t,i))},_resourcePoolRe:/^[<]([^<>@:]*)(?:[@]([^<>@:]+))?[>](.+)$/,resolveResource:function(e){var t,i=e;return e&&"<"===e.charAt(0)&&(t=Ext._resourcePoolRe.exec(e))&&(i=Ext.getResourcePath(t[3],t[1],t[2])),i},urlEncode:function(){var e=Ext.Array.from(arguments),t="";return Ext.isString(e[1])&&(t=e[1]+"&",e[1]=!1),t+Ext.Object.toQueryString.apply(Ext.Object,e)},urlDecode:function(){return Ext.Object.fromQueryString.apply(Ext.Object,arguments)},getScrollbarSize:function(e){return Ext.scrollbar.size(e)},typeOf:function(){var r=/\\S/,s=Object.prototype.toString,o={number:1,string:1,boolean:1,undefined:1},a={"[object Array]":"array","[object Date]":"date","[object Boolean]":"boolean","[object Number]":"number","[object RegExp]":"regexp"};return function(e){if(null===e)return"null";var t,i,n=typeof e;return o[n]?n:(t=a[i=s.call(e)])?t:"function"==n?"function":"object"==n?void 0!==e.nodeType?3===e.nodeType?r.test(e.nodeValue)?"textnode":"whitespace":"element":"object":(Ext.raise({sourceClass:"Ext",sourceMethod:"typeOf",msg:'Failed to determine the type of "'+e+'".'}),i)}}(),factory:function(e,t,i,n){var r,s=Ext.ClassManager;if(!e||e.isInstance)return i&&i!==e&&i.destroy(),e;if(n){if("string"==typeof e)return s.instantiateByAlias(n+"."+e);if(Ext.isObject(e)&&"type"in e)return s.instantiateByAlias(n+"."+e.type,e)}return!0===e?(i||t||Ext.raise("[Ext.factory] Cannot determine type of class to create"),i||Ext.create(t)):(Ext.isObject(e)||Ext.raise("Invalid config, must be a valid config object"),"xtype"in e?r=s.instantiateByAlias("widget."+e.xtype,e):"xclass"in e&&(r=Ext.create(e.xclass,e)),r?(i&&i.destroy(),r):i?i.setConfig(e):Ext.create(t,e))},convertKeyedItems:function(e,t,i){if(e&&!e.isInstance&&Ext.isObject(e)){var n,r,s,o=e;if(e=[],o.xtype||o.xclass||o.itemId||o.id)e.push(o);else for(r in o)(n=o[r])&&(!0===n?n={}:"function"==typeof n?(i||Ext.raise("Function not expected here"),s=n,(n={})[i]=s):"string"==typeof n?(s=n,(n={})[t||"xtype"]=s):n=Ext.apply({},n),n.itemId=r,e.push(n))}return e},sortByWeight:function(e){e&&Ext.Array.sort(e,Ext.weightSortFn)},weightSortFn:function(e,t){return(e.weight||0)-(t.weight||0)},concat:function(e,t){var i=null==t,n=Ext.emptyArray;return null==e?i?e:n.concat(t):i?n.concat(e):n.concat(e,t)},log:function(){var f=/string|number|boolean/;function d(e){var t,i,n,r,s,o,a,l=Ext.global.console,c="log",u=d.indent||0;d.indent=u,"string"!=typeof e&&(e=(t=e).msg||"",c=t.level||c,i=t.dump,r=t.stack,n=t.prefix,s=t.fn,t.indent?++d.indent:t.outdent&&(d.indent=u=Math.max(u-1,0)),!i||l&&l.dir||(e+=function e(t,i,n,r){var s,o,a,l,c,u,d=[];if(Ext.isArray(t)?(c="[",u="]"):Ext.isObject(t)&&(c="{",u="}"),(n=n||3)<i)return c+"..."+u;i=i||1;var h=new Array(i).join("    ");for(l in t)if(t.hasOwnProperty(l)){if("function"==(o=typeof(a=t[l]))){if(!r)continue;s=o}else s="undefined"==o?o:null===a||f.test(o)||Ext.isDate(a)?Ext.encode(a):Ext.isArray(a)||Ext.isObject(a)?e(a,i+1,n,r):o;d.push(h+l+": "+s)}return d.length?c+"\\n    "+d.join(",\\n    ")+"\\n"+h+u:c+u}(i),i=null)),1<arguments.length&&(e+=Array.prototype.slice.call(arguments,1).join("")),n&&(e=n+" - "+e),e=u?Ext.String.repeat(" ",d.indentSize*u)+e:e,"log"!==c&&(e="["+c.charAt(0).toUpperCase()+"] "+e),s&&(e+="\\nCaller: "+s.toString()),l?(l[c]?l[c](e):l.log(e),i&&l.dir(i),r&&l.trace&&(l.firebug&&"error"===c||l.trace())):Ext.isOpera?opera.postError(e):(o=d.out,a=d.max,o.length>=a&&Ext.Array.erase(o,0,o.length-3*Math.floor(a/4)),o.push(e)),++d.count,++d.counters[c]}function e(e,t){"string"==typeof t[0]&&t.unshift({}),t[0].level=e,d.apply(this,t)}return d.error=function(){e("error",Array.prototype.slice.call(arguments))},d.info=function(){e("info",Array.prototype.slice.call(arguments))},d.warn=function(){e("warn",Array.prototype.slice.call(arguments))},d.count=0,d.counters={error:0,warn:0,info:0,log:0},d.indentSize=2,d.out=[],d.max=750,d}()||function(){function e(){}return e.info=e.warn=e.error=Ext.emptyFn,e}()}),function(){var x,y=[""],d=/([^\\d.])/,h=/[^\\d]/g,f=/[-+]/g,v=/\\s/g,g=/_/g,i={classic:1,modern:1};Ext.Version=x=function(e,t){var i,n,r,s,o,a,l,c=this,u=c.padModes;e.isVersion&&(e=e.version),c.version=l=String(e).toLowerCase().replace(g,".").replace(f,""),r=(i=l.charAt(0))in u?(l=l.substring(1),u[i]):t?u[t]:0,c.pad=r,a=l.search(d),c.shortVersion=l,-1!==a&&(c.release=o=l.substr(a,e.length),c.shortVersion=l.substr(0,a),o=x.releaseValueMap[o]||o),c.releaseValue=o||r,c.shortVersion=c.shortVersion.replace(h,""),c.parts=s=l.split(".");for(n=s.length;n--;)s[n]=parseInt(s[n],10);return r===1/0&&s.push(r),c.major=s[0]||r,c.minor=s[1]||r,c.patch=s[2]||r,c.build=s[3]||r,c},x.prototype={isVersion:!0,padModes:{"~":NaN,"^":1/0},release:"",compareTo:function(e){var t,i,n,r=this.pad,s=this.parts,o=s.length,a=e.isVersion?e:new x(e),l=a.pad,c=a.parts,u=c.length,d=Math.max(o,u);for(t=0;t<d;t++){if((i=t<o?s[t]:r)<(n=t<u?c[t]:l))return-1;if(n<i)return 1}return(i=this.releaseValue)<(n=a.releaseValue)?-1:n<i?1:0},toString:function(){return this.version},valueOf:function(){return this.version},getMajor:function(){return this.major},getMinor:function(){return this.minor},getPatch:function(){return this.patch},getBuild:function(){return this.build},getRelease:function(){return this.release},getReleaseValue:function(){return this.releaseValue},isGreaterThan:function(e){return 0<this.compareTo(e)},isGreaterThanOrEqual:function(e){return 0<=this.compareTo(e)},isLessThan:function(e){return this.compareTo(e)<0},isLessThanOrEqual:function(e){return this.compareTo(e)<=0},equals:function(e){return 0===this.compareTo(e)},match:function(e){return e=String(e),this.version.substr(0,e.length)===e},toArray:function(){var e=this;return[e.getMajor(),e.getMinor(),e.getPatch(),e.getBuild(),e.getRelease()]},getShortVersion:function(){return this.shortVersion},gt:function(e){return 0<this.compareTo(e)},lt:function(e){return this.compareTo(e)<0},gtEq:function(e){return 0<=this.compareTo(e)},ltEq:function(e){return this.compareTo(e)<=0}},Ext.apply(x,{aliases:{from:{extjs:"ext",core:"core",touch:"modern"},to:{ext:["extjs"],core:["core"],modern:["touch"]}},releaseValueMap:{dev:-6,alpha:-5,a:-5,beta:-4,b:-4,rc:-3,"#":-2,p:-1,pl:-1},getComponentValue:function(e){return e?isNaN(e)?this.releaseValueMap[e]||e:parseInt(e,10):0},compare:function(e,t){return(e.isVersion?e:new x(e)).compareTo(t)},set:function(e,t,i){var n,r=x.aliases.to[t],s=i.isVersion?i:new x(i);if(e[t]=s,r)for(n=r.length;0<n--;)e[r[n]]=s;return s}}),Ext.apply(Ext,{compatVersions:{},versions:{},lastRegisteredVersion:null,getCompatVersion:function(e){var t=Ext.compatVersions;return(e?t[x.aliases.from[e]||e]:t.ext||t.touch||t.core)||Ext.getVersion(e)},setCompatVersion:function(e,t){x.set(Ext.compatVersions,e,t)},setVersion:function(e,t){return e in i&&(Ext.toolkit=e),Ext.lastRegisteredVersion=x.set(Ext.versions,e,t),this},getVersion:function(e){var t=Ext.versions;return e?t[x.aliases.from[e]||e]:t.ext||t.touch||t.core},checkVersion:function(e,t){var i,n,r,s,o,a,l,c,u,d=Ext.isArray(e),h=x.aliases.from,f=d?e:y,g=f.length,p=Ext.versions,m=p.ext||p.touch;for(d||(y[0]=e),i=0;i<g;++i){if(Ext.isString(l=f[i])){if(0<=l.indexOf(" ")&&(l=l.replace(v,"")),(n=l.indexOf("@"))<0)c=l,u=m;else{if(!(u=p[h[a=l.substring(0,n)]||a])){if(t)return!1;continue}c=l.substring(n+1)}(n=c.indexOf("-"))<0?"+"===c.charAt(n=c.length-1)?(s=c.substring(0,n),o=null):s=o=c:o=(s=0<n?c.substring(0,n):null,c.substring(n+1)),r=!0,s&&(r=(s=new x(s,"~")).ltEq(u)),r&&o&&(r=(o=new x(o,"~")).gtEq(u))}else r=Ext.checkVersion(l.and||l.or,!l.or),l.not&&(r=!r);if(r){if(!t)return!0}else if(t)return!1}return!!t},deprecate:function(e,t,i,n){x.compare(Ext.getVersion(e),t)<1&&i.call(n)}})}(),function(e){var t,i,n=e&&e.packages||{},r=e&&e.compatibility;for(t in n)(i=n[t])&&i.version&&Ext.setVersion(t,i.version);if(r)if(Ext.isString(r))Ext.setCompatVersion("core",r);else for(t in r)Ext.setCompatVersion(t,r[t]);n.ext||n.touch||(Ext.setVersion("ext","7.2.0.67"),Ext.setVersion("core","7.2.0.67"))}(Ext.manifest),Ext.Config=function(e){var t=e.charAt(0).toUpperCase()+e.substr(1);this.name=e,this.names={internal:"_"+e,initializing:"is"+t+"Initializing",apply:"apply"+t,update:"update"+t,get:"get"+t,set:"set"+t,initGet:"initGet"+t,changeEvent:e.toLowerCase()+"change"},this.root=this},Ext.Config.map={},Ext.Config.get=function(e){var t=Ext.Config.map;return t[e]||(t[e]=new Ext.Config(e))},Ext.Config.prototype={self:Ext.Config,isConfig:!0,combine:function(e,t,i,n){return this.merge?e=this.merge(n?Ext.clone(e):e,t,i):e&&e.constructor===Object&&t&&t.constructor===Object?e=Ext.merge({},t,e):n&&e&&(e=Ext.clone(e)),e},equals:function(e,t){return e===t},getGetter:function(){return this.getter||(this.root.getter=this.makeGetter())},getInitGetter:function(){return this.initGetter||(this.root.initGetter=this.makeInitGetter())},getSetter:function(){return this.setter||(this.root.setter=this.makeSetter())},getEventedSetter:function(){return this.eventedSetter||(this.root.eventedSetter=this.makeEventedSetter())},getInternalName:function(e){return e.$configPrefixed?this.names.internal:this.name},mergeNew:function(e,t,i,n){var r,s;if(t)if(e)for(s in r=Ext.Object.chain(t),e)n&&s in r||(r[s]=e[s]);else r=t;else r=e;return r},mergeSets:function(e,t,i){var n,r,s=t?Ext.Object.chain(t):{};if(e instanceof Array)for(n=e.length;n--;)r=e[n],i&&r in s||(s[r]=!0);else if(e)if(e.constructor===Object)for(n in e)r=e[n],i&&n in s||(s[n]=r);else i&&e in s||(s[e]=!0);return s},makeGetter:function(){var e=this.name,t=this.names.internal;return function(){return this[this.$configPrefixed?t:e]}},makeInitGetter:function(){var t=this.name,e=this.names,i=e.set,n=e.get,r=e.initializing;return function(){var e=this;return e[r]=!0,delete e[n],e[i](e.config[t]),delete e[r],e[n].apply(e,arguments)}},makeSetter:function(){var e,s=this.name,t=this.names,o=t.internal,a=t.get,l=t.apply,c=t.update;return(e=function(e){var t,i=this,n=i.$configPrefixed?o:s,r=i[n];return delete i[a],i[l]&&void 0===(e=i[l](e,r))||e!==(r=i[n])&&(i[n]=e,i[c]&&i[c](e,r),(t=i.$configWatch)&&!i.isConfiguring&&t.fire(s,[i,s,i[n],r])),i}).$isDefault=!0,e},makeEventedSetter:function(){function r(e,t,i,n){e[n]=t,e[c]&&e[c](t,i);var r=e.$configWatch;r&&r.fire(s,[e,s,t,i])}var e,s=this.name,t=this.names,o=t.internal,a=t.get,l=t.apply,c=t.update,u=t.changeEvent;return(e=function(e){var t=this,i=t.$configPrefixed?o:s,n=t[i];return delete t[a],t[l]&&void 0===(e=t[l](e,n))||e!==(n=t[i])&&(t.isConfiguring?(t[i]=e,t[c]&&t[c](e,n)):t.fireEventedAction(u,[t,e,n],r,t,[t,e,n,i])),t}).$isDefault=!0,e}},function(){var E=Ext.Config,p=E.map,T=Ext.Object;Ext.Configurator=function(e){var t=this,i=e.prototype,n=e.superclass?e.superclass.self.$config:null;t.cls=e,(t.superCfg=n)?(t.configs=T.chain(n.configs),t.cachedConfigs=T.chain(n.cachedConfigs),t.initMap=T.chain(n.initMap),t.values=T.chain(n.values),t.needsFork=n.needsFork,t.deprecations=T.chain(n.deprecations)):(t.configs={},t.cachedConfigs={},t.initMap={},t.values={},t.deprecations={}),i.config=i.defaultConfig=t.values,e.$config=t},Ext.Configurator.prototype={self:Ext.Configurator,needsFork:!1,initList:null,add:function(e,t){var i,n,r,s,o,a,l,c,u,d,h=this,f=h.cls,g=h.configs,p=h.cachedConfigs,m=h.initMap,x=f.prototype,y=t&&t.$config.configs,v=h.values;for(l in e){if(r=!1,(n=(i=(d=e[l])&&d.constructor===Object)&&"$value"in d?d:null)&&(r=!!n.cached,i=(d=n.$value)&&d.constructor===Object),s=n&&n.merge,o=g[l]){if(t){if(!(s=o.merge))continue;n=null}else s=s||o.merge;t||!r||p[l]||Ext.raise("Redefining config as cached: "+l+" in class: "+f.$className),a=v[l],s?d=s.call(o,d,a,f,t):i&&a&&a.constructor===Object&&(d=Ext.merge({},a,d))}else y?(o=y[l],n=null):o=E.get(l),((g[l]=o).cached||r)&&(p[l]=!0),x[u=(c=o.names).get]||(x[u]=o.getter||o.getGetter()),x[u=c.set]||(x[u]=n&&n.evented?o.eventedSetter||o.getEventedSetter():o.setter||o.getSetter());n&&(o.owner!==f&&(g[l]=o=Ext.Object.chain(o),o.owner=f),Ext.apply(o,n),delete o.$value),!h.needsFork&&d&&(d.constructor===Object||d instanceof Array)&&(h.needsFork=!0),null!==d?m[l]=!0:(x.$configPrefixed?x[g[l].names.internal]=null:x[g[l].name]=null,l in m&&(m[l]=!1)),v[l]=d}},addDeprecations:function(e){var t,i,n,r=this.deprecations,s=(this.cls.$className||"")+"#";for(n in e)(i=e[n])?(t=i.message)||(t='This config has been renamed to "'+i+'"'):t="This config has been removed.",r[n]=s+n+": "+t},configure:function(e,t){var i,n,r,s,o,a,l,c,u,d,h,f,g,p=this,m=p.configs,x=p.deprecations,y=p.initMap,v=p.initListMap,E=p.initList,b=p.cls.prototype,C=p.values,S=0,w=!E;if(C=p.needsFork?T.fork(C):T.chain(C),e.isConfiguring=!0,w)for(c in p.initList=E=[],p.initListMap=v={},e.isFirstInstance=!0,y)d=(n=m[c]).cached,y[c]?(l=n.names,u=C[c],!b[l.set].$isDefault||b[l.apply]||b[l.update]||"object"==typeof u?(d?(i=i||[]).push(n):(E.push(n),v[c]=!0),e[l.get]=n.initGetter||n.getInitGetter()):b[n.getInternalName(b)]=u):d&&(b[n.getInternalName(b)]=void 0);if(a=i&&i.length){for(s=0;s<a;++s)e[o=i[s].getInternalName(b)]=null;for(s=0;s<a;++s)r=(l=(n=i[s]).names).get,e.hasOwnProperty(r)&&(e[l.set](C[n.name]),delete e[r]);for(s=0;s<a;++s)b[o=i[s].getInternalName(b)]=e[o],delete e[o]}for(t&&t.platformConfig&&(t=p.resolvePlatformConfig(e,t)),w&&e.afterCachedConfig&&!e.afterCachedConfig.$nullFn&&e.afterCachedConfig(t),e.config=C,s=0,a=E.length;s<a;++s)e[(n=E[s]).names.get]=n.initGetter||n.getInitGetter();if(!(g=e.self.$configTransforms)){for(c in e.self.$configTransforms=g=[],a=e.$configTransforms)g.push([c,a[c]]);if(1<(a=g.length))for(g.sort(p.transformSorter),s=0;s<a;++s)g[s]=g[s][0];else a&&(g[0]=g[0][0])}for(s=0;s<g.length;++s)e[c=g[s]]&&(t=e[c](t,p));if(t)for(c in t)u=t[c],n=m[c],x[c]&&(Ext.log.warn(x[c]),!n)||(n?(n.lazy||++S,v[c]||(e[n.names.get]=n.initGetter||n.getInitGetter()),h=C[c],n.merge?u=n.merge(u,h,e):u&&u.constructor===Object&&(u=h&&h.constructor===Object?Ext.merge(C[c],u):Ext.clone(u,!1))):(f=e.self.prototype[c],e.$configStrict&&"function"==typeof f&&!f.$nullFn&&Ext.raise("Cannot override method "+c+" on "+e.$className+" instance."),e[c]=u),C[c]=u);if(!e.beforeInitConfig||e.beforeInitConfig.$nullFn||!1!==e.beforeInitConfig(t)){if(t)for(c in t){if(!S)break;(n=m[c])&&!n.lazy&&(--S,r=(l=n.names).get,e.hasOwnProperty(r)&&(e[l.set](C[c]),delete e[l.get]))}for(s=0,a=E.length;s<a;++s)r=(l=(n=E[s]).names).get,!n.lazy&&e.hasOwnProperty(r)&&(e[l.set](C[n.name]),delete e[r]);delete e.isConfiguring}},getCurrentConfig:function(e){var t,i=e.defaultConfig,n={};for(t in i)n[t]=e[p[t].names.get]();return n},hoistConfigs:function(e,t,i){var n,r,s,o=e.config,a=this.configs,l=this.initListMap,c=!1;for(r=0;r<i.length;++r)s=i[r],t&&s in t&&(n=a[s],o[s]=n.combine(t[s],o[s],e),l[s]||(e[n.names.get]=n.initGetter||n.getInitGetter())),null!=o[s]&&(c=!0);return c},merge:function(e,t,i,n){var r,s,o,a,l=this.configs;for(r in n&&(t=Ext.clone(t,!1)),i)s=i[r],(a=l[r])&&(o=t[r],a.merge?s=a.merge(s,o,e):s&&s.constructor===Object&&(s=o&&o.constructor===Object?Ext.merge(o,s):Ext.clone(s,!1))),t[r]=s;return t},reconfigure:function(e,t,i){var n,r,s,o,a,l,c,u=e.config,d=[],h=e.$configStrict&&!(i&&!1===i.strict),f=this.configs,g=i&&i.defaults;for(a in t)if(n=f[a],(!g||!e.hasOwnProperty(n&&e.$configPrefixed?n.names.internal:a))&&(u[a]=t[a],!this.deprecations[a]||(Ext.log.warn(this.deprecations[a]),n))){if(n)e[n.names.get]=n.initGetter||n.getInitGetter();else if(c=e.self.prototype[a],h){if("function"==typeof c&&!c.$nullFn){Ext.Error.raise("Cannot override method "+a+" on "+e.$className+" instance.");continue}"type"!==a&&Ext.log.warn('No such config "'+a+'" for class '+e.$className)}d.push(a)}for(s=0,o=d.length;s<o;s++)(n=f[a=d[s]])?(r=(l=n.names).get,e.hasOwnProperty(r)&&(e[l.set](t[a]),delete e[r])):e[(l=(n=p[a]||Ext.Config.get(a)).names).set]?e[l.set](t[a]):e[a]=t[a]},resolvePlatformConfig:function(e,t){var i,n,r,s=t&&t.platformConfig,o=t;if(s&&(r=(n=Ext.getPlatformConfigKeys(s)).length))for(o=Ext.merge({},o),i=0,r=n.length;i<r;++i)this.merge(e,o,s[n[i]]);return o},transformSorter:function(e,t){return e[1]-t[1]}}}(),Ext.Base=function(e){function E(e,t,i){var n='"'+e+'" is deprecated.';return i?n+=" "+i:t&&(n+=' Please use "'+t+'" instead.'),function(){Ext.raise(n)}}function b(e,t,i,n){n=n||'"'+t+'" is deprecated.',i&&(n+=' Please use "'+i+'" instead.'),n&&Ext.Object.defineProperty(e,t,{get:function(){Ext.raise(n)},set:function(e){Ext.raise(n)},configurable:!0})}function C(e){return function(){return this[e].apply(this,arguments)}}function t(){}var i,r,s=[],n=[],o=function(e,t){return e.hasOwnProperty(t)||(e[t]=Ext.Object.chain(o(e.superclass,t))),e[t]},S=Ext.Version,w=/^\\d/,a={},l={},c=t.prototype;for(i in Ext.Reaper=r={delay:100,queue:[],timer:null,add:function(e){r.timer||(r.timer=Ext.defer(r.tick,r.delay)),r.queue.push(e)},flush:function(){r.timer&&(Ext.undefer(r.timer),r.timer=null);var e,t,i=r.queue,n=i.length;for(r.queue=[],e=0;e<n;++e)(t=i[e])&&t.$reap&&t.$reap()},tick:function(){r.timer=null,r.flush()}},Ext.apply(t,{$className:"Ext.Base",$isClass:!0,create:function(){return Ext.create.apply(Ext,[this].concat(Array.prototype.slice.call(arguments,0)))},addConfigTransform:function(e,t){var i=o(this.prototype,"$configTransforms");this.$configTransforms&&Ext.raise("Config transforms cannot be added after instances are created"),i[e]=t},addDeprecations:function(e){var t,i,n,r,s,o,a,l,c,u,d,h,f,g,p=this,m=[],x=Ext.getCompatVersion(e.name),y=p.getConfigurator(),v=(p.$className||"")+"#";for(i in e)w.test(i)&&((g=new Ext.Version(i)).deprecations=e[i],m.push(g));for(m.sort(S.compare),n=m.length;n--;){if(t=(g=m[n]).deprecations,s=p.prototype,f=t.statics,o=x&&x.lt(g)){if(!o)break}else;for(;t;){if(c=t.methods)for(u in c)l=null,(h=c[u])?Ext.isString(h)?(Ext.Assert.isNotDefinedProp(s,u),Ext.Assert.isDefinedProp(s,h),l=o?C(h):E(v+u,h)):(r="",(h.message||h.fn)&&(r=h.message,h=h.fn),a=s.hasOwnProperty(u)&&s[u],o&&h?(h.$owner=p,h.$name=u,h.name=v+u,a&&(h.$previous=a),l=h):a||(l=E(v+u,null,r))):(Ext.Assert.isNotDefinedProp(s,u),l=E(v+u)),l&&(s[u]=l);if((c=t.configs)&&y.addDeprecations(c),(c=t.properties)&&!o)for(u in c)d=c[u],Ext.isString(d)?b(s,v+u,d):d&&d.message?b(s,v+u,null,d.message):b(s,v+u);t=f,f=null,s=p}}},extend:function(e){var t,i,n,r=this,s=e.prototype;if(((t=r.prototype=Ext.Object.chain(s)).self=r).superclass=t.superclass=s,!e.$isClass)for(i in c)i in t&&(t[i]=c[i]);if(n=s.$inheritableStatics)for(i in n)r.hasOwnProperty(i)||(r[i]=e[i]);e.$onExtended&&(r.$onExtended=e.$onExtended.slice()),r.getConfigurator()},$onExtended:[],triggerExtended:function(){Ext.classSystemMonitor&&Ext.classSystemMonitor(this,"Ext.Base#triggerExtended",arguments);var e,t,i=this.$onExtended,n=i.length;if(0<n)for(e=0;e<n;e++)(t=i[e]).fn.apply(t.scope||this,arguments)},onExtended:function(e,t){return this.$onExtended.push({fn:e,scope:t}),this},addStatics:function(e){return this.addMembers(e,!0),this},addInheritableStatics:function(e){var t,i,n,r=this,s=r.prototype,o=r.$inheritableStatics;o||(o=Ext.apply({},s.$inheritableStatics),r.$inheritableStatics=s.$inheritableStatics=o);var a=Ext.getClassName(r)+".";for(t in e)e.hasOwnProperty(t)&&(i=e[t],n=r[t],"function"==typeof i&&(i.name=a+t),"function"!=typeof n||n.$isClass||n.$nullFn||(i.$previous=n),r[t]=i,o[t]=!0);return r},addMembers:function(e,t,i){var n,r,s,o,a,l,c,u=this,d=Ext.Function.clone,h=t?u:u.prototype,f=!t&&h.defaultConfig,g=Ext.enumerables,p=e.privates,m=(u.$className||"")+"#";for(a in p&&(delete e.privates,t||(c=p.statics,delete p.statics),l=p.privacy||i||"framework",u.addMembers(p,t,l),c&&u.addMembers(c,!0,l)),e)if(e.hasOwnProperty(a)){if(!0===i&&(i="framework"),(o=e[a])&&o.$nullFn&&i!==o.$privacy&&Ext.raise("Cannot use stock function for private method "+(u.$className?u.$className+"#":"")+a),"function"!=typeof o||o.$isClass||o.$nullFn){if(f&&a in f&&!h.config.hasOwnProperty(a)){(n=n||{})[a]=o;continue}}else{o.$owner&&(o=d(o)),h.hasOwnProperty(a)&&(o.$previous=h[a]),o.$owner=u,o.$name=a,o.name=m+a;var x=h[a];i?(o.$privacy=i,x&&x.$privacy&&x.$privacy!==i&&Ext.privacyViolation(u,x,o,t)):x&&x.$privacy&&Ext.privacyViolation(u,x,o,t)}h[a]=o}if(n&&u.addConfig(n),g)for(r=0,s=g.length;r<s;++r)e.hasOwnProperty(a=g[r])&&((o=e[a])&&!o.$nullFn&&(o.$owner&&(o=d(o)),o.$owner=u,o.$name=a,o.name=m+a,h.hasOwnProperty(a)&&(o.$previous=h[a])),h[a]=o);return this},addMember:function(e,t,i){return a[e]=t,this.addMembers(a,!1,i),delete a[e],this},hookMember:function(e,t){var i=this.prototype[e];return this.addMember(e,t,i&&i.$privacy)},borrow:function(e,t){Ext.classSystemMonitor&&Ext.classSystemMonitor(this,"Ext.Base#borrow",arguments);var i,n,r,s=e.prototype,o={};for(i=0,n=(t=Ext.Array.from(t)).length;i<n;i++)o[r=t[i]]=s[r];return this.addMembers(o)},override:function(e){var t=this,i=e.statics,n=e.inheritableStatics,r=e.config,s=e.mixins,o=e.cachedConfig;return(i||n||r)&&(e=Ext.apply({},e)),i&&(t.addMembers(i,!0),delete e.statics),n&&(t.addInheritableStatics(n),delete e.inheritableStatics),e.platformConfig&&t.addPlatformConfig(e),r&&(t.addConfig(r),delete e.config),o&&(t.addCachedConfig(o),delete e.cachedConfig),delete e.mixins,t.addMembers(e),s&&t.mixin(s),t},addPlatformConfig:function(e){var t,i,n,r,s,o,a,l,c,u=this.prototype,d=e.platformConfig;if(delete u.platformConfig,d instanceof Array)throw new Error("platformConfigs must be specified as an object.");for(i=(r=this.getConfigurator()).configs,l=0,c=(s=Ext.getPlatformConfigKeys(d)).length;l<c;++l){for(o in t=null,n=d[s[l]])a=n[o],o in i?(t=t||{})[o]=a:u[o]=a;t&&r.add(t)}},callParent:function(e){var t;return(t=this.callParent.caller)&&(t.$previous||(t=t.$owner?t:t.caller)&&t.$owner.superclass.self[t.$name]).apply(this,e||s)},callSuper:function(e){var t;return(t=this.callSuper.caller)&&((t=t.$owner?t:t.caller)&&t.$owner.superclass.self[t.$name]).apply(this,e||s)},mixin:function(e,t){var i,n,r,s,o,a,l,c,u,d,h,f=this;if("string"==typeof e){for(r in i=t.prototype,n=f.prototype,i.onClassMixedIn&&i.onClassMixedIn.call(t,f),n.hasOwnProperty("mixins")||(n.mixins="mixins"in n?Ext.Object.chain(n.mixins):{}),i)c=i[r],"mixins"===r?Ext.applyIf(n.mixins,c):"mixinId"!==r&&"config"!==r&&"$inheritableStatics"!==r&&void 0===n[r]&&(n[r]=c);if(s=i.$inheritableStatics){for(h in d={},s)f.hasOwnProperty(h)||(d[h]=t[h]);f.addInheritableStatics(d)}return"config"in i&&f.addConfig(i.config,t),(n.mixins[e]=i).afterClassMixedIn&&i.afterClassMixedIn.call(t,f),f}if((u=e)instanceof Array)for(o=0,a=u.length;o<a;o++)i=u[o],f.mixin(i.prototype.mixinId||i.$className,i);else for(l in u)f.mixin(l,u[l])},addConfig:function(e,t){(this.$config||this.getConfigurator()).add(e,t)},addCachedConfig:function(e,t){var i,n={};for(i in e)n[i]={cached:!0,$value:e[i]};this.addConfig(n,t)},getConfigurator:function(){return this.$config||new Ext.Configurator(this)},getName:function(){return Ext.getClassName(this)},createAlias:e(function(e,t){l[e]=function(){return this[t].apply(this,arguments)},this.override(l),delete l[e]})}),t)t.hasOwnProperty(i)&&n.push(i);return t.$staticMembers=n,t.getConfigurator(),t.addMembers({$className:"Ext.Base",$configTransforms:{},isInstance:!0,$configPrefixed:!0,$configStrict:!0,isConfiguring:!1,isFirstInstance:!1,destroyed:!1,clearPropertiesOnDestroy:!0,clearPrototypeOnDestroy:!1,statics:function(){var e=this.statics.caller,t=this.self;return e?e.$owner:t},callParent:function(e){var t,i=(t=this.callParent.caller)&&(t.$previous||(t=t.$owner?t:t.caller)&&t.$owner.superclass[t.$name]);if(!i){var n,r;if(!(t=this.callParent.caller).$owner){if(!t.caller)throw new Error("Attempting to call a protected method from the public scope, which is not allowed");t=t.caller}if(n=t.$owner.superclass,!((r=t.$name)in n))throw new Error("this.callParent() was called but there's no such method ("+r+") found in the parent class ("+(Ext.getClassName(n)||"Object")+")")}return i.apply(this,e||s)},callSuper:function(e){var t,i=(t=this.callSuper.caller)&&(t=t.$owner?t:t.caller)&&t.$owner.superclass[t.$name];if(!i){var n,r;if(!(t=this.callSuper.caller).$owner){if(!t.caller)throw new Error("Attempting to call a protected method from the public scope, which is not allowed");t=t.caller}if(n=t.$owner.superclass,!((r=t.$name)in n))throw new Error("this.callSuper() was called but there's no such method ("+r+") found in the parent class ("+(Ext.getClassName(n)||"Object")+")")}return i.apply(this,e||s)},self:t,constructor:function(){return this},initConfig:function(e){var t=this,i=t.self.getConfigurator();return t.initConfig=Ext.emptyFn,t.initialConfig=e||{},i.configure(t,e),t},beforeInitConfig:Ext.emptyFn,getConfig:function(e,t,i){var n,r,s=this;return e?(n=s.self.$config.configs[e])?(r=s.$configPrefixed?n.names.internal:e,i?s.hasOwnProperty(r)?s[r]:null:t?s.hasOwnProperty(r)?s[r]:s.config[e]:s[n.names.get]()):s[e]:s.getCurrentConfig()},destroyMembers:function(){var e,t,i,n,r=this,s=r.self.$config.configs,o=arguments.length;for(n=0;n<o;n++)t=(e=s[t=arguments[n]])&&r.$configPrefixed?e.names.internal:t,(i=r.hasOwnProperty(t)&&r[t])&&(Ext.destroy(i),r[t]=null)},freezeConfig:function(t){var i=this,e=Ext.Config.get(t).names,n=i[e.get]();i[e.set]=function(e){return e!==n&&Ext.raise('Cannot change frozen config "'+t+'"'),i},Ext.isIE8||Object.defineProperty(i,i.$configPrefixed?e.internal:t,{get:function(){return n},set:function(e){e!==n&&Ext.raise('Cannot change frozen config "'+t+'"')}})},setConfig:function(e,t,i){var n,r,s,o=this;if(e)if(n=o.self.getConfigurator(),"string"==typeof e){if(!(r=n.configs[e])){if(o.$configStrict){if("function"==typeof(s=o.self.prototype[e])&&!s.$nullFn)return Ext.Error.raise("Cannot override method "+e+" on "+o.$className+" instance."),o;"type"!==e&&Ext.log.warn('No such config "'+e+'" for class '+o.$className)}r=Ext.Config.map[e]||Ext.Config.get(e)}o[r.names.set]?o[r.names.set](t):o[e]=t}else n.reconfigure(o,e,i||t);return o},getConfigWatcher:function(){return this.$configWatch||(this.$configWatch=new Ext.mixin.Watchable)},watchConfig:function(e,t,i){var n=this.getConfigWatcher();return n.on.apply(n,arguments)},$configWatch:null,getCurrentConfig:function(){return this.self.getConfigurator().getCurrentConfig(this)},hasConfig:function(e){return e in this.defaultConfig},getInitialConfig:function(e){var t=this.config;return e?t[e]:t},$links:null,link:function(e,t){return(this.$links||(this.$links={}))[e]=!0,this[e]=t},unlink:function(e){var t,i,n,r;for(Ext.isArray(e)||Ext.raise("Invalid argument - expected array of strings"),t=0,i=e.length;t<i;t++)(r=this[n=e[t]])&&(r.isInstance&&!r.destroyed?r.destroy():r.parentNode&&"nodeType"in r&&r.parentNode.removeChild(r)),this[n]=null;return this},$reap:function(){var e,t,i,n,r,s,o=this,a=o.$noClearOnDestroy;for(r=0,s=(e=Ext.Object.getKeys(o)).length;r<s;r++)!(i=o[t=e[r]])||a&&a[t]||"object"!=(n=typeof i)&&("function"!=n||i.$noClearOnDestroy)||(o[t]=null);if(o.$nulled=!0,Object.setPrototypeOf&&o.clearPrototypeOnDestroy&&!o.$vetoClearingPrototypeOnDestroy){if(e=o.$preservePrototypeProperties)for(r=0,s=e.length;r<s;r++)t=e[r],o.hasOwnProperty(t)||(o[t]=o[t]);Object.setPrototypeOf(o,null)}},destroy:function(){var e=this,t=e.$links,i=e.clearPropertiesOnDestroy;t&&(e.$links=null,e.unlink(Ext.Object.getKeys(t))),e.destroy=Ext.emptyFn,e.isDestroyed=e.destroyed=!0,!0===i?e.isObservable||e.$reap():i&&("async"!==i&&Ext.raise("Invalid value for clearPropertiesOnDestroy"),r.add(e))}}),c.callOverridden=c.callParent,Ext.privacyViolation=function(e,t,i,n){var r=i.$name,s=t.$owner&&t.$owner.$className,o=n?"static ":"",a=i.$privacy?"Private "+o+i.$privacy+' method "'+r+'"':"Public "+o+'method "'+r+'"';e.$className&&(a=e.$className+": "+a),t.$privacy?a+=s?" conflicts with private "+t.$privacy+" method declared by "+s:" conflicts with inherited private "+t.$privacy+" method.":a+=s?" hides public method inherited from "+s:" hides inherited public method.";var l=Ext.getCompatVersion(),c=Ext.getVersion();c&&l&&l.lt(c)?Ext.log.error(a):Ext.raise(a)},Ext.Reaper.tick.$skipTimerCheck=!0,t}(Ext.Function.flexSetter),function(e,t){(Ext.util||(Ext.util={})).LRU=e=function(e){var t;e&&Ext.apply(this,e),this.head=t={id:this.seed=0,key:null,value:null},this.map={},t.next=t.prev=t},e.prototype=t={count:0,add:function(e,t){var i=this,n=i.map,r=n[e];return r&&(i.unlink(r),--i.count),n[e]=r={id:++i.seed,key:e,value:t},i.link(r),++i.count,r},clear:function(e,t){var i=this.head,n=i.next;if(i.next=i.prev=i,this.count=0,e&&!e.$nullFn)for(;n!==i;n=n.next)e.call(t||this,n.key,n.value)},each:function(e,t){var i,n;for(t=t||this,n=(i=this.head).next;n!==i&&!e.call(t,n.key,n.value);n=n.next);},prune:function(e,t){var i,n=this,r=n.head.prev;return n.count&&(i=r.value,n.unlink(r),--n.count,e&&e.call(t||n,r.key,i)),i},remove:function(e){var t,i=this.map,n=i[e];return n&&(this.unlink(n),t=n.value,delete i[e],--this.count),t},touch:function(e){var t=this.head,i=this.map[e];i&&i.prev!==t&&(this.unlink(i),this.link(i))},trim:function(e,t,i){for(;this.count>e;)this.prune(t,i)},link:function(e){var t=this.head,i=t.next;e.next=i,(e.prev=t).next=e,i.prev=e},unlink:function(e){var t=e.next,i=e.prev;(i.next=t).prev=i}},t.destroy=function(){this.clear.apply(this,arguments)}}(),function(t,e,i){Ext.util.Cache=i=function(e){t.call(this,e)},e.prototype=t.prototype,i.prototype=Ext.apply(new e,{maxSize:100,clear:function(){t.prototype.clear.call(this,this.evict)},get:function(e){var t,i=this,n=i.map[e];return n?(t=n.value,i.touch(e)):(t=i.miss.apply(i,arguments),i.add(e,t),i.trim(i.maxSize,i.evict)),t},evict:Ext.emptyFn})}(Ext.util.LRU,function(){}),function(){function n(e,t){return e.length-t.length||(e<t?-1:t<e?1:0)}var g,r=Ext.Base,s=r.$staticMembers;function o(e){function t(){return this.constructor.apply(this,arguments)||null}return e&&(t.name=e),t}Ext.Class=g=function(e,t,i){return"function"!=typeof e&&(i=t,t=e,e=null),t=t||{},e=g.create(e,t),g.process(e,t,i),e},Ext.apply(g,{makeCtor:o,onBeforeCreated:function(e,t,i){Ext.classSystemMonitor&&Ext.classSystemMonitor(e,">> Ext.Class#onBeforeCreated",arguments),e.addMembers(t),i.onCreated.call(e,e),Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"<< Ext.Class#onBeforeCreated",arguments)},create:function(e,t){var i,n=s.length;for(e=e||o(t.$className);n--;)e[i=s[n]]=r[i];return e},process:function(e,t,i){var n,r,s,o,a,l,c,u=t.preprocessors||g.defaultPreprocessors,d=this.preprocessors,h={onBeforeCreated:this.onBeforeCreated},f=[];for(delete t.preprocessors,e._classHooks=h,s=0,o=u.length;s<o;s++)if("string"==typeof(n=u[s])){if(!0===(r=(n=d[n]).properties))f.push(n.fn);else if(r)for(a=0,l=r.length;a<l;a++)if(c=r[a],t.hasOwnProperty(c)){f.push(n.fn);break}}else f.push(n);h.onCreated=i||Ext.emptyFn,h.preprocessors=f,this.doProcess(e,t,h)},doProcess:function(e,t,i){for(var n=i.preprocessors,r=n.shift(),s=this.doProcess;r;r=n.shift())if(!1===r.call(this,e,t,i,s))return;i.onBeforeCreated.apply(this,arguments)},preprocessors:{},registerPreprocessor:function(e,t,i,n,r){return n=n||"last",i=i||[e],this.preprocessors[e]={name:e,properties:i||!1,fn:t},this.setDefaultPreprocessorPosition(e,n,r),this},getPreprocessor:function(e){return this.preprocessors[e]},getPreprocessors:function(){return this.preprocessors},defaultPreprocessors:[],getDefaultPreprocessors:function(){return this.defaultPreprocessors},setDefaultPreprocessors:function(e){return this.defaultPreprocessors=Ext.Array.from(e),this},setDefaultPreprocessorPosition:function(e,t,i){var n,r=this.defaultPreprocessors;if("string"==typeof t){if("first"===t)return r.unshift(e),this;if("last"===t)return r.push(e),this;t="after"===t?1:-1}return-1!==(n=Ext.Array.indexOf(r,i))&&Ext.Array.splice(r,Math.max(0,n+t),0,e),this}}),g.registerPreprocessor("extend",function(e,t,i){var n,r,s,o=Ext.Base,a=o.prototype,l=t.extend;if(Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#extendPreProcessor",arguments),delete t.extend,r=(n=l&&l!==Object?l:o).prototype,!n.$isClass)for(s in a)r[s]||(r[s]=a[s]);e.extend(n),e.triggerExtended.apply(e,arguments),t.onClassExtended&&(e.onExtended(t.onClassExtended,e),delete t.onClassExtended)},!0),g.registerPreprocessor("privates",function(e,t){var i=t.privates,n=i.statics,r=i.privacy||!0;Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#privatePreprocessor",arguments),delete t.privates,delete i.statics,e.addMembers(i,!1,r),n&&e.addMembers(n,!0,r)}),g.registerPreprocessor("statics",function(e,t){Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#staticsPreprocessor",arguments),e.addStatics(t.statics),delete t.statics}),g.registerPreprocessor("inheritableStatics",function(e,t){Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#inheritableStaticsPreprocessor",arguments),e.addInheritableStatics(t.inheritableStatics),delete t.inheritableStatics}),Ext.createRuleFn=function(e){return new Function("$c","with($c) { try { return ("+e+"); } catch(e) { return false;}}")},Ext.expressionCache=new Ext.util.Cache({miss:Ext.createRuleFn}),Ext.ruleKeySortFn=n,Ext.getPlatformConfigKeys=function(e){var t,i=[];for(t in e)Ext.expressionCache.get(t)(Ext.platformTags)&&i.push(t);return i.sort(n),i},g.registerPreprocessor("config",function(e,t){t.hasOwnProperty("$configPrefixed")&&(e.prototype.$configPrefixed=t.$configPrefixed),e.addConfig(t.config),delete t.config}),g.registerPreprocessor("cachedConfig",function(e,t){t.hasOwnProperty("$configPrefixed")&&(e.prototype.$configPrefixed=t.$configPrefixed),e.addCachedConfig(t.cachedConfig),delete t.cachedConfig}),g.registerPreprocessor("mixins",function(e,t,i){var n=t.mixins,r=i.onCreated;Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#mixinsPreprocessor",arguments),delete t.mixins,i.onCreated=function(){return Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#mixinsPreprocessor#beforeCreated",arguments),i.onCreated=r,e.mixin(n),i.onCreated.apply(this,arguments)}}),Ext.extend=function(e,t,i){var n,r;if(Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.Class#extend-backwards-compatible",arguments),2===arguments.length&&Ext.isObject(t)&&(i=t,t=e,e=null),!t)throw new Error("[Ext.extend] Attempting to extend from a class which has not been loaded on the page.");return i.extend=t,i.preprocessors=["extend","statics","inheritableStatics","mixins","config"],e?(n=new g(e,i)).prototype.constructor=e:n=new g(i),n.prototype.override=function(e){for(r in e)e.hasOwnProperty(r)&&(this[r]=e[r])},n}}(),Ext.Inventory=function(){var e=this;e.names=[],e.paths={},e.alternateToName={},e.aliasToName={},e.nameToAliases={},e.nameToAlternates={},e.nameToPrefix={}},Ext.Inventory.prototype={_array1:[0],prefixes:null,dotRe:/\\./g,wildcardRe:/\\*/g,addAlias:function(e,t,i){return this.addMapping(e,t,this.aliasToName,this.nameToAliases,i)},addAlternate:function(e,t){return this.addMapping(e,t,this.alternateToName,this.nameToAlternates)},addMapping:function(e,t,i,n,r){var s,o,a,l,c,u,d=e.$className||e,h=d,f=this._array1;for(a in Ext.isString(d)&&((h={})[d]=t),h)for(o=h[a],Ext.isString(o)&&(f[0]=o,o=f),c=o.length,u=n[a]||(n[a]=[]),l=0;l<c;++l)(s=o[l])&&i[s]!==a&&(!r&&i[s]&&"Ext.Gadget"!==s&&Ext.log.warn("Overriding existing mapping: '"+s+"' From '"+i[s]+"' to '"+a+"'. Is this intentional?"),i[s]=a,u.push(s))},getAliasesByName:function(e){return this.nameToAliases[e]||null},getAlternatesByName:function(e){return this.nameToAlternates[e]||null},getNameByAlias:function(e){return this.aliasToName[e]||""},getNameByAlternate:function(e){return this.alternateToName[e]||""},getNamesByExpression:function(e,t,i){var n,r,s,o,a,l,c,u=this,d=u.aliasToName,h=u.alternateToName,f=u.nameToAliases,g=u.nameToAlternates,p=i?t:{},m=[],x=Ext.isString(e)?[e]:e,y=x.length,v=u.wildcardRe;for(r=0;r<y;++r)if((n=x[r]).indexOf("*")<0)(l=d[n])||(l=h[n])||(l=n),l in p||t&&l in t||(p[l]=1,m.push(l));else for(l in c=new RegExp("^"+n.replace(v,"(.*?)")+"$"),f)if(!(l in p||t&&l in t)){if(!(o=c.test(l))){for(a=(s=f[l]).length;!o&&0<a--;)o=c.test(s[a]);if((s=g[l])&&!o)for(a=s.length;!o&&0<a--;)o=c.test(s[a])}o&&(p[l]=1,m.push(l))}return m},getPath:function(e){var t,i=this,n=i.paths,r="";return e in n?r=n[e]:((t=i.nameToPrefix[e]||(i.nameToPrefix[e]=i.getPrefix(e)))&&(e=e.substring(t.length+1),(r=n[t])&&(r+="/")),r+=e.replace(i.dotRe,"/")+".js"),r},getPrefix:function(e){if(e in this.paths)return e;if(e in this.nameToPrefix)return this.nameToPrefix[e];for(var t,i,n,r,s=this.getPrefixes(),o=e.length;0<o--;)if(t=s[o]){if("."!==e.charAt(o))continue;for(n=0,r=t.length;n<r;n++)if((i=t[n])===e.substring(0,o))return i}return""},getPrefixes:function(){var e,t,i,n,r,s=this.prefixes;if(!s)for(e=this.names.slice(0),this.prefixes=s=[],n=0,r=e.length;n<r;n++)(s[i=(t=e[n]).length]||(s[i]=[])).push(t);return s},removeName:function(e){var t,i,n=this,r=n.aliasToName,s=n.alternateToName,o=n.nameToAliases,a=n.nameToAlternates,l=o[e],c=a[e];if(delete o[e],delete a[e],delete n.nameToPrefix[e],l)for(t=l.length;t--;)e===r[i=l[t]]&&delete r[i];if(c)for(t=c.length;t--;)e===s[i=c[t]]&&delete s[i]},resolveName:function(e){var t;return e in this.nameToAliases||(t=this.aliasToName[e])||(t=this.alternateToName[e]),t||e},select:function(e,t){var i,n=this,r={},s={excludes:r,exclude:function(){return n.getNamesByExpression(arguments[0],r,!0),this}};for(i in e)s[i]=n.selectMethod(r,e[i],t||e);return s},selectMethod:function(i,n,r){var s=this;return function(e){var t=Ext.Array.slice(arguments,1);return t.unshift(s.getNamesByExpression(e,i)),n.apply(r,t)}},setPath:Ext.Function.flexSetter(function(e,t){var i=this;return i.paths[e]=t,i.names.push(e),i.prefixes=null,i.nameToPrefix={},i})},Ext.ClassManager=function(t,o,r,f,i){var n=Ext.Class.makeCtor,a=[],s={Ext:{name:"Ext",value:Ext}},m=Ext.apply(new Ext.Inventory,{classes:{},classCount:0,classState:{},existCache:{},instantiators:[],isCreated:function(e){if("string"!=typeof e||e.length<1)throw new Error("[Ext.ClassManager] Invalid classname, must be a string and must not be empty");return!(!m.classes[e]&&!m.existCache[e])||!!m.lookupName(e,!1)&&(m.triggerCreated(e),!0)},createdListeners:[],nameCreatedListeners:{},existsListeners:[],nameExistsListeners:{},overrideMap:{},triggerCreated:function(e,t){m.existCache[e]=t||1,m.classState[e]+=40,m.notify(e,m.createdListeners,m.nameCreatedListeners)},onCreated:function(e,t,i){m.addListener(e,t,i,m.createdListeners,m.nameCreatedListeners)},notify:function(e,t,i){var n,r,s,o,a,l,c=m.getAlternatesByName(e),u=[e];for(n=0,r=t.length;n<r;n++)(a=t[n]).fn.call(a.scope,e);for(;u;){for(n=0,r=u.length;n<r;n++)if(t=i[l=u[n]]){for(s=0,o=t.length;s<o;s++)(a=t[s]).fn.call(a.scope,l);delete i[l]}u=c,c=null}},addListener:function(e,t,i,n,r){var s;if(Ext.isArray(i))for(e=Ext.Function.createBarrier(i.length,e,t),s=0;s<i.length;s++)this.addListener(e,null,i[s],n,r);else{var o={fn:e,scope:t};if(i){if(this.isCreated(i))return void e.call(t,i);r[i]||(r[i]=[]),r[i].push(o)}else n.push(o)}},$namespaceCache:s,addRootNamespaces:function(e){var t;for(t in e)s[t]={name:t,value:e[t]}},clearNamespaceCache:function(){var e;for(e in a.length=0,s)s[e].value||delete s[e]},getNamespaceEntry:function(e){var t,i;return"string"!=typeof e?e:((t=s[e])||(t=(i=e.lastIndexOf("."))<0?{name:e}:{name:e.substring(i+1),parent:m.getNamespaceEntry(e.substring(0,i))},s[e]=t),t)},lookupName:function(e,t){var i,n,r=m.getNamespaceEntry(e),s=Ext.global,o=0;for(i=r;i;i=i.parent)a[o++]=i;for(;s&&0<o--;)n=s,!(s=(i=a[o]).value||s[i.name])&&t&&(n[i.name]=s={});return s},setNamespace:function(e,t){var i=m.getNamespaceEntry(e),n=Ext.global;return i.parent&&(n=m.lookupName(i.parent,!0)),n[i.name]=t},setXType:function(e,t){var i=e.$className,n=(i?e:m.get(i=e)).prototype,r=n.xtypes,s=n.xtypesChain,o=n.xtypesMap;n.hasOwnProperty("xtypes")||(n.xtypes=r=[],n.xtypesChain=s=s?s.slice(0):[],n.xtypesMap=o=Ext.apply({},o)),m.addAlias(i,"widget."+t,!0),r.push(t),s.push(t),o[t]=!0},set:function(e,t){var i=m.getName(t);return m.classes[e]=m.setNamespace(e,t),m.classCount++,i&&i!==e&&m.addAlternate(i,e),m},get:function(e){return m.classes[e]||m.lookupName(e,!1)},addNameAliasMappings:function(e){m.addAlias(e)},addNameAlternateMappings:function(e){m.addAlternate(e)},getByAlias:function(e){return m.get(m.getNameByAlias(e))},getByConfig:function(e,t){var i,n=e.xclass;return i=n||((i=e.xtype)?t="widget.":i=e.type,m.getNameByAlias(t+i)),m.get(i)},getName:function(e){return e&&e.$className||""},getClass:function(e){return e&&e.self||null},create:function(u,d,h){var e;if(null!=u&&"string"!=typeof u)throw new Error("[Ext.define] Invalid class name '"+u+"' specified, must be a non-empty string");return e=n(u),"function"==typeof d&&(d=d(e)),u&&(m.classes[u]&&Ext.log.warn("[Ext.define] Duplicate class name '"+u+"' specified, must be a non-empty string"),e.name=u),d.$className=u,new t(e,d,function(){var e,t,i,n,r,s,o,a=d.postprocessors||m.defaultPostprocessors,l=m.postprocessors,c=[];for(delete d.postprocessors,t=0,i=a.length;t<i;t++)if("string"==typeof(e=a[t])){if(!0===(s=(e=l[e]).properties))c.push(e.fn);else if(s)for(n=0,r=s.length;n<r;n++)if(o=s[n],d.hasOwnProperty(o)){c.push(e.fn);break}}else c.push(e);d.postprocessors=c,d.createdFn=h,m.processCreate(u,this,d)})},processCreate:function(e,t,i){var n=this,r=i.postprocessors.shift(),s=i.createdFn;if(!r)return Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#classCreated",arguments),e&&n.set(e,t),delete t._classHooks,s&&s.call(t,t),void(e&&n.triggerCreated(e));!1!==r.call(n,e,t,i,n.processCreate)&&n.processCreate(e,t,i)},createOverride:function(s,o,a){var l,c,u,d=this,h=o.override,f=o.requires,g=o.uses,p=o.mixins,e=1;return u=function(){var e,t,i,n,r;if(!c){if(t=f?f.slice(0):[],p)if(l=p instanceof Array)for(i=0,r=p.length;i<r;++i)Ext.isString(e=p[i])&&t.push(e);else for(n in p)Ext.isString(e=p[n])&&t.push(e);if(c=!0,t.length)return void Ext.require(t,u)}if(l)for(i=0,r=p.length;i<r;++i)Ext.isString(e=p[i])&&(p[i]=Ext.ClassManager.get(e));else if(p)for(n in p)Ext.isString(e=p[n])&&(p[n]=Ext.ClassManager.get(e));e=h.$isClass?h:d.get(h),delete o.override,delete o.compatibility,delete o.requires,delete o.uses,Ext.override(e,o),Ext.Loader.history.push(s),g&&Ext.Loader.addUsedClasses(g),a&&a.call(e,e)},s&&(m.overrideMap[s]=!0),"compatibility"in o&&((e=o.compatibility)?"number"==typeof e?e=!0:"boolean"!=typeof e&&(e=Ext.checkVersion(e)):e=!1),e&&(h.$isClass?u():d.onCreated(u,d,h)),d.triggerCreated(s,2),d},instantiateByAlias:function(){var e=arguments[0],t=r.call(arguments),i=this.getNameByAlias(e);if(!i)throw new Error("[Ext.createByAlias] Unrecognized alias: "+e);return t[0]=i,Ext.create.apply(Ext,t)},instantiate:function(){return Ext.log.warn("Ext.ClassManager.instantiate() is deprecated. Use Ext.create() instead."),Ext.create.apply(Ext,arguments)},dynInstantiate:function(e,t){return(t=f(t,!0)).unshift(e),Ext.create.apply(Ext,t)},getInstantiator:function(e){var t,i,n,r=this.instantiators;if(!(t=r[e])){for(n=e,i=[],n=0;n<e;n++)i.push("a["+n+"]");(t=r[e]=new Function("c","a","return new c("+i.join(",")+")")).name="Ext.create"+e}return t},postprocessors:{},defaultPostprocessors:[],registerPostprocessor:function(e,t,i,n,r){return n=n||"last",i=i||[e],this.postprocessors[e]={name:e,properties:i||!1,fn:t},this.setDefaultPostprocessorPosition(e,n,r),this},setDefaultPostprocessors:function(e){return this.defaultPostprocessors=f(e),this},setDefaultPostprocessorPosition:function(e,t,i){var n,r=this.defaultPostprocessors;if("string"==typeof t){if("first"===t)return r.unshift(e),this;if("last"===t)return r.push(e),this;t="after"===t?1:-1}return-1!==(n=Ext.Array.indexOf(r,i))&&Ext.Array.splice(r,Math.max(0,n+t),0,e),this}});if(m.registerPostprocessor("platformConfig",function(e,t,i){t.addPlatformConfig(i)}),m.registerPostprocessor("alias",function(e,t,i){Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#aliasPostProcessor",arguments);var n,r,s=Ext.Array.from(i.alias);for(n=0,r=s.length;n<r;n++)o=s[n],this.addAlias(t,o)},["xtype","alias"]),m.registerPostprocessor("singleton",function(e,t,i,n){return Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#singletonPostProcessor",arguments),!i.singleton||(n.call(this,e,new t,i),!1)}),m.registerPostprocessor("alternateClassName",function(e,t,i){var n,r,s,o=i.alternateClassName;for(Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#alternateClassNamePostprocessor",arguments),o instanceof Array||(o=[o]),n=0,r=o.length;n<r;n++){if("string"!=typeof(s=o[n]))throw new Error("[Ext.define] Invalid alternate of: '"+s+"' for class: '"+e+"'; must be a valid string");this.set(s,t)}}),m.registerPostprocessor("debugHooks",function(e,t,i){Ext.classSystemMonitor&&Ext.classSystemMonitor(t,"Ext.Class#debugHooks",arguments),Ext.isDebugEnabled(t.$className,i.debugHooks.$enabled)&&(delete i.debugHooks.$enabled,Ext.override(t,i.debugHooks)),delete(t.isInstance?t.self:t).prototype.debugHooks}),m.registerPostprocessor("deprecated",function(e,t,i){var n;Ext.classSystemMonitor&&Ext.classSystemMonitor(t,"Ext.Class#deprecated",arguments),(n=t.isInstance?t.self:t).addDeprecations(i.deprecated),delete n.prototype.deprecated}),Ext.apply(Ext,{create:function(){var e,t=arguments[0],i=typeof t,n=r.call(arguments,1);if("function"==i)e=t;else{if("string"!=i&&0===n.length&&(n=[t],(t=t.xclass)||(t=(t=n[0].xtype)&&"widget."+t)),"string"!=typeof t||t.length<1)throw new Error("[Ext.create] Invalid class name or alias '"+t+"' specified, must be a non-empty string");t=m.resolveName(t),e=m.get(t)}if(e||(Ext.syncRequire(t),e=m.get(t)),!e)throw new Error("[Ext.create] Unrecognized class name / alias: "+t);if("function"!=typeof e)throw new Error("[Ext.create] Singleton '"+t+"' cannot be instantiated.");return m.getInstantiator(n.length)(e,n)},widget:function(e,t){var i,n,r,s=e;return"string"!=typeof s?(s=(t=e).xtype,n=t.xclass):t=t||{},t.isComponent?t:(n||(i="widget."+s,n=m.getNameByAlias(i)),n&&(r=m.get(n)),r?new r(t):Ext.create(n||i,t))},createByAlias:o(m,"instantiateByAlias"),define:function(e,t,i){return Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"ClassManager#define",arguments),t.override?(m.classState[e]=20,m.createOverride.apply(m,arguments)):(m.classState[e]=10,m.create.apply(m,arguments))},undefine:function(e){var t=m.classes;Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#undefine",arguments),t[e]&&m.classCount--,delete t[e],delete m.existCache[e],delete m.classState[e],m.removeName(e),Ext.Factory.clearCaches();var i,n=m.getNamespaceEntry(e),r=n.parent?m.lookupName(n.parent,!1):Ext.global;if(r){i=n.name;try{delete r[i]}catch(e){r[i]=void 0}}return i},getClassName:o(m,"getName"),getDisplayName:function(e){if(e){if(e.displayName)return e.displayName;if(e.$name&&e.$class)return Ext.getClassName(e.$class)+"#"+e.$name;if(e.$className)return e.$className}return"Anonymous"},getClass:o(m,"getClass"),namespace:function(){var e,t=i;for(e=arguments.length;0<e--;)t=m.lookupName(arguments[e],!0);return t}}),Ext.addRootNamespaces=m.addRootNamespaces,Ext.createWidget=Ext.widget,Ext.ns=Ext.namespace,t.registerPreprocessor("className",function(e,t){"$className"in t&&(e.$className=t.$className,e.displayName=e.$className),Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#classNamePreprocessor",arguments)},!0,"first"),t.registerPreprocessor("alias",function(e,t){Ext.classSystemMonitor&&Ext.classSystemMonitor(e,"Ext.ClassManager#aliasPreprocessor",arguments);var n,r,i,s,o=e.prototype,a=f(t.xtype),l=f(t.alias),c="widget.",u=c.length,d=Array.prototype.slice.call(o.xtypesChain||[]),h=Ext.merge({},o.xtypesMap||{});for(n=0,r=l.length;n<r;n++){if("string"!=typeof(i=l[n])||i.length<1)throw new Error("[Ext.define] Invalid alias of: '"+i+"' for class: '"+void 0+"'; must be a valid string");i.substring(0,u)===c&&(s=i.substring(u),Ext.Array.include(a,s))}for(e.xtype=t.xtype=a[0],t.xtypes=a,n=0,r=a.length;n<r;n++)s=a[n],h[s]||(h[s]=!0,d.push(s));for(t.xtypesChain=d,t.xtypesMap=h,Ext.Function.interceptAfterOnce(e,"onClassCreated",function(){var e,t,i=this.prototype.mixins;for(e in Ext.classSystemMonitor&&Ext.classSystemMonitor(this,"Ext.ClassManager#aliasPreprocessor#afterClassCreated",arguments),i)if(i.hasOwnProperty(e)&&(t=i[e],a=t.xtypes))for(n=0,r=a.length;n<r;n++)s=a[n],h[s]||(h[s]=!0,d.push(s))}),n=0,r=a.length;n<r;n++){if("string"!=typeof(s=a[n])||s.length<1)throw new Error("[Ext.define] Invalid xtype of: '"+s+"' for class: '"+void 0+"'; must be a valid non-empty string");Ext.Array.include(l,c+s)}t.alias=l},["xtype","alias"]),Ext.manifest){var e,l,c,u,d=Ext.manifest,h=d.classes,g=d.paths,p={},x={};if(g){if(d.bootRelative)for(c in u=Ext.Boot.baseUrl,g)g.hasOwnProperty(c)&&(g[c]=u+g[c]);m.setPath(g)}if(h)for(e in h)x[e]=[],p[e]=[],(l=h[e]).alias&&(p[e]=l.alias),l.alternates&&(x[e]=l.alternates);m.addAlias(p),m.addAlternate(x)}return m}(Ext.Class,Ext.Function.alias,Array.prototype.slice,Ext.Array.from,Ext.global),Ext.define("Ext.mixin.Watchable",{on:function(e,t,i){return this._watchUpdate(!1,"_watchAdd",e,t,i)},fire:function(e,t){var i,n,r,s,o=this.watching,a=o&&o[e];if(a){for(++a.$firing,n=0;n<a.length;++n)if(s=a[n][0],!1===(r=(i=a[n][1]).charAt?t?s[i].apply(s,t):s[i]():t?i.apply(s,t):i.call(s)))return r;--a.$firing}},fireEvent:function(){var e=Ext.Array.slice(arguments),t=e.shift();return this.fire(t,e)},un:function(e,t,i){return this._watchUpdate(!0,"_watchRemove",e,t,i)},privates:{watching:null,$watchOptions:{destroyable:1,scope:1},_watchAdd:function(e,t,i,n,r){"string"!=typeof i||n[i]||Ext.raise('No such method "'+i+'" on '+n.$className);var s,o,a=e[t],l=[n,i];if(a){for(s=a.length;0<s--;)if(i===(o=a[s])[1]&&(n?o[0]===n:!o[0]))return;a.$firing&&(e[t]=a=a.slice(),a.$firing=0)}else e[t]=a=[],a.$firing=0;a.push(l),r&&(l.push(t),r.items.push(l))},_watchRemove:function(e,t,i,n){var r,s=e[t];if(s)for(s.$firing&&(e[t]=s=s.slice(),s.$firing=0),r=s.length;0<r--;)s[r][0]===n&&s[r][1]===i&&s.splice(r,1)},_watchUpdate:function(e,t,i,n,r){var s,o=this,a=i,l=o.watching;if(!l){if(e)return;o.watching=l={}}if("string"==typeof i)o[t](l,i,n,r);else for(i in s=a.destroyable?{owner:o,items:[],destroy:o._watcherDestroyer}:null,r=a.scope,a)o.$watchOptions[i]||o[t](l,i,a[i],r,s);return s},_watcherDestroyer:function(){var e,t,i=this.owner,n=i.watching,r=this.items;for(t=0;t<r.length;++t)e=r[t],i._watchRemove(n,e[2],e[1],e[0])}}}),(Ext.env||(Ext.env={})).Browser=function(e,t){var i,n,r,s=this,o=Ext.Boot.browserPrefixes,a=Ext.Boot.browserNames,l=s.enginePrefixes,c=s.engineNames,u=e.match(new RegExp("((?:"+Ext.Object.getValues(o).join(")|(?:")+"))([\\\\w\\\\._]+)")),d=e.match(new RegExp("((?:"+Ext.Object.getValues(l).join(")|(?:")+"))([\\\\w\\\\._]+)")),h=a.other,f=c.other,g="",p="",m="",x=!1,y=/(Edge\\/)([\\w.]+)/,v="";if(s.userAgent=e,this.is=function(e){return!!this.is[e]},/Edge\\//.test(e)&&(u=e.match(y),d=e.match(y)),u&&("Safari"===(h=a[Ext.Object.getKey(o,u[1])])&&/^Opera/.test(e)&&(h="Opera"),g=new Ext.Version(u[2])),d&&(f=c[Ext.Object.getKey(l,d[1])],p=new Ext.Version(d[2])),"Trident"===f&&"IE"!==h){h="IE";var E=e.match(/.*rv:(\\d+.\\d+)/);E&&E.length&&(E=E[1],g=new Ext.Version(E))}if(h&&g&&Ext.setVersion(h,g),e.match(/FB/)&&"Other"===h?(h=a.safari,f=c.webkit):e.match(/Android.*Chrome/g)?h="ChromeMobile":(u=e.match(/OPR\\/(\\d+.\\d+)/))&&(h="Opera",g=new Ext.Version(u[1])),Ext.apply(this,{engineName:f,engineVersion:p,name:h,version:g}),this.setFlag(h,!0,t),g){if(m=g.getMajor()||"",s.is.IE)for(m=document.documentMode||parseInt(m,10),i=7;i<=11;++i)Ext[n="isIE"+i]=m===i,Ext[n+"m"]=m<=i,Ext[n+"p"]=i<=m;s.is.Opera&&parseInt(m,10)<=12&&(Ext.isOpera12m=!0),Ext.chromeVersion=Ext.isChrome?m:0,Ext.firefoxVersion=Ext.isFirefox?m:0,Ext.ieVersion=Ext.isIE?m:0,Ext.operaVersion=Ext.isOpera?m:0,Ext.safariVersion=Ext.isSafari?m:0,Ext.webKitVersion=Ext.isWebKit?m:0,this.setFlag(h+m,!0,t),this.setFlag(h+g.getShortVersion())}for(i in a)a.hasOwnProperty(i)&&(r=a[i],this.setFlag(r,h===r));for(i in this.setFlag(r),p&&(this.setFlag(f+(p.getMajor()||"")),this.setFlag(f+p.getShortVersion())),c)c.hasOwnProperty(i)&&(r=c[i],this.setFlag(r,f===r,t));this.setFlag("Standalone",!!navigator.standalone);try{v=window.top.ripple}catch(e){}this.setFlag("Ripple",!!document.getElementById("tinyhippos-injected")&&!Ext.isEmpty(v)),this.setFlag("WebWorks",!!window.blackberry),void 0===window.PhoneGap&&void 0===window.Cordova&&void 0===window.cordova||(x=!0,this.setFlag("PhoneGap"),this.setFlag("Cordova")),/(iPhone|iPod|iPad).*AppleWebKit(?!.*Safari)(?!.*FBAN)/i.test(e)&&(x=!0),this.setFlag("WebView",x),this.isStrict=Ext.isStrict="CSS1Compat"===document.compatMode,this.isSecure=Ext.isSecure,this.identity=h+m+(this.isStrict?"Strict":"Quirks")},Ext.env.Browser.prototype={constructor:Ext.env.Browser,engineNames:{edge:"Edge",webkit:"WebKit",gecko:"Gecko",presto:"Presto",trident:"Trident",other:"Other"},enginePrefixes:{edge:"Edge/",webkit:"AppleWebKit/",gecko:"Gecko/",presto:"Presto/",trident:"Trident/"},styleDashPrefixes:{WebKit:"-webkit-",Gecko:"-moz-",Trident:"-ms-",Presto:"-o-",Other:""},stylePrefixes:{WebKit:"Webkit",Gecko:"Moz",Trident:"ms",Presto:"O",Other:""},propertyPrefixes:{WebKit:"webkit",Gecko:"moz",Trident:"ms",Presto:"o",Other:""},name:null,version:null,engineName:null,engineVersion:null,setFlag:function(e,t,i){return void 0===t&&(t=!0),this.is[e]=t,this.is[e.toLowerCase()]=t,i&&(Ext["is"+e]=t),this},getStyleDashPrefix:function(){return this.styleDashPrefixes[this.engineName]},getStylePrefix:function(){return this.stylePrefixes[this.engineName]},getVendorProperyName:function(e){var t=this.propertyPrefixes[this.engineName];return 0<t.length?t+Ext.String.capitalize(e):e}},function(e){Ext.browser=new Ext.env.Browser(e,!0),Ext.userAgent=e.toLowerCase(),Ext.SSL_SECURE_URL=Ext.isSecure&&Ext.isIE?"javascript:''":"about:blank"}(Ext.global.navigator.userAgent),Ext.env.OS=function(e,t,i){var n,r,s,o,a,l,c=Ext.Boot.osNames,u=Ext.Boot.osPrefixes,d="",h=this.is;for(r in i=i||Ext.browser,u)if(u.hasOwnProperty(r)&&(s=u[r],o=e.match(new RegExp("(?:"+s+")([^\\\\s;]+)")))){n=c[r],d=(l=o[1])&&"HTC_"===l||l&&"Silk/"===l?new Ext.Version("2.3"):new Ext.Version(o[o.length-1]);break}for(r in n||(n=c[(e.toLowerCase().match(/mac|win|linux/)||["other"])[0]],d=new Ext.Version("")),this.name=n,this.version=d,(e.match(/ipad/i)||!e.match(/iphone/i)&&e.match(/Mac/)&&2<navigator.maxTouchPoints)&&(n="iOS",t="iPad"),t&&this.setFlag(t.replace(/ simulator$/i,"")),this.setFlag(n),d&&(this.setFlag(n+(d.getMajor()||"")),this.setFlag(n+d.getShortVersion())),c)c.hasOwnProperty(r)&&(a=c[r],h.hasOwnProperty(n)||this.setFlag(a,n===a));"iOS"===this.name&&568===window.screen.height&&this.setFlag("iPhone5"),(i.is.Safari||i.is.Silk)&&((this.is.Android2||this.is.Android3||501===i.version.shortVersion)&&i.setFlag("AndroidStock"),this.is.Android4&&(i.setFlag("AndroidStock"),i.setFlag("AndroidStock4")))},Ext.env.OS.prototype={constructor:Ext.env.OS,is:function(e){return!!this[e]},name:null,version:null,setFlag:function(e,t){return void 0===t&&(t=!0),this.flags&&(this.flags[e]=t),this.is[e]=t,this.is[e.toLowerCase()]=t,this}},function(){var e,t,i,n=Ext.global.navigator,r=n.userAgent,s=Ext.env.OS,o=Ext.is||(Ext.is={});s.prototype.flags=o,Ext.os=e=new s(r,n.platform),t=e.name,Ext["is"+t]=!0,Ext.isMac=o.Mac=o.MacOS,Ext.isApple=Ext.isMac||Ext.isiOS;var a=window.location.search.match(/deviceType=(Tablet|Phone)/),l=window.deviceType;a&&a[1]?i=a[1]:"iPhone"===l?i="Phone":"iPad"===l?i="Tablet":e.is.Android||e.is.iOS||e.is.WindowsPhone||!/Windows|Linux|MacOS|ChromeOS/.test(t)?i=e.is.iPad||e.is.RIMTablet||e.is.Android3||Ext.browser.is.Silk||e.is.Android&&-1===r.search(/mobile/i)?"Tablet":"Phone":(i="Desktop",Ext.browser.is.WebView=!!Ext.browser.is.Ripple),"Tablet"===i&&"MacOS"===t&&(Ext.isiOS=!0,Ext.isiPadOS=!0),e.setFlag(i,!0),e.deviceType=i,delete s.prototype.flags}(),Ext.feature={has:function(e){return!!this.has[e]},testElements:{},getTestElement:function(e,t){if(void 0===e)e="div";else if("string"!=typeof e)return e;return t?document.createElement(e):(this.testElements[e]||(this.testElements[e]=document.createElement(e)),this.testElements[e])},isStyleSupported:function(e,t){var i=this.getTestElement(t).style,n=Ext.String.capitalize(e);return void 0!==i[e]||void 0!==i[Ext.browser.getStylePrefix(e)+n]},isStyleSupportedWithoutPrefix:function(e,t){return void 0!==this.getTestElement(t).style[e]},isEventSupported:function(e,t){void 0===t&&(t=window);var i=this.getTestElement(t),n="on"+e.toLowerCase(),r=n in i;return r||i.setAttribute&&i.removeAttribute&&(i.setAttribute(n,""),r="function"==typeof i[n],void 0!==i[n]&&(i[n]=void 0),i.removeAttribute(n)),r},getStyle:function(e,t){var i=e.ownerDocument.defaultView;return((i?i.getComputedStyle(e,null):e.currentStyle)||e.style)[t]},getSupportedPropertyName:function(e,t){var i=Ext.browser.getVendorProperyName(t);return i in e?i:t in e?t:null},detect:function(e){var t,i,n,r,s,o=this,a=document,l=o.toRun||o.tests,c=l.length,u=a.createElement("div"),d=[],h=Ext.supports,f=o.has;for(u.innerHTML='<div style="height:30px;width:50px;"><div style="height:20px;width:20px;"></div></div><div style="width: 200px; height: 200px; position: relative; padding: 5px;"><div style="position: absolute; top: 0; left: 0; width: 100%; height: 100%;"></div></div><div style="position: absolute; left: 10%; top: 10%;"></div><div style="float:left; background-color:transparent;"></div>',e&&a.body.appendChild(u),r=o.preDetected[Ext.browser.identity]||[];c--;){if(n=l[c],s=r[c],t=n.name,i=n.names,void 0===s){if(!e&&n.ready){d.push(n);continue}s=n.fn.call(o,a,u)}if(t)h[t]=f[t]=s;else if(i)for(;i.length;)h[t=i.pop()]=f[t]=s}e&&a.body.removeChild(u),o.toRun=d},report:function(){var e,t=[],i=this.tests.length;for(e=0;e<i;++e)t.push(this.has[this.tests[e].name]?1:0);Ext.log(Ext.browser.identity+": ["+t.join(",")+"]")},preDetected:{},tests:[{name:"CloneNodeCopiesExpando",fn:function(){var e=document.createElement("div");return e.expandoProp={},e.cloneNode().expandoProp===e.expandoProp}},{name:"CSSPointerEvents",fn:function(e){return"pointerEvents"in e.documentElement.style}},{name:"CSS3BoxShadow",fn:function(e){return"boxShadow"in e.documentElement.style||"WebkitBoxShadow"in e.documentElement.style||"MozBoxShadow"in e.documentElement.style}},{name:"CSS3NegationSelector",fn:function(e){try{e.querySelectorAll("foo:not(bar)")}catch(e){return!1}return!0}},{name:"ClassList",fn:function(e){return!!e.documentElement.classList}},{name:"Canvas",fn:function(){var e=this.getTestElement("canvas");return!!(e&&e.getContext&&e.getContext("2d"))}},{name:"Svg",fn:function(e){return!(!e.createElementNS||!e.createElementNS("http://www.w3.org/2000/svg","svg").createSVGRect)}},{name:"Vml",fn:function(){var e,t=this.getTestElement();return t.innerHTML="\\x3c!--[if vml]><br><![endif]--\\x3e",e=1===t.childNodes.length,t.innerHTML="",e}},{name:"Touch",fn:function(){var e=navigator.msMaxTouchPoints||navigator.maxTouchPoints;return Ext.browser.is.Chrome&&Ext.browser.version.isLessThanOrEqual(39)?Ext.supports.TouchEvents&&1!==e||1<e:Ext.supports.TouchEvents||0<e}},{name:"PointerEvents",fn:function(){var e=window.PointerEvent,t=window.navigator;return!(!e||!t.pointerEnabled&&Ext.isIE)&&!Ext.supports.TouchEvents}},{name:"MSPointerEvents",fn:function(){return Ext.isIE10}},{name:"TouchEvents",fn:function(){return this.isEventSupported("touchend")}},{name:"TouchAction",ready:!0,fn:function(e,t){if(!window.getComputedStyle)return 0;var i,n,r=["pan-x","pan-y","pinch-zoom","double-tap-zoom"],s=[1,2,4,8],o=r.length,a=0;for(i=0;i<o;i++)n=r[i],t.style.touchAction=n,getComputedStyle(t).touchAction===n&&(a|=s[i]);return a}},{name:"Orientation",fn:function(){return"orientation"in window&&this.isEventSupported("orientationchange")}},{name:"OrientationChange",fn:function(){return this.isEventSupported("orientationchange")}},{name:"DeviceMotion",fn:function(){return this.isEventSupported("devicemotion")}},{names:["Geolocation","GeoLocation"],fn:function(){return"geolocation"in window.navigator}},{name:"SqlDatabase",fn:function(){return"openDatabase"in window}},{name:"WebSockets",fn:function(){return"WebSocket"in window}},{name:"Range",fn:function(){return!!document.createRange}},{name:"CreateContextualFragment",fn:function(){var e=!!document.createRange&&document.createRange();return e&&!!e.createContextualFragment}},{name:"History",fn:function(){return"history"in window&&"pushState"in window.history}},{name:"Css3dTransforms",fn:function(){return this.has("CssTransforms")&&this.isStyleSupported("perspective")}},{name:"CssTransforms",fn:function(){return this.isStyleSupported("transform")}},{name:"CssTransformNoPrefix",fn:function(){return this.isStyleSupportedWithoutPrefix("transform")}},{name:"CssAnimations",fn:function(){return this.isStyleSupported("animationName")}},{names:["CssTransitions","Transitions"],fn:function(){return this.isStyleSupported("transitionProperty")}},{names:["Audio","AudioTag"],fn:function(){return!!this.getTestElement("audio").canPlayType}},{name:"Video",fn:function(){return!!this.getTestElement("video").canPlayType}},{name:"LocalStorage",fn:function(){try{if("localStorage"in window&&null!==window.localStorage)return localStorage.setItem("sencha-localstorage-test","test success"),localStorage.removeItem("sencha-localstorage-test"),!0}catch(e){}return!1}},{name:"XmlQuerySelector",fn:function(){var e,t='<?xml version="1.0" encoding="UTF-8" standalone="yes" ?><root></root>';if(window.ActiveXObject)(e=new ActiveXObject("Microsoft.xmlDOM")).async=!1,e.loadXML(t);else if(window.DOMParser){e=(new DOMParser).parseFromString(t,"text/xml")}return!!e&&!!e.lastChild.querySelector}},{name:"XHR2",fn:function(){return window.ProgressEvent&&window.FormData&&window.XMLHttpRequest&&"withCredentials"in new XMLHttpRequest}},{name:"XHRUploadProgress",fn:function(){var e;return!(!window.XMLHttpRequest||Ext.browser.is.AndroidStock)&&((e=new XMLHttpRequest)&&"upload"in e&&"onprogress"in e.upload)}},{name:"NumericInputPlaceHolder",fn:function(){return!(Ext.browser.is.AndroidStock4&&Ext.os.version.getMinor()<2)}},{name:"matchesSelector",fn:function(){var e=document.documentElement,t="matches",i="webkitMatchesSelector",n="msMatchesSelector",r="mozMatchesSelector";return e[t]?t:e[i]?i:e[n]?n:e[r]?r:null}},{name:"RightMargin",ready:!0,fn:function(e,t){var i=e.defaultView;return!(i&&"0px"!==i.getComputedStyle(t.firstChild.firstChild,null).marginRight)}},{name:"DisplayChangeInputSelectionBug",fn:function(){var e=Ext.webKitVersion;return 0<e&&e<533}},{name:"DisplayChangeTextAreaSelectionBug",fn:function(){var e=Ext.webKitVersion;return 0<e&&e<534.24}},{name:"TransparentColor",ready:!0,fn:function(e,t,i){return!((i=e.defaultView)&&"transparent"!==i.getComputedStyle(t.lastChild,null).backgroundColor)}},{name:"ComputedStyle",ready:!0,fn:function(e,t,i){return!(!(i=e.defaultView)||!i.getComputedStyle)}},{name:"Float",fn:function(e){return"cssFloat"in e.documentElement.style}},{name:"CSS3BorderRadius",ready:!0,fn:function(e){var t,i=["borderRadius","BorderRadius","MozBorderRadius","WebkitBorderRadius","OBorderRadius","KhtmlBorderRadius"],n=!1;for(t=0;t<i.length;t++)void 0!==e.documentElement.style[i[t]]&&(n=!0);return n&&!Ext.isIE9}},{name:"CSS3LinearGradient",fn:function(e,t){var i="background-image:",n="linear-gradient(left top, black, white)",r=[i+"-webkit-gradient(linear, left top, right bottom, from(black), to(white))",i+n,i+"-moz-linear-gradient(left top, black, white)",i+"-ms-linear-gradient(left top, black, white)",i+"-o-linear-gradient(left top, black, white)"];return t.style.cssText=r.join(";"),-1!==(""+t.style.backgroundImage).indexOf("gradient")&&!Ext.isIE9}},{name:"MouseEnterLeave",fn:function(e){return"onmouseenter"in e.documentElement&&"onmouseleave"in e.documentElement}},{name:"MouseWheel",fn:function(e){return"onmousewheel"in e.documentElement}},{name:"Opacity",fn:function(e,t){return!Ext.isIE8&&(t.firstChild.style.cssText="opacity:0.73","0.73"==t.firstChild.style.opacity)}},{name:"Placeholder",fn:function(e){return"placeholder"in e.createElement("input")}},{name:"Direct2DBug",fn:function(e){return Ext.isString(e.documentElement.style.msTransformOrigin)&&Ext.isIE9m}},{name:"BoundingClientRect",fn:function(e){return"getBoundingClientRect"in e.documentElement}},{name:"RotatedBoundingClientRect",ready:!0,fn:function(e){var t=e.body,i=!1,n=e.createElement("div"),r=n.style;return n.getBoundingClientRect&&(r.position="absolute",r.top="0",r.WebkitTransform=r.MozTransform=r.msTransform=r.OTransform=r.transform="rotate(90deg)",r.width="100px",r.height="30px",t.appendChild(n),i=100!==n.getBoundingClientRect().height,t.removeChild(n)),i}},{name:"ChildContentClearedWhenSettingInnerHTML",ready:!0,fn:function(){var e,t=this.getTestElement();return t.innerHTML="<div>a</div>",e=t.firstChild,t.innerHTML="<div>b</div>","a"!==e.innerHTML}},{name:"IncludePaddingInWidthCalculation",ready:!0,fn:function(e,t){return 210===t.childNodes[1].firstChild.offsetWidth}},{name:"IncludePaddingInHeightCalculation",ready:!0,fn:function(e,t){return 210===t.childNodes[1].firstChild.offsetHeight}},{name:"TextAreaMaxLength",fn:function(e){return"maxlength"in e.createElement("textarea")}},{name:"GetPositionPercentage",ready:!0,fn:function(e,t){return"10%"===Ext.feature.getStyle(t.childNodes[2],"left")}},{name:"PercentageHeightOverflowBug",ready:!0,fn:function(e){var t,i,n=!1;return Ext.getScrollbarSize().height&&((t=(i=this.getTestElement("div",!0)).style).height="50px",t.width="50px",t.overflow="auto",t.position="absolute",i.innerHTML=['<div style="display:table;height:100%;">','<div style="width:51px;"></div>',"</div>"].join(""),e.body.appendChild(i),50===i.firstChild.offsetHeight&&(n=!0),e.body.removeChild(i)),n}},{name:"xOriginBug",ready:!0,fn:function(e,t){t.innerHTML='<div id="b1" style="height:100px;width:100px;direction:rtl;position:relative;overflow:scroll"><div id="b2" style="position:relative;width:100%;height:20px;"></div><div id="b3" style="position:absolute;width:20px;height:20px;top:0px;right:0px"></div></div>';var i=document.getElementById("b1").getBoundingClientRect(),n=document.getElementById("b2").getBoundingClientRect(),r=document.getElementById("b3").getBoundingClientRect();return n.left!==i.left&&r.right!==i.right}},{name:"ScrollWidthInlinePaddingBug",ready:!0,fn:function(e){var t,i,n=!1;return(t=(i=e.createElement("div")).style).height="50px",t.width="50px",t.padding="10px",t.overflow="hidden",t.position="absolute",i.innerHTML='<span style="display:inline-block;zoom:1;height:60px;width:60px;"></span>',e.body.appendChild(i),70===i.scrollWidth&&(n=!0),e.body.removeChild(i),n}},{name:"rtlVertScrollbarOnRight",ready:!0,fn:function(e,t){t.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:scroll"><div style="width:20px;height:200px;"></div></div>';var i=t.firstChild,n=i.firstChild;return n.offsetLeft+n.offsetWidth!==i.offsetLeft+i.offsetWidth}},{name:"rtlVertScrollbarOverflowBug",ready:!0,fn:function(e,t){t.innerHTML='<div style="height:100px;width:100px;direction:rtl;overflow:auto"><div style="width:95px;height:200px;"></div></div>';var i=t.firstChild,n=t.style,r=n.position;return n.position="absolute",i.offsetHeight,n.position=r,i.clientHeight===i.offsetHeight}},{identity:"defineProperty",fn:function(){return!Ext.isIE8m||(Ext.Object.defineProperty=Ext.emptyFn,!1)}},{identify:"nativeXhr",fn:function(){return"undefined"!=typeof XMLHttpRequest||!(XMLHttpRequest=function(){try{return new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(e){return null}})}},{name:"SpecialKeyDownRepeat",fn:function(){return Ext.isWebKit?525<=parseInt(navigator.userAgent.match(/AppleWebKit\\/(\\d+)/)[1],10):!(!(Ext.isGecko||Ext.isIE||Ext.isEdge)||Ext.isOpera&&Ext.operaVersion<12)}},{name:"EmulatedMouseOver",fn:function(){return Ext.os.is.iOS}},{name:"Hashchange",fn:function(){var e=document.documentMode;return"onhashchange"in window&&(void 0===e||7<e)}},{name:"FixedTableWidthBug",ready:!0,fn:function(){if(Ext.isIE8)return!1;var e,t=document.createElement("div"),i=document.createElement("div");return t.setAttribute("style","display:table;table-layout:fixed;"),i.setAttribute("style","display:table-cell;min-width:50px;"),t.appendChild(i),document.body.appendChild(t),t.offsetWidth,t.style.width="25px",e=t.offsetWidth,document.body.removeChild(t),50===e}},{name:"FocusinFocusoutEvents",fn:function(){return!(Ext.isGecko&&Ext.firefoxVersion<52)}},{name:"AsyncFocusEvents",fn:function(){return Ext.asyncFocus=!!Ext.isIE}},{name:"accessibility",ready:!0,fn:function(e){var t,i,n,r,s,o=e.body;function a(e){var t,i,n=[],r=0;-1!==e.indexOf("rgb(")?n=e.replace("rgb(","").replace(")","").split(", "):-1!==e.indexOf("#")&&(t=7===e.length?/^#(\\S\\S)(\\S\\S)(\\S\\S)$/:/^#(\\S)(\\S)(\\S)$/,(i=e.match(t))&&(n=["0x"+i[1],"0x"+i[2],"0x"+i[3]]));for(var s=0;s<n.length;s++)r+=parseInt(n[s]);return r}return t=e.createElement("div"),i=e.createElement("img"),n=t.style,Ext.apply(n,{width:"2px",position:"absolute",clip:"rect(1px,1px,1px,1px)",borderWidth:"1px",borderStyle:"solid",borderTopTolor:"#f00",borderRightColor:"#ff0",backgroundColor:"#fff",backgroundImage:"url("+Ext.BLANK_IMAGE_URL+")"}),i.alt="",i.src=Ext.BLANK_IMAGE_URL,t.appendChild(i),o.appendChild(t),s=(n=t.currentStyle||t.style).backgroundImage,r={Images:1===i.offsetWidth&&"uninitialized"!==i.readyState,BackgroundImages:!(null!==s&&("none"===s||"url(invalid-url:)"===s)),BorderColors:n.borderTopColor!==n.borderRightColor,LightOnDark:0<a(n.color)-a(n.backgroundColor)},Ext.supports.HighContrastMode=!r.BackgroundImages,o.removeChild(t),t=i=null,r}},{name:"ViewportUnits",ready:!0,fn:function(e){if(Ext.isIE8)return!1;var t,i,n=e.body,r=document.createElement("div"),s=r.currentStyle||r.style;return n.appendChild(r),Ext.apply(s,{width:"50vw"}),t=parseInt(window.innerWidth/2,10),i=parseInt((window.getComputedStyle?getComputedStyle(r,null):r.currentStyle).width,10),n.removeChild(r),r=null,t===i}},{name:"CSSVariables",ready:!1,fn:function(){return!!window.getComputedStyle&&(window.CSS&&window.CSS.supports&&window.CSS.supports("--test-var",0))}},{name:"Selectors2",ready:!1,fn:function(e){try{return!!e.querySelectorAll(":scope")}catch(e){return!1}}},{name:"CSSScrollSnap",ready:!1,fn:function(e){var t=e.documentElement.style;return"scrollSnapType"in t||"webkitScrollSnapType"in t||"msScrollSnapType"in t}},{name:"TranslateYCausesHorizontalScroll",ready:!0,fn:function(e,t){return t.innerHTML='<div style="position: relative; overflow: auto; height: 200px; width: 200px;"><div><div style="transform: translateY(260px); width: 50px;">a</div></div></div>',t.firstChild.scrollWidth>t.firstChild.clientWidth}},{name:"FlexBoxBasisBug",ready:!0,fn:function(){return!!(Ext.isIE11||Ext.os.is.iOS&&Ext.os.version.major<=10||Ext.isSafari&&Ext.browser.version.isLessThan(11)||Ext.os.is.Android&&Ext.os.version.isLessThan(6))}},{name:"PercentageSizeFlexBug",ready:!0,fn:function(e,t){if(Ext.isIE9m)return!1;var i=t.style;return i.display="flex",i.flexDirection="column",i.height=i.width="100px",t.innerHTML='<div style="flex: 1 1;"><div style="height:50%"></div></div>',50!==t.firstChild.firstChild.offsetHeight}},{name:"CannotScrollExactHeight",fn:function(){return Ext.isIE10p}},{name:"WebKitInputTableBoxModelBug",ready:!0,fn:function(e,t){var i,n=document.createElement("div"),r=document.createElement("div"),s=document.createElement("input"),o=n.style,a=r.style,l=s.style,c=e.body;return s.type="text",o.display="table",o.height="100px",a.display="table-cell",l.border="0",l.padding="10px",l.boxSizing="border-box",l.height="100%",r.appendChild(s),n.appendChild(r),c.appendChild(n),i=80===s.offsetHeight,c.removeChild(n),i}},{name:"PassiveEventListener",fn:function(e,t){var i,n=!1;try{i=Object.defineProperty({},"passive",{get:function(){n=!0}}),window.addEventListener("e",null,i),window.removeEventListener("e",null,i)}catch(e){}return n}},{name:"CSSMinContent",ready:!0,fn:function(e,t){return t.innerHTML='<div style="height:4px;width:4px;min-height:-webkit-min-content;min-height:-moz-min-content;min-height:min-content"><div style="height:8px;width:8px"></div></div>',8===t.firstChild.offsetHeight}},{name:"ComputedSizeIncludesPadding",ready:!0,fn:function(e,t){var i,n=!1,r=document.body;return window.getComputedStyle&&((i=document.createElement("div")).style.cssText="width:10px;padding:2px;-webkit-box-sizing:border-box;box-sizing:border-box;",r.appendChild(i),n="10px"===window.getComputedStyle(i,null).width,r.removeChild(i)),n}},{name:"inputEventData",ready:!1,fn:function(){return!!(window.InputEvent&&"data"in new InputEvent("input"))}},0]},Ext.feature.tests.pop(),Ext.supports={},Ext.feature.detect(),Ext.env.Ready={blocks:0<(location.search||"").indexOf("ext-pauseReadyFire")?1:0,bound:0,delay:1,events:[],firing:!1,generation:0,listeners:[],nextId:0,sortGeneration:0,state:0,timer:null,bind:function(){var e=Ext.env.Ready,t=document;e.bound||("complete"===t.readyState?e.onReadyEvent({type:t.readyState||"body"}):(e.bound=1,Ext.browser.is.PhoneGap&&!Ext.os.is.Desktop&&(e.bound=2,t.addEventListener("deviceready",e.onReadyEvent,!1)),t.addEventListener("DOMContentLoaded",e.onReadyEvent,!1),window.addEventListener("load",e.onReadyEvent,!1)))},block:function(){++this.blocks,Ext.isReady=!1},fireReady:function(){var e=Ext.env.Ready;e.state||(Ext._readyTime=Ext.ticks(),Ext.isDomReady=!0,e.state=1,Ext.feature.detect(!0),e.delay?navigator.standalone?e.timer=Ext.defer(function(){e.timer=null,e.handleReadySoon()},1):e.handleReadySoon():e.handleReady())},handleReady:function(){1===this.state&&(this.state=2,Ext._beforeReadyTime=Ext.ticks(),this.invokeAll(),Ext._afterReadyTime=Ext.ticks())},handleReadySoon:function(e){var t=this;t.timer||(t.timer=Ext.defer(function(){t.timer=null,t.handleReady()},e||t.delay))},invoke:function(e){var t=e.delay;t?Ext.defer(e.fn,t,e.scope):Ext.elevateFunction?Ext.elevateFunction(e.fn,e.scope):e.fn.call(e.scope)},invokeAll:function(){Ext.elevateFunction?Ext.elevateFunction(this.doInvokeAll,this):this.doInvokeAll()},doInvokeAll:function(){var e,t=this,i=t.listeners;for(t.blocks||(Ext.isReady=!0),t.firing=!0;i.length;){if(t.sortGeneration!==t.generation&&(t.sortGeneration=t.generation,i.sort(t.sortFn)),e=i.pop(),t.blocks&&!e.dom){i.push(e);break}t.invoke(e)}t.firing=!1},makeListener:function(e,t,i){var n={fn:e,id:++this.nextId,scope:t,dom:!1,priority:0};return i&&Ext.apply(n,i),n.phase=n.dom?0:1,n},on:function(e,t,i){var n=Ext.env.Ready,r=n.makeListener(e,t,i);2!==n.state||n.firing||!r.dom&&n.blocks?(n.listeners.push(r),++n.generation,n.bound||n.bind()):n.invoke(r)},onReadyEvent:function(e){var t=Ext.env.Ready;Ext.elevateFunction?Ext.elevateFunction(t.doReadyEvent,t,arguments):t.doReadyEvent(e)},doReadyEvent:function(e){var t=this;e&&e.type&&t.events.push(e),0<t.bound&&(t.unbind(),t.bound=-1),t.state||t.fireReady()},sortFn:function(e,t){return-(e.phase-t.phase||t.priority-e.priority||e.id-t.id)},unblock:function(){var e=this;e.blocks&&(--e.blocks||2!==e.state||e.firing||e.invokeAll())},unbind:function(){var e=document;1<this.bound&&e.removeEventListener("deviceready",this.onReadyEvent,!1),e.removeEventListener("DOMContentLoaded",this.onReadyEvent,!1),window.removeEventListener("load",this.onReadyEvent,!1)}},function(){var r=Ext.env.Ready;Ext.isIE9m&&Ext.apply(r,{scrollTimer:null,readyStatesRe:/complete/i,pollScroll:function(){var t=!0;try{document.documentElement.doScroll("left")}catch(e){t=!1}return t&&document.body?r.onReadyEvent({type:"doScroll"}):r.scrollTimer=Ext.defer(r.pollScroll,20),t},bind:function(){var e,t=document;if(!r.bound){try{e=void 0===window.frameElement}catch(e){}if(e&&t.documentElement.doScroll){if(r.pollScroll())return}else r.pollScroll=Ext.emptyFn;"complete"===t.readyState?r.onReadyEvent({type:"already "+(t.readyState||"body")}):(t.attachEvent("onreadystatechange",r.onReadyStateChange),window.attachEvent("onload",r.onReadyEvent),r.bound=1)}},unbind:function(){document.detachEvent("onreadystatechange",r.onReadyStateChange),window.detachEvent("onload",r.onReadyEvent),Ext.isNumber(r.scrollTimer)&&(Ext.undefer(r.scrollTimer),r.scrollTimer=null)},onReadyStateChange:function(){var e=document.readyState;r.readyStatesRe.test(e)&&r.onReadyEvent({type:e})}}),Ext.onDocumentReady=function(e,t,i){var n={dom:!0};i&&Ext.apply(n,i),r.on(e,t,n)},Ext.onReady=function(e,t,i){r.on(e,t,i)},Ext.onInternalReady=function(e,t,i){r.on(e,t,Ext.apply({priority:1e3},i))},r.bind()}(),Ext.Loader=new function(){var v=this,E=Ext.ClassManager,s=Ext.Boot,e=Ext.Class,d=Ext.env.Ready,t=Ext.Function.alias,b=["extend","mixins","requires"],C={},i=[],o=[],r=[],S={},h={enabled:!0,scriptChainDelay:!1,disableCaching:!0,disableCachingParam:"_dc",paths:E.paths,preserveScripts:!0,scriptCharset:void 0},n={disableCaching:!0,disableCachingParam:!0,preserveScripts:!0,scriptChainDelay:"loadDelay"};Ext.apply(v,{isInHistory:C,isLoading:!1,history:i,config:h,readyListeners:o,optionalRequires:r,requiresMap:S,hasFileLoadError:!1,scriptsLoading:0,classesLoading:{},missingCount:0,missingQueue:{},syncModeEnabled:!1,init:function(){var e,t,i,n,r,s=document.getElementsByTagName("script"),o=s[s.length-1].src,a=o.substring(0,o.lastIndexOf("/")+1),l=Ext._classPathMetadata,c=Ext.Microloader,u=Ext.manifest;if(-1!==o.indexOf("packages/core/src/")?a+="../../":-1!==o.indexOf("/core/src/class/")&&(a+="../../../"),E.getPath("Ext")||E.setPath("Ext",a+"src"),l&&(Ext._classPathMetadata=null,v.addClassPathMappings(l)),u&&(e=u.loadOrder,t=Ext.Boot.baseUrl,e&&u.bootRelative))for(i=e.length,n=0;n<i;n++)(r=e[n]).path=t+r.path,r.canonicalPath=!0;c&&(d.block(),c.onMicroloaderReady(function(){d.unblock()}))},setConfig:Ext.Function.flexSetter(function(e,t){var i=n[e];return"paths"===e?v.setPath(t):(h[e]=t,i&&s.setConfig(!0===i?e:i,t)),v}),getConfig:function(e){return e?h[e]:h},setPath:function(){return E.setPath.apply(E,arguments),v},addClassPathMappings:function(e){return E.setPath(e),v},addBaseUrlClassPathMappings:function(e){var t;for(t in e)e[t]=s.baseUrl+e[t];Ext.Loader.addClassPathMappings(e)},getPath:function(e){return E.getPath(e)},require:function(e,t,i,n){var r;return n?v.exclude(n).require(e,t,i):(r=E.getNamesByExpression(e),v.load(r,t,i))},syncRequire:function(){var e,t=v.syncModeEnabled;return v.syncModeEnabled=!0,e=v.require.apply(v,arguments),v.syncModeEnabled=t,e},exclude:function(e){var t=E.select({require:function(e,t,i){return v.load(e,t,i)},syncRequire:function(e,t,i){var n,r=v.syncModeEnabled;return v.syncModeEnabled=!0,n=v.load(e,t,i),v.syncModeEnabled=r,n}});return t.exclude(e),t},load:function(e,t,i){t&&(t.length&&(t=v.makeLoadCallback(e,t)),t=t.bind(i||Ext.global));var n,r,s,o=E.classState,a=[],l=[],c={},u=e.length;for(r=0;r<u;++r)n=E.resolveName(e[r]),E.isCreated(n)||(a.push(n),o[n]||(c[n]=v.getPath(n),l.push(c[n])));return(s=a.length)?(v.missingCount+=s,E.onCreated(function(){t&&Ext.callback(t,i,arguments),v.checkReady()},v,a),h.enabled||Ext.raise("Ext.Loader is not enabled, so dependencies cannot be resolved dynamically. Missing required class"+(1<a.length?"es":"")+": "+a.join(", ")),l.length?v.loadScripts({url:l,_classNames:a,_urlByClass:c}):v.checkReady()):(t&&t.call(i),v.checkReady()),v.syncModeEnabled&&1===u?E.get(e[0]):v},makeLoadCallback:function(i,n){return function(){for(var e=[],t=i.length;0<t--;)e[t]=E.get(i[t]);return n.apply(this,e)}},onLoadFailure:function(e){var t,i,n,r=e.entries||[],s=this.onError;if(v.hasFileLoadError=!0,--v.scriptsLoading,s){for(n=0;n<r.length;n++)if((i=r[n]).error){t=new Error("Failed to load: "+i.url);break}t=t||new Error("Failed to load"),s.call(this.userScope,this,t,e)}else Ext.log.error("[Ext.Loader] Some requested files failed to load.");v.checkReady()},onLoadSuccess:function(){var e,t,i,n=this,r=n.onLoad,s=n._classNames,o=n._urlByClass,a=E.classState,l=v.missingQueue;for(--v.scriptsLoading,r&&r.call(n.userScope,n),t=0,i=s.length;t<i;t++)a[e=s[t]]||(l[e]=o[e]);v.checkReady()},reportMissingClasses:function(){var e,t=v.missingQueue,i=[],n=[];if(!v.syncModeEnabled&&!v.scriptsLoading&&v.isLoading&&!v.hasFileLoadError){for(e in t)i.push(e),n.push(t[e]);if(i.length)throw new Error("The following classes are not declared even if their files have been loaded: '"+i.join("', '")+"'. Please check the source code of their corresponding files for possible typos: '"+n.join("', '"))}},onReady:function(e,t,i,n){var r;i?d.on(e,t,n):(r=d.makeListener(e,t,n),v.isLoading?o.push(r):d.invoke(r))},addUsedClasses:function(e){var t,i,n;if(e)for(i=0,n=(e="string"==typeof e?[e]:e).length;i<n;i++)"string"!=typeof(t=e[i])||Ext.Array.contains(r,t)||r.push(t);return v},triggerReady:function(){var e,t=r;if(v.isLoading&&t.length)r=[],v.require(t);else{for(v.isLoading=!1,o.sort(d.sortFn);o.length&&!v.isLoading;)e=o.pop(),d.invoke(e);d.unblock()}},historyPush:function(e){return!e||C[e]||E.overrideMap[e]||(C[e]=!0,i.push(e)),v},loadScripts:function(e){var t,i=Ext.manifest,n=i&&i.loadOrder,r=i&&i.loadOrderMap;++v.scriptsLoading,n&&!r&&(i.loadOrderMap=r=s.createLoadOrderMap(n)),v.checkReady(),(t=Ext.apply({loadOrder:n,loadOrderMap:r,charset:h.scriptCharset,success:v.onLoadSuccess,failure:v.onLoadFailure,sync:v.syncModeEnabled,_classNames:[]},e)).userScope=t.scope,t.scope=t,s.load(t)},loadScriptsSync:function(e){var t=v.syncModeEnabled;v.syncModeEnabled=!0,v.loadScripts({url:e}),v.syncModeEnabled=t},loadScriptsSyncBasePrefix:function(e){var t=v.syncModeEnabled;v.syncModeEnabled=!0,v.loadScripts({url:e,prependBaseUrl:!0}),v.syncModeEnabled=t},loadScript:function(e){var t=!(e instanceof Array)&&!("string"==typeof e),i=t?e.url:e,n=t&&e.onError,r=t&&e.onLoad,s={url:i,scope:t&&e.scope,onLoad:r,onError:n,_classNames:[]};v.loadScripts(s)},checkMissingQueue:function(){var e,t=v.missingQueue,i={},n=0;for(e in t)E.classState[e]||E.isCreated(e)||(i[e]=t[e],n++);v.missingCount=n,v.missingQueue=i},checkReady:function(){var e,t=v.isLoading;v.checkMissingQueue(),(e=v.missingCount+v.scriptsLoading)&&!t?(d.block(),v.isLoading=!!e):!e&&t&&v.triggerReady(),!v.scriptsLoading&&v.missingCount&&Ext.defer(function(){var e;if(!v.scriptsLoading&&v.missingCount)for(e in Ext.log.error("[Loader] The following classes failed to load:"),v.missingQueue)Ext.log.error("[Loader] "+e+" from "+v.missingQueue[e])},1e3)}}),Ext.require=t(v,"require"),Ext.syncRequire=t(v,"syncRequire"),Ext.exclude=t(v,"exclude"),e.registerPreprocessor("loader",function(s,o,a,l){Ext.classSystemMonitor&&Ext.classSystemMonitor(s,"Ext.Loader#loaderPreprocessor",arguments);var e,t,i,n,r,c,u,d,h,f=this,g=[],p=E.getName(s);for(t=0,n=b.length;t<n;t++)if(u=b[t],o.hasOwnProperty(u))if("string"==typeof(d=o[u]))g.push(d);else if(d instanceof Array)for(i=0,r=d.length;i<r;i++)"string"==typeof(c=d[i])&&g.push(c);else if("function"!=typeof d)for(i in d)d.hasOwnProperty(i)&&"string"==typeof(c=d[i])&&g.push(c);if(0!==g.length){p&&(S[p]=g);var m,x=Ext.manifest&&Ext.manifest.classes,y=[];if(p&&(!x||!x[p])){for(h=v.requiredByMap||(v.requiredByMap={}),t=0,n=g.length;t<n;t++)(h[e=g[t]]||(h[e]=[])).push(p);(m=function(e){var t,i,n,r=S[e];if(y.push(e),r)for(Ext.Array.contains(r,p)&&Ext.Error.raise("Circular requirement detected! '"+p+"' and '"+y[1]+"' mutually require each other. Path: "+y.join(" -> ")+" -> "+y[0]),i=0,n=r.length;i<n;i++)t=r[i],C[t]||m(r[i])})(p)}return(p?v.exclude(p):v).require(g,function(){var e,t,i,n,r;for(e=0,t=b.length;e<t;e++)if(u=b[e],o.hasOwnProperty(u))if("string"==typeof(d=o[u]))o[u]=E.get(d);else if(d instanceof Array)for(i=0,n=d.length;i<n;i++)"string"==typeof(c=d[i])&&(o[u][i]=E.get(c));else if("function"!=typeof d)for(r in d)d.hasOwnProperty(r)&&"string"==typeof(c=d[r])&&(o[u][r]=E.get(c));l.call(f,s,o,a)}),!1}},!0,"after","className"),E.registerPostprocessor("uses",function(e,t,i){var n,r=i.uses;Ext.classSystemMonitor&&Ext.classSystemMonitor(t,"Ext.Loader#usesPostprocessor",arguments),r&&(n=E.getNamesByExpression(i.uses),v.addUsedClasses(n))}),E.onCreated(v.historyPush),v.init()},Ext._endTime=Ext.ticks(),Ext._beforereadyhandler&&Ext._beforereadyhandler(),Ext.define("Ext.Mixin",function(f){return{statics:{addHook:function(n,e,t,r){function i(){var e=arguments,t=s?n:r[n],i=this.callParent(e);return t.apply(this,e),i}var s=Ext.isFunction(n),o=e.hasOwnProperty(t)&&e[t];s&&(n.$previous=Ext.emptyFn),i.$name=t,i.$owner=e.self,o?(i.$previous=o.$previous,o.$previous=i):e[t]=i}},onClassExtended:function(e,t){var r,s,o,a,l,i,n=t.mixinConfig,c=t.xhooks,u=e.superclass,d=t.onClassMixedIn,h=t.afterClassMixedIn;c&&(delete t.xhooks,(n||(t.mixinConfig=n={})).on=c),n&&((i=u.mixinConfig)&&(t.mixinConfig=n=Ext.merge({},i,n)),t.mixinId=n.id,n.beforeHooks&&Ext.raise('Use of "beforeHooks" is deprecated - use "before" instead'),n.hooks&&Ext.raise('Use of "hooks" is deprecated - use "after" instead'),n.afterHooks&&Ext.raise('Use of "afterHooks" is deprecated - use "after" instead'),r=n.after,s=n.before,o=n.configs,a=n.extended,c=n.on,l=n.mixed),(r||s||c||a)&&(t.onClassMixedIn=function(i){var e,n=this.prototype,t=i.prototype;if(s&&Ext.Object.each(s,function(e,t){i.hookMember(e,function(){if(!1!==n[t].apply(this,arguments))return this.callParent(arguments)})}),r&&Ext.Object.each(r,function(e,t){i.hookMember(e,function(){var e=this.callParent(arguments);return n[t].apply(this,arguments),e})}),c)for(e in c)f.addHook(c[e],t,e,n);a&&i.onExtended(function(){var e=Ext.Array.slice(arguments,0);return e.unshift(i),a.apply(this,e)},this),d&&d.apply(this,arguments)}),(o||l)&&(t.afterClassMixedIn=function(e){if(o){var t,i,n,r=e.prototype,s=this.$config.configs;for(i in r)(t=s[i])&&t.isConfig&&r.hasOwnProperty(i)&&((n=n||{})[i]=r[i],delete r[i]);n&&e.$config.add(n)}h&&h.apply(this,arguments),l&&l.apply(this,arguments)})}}}),Ext.util=Ext.util||{},Ext.util.DelayedTask=function(r,s,o,a,t){function l(){u.id=null,s&&s.destroyed||(o?r.apply(s,o):r.call(s)),!1===t&&(Ext._suppressIdle=!0)}var c,u=this;r&&(l.$origFn=r.$origFn||r,l.$skipTimerCheck=l.$origFn.$skipTimerCheck),a="boolean"!=typeof a||a,u.id=null,u.delay=function(e,t,i,n){return a&&u.cancel(),"number"==typeof e&&(c=e),r=t||r,s=i||s,o=n||o,u.delayTime=c,r&&(l.$origFn=r.$origFn||r,l.$skipTimerCheck=l.$origFn.$skipTimerCheck),u.id||(u.id=-1===c?Ext.raf(l):Ext.defer(l,c||1)),u.id},u.cancel=function(){u.id&&(-1===u.delayTime?Ext.unraf(u.id):Ext.undefer(u.id),u.id=null)},u.flush=function(){var e;u.id&&(u.cancel(),e=t,t=!0,l(),t=e)},u.stop=function(e,t){!e||e!==r||t&&t!==s||u.cancel()}},Ext.define("Ext.util.Event",function(){var S=Array.prototype.slice,y=Ext.Array.insert,a=Ext.Array.toArray,c={};return{isEvent:!0,suspended:0,noOptions:{},constructor:function(e,t){this.name=t,this.observable=e,this.listeners=[]},addListener:function(e,t,i,n,r){var s,o,a,l,c,u,d,h,f,g=this,p=!1,m=g.observable,x=g.name;if(t&&!Ext._namedScopes[t]&&"string"==typeof e&&"function"!=typeof t[e]&&Ext.raise("No method named '"+e+"' found on scope object"),-1===g.findListener(e,t)){if(o=g.createListener(e,t,i,n,r),g.firing&&(g.listeners=g.listeners.slice(0)),h=d=(s=g.listeners).length,a=i&&i.priority,u=void 0!==(c=g._highestNegativePriorityIndex),a)if(!(l=a<0)||u){for(f=l?c:0;f<d;f++)if((s[f].o&&s[f].o.priority||0)<a){h=f;break}}else g._highestNegativePriorityIndex=h;else u&&(h=c);!l&&h<=c&&g._highestNegativePriorityIndex++,h===d?s[d]=o:y(s,h,[o]),m.isElement&&m._getPublisher(x,!1===i.translate).subscribe(m,x,!1!==i.delegated,i.capture),r&&(r.managedListeners||(r.managedListeners=[])).push({item:g.observable,ename:i&&i.managedName||g.name,fn:e,scope:t,options:i}),p=!0}return p},createListener:function(e,t,i,n,r){var s,o=this,a=Ext._namedScopes,l=a[t],c={fn:e,scope:t,ev:o,caller:n,manager:r,namedScope:l,defaultScope:l?t||o.observable:void 0,lateBound:"string"==typeof e},u=e,d=!1;return c.lateBound&&"."===e[2]&&("up"!==e.substr(0,2)&&Ext.raise("Invalid listener method: "+e),c.defaultScope=null,c.namedScope=a[c.scope=t="up"],c.fn=u=e.substr(3)),i&&((c.o=i).single&&(u=o.createSingle(u,c,i,t),d=!0),i.target&&(u=o.createTargeted(u,c,i,t,d),d=!0),i.onFrame&&(u=o.createAnimFrame(u,c,i,t,d),d=!0),i.delay&&(u=o.createDelayed(u,c,i,t,d),d=!0),i.buffer&&(u=o.createBuffered(u,c,i,t,d),d=!0),o.observable.isElement&&(s=i.type)&&(c.type=s)),c.fireFn=u,c.wrapped=d,c},findListener:function(e,t){for(var i,n=this.listeners,r=n.length;r--;)if((i=n[r])&&i.fn===e&&i.scope==t)return r;return-1},removeListener:function(e,t,i){var n,r,s,o,a,l,c=this,u=!1,d=c.observable,h=c.name;if(-1!==(i=null!=i?i:c.findListener(e,t))){if(n=c.listeners[i],c.firing&&(c.listeners=c.listeners.slice(0)),c.listeners.splice(i,1),c._highestNegativePriorityIndex&&(i<c._highestNegativePriorityIndex?c._highestNegativePriorityIndex--:i===c._highestNegativePriorityIndex&&i===c.listeners.length&&delete c._highestNegativePriorityIndex),n){if(r=n.o,n.task&&(n.task.cancel(),delete n.task),l=n.tasks&&n.tasks.length){for(;l--;)n.tasks[l].cancel();delete n.tasks}if(n.fireFn.timerId=Ext.undefer(n.fireFn.timerId),(s=n.manager)&&(o=s.managedListeners))for(l=o.length;l--;)(a=o[l]).item===c.observable&&a.ename===h&&a.fn===e&&a.scope===t&&o.splice(l,1);d.isElement&&d._getPublisher(h,!1===r.translate).unsubscribe(d,h,!1!==r.delegated,r.capture)}u=!0}return u},clearListeners:function(){for(var e,t=this.listeners,i=t.length;i--;)e=t[i],this.removeListener(e.fn,e.scope)},suspend:function(){++this.suspended},resume:function(){this.suspended&&--this.suspended},isSuspended:function(){return 0<this.suspended},fireDelegated:function(e,t){return this.firingObservable=e,this.fire.apply(this,t)},fire:function(){var e,t,i,n,r,s,o,a,l,c,u,d,h,f,g,p=this,m=Ext.ComponentQuery,x=p.listeners,y=x.length,v=p.observable,E=v.isElement,b=v.isComponent,C=p.firingObservable;if(!p.suspended&&0<y)for(p.firing=!0,o=(r=arguments.length?S.call(arguments,0):[]).length,E&&(h=r[0]),n=0;n<y;n++)if(s=x[n]){if(e=s.o,E&&(l&&h.setCurrentTarget(l),(c=s.type)&&(u=h,h=r[0]=u.chain({type:c,isGesture:!1})),Ext.EventObject=h),d=r,e){if(t=e.delegate)if(E){if(!(a=h.getTarget("function"==typeof t?t:"#"+h.currentTarget.id+" "+t)))continue;r[1]=a,l=h.currentTarget,h.setCurrentTarget(a)}else if(b&&!m.is(C,t,v))continue;E&&(e.preventDefault&&h.preventDefault(),e.stopPropagation&&h.stopPropagation(),e.stopEvent&&h.stopEvent()),(r[o]=e).args&&(d=e.args.concat(r))}if(f=(i=p.getFireInfo(s)).fn,g=i.scope,i.fn=i.scope=null,g&&g.destroyed&&(p.removeListener(f,g,n),f=null,"Ext.container.Monitor"!==g.$className&&(Ext.raiseOnDestroyed?Ext.raise:Ext.log.warn)({msg:'Attempting to fire "'+p.name+'" event on destroyed '+(g.$className||"object")+" instance with id: "+(g.id||"unknown"),instance:g})),f&&!1===f.apply(g,d))return Ext.EventObject=null,p.firing=!1;e&&r.length--,u&&(h=r[0]=u,u=null),Ext.EventObject=null}return!(p.firing=!1)},getFireInfo:function(e,t){var i,n,r=this.observable,s=e.fireFn,o=e.scope,a=e.namedScope;if(!t&&e.wrapped)return c.fn=s,c;var l=i=t?e.fn:s;return e.lateBound?(n=e.caller||r,a&&a.isUp?o=Ext.lookUpFn(n,i):o&&!a||(o=n.resolveListenerScope(e.defaultScope)),o||Ext.raise('Unable to dynamically resolve scope for "'+e.ev.name+'" listener on '+this.observable.id),Ext.isFunction(o[i])||Ext.raise('No method named "'+i+'" on '+(o.$className||"scope object.")),i=o[i]):a&&a.isController?(o=(e.caller||r).resolveListenerScope(e.defaultScope))||Ext.raise('Unable to dynamically resolve scope for "'+e.ev.name+'" listener on '+this.observable.id):o&&!a||(o=r),c.fn=i,c.scope=o,i||Ext.raise('Unable to dynamically resolve method "'+l+'" on '+this.observable.$className),c},createAnimFrame:function(e,t,i,n,r){var s;return r||(e=(s=t.ev.getFireInfo(t,!0)).fn,n=s.scope,s.fn=s.scope=null),Ext.Function.createAnimationFrame(e,n,i.args)},createTargeted:function(t,i,n,r,s){return function(){var e;if(n.target===arguments[0])return s||(e=i.ev.getFireInfo(i,!0),t=e.fn,r=e.scope,e.fn=e.scope=null),t.apply(r,arguments)}},createBuffered:function(t,i,n,r,s){return i.task=new Ext.util.DelayedTask,function(){var e;i.task&&(Ext._unitTesting&&(n.$delayedTask=i.task),s||(e=i.ev.getFireInfo(i,!0),t=e.fn,r=e.scope,e.fn=e.scope=null),i.task.delay(n.buffer,t,r,a(arguments)))}},createDelayed:function(i,n,r,s,o){return function(){var e,t=new Ext.util.DelayedTask;o||(e=n.ev.getFireInfo(n,!0),i=e.fn,s=e.scope,e.fn=e.scope=null),n.tasks||(n.tasks=[]),n.tasks.push(t),Ext._unitTesting&&(r.$delayedTask=t),t.delay(r.delay||10,i,s,a(arguments))}},createSingle:function(r,s,e,o,a){return function(){var e,t=s.ev,i=t.observable,n=s.fn;return i?i.destroyed||i.removeListener(t.name,n,o):t.removeListener(n,o),a||(e=t.getFireInfo(s,!0),r=e.fn,o=e.scope,e.fn=e.scope=null),r.apply(o,arguments)}}}}),Ext.define("Ext.mixin.Identifiable",function(l){return{isIdentifiable:!0,mixinId:"identifiable",getId:function(){var e,t=this,i=t.id;return i||0===i||((e=t.initialConfig)&&e.id?i=e.id:(i=t.generateAutoId(),t.autoGenId=!0),t.setId(i)),t.getId=l._getId,i},setId:function(e){this.id=this.id=e},privates:{statics:{_idCleanRe:/\\.|[^\\w-]/g,uniqueIds:{},_getId:function(){return this.id}},defaultIdPrefix:"ext-",defaultIdSeparator:"-",id:null,autoGenId:!1,generateAutoId:function(){var e,t,i,n,r=this,s=r.self.prototype,o=r.defaultIdSeparator,a=l.uniqueIds;return s.hasOwnProperty("identifiablePrefix")||(e=l._idCleanRe,t=r.defaultIdPrefix,i=(n=r.xtype)?t+n.replace(e,o)+o:(i=s.$className)?i.replace(e,o).toLowerCase()+o:t+"anonymous"+o,s.identifiablePrefix=i),i=r.identifiablePrefix,a.hasOwnProperty(i)||(a[i]=0),i+ ++a[i]}}}}),Ext.define("Ext.mixin.Observable",function(f){var u=Ext.emptyFn,s=[],n=Array.prototype.slice,g=function(e){if(e instanceof g)return e;this.observable=e,arguments[1].isObservable&&(this.managedListeners=!0),this.args=n.call(arguments,1)},p=["events","hasListeners","managedListeners","eventedBeforeEventNames"];return g.prototype.destroy=function(){var e=this,t=e.args,i=e.observable,n=t[0].element||t[3]&&t[3].element;n&&(-1===Ext.Array.indexOf(i.referenceList,n)&&Ext.Logger.error("Destroying event listener with an invalid element reference of '"+n+"' for this component. Available values are: '"+i.referenceList.join("', '")+"'",i),i=i[n]),i.destroyed||i[e.managedListeners?"mun":"un"].apply(i,e.args),e.destroy=Ext.emptyFn},{extend:Ext.Mixin,mixinConfig:{id:"observable",after:{destroy:"destroyObservable"}},mixins:[Ext.mixin.Identifiable],statics:{releaseCapture:function(e){e.fireEventArgs=this.prototype.fireEventArgs},capture:function(e,i,n){this.captureArgs(e,function(e,t){return i.apply(n,[e].concat(t))},n)},captureArgs:function(e,t,i){e.fireEventArgs=Ext.Function.createInterceptor(e.fireEventArgs,t,i)},observe:function(e,t){return e&&(e.isObservable||(Ext.applyIf(e,new this),this.captureArgs(e.prototype,e.fireEventArgs,e)),Ext.isObject(t)&&e.on(t)),e},prepareClass:function(e,t,i){var n,r,s,o,a=e.listeners=[],l=i||e.prototype,c=l.listeners,u=t?t.listeners:e.superclass.self.listeners;if(u&&a.push(u),c&&((n=c.scope)?(r=Ext._namedScopes[n])&&r.isController&&(c.scope="self.controller"):c.scope="self",a.push(c),l.listeners=null),!e.HasListeners){function d(){}var h=e.superclass.HasListeners||t&&t.HasListeners||f.HasListeners;e.prototype.HasListeners=e.HasListeners=d,d.prototype=e.hasListeners=new h}for(n=e.prototype.$noClearOnDestroy||{},s=0,o=p.length;s<o;s++)n[p[s]]=!0;e.prototype.$noClearOnDestroy=n}},isObservable:!0,$vetoClearingPrototypeOnDestroy:!0,eventsSuspended:0,constructor:function(e){var t,i,n,r,s,o=this,a=o.self;if(!o.$observableInitialized){if(o.$observableInitialized=!0,o.hasListeners=o.hasListeners=new o.HasListeners,o.eventedBeforeEventNames={},o.events=o.events||{},(t=a.listeners)&&!o._addDeclaredListeners(t)&&(a.listeners=null),i=e&&e.listeners||o.listeners)if(i instanceof Array)for(s=0,r=i.length;s<r;++s)o.addListener(i[s]);else o.addListener(i);(n=e&&e.bubbleEvents||o.bubbleEvents)&&o.enableBubble(n),o.$applyConfigs?e&&Ext.apply(o,e):o.initConfig(e),i&&(o.listeners=null)}},onClassExtended:function(e,t){e.HasListeners||f.prepareClass(e,e.prototype.$observableMixedIn?void 0:t)},$eventOptions:{scope:1,delay:1,buffer:1,onFrame:1,single:1,args:1,destroyable:1,priority:1,order:1},$orderToPriority:{before:100,current:0,after:-100},_addDeclaredListeners:function(e){var t=this;return e instanceof Array?Ext.each(e,t._addDeclaredListeners,t):(t._addedDeclaredListeners=!0,t.addListener(e)),t._addedDeclaredListeners},addManagedListener:function(e,t,i,n,r,s){var o,a,l=this;if(l.managedListeners=l.managedListeners||[],"string"!=typeof t){for(t in a=4<arguments.length?r:t,r=t)r.hasOwnProperty(t)&&(o=r[t],e.$eventOptions[t]||l.addManagedListener(e,t,o.fn||o,o.scope||r.scope||n,o.fn?o:a,!0));if(r&&r.destroyable)return new g(l,e,r)}else if(i!==u&&(e.doAddListener(t,i,n,r,null,l,l),!s&&r&&r.destroyable))return new g(l,e,t,i,n)},removeManagedListener:function(e,t,i,n){var r,s,o,a,l;if(!e.$observableDestroyed)if("string"!=typeof t)for(t in r=t)r.hasOwnProperty(t)&&(s=r[t],e.$eventOptions[t]||this.removeManagedListener(e,t,s.fn||s,s.scope||r.scope||n));else for(o=this.managedListeners?this.managedListeners.slice():[],t=Ext.canonicalEventName(t),l=0,a=o.length;l<a;l++)this.removeManagedListenerItem(!1,o[l],e,t,i,n)},fireEvent:function(e){return this.fireEventArgs(e,n.call(arguments,1))},resolveListenerScope:function(e){var t=Ext._namedScopes[e];return t&&(t.isController&&Ext.raise('scope: "controller" can only be specified on classes that derive from Ext.Component or Ext.Widget'),(t.isSelf||t.isThis)&&(e=null)),e||this},fireEventArgs:function(e,t){var i,n=this.events,r=!0;return e=Ext.canonicalEventName(e),i=n&&n[e],this.hasListeners[e]&&(r=this.doFireEvent(e,t||s,!!i&&i.bubble)),r},fireAction:function(e,t,i,n,r,s){"string"!=typeof i||n||(i=this[i]),(r=r?Ext.Object.chain(r):{}).single=!0,r.priority="after"===s?-99.5:99.5,this.doAddListener(e,i,n,r),this.fireEventArgs(e,t)},$eventedController:{_paused:1,pause:function(){++this._paused},resume:function(){var e,t,i=this,n=i.fn,r=i.scope,s=i.fnArgs;if(!--i._paused){if(n&&(e=Ext.Array.slice(s||i.args),!1===s&&e.shift(),i.fn=null,e.push(i),Ext.isFunction(n)?t=n.apply(r,e):r&&Ext.isString(n)&&Ext.isFunction(r[n])&&(t=r[n].apply(r,e)),!1===t))return!1;if(!i._paused)return i.owner.fireEventArgs(i.eventName,i.args)}}},fireEventedAction:function(e,t,i,n,r){var s,o=this.eventedBeforeEventNames,a=o[e]||(o[e]="before"+e),l=Ext.apply({owner:this,eventName:e,fn:i,scope:n,fnArgs:r,args:t},this.$eventedController);return t.push(l),s=this.fireEventArgs(a,t),t.pop(),!1!==s&&l.resume()},doFireEvent:function(e,t,i){var n,r,s=this,o=!0;do{if(s.eventsSuspended)return(n=s.eventQueue)&&n.push([e,t]),o;if((r=s.events&&s.events[e])&&!0!==r&&!1===(o=r.fire.apply(r,t)))break}while(i&&(s=s.getBubbleParent()));return o},getBubbleParent:function(){var e=this.getBubbleTarget&&this.getBubbleTarget();return e&&e.isObservable?e:null},addListener:function(e,t,i,n,r,s){var o,a,l,c,u,d=this,h=Ext._namedScopes;if("string"!=typeof e){for(e in l=(a=(i=(n=e).scope)&&h[i])&&a.isSelf,u=(d.isComponent||d.isWidget)&&n.element?d.$elementEventOptions:d.$eventOptions,n)o=n[e],u[e]||((c=o.scope)&&l&&(a=h[c])&&a.isController&&(c="self.controller"),d.doAddListener(e,o.fn||o,c||i,o.fn?o:n,r,s));if(n&&n.destroyable)return new g(d,n)}else if(d.doAddListener(e,t,i,n,r,s),n&&n.destroyable)return new g(d,e,t,i,n);return d},removeListener:function(e,t,i,n){var r,s,o=this;if("string"!=typeof e)for(e in s=e,n=n||o.$eventOptions,s)s.hasOwnProperty(e)&&(r=s[e],o.$eventOptions[e]||o.doRemoveListener(e,r.fn||r,r.scope||s.scope));else o.doRemoveListener(e,t,i);return o},onBefore:function(e,t,i,n){return this.addListener(e,t,i,n,"before")},onAfter:function(e,t,i,n){return this.addListener(e,t,i,n,"after")},unBefore:function(e,t,i,n){return this.removeListener(e,t,i,n,"before")},unAfter:function(e,t,i,n){return this.removeListener(e,t,i,n,"after")},addBeforeListener:function(){return this.onBefore.apply(this,arguments)},addAfterListener:function(){return this.onAfter.apply(this,arguments)},removeBeforeListener:function(){return this.unBefore.apply(this,arguments)},removeAfterListener:function(){return this.unAfter.apply(this,arguments)},clearListeners:function(){var e,t,i=this.events,n=this.hasListeners;if(i){for(t in i)i.hasOwnProperty(t)&&(e=i[t]).isEvent&&(delete n[t],e.clearListeners());this.events=null}this.clearManagedListeners()},purgeListeners:function(){return Ext.global.console&&Ext.global.console.warn("Observable: purgeListeners has been deprecated. Please use clearListeners."),this.clearListeners.apply(this,arguments)},clearManagedListeners:function(){var e,t,i=this.managedListeners;if(i){for(this.managedListeners=null,e=0,t=i.length;e<t;e++)this.removeManagedListenerItem(!0,i[e]);i.length=0}this.managedListeners=i},removeManagedListenerItem:function(e,t,i,n,r,s){!e&&(t.item!==i||t.ename!==n||r&&t.fn!==r||s&&t.scope!==s)||(t.item.destroyed||t.item.doRemoveListener(t.ename,t.fn,t.scope,t.options),e||Ext.Array.remove(this.managedListeners,t))},purgeManagedListeners:function(){return Ext.global.console&&Ext.global.console.warn("Observable: purgeManagedListeners has been deprecated. Please use clearManagedListeners."),this.clearManagedListeners.apply(this,arguments)},hasListener:function(e){return e=Ext.canonicalEventName(e),!!this.hasListeners[e]},isSuspended:function(e){var t=0<this.eventsSuspended,i=this.events;return!t&&e&&i&&(e=i[e])&&e.isEvent?e.isSuspended():t},suspendEvents:function(e){++this.eventsSuspended,e&&!this.eventQueue&&(this.eventQueue=[])},suspendEvent:function(){var e,t,i,n=this.events,r=arguments.length;for(e=0;e<r;e++)i=arguments[e],(t=n[i=Ext.canonicalEventName(i)])&&t.isEvent||(t=this._initEvent(i)),t.suspend()},resumeEvent:function(){var e,t,i=this.events||0,n=i&&arguments.length;for(e=0;e<n;e++)(t=i[Ext.canonicalEventName(arguments[e])])&&t.resume&&t.resume()},resumeEvents:function(e){var t,i,n=this,r=n.eventQueue;if(n.eventsSuspended&&!--n.eventsSuspended&&(delete n.eventQueue,!e&&r))for(t=r.length,i=0;i<t;i++)n.fireEventArgs.apply(n,r[i])},relayEvents:function(e,t,i){var n,r,s=t.length,o=0,a={};if(Ext.isObject(t))for(o in t)r=t[o],a[o]=this.createRelayer(r);else for(;o<s;o++)a[n=t[o]]=this.createRelayer(i?i+n:n);return this.mon(e,a,null,null,void 0),new g(this,e,a)},createRelayer:function(e,t){var i=this;return function(){return i.fireEventArgs.call(i,e,t?n.apply(arguments,t):arguments)}},enableBubble:function(e){if(e){var t,i,n,r="string"==typeof e?arguments:e,s=this.events,o=s&&r.length;for(n=0;n<o;++n)t=r[n],(i=s[t=Ext.canonicalEventName(t)])&&i.isEvent||(i=this._initEvent(t)),this.hasListeners._incr_(t),i.bubble=!0}},destroy:function(){this.clearListeners(),this.callParent(),this.destroyObservable(!0)},destroyObservable:function(e){var t=this,i=t.clearPropertiesOnDestroy;t.$observableDestroyed||(e||t.clearListeners(),t.destroyed&&(i&&(!0!==i||t.$nulled||t.$reap(),t.clearPrototypeOnDestroy||(t.fireEvent=t.fireEventArgs=t.fireAction=t.fireEventedAction=Ext.emptyFn),t.events=t.managedListeners=t.eventedBeforeEventNames=null,t.$observableDestroyed=!0),t.clearPrototypeOnDestroy&&Object.setPrototypeOf&&!t.$alreadyNulled&&(Object.setPrototypeOf(t,null),t.$alreadyNulled=!0)))},privates:{doAddListener:function(e,t,i,n,r,s,o){var a,l=this,c=!1;return(r=r||n&&n.order)&&(n&&n.priority||((n=n?Ext.Object.chain(n):{}).priority=l.$orderToPriority[r])),e=Ext.canonicalEventName(e),t||Ext.raise("Cannot add '"+e+"' listener to "+l.$className+" instance.  No function specified."),(a=(l.events||(l.events={}))[e])&&a.isEvent||(a=l._initEvent(e)),t!==u&&(!o&&i&&i.isObservable&&i!==l&&(o=i),a.addListener(t,i,n,s,o)&&(l.hasListeners._incr_(e),c=!0)),c},doRemoveListener:function(e,t,i){var n,r=!1,s=this.events;return e=Ext.canonicalEventName(e),n=s&&s[e],t||Ext.raise("Cannot remove '"+e+"' listener to "+this.$className+" instance.  No function specified."),n&&n.isEvent&&n.removeListener(t,i)&&(this.hasListeners._decr_(e),r=!0),r},_initEvent:function(e){return this.events[e]=new Ext.util.Event(this,e)}},deprecated:{"5.0":{methods:{addEvents:null}}}}},function(){function e(){}var i=this,t=i.prototype,n=function(e){var t=e.prototype;e.HasListeners||(t.$observableMixedIn=1,i.prepareClass(e,this),e.onExtended(function(e,t){Ext.classSystemMonitor&&Ext.classSystemMonitor("extend mixin",arguments),i.prepareClass(e,null,t)}),t.onClassMixedIn?Ext.override(e,{onClassMixedIn:function(e){n.call(this,e),this.callParent(arguments)}}):t.onClassMixedIn=function(e){n.call(this,e)}),r.call(this,e)},r=t.onClassMixedIn;function o(e){var s,o,a,l,c=(this.methodEvents=this.methodEvents||{})[e],u=this;return c||(u.methodEvents[e]=c={},c.originalFn=u[e],c.methodName=e,c.before=[],c.after=[],l=function(e,t,i){t=t||u,"string"==typeof e&&(e=t[e]),void 0!==(o=e.apply(t,i))&&("object"==typeof o?(s=void 0!==o.returnValue?o.returnValue:o,a=!!o.cancel):!1===o?a=!0:s=o)},u[e]=function(){var e,t,i,n=Array.prototype.slice.call(arguments,0),r=n.length;for(s=o=void 0,a=!1,t=0,i=c.before.length;t<i;t++)if((e=c.before[t]).extraArgs&&n.push.apply(n,e.extraArgs),l(e.fn,e.scope,n),n.length=r,a||e.preventDefault)return s;for(void 0!==(o=c.originalFn.apply(u,n))&&(s=o),t=0,i=c.after.length;t<i;t++)if((e=c.after[t]).extraArgs&&n.push.apply(n,e.extraArgs),l(e.fn,e.scope,n),n.length=r,a||e.preventDefault)return s;return s}),c}e.prototype={_decr_:function(e,t){null==t&&(t=1),(this[e]-=t)||delete this[e]},_incr_:function(e){this.hasOwnProperty(e)?++this[e]:this[e]=1}},t.HasListeners=i.HasListeners=e,i.createAlias({on:"addListener",un:"removeListener",mon:"addManagedListener",mun:"removeManagedListener",setListeners:"addListener"}),i.observeClass=i.observe,Ext.apply(t,{onClassMixedIn:n,beforeMethod:function(e,t,i,n,r){o.call(this,e).before.push({fn:t,scope:i,extraArgs:r,preventDefault:n})},afterMethod:function(e,t,i,n,r){o.call(this,e).after.push({fn:t,scope:i,extraArgs:r,preventDefault:n})},removeMethodListener:function(e,t,i){var n,r,s=o.call(this,e);for(n=0,r=s.before.length;n<r;n++)if(s.before[n].fn==t&&s.before[n].scope==i)return void Ext.Array.erase(s.before,n,1);for(n=0,r=s.after.length;n<r;n++)if(s.after[n].fn==t&&s.after[n].scope==i)return void Ext.Array.erase(s.after,n,1)},toggleEventLogging:function(e){Ext.util.Observable[e?"capture":"releaseCapture"](this,function(e){Ext.isDefined(Ext.global.console)&&Ext.global.console.log(e,arguments)})}})}),Ext.define("Ext.util.HashMap",{mixins:[Ext.mixin.Observable],generation:0,config:{keyFn:null},constructor:function(e){var t,i=this;i.mixins.observable.constructor.call(i,e),i.clear(!0),(t=i.getKeyFn())&&(i.getKey=t)},getCount:function(){return this.length},getData:function(e,t){return void 0===t&&(t=e,e=this.getKey(t)),[e,t]},getKey:function(e){return e.id},add:function(e,t){var i=this;return 1===arguments.length&&(t=e,e=i.getKey(t)),i.containsKey(e)?i.replace(e,t):(i.map[e]=t,++i.length,i.generation++,i.hasListeners.add&&i.fireEvent("add",i,e,t),t)},replace:function(e,t){var i,n=this,r=n.map;return 1===arguments.length&&(t=e,e=n.getKey(t)),n.containsKey(e)||n.add(e,t),i=r[e],r[e]=t,n.generation++,n.hasListeners.replace&&n.fireEvent("replace",n,e,t,i),t},remove:function(e){var t=this.findKey(e);return void 0!==t&&this.removeAtKey(t)},removeAtKey:function(e){var t,i=this;return!!i.containsKey(e)&&(t=i.map[e],delete i.map[e],--i.length,i.generation++,i.hasListeners.remove&&i.fireEvent("remove",i,e,t),!0)},get:function(e){var t=this.map;return t.hasOwnProperty(e)?t[e]:void 0},clear:function(e){var t=this;return(e||t.generation)&&(t.map={},t.length=0,t.generation=e?0:t.generation+1),!0!==e&&t.hasListeners.clear&&t.fireEvent("clear",t),t},containsKey:function(e){var t=this.map;return t.hasOwnProperty(e)&&void 0!==t[e]},contains:function(e){return this.containsKey(this.findKey(e))},getKeys:function(){return this.getArray(!0)},getValues:function(){return this.getArray(!1)},getArray:function(e){var t,i=[],n=this.map;for(t in n)n.hasOwnProperty(t)&&i.push(e?t:n[t]);return i},each:function(e,t){var i,n=Ext.apply({},this.map),r=this.length;for(i in t=t||this,n)if(n.hasOwnProperty(i)&&!1===e.call(t,i,n[i],r))break;return this},clone:function(){var e,t=new this.self(this.initialConfig),i=this.map;for(e in t.suspendEvents(),i)i.hasOwnProperty(e)&&t.add(e,i[e]);return t.resumeEvents(),t},findKey:function(e){var t,i=this.map;for(t in i)if(i.hasOwnProperty(t)&&i[t]===e)return t}},function(e){var t=e.prototype;t.removeByKey=t.removeAtKey}),Ext.define("Ext.promise.Consequence",function(n){return{promise:null,deferred:null,onFulfilled:null,onRejected:null,onProgress:null,constructor:function(e,t,i){this.onFulfilled=e,this.onRejected=t,this.onProgress=i,this.deferred=new Ext.promise.Deferred,this.promise=this.deferred.promise},trigger:function(e,t){var i=this.deferred;switch(e){case"fulfill":this.propagate(t,this.onFulfilled,i,i.resolve);break;case"reject":this.propagate(t,this.onRejected,i,i.reject)}},update:function(e){Ext.isFunction(this.onProgress)&&(e=this.onProgress(e)),this.deferred.update(e)},propagate:function(e,t,i,n){Ext.isFunction(t)?this.schedule(function(){try{i.resolve(t(e))}catch(e){i.reject(e)}}):n.call(this.deferred,e)},schedule:function(e){var t=n.queueSize++;n.queue[t]=e,t||Ext.asap(n.dispatch)},statics:{queue:new Array(1e4),queueSize:0,dispatch:function(){var e,t,i=n.queue;for(t=0;t<n.queueSize;++t)e=i[t],i[t]=null,e();n.queueSize=0}}}},function(e){e.dispatch.$skipTimerCheck=!0}),Ext.define("Ext.promise.Deferred",{promise:null,consequences:[],completed:!1,completionAction:null,completionValue:null,constructor:function(){this.promise=new Ext.promise.Promise(this),this.consequences=[],this.completed=!1,this.completionAction=null,this.completionValue=null},then:function(e,t,i){var n=new Ext.promise.Consequence(e,t,i);return this.completed?n.trigger(this.completionAction,this.completionValue):this.consequences.push(n),n.promise},resolve:function(e){var t,i,n=this;if(!n.completed)try{if(e===n.promise)throw new TypeError("A Promise cannot be resolved with itself.");if(null!=e&&("object"==typeof e||Ext.isFunction(e))&&Ext.isFunction(i=e.then)){t=!1;try{i.call(e,function(e){t||(t=!0,n.resolve(e))},function(e){t||(t=!0,n.reject(e))})}catch(e){t||n.reject(e)}}else n.complete("fulfill",e)}catch(e){n.reject(e)}},reject:function(e){this.completed||this.complete("reject",e)},update:function(e){var t,i,n=this.consequences;if(!this.completed)for(t=0,i=n.length;t<i;t++)n[t].update(e)},complete:function(e,t){var i,n,r=this.consequences;for(this.completionAction=e,this.completionValue=t,this.completed=!0,i=0,n=r.length;i<n;i++)r[i].trigger(this.completionAction,this.completionValue);this.consequences=null}}),Ext.define("Ext.promise.Promise",function(c){var u;return{statics:{CancellationError:Ext.global.CancellationError||Error,_ready:function(){u=Ext.promise.Deferred},all:function(e){return Ext.isArray(e)||c.is(e)||Ext.raise("Invalid parameter: expected an Array or Promise of an Array."),c.when(e).then(function(e){var t,i,n,r,s,o=new u,a=e.length,l=new Array(a);if(a)for(n=function(e,t){return c.when(e).then(function(e){return l[t]=e,--a||o.resolve(l),e},function(e){return o.reject(e)})},t=r=0,s=e.length;r<s;t=++r)i=e[t],t in e?n(i,t):a--;else o.resolve(l);return o.promise})},is:function(e){return null!=e&&("object"==typeof e||Ext.isFunction(e))&&Ext.isFunction(e.then)},race:function(e){var t,i=new u,n=e.length;for(Ext.isArray(e)||Ext.raise("Invalid parameter: expected an Array."),t=0;t<n;++t)i.resolve(e[t]);return i.promise},rethrowError:function(e){Ext.asap(function(){throw e})},when:function(e){var t=new u;return t.resolve(e),t.promise}},owner:null,constructor:function(e){this.owner=e},then:function(e,t,i,n){var r;return 1===arguments.length&&Ext.isObject(e)&&(e=(r=e).success,t=r.failure,i=r.progress,n=r.scope),n&&(e=e&&e.bind(n),t=t&&t.bind(n),i=i&&i.bind(n)),this.owner.then(e,t,i)},catch:function(e,t){var i;return 1===arguments.length&&Ext.isObject(e)&&(e=(i=e).fn,t=i.scope),null!=t&&(e=e.bind(t)),this.owner.then(null,e)},otherwise:function(e,t){return this.catch.apply(this,arguments)},always:function(t,e){var i;return 1===arguments.length&&Ext.isObject(t)&&(t=(i=t).fn,e=i.scope),null!=e&&(t=t.bind(e)),this.owner.then(function(e){try{t()}catch(e){c.rethrowError(e)}return e},function(e){try{t()}catch(e){c.rethrowError(e)}throw e})},done:function(){this.owner.then(null,c.rethrowError)},cancel:function(e){null==e&&(e=null),this.owner.reject(new this.self.CancellationError(e))},log:function(t){return null==t&&(t=""),this.owner.then(function(e){return Ext.log((t||"Promise")+" resolved with value: "+e),e},function(e){throw Ext.log((t||"Promise")+" rejected with reason: "+e),e})}}},function(e){e._ready()}),Ext.define("Ext.Promise",function(){var e;return{statics:{_ready:function(){e=Ext.promise.Promise},all:function(){return e.all.apply(e,arguments)},race:function(){return e.race.apply(e,arguments)},reject:function(e){var t=new Ext.promise.Deferred;return t.reject(e),t.promise},resolve:function(e){var t=new Ext.promise.Deferred;return t.resolve(e),t.promise}},constructor:function(e){var t=new Ext.promise.Deferred;return e(t.resolve.bind(t),t.reject.bind(t)),t.promise}}},function(e){var t=Ext.global.Promise;t&&t.resolve&&!Ext.useExtPromises?Ext.Promise=t:e._ready()}),Ext.define("Ext.Deferred",function(h){var n,e,t;return{extend:Ext.promise.Deferred,statics:{_ready:function(){n=Ext.promise.Promise,Ext.Promise.resolve},all:function(){return n.all.apply(n,arguments)},any:function(e){return Ext.isArray(e)||n.is(e)||Ext.raise("Invalid parameter: expected an Array or Promise of an Array."),h.some(e,1).then(function(e){return e[0]},function(e){if(!(e instanceof Error&&"Too few Promises were resolved."===e.message))throw e;Ext.raise("No Promises were resolved.")})},delay:function(e,t){var i;return 1===arguments.length&&(t=e,e=void 0),t=Math.max(t,1),(i=new h).timeoutId=Ext.defer(function(){delete i.timeoutId,i.resolve(e)},t),i.promise},getCachedRejected:function(){return e=e||Ext.Promise.reject()},getCachedResolved:function(){return t=t||Ext.Promise.resolve()},map:function(e,c){return Ext.isArray(e)||n.is(e)||Ext.raise("Invalid parameter: expected an Array or Promise of an Array."),Ext.isFunction(c)||Ext.raise("Invalid parameter: expected a function."),h.resolved(e).then(function(e){var i,t,n,r,s,o,a,l;if(r=e.length,o=new Array(e.length),i=new h,r)for(s=function(e,t){return h.resolved(e).then(function(e){return c(e,t,o)}).then(function(e){return o[t]=e,--r||i.resolve(o),e},function(e){return i.reject(e)})},t=a=0,l=e.length;a<l;t=++a)n=e[t],t in e?s(n,t):r--;else i.resolve(o);return i.promise})},memoize:function(e,t,i){var n=Ext.Function.memoize(e,t,i);return function(){return h.all(Ext.Array.slice(arguments)).then(function(e){return n.apply(t,e)})}},parallel:function(e,t){var i;return null==t&&(t=null),i=Ext.Array.slice(arguments,2),h.map(e,function(e){if(!Ext.isFunction(e))throw new Error("Invalid parameter: expected a function.");return e.apply(t,i)})},pipeline:function(e,t,i){return null==i&&(i=null),h.reduce(e,function(e,t){if(!Ext.isFunction(t))throw new Error("Invalid parameter: expected a function.");return t.call(i,e)},t)},race:function(){return n.race.apply(n,arguments)},reduce:function(e,s,t){var i;return Ext.isArray(e)||n.is(e)||Ext.raise("Invalid parameter: expected an Array or Promise of an Array."),Ext.isFunction(s)||Ext.raise("Invalid parameter: expected a function."),i=3===arguments.length,h.resolved(e).then(function(r){var e=[r,function(e,i,n){return h.resolved(e).then(function(t){return h.resolved(i).then(function(e){return s(t,e,n,r)})})}];return i&&e.push(t),Ext.Array.reduce.apply(Ext.Array,e)})},rejected:function(e){var t=new Ext.Deferred;return t.reject(e),t.promise},resolved:function(e){var t=new Ext.Deferred;return t.resolve(e),t.promise},sequence:function(e,i){var n;return null==i&&(i=null),n=Ext.Array.slice(arguments,2),h.reduce(e,function(t,e){if(!Ext.isFunction(e))throw new Error("Invalid parameter: expected a function.");return h.resolved(e.apply(i,n)).then(function(e){return t.push(e),t})},[])},some:function(e,d){return Ext.isArray(e)||n.is(e)||Ext.raise("Invalid parameter: expected an Array or Promise of an Array."),(!Ext.isNumeric(d)||d<=0)&&Ext.raise("Invalid parameter: expected a positive integer."),h.resolved(e).then(function(e){var t,i,n,r,s,o,a,l,c,u;if(l=[],a=d,o=e.length-a+1,t=new h,e.length<d)t.reject(new Error("Too few Promises were resolved."));else for(r=function(e){return 0<a&&l.push(e),0===--a&&t.resolve(l),e},n=function(e){return 0===--o&&t.reject(new Error("Too few Promises were resolved.")),e},i=c=0,u=e.length;c<u;i=++c)s=e[i],i in e&&h.resolved(s).then(r,n);return t.promise})},timeout:function(e,t){var i,n=new h;return i=Ext.defer(function(){i&&n.reject(new Error("Promise timed out."))},t),h.resolved(e).then(function(e){Ext.undefer(i),i=null,n.resolve(e)},function(e){Ext.undefer(i),i=null,n.reject(e)}),n.promise}}}},function(e){e._ready()}),Ext.Factory=function(e){this.aliasPrefix=e+".",this.cache={},this.name=e.replace(this.fixNameRe,this.fixNameFn),this.type=e,this.creator="create"+Ext.String.capitalize(this.name)},Ext.Factory.prototype={defaultProperty:"type",instanceProp:"isInstance",typeProperty:"type",create:function(e,t){var i,n,r,s,o=Ext.ClassManager,a=this.cache,l=this.typeProperty;if(e){if(e[this.instanceProp])return e;"string"==typeof e&&(s=e,(e={})[this.defaultProperty]=s),n=e.xclass,s=e[l]}if(t&&t.constructor===Object&&(e=Ext.apply({},e,t),t=t[l]),n){if(!(r=o.get(n)))return o.instantiate(n,e)}else if((s=s||t||this.defaultType)||(r=this.defaultClass),s||r||Ext.raise("No type specified for "+this.type+".create"),!r&&!(r=a[s])){if(i=this.aliasPrefix+s,!(r=(n=o.getNameByAlias(i))&&o.get(n)))return o.instantiateByAlias(i,e);a[s]=r}return r.isInstance?r:new r(e)},fixNameRe:/\\.[a-z]/gi,fixNameFn:function(e){return e.substring(1).toUpperCase()},clearCache:function(){this.cache={},this.instanceCache={}},hook:function(n){var r=this,s=r.create;r.create=function(e,t){var i=n.call(r,s,e,t);return void 0===i&&(i=s.call(r,e,t)),i}},update:function(e,t,i,n,r){var s,o,a,l;if(!t||t.isInstance)return t&&!t[this.instanceProp]&&Ext.raise("Config instance failed "+this.instanceProp+" requirement"),e&&e!==t&&e.destroy(),t;if("string"==typeof t&&(l=t,(t={})[this.defaultProperty]=l),e){if(!0===t)return e;if((l=t.xclass)?a=e.$className===l:(l=t.xtype)?a=e.isXType(l,!0):(l=t[this.typeProperty])&&(l=this.aliasPrefix+l,(s=e.self.prototype).hasOwnProperty("alias")&&(s=s.alias)&&(a=s===l||-1<s.indexOf(l))),a)return e.setConfig(t),e;e.destroy()}return!0===t&&(t={}),i&&(r&&(o=i[(o=Ext.Config.map[r]).names.get]())&&(t=Ext.merge(Ext.clone(o),t)),i[n=n||this.creator]&&((t=i[n](t))||Ext.raise("Missing return value from "+n+" on class "+i.$className))),this.create(t)}},Ext.Factory.define=function(e,t){var i,s,n,r=Ext.Factory,o=t&&t.cacheable;return e.constructor===Object?Ext.Object.each(e,r.define,r):(s=new Ext.Factory(e),t&&(t.constructor===Object?(Ext.apply(s,t),"string"==typeof(i=s.xclass)&&(s.defaultClass=Ext.ClassManager.get(i))):s.defaultType=t),r[s.name]=n=function(e,t){return s.create(e,t)},o&&(s.instanceCache={},s.hook(function(e,t,i){var n,r=this.instanceCache;return"string"!=typeof t||(n=r[t])||!1!==(n=e.call(this,t,i)).cacheable&&(r[t]=n,Ext.Object.freeze(n)),n})),n.instance=s,n.update=function(e,t,i,n,r){return s.update(e,t,i,n,r)}),n},Ext.Factory.clearCaches=function(){var e,t,i=Ext.Factory;for(e in i)(t=(t=i[e]).instance)&&t.clearCache()},Ext.Factory.on=function(e,t){Ext.Factory[e].instance.hook(t)},Ext.define("Ext.mixin.Factoryable",{mixinId:"factoryable",onClassMixedIn:function(e){var t,i,n=e.prototype,r=n.factoryConfig,s=n.alias,o={};(s=s&&s.length&&s[0])&&0<(t=s.lastIndexOf("."))&&(o.type=s.substring(0,t),o.defaultType=s.substring(t+1)),r&&(delete n.factoryConfig,Ext.apply(o,r)),i=Ext.Factory.define(o.type,o),e.create===Ext.Base.create&&(e.create=i)}}),Ext.define("Ext.data.request.Base",{mixins:[Ext.mixin.Factoryable],factoryConfig:{type:"request",defaultType:"ajax"},result:null,success:null,timer:null,constructor:function(e){Ext.apply(this,e.options||{},e.ownerConfig),this.id=++Ext.data.Connection.requestId,this.owner=e.owner,this.options=e.options,this.requestOptions=e.requestOptions},start:function(){var e=this.getTimeout();e&&this.async&&(this.timer=Ext.defer(this.onTimeout,e,this))},abort:function(){this.clearTimer(),this.timedout||(this.aborted=!0),this.abort=Ext.emptyFn},createDeferred:function(){var e=this.result,t=new Ext.Deferred;return this.completed&&(this.success?t.resolve(e):t.reject(e)),this.deferred=t},getDeferred:function(){return this.deferred||this.createDeferred()},getPromise:function(){return this.getDeferred().promise},then:function(){var e=this.getPromise();return e.then.apply(e,arguments)},onComplete:function(){var e=this.deferred,t=this.result;this.clearTimer(),e&&(this.success?e.resolve(t):e.reject(t)),this.completed=!0},onTimeout:function(){this.timedout=!0,this.timer=null,this.abort(!0)},getTimeout:function(){return this.timeout},clearTimer:function(){this.timer=Ext.undefer(this.timer)},destroy:function(){this.abort(),this.owner=this.options=this.requestOptions=this.result=null,this.callParent()},privates:{createException:function(){var e;return e={request:this,requestId:this.id,status:this.aborted?-1:0,statusText:this.aborted?"transaction aborted":"communication failure",getResponseHeader:this._getHeader,getAllResponseHeaders:this._getHeaders},this.aborted&&(e.aborted=!0),this.timedout&&(e.timedout=!0),e},_getHeader:function(e){var t=this.headers;return t&&t[e.toLowerCase()]},_getHeaders:function(){return this.headers}}}),Ext.define("Ext.data.flash.BinaryXhr",{statics:{flashPluginActivated:function(){Ext.data.flash.BinaryXhr.flashPluginActive=!0,Ext.data.flash.BinaryXhr.flashPlugin=document.getElementById("ext-flash-polyfill"),Ext.GlobalEvents.fireEvent("flashready")},flashPluginActive:!1,flashPluginInjected:!1,connectionIndex:1,liveConnections:{},flashPlugin:null,onFlashStateChange:function(e,t,i){var n;(n=this.liveConnections[Number(e)])?n.onFlashStateChange(t,i):Ext.warn.log("onFlashStateChange for unknown connection ID: "+e)},registerConnection:function(e){var t=this.connectionIndex;return this.conectionIndex=this.connectionIndex+1,this.liveConnections[t]=e,t},injectFlashPlugin:function(){var e,i;this.flashPolyfillEl=Ext.getBody().appendChild({id:"ext-flash-polyfill",cn:[{tag:"p",html:"To view this page ensure that Adobe Flash Player version 11.1.0 or greater is installed."},{tag:"a",href:"http://www.adobe.com/go/getflashplayer",cn:[{tag:"img",src:window.location.protocol+"//www.adobe.com/images/shared/download_buttons/get_flash_player.gif",alt:"Get Adobe Flash player"}]}]}),e=[Ext.Loader.getPath("Ext.data.Connection"),"../../../plugins/flash/swfobject.js"].join("/"),i="/plugins/flash/FlashPlugin.swf",i=[Ext.Loader.getPath("Ext.data.Connection"),"../../plugins/flash/FlashPlugin.swf"].join("/"),Ext.flashPluginPath&&(i=Ext.flashPluginPath),Ext.Loader.loadScript({url:e,onLoad:function(){var e={},t={};e.quality="high",e.bgcolor="#ffffff",e.allowscriptaccess="sameDomain",e.allowfullscreen="true",t.id="ext-flash-polyfill",t.name="polyfill",t.align="middle",swfobject.embedSWF(i,"ext-flash-polyfill","0","0","11.4.0","playerProductInstall.swf",{},e,t)},onError:function(){Ext.raise("Could not load flash-loader file swfobject.js from "+flashLoader)},scope:this}),Ext.data.flash.BinaryXhr.flashPluginInjected=!0}},readyState:0,status:0,statusText:"",responseBytes:null,javascriptId:null,constructor:function(e){Ext.data.flash.BinaryXhr.flashPluginInjected||Ext.data.flash.BinaryXhr.injectFlashPlugin(),Ext.apply(this,e),this.requestHeaders={}},abort:function(){4!==this.readyState?(this.aborted=!0,Ext.data.flash.BinaryXhr.flashPluginActive?(Ext.data.flash.BinaryXhr.flashPlugin.abortRequest(this.javascriptId),delete Ext.data.flash.BinaryXhr.liveConnections[this.javascriptId]):Ext.GlobalEvents.removeListener("flashready",this.onFlashReady,this)):Ext.warn.log("Aborting a connection that's completed its transfer: "+this.url)},getAllResponseHeaders:function(){var i=[];return Ext.Object.each(this.responseHeaders,function(e,t){i.push(e+": "+t)}),i.join("\\r\\n")},getResponseHeader:function(e){var t=this.responseHeaders;return t&&t[e]||null},open:function(e,t,i,n,r){this.method=e,this.url=t,this.async=!1!==i,this.user=n,this.password=r,this.async||Ext.raise("Binary posts are only supported in async mode: "+t),"POST"!==this.method&&Ext.log.warn("Binary data can only be sent as a POST request: "+t)},overrideMimeType:function(e){this.mimeType=e},send:function(e){this.body=e,Ext.data.flash.BinaryXhr.flashPluginActive?this.onFlashReady():Ext.GlobalEvents.addListener("flashready",this.onFlashReady,this)},onFlashReady:function(){var e,t=this;t.javascriptId=Ext.data.flash.BinaryXhr.registerConnection(t),e={method:t.method,url:t.url,user:t.user,password:t.password,mimeType:t.mimeType,requestHeaders:t.requestHeaders,body:t.body,javascriptId:t.javascriptId},Ext.data.flash.BinaryXhr.flashPlugin.postBinary(e)},setReadyState:function(e){this.readyState!==e&&(this.readyState=e,this.onreadystatechange())},setRequestHeader:function(e,t){this.requestHeaders[e]=t},onreadystatechange:Ext.emptyFn,parseData:function(e){this.status=e.status||0,this.responseHeaders={},this.mimeType&&(this.responseHeaders["content-type"]=this.mimeType),"complete"===e.reason?(this.responseBytes=e.data,this.responseHeaders["content-length"]=e.data.length):"error"===e.reason||"securityError"===e.reason?(this.statusText=e.text,this.responseHeaders["content-length"]=0):Ext.raise("Unkown reason code in data: "+e.reason)},onFlashStateChange:function(e,t){4===e&&(this.parseData(t),delete Ext.data.flash.BinaryXhr.liveConnections[this.javascriptId]),this.setReadyState(e)}}),Ext.define("Ext.data.request.Ajax",{extend:Ext.data.request.Base,alias:"request.ajax",statics:{parseStatus:function(e,t){var i,n,r,s;if(t&&("arraybuffer"===(i=t.responseType)?n=t.byteLength:"blob"===i?n=t.response.size:"json"!==i&&"document"!==i||!t.response?"text"!==i&&""!==i&&i||!t.responseText||(n=t.responseText.length):n=0),s=!1,!(r=200<=(e=1223===e?204:e)&&e<300||304===e||0===e&&Ext.isNumber(n)))switch(e){case 12002:case 12029:case 12030:case 12031:case 12152:case 13030:s=!0}return{success:r,isException:s}}},start:function(e){var t,i=this,n=i.options,r=i.requestOptions,s=i.isXdr;return t=i.xhr=i.openRequest(n,r,i.async,i.username,i.password),s||i.setupHeaders(t,n,r.data,r.params),i.async&&(s||(t.onreadystatechange=i.bindStateChange())),s&&i.processXdrRequest(i,t),i.callParent([e]),t.send(e),i.async?i:i.onComplete()},abort:function(e){var t=this.xhr;if(e||this.isLoading()){try{t.onreadystatechange=null}catch(e){t.onreadystatechange=Ext.emptyFn}t.abort(),this.callParent([e]),this.onComplete(),this.cleanup()}},cleanup:function(){this.xhr=null,delete this.xhr},isLoading:function(){var e=this.xhr,t=e&&e.readyState,i=Ext.data.flash&&Ext.data.flash.BinaryXhr;return!(!e||this.aborted||this.timedout)&&((i&&e instanceof i||0!==t)&&4!==t)},openRequest:function(e,t,i,n,r){var s=this.newRequest(e);return n?s.open(t.method,t.url,i,n,r):this.isXdr?s.open(t.method,t.url):s.open(t.method,t.url,i),(e.binary||this.binary)&&(window.Uint8Array?s.responseType="arraybuffer":s.overrideMimeType?s.overrideMimeType("text/plain; charset=x-user-defined"):Ext.isIE||Ext.log.warn("Your browser does not support loading binary data using Ajax.")),e.responseType&&(s.responseType=e.responseType),(e.withCredentials||this.withCredentials)&&(s.withCredentials=!0),s},newRequest:function(e){var t;return e.binaryData?t=window.Uint8Array?this.getXhrInstance():new Ext.data.flash.BinaryXhr:this.cors&&Ext.isIE9m?(t=this.getXdrInstance(),this.isXdr=!0):(t=this.getXhrInstance(),this.isXdr=!1),t},setupHeaders:function(e,t,i,n){var r,s,o=Ext.apply({},t.headers||{},this.defaultHeaders),a=this.defaultPostHeader,l=t.jsonData,c=t.xmlData,u="Content-Type",d=this.useDefaultXhrHeader;o.hasOwnProperty(u)||!i&&!n||(i&&(t.rawData?a="text/plain":c&&Ext.isDefined(c)?a="text/xml":l&&Ext.isDefined(l)&&(a="application/json")),o[u]=a),d&&!o["X-Requested-With"]&&(o["X-Requested-With"]=this.defaultXhrHeader),void 0!==o[u]&&null!==o[u]||delete o[u];try{for(r in o)o.hasOwnProperty(r)&&(s=o[r],e.setRequestHeader(r,s))}catch(e){this.owner.fireEvent("exception",r,s)}return o},getXdrInstance:function(){var e;return 8<=Ext.ieVersion?e=new XDomainRequest:Ext.raise({msg:"Your browser does not support CORS"}),e},getXhrInstance:function(){return new XMLHttpRequest},processXdrRequest:function(e,t){delete e.headers,e.contentType=e.options.contentType||this.defaultXdrContentType,t.onload=this.bindStateChange(!0),t.onerror=t.ontimeout=this.bindStateChange(!1)},processXdrResponse:function(e,t){e.getAllResponseHeaders=function(){return[]},e.getResponseHeader=function(){return""},e.contentType=t.contentType||this.defaultXdrContentType},bindStateChange:function(e){var t=this;return function(){Ext.elevate(function(){t.onStateChange(e)})}},onStateChange:function(e){var t=this.xhr;(t&&4===t.readyState||this.isXdr)&&(this.clearTimer(),this.onComplete(e),this.cleanup())},onComplete:function(e){var t,i,n,r=this,s=r.owner,o=r.options,a=r.xhr,l={success:!1,isException:!1};if(!a||r.destroyed)return r.result=l;try{(t=Ext.data.request.Ajax.parseStatus(a.status,a)).success&&(t.success=4===a.readyState)}catch(e){t=l}return(i=r.success=r.isXdr?e:t.success)?(n=r.createResponse(a),s.hasListeners.requestcomplete&&s.fireEvent("requestcomplete",s,n,o),o.success&&Ext.callback(o.success,o.scope,[n,o])):(n=t.isException||r.aborted||r.timedout?r.createException(a):r.createResponse(a),s.hasListeners.requestexception&&s.fireEvent("requestexception",s,n,o),o.failure&&Ext.callback(o.failure,o.scope,[n,o])),r.result=n,o.callback&&Ext.callback(o.callback,o.scope,[o,i,n]),s.onRequestComplete(r),r.callParent([e]),n},createResponse:function(e){for(var t,i,n,r,s=this.isXdr,o={},a=s?[]:e.getAllResponseHeaders().replace(/\\r\\n/g,"\\n").split("\\n"),l=a.length;l--;)0<=(i=(t=a[l]).indexOf(":"))&&(n=t.substr(0,i).toLowerCase()," "===t.charAt(i+1)&&++i,o[n]=t.substr(i+1));return r={request:this,requestId:this.id,status:e.status,statusText:e.statusText,getResponseHeader:function(e){return o[e.toLowerCase()]},getAllResponseHeaders:function(){return o}},s&&this.processXdrResponse(r,e),this.binary?r.responseBytes=this.getByteArray(e):(e.responseType&&(r.responseType=e.responseType),"blob"===e.responseType?r.responseBlob=e.response:"json"===e.responseType?r.responseJson=e.response:"document"===e.responseType?r.responseXML=e.response:(r.responseText=e.responseText,r.responseXML=e.responseXML)),r},destroy:function(){this.xhr=null,this.callParent()},privates:{getByteArray:function(e){var t,i,n,r,s=e.response,o=e.responseBody;if(e instanceof(Ext.data.flash&&Ext.data.flash.BinaryXhr))t=e.responseBytes;else if(window.Uint8Array)t=s?new Uint8Array(s):[];else if(Ext.isIE9p)try{t=new VBArray(o).toArray()}catch(e){t=[]}else if(Ext.isIE)this.self.vbScriptInjected||this.injectVBScript(),getIEByteArray(e.responseBody,t=[]);else for(t=[],n=(i=e.responseText).length,r=0;r<n;r++)t.push(255&i.charCodeAt(r));return t},injectVBScript:function(){var e=document.createElement("script");e.type="text/vbscript",e.text=["Function getIEByteArray(byteArray, out)","Dim len, i","len = LenB(byteArray)","For i = 1 to len","out.push(AscB(MidB(byteArray, i, 1)))","Next","End Function"].join("\\n"),Ext.getHead().dom.appendChild(e),this.self.vbScriptInjected=!0}}}),Ext.define("Ext.data.request.Form",{extend:Ext.data.request.Base,alias:"request.form",start:function(e){var t=this.options,i=this.requestOptions;return this.callParent([e]),this.form=this.upload(t.form,i.url,i.data,t),this},abort:function(e){var t;if(this.isLoading())try{(t=this.frame.dom).stop?t.stop():t.document.execCommand("Stop")}catch(e){}this.callParent([e]),this.onComplete(),this.cleanup()},cleanup:function(){var e=this.frame;e&&(e.un("load",this.onComplete,this),Ext.removeNode(e)),this.frame=this.form=null},isLoading:function(){return!!this.frame},upload:function(i,e,t,n){i=Ext.getDom(i);function r(e,t){s=document.createElement("input"),Ext.fly(s).set({type:"hidden",value:t,name:e}),i.appendChild(s),m.push(s)}var s,o,a,l,c,u,d,h,f=document.createElement("iframe"),g=Ext.get(f),p=g.id,m=[],x="multipart/form-data",y={target:i.target,method:i.method,encoding:i.encoding,enctype:i.enctype,action:i.action};if(g.set({name:p,cls:Ext.baseCSSPrefix+"hidden-display",src:Ext.SSL_SECURE_URL,tabIndex:-1}),document.body.appendChild(f),document.body.appendChild(i),document.frames&&(document.frames[p].name=p),Ext.fly(i).set({target:p,method:"POST",enctype:x,encoding:x,action:e||y.action}),t)for(l in o=Ext.Object.fromQueryString(t)||{})if(o.hasOwnProperty(l))if(a=o[l],Ext.isArray(a))for(c=a.length,u=0;u<c;u++)r(l,a[u]);else r(l,a);for((this.frame=g).on({load:this.onComplete,scope:this,single:!Ext.isOpera}),i.submit(),document.body.removeChild(i),Ext.fly(i).set(y),d=m.length,h=0;h<d;h++)Ext.removeNode(m[h]);return i},getDoc:function(){var e=this.frame.dom;return e&&(e.contentWindow.document||e.contentDocument)||(window.frames[e.id]||{}).document},getTimeout:function(){return this.options.timeout},onComplete:function(){var t,e,i,n,r,s=this,o=s.frame,a=s.owner,l=s.options;if(o){if(s.aborted||s.timedout)s.result=r=s.createException(),r.responseXML=null,r.responseText=Ext.encode({success:!1,message:Ext.String.trim(r.statusText)}),r.request=s,t=l.failure,i=!1;else try{if(e=s.getDoc(),s.result=r={responseText:"",responseXML:null,request:s},e){if(Ext.isOpera&&e.location===Ext.SSL_SECURE_URL)return;e.body&&((n=e.body.firstChild)&&/pre/i.test(n.tagName)?r.responseText=n.textContent||n.innerText:(n=e.getElementsByTagName("textarea")[0])?r.responseText=n.value:r.responseText=e.body.textContent||e.body.innerText),r.responseXML=e.XMLDocument||e,t=l.success,i=!0,r.status=200}else Ext.raise("Could not acquire a suitable connection for the file upload service.")}catch(e){s.result=r=s.createException(),r.status=400,r.statusText=(e.message||e.description)+"",r.responseText=Ext.encode({success:!1,message:Ext.String.trim(r.statusText)}),r.responseXML=null,t=l.failure,i=!1}s.frame=null,s.success=i,a.fireEvent(i?"requestcomplete":"requestexception",a,r,l),Ext.callback(t,l.scope,[r,l]),Ext.callback(l.callback,l.scope,[l,i,r]),a.onRequestComplete(s),Ext.asap(o.destroy,o),s.callParent()}},destroy:function(){this.cleanup(),this.callParent()}}),Ext.define("Ext.data.Connection",{mixins:{observable:Ext.mixin.Observable},statics:{requestId:0},enctypeRe:/multipart\\/form-data/i,config:{url:null,async:!0,username:"",password:"",disableCaching:!0,withCredentials:!1,binary:!1,cors:!1,isXdr:!1,defaultXdrContentType:"text/plain",disableCachingParam:"_dc",timeout:3e4,extraParams:null,autoAbort:!1,method:null,defaultHeaders:null,defaultPostHeader:"application/x-www-form-urlencoded; charset=UTF-8",useDefaultXhrHeader:!0,defaultXhrHeader:"XMLHttpRequest"},constructor:function(e){this.mixins.observable.constructor.call(this,e),this.requests={}},request:function(e){var t,i;return e=e||{},!1!==this.fireEvent("beforerequest",this,e)?(t=this.setOptions(e,e.scope||Ext.global),(i=this.createRequest(e,t)).start(t.data)):(i={status:-1,statusText:"Request cancelled in beforerequest event handler"},Ext.callback(e.callback,e.scope,[e,!1,i]),Ext.Deferred.rejected([e,!1,i]))},createRequest:function(e,t){var i,n=e.type||t.type;return n=n||(this.isFormUpload(e)?"form":"ajax"),(e.autoAbort||this.getAutoAbort())&&this.abort(),i=Ext.Factory.request({type:n,owner:this,options:e,requestOptions:t,ownerConfig:this.getConfig()}),this.requests[i.id]=i,this.latestId=i.id,i},isFormUpload:function(e){var t=this.getForm(e);return!!t&&(e.isUpload||this.enctypeRe.test(t.getAttribute("enctype")))},getForm:function(e){return Ext.getDom(e.form)},setOptions:function(e,t){var i,n,r,s=e.params||{},o=this.getExtraParams(),a=e.urlParams,l=e.url||this.getUrl(),c=e.cors,u=e.jsonData;return void 0!==c&&this.setCors(c),Ext.isFunction(s)&&(s=s.call(t,e)),Ext.isFunction(l)&&(l=l.call(t,e)),(l=this.setupUrl(e,l))||Ext.raise({options:e,msg:"No URL specified"}),r=e.rawData||e.binaryData||e.xmlData||u||null,u&&!Ext.isPrimitive(u)&&(r=Ext.encode(r)),e.binaryData&&(Ext.isArray(e.binaryData)||Ext.log.warn("Binary submission data must be an array of byte values! Instead got "+typeof e.binaryData),this.nativeBinaryPostSupport()&&(r=new Uint8Array(e.binaryData),(Ext.isChrome&&Ext.chromeVersion<22||Ext.isSafari||Ext.isGecko)&&(r=r.buffer))),Ext.isObject(s)&&(s=Ext.Object.toQueryString(s)),Ext.isObject(o)&&(o=Ext.Object.toQueryString(o)),s+=o?(s?"&":"")+o:"",a=Ext.isObject(a)?Ext.Object.toQueryString(a):a,s=this.setupParams(e,s),i=(e.method||this.getMethod()||(s||r?"POST":"GET")).toUpperCase(),this.setupMethod(e,i),n=!1!==e.disableCaching&&(e.disableCaching||this.getDisableCaching()),"GET"===i&&n&&(l=Ext.urlAppend(l,(e.disableCachingParam||this.getDisableCachingParam())+"="+(new Date).getTime())),("GET"===i||r)&&s&&(l=Ext.urlAppend(l,s),s=null),a&&(l=Ext.urlAppend(l,a)),{url:l,method:i,data:r||s||null}},setupUrl:function(e,t){var i=this.getForm(e);return i&&(t=t||i.action),t},setupParams:function(e,t){var i,n=this.getForm(e);return n&&!this.isFormUpload(e)&&(i=Ext.Element.serializeForm(n),t=t?t+"&"+i:i),t},setupMethod:function(e,t){return this.isFormUpload(e)?"POST":t},isLoading:function(e){return!!(e=e||this.getLatest())&&e.isLoading()},abort:function(e){(e=e||this.getLatest())&&e.isLoading()&&e.abort()},abortAll:function(){var e,t=this.requests;for(e in t)this.abort(t[e])},getLatest:function(){var e,t=this.latestId;return t&&(e=this.requests[t]),e||null},clearTimeout:function(e){(e=e||this.getLatest())&&e.clearTimer()},onRequestComplete:function(e){delete this.requests[e.id]},nativeBinaryPostSupport:function(){return Ext.isChrome||Ext.isSafari&&Ext.isDefined(window.Uint8Array)||Ext.isGecko&&Ext.isDefined(window.Uint8Array)}}),Ext.define("Ext.Ajax",{extend:Ext.data.Connection,singleton:!0,autoAbort:!1}),Ext.define("Ext.AnimationQueue",{singleton:!0,constructor:function(){var e=this;e.queue=[],e.taskQueue=[],e.runningQueue=[],e.idleQueue=[],e.isRunning=!1,e.isIdle=!0,e.run=e.run.bind(e),Ext.os.is.iOS&&(e.watch.$skipTimerCheck=!0,e.watchdogTimer=Ext.interval(e.watch,500,e))},start:function(e,t,i){var n=this;n.queue.push(arguments),n.isRunning||(n.hasOwnProperty("idleTimer")&&(Ext.undefer(n.idleTimer),delete n.idleTimer),n.hasOwnProperty("idleQueueTimer")&&(Ext.undefer(n.idleQueueTimer),delete n.idleQueueTimer),n.isIdle=!1,n.isRunning=!0,n.startCountTime=Ext.now(),n.count=0,n.doStart())},clear:function(){var e=this;Ext.undefer(e.idleTimer),Ext.undefer(e.idleQueueTimer),Ext.unraf(e.animationFrameId),e.idleTimer=e.idleQueueTimer=e.animationFrameId=null,e.queue.length=e.taskQueue.length=e.runningQueue.length=e.idleQueue.length=0,e.isRunning=!1,e.isIdle=!0,e.startCountTime=Ext.now(),e.count=0},watch:function(){this.isRunning&&500<=Ext.now()-this.lastRunTime&&this.run()},run:function(){var e,t,i,n,r,s=this,o=s.runningQueue;if(s.animationFrameId=null,s.isRunning){for(e=Ext.now(),s.lastRunTime=e,s.frameStartTime=e,n=s.queue.length;n--;)(i=(t=s.queue[n])[1]&&t[1].getElement&&t[1].getElement())&&i.destroyed&&s.queue.splice(n,1);for(o.push.apply(o,s.queue),n=0,r=o.length;n<r;n++)s.invoke(o[n]);o.length=0;var a=s.frameStartTime-s.startCountTime,l=++s.count;200<=a&&(s.onFpsChanged(1e3*l/a,l,a),s.startCountTime=s.frameStartTime,s.count=0),s.queue.length||s.stop(),s.isRunning&&s.doIterate()}},onFpsChanged:Ext.emptyFn,onStop:Ext.emptyFn,doStart:function(){this.animationFrameId||(this.animationFrameId=Ext.raf(this.run)),this.lastRunTime=Ext.now()},doIterate:function(){this.animationFrameId||(this.animationFrameId=Ext.raf(this.run))},doStop:function(){this.animationFrameId&&Ext.unraf(this.animationFrameId),this.animationFrameId=null},stop:function(e,t,i){var n,r,s=this,o=s.queue,a=o.length;if(s.isRunning){for(n=0;n<a;n++)(r=o[n])[0]===e&&r[1]===t&&r[2]===i&&(o.splice(n,1),n--,a--);0===a&&(s.doStop(),s.onStop(),s.isRunning=!1,s.idleQueue.length&&!s.idleTimer&&(s.idleTimer=Ext.defer(s.whenIdle,100,s)))}},onIdle:function(e,t,i){var n,r,s,o=this.idleQueue;for(n=0,r=o.length;n<r;n++)if(e===(s=o[n])[0]&&t===s[1]&&i===s[2])return;o.push(arguments),this.isIdle?this.processIdleQueue():this.idleTimer||(this.idleTimer=Ext.defer(this.whenIdle,100,this))},unIdle:function(e,t,i){var n,r,s,o=this.idleQueue;for(n=0,r=o.length;n<r;n++)if(e===(s=o[n])[0]&&t===s[1]&&i===s[2])return o.splice(n,1),!0;return!o.length&&this.idleTimer&&(Ext.undefer(this.idleTimer),delete this.idleTimer),!o.length&&this.idleQueueTimer&&(Ext.undefer(this.idleQueueTimer),delete this.idleQueueTimer),!1},queueTask:function(e,t,i){this.taskQueue.push(arguments),this.processTaskQueue()},dequeueTask:function(e,t,i){var n,r,s,o=this.taskQueue;for(n=0,r=o.length;n<r;n++)e===(s=o[n])[0]&&t===s[1]&&i===s[2]&&(o.splice(n,1),n--,r--)},invoke:function(e){var t=e[0],i=e[1],n=e[2];t="string"==typeof t?i[t]:t,Ext.isArray(n)?t.apply(i,n):t.call(i,n)},whenIdle:function(){delete this.idleTimer,this.isIdle=!0,this.processIdleQueue()},processIdleQueue:function(){this.hasOwnProperty("idleQueueTimer")||(this.idleQueueTimer=Ext.defer(this.processIdleQueueItem,1,this))},processIdleQueueItem:function(){var e,t=this.idleQueue;delete this.idleQueueTimer,this.isIdle&&0<t.length&&(e=t.shift(),this.invoke(e),this.processIdleQueue())},processTaskQueue:function(){this.hasOwnProperty("taskQueueTimer")||(this.taskQueueTimer=Ext.defer(this.processTaskQueueItem,15,this))},processTaskQueueItem:function(){var e,t=this.taskQueue;delete this.taskQueueTimer,0<t.length&&(e=t.shift(),this.invoke(e),this.processTaskQueue())},showFps:function(){var e={color:"white","background-color":"black","text-align":"center","font-family":"sans-serif","font-size":"8px","font-weight":"normal","font-style":"normal","line-height":"20px","-webkit-font-smoothing":"antialiased",zIndex:1e5,position:"absolute"};Ext.getBody().append([{style:Ext.applyIf({bottom:"50px",left:0,width:"50px",height:"20px"},e),html:"Average"},{style:Ext.applyIf({"background-color":"red","font-size":"18px","line-height":"50px",bottom:0,left:0,width:"50px",height:"50px"},e),id:"__averageFps",html:"0"},{style:Ext.applyIf({bottom:"50px",left:"50px",width:"50px",height:"20px"},e),html:"Min (Last 1k)"},{style:Ext.applyIf({"background-color":"orange","font-size":"18px","line-height":"50px",bottom:0,left:"50px",width:"50px",height:"50px"},e),id:"__minFps",html:"0"},{style:Ext.applyIf({bottom:"50px",left:"100px",width:"50px",height:"20px"},e),html:"Max (Last 1k)"},{style:Ext.applyIf({"background-color":"maroon","font-size":"18px","line-height":"50px",bottom:0,left:"100px",width:"50px",height:"50px"},e),id:"__maxFps",html:"0"},{style:Ext.applyIf({bottom:"50px",left:"150px",width:"50px",height:"20px"},e),html:"Current"},{style:Ext.applyIf({"background-color":"green","font-size":"18px","line-height":"50px",bottom:0,left:"150px",width:"50px",height:"50px"},e),id:"__currentFps",html:"0"}]),Ext.AnimationQueue.resetFps()},resetFps:function(){var t=Ext.get("__currentFps"),i=Ext.get("__averageFps"),n=Ext.get("__minFps"),r=Ext.get("__maxFps"),s=1e3,o=0,a=0,l=0;t&&(Ext.AnimationQueue.onFpsChanged=function(e){++a%10||(s=1e3,o=0),l+=e,s=Math.min(s,e),o=Math.max(o,e),t.setHtml(Math.round(e)),i.setHtml(Math.round(l/a)),n.setHtml(Math.round(s)),r.setHtml(Math.round(o))})}},function(){var e=window.location.search.substr(1).split("&");Ext.Array.contains(e,"showfps")&&Ext.onReady(this.showFps.bind(this))}),Ext.define("Ext.mixin.Bufferable",function(l){return{extend:Ext.Mixin,mixinConfig:{id:"bufferable",after:{destroy:"cancelAllCalls"},before:{$reap:"cancelAllCalls"},extended:function(e,t,i){var n=i.bufferableMethods;n&&(delete i.bufferableMethods,l.processClass(t,n))}},afterClassMixedIn:function(e){l.processClass(e)},privates:{cancelAllCalls:function(){var e,t=this.bufferables;if(t)for(e in t)t[e].cancel(),delete t[e]},cancelBufferedCall:function(e,t){var i=this.bufferables,n=i&&i[e];return n&&n[t?"invoke":"cancel"](),!!n},flushBufferedCall:function(e){return this.cancelBufferedCall(e,!0)},initBufferables:function(){var e,t=this.hasOwnProperty("bufferableMethods")&&this.bufferableMethods;return t&&(l._canonicalize(t),e=this.self.prototype.bufferableMethods,this.bufferableMethods=Ext.merge(Ext.clone(e),t)),this.bufferables={}},isCallPending:function(e){var t=this.bufferables;return!!(t&&t[e])},statics:{SINGLE:{single:!0},_canonicalize:function(e){var t,i,n,r;for(r in e)n=Ext.String.capitalize(r),"number"!==(t=typeof(i=e[r]))&&"string"!==t||(e[r]=i={delay:i}),"string"==typeof(t=i.delay)&&(i[t]=!0,delete i.delay),i.capitalized=n,i.name=r,i.fn||(i.fn="do"+n),i.flag||(i.flag="is"+n+"Pending")},_canceller:function(){var e=this.id;e&&(this.delay?Ext.undefer(e):this.asap?Ext.unasap(e):this.idle?Ext.un("idle",e,null,l.SINGLE):this.raf&&Ext.unraf(e),this.id=null),this.args=null,this.target[this.flag]=!1},_invoker:function(){var e=this.args||Ext.emptyArray,t=this.target;++this.invokes,this.cancel(),t[this.fn].apply(t,e)},delayCall:function(e,t,i){if(!e.destroying){function n(){o.id&&(o.id=null,o.invoke())}var r=e.bufferables||e.initBufferables(),s=t.name,o=r[s]||(r[s]=Ext.apply({calls:0,invokes:0,args:null,cancel:l._canceller,id:null,target:e,invoke:l._invoker},t)),a=t.delay;o.id&&o.cancel(),o.args=i,++o.calls,e[o.flag]=!0,a?o.id=Ext.defer(n,a):t.asap?o.id=Ext.asap(n):t.idle?(o.id=n,Ext.on("idle",n,null,l.SINGLE)):t.raf?o.id=Ext.raf(n):o.invoke()}},processClass:function(e,t){var i,n,r=e.prototype,s=r.bufferableMethods;if(t?(l._canonicalize(t),s=s&&Ext.merge(Ext.clone(s),t),r.bufferableMethods=s||t):(t=s,l._canonicalize(t),r.bufferables=null),t)for(n in t)r[n]||(i=t[n],l.processMethod(r,i,Array.prototype.slice))},processMethod:function(e,t,i){var n=t.name,r=t.capitalized;e[n]=function(){return l.delayCall(this,t,i.call(arguments))},e["cancel"+r]=function(){return this.cancelBufferedCall(n)},e["flush"+r]=function(){return this.flushBufferedCall(n)}}}}}}),Ext.define("Ext.ComponentManager",{alternateClassName:"Ext.ComponentMgr",singleton:!0,mixins:[Ext.mixin.Bufferable],count:0,fixReferencesTimer:null,referenceRepairs:0,typeName:"xtype",bufferableMethods:{handleDocumentMouseDown:"asap"},constructor:function(e){Ext.apply(this,e),this.all={},this.byInstanceId={},this.holders={},this.onAvailableCallbacks={}},create:function(e,t){return"string"==typeof e?Ext.widget(e):e.isComponent?e:"xclass"in e?Ext.create(e.xclass,e):Ext.widget(e.xtype||t,e)},get:function(e){return this.all[e]},register:function(e){var t=this,i=e.getId(),n=t.onAvailableCallbacks;void 0===i&&Ext.raise("Component id is undefined. Please ensure the component has an id."),i in t.all&&Ext.raise('Duplicate component id "'+i+'"'),e.$iid in t.byInstanceId&&Ext.raise('Duplicate component instance id "'+e.$iid+'"'),t.all[i]=e,((t.byInstanceId[e.$iid]=e).nameHolder||e.referenceHolder)&&(t.holders[i]=e),++t.count,t.hasFocusListener||t.installFocusListener(),(n=n&&n[i])&&n.length&&t.notifyAvailable(e)},unregister:function(e){var t=this.all,i=this.byInstanceId,n=this.holders,r=e.getId();r in n&&(n[r]=null,delete n[r]),t[r]=null,delete t[r],i[r=e.$iid]=null,delete i[r],--this.count},markReferencesDirty:function(){var e,t,i=this,n=i.holders;if(!Ext.referencesDirty){for(t in n)(e=n[t]).refs=e.nameRefs=null,e.invalidateChildDirty&&e.invalidateChildDirty();Ext.referencesDirty=!0,i.fixReferencesTimer=Ext.asap(function(){i.fixReferencesTimer=null,i.fixReferences()})}},fixReferences:function(){var e,t,i=this.all,n=this.holders;if(Ext.referencesDirty){for(t in this.fixReferencesTimer=Ext.unasap(this.fixReferencesTimer),Ext.referencesDirty=0,++this.referenceRepairs,n)(e=n[t]).beginSyncChildDirty&&e.beginSyncChildDirty();for(t in i)i[t]._fixReference();for(t in n)(e=n[t]).finishSyncChildDirty&&e.finishSyncChildDirty();Ext.referencesDirty=!1}},onAvailable:function(e,t,i){var n,r=this.onAvailableCallbacks,s=this.all;e in s?(n=s[e],t.call(i||n,n)):e&&(Ext.isArray(r[e])||(r[e]=[]),r[e].push(function(e){t.call(i||e,e)}))},notifyAvailable:function(e){for(var t=this.onAvailableCallbacks[e&&e.getId()]||[];t.length;)t.shift()(e)},each:function(e,t){Ext.Object.each(this.all,e,t)},getCount:function(){return this.count},getAll:function(){return Ext.Object.getValues(this.all)},getActiveComponent:function(){return Ext.Component.from(Ext.dom.Element.getActiveElement())},onGlobalFocus:function(e){var t,i,n,r,s=e.event.chain(),o=Ext.applyIf({event:s},e);if(t=s.toComponent=o.toComponent=Ext.Component.from(e.toElement),i=s.fromComponent=o.fromComponent=Ext.Component.from(e.fromElement),n=this.getCommonAncestor(i,t),t!==i){if(i&&!i.destroyed&&!i.isDestructing())for(i.handleBlurEvent&&i.handleBlurEvent(o),r=i;r&&r!==n;r=r.getRefOwner())r.destroyed||r.destroying||(s.type="focusleave",r.onFocusLeave(s));if(t&&!t.destroyed&&!t.isDestructing())for(t.handleFocusEvent&&t.handleFocusEvent(o),r=t;r&&r!==n;r=r.getRefOwner())s.type="focusenter",r.onFocusEnter(s)}for(r=n;r;r=r.getRefOwner())r.destroying||r.destroyed||r.onFocusMove(o)},getCommonAncestor:function(e,t){if(e===t)return e;for(;e&&!e.isAncestor(t)&&e!==t;)e=e.getRefOwner();return e},privates:{doHandleDocumentMouseDown:function(e){var t,i=Ext.Widget.prototype.floatedSelector;i&&(t=Ext.Component.from(e.getTarget(i,Ext.getBody())))&&t.toFront(!0)},installFocusListener:function(){Ext.on("focus",this.onGlobalFocus,this),this.hasFocusListener=!0},clearAll:function(){this.all={},this.byInstanceId={},this.holders={},this.onAvailableCallbacks={}},from:function(e,t,i){var n,r,s,o,a=this.all,l=0;for(e&&e.isEvent&&(e=e.target),n=Ext.getDom(e),"number"!=typeof t&&(r=Ext.getDom(t),t=Number.MAX_VALUE);n&&1===n.nodeType&&l<t&&n!==r;){if(s=n.getAttribute("data-componentid")||n.id){if((o=a[s])&&(!i||Ext.ComponentQuery.is(o,i)))return o;l++}n=n.parentNode}return null}}},function(t){t.fromElement=t.from,Ext.referencesDirty=!1,Ext.fixReferences=function(){t.fixReferences()},Ext.markReferencesDirty=function(){t.markReferencesDirty()},Ext.getCmp=function(e){return t.get(e)},Ext.iidToCmp=function(e){return t.byInstanceId[e]||null},Ext.doEv=function(e,t){var i,n,r;return!((i=Ext.Component.from(t.target))&&!i.destroying&&!i.destroyed&&i.getEventHandlers&&(n=i.getEventHandlers()[t.type])&&i[n])||(r=new Ext.event.Event(t),i[n](r))}}),Ext.ns("Ext.util").Operators={"=":function(e,t){return e==t},"!=":function(e,t){return e!=t},"^=":function(e,t){return e&&e.substr(0,t.length)==t},"$=":function(e,t){return e&&e.substr(e.length-t.length)==t},"*=":function(e,t){return e&&-1!==e.indexOf(t)},"%=":function(e,t){return e%t==0},"|=":function(e,t){return e&&(e==t||e.substr(0,t.length+1)==t+"-")},"~=":function(e,t){return e&&-1!=(" "+e+" ").indexOf(" "+t+" ")}},Ext.define("Ext.util.LruCache",{extend:Ext.util.HashMap,config:{maxSize:null},add:function(e,t){var i,n;return this.removeAtKey(e),i={prev:n=this.last,next:null,key:e,value:t},n?n.next=i:this.first=i,this.last=i,this.callParent([e,i]),this.prune(),t},insertBefore:function(e,t,i){var n,r;return(i=this.map[this.findKey(i)])?((n=this.findKey(t))?this.unlinkEntry(r=this.map[n]):r={prev:i.prev,next:i,key:e,value:t},i.prev?r.prev.next=r:this.first=r,(r.next=i).prev=r,this.prune(),t):this.add(e,t)},get:function(e){var t=this.map[e];if(t)return t.next&&this.moveToEnd(t),t.value},removeAtKey:function(e){return this.unlinkEntry(this.map[e]),this.callParent(arguments)},clear:function(e){return this.first=this.last=null,this.callParent([e])},unlinkEntry:function(e){e&&(e.next?e.next.prev=e.prev:this.last=e.prev,e.prev?e.prev.next=e.next:this.first=e.next,e.prev=e.next=null)},moveToEnd:function(e){this.unlinkEntry(e),(e.prev=this.last)?this.last.next=e:this.first=e,this.last=e},getArray:function(e){for(var t=[],i=this.first;i;)t.push(e?i.key:i.value),i=i.next;return t},each:function(e,t,i){var n=i?this.last:this.first,r=this.length;for(t=t||this;n&&!1!==e.call(t,n.key,n.value,r);)n=i?n.prev:n.next;return this},findKey:function(e){var t,i=this.map;for(t in i)if(i.hasOwnProperty(t)&&i[t].value===e)return t},clone:function(){var e,t=new this.self(this.initialConfig),i=this.map;for(e in t.suspendEvents(),i)i.hasOwnProperty(e)&&t.add(e,i[e].value);return t.resumeEvents(),t},prune:function(){var e=this.getMaxSize(),t=e?this.length-e:0;if(0<t)for(;this.first&&t;t--)this.removeAtKey(this.first.key)}}),Ext.define("Ext.ComponentQuery",{singleton:!0},function(){function d(e,t){return t.method.apply(this,[e].concat(t.args))}function h(e,t){for(var i,n=[],r=0,s=e.length,o=">"!==t;r<s;r++)(i=e[r]).getRefItems&&(n=n.concat(i.getRefItems(o)));return n}function f(e){for(var t,i=[],n=0,r=e.length;n<r;n++)for(t=e[n];t=t.getRefOwner();)i.push(t);return i}function p(e,t,i){if("*"===t)return e.slice();for(var n,r=[],s=0,o=e.length;s<o;s++)!(n=e[s]).destroyed&&n.isXType(t,i)&&r.push(n);return r}function m(e,t,i){for(var n,r=[],s=0,o=e.length;s<o;s++)n=e[s],(i?n.id:n.getItemId())===t&&r.push(n);return r}var g=this,x=Ext.util.Operators,c=/(\\d*)n\\+?(\\d*)/,u=/\\D/,y=/^(\\s)+/,v=/\\\\(.)/g,l=new Ext.util.LruCache({maxSize:100}),e=["var r = [],","i = 0,","it = items,","l = it.length,","c;","for (; i < l; i++) {","c = it[i];","if (c.{0}) {","r.push(c);","}","}","return r;"].join(""),E=/^(\\s?([>\\^])\\s?|\\s|$)/,b=/^(#)?((?:\\\\\\.|[\\w\\-])+|\\*)(?:\\((true|false)\\))?/,C=[{re:/^\\.((?:\\\\\\.|[\\w\\-])+)(?:\\((true|false)\\))?/,method:p,argTransform:function(e){var t=e[0];return Ext.log.warn('"'+t+'" ComponentQuery selector style is deprecated, use "'+t.replace(/^\\./,"")+'" without the leading dot instead'),void 0!==e[1]&&(e[1]=e[1].replace(v,"$1")),e.slice(1)}},{re:/^(?:\\[((?:[@?$])?[\\w\\-]*)\\s*(?:([\\^$*~%!\\/]?=)\\s*(['"])?((?:\\\\\\]|.)*?)\\3)?(?!\\\\)\\])/,method:function(e,t,i,n){var r,s,o,a,l,c,u,d,h=[],f=e.length;for("@"===t.charAt(0)&&(r=!0,t=t.substr(1)),"?"===t.charAt(0)&&(s=r=!0,t=t.substr(1)),c=0;c<f;c++){if(l=(o=e[c]).self&&o.self.getConfigurator&&o.self.$config.configs[t])a=o[l.names.get]();else{if(r&&!o.hasOwnProperty(t))continue;a=o[t]}if(s)h.push(o);else if("~="===i){if(a)for(Ext.isArray(a)||(a=a.split(" ")),u=0,d=a.length;u<d;u++)if(x[i](Ext.coerce(a[u],n),n)){h.push(o);break}}else"/="===i?null!=a&&n.test(a)&&h.push(o):(n?x[i](Ext.coerce(a,n),n):a)&&h.push(o)}return h},argTransform:function(e){var t=e[0],i=e[1],n=e[2],r=e[4];if(void 0!==r){r=r.replace(v,"$1");var s,o=Ext.String.format,a="ComponentQuery selector '{0}' has an unescaped ({1}) character at the {2} of the attribute value pattern. Usually that indicates an error where the opening quote is not followed by the closing quote. If you need to match a ({1}) character at the {2} of the attribute value, escape the quote character in your pattern: (\\\\{1})";(s=/^(['"]).*?[^'"]$/.exec(r))?Ext.log.warn(o(a,t,s[1],"beginning")):(s=/^[^'"].*?(['"])$/.exec(r))&&Ext.log.warn(o(a,t,s[1],"end"))}return"/="===n&&(r=l.get(r)||l.add(r,new RegExp(r))),[i,n,r]}},{re:/^#((?:\\\\\\.|[\\w\\-])+)/,method:m},{re:/^\\:([\\w\\-]+)(?:\\(((?:\\{[^\\}]+\\})|(?:(?!\\{)[^\\s>\\/]*?(?!\\})))\\))?/,method:function(e,t,i){return g.pseudos[t](e,i)},argTransform:function(e){return void 0!==e[2]&&(e[2]=e[2].replace(v,"$1")),e.slice(1)}},{re:/^(?:\\{([^\\}]+)\\})/,method:e}];g.Query=Ext.extend(Object,{constructor:function(e){e=e||{},Ext.apply(this,e)},execute:function(e){var t,i,n,r=this.operations,s=[];for(i=0,n=r.length;i<n;i++)t=r[i],s=s.concat(this._execute(e,t));return s},_execute:function(e,t){var i,n,r=0,s=t.length;for(e?Ext.isIterable(e)?n=e:e.isMixedCollection&&(n=e.items):n=Ext.ComponentManager.getAll();r<s;r++)if(n="^"===(i=t[r]).mode?f(n||[e]):i.mode?h(n||[e],i.mode):d(n||h([e]),i),r===s-1)return n;return[]},is:function(e,t){var i,n,r=this.operations,s=!1,o=r.length;if(0===o)return!0;for(n=0;n<o;n++)if(i=r[n],s=this._is(e,t,i))return s;return!1},_is:function(e,t,i){var n,r,s,o,a,l,c=i.length,u=[e];for(r=c-1;0<=r;--r){if(o=(n=i[r]).mode)if("^"===o)u=h(u," ");else if(">"===o){for(a=[],s=0,c=u.length;s<c;++s)(l=u[s].getRefOwner())&&a.push(l);u=a}else u=f(u);else u=d(u,n);if(0===u.length)return!1}return!t||(o||(u=f(u)),0<u.length&&(u=d(u,{method:m,args:[t.id,!0]})),0!==u.length)},getMatches:function(e,t){var i,n=t.length;for(i=0;i<n&&0!==(e=d(e,t[i])).length;++i);return e},isMultiMatch:function(){return 1<this.operations.length}}),Ext.apply(g,{cache:new Ext.util.LruCache({maxSize:100}),pseudos:{not:function(e,t){for(var i,n=0,r=e.length,s=[],o=-1;n<r;++n)i=e[n],g.is(i,t)||(s[++o]=i);return s},first:function(e){var t=[];return 0<e.length&&t.push(e[0]),t},last:function(e){var t=e.length,i=[];return 0<t&&i.push(e[t-1]),i},focusable:function(e){for(var t,i=e.length,n=[],r=0;r<i;r++)(t=e[r]).isFocusable&&t.isFocusable()&&n.push(t);return n},canfocus:function(e,t){for(var i,n=e.length,r=[],s=0;s<n;s++)(i=e[s]).canFocus&&i.canFocus(!1,t)&&r.push(i);return r},"nth-child":function(e,t){var i,n,r,s,o,a,l=[];for(n=+((i=c.exec(("even"===t?"2n":"odd"===t&&"2n+1")||!u.test(t)&&"n+"+t||t))[1]||1),s=+i[2],r=0;o=e[r];r++)a=r+1,1==n?0!=s&&a!==s||l.push(o):(a+s)%n==0&&l.push(o);return l},scrollable:function(e){for(var t,i=e.length,n=[],r=0;r<i;r++)((t=e[r]).scrollable||t._scrollable)&&n.push(t);return n},visible:function(e,t){var i,n=e.length,r=[],s=0;for(t="true"===t;s<n;s++)(i=e[s]).isVisible(t)&&r.push(i);return r}},query:function(e,t){if(!e)return Ext.ComponentManager.getAll();var i,n,r,s=[],o=[],a={},l=g.cache.get(e);if(s=(l=l||g.cache.add(e,g.parse(e))).execute(t),l.isMultiMatch()){for(i=s.length,r=0;r<i;r++)a[(n=s[r]).id]||(o.push(n),a[n.id]=!0);s=o}return s},visitPreOrder:function(e,t,i,n,r){g._visit(!0,e,t,i,n,r)},visitPostOrder:function(e,t,i,n,r){g._visit(!1,e,t,i,n,r)},_visit:function(e,t,i,n,r,s){var o,a,l,c=g.cache.get(t),u=[i],d=0;if(l=(c=c||g.cache.add(t,g.parse(t))).is(i),i.getRefItems&&(d=(o=i.getRefItems()).length),s&&Ext.Array.push(u,s),e&&l&&!1===n.apply(r||i,u))return!1;for(a=0;a<d;a++)if(!1===g._visit.call(g,e,t,o[a],n,r,s))return!1;return!(!e&&l&&!1===n.apply(r||i,u))&&void 0},is:function(e,t,i){return!t||("function"==typeof t?t(e):(g.cache.get(t)||g.cache.add(t,g.parse(t))).is(e,i))},parse:function(e){var t,i,n,r,s=[];for(n=0,r=(t=Ext.splitAndUnescape(e,",")).length;n<r;n++)""===(i=Ext.String.trim(t[n]))&&Ext.raise('Invalid ComponentQuery selector: ""'),s.push(g._parse(i));return new g.Query({operations:s})},_parse:function(e){for(var t,i,n,r,s,o,a,l,c,u,d,h=[],f=Ext.String.trim,g=C.length;e&&t!==e;){for((i=(t=e).match(b))&&(r=i[1],n=f(i[2]).replace(v,"$1"),"#"===r?h.push({method:m,args:[n]}):h.push({method:p,args:[n,Boolean(i[3])]}),e=e.replace(i[0],"").replace(y,"$1"));!(s=e.match(E));)for(l=0;e&&l<g;l++){if(c=C[l],o=e.match(c.re),u=c.method,a=c.argTransform,o){d=a?a(o):o.slice(1),h.push({method:Ext.isString(c.method)?Ext.functionFactory("items",Ext.String.format.apply(Ext.String,[u].concat(o.slice(1)))):c.method,args:d}),e=e.replace(o[0],"").replace(y,"$1");break}l===g-1&&Ext.raise('Invalid ComponentQuery selector: "'+e+'"')}s[1]&&(h.push({mode:s[2]||s[1]}),e=e.replace(s[0],"").replace(y,""))}return h}}),Ext.all=function(){return g.query.apply(g,arguments)},Ext.first=function(){var e=g.query.apply(g,arguments);return e&&e[0]||null}}),Ext.define("Ext.Evented",{alternateClassName:"Ext.EventedBase",mixins:[Ext.mixin.Observable],initialized:!1,constructor:function(e){this.callParent(),this.mixins.observable.constructor.call(this,e),this.initialized=!0},onClassExtended:function(e,t){if(t.hasOwnProperty("eventedConfig")){var i,n,r=t.config,s=t.eventedConfig;for(i in r?Ext.applyIf(r,s):e.addConfig(s),s)s.hasOwnProperty(i)&&(t[(n=Ext.Config.get(i)).names.set]=n.eventedSetter||n.getEventedSetter())}}}),Ext.define("Ext.util.Positionable",{mixinId:"positionable",_positionTopLeft:["position","top","left"],clippedCls:Ext.baseCSSPrefix+"clipped",afterSetPosition:Ext.emptyFn,getAnchorToXY:function(){Ext.raise("getAnchorToXY is not implemented in "+this.$className)},getBorderPadding:function(){Ext.raise("getBorderPadding is not implemented in "+this.$className)},getLocalX:function(){Ext.raise("getLocalX is not implemented in "+this.$className)},getLocalXY:function(){Ext.raise("getLocalXY is not implemented in "+this.$className)},getLocalY:function(){Ext.raise("getLocalY is not implemented in "+this.$className)},getX:function(){Ext.raise("getX is not implemented in "+this.$className)},getXY:function(){Ext.raise("getXY is not implemented in "+this.$className)},getY:function(){Ext.raise("getY is not implemented in "+this.$className)},setLocalX:function(){Ext.raise("setLocalX is not implemented in "+this.$className)},setLocalXY:function(){Ext.raise("setLocalXY is not implemented in "+this.$className)},setLocalY:function(){Ext.raise("setLocalY is not implemented in "+this.$className)},setX:function(){Ext.raise("setX is not implemented in "+this.$className)},setXY:function(){Ext.raise("setXY is not implemented in "+this.$className)},setY:function(){Ext.raise("setY is not implemented in "+this.$className)},adjustForConstraints:function(e,t){var i=this.getConstrainVector(t,e);return i&&(e[0]+=i[0],e[1]+=i[1]),e},alignTo:function(e,t,i,n){var r=this.el;return this.setXY(this.getAlignToXY(e,t,i),!(!r.anim||!n)&&r.anim(n))},calculateAnchorXY:function(e,t,i,n){var r=this.getRegion();return r.setPosition(0,0),r.translateBy(t||0,i||0),n&&(r.setWidth(n.width),r.setHeight(n.height)),r.getAnchorPoint(e)},convertPositionSpec:function(e){return Ext.util.Region.getAlignInfo(e)},getAlignToXY:function(e,t,i){var n=this.getAlignToRegion(e,t,i);return[n.x,n.y]},getAlignToRegion:function(e,t,i,n){var r,s,o;return(e=Ext.fly(e.el||e))&&e.dom||Ext.raise({sourceClass:"Ext.util.Positionable",sourceMethod:"getAlignToXY",msg:"Attempted to align an element that doesn't exist"}),(t=this.convertPositionSpec(t)).constrain&&(r="!"===t.constrain?e:this.constrainTo||this.container||this.el.parent(),r=Ext.fly(r.el||r).getConstrainRegion()),e===Ext.getBody()&&(s=e.getScroll(),o=i&&2===i.length?i:[0,0],i=[s.left+o[0],s.top+o[1]]),this.getRegion().alignTo({target:e.getRegion(),inside:r,minHeight:n,offset:i,align:t,axisLock:!0})},getAnchorXY:function(e,t,i){var n=this.getRegion(),r=this.el,s="BODY"===r.dom.nodeName||9===r.dom.nodeType,o=r.getScroll();return t?n.setPosition(0,0):s&&n.setPosition(o.left,o.top),i&&(n.setWidth(i.width),n.setHeight(i.height)),n.getAnchorPoint(e)},getBox:function(e,t){var i,n,r,s,o,a=t?this.getLocalXY():this.getXY(),l=a[0],c=a[1];return n="BODY"===this.el.dom.nodeName||9===this.el.dom.nodeType?(i=Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight()):(i=this.getWidth(),this.getHeight()),e&&(l+=s=(r=this.getBorderPadding()).beforeX,c+=o=r.beforeY,i-=s+r.afterX,n-=o+r.afterY),{x:l,left:l,0:l,y:c,top:c,1:c,width:i,height:n,right:l+i,bottom:c+n}},calculateConstrainedPosition:function(e,t,i,n){var r,s,o,a,l=this,c=l.floatParent,u=c?c.getTargetEl():null,d=!1;return i&&c?(s=u.getXY(),o=u.getBorderPadding(),s[0]+=o.beforeX,s[1]+=o.beforeY,t&&(a=[t[0]+s[0],t[1]+s[1]])):a=t,e=e||l.constrainTo||u||l.container||l.el.parent(),i&&a&&(a=l.reverseTranslateXY(a)),(r=(l.constrainHeader&&l.header.rendered?l.header:l).getConstrainVector(e,a,n))&&((d=t||l.getPosition(i))[0]+=r[0],d[1]+=r[1]),d},getConstrainRegion:function(){var e,t,i,n=this.el,r="BODY"===n.dom.nodeName,s=n.dom,o=n.getBorders(),a=n.getXY(),l=a[0]+o.beforeX,c=a[1]+o.beforeY;return i=r?(l=(e=n.getScroll()).left,c=e.top,t=Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight()):(t=s.clientWidth,s.clientHeight),new Ext.util.Region(c,l+t,c+i,l)},getConstrainVector:function(e,t,i){var n=this.getRegion(),r=[0,0],s=this.shadow&&this.constrainShadow&&!this.shadowDisabled?this.el.shadow.getShadowSize():void 0,o=!1,a=this.constraintInsets;return e instanceof Ext.util.Region||(e=(e=Ext.get(e.el||e)).getConstrainRegion()),a&&(a=Ext.isObject(a)?a:Ext.Element.parseBox(a),e.adjust(a.top,a.right,a.bottom,a.left)),t&&n.translateBy(t[0]-n.x,t[1]-n.y),i&&(n.right=n.left+i[0],n.bottom=n.top+i[1]),s&&e.adjust(s[0],-s[1],-s[2],s[3]),n.right>e.right&&(o=!0,r[0]=e.right-n.right),n.left+r[0]<e.left&&(o=!0,r[0]=e.left-n.left),n.bottom>e.bottom&&(o=!0,r[1]=e.bottom-n.bottom),n.top+r[1]<e.top&&(o=!0,r[1]=e.top-n.top),!!o&&r},getOffsetsTo:function(e){var t=this.getXY(),i=e.isRegion?[e.x,e.y]:Ext.fly(e.el||e).getXY();return[t[0]-i[0],t[1]-i[1]]},getRegion:function(e,t){var i=this.getBox(e,t);return new Ext.util.Region(i.top,i.right,i.bottom,i.left)},getClientRegion:function(){var e,t,i=this.el,n=i.dom,r=this.getBox(!0),s=n.offsetHeight>n.clientHeight,o=n.offsetWidth>n.clientWidth;return(s||o)&&(t=Ext.getScrollbarSize(),o&&(o=t.width,"rtl"===i.getStyle("direction")&&!Ext.supports.rtlVertScrollbarOnRight?(e=i.getPadding("l"),r.left-=e+Math.max(e,o)):(e=i.getPadding("r"),r.right+=e-Math.max(e,o))),s&&(s=t.height,e=i.getPadding("b"),r.bottom+=e-Math.max(e,s))),new Ext.util.Region(r.top,r.right,r.bottom,r.left)},getViewRegion:function(){var e,t,i,n,r,s,o,a=this.el;return o="BODY"===a.dom.nodeName?(r=(t=a.getScroll()).left,n=t.top,s=Ext.Element.getViewportWidth(),Ext.Element.getViewportHeight()):(e=this.getBorderPadding(),r=(i=this.getXY())[0]+e.beforeX,n=i[1]+e.beforeY,s=this.getWidth(!0),this.getHeight(!0)),new Ext.util.Region(n,r+s,n+o,r)},move:function(e,t,i){var n=this.getXY(),r=n[0],s=n[1],o=[r-t,s],a=[r+t,s],l=[r,s-t],c=[r,s+t],u={l:o,left:o,r:a,right:a,t:l,top:l,up:l,b:c,bottom:c,down:c};e=e.toLowerCase(),this.setXY([u[e][0],u[e][1]],i)},setBox:function(e){var t,i;return e.isRegion&&(e={x:e.left,y:e.top,width:e.right-e.left,height:e.bottom-e.top}),this.constrainBox(e),t=e.x,i=e.y,this.setXY([t,i]),this.setSize(e.width,e.height),this.afterSetPosition(t,i),this},constrainBox:function(e){var t,i,n;(this.constrain||this.constrainHeader)&&(i="x"in e?e.x:e.left,n="y"in e?e.y:e.top,(t=this.calculateConstrainedPosition(null,[i,n],!1,[e.width,e.height]))&&(e.x=t[0],e.y=t[1]))},translatePoints:function(e,t){var i=this.translateXY(e,t);return{left:i.x,top:i.y}},translateXY:function(e,t){var i=this.el,n=i.getStyle(this._positionTopLeft),r="relative"===n.position,s=parseFloat(n.left),o=parseFloat(n.top),a=this.getXY();return Ext.isArray(e)&&(t=e[1],e=e[0]),isNaN(s)&&(s=r?0:i.dom.offsetLeft),isNaN(o)&&(o=r?0:i.dom.offsetTop),{x:s="number"==typeof e?e-a[0]+s:void 0,y:o="number"==typeof t?t-a[1]+o:void 0}},reverseTranslateXY:function(e){var t,i,n,r,s=e,o=this.el,a=o.dom.offsetParent;return a&&(t=o.isStyle("position","relative"),i=Ext.fly(a).getXY(),n=e[0]+i[0]+a.clientLeft,r=e[1]+i[1]+a.clientTop,t&&(n+=o.getPadding("l"),r+=o.getPadding("t")),s=[n,r]),s},privates:{clipTo:function(e,t){var i,n,r,s,o,a,l=this.el,c=l.getRegion(),u=[],d=this.clippedCls;for(i=e.isRegion?e:(e.isComponent?e.el:Ext.fly(e)).getConstrainRegion(),1&(t=t||15)&&0<(n=i.top-c.top)?(u[0]=n,o=!0):u[0]=-1e4,2&t&&0<(n=c.right-i.right)?(u[1]=Math.max(0,l.getWidth()-n),o=!0):u[1]=1e4,4&t&&0<(n=c.bottom-i.bottom)?(u[2]=Math.max(0,l.getHeight()-n),o=!0):u[2]=1e4,8&t&&0<(n=i.left-c.left)?(u[3]=n,o=!0):u[3]=-1e4,s="rect(",r=0;r<4;++r)s+=Ext.Element.addUnits(u[r],"px"),s+=3===r?")":",";if(l.dom.style.clip=s,l.addCls(d),(a=l.shadow)&&(l=a.el)&&l.dom){for(u[2]-=a.offsets.y,u[3]-=a.offsets.x,s="rect(",r=0;r<4;++r)s+=Ext.Element.addUnits(u[r],"px"),s+=3===r?")":",";l.dom.style.clip=s,o&&!Ext.supports.CSS3BoxShadow?l.dom.style.display="none":(l.dom.style.display="",l.addCls(d))}},clearClip:function(){var e=this.el,t=this.clippedCls;e.dom.style.clip=Ext.isIE8?"auto":"",e.removeCls(t),e.shadow&&e.shadow.el&&e.shadow.el.dom&&(e.shadow.el.dom.style.clip=Ext.isIE8?"auto":"",Ext.supports.CSS3BoxShadow||(e.dom.style.display="",e.removeCls(t)))}}}),Ext.define("Ext.dom.UnderlayPool",{constructor:function(e){this.elementConfig=e,this.cache=[]},checkOut:function(){var e=this.cache.shift();return e||((e=Ext.Element.create(this.elementConfig)).setVisibilityMode(2),e.dom.setAttribute("data-sticky",!0)),e},checkIn:function(e){this.cache.push(e),Ext.getDetachedBody().dom.appendChild(e.dom)},reset:function(){for(var e=this.cache,t=e.length;t--;)e[t].destroy();this.cache=[]}}),Ext.define("Ext.dom.Underlay",{constructor:function(e){Ext.apply(this,e)},beforeShow:Ext.emptyFn,getInsertionTarget:function(){return this.target},getPool:function(){return this.pool||(this.self.prototype.pool=new Ext.dom.UnderlayPool(this.elementConfig))},hide:function(){var e=this.el;e&&(e.dom&&(e.hide(),this.getPool().checkIn(e)),this.el=null),this.hidden=!0},realign:function(e,t,i,n){var r=this.el,s=this.target,o=this.offsets,a=Math.max;r&&(null==e&&(e=s.getX()),null==t&&(t=s.getY()),null==i&&(i=s.getWidth()),null==n&&(n=s.getHeight()),o&&(e+=o.x,t+=o.y,i=a(i+o.w,0),n=a(n+o.h,0)),r.setXY([e,t]),r.setSize(i,n))},setZIndex:function(e){this.zIndex=e,this.el&&this.el.setStyle("z-index",e)},show:function(){var e,t=this,i=t.target,n=t.zIndex,r=t.el,s=t.getInsertionTarget().dom;r=r||(t.el=t.getPool().checkOut()),t.beforeShow(),null==n&&(n=parseInt(i.getStyle("z-index"),10)),n&&r.setStyle("z-index",n),r.setStyle("position",t.fixed?"fixed":""),(e=r.dom).nextSibling!==s&&i.dom.parentNode.insertBefore(e,s),r.show(),t.realign(),t.hidden=!1}}),Ext.define("Ext.dom.Shadow",{extend:Ext.dom.Underlay,alternateClassName:"Ext.Shadow",mode:"drop",offset:4,cls:Ext.baseCSSPrefix+(Ext.supports.CSS3BoxShadow?"css":"ie")+"-shadow",constructor:function(e){var t,i,n,r;switch(this.callParent([e]),this.elementConfig={cls:this.cls,role:"presentation"},n=this.offset,r=Math.floor(n/2),this.opacity=50,this.mode.toLowerCase()){case"drop":t={x:0,y:0,w:n,h:n},i=Ext.supports.CSS3BoxShadow?{x:n,y:n,h:-n,w:-n}:{x:-r,y:-r,h:-r,w:-r};break;case"sides":t={x:-n,y:0,w:2*n,h:n},i=Ext.supports.CSS3BoxShadow?{x:0,y:n,h:-n,w:0}:{x:1+r-2*n,y:-(1+r),h:-1,w:r-1};break;case"frame":t={x:-n,y:-n,w:2*n,h:2*n},i=Ext.supports.CSS3BoxShadow?{x:0,y:0,h:0,w:0}:{x:1+r-2*n,y:1+r-2*n,h:n-r-1,w:n-r-1};break;case"bottom":t={x:-n,y:0,w:2*n,h:n},i=Ext.supports.CSS3BoxShadow?{x:0,y:n,h:-n,w:0}:{x:0,y:n,h:0,w:0}}this.offsets=i,this.outerOffsets=t},getShadowSize:function(){var e=this.el?this.offset:0,t=[e,e,e,e],i=this.mode.toLowerCase();return this.el&&"frame"!==i&&(t[0]=0,"drop"===i&&(t[3]=0)),t},boxShadowProperty:function(){var e="boxShadow",t=document.documentElement.style;return"boxShadow"in t||("WebkitBoxShadow"in t?e="WebkitBoxShadow":"MozBoxShadow"in t&&(e="MozBoxShadow")),e}(),beforeShow:function(){var e=this.el.dom.style,t=this.shim;Ext.supports.CSS3BoxShadow?e[this.boxShadowProperty]="0 0 "+(this.offset+2)+"px #888":e.filter="progid:DXImageTransform.Microsoft.alpha(opacity="+this.opacity+") progid:DXImageTransform.Microsoft.Blur(pixelradius="+this.offset+")",t&&t.realign()},setOpacity:function(e){var t=this.el;t&&(Ext.isIE&&!Ext.supports.CSS3BoxShadow&&(e=Math.floor(100*e/2)/100),this.opacity=e,t.setOpacity(e))}}),Ext.define("Ext.dom.Shim",{extend:Ext.dom.Underlay,cls:Ext.baseCSSPrefix+"shim",constructor:function(e){this.callParent([e]),this.elementConfig={tag:"iframe",cls:this.cls,role:"presentation",frameBorder:"0",src:Ext.SSL_SECURE_URL,tabindex:"-1"}},getInsertionTarget:function(){var e=this.shadow;return e&&e.el||this.target}}),Ext.define("Ext.dom.ElementEvent",{extend:Ext.util.Event,addListener:function(e,t,i,n,r){var s=this,o=s.name,a=Ext.event.publisher.Dom.instance.directEvents[o];return!1===(i=i||{}).delegated||a?(a&&i.delegate&&(i.capture=!0),i.capture?(s.directCaptures||(s.directCaptures=new Ext.util.Event(s.observable,o))).addListener(e,t,i,n,r):(s.directs||(s.directs=new Ext.util.Event(s.observable,o))).addListener(e,t,i,n,r)):i.capture?(s.captures||(s.captures=new Ext.util.Event(s.observable,o))).addListener(e,t,i,n,r):s.callParent([e,t,i,n,r])},removeListener:function(e,t){var i=this.captures,n=this.directs,r=this.directCaptures,s=!1,o=this.findListener(e,t);return-1!==o?s=this.callParent([e,t,o]):(n&&(o=n.findListener(e,t)),-1!==o?s=n.removeListener(e,t,o):(i&&(o=i.findListener(e,t)),-1!==o?s=i.removeListener(e,t,o):r&&-1!==(o=r.findListener(e,t))&&(s=r.removeListener(e,t,o)))),s},clearListeners:function(){var e=this.directCaptures,t=this.directs,i=this.captures;e&&e.clearListeners(),t&&t.clearListeners(),i&&i.clearListeners(),this.callParent()},suspend:function(){var e=this.directCaptures,t=this.directs,i=this.captures;e&&e.suspend(),t&&t.suspend(),i&&i.suspend(),this.callParent()},resume:function(){var e=this.directCaptures,t=this.directs,i=this.captures;e&&e.resume(),t&&t.resume(),i&&i.resume(),this.callParent()}}),Ext.define("Ext.event.publisher.Publisher",{isEventPublisher:!0,$vetoClearingPrototypeOnDestroy:!0,handledEvents:[],statics:{publishers:{},publishersByEvent:{}},constructor:function(){var e=this.type;this.handles={},e||Ext.raise("Event publisher '"+this.$className+"' defined without a 'type' property."),this.self.instance&&Ext.raise("Cannot create multiple instances of '"+this.$className+"'. Use '"+this.$className+".instance' to retrieve the singleton instance."),this.registerEvents(),Ext.event.publisher.Publisher.publishers[e]=this},registerEvents:function(e){var t,i,n=Ext.event.publisher.Publisher.publishersByEvent,r=e||this.handledEvents,s=r.length;for(i=0;i<s;i++)t=r[i],this.handles[t]=1,n[t]=this},subscribe:function(){Ext.raise("Ext.event.publisher.Publisher subclass '"+this.$className+'" has no subscribe method.')},unsubscribe:function(){Ext.raise("Ext.event.publisher.Publisher subclass '"+this.$className+'" has no unsubscribe method.')},fire:function(e,t,i){var n;e.hasListeners[t]&&(n=e.events[t])&&n.fire.apply(n,i)}}),Ext.define("Ext.util.Offset",{statics:{fromObject:function(e){return e instanceof this?e:"number"==typeof e?new this(e,e):e.length?new this(e[0],e[1]):new this(e.x,e.y)}},constructor:function(e,t){return this.x=null==e||isNaN(e)?0:e,this.y=null==t||isNaN(t)?0:t,this},copy:function(){return new Ext.util.Offset(this.x,this.y)},copyFrom:function(e){this.x=e.x,this.y=e.y},toString:function(){return"Offset["+this.x+","+this.y+"]"},equals:function(e){return e instanceof this.statics()||Ext.raise("Offset must be an instance of Ext.util.Offset"),this.x===e.x&&this.y===e.y},add:function(e){e instanceof this.statics()||Ext.raise("Offset must be an instance of Ext.util.Offset"),this.x+=e.x,this.y+=e.y},round:function(e){var t;isNaN(e)?(this.x=Math.round(this.x),this.y=Math.round(this.y)):(t=Math.pow(10,e),this.x=Math.round(this.x*t)/t,this.y=Math.round(this.y*t)/t)},isZero:function(){return 0===this.x&&0===this.y}}),Ext.define("Ext.util.Region",function(){function C(e,t,i,n,r){var s,o,a,l,c,u,d,h=Math.ceil(n.x),f=Math.ceil(h/2)+3;if((!r||r.intersect(e))&&null!=i){if(1&i){if(t.getHeight()<h+4)return;s=e.top+f-t.height,o=e.bottom-f-1,t.setPosition(t.x,Math.min(Math.max(t.y,s),o)),s=t.top+2,o=t.bottom-(h+2),u=(l=3===i)?t.right:t.left,c=new R.Region(Math.max(t.top,e.top),u,Math.min(t.bottom,e.bottom),u),(a=new R.Region(0,0,0,0).setWidth(n.y).setHeight(h).alignTo({target:c,align:l?"l-r":"r-l",overlap:!0})).setPosition(a.x,Math.min(Math.max(a.y,s),o)),a.position=l?"right":"left"}else{if(t.getWidth()<h+4)return;s=e.left+f-t.width,o=e.right-f-1,t.setPosition(Math.min(Math.max(t.x,s),o),t.y),s=t.left+2,o=t.right-(h+2),d=(l=0===i)?t.bottom:t.top,c=new R.Region(d,Math.min(t.right,e.right),d,Math.max(t.left,e.left)),(a=new R.Region(0,0,0,0).setWidth(h).setHeight(n.y).alignTo({target:c,align:l?"t-b":"b-t",overlap:!0})).setPosition(Math.min(Math.max(a.x,s),o),a.y),a.position=l?"bottom":"top"}if(r&&!r.contains(a))return;t.anchor=a,t.anchor.align=i}}var R=Ext.util,o=/([^\\?!]*)(!|\\?)?$/,a=/^(?:(?:([trbl])(\\d+))|(tl|t|tc|tr|l|c|r|bl|b|bc|br))(?:-(?:(?:([trbl])(\\d+))|(tl|t|tc|tr|l|c|r|bl|b|bc|br)))?$/i,l={l:0,r:100,t:0,b:100,c:50},c={l:100,r:0,t:0,b:100,c:50},u={b:0,l:1,t:2,r:3},d={"tl-tr":"l0-r0","tl-r":"l0-r50","bl-r":"l100-r50","bl-br":"l100-r100","tr-tl":"r0-l0","tr-l":"r0-l50","br-l":"r100-l50","br-bl":"r100-l100"},h={"tl-tr":"r0-l0","tl-r":"r0-l50","bl-r":"r100-l50","bl-br":"r100-l100","tr-tl":"l0-r0","tr-l":"l0-r50","br-l":"l100-r50","br-bl":"l100-r100"},S=[],M=new R.Offset(0,0),w=[-1,1,1,-1];return{isRegion:!0,statics:{getRegion:function(e){return Ext.fly(e).getRegion()},from:function(e){return new this(e.top,e.right,e.bottom,e.left)},getAlignInfo:function(e,t){if("object"==typeof e)return e;e=e?e.indexOf("-")<0?"tl-"+e:e:"tl-bl",e=(i=o.exec(e))[1],e=(t?h:d)[e]||e;var i,n,r=t?c:l,s=a.exec(e);return s||Ext.raise({sourceClass:"Ext.util.Region",sourceMethod:"getAlignInfo",position:e,msg:'Attempted to align an element with an invalid position: "'+e+'"'}),n={myEdge:s[1],myOffset:s[2],otherEdge:s[4],otherOffset:s[5],constrain:i[2]},s[3]&&(n.myEdge=s[3][0],n.myOffset=r[s[3][1]],null==n.myOffset&&(n.myOffset=50)),s[6]&&(n.otherEdge=s[6][0],n.otherOffset=r[s[6][1]],null==n.otherOffset&&(n.otherOffset=50)),n.position=u[n.myEdge],n}},constructor:function(e,t,i,n){var r=this;r.y=r.top=r[1]=e,r.right=t,r.bottom=i,r.x=r.left=r[0]=n,r.height=r.bottom-r.top,r.width=r.right-r.left},setPosition:function(e,t){return 1===arguments.length&&(t=e[1],e=e[0]),this.translateBy(e-this.x,t-this.y)},contains:function(e){return e.x>=this.x&&(e.right||e.x)<=this.right&&e.y>=this.y&&(e.bottom||e.y)<=this.bottom},intersect:function(e){var t=Math.max(this.y,e.y),i=Math.min(this.right,e.right),n=Math.min(this.bottom,e.bottom),r=Math.max(this.x,e.x);return t<n&&r<i&&new this.self(t,i,n,r)},union:function(e){var t=Math.min(this.y,e.y),i=Math.max(this.right,e.right),n=Math.max(this.bottom,e.bottom),r=Math.min(this.x,e.x);return new this.self(t,i,n,r)},constrainTo:function(e){var t=this,i=Ext.Number.constrain;return t.top=t.y=i(t.top,e.y,e.bottom),t.bottom=i(t.bottom,e.y,e.bottom),t.left=t.x=i(t.left,e.x,e.right),t.right=i(t.right,e.x,e.right),t.height=t.bottom-t.top,t.width=t.right-t.left,t},adjust:function(e,t,i,n){var r=this;return r.top=r.y+=e||0,r.left=r.x+=n||0,r.right+=t||0,r.bottom+=i||0,r.height=r.bottom-r.top,r.width=r.right-r.left,r},getOutOfBoundOffset:function(e,t){var i;return Ext.isObject(e)?(t=e,(i=new R.Offset).x=this.getOutOfBoundOffsetX(t.x),i.y=this.getOutOfBoundOffsetY(t.y),i):"x"===e?this.getOutOfBoundOffsetX(t):this.getOutOfBoundOffsetY(t)},getOutOfBoundOffsetX:function(e){return e<=this.x?this.x-e:e>=this.right?this.right-e:0},getOutOfBoundOffsetY:function(e){return e<=this.y?this.y-e:e>=this.bottom?this.bottom-e:0},isOutOfBound:function(e,t){return Ext.isObject(e)?(t=e,this.isOutOfBoundX(t.x)||this.isOutOfBoundY(t.y)):"x"===e?this.isOutOfBoundX(t):this.isOutOfBoundY(t)},isOutOfBoundX:function(e){return e<this.x||e>this.right},isOutOfBoundY:function(e){return e<this.y||e>this.bottom},restrict:function(e,t,i){var n;return Ext.isObject(e)?(i=t,(n=(t=e).copy?t.copy():{x:t.x,y:t.y}).x=this.restrictX(t.x,i),n.y=this.restrictY(t.y,i),n):"x"===e?this.restrictX(t,i):this.restrictY(t,i)},restrictX:function(e,t){return t=t||1,e<=this.x?e-=(e-this.x)*t:e>=this.right&&(e-=(e-this.right)*t),e},restrictY:function(e,t){return t=t||1,e<=this.y?e-=(e-this.y)*t:e>=this.bottom&&(e-=(e-this.bottom)*t),e},alignTo:function(e){var t,i,n,r,s,o,a,l,c=this.self,u=R.Offset,d=Ext.Element,h=function(e){var t,i,n,r,s=R.Region,o=typeof e;if(null==e)return s.EMPTY;if(e.isRegion)return e;if(e.isElement||1===e.nodeType)return this.getRegion(e);if("string"==o){switch((e=e.split(" ")).length){case 1:e[1]=e[2]=e[3]=e[0];break;case 2:e[2]=e[0],e[3]=e[1];break;case 3:e[3]=e[1]}t=parseInt(e[0],10)||0,i=parseInt(e[1],10)||0,n=parseInt(e[2],10)||0,r=parseInt(e[3],10)||0}else"number"==o?t=i=n=r=e:"number"==typeof e.x?(t=e.y,r=e.x,n="number"==typeof e.right?(i=e.right,e.bottom):(i=r+e.width,t+e.height)):Ext.raise("Not convertible to a Region: "+e);return new s(t,i,n,r)}(e.target),f=e.rtl,g=e.overlap,p=e.align,m=e.anchorSize,x=e.offset,y=e.inside,v=e.position,E=e.allowXTranslate,b=e.allowYTranslate;return x&&((x=u.fromObject(x))instanceof u||Ext.raise("offset option must be an Ext.util.Offset")),m&&((m=u.fromObject(m))instanceof u||Ext.raise("anchorSize option must be an Ext.util.Offset")),y&&!y.isRegion&&(y=Ext.getDom(y)===document.body?new c(0,d.getDocumentWidth(),d.getDocumentHeight(),0):Ext.fly(y).getRegion()),v?(2===v.length&&(v=new R.Point(v[0],v[1])),n=(new c).copyFrom(this).setPosition(v.x,v.y)):(p=this.getAlignInfo(p,f),y&&(h.x>=y.right?(h.setPosition(y.right-1,h.y),3!==p.position&&(p=this.getAlignInfo("r-l",f))):h.right<y.x&&(h.setPosition(y.x-h.getWidth()+1,h.y),1!==p.position&&(p=this.getAlignInfo("l-r",f))),h.y>=y.bottom?(h.setPosition(h.x,y.bottom-1),0!==p.position&&(p=this.getAlignInfo("b-t",f))):h.bottom<y.y&&(h.setPosition(h.x,y.y-h.getHeight()+1),2!==p.position&&(p=this.getAlignInfo("t-b",f)))),t=m?(o=h,a=m,null!=(l=p.position)&&a&&(S[0]=S[1]=S[2]=S[3]=0,S[l]=a.y*w[l],(o=R.Region.from(o)).adjust.apply(o,S)),o):h,g=!!(n=c.from(this).translateBy(this.getAlignToVector(t,p))).intersect(t),!x||!g&&m||n.translateBy(x),m&&C(h,n,p.position,m,y)),y&&(r=n.copy(),n.left<y.left&&(n.translateBy(y.left-n.left,0),i=!0),n.right>y.right&&n.left>y.left&&(n.translateBy(y.right-n.right,0),i=!0),n.top<y.top&&(n.translateBy(0,y.top-n.top),i=!0),n.bottom>y.bottom&&n.top>y.top&&(n.translateBy(0,y.bottom-n.bottom),i=!0),i&&!g&&(n.anchor=null,e.axisLock&&(1&p.position?b=!1:E=!1),v?n.contains(v)&&v.exclude(n,{inside:y,centerOnSideChange:!1}):(s=n.copy(),n.intersect(t)?p.position=h.exclude(n,{initialPosition:r,defaultPosition:p.position,inside:y,minHeight:e.minHeight,minWidth:e.minWidth,allowX:E,allowY:b,offset:x,anchorHeight:m?m.y:0,centerOnSideChange:!!m}):e.minWidth&&n.getWidth()>y.getWidth()?(n.setPosition(0,n.y),n.setWidth(Math.max(y.getWidth(),e.minWidth)),n.constrainWidth=!0):e.minHeight&&n.getHeight()>y.getHeight()&&(n.setPosition(n.x,0),n.setHeight(Math.max(y.getHeight(),e.minHeight)),n.constrainHeight=!0),n.align=p,y.contains(n)?m&&C(h,n,p.position,m,y):n=s))),n},exclude:function(e,t){var i,n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v=this,E=(t=t||{}).initialPosition||e,b=t.inside,C=t.defaultPosition,S=t.centerOnSideChange,w=t.minHeight,T=t.minWidth,P=!1!==t.allowX,I=!1!==t.allowY,A=t.anchorHeight,k=t.offset,D=[];if(k=k||M,I?(D.push([0,v.top-e.bottom-A+k.y,"b-t",0,Math.abs(v.top-E.bottom-A+k.y)]),D.push([0,v.bottom-e.top+A+k.y,"t-b",2,Math.abs(v.bottom-E.top+A+k.y)])):S=!1,P?(D.push([v.left-e.right-A+k.x,0,"r-l",3,Math.abs(v.left-E.right-A+k.x)]),D.push([v.right-e.left+A+k.x,0,"l-r",1,Math.abs(v.right-E.left+A+k.x)])):S=!1,Ext.Array.sort(D,function(e,t){var i=e[4]-t[4];if(!i){if(e[3]===C)return-1;if(t[3]===C)return 1}return i}),!b)return e.translateBy.apply(e,D[0]),D[0][3];for(r=0;r<D.length;r++){if(n=D[r],(i=R.Region.from(e)).translateBy.apply(i,n),b.contains(i)){e.copyFrom(i),l={align:n[2],position:n[3],distance:n[4]};break}w&&(p=i,m=v,x=b,(g=w)&&x&&(p.top>=m.bottom&&p.bottom>x.bottom?(p.setHeight(Math.max(p.getHeight()+x.bottom-p.bottom,g)),p.constrainHeight=!0):p.bottom<=m.top&&p.top<x.top?(y=Math.max(p.getHeight()+p.top-x.top,g),p.adjust(p.getHeight()-y),p.constrainHeight=!0):p.getHeight()>x.getHeight()&&(p.setHeight(Math.max(g,x.getHeight())),p.setPosition(p.x,0),p.constrainHeight=!0)),b.contains(i)&&(!s||i.getArea()>s.region.getArea())&&(s={region:i,align:n[2],position:n[3],distance:n[4]})),T&&(u=i,d=v,h=b,(c=T)&&h&&(u.left>=d.right&&u.right>h.right?(u.setWidth(Math.max(u.getWidth()+h.right-u.right,c)),u.constrainWidth=!0):u.right<=d.left&&u.left<h.left?(f=Math.max(u.getWidth()+u.left-h.left,c),u.adjust(0,0,0,u.getWidth()-f),u.constrainWidth=!0):u.getWidth()>h.getWidth()&&(u.setWidth(Math.max(c,h.getWidth())),u.setPosition(0,u.y),u.constrainWidth=!0)),b.contains(i)&&(!s||i.getArea()>s.region.getArea())&&(s={region:i,align:n[2],position:n[3],distance:n[4]})),(a=b.intersect(i))&&(a=a.getArea(),(!o||a&&o.area<a)&&(o={region:i,align:n[2],position:n[3],distance:n[4],area:a}))}return l||(s?(e.copyFrom(s.region),l=s,e.constrainWidth=s.region.constrainWidth,e.constrainHeight=s.region.constrainHeight):o&&(e.copyFrom(o.region),l=o)),l?((1&l.position)!=(1&C)&&l.distance&&S&&(n=e.alignTo({align:l.align,target:v,anchorSize:A,offset:k,axisLock:!0,inside:b,minHeight:t.minHeight,minWidth:t.minWidth}),b.contains(n)&&e.setPosition(n.x,n.y)),l.position):C},getAlignToXY:function(e,t,i){var n=this.getAlignToVector(e,t,i);return[this.x+n[0],this.y+n[1]]},getAnchorPoint:function(e,t){return e="string"==typeof e?this.getAlignInfo(e+"-tl",t):e,this["getAnchorPoint_"+e.myEdge](e.myOffset)},getAlignToVector:function(e,t,i){t="string"==typeof t?this.getAlignInfo(t,i):t;var n=this["getAnchorPoint_"+t.myEdge](t.myOffset),r=e["getAnchorPoint_"+t.otherEdge](t.otherOffset);return[r[0]-n[0],r[1]-n[1]]},getAnchorPoint_t:function(e){return[this.x+Math.round(this.getWidth()*(e/100)),this.y]},getAnchorPoint_b:function(e){return[this.x+Math.round(this.getWidth()*(e/100)),this.bottom]},getAnchorPoint_l:function(e){return[this.x,this.y+Math.round(this.getHeight()*(e/100))]},getAnchorPoint_r:function(e){return[this.right,this.y+Math.round(this.getHeight()*(e/100))]},getAnchorPoint_c:function(){return[this.x+Math.round(this.getWidth()/2),this.y+Math.round(this.getHeight()/2)]},getCenter:function(){return[this.x+this.width/2,this.y+this.height/2]},getHeight:function(){return this.bottom-this.y},getWidth:function(){return this.right-this.x},getArea:function(){return this.getHeight()*this.getWidth()},setHeight:function(e){return this.height=e,this.bottom=this.top+e,this},setWidth:function(e){return this.width=e,this.right=this.left+e,this},getSize:function(){return{width:this.right-this.x,height:this.bottom-this.y}},setSize:function(e,t){return void 0===t&&(t=e),this.setWidth(e),this.setHeight(t)},copy:function(){return new this.self(this.y,this.right,this.bottom,this.x)},copyFrom:function(e){return this.top=this.y=this[1]=e.y,this.right=e.right,this.bottom=e.bottom,this.left=this.x=this[0]=e.x,this},toString:function(){return"Region["+this.top+","+this.right+","+this.bottom+","+this.left+"]"},translateBy:function(e,t){return e.length?(t=e[1],e=e[0]):1===arguments.length&&(t=e.y,e=e.x),this.top=this.y+=t,this.right+=e,this.bottom+=t,this.left=this.x+=e,this},round:function(){var e=this;return e.top=e.y=Math.round(e.y),e.right=Math.round(e.right),e.bottom=Math.round(e.bottom),e.left=e.x=Math.round(e.x),e},equals:function(e){return this.top===e.top&&this.right===e.right&&this.bottom===e.bottom&&this.left===e.left},getOffsetsTo:function(e){return{x:this.x-e.x,y:this.y-e.y}},highlight:function(){var e=Ext.getBody().createChild({style:"background-color:#52a0db;opacity:0.4;position:absolute;z-index:9999999"});return e.setBox(this),Ext.defer(function(){e.destroy()},5e3),e}}},function(e){e.prototype.getAlignInfo=e.getAlignInfo,e.EMPTY=new e(0,0,0,0),Object.freeze&&Object.freeze(e.EMPTY)}),Ext.define("Ext.util.Point",{extend:Ext.util.Region,isPoint:!0,radianToDegreeConstant:180/Math.PI,origin:{x:0,y:0},statics:{fromEvent:function(e){var t=e.changedTouches,i=t&&0<t.length?t[0]:e;return this.fromTouch(i)},fromTouch:function(e){return new this(e.pageX,e.pageY)},from:function(e){return e?e instanceof this?e:new this(e.x,e.y):new this(0,0)}},constructor:function(e,t){null==e&&(e=0),null==t&&(t=0),this.callParent([t,e,t,e])},clone:function(){return new this.self(this.x,this.y)},copy:function(){return this.clone.apply(this,arguments)},copyFrom:function(e){return this.x=e.x,this.y=e.y,this},toString:function(){return"Point["+this.x+","+this.y+"]"},equals:function(e){return this.x===e.x&&this.y===e.y},isCloseTo:function(e,t){if("number"==typeof t)return this.getDistanceTo(e)<=t;var i=e.x,n=e.y,r=t.x,s=t.y;return this.x<=i+r&&this.x>=i-r&&this.y<=n+s&&this.y>=n-s},isWithin:function(){return this.isCloseTo.apply(this,arguments)},isContainedBy:function(e){return e instanceof Ext.util.Region||(e=Ext.get(e.el||e).getRegion()),e.contains(this)},roundedEquals:function(e){return e&&"object"==typeof e||(e=this.origin),Math.round(this.x)===Math.round(e.x)&&Math.round(this.y)===Math.round(e.y)},getDistanceTo:function(e){e&&"object"==typeof e||(e=this.origin);var t=this.x-e.x,i=this.y-e.y;return Math.sqrt(t*t+i*i)},getAngleTo:function(e){e&&"object"==typeof e||(e=this.origin);var t=this.x-e.x,i=this.y-e.y;return Math.atan2(i,t)*this.radianToDegreeConstant}},function(){this.prototype.translate=this.prototype.translateBy}),Ext.define("Ext.event.Event",{alternateClassName:"Ext.EventObjectImpl",stopped:!1,claimed:!1,defaultPrevented:!1,isEvent:!0,geckoRelatedTargetEvents:{blur:1,dragenter:1,dragleave:1,focus:1},statics:{resolveTextNode:function(e){return e&&3===e.nodeType?e.parentNode:e},gestureEvents:{},pointerEvents:{pointerdown:1,pointermove:1,pointerup:1,pointercancel:1,pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerDown:1,MSPointerMove:1,MSPointerUp:1,MSPointerOver:1,MSPointerOut:1,MSPointerCancel:1,MSPointerEnter:1,MSPointerLeave:1},mouseEvents:{mousedown:1,mousemove:1,mouseup:1,mouseover:1,mouseout:1,mouseenter:1,mouseleave:1},clickEvents:{click:1,dblclick:1},touchEvents:{touchstart:1,touchmove:1,touchend:1,touchcancel:1},focusEvents:{focus:1,focusin:1,focusenter:1},blurEvents:{blur:1,focusout:1,focusleave:1},wheelEvents:{wheel:1,mousewheel:1},pointerTypeMap:{2:"touch",3:"pen",4:"mouse",touch:"touch",pen:"pen",mouse:"mouse"},keyEventRe:/^key/,keyFlags:{CTRL:"ctrlKey",CONTROL:"ctrlKey",ALT:"altKey",SHIFT:"shiftKey",CMD:"metaKey",COMMAND:"metaKey",CMDORCTRL:Ext.isMac?"metaKey":"ctrlKey",COMMANDORCONTROL:Ext.isMac?"metaKey":"ctrlKey",META:"metaKey"},modifierGlyphs:{ctrlKey:"",altKey:"",metaKey:Ext.isMac?"":"",shiftKey:""},specialKeyGlyphs:{BACKSPACE:"",TAB:"",ENTER:"",RETURN:"",SPACE:"",PAGE_UP:"",PAGE_DOWN:"",END:"",HOME:"",LEFT:"",UP:"",RIGHT:"",DOWN:"",PRINT_SCREEN:"",INSERT:"",DELETE:"",CONTEXT_MENU:""},_hyphenRe:/^[a-z]+\\-/i,getKeyId:function(e){e="number"==typeof e?this.keyCodes[e]:e.toUpperCase();var t,i,n=this._hyphenRe.test(e)?"-":"+",r=e===n?[n]:e.split(n),s=r.length-1,o=r[s],a=[];for(Ext.event.Event[o]||Ext.raise('Invalid key name: "'+o+'"'),i=0;i<s;i++)(t=this.keyFlags[r[i]])||Ext.raise('Invalid key modifier: "'+r[i]+'"'),a[t]=!0;return a.ctrlKey&&a.push(this.modifierGlyphs.ctrlKey),a.altKey&&a.push(this.modifierGlyphs.altKey),a.shiftKey&&a.push(this.modifierGlyphs.shiftKey),a.metaKey&&a.push(this.modifierGlyphs.metaKey),a.push(this.specialKeyGlyphs[o]||o),a.join("")},globalTabKeyDown:function(e){9===e.keyCode&&(Ext.event.Event.forwardTab=!e.shiftKey)},globalTabKeyUp:function(e){9===e.keyCode&&delete Ext.event.Event.forwardTab}},constructor:function(e){var t,i,n=this,r=n.self,s=n.self.resolveTextNode,o=e.changedTouches,a=o?o[0]:e,l=e.type;if(n.timeStamp=n.time=Ext.ticks(),n.pageX=a.pageX,n.pageY=a.pageY,n.clientX=a.clientX,n.clientY=a.clientY,n.target=n.delegatedTarget=s(e.target),n.currentTarget=s(e.currentTarget),i=e.relatedTarget)if(Ext.isGecko&&n.geckoRelatedTargetEvents[l])try{n.relatedTarget=s(i)}catch(e){n.relatedTarget=null}else n.relatedTarget=s(i);n.browserEvent=n.event=e,n.type=l,n.button=e.button||0,n.shiftKey=e.shiftKey,n.ctrlKey=e.ctrlKey||e.metaKey||!1,n.altKey=e.altKey,n.charCode=e.charCode,n.keyCode=e.keyCode,n.buttons=e.buttons,0===n.button&&0===n.buttons&&(n.buttons=1),r.focusEvents[l]||r.blurEvents[l]?(void 0!==r.forwardTab&&(n.forwardTab=r.forwardTab),r.focusEvents[l]?(n.fromElement=e.relatedTarget,n.toElement=e.target):(n.fromElement=e.target,n.toElement=e.relatedTarget)):"keydown"!==l&&delete r.forwardTab,r.mouseEvents[l]?t="mouse":r.clickEvents[l]?t=r.pointerTypeMap[e.pointerType]||(Ext.now()-Ext.event.publisher.Dom.lastTouchEndTime<1e3?"touch":"mouse"):r.pointerEvents[l]?t=r.pointerTypeMap[e.pointerType]||"mouse":r.touchEvents[l]&&(t="touch"),t&&(n.pointerType=t),n.isMultitouch=!1===e.isPrimary||e.touches&&1<e.touches.length,r.wheelEvents[l]&&n.getWheelDeltas()},chain:function(e){var t=Ext.Object.chain(this);return t.parentEvent=this,Ext.apply(t,e)},correctWheelDelta:function(e){var t=this.browserEvent.deltaMode,i=e;return 0===t?i=e*this.WHEEL_PIXEL_SIZE:1===t?i=e*this.WHEEL_LINE_SIZE:2===t&&(i=e*this.WHEEL_PAGE_SIZE),Math.round(i)},getChar:function(){var e=this.which();return String.fromCharCode(e)},getCharCode:function(){return this.charCode||this.keyCode},getKey:function(){return this.keyCode||this.charCode},getKeyName:function(){return"keypress"===this.type?String.fromCharCode(this.getCharCode()):this.keyCodes[this.keyCode]},key:function(){return this.browserEvent.key},which:function(){var e=this.browserEvent,t=e.which;return null==t&&(this.self.keyEventRe.test(e.type)?t=e.charCode||e.keyCode:void 0!==(t=e.button)&&(t=1&t?1:4&t?2:2&t?3:0)),t},getClipboardData:function(e){var t,i=this.browserEvent.clipboardData,n=Ext.global.clipboardData,r=null;return e=e||"text/plain",i&&i.getData?r=i.getData(e):n&&n.getData&&(t=this.ieMimeType[e])&&(r=n.getData(t)),r},getPoint:function(){var e,t=this.point;return t||(e=this.getXY(),t=this.point=new Ext.util.Point(e[0],e[1])),t},getRelatedTarget:function(e,t,i){var n=this.relatedTarget,r=null;return n&&n.nodeType&&(r=e?Ext.fly(n).findParent(e,t,i):i?Ext.get(n):n),r},getTarget:function(e,t,i){return e?Ext.fly(this.target).findParent(e,t,i):i?Ext.get(this.target):this.target},getTime:function(){return this.time},getWheelDelta:function(){return this.getWheelDeltas().y},getWheelDeltas:function(){var e,t,i,n=this.wheelDeltas;return n||(e=this.browserEvent,t=this.correctWheelDelta(e.deltaX||0),i=e.deltaY,i=this.correctWheelDelta(null==i?-e.wheelDelta:i),this.deltaX=t,this.deltaY=i,this.wheelDeltas=n={x:t,y:i}),n},getX:function(){return this.getXY()[0]},getXY:function(){var e=this.xy;if(!e){var t,i,n,r,s=(e=this.xy=[this.pageX,this.pageY])[0];s||0===s||(t=this.browserEvent,n=(i=document).documentElement,r=i.body,e[0]=t.clientX+(n&&n.scrollLeft||r&&r.scrollLeft||0)-(n&&n.clientLeft||r&&r.clientLeft||0),e[1]=t.clientY+(n&&n.scrollTop||r&&r.scrollTop||0)-(n&&n.clientTop||r&&r.clientTop||0))}return e},getLocalXY:function(e){var t,i=this.getXY(),n=Ext.fly(this.currentTarget).getXY(),r=i[0]-n[0],s=i[1]-n[1];return e&&(t=Ext.fly(this.currentTarget).getSize(),r=Math.max(0,Math.min(r,t.width)),s=Math.max(0,Math.min(s,t.height))),[r,s]},getY:function(){return this.getXY()[1]},hasModifier:function(){return!!(this.ctrlKey||this.altKey||this.shiftKey||this.metaKey)},isNavKeyPress:function(e){var t=this.keyCode;return(!("keypress"===this.type)||Ext.isGecko)&&33<=t&&t<=40||!e&&(t===this.RETURN||t===this.TAB||t===this.ESC)},isSpecialKey:function(){var e=this.keyCode,t=Ext.isGecko,i="keypress"===this.type;return t&&i&&0===this.charCode||this.isNavKeyPress()||e===this.BACKSPACE||e===this.ENTER||16<=e&&e<=20||(!i||t)&&44<=e&&e<=46},makeUnpreventable:function(){this.browserEvent.preventDefault=Ext.emptyFn},preventDefault:function(){var e=this.parentEvent;return this.defaultPrevented=!0,e&&(e.defaultPrevented=!0),this.browserEvent.preventDefault(),this},setCurrentTarget:function(e){this.currentTarget=this.delegatedTarget=e},stopEvent:function(){return this.preventDefault().stopPropagation()},mousedownEvents:{mousedown:1,pointerdown:1,touchstart:1},mouseupEvents:{mouseup:1,pointerup:1,touchend:1},stopPropagation:function(){var e=this,t=e.browserEvent,i=e.parentEvent;return e.mousedownEvents[e.type]&&Ext.GlobalEvents.fireMouseDown(e),e.mouseupEvents[e.type]&&Ext.GlobalEvents.fireMouseUp(e),e.stopped=!0,i&&!e.isGesture&&(i.stopped=!0),t.stopPropagation?t.stopPropagation():t.cancelBubble=!0,e},claimGesture:function(){var e=this.parentEvent;return this.claimed=!0,e&&!this.isGesture?e.claimGesture():this.preventDefault(),this},within:function(e,t,i){var n;return e&&(n=t?this.getRelatedTarget():this.getTarget()),!(!n||!1===i&&n===Ext.getDom(e))&&Ext.fly(e).contains(n)},privates:{ieMimeType:{"text/plain":"Text"}},deprecated:{"4.0":{methods:{getPageX:"getX",getPageY:"getY"}}}},function(e){var t,i,n,r={BACKSPACE:8,TAB:9,NUM_CENTER:12,ENTER:13,RETURN:13,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS_LOCK:20,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,PRINT_SCREEN:44,INSERT:45,DELETE:46,ZERO:48,ONE:49,TWO:50,THREE:51,FOUR:52,FIVE:53,SIX:54,SEVEN:55,EIGHT:56,NINE:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,META:91,CONTEXT_MENU:93,NUM_ZERO:96,NUM_ONE:97,NUM_TWO:98,NUM_THREE:99,NUM_FOUR:100,NUM_FIVE:101,NUM_SIX:102,NUM_SEVEN:103,NUM_EIGHT:104,NUM_NINE:105,NUM_MULTIPLY:106,NUM_PLUS:107,NUM_MINUS:109,NUM_PERIOD:110,NUM_DIVISION:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,WHEEL_PIXEL_SIZE:1,WHEEL_LINE_SIZE:20,WHEEL_PAGE_SIZE:600},s={},o=e.gestureEvents,a=e.prototype;for(i in Ext.apply(o,e.mouseEvents),Ext.apply(o,e.pointerEvents),Ext.apply(o,e.touchEvents),Ext.apply(e,r),Ext.apply(a,r),delete r.RETURN,r)s[r[i]]=i;if(e.keyCodes=a.keyCodes=s,Ext.isIE9m||(document.addEventListener("keydown",e.globalTabKeyDown,!0),document.addEventListener("keyup",e.globalTabKeyUp,!0)),a.getTrueXY=a.getXY,"undefined"!=typeof KeyboardEvent&&!("key"in KeyboardEvent.prototype)){for(a._keys=n={3:"Cancel",6:"Help",8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",28:"Convert",29:"NonConvert",30:"Accept",31:"ModeChange",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",41:"Select",42:"Print",43:"Execute",44:"PrintScreen",45:"Insert",46:"Delete",48:["0",")"],49:["1","!"],50:["2","@"],51:["3","#"],52:["4","$"],53:["5","%"],54:["6","^"],55:["7","&"],56:["8","*"],57:["9","("],91:"OS",93:"ContextMenu",144:"NumLock",145:"ScrollLock",181:"VolumeMute",182:"VolumeDown",183:"VolumeUp",186:[";",":"],187:["=","+"],188:[",","<"],189:["-","_"],190:[".",">"],191:["/","?"],192:["\`","~"],219:["[","{"],220:["\\\\","|"],221:["]","}"],222:["'",'"'],224:"Meta",225:"AltGraph",246:"Attn",247:"CrSel",248:"ExSel",249:"EraseEof",250:"Play",251:"ZoomOut"},t=1;t<25;++t)n[t+111]="F"+t;for(t=0;t<26;++t)n[t]=[String.fromCharCode(t+97),String.fromCharCode(t+65)];a.key=function(){var e=n[this.browserEvent.which||this.keyCode];return e&&"string"!=typeof e&&(e=e[+this.shiftKey]),e}}}),Ext.define("Ext.event.publisher.Dom",{extend:Ext.event.publisher.Publisher,type:"dom",handledDomEvents:[],reEnterCount:0,captureEvents:{animationstart:1,animationend:1,resize:1,focus:1,blur:1},directEvents:{mouseenter:1,mouseleave:1,pointerenter:1,pointerleave:1,MSPointerEnter:1,MSPointerLeave:1,load:1,unload:1,beforeunload:1,error:1,DOMContentLoaded:1,DOMFrameContentLoaded:1,hashchange:1,scroll:1,online:1,offline:1},blockedPointerEvents:{pointerover:1,pointerout:1,pointerenter:1,pointerleave:1,MSPointerOver:1,MSPointerOut:1,MSPointerEnter:1,MSPointerLeave:1},blockedCompatibilityMouseEvents:{mouseenter:1,mouseleave:1},constructor:function(){var e=this,t=Ext.supports.PassiveEventListener;e.listenerOptions=!!t&&{passive:!1},e.captureOptions=!t||{passive:!1,capture:!0},e.bubbleSubscribers={},e.captureSubscribers={},e.directSubscribers={},e.directCaptureSubscribers={},e.delegatedListeners={},e.initHandlers(),Ext.onInternalReady(e.onReady,e),e.callParent(),e.registerDomEvents()},registerDomEvents:function(){var e,t,i=Ext.event.publisher.Publisher.publishersByEvent,n=this.handledDomEvents,r=n.length;for(e=0;e<r;e++)t=n[e],this.handles[t]=1,i[t]=this},onReady:function(){var e,t,i=this.handledDomEvents;if(i)for(t=0,e=i.length;t<e;t++)this.addDelegatedListener(i[t]);Ext.getWin().on("unload",this.destroy,this,{priority:-1e4})},initHandlers:function(){this.onDelegatedEvent=Ext.bind(this.onDelegatedEvent,this),this.onDirectEvent=Ext.bind(this.onDirectEvent,this),this.onDirectCaptureEvent=Ext.bind(this.onDirectCaptureEvent,this)},addDelegatedListener:function(e){this.delegatedListeners[e]=1,this.target.addEventListener(e,this.onDelegatedEvent,this.captureEvents[e]?this.captureOptions:this.listenerOptions)},removeDelegatedListener:function(e){delete this.delegatedListeners[e],this.target.removeEventListener(e,this.onDelegatedEvent,this.captureEvents[e]?this.captureOptions:this.listenerOptions)},addDirectListener:function(e,t,i){t.dom.addEventListener(e,i?this.onDirectCaptureEvent:this.onDirectEvent,i?this.captureOptions:this.listenerOptions)},removeDirectListener:function(e,t,i){t.dom.removeEventListener(e,i?this.onDirectCaptureEvent:this.onDirectEvent,i?this.captureOptions:this.listenerOptions)},subscribe:function(e,t,i,n){var r,s;i&&!this.directEvents[t]?(r=n?this.captureSubscribers:this.bubbleSubscribers,this.handles[t]||this.delegatedListeners[t]||this.addDelegatedListener(t),r[t]?++r[t]:r[t]=1):(r=n?this.directCaptureSubscribers:this.directSubscribers,s=e.id,(r=r[t]||(r[t]={}))[s]?++r[s]:(r[s]=1,this.addDirectListener(t,e,n)))},unsubscribe:function(e,t,i,n){var r,s,o,a;i&&!this.directEvents[t]?(r=this.captureSubscribers,s=this.bubbleSubscribers,(o=n?r:s)[t]&&--o[t],this.handles[t]||s[t]||r[t]||this.removeDelegatedListener(t)):(o=n?this.directCaptureSubscribers:this.directSubscribers,a=e.id,(o=o[t])[a]&&--o[a],o[a]||(delete o[a],this.removeDirectListener(t,e,n)))},getPropagatingTargets:function(e){for(var t=e,i=[];t;)i.push(t),t=t.parentNode||t.defaultView;return i},publish:function(e,t,i){var n,r,s,o,a,l,c,u,d=!1,h=!1;for(i=i||!1,t||(e instanceof Array&&Ext.raise("Propagation targets must be supplied when publishing an array of events."),s=e.target,t=this.captureEvents[e.type]?(o=Ext.cache[s.id])?[o]:[]:this.getPropagatingTargets(s)),n=Ext.Array.from(e),l=t.length,u=n.length,a=0;a<u;a++)r=n[a].type,!d&&this.captureSubscribers[r]&&(d=!0),!h&&this.bubbleSubscribers[r]&&(h=!0);if(d)for(a=l;a--;)if(o=Ext.cache[t[a].id])for(c=0;c<u;c++)e=n[c],this.fire(o,e.type,e,!1,!0),!i&&e.claimed&&(i=!0,c=this.filterClaimed(n,e),u=n.length),e.stopped&&(n.splice(c,1),c--,u--);if(h&&!e.stopped)for(a=0;a<l;a++)if(o=Ext.cache[t[a].id])for(c=0;c<u;c++)e=n[c],this.fire(o,e.type,e,!1,!1),!i&&e.claimed&&this.filterClaimed&&(i=!0,c=this.filterClaimed(n,e),u=n.length),e.stopped&&(n.splice(c,1),c--,u--)},publishDelegatedDomEvent:function(e){this.publish(e)},fire:function(e,t,i,n,r){var s;e.hasListeners[t]&&(s=e.events[t])&&(r&&n?s=s.directCaptures:r?s=s.captures:n&&(s=s.directs),s&&(i.setCurrentTarget(e.dom),s.fire(i,i.target)))},onDelegatedEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDelegatedEvent,this,[e]):this.doDelegatedEvent(e)},doDelegatedEvent:function(e){var t;t=(e=new Ext.event.Event(e)).time,this.isEventBlocked(e)||(this.beforeEvent(e),Ext.frameStartTime=t,this.reEnterCountAdjusted=!1,this.reEnterCount++,this.publishDelegatedDomEvent(e),this.reEnterCountAdjusted||this.reEnterCount--,this.afterEvent(e))},onDirectEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDirectEvent,this,[e,!1]):this.doDirectEvent(e,!1)},onDirectCaptureEvent:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doDirectEvent,this,[e,!0]):this.doDirectEvent(e,!0)},doDirectEvent:function(e,t){var i,n,r=e.currentTarget;i=(e=new Ext.event.Event(e)).time,this.isEventBlocked(e)||(this.beforeEvent(e),Ext.frameStartTime=i,(n=Ext.cache[r.id])&&(this.reEnterCountAdjusted=!1,this.reEnterCount++,this.fire(n,e.type,e,!0,t),this.reEnterCountAdjusted||this.reEnterCount--),this.afterEvent(e))},beforeEvent:function(e){var t,i,n=e.browserEvent,r=Ext.event.publisher.Dom;"touchstart"===n.type&&1===(t=n.touches).length&&(i=t[0],r.lastTouchStartX=i.pageX,r.lastTouchStartY=i.pageY)},afterEvent:function(e){var t=e.browserEvent.type,i=Ext.event.publisher.Dom,n=Ext.GlobalEvents;e.self.pointerEvents[t]&&"mouse"!==e.pointerType&&(i.lastScreenPointerEventTime=Ext.now()),"touchend"===t&&(i.lastTouchEndTime=Ext.now()),this.reEnterCount||n.idleEventMask[t]||Ext.fireIdle()},isEventBlocked:function(e){var t=e.type,i=Ext.event.publisher.Dom,n=Ext.now();return!(!Ext.isGecko||"click"!==e.type||2!==e.button)||(this.blockedPointerEvents[t]&&"mouse"!==e.pointerType||this.blockedCompatibilityMouseEvents[t]&&n-i.lastScreenPointerEventTime<1e3||Ext.supports.TouchEvents&&e.self.mouseEvents[e.type]&&Math.abs(e.pageX-i.lastTouchStartX)<15&&Math.abs(e.pageY-i.lastTouchStartY)<15&&Ext.now()-i.lastTouchEndTime<1e3)},destroy:function(){var e,t=Ext.dom.GarbageCollector;for(e in this.delegatedListeners)this.removeDelegatedListener(e);Ext.Reaper.flush(),t&&t.collect(),this.callParent()},reset:function(){var e=Ext.event.publisher.Dom;this.reEnterCount=0,e.lastScreenPointerEventTime=e.lastTouchEndTime=e.lastTouchStartX=e.lastTouchStartY=void 0}},function(e){var t=document,i=t.defaultView,n=e.prototype;Ext.os.is.iOS&&window.self!==window.top||Ext.browser.is.AndroidStock||!i||!i.addEventListener?n.target=t:n.target=i,e.instance=new e}),Ext.define("Ext.event.publisher.Gesture",{extend:Ext.event.publisher.Dom,type:"gesture",isCancelEvent:{touchcancel:1,pointercancel:1,MSPointerCancel:1},isEndEvent:{mouseup:1,touchend:1,pointerup:1,MSPointerUp:1},handledEvents:[],handledDomEvents:[],constructor:function(e){var t=this,i=t.handledDomEvents,n=Ext.supports,r=n.TouchEvents,s=t.onTouchStart,o=t.onTouchMove,a=t.onTouchEnd;return t.handlers={touchstart:s,touchmove:o,touchend:a,touchcancel:a,pointerdown:s,pointermove:o,pointerup:a,pointercancel:a,MSPointerDown:s,MSPointerMove:o,MSPointerUp:a,MSPointerCancel:a,mousedown:s,mousemove:o,mouseup:a},t.activeTouchesMap={},t.activeTouches=[],t.changedTouches=[],t.recognizers=[],t.eventToRecognizer={},t.cancelEvents=[],r&&(t.onTargetTouchMove=t.onTargetTouchMove.bind(t),t.onTargetTouchEnd=t.onTargetTouchEnd.bind(t)),n.PointerEvents?(i.push("pointerdown","pointermove","pointerup","pointercancel"),t.mousePointerType="mouse"):n.MSPointerEvents?(i.push("MSPointerDown","MSPointerMove","MSPointerUp","MSPointerCancel"),t.mousePointerType=4):r&&i.push("touchstart","touchmove","touchend","touchcancel"),(!i.length||r&&Ext.os.is.Desktop)&&i.push("mousedown","mousemove","mouseup"),t.initConfig(e),t.callParent()},onReady:function(){this.callParent(),Ext.Array.sort(this.recognizers,function(e,t){var i=e.priority,n=t.priority;return n<i?1:i<n?-1:0})},registerRecognizer:function(e){var t,i,n=e.handledEvents,r=n.length;for(e.setOnRecognized(this.onRecognized),e.setCallbackScope(this),i=0;i<r;i++)t=n[i],this.handledEvents.push(t),this.eventToRecognizer[t]=e;this.registerEvents(n),this.recognizers.push(e)},onRecognized:function(e,t,i,n,r){var s,o,a,l,c=i.touches,u=i.changedTouches,d=u.length,h=this.events,f=!h.length,g=this.cancelEvents;if((n=n||{}).type=t,n.target=u[0].target,n.stopped=!1,n.claimed=!1,n.isGesture=!0,i=i.chain(n),!this.gestureTargets){if(1<d){for(s=[],a=0;a<d;a++)l=u[a],s.push(l.targets);o=this.getCommonTargets(s)}else o=u[0].targets;this.gestureTargets=o}r&&e.isSingleTouch&&1<c.length?(i.target=c[0].target,g.push(i)):h.push(i),f&&this.publishGestures()},getCommonTargets:function(e){var t,i,n,r=e[0],s=e.length,o=[],a=1;if(1===s)return r;for(;;){if(!(t=r[r.length-a]))return o;for(n=1;n<s;n++)if((i=e[n])[i.length-a]!==t)return o;o.unshift(t),a++}return o},invokeRecognizers:function(e,t){var i,n,r=this.recognizers,s=r.length;if("onStart"===e)for(i=0;i<s;i++)r[i].isActive=!0;for(i=0;i<s;i++)(n=r[i]).isActive&&!1===n[e].call(n,t)&&(n.isActive=!1)},filterClaimed:function(e,t){var i,n,r,s,o=this.eventToRecognizer,a=t.type,l=o[a];for(s=e.length;s--;)(r=e[s].type)===a?i=s:(n=o[r],(!l||n&&n!==l)&&(e.splice(s,1),i&&i--));return this.claimRecognizer(l,e[0]),i},claimRecognizer:function(e,t){var i,n,r,s=this.recognizers;for(i=0,n=s.length;i<n;i++)(r=s[i])!==e&&(r.isActive=!1,r.cancel(t));this.events.length&&this.publishGestures(!0)},publishGestures:function(e){var t=this,i=t.cancelEvents,n=t.events,r=t.gestureTargets;i.length&&(t.cancelEvents=[],t.publish(i,t.getPropagatingTargets(i[0].target),!0)),n.length&&(t.events=[],t.gestureTargets=null,t.publish(n,r||t.getPropagatingTargets(n[0].target),e))},updateTouches:function(e){var t,i,n,r,s,o,a,l,c=e.browserEvent,u=e.type,d=c.changedTouches||[c],h=this.activeTouches,f=this.activeTouchesMap,g=[];for(s=0,o=d.length;s<o;s++)(n=f[i="identifier"in(t=d[s])?t.identifier:"pointerId"in t?t.pointerId:1])||(r=Ext.event.Event.resolveTextNode(t.target),n=f[i]={identifier:i,target:r,targets:this.getPropagatingTargets(r)},h.push(n)),(this.isEndEvent[u]||this.isCancelEvent[u])&&(delete f[i],Ext.Array.remove(h,n)),a=Math.round(t.pageX),l=Math.round(t.pageY),n.pageX=a,n.pageY=l,n.point=new Ext.util.Point(a,l),g.push(n);e.touches=Ext.Array.clone(h),e.changedTouches=g},publishDelegatedDomEvent:function(e){!e.button||e.button<1?(this.events=[e],e.browserEvent.$extHandled=!0,this.handlers[e.type].call(this,e)):this.callParent([e])},onTouchStart:function(e){var t=this,i=e.target,n=e.browserEvent.touches;"touchstart"===e.browserEvent.type&&(i.addEventListener("touchmove",t.onTargetTouchMove),i.addEventListener("touchend",t.onTargetTouchEnd),i.addEventListener("touchcancel",t.onTargetTouchEnd)),n&&n.length<=t.activeTouches.length&&t.removeGhostTouches(n),t.updateTouches(e),t.isStarted||(Ext.enableGarbageCollector&&Ext.dom.GarbageCollector.pause(),t.isStarted=!0,t.invokeRecognizers("onStart",e)),t.invokeRecognizers("onTouchStart",e),t.publishGestures()},onTouchMove:function(e){var t=this.mousePointerType,i=this.isStarted;if(!i&&"mouse"===e.pointerType||this.updateTouches(e),i){if(t&&e.browserEvent.pointerType===t&&0===e.buttons)return e.type=Ext.dom.Element.prototype.eventMap.touchend,e.button=0,void this.onTouchEnd(e);0<e.changedTouches.length&&this.invokeRecognizers("onTouchMove",e)}this.publishGestures()},onTouchEnd:function(e){var t,i=this,n=i.isStarted;if(!n&&"mouse"===e.pointerType||i.updateTouches(e),n){t=i.activeTouches.length;try{i.invokeRecognizers(i.isCancelEvent[e.type]?"onTouchCancel":"onTouchEnd",e)}finally{try{t||(i.isStarted=!1,i.invokeRecognizers("onEnd",e))}finally{try{i.publishGestures()}finally{t||Ext.enableGarbageCollector&&Ext.dom.GarbageCollector.resume(),i.reEnterCountAdjusted=!0,i.reEnterCount--}}}}else i.publishGestures()},onTargetTouchMove:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doTargetTouchMove,this,[e]):this.doTargetTouchMove(e)},doTargetTouchMove:function(e){Ext.getBody().contains(e.target)||(this.reEnterCountAdjusted=!1,this.reEnterCount++,this.onTouchMove(new Ext.event.Event(e)),this.reEnterCountAdjusted||this.reEnterCount--)},onTargetTouchEnd:function(e){Ext.elevateFunction?Ext.elevateFunction(this.doTargetTouchEnd,this,[e]):this.doTargetTouchEnd(e)},doTargetTouchEnd:function(e){var t=e.target;t.removeEventListener("touchmove",this.onTargetTouchMove),t.removeEventListener("touchend",this.onTargetTouchEnd),t.removeEventListener("touchcancel",this.onTargetTouchEnd),Ext.getBody().contains(t)||(this.reEnterCountAdjusted=!1,this.reEnterCount++,this.onTouchEnd(new Ext.event.Event(e)),this.reEnterCountAdjusted||this.reEnterCount--)},reset:function(){var e,t,i=this.recognizers,n=i.length;for(this.activeTouchesMap={},this.activeTouches=[],this.changedTouches=[],this.isStarted=!1,this.gestureTargets=null,this.events=[],this.cancelEvents=[],e=0;e<n;e++)(t=i[e]).reset(),t.isActive=!1;this.callParent()},privates:{removeGhostTouches:function(e){var t,i,n,r={},s=e.length,o=this.activeTouches,a=this.activeTouchesMap;for(t=0;t<s;++t)r[e[t].identifier]=!0;for(t=o.length;t--;)e[i=(n=o[t]).identifier]||(Ext.Array.remove(o,n),delete a[i])}}},function(n){var e=Event.prototype,r=e.stopPropagation;r&&(e.stopPropagation=function(){var e,t=n.instance,i=this.type;!this.$extHandled&&t.handles[i]&&(e=new Ext.event.Event(this),t.updateTouches(e),t.invokeRecognizers("onTouchCancel",e),t.reset(),t.reEnterCountAdjusted=!0),r.apply(this,arguments)}),n.instance=Ext.$gesturePublisher=new n}),Ext.define("Ext.mixin.Templatable",{extend:Ext.Mixin,mixinConfig:{id:"templatable"},referenceAttributeName:"reference",referenceSelector:"[reference]",getElementConfig:function(){return{reference:"element"}},getElementTemplate:function(){var e=document.createDocumentFragment();return e.appendChild(Ext.Element.create(this.getElementConfig(),!0)),e},initElement:function(){var e=this.self.prototype;e.elementTemplate=this.getElementTemplate(),e.initElement=e.doInitElement,this.initElement.apply(this,arguments)},linkElement:function(e,t){this.link(e,t)},doInitElement:function(){var e,t,i,n,r,s=this.referenceAttributeName;for(t=0,i=(e=this.elementTemplate.cloneNode(!0).querySelectorAll(this.referenceSelector)).length;t<i;t++)r=(n=e[t]).getAttribute(s),n.removeAttribute(s),this.linkElement(r,n)}}),Ext.define("Ext.TaskQueue",{singleton:!0,pending:!1,mode:!0,protectedReadQueue:[],protectedWriteQueue:[],readQueue:[],writeQueue:[],readRequestId:0,writeRequestId:0,timer:null,constructor:function(){var e=this;e.run=e.run.bind(e),e.runProtected=Ext.Function.bind(e.run,e,[e.protectedReadQueue,e.protectedWriteQueue,"runProtected"]),e.runProtected.$skipTimerCheck=!0,Ext.os.is.iOS&&(e.watch.$skipTimerCheck=!0,e.watchdogTimer=Ext.interval(this.watch,500,this))},requestRead:function(e,t,i){var n={id:++this.readRequestId,fn:e,scope:t,args:i};return!0===arguments[3]?(this.protectedReadQueue.push(n),this.request(!0,"runProtected")):(this.readQueue.push(n),this.request(!0)),n.id},cancelRead:function(e){this.cancelRequest(this.readQueue,e,!0)},requestWrite:function(e,t,i){var n={id:++this.writeRequestId,fn:e,scope:t,args:i};return!0===arguments[3]?(this.protectedWriteQueue.push(n),this.request(!1,"runProtected")):(this.writeQueue.push(n),this.request(!1)),n.id},cancelWrite:function(e){this.cancelRequest(this.writeQueue,e,!1)},request:function(e,t){var i=this,n=i.mode;i.pending||(i.pendingTime=Date.now(),i.pending=!0,i.mode=e,i.timer=e?Ext.defer(i[t]||i.run,1):Ext.raf(i[t]||i.run)),i.mode===e&&i.timer&&(n?Ext.undefer(i.timer):Ext.unraf(i.timer),i.timer=e?Ext.defer(i[t]||i.run,1):Ext.raf(i[t]||i.run))},cancelRequest:function(e,t,i){var n;for(n=0;n<e.length;n++)if(e[n].id===t){e.splice(n,1);break}!e.length&&this.mode===i&&this.timer&&Ext.undefer(this.timer)},watch:function(){this.pending&&500<=Date.now()-this.pendingTime&&this.run()},run:function(e,t,i){var n,r,s,o,a,l,c,u,d=null;for(e=e||this.readQueue,t=t||this.writeQueue,this.pending=!1,this.pending=this.timer=!1,this.mode?(n=e,0<t.length&&(d=!1)):(n=t,0<e.length&&(d=!0)),r=n.slice(),c=n.length=0,u=r.length;c<u;c++)o=(s=r[c]).fn,a=s.scope,l=s.args,a&&(a.destroying||a.destroyed)||("string"==typeof o&&(o=a[o]),l?o.apply(a,l):o.call(a));r.length=0,null!==d&&this.request(d,i)},clear:function(){var e=this.timer;e&&(this.mode?Ext.undefer(e):Ext.unraf(e)),this.readQueue.length=this.writeQueue.length=0,this.pending=this.timer=!1,this.mode=!0},privates:{flush:function(){for(var e=this.mode;this.readQueue.length||this.writeQueue.length;)e?Ext.undefer(this.timer):Ext.unraf(this.timer),this.run();this.mode=!0}}}),Ext.define("Ext.util.sizemonitor.Abstract",{mixins:[Ext.mixin.Templatable],config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},width:null,height:null,contentWidth:null,contentHeight:null,constructor:function(e){this.refresh=this.refresh.bind(this),this.info={width:0,height:0,contentWidth:0,contentHeight:0,flag:0},this.initElement(),this.initConfig(e),this.bindListeners(!0)},bindListeners:Ext.emptyFn,applyElement:function(e){if(e)return Ext.get(e)},updateElement:function(e){e.append(this.detectorsContainer,!0),e.addCls(Ext.baseCSSPrefix+"size-monitored")},applyArgs:function(e){return e.concat([this.info])},refreshMonitors:Ext.emptyFn,forceRefresh:function(){Ext.TaskQueue.requestRead("refresh",this)},getContentBounds:function(){return this.detectorsContainer.getBoundingClientRect()},getContentWidth:function(){return this.detectorsContainer.clientWidth},getContentHeight:function(){return this.detectorsContainer.clientHeight},refreshSize:function(){var e=this.getElement();if(!e||e.destroyed)return!1;var t,i=this,n=e.measure(),r=n.width,s=n.height,o=i.getContentWidth(),a=i.getContentHeight(),l=i.contentWidth,c=i.contentHeight,u=i.info,d=!1;return i.width=r,i.height=s,0<(t=(l!==(i.contentWidth=o)?1:0)+(c!==(i.contentHeight=a)?2:0))&&(u.width=r,u.height=s,u.contentWidth=o,u.contentHeight=a,u.flag=t,d=!0,i.getCallback().apply(i.getScope(),i.getArgs())),d},refresh:function(){this.destroying||this.destroyed||(this.refreshSize(),Ext.TaskQueue.requestWrite("refreshMonitors",this))},destroy:function(){var e=this.getElement();this.bindListeners(!1),e&&!e.destroyed&&e.removeCls(Ext.baseCSSPrefix+"size-monitored"),delete this._element,this.refresh=null,this.callParent()}}),Ext.define("Ext.util.sizemonitor.Scroll",{extend:Ext.util.sizemonitor.Abstract,getElementConfig:function(){return{reference:"detectorsContainer",classList:[Ext.baseCSSPrefix+"size-monitors","scroll"],children:[{reference:"expandMonitor",className:"expand"},{reference:"shrinkMonitor",className:"shrink"}]}},constructor:function(e){this.onScroll=this.onScroll.bind(this),this.callParent(arguments)},bindListeners:function(e){var t=e?"addEventListener":"removeEventListener";this.expandMonitor[t]("scroll",this.onScroll,!0),this.shrinkMonitor[t]("scroll",this.onScroll,!0)},onScroll:function(){this.destroyed||Ext.TaskQueue.requestRead("refresh",this)},refreshMonitors:function(){var e=this.expandMonitor,t=this.shrinkMonitor;e&&!e.destroyed&&(e.scrollLeft=1e6,e.scrollTop=1e6),t&&!t.destroyed&&(t.scrollLeft=1e6,t.scrollTop=1e6)},destroy:function(){this.onScroll=null,this.callParent()}}),Ext.define("Ext.util.SizeMonitor",{constructor:function(e){return new Ext.util.sizemonitor.Scroll(e)}}),Ext.define("Ext.event.publisher.ElementSize",{extend:Ext.event.publisher.Publisher,type:"size",handledEvents:["resize"],constructor:function(){this.monitors={},this.subscribers={},this.callParent(arguments)},subscribe:function(e){var t=e.id,i=this.subscribers,n=this.monitors;return i[t]?++i[t]:(i[t]=1,n[t]=new Ext.util.SizeMonitor({element:e,callback:this.onElementResize,scope:this,args:[e]})),e.on("painted","forceRefresh",n[t]),!0},unsubscribe:function(e){var t,i=e.id,n=this.subscribers,r=this.monitors;n[i]&&!--n[i]&&(delete n[i],t=r[i],e.un("painted","forceRefresh",t),t.destroy(),delete r[i]),e.activeRead&&Ext.TaskQueue.cancelRead(e.activeRead)},fireElementResize:function(e,t){delete e.activeRead,this.fire(e,"resize",[e,t])},onElementResize:function(e,t){e.activeRead||(e.activeRead=Ext.TaskQueue.requestRead("fireElementResize",this,[e,t],!!e.$skipResourceCheck))},privates:{syncRefresh:function(e){var t,i,n,r;for(n=0,r=(e=Ext.Array.from(e)).length;n<r;++n)"string"!=typeof(t=e[n])&&(t=t.id),(i=this.monitors[t])&&i.forceRefresh();Ext.TaskQueue.flush(),Ext.Function.fireElevatedHandlers()}}},function(e){e.instance=new e}),Ext.define("Ext.util.paintmonitor.Abstract",{config:{element:null,callback:Ext.emptyFn,scope:null,args:[]},eventName:"",monitorClass:"",constructor:function(e){this.onElementPainted=this.onElementPainted.bind(this),this.initConfig(e)},bindListeners:function(e){this.monitorElement[e?"addEventListener":"removeEventListener"](this.eventName,this.onElementPainted,!0)},applyElement:function(e){if(e)return Ext.get(e)},updateElement:function(e){this.monitorElement=Ext.Element.create({classList:[Ext.baseCSSPrefix+"paint-monitor",this.monitorClass]},!0),e.appendChild(this.monitorElement,!0),e.addCls(Ext.baseCSSPrefix+"paint-monitored"),this.bindListeners(!0)},onElementPainted:function(){},destroy:function(){var e=this.monitorElement,t=e.parentNode,i=this.getElement();this.bindListeners(!1),delete this.monitorElement,i&&!i.destroyed&&(i.removeCls(Ext.baseCSSPrefix+"paint-monitored"),delete this._element),t&&t.removeChild(e),this.callParent()}}),Ext.define("Ext.util.paintmonitor.CssAnimation",{extend:Ext.util.paintmonitor.Abstract,eventName:Ext.browser.is.WebKit?"webkitAnimationEnd":"animationend",monitorClass:"cssanimation",onElementPainted:function(e){e.animationName===Ext.baseCSSPrefix+"paint-monitor-helper"&&this.getCallback().apply(this.getScope(),this.getArgs())}}),Ext.define("Ext.util.PaintMonitor",{constructor:function(e){return new Ext.util.paintmonitor.CssAnimation(e)}}),Ext.define("Ext.event.publisher.ElementPaint",{extend:Ext.event.publisher.Publisher,type:"paint",handledEvents:["painted"],constructor:function(){this.monitors={},this.subscribers={},this.callParent(arguments)},subscribe:function(e){var t=e.id,i=this.subscribers;i[t]?++i[t]:(i[t]=1,this.monitors[t]=new Ext.util.PaintMonitor({element:e,callback:this.onElementPainted,scope:this,args:[e]}))},unsubscribe:function(e){var t=e.id,i=this.subscribers,n=this.monitors;i[t]&&!--i[t]&&(delete i[t],n[t].destroy(),delete n[t]),e.activeRead&&Ext.TaskQueue.cancelRead(e.activeRead)},fireElementPainted:function(e){delete e.activeRead,this.fire(e,"painted",[e])},onElementPainted:function(e){e.activeRead||(e.activeRead=Ext.TaskQueue.requestRead("fireElementPainted",this,[e],!!e.$skipResourceCheck))}},function(e){e.instance=new e}),Ext.define("Ext.dom.Element",function(O){function t(e,t){return t.charAt(1).toUpperCase()}function c(e){return parseFloat(e)||0}var e,u,d,s,h,n,f,a,g,r,o,l,p=window,m=document,x=m.documentElement,y=p.top,v=[],E="position",b=/\\w/g,C=/\\s+/,S=/[\\s]+/,i=/^(?:transparent|(?:rgba[(](?:\\s*\\d+\\s*[,]){3}\\s*0\\s*[)]))$/i,w=/\\?$/,T=/top/i,P={},I={t:"border-top-width",r:"border-right-width",b:"border-bottom-width",l:"border-left-width"},A={t:"padding-top",r:"padding-right",b:"padding-bottom",l:"padding-left"},k={t:"margin-top",r:"margin-right",b:"margin-bottom",l:"margin-left"},D={b:"backward",back:"backward",f:"forward"},R=[A.l,A.r,A.t,A.b],M=[I.l,I.r,I.t,I.b],F=/\\d+$/,L=/\\d+(px|r?em|%|vh|vw|vmin|vmax|en|ch|ex|pt|in|cm|mm|pc)$/i,B=/^-ms-/,N=/(-[a-z])/gi,V=/([a-z0-9\\-]+)\\s*:\\s*([^;\\s]+(?:\\s*[^;\\s]+)*);?/gi,H=/^\\d+(?:\\.\\d*)?px$/i,z=/(%|r?em|auto|vh|vw|vmin|vmax|ch|ex)$/i,G={},$="originalDisplay",_=function(e,t){var i,n,r;if(1===e.nodeType&&(e._extData=null,t))for(n=0,r=(i=e.childNodes).length;n<r;++n)_(i[n],t)},W=Ext.baseCSSPrefix+"hidden-opacity",Y=Ext.baseCSSPrefix+"hidden-visibility",U=Ext.baseCSSPrefix+"hidden-display",X=Ext.baseCSSPrefix+"hidden-offsets",K=Ext.baseCSSPrefix+"hidden-clip",j=0,q=0,Z=!1,Q=!1,J=/text|password|search|tel|url/i;try{e=y.__elementIdCounter__,y.__elementIdCounter__=e}catch(e){y=p}return y.__elementIdCounter__=e=(y.__elementIdCounter__||0)+1,u="ext-window-"+e,d="ext-document-"+e,Object.freeze&&Object.freeze(v),{alternateClassName:["Ext.Element"],mixins:[Ext.util.Positionable,Ext.mixin.Observable],observableType:"element",isElement:!0,skipGarbageCollection:!0,$applyConfigs:!0,identifiablePrefix:"ext-element-",_selectDir:D,styleHooks:{transform:{set:function(e,t,i){var n,r="";if("string"!=typeof t){for(n in t)r&&(r+=" "),0===n.indexOf("translate")?r+=n+"("+O.addUnits(t[n],"px")+")":r+=n+"("+t[n]+")";t=r}e.style.transform=t}}},validIdRe:Ext.validIdRe,blockedEvents:Ext.supports.EmulatedMouseOver?{mouseover:1}:{},longpressEvents:{longpress:1,taphold:1},constructor:function(e){var t,i=this;if("string"==typeof e&&(e=m.getElementById(e)),!e)return Ext.raise("Invalid domNode reference or an id of an existing domNode: "+e),null;Ext.cache[e.id]&&Ext.raise("Element cache already contains an entry for id '"+e.id+"'.  Use Ext.get() to create or retrieve Element instances."),(t=(i.dom=e).id)||(e.id=t=i.generateAutoId()),i.id=t,i.validIdRe.test(i.id)||Ext.raise('Invalid Element "id": "'+i.id+'"'),i.el=i,(Ext.cache[t]=i).longpressListenerCount=0,i.mixins.observable.constructor.call(i)},inheritableStatics:{cache:Ext.cache={},editableSelector:'input,textarea,[contenteditable="true"]',VISIBILITY:1,DISPLAY:2,OFFSETS:3,CLIP:4,OPACITY:5,minKeyboardHeight:100,unitRe:L,useDelegatedEvents:!0,validNodeTypes:{1:1,9:1},namespaceURIs:{html:"http://www.w3.org/1999/xhtml",svg:"http://www.w3.org/2000/svg"},selectableCls:Ext.baseCSSPrefix+"selectable",unselectableCls:Ext.baseCSSPrefix+"unselectable",maxRippleDiameter:75,addUnits:function(e,t){return"number"==typeof e?e+(t||"px"):""===e||"auto"===e||null==e?e||"":F.test(e)?e+(t||"px"):L.test(e)?e:(Ext.isString(e)&&0===e.indexOf("calc")||Ext.Logger.warn("Warning, size detected ("+e+") not a valid property value on Element.addUnits."),e||"")},create:function(e,t,i){var n,r,s,o,a,l,c,u,d,h;if((e=e||{}).isElement)return t?e.dom:e;if("nodeType"in e)return t?e:Ext.get(e);if("string"==typeof e)return m.createTextNode(e);for(l in o=(o=e.tag)||"div",s=(r=(h=e.namespace||i)?m.createElementNS(this.namespaceURIs[h]||h,o):m.createElement(o)).style,e)if("tag"!==l&&"namespace"!==l)switch(a=e[l],l){case"style":if("string"==typeof a)r.setAttribute(l,a);else for(c in a)s[c]=a[c];break;case"className":case"cls":d=a.split(C),n=n?n.concat(d):d;break;case"classList":n=n?n.concat(a):a;break;case"text":r.textContent=a;break;case"html":r.innerHTML=a;break;case"hidden":n?n.push(U):n=[U];break;case"children":if(null!=a)for(c=0,u=a.length;c<u;c++)r.appendChild(this.create(a[c],!0,h));break;default:null!=a&&r.setAttribute(l,a)}return n&&(r.className=n.join(" ")),t?r:this.get(r)},fly:function(e,t){return Ext.fly(e,t)},fromPoint:function(){var r;if(Ext.isIE||Ext.isEdge)try{r=window.self!==window.top}catch(e){r=!0}return function(e,t,i){var n=null;return!(n=m.elementFromPoint(e,t))&&r&&(n=m.elementFromPoint(e,t)),i?n:Ext.get(n)}}(),fromPagePoint:function(e,t,i){var n=Ext.getDoc().getScroll();return O.fromPoint(e-n.left,t-n.top,i)},get:function(e){var t,i,n,r,s,o,a,l=Ext.cache;if(!e)return null;function c(e){Ext.raise("DOM element with id "+e+" in Element cache is not the same as element in the DOM. Make sure to clean up Element instances using destroy()")}if(e.isFly&&(e=e.dom),"string"==typeof e){if(n=e,l.hasOwnProperty(n)){if((r=l[n]).skipGarbageCollection||!Ext.isGarbage(r.dom))return(i=Ext.getElementById?Ext.getElementById(n):m.getElementById(n))&&i!==r.dom&&c(n),r;r.destroy()}if(n===u)return O.get(p);if(n===d)return O.get(m);if(i=Ext.getElementById?Ext.getElementById(n):m.getElementById(n))return new O(i)}if((t=e.nodeType)?(s=9===t,a=this.validNodeTypes[t]):o=e.window==e,a||o){if(n=e.id,e===m?e.id=n=d:e==p&&(e.id=n=u),l.hasOwnProperty(n)){if((r=l[n]).skipGarbageCollection||e===r.dom||!Ext.isGarbage(r.dom))return e!==r.dom&&c(n),r;r.destroy()}return e=new O(e),(o||s)&&(e.skipGarbageCollection=!0),e}return e.isElement||e.isComposite?e:Ext.isIterable(e)?this.select(e):null},getActiveElement:function(e){var t=m.activeElement;return t&&t.focus||(t=m.body),e?Ext.get(t):t},getDocumentHeight:function(){return Math.max(Ext.isStrict?x.scrollHeight:m.body.scrollHeight,this.getViewportHeight())},getDocumentWidth:function(){return Math.max(Ext.isStrict?x.scrollWidth:m.body.scrollWidth,this.getViewportWidth())},getOrientation:function(){return Ext.supports.OrientationChange?0==p.orientation?"portrait":"landscape":p.innerHeight>p.innerWidth?"portrait":"landscape"},getViewportHeight:function(){var e=O._viewportHeight;return Ext.isIE9m?m.documentElement.clientHeight:null!=e?e:x.clientHeight},getViewportWidth:function(){var e=O._viewportWidth;return Ext.isIE9m?m.documentElement.clientWidth:null!=e?e:x.clientWidth},getViewportScale:function(){return(Ext.isiOS||Ext.isAndroid?1:y.devicePixelRatio||y.screen.deviceXDPI/y.screen.logicalXDPI)*this.getViewportTouchScale()},getViewportTouchScale:function(e){var t,i=1;return!e&&(t=this._viewportTouchScale)?t:(Ext.isIE10p||Ext.isEdge||Ext.isiOS?i=x.offsetWidth/p.innerWidth:Ext.isChromeMobile&&(i=y.outerWidth/y.innerWidth),i)},getViewSize:function(){return{width:O.getViewportWidth(),height:O.getViewportHeight()}},hasUnit:function(e){return!(!e||!L.test(e))},isRelativeUnit:function(e){return!e||z.test(e)},maskIframes:function(){var e=document.getElementsByTagName("iframe"),t=new Ext.dom.Fly;Ext.each(e,function(e){t.attach(e.parentNode).mask().setStyle("background-color","transparent")})},normalize:function(e){return G[e]||(G[e]=e.replace(B,"ms-").replace(N,t))},_onWindowFocusChange:function(e){Ext.fly(e.target).is(O.editableSelector)&&(j=new Date,Z="focusin"===e.type||"pointerup"===e.type)},_onWindowResize:function(){var e,t,i=x.clientWidth,n=x.clientHeight,r=new Date;e=i-O._documentWidth,t=n-O._documentHeight,O._documentWidth=i,O._documentHeight=n,(r-j<1e3||r-q<1e3)&&0==e&&Z&&t<=-O.minKeyboardHeight?Q=!0:(Q&&0==e&&t>=O.minKeyboardHeight&&(Q=!1,q=new Date),Q||(O._viewportWidth=i,O._viewportHeight=n))},parseBox:function(e){var t,i,n;return"number"==(t=typeof(e=e||0))?{top:e,right:e,bottom:e,left:e}:"string"!=t?e:(1===(n=(i=e.split(" ")).length)?i[1]=i[2]=i[3]=i[0]:2===n?(i[2]=i[0],i[3]=i[1]):3===n&&(i[3]=i[1]),{top:parseFloat(i[0])||0,right:parseFloat(i[1])||0,bottom:parseFloat(i[2])||0,left:parseFloat(i[3])||0})},parseStyles:function(e){var t,i={};if(e)for(V.lastIndex=0;t=V.exec(e);)i[t[1]]=t[2]||"";return i},select:function(e,t,i){return Ext.fly(i||m).select(e,t)},query:function(e,t,i){return Ext.fly(i||m).query(e,t)},unitizeBox:function(e,t){return e=this.parseBox(e),this.addUnits(e.top,t)+" "+this.addUnits(e.right,t)+" "+this.addUnits(e.bottom,t)+" "+this.addUnits(e.left,t)},unmaskIframes:function(){var e=document.getElementsByTagName("iframe"),t=new Ext.dom.Fly;Ext.each(e,function(e){t.attach(e.parentNode).unmask()})},serializeForm:function(e){var t,i,n,r,s,o,a,l,c,u=e.elements||(m.forms[e]||Ext.getDom(e)).elements,d=!1,h=encodeURIComponent,f="",g=u.length;for(o=0;o<g;o++)if(i=(t=u[o]).name,n=t.type,r=t.options,!t.disabled&&i)if(/select-(one|multiple)/i.test(n))for(l=r.length,a=0;a<l;a++)(c=r[a]).selected&&(s=c.hasAttribute("value"),f+=Ext.String.format("{0}={1}&",h(i),h(s?c.value:c.text)));else/file|undefined|reset|button/i.test(n)||/radio|checkbox/i.test(n)&&!t.checked||"submit"===n&&d||(f+=h(i)+"="+h(t.value)+"&",d=/submit/i.test(n));return f.substr(0,f.length-1)},getCommonAncestor:function(e,t,i){for((n=n||new Ext.dom.Fly).attach(Ext.getDom(e));!n.isAncestor(t);){if(!n.dom.parentNode){n.attach(m.body);break}n.attach(n.dom.parentNode)}return i?n.dom:Ext.get(n)}},selectable:function(){return this.dom.unselectable="",this.removeCls(O.unselectableCls),this.addCls(O.selectableCls),this},unselectable:function(){return Ext.isOpera&&(this.dom.unselectable="on"),this.removeCls(O.selectableCls),this.addCls(O.unselectableCls),this},statics:{tabbableSelector:Ext.supports.CSS3NegationSelector?'a[href],button,iframe,input,select,textarea,[tabindex]:not([tabindex="-1"]),[contenteditable="true"]':'a[href],button,iframe,input,select,textarea,[tabindex],[contenteditable="true"]',naturallyFocusableTags:{BUTTON:!0,IFRAME:!0,EMBED:!0,INPUT:!0,OBJECT:!0,SELECT:!0,TEXTAREA:!0,HTML:!!Ext.isIE,BODY:!Ext.isIE},naturallyTabbableTags:{BUTTON:!0,IFRAME:!0,INPUT:!0,SELECT:!0,TEXTAREA:!0,OBJECT:!!Ext.isIE8m},inputTags:{INPUT:!0,TEXTAREA:!0},tabbableSavedCounterAttribute:"data-tabindex-counter",tabbableSavedValueAttribute:"data-tabindex-value",splitCls:function(e){return"string"==typeof e&&(e=e.split(C)),e}},_init:function(e){e.tabbableSelector+=",["+e.tabbableSavedCounterAttribute+"]"},addCls:function(e,t,i){return this.replaceCls(null,e,t,i)},addClsOnClick:function(e,t,i){var n=this,r=Ext.isFunction(t);return n.on("mousedown",function(){if(r&&!1===t.call(i||n,n))return!1;n.addCls(e),Ext.getDoc().on({mouseup:function(){n.dom&&n.removeCls(e)},single:!0})}),n},addClsOnFocus:function(e,t,i){var n=this,r=Ext.isFunction(t);return n.on("focus",function(){if(r&&!1===t.call(i||n,n))return!1;n.addCls(e)}),n.on("blur",function(){n.dom&&n.removeCls(e)}),n},addClsOnOver:function(e,t,i){var n=this,r=Ext.isFunction(t);return n.hover(function(){r&&!1===t.call(i||n,n)||n.addCls(e)},function(){n.removeCls(e)}),n},addStyles:function(e,t){var i,n,r=0,s=(e||"").match(b),o=[],a=s.length;if(1===a)r=parseFloat(this.getStyle(t[s[0]]))||0;else if(a){for(n=0;n<a;n++)i=s[n],o.push(t[i]);for(o=this.getStyle(o),n=0;n<a;n++)i=s[n],r+=parseFloat(o[t[i]])||0}return r},addUnits:function(e,t){return O.addUnits(e,t)},animate:function(e){return(e=new Ext.fx.Animation(e)).setElement(this),(this._activeAnimation=e).on({animationend:this._onAnimationEnd,scope:this}),Ext.Animator.run(e),e},_onAnimationEnd:function(){this._activeAnimation=null},getActiveAnimation:function(){return this._activeAnimation},append:function(){return this.appendChild.apply(this,arguments)},appendChild:function(e,t){var i,n,r;if(e.nodeType||e.dom||"string"==typeof e)return e=Ext.getDom(e),this.dom.appendChild(e),t?e:Ext.get(e);if(e.length){for(i=Ext.fly(m.createDocumentFragment()),n=e.length,r=0;r<n;r++)i.appendChild(e[r],t);return e=Ext.Array.toArray(i.dom.childNodes),this.dom.appendChild(i.dom),t?e:new Ext.dom.CompositeElementLite(e)}return this.createChild(e,null,t)},appendTo:function(e){return Ext.getDom(e).appendChild(this.dom),this},applyStyles:function(e){return e&&("function"==typeof e&&(e=e.call()),"string"==typeof e&&(e=O.parseStyles(e)),"object"==typeof e&&this.setStyle(e)),this},blur:function(){var e=this.dom;if(e===m.body)return this.focus(void 0,e);try{e.blur()}catch(e){}return this},cacheScrollValues:function(){var e,t,i,n,r=[],s=[];for(h=h||new Ext.dom.Fly,i=0,n=(e=this.query("*")).length;i<n;i++)(0<(t=e[i]).scrollTop||0!==t.scrollLeft)&&(s.push(t),r.push(h.attach(t).getScroll()));return function(){var e,t,i;for(t=0,i=s.length;t<i;t++)e=r[t],h.attach(s[t]),h.setScrollLeft(e.left),h.setScrollTop(e.top)}},center:function(e){return this.alignTo(e||m,"c-c")},child:function(e,t){var i;return Ext.supports.Selectors2?this.selectNode(":scope>"+e,!!t):(i=null!=this.id?this.id:Ext.get(this).id,this.selectNode(Ext.makeIdSelector(i)+" > "+e,!!t))},clone:function(e,t){var i=this.dom.cloneNode(e);return Ext.supports.CloneNodeCopiesExpando&&_(i,e),t?i:Ext.get(i)},constrainScrollLeft:function(e){var t=this.dom;return Math.max(Math.min(e,t.scrollWidth-t.clientWidth),0)},constrainScrollTop:function(e){var t=this.dom;return Math.max(Math.min(e,t.scrollHeight-t.clientHeight),0)},createChild:function(e,t,i){return e=e||{tag:"div"},t?Ext.DomHelper.insertBefore(t,e,!0!==i):Ext.DomHelper.append(this.dom,e,!0!==i)},contains:function(e){if(!e)return!1;var t=Ext.getDom(e);return t===this.dom||this.isAncestor(t)},destroy:function(){var e=this,t=e.dom;e.destroyed?Ext.Logger.warn('Cannot destroy Element "'+e.id+'". Already destroyed.'):(e.resumeFocusEventsTimer&&(Ext.unasap(e.resumeFocusEventsTimer),e.resumeFocusEventsTimer=null),e.repaintTimer&&(e.repaintTimer=Ext.undefer(e.repaintTimer)),e.deferFocusTimer&&(e.deferFocusTimer=Ext.undefer(e.deferFocusTimer)),t&&(t===m.body?Ext.raise("Cannot destroy body element."):t===m?Ext.raise("Cannot destroy document object."):t===p&&Ext.raise("Cannot destroy window object")),t&&t.parentNode&&t.parentNode.removeChild(t),e.$ripples&&e.destroyAllRipples(),e.collect())},detach:function(){var e=this.dom,t=this.component;return e&&e.parentNode&&"BODY"!==e.tagName&&(t&&t.revertFocus(),e.parentNode.removeChild(e)),this},disableShadow:function(){var e=this.shadow;e&&(e.hide(),e.disabled=!0)},disableShim:function(){var e=this.shim;e&&(e.hide(),e.disabled=!0)},doReplaceWith:function(e){var t=this.dom;t.parentNode.replaceChild(Ext.getDom(e),t)},doScrollIntoView:function(e,t,i,n,r,s){h=h||new Ext.dom.Fly;var o=this.dom,a=h.attach(e)[r](),l=e.scrollTop,c=this.getScrollIntoViewXY(e,a,l),u=c.x,d=c.y;return n&&(i?i=Ext.apply({listeners:{afteranimate:function(){h.attach(o).highlight()}}},i):h.attach(o).highlight()),d!==l&&h.attach(e).scrollTo("top",d,i),!1!==t&&u!==a&&h.attach(e)[s]("left",u,i),this},down:function(e,t){return this.selectNode(e,!!t)},enableShadow:function(e,t){var i=this.shadow||(this.shadow=new Ext.dom.Shadow(Ext.apply({target:this},e))),n=this.shim;n&&(n.offsets=i.outerOffsets,(n.shadow=i).shim=n),!0===t||!1!==t&&this.isVisible()?i.show():i.hide(),i.disabled=!1},enableShim:function(e,t){var i=this.shim||(this.shim=new Ext.dom.Shim(Ext.apply({target:this},e))),n=this.shadow;return n&&(i.offsets=n.outerOffsets,(i.shadow=n).shim=i),!0===t||!1!==t&&this.isVisible()?i.show():i.hide(),i.disabled=!1,i},findParent:function(e,t,i){var n=this.dom,r=x,s=0;for(t||0===t?"number"!=typeof t&&(r=Ext.getDom(t),t=Number.MAX_VALUE):t=50;n&&1===n.nodeType&&s<t&&n!==r;){if(Ext.fly(n).is(e))return i?Ext.get(n):n;s++,n=n.parentNode}return null},findParentNode:function(e,t,i){var n=Ext.fly(this.dom.parentNode);return n?n.findParent(e,t,i):null},first:function(e,t){return this.matchNode("nextSibling","firstChild",e,t)},focus:function(e,t){return t=t||this.dom,Number(e)?Ext.defer(this.focus,e,this,[null,t]):(Ext.fireEvent("beforefocus",t),t.focus()),this},collect:function(){var e=this,t=e.dom,i=e.shadow,n=e.shim;e.isFly||(e.mixins.observable.destroy.call(e),delete Ext.cache[e.id],e.el=null),t&&(t._extData=e.dom=null),i&&(i.hide(),e.shadow=null),n&&(n.hide(),e.shim=null)},getAnchorToXY:function(e,t,i,n){return e.getAnchorXY(t,i,n)},getAttribute:function(e,t){var i=this.dom;return t?i.getAttributeNS(t,e)||i.getAttribute(t+":"+e):i.getAttribute(e)||i[e]||null},getAttributes:function(){var e,t,i,n=this.dom.attributes,r={};for(t=0,i=n.length;t<i;t++)r[(e=n[t]).name]=e.value;return r},getBottom:function(e){return(e?this.getLocalY():this.getY())+this.getHeight()},getById:function(e,t){var i=m.getElementById(e)||this.dom.querySelector(Ext.makeIdSelector(e));return t?i:i?Ext.get(i):null},getBorderPadding:function(){var e=this.getStyle(R),t=this.getStyle(M);return{beforeX:(parseFloat(t[I.l])||0)+(parseFloat(e[A.l])||0),afterX:(parseFloat(t[I.r])||0)+(parseFloat(e[A.r])||0),beforeY:(parseFloat(t[I.t])||0)+(parseFloat(e[A.t])||0),afterY:(parseFloat(t[I.b])||0)+(parseFloat(e[A.b])||0)}},getBorders:function(){var e=this.getStyle(M);return{beforeX:parseFloat(e[I.l])||0,afterX:parseFloat(e[I.r])||0,beforeY:parseFloat(e[I.t])||0,afterY:parseFloat(e[I.b])||0}},getBorderWidth:function(e){return this.addStyles(e,I)},getClassMap:function(e){var t=this.getData();return t&&(t=t.classMap,!1!==e&&(t=Ext.apply({},t))),t},getData:function(e){var t,i=this.dom;return i&&(t=i._extData||(i._extData={}),!1===e||t.isSynchronized||this.synchronize()),t||null},getFirstChild:function(){return Ext.get(this.dom.firstElementChild)},getLastChild:function(){return Ext.get(this.dom.lastElementChild)},getHeight:function(e,t){var i,n,r=this.dom;return this.isStyle("display","none")?0:("BODY"===r.nodeName?i=O.getViewportHeight():!t&&null!=(i=r.offsetHeight)||(i=r.getBoundingClientRect().height),Ext.supports.Direct2DBug&&(n=this.adjustDirect2DDimension("height"),t?i+=n:0<n&&n<.5&&i++),e&&(i-=this.getBorderWidth("tb")+this.getPadding("tb")),i<0?0:i)},getHtml:function(){return this.dom?this.dom.innerHTML:""},getLeft:function(e){return e?this.getLocalX():this.getX()},getLocalX:function(){var e,t=this.getStyle("left");return t&&"auto"!==t?H.test(t)?t=parseFloat(t):(t=this.getX(),(e=this.dom.offsetParent)&&(t-=Ext.fly(e).getX())):t=0,t},getLocalXY:function(){var e,t=this.getStyle(["left","top"]),i=t.left,n=t.top;return i&&"auto"!==i?H.test(i)?i=parseFloat(i):(i=this.getX(),(e=this.dom.offsetParent)&&(i-=Ext.fly(e).getX())):i=0,n&&"auto"!==n?H.test(n)?n=parseFloat(n):(n=this.getY(),(e=this.dom.offsetParent)&&(n-=Ext.fly(e).getY())):n=0,[i,n]},getLocalY:function(){var e,t=this.getStyle("top");return t&&"auto"!==t?H.test(t)?t=parseFloat(t):(t=this.getY(),(e=this.dom.offsetParent)&&(t-=Ext.fly(e).getY())):t=0,t},getMargin:(o={t:"top",l:"left",r:"right",b:"bottom"},l=["margin-top","margin-left","margin-right","margin-bottom"],function(e){var t,i,n;if(e)n=this.addStyles(e,k);else if(n={},(t=this.getStyle(l))&&"object"==typeof t)for(i in n={},k)n[i]=n[o[i]]=parseFloat(t[k[i]])||0;return n}),getPadding:function(e){return this.addStyles(e,A)},getParent:function(){return Ext.get(this.dom.parentNode)},getRight:function(e){return(e?this.getLocalX():this.getX())+this.getWidth()},getScroll:function(){var e,t,i=this.dom,n=m.body;return t=i===m||i===n?(e=x.scrollLeft||(n?n.scrollLeft:0),x.scrollTop||(n?n.scrollTop:0)):(e=i.scrollLeft,i.scrollTop),{left:e,top:t}},getScrollIntoViewXY:function(e,t,i,n){var r,s,o,a=this.dom;return n=n||P,s=e.isRegion?(o=e.height,e.width):(o=(e=Ext.getDom(e)).clientHeight,e.clientWidth),r=this.getOffsetsTo(e),{y:this.calcScrollPos(r[1]+i,a.offsetHeight,i,o,n.y),x:this.calcScrollPos(r[0]+t,a.offsetWidth,t,s,n.x)}},calcScrollPos:function(e,t,i,n,r){var s=e+t,o=i+n,a=r&&!w.test(r),l=i;return a||(r=r&&r.slice(0,-1),n<t||e<i?(r=r||"start",a=!0):o<s&&(r=r||"end",a=!0)),a&&("start"===r?l=e:"center"===r?l=Math.max(0,e-Math.floor(n/2)):"end"===r&&(l=Math.max(0,s-n))),l},getScrollLeft:function(){var e=this.dom;return e===m||e===m.body?this.getScroll().left:e.scrollLeft},getScrollTop:function(){var e=this.dom;return e===m||e===m.body?this.getScroll().top:e.scrollTop},getSize:function(e){return{width:this.getWidth(e),height:this.getHeight(e)}},getStyle:function(e,t){var i,n,r,s,o,a,l=this.dom,c="string"!=typeof e,u=this.styleHooks,d=e,h=d,f=1;if(c&&(n={},d=h[0],a=0,!(f=h.length)))return n;if(!l||l.documentElement)return n||"";i=l.style,t?o=i:(o=l.ownerDocument.defaultView.getComputedStyle(l,null))||(t=!0,o=i);do{if((r=u[d])||(u[d]=r={name:O.normalize(d)}),s=r.get?r.get(l,this,t,o):o[r.name],!c)return s;n[d]=s,d=h[++a]}while(a<f);return n},getStyleValue:function(e){return this.dom.style.getPropertyValue(e)},getCaretPos:function(){var e,t,i=this.dom;return J.test(i.type)?(t="number"!=typeof(e=i.selectionStart)&&this.getTextSelection())&&(e=t[0]):Ext.raise('Input type of "'+i.type+'" does not support selectionStart'),e},setCaretPos:function(e){this.selectText(e,e)},getTextSelection:function(){var e=this.dom;return J.test(e.type)?[e.selectionStart,e.selectionEnd,e.selectionDirection]:(Ext.raise('Input type of "'+this.dom.type+'" does not support selectionStart, selectionEnd and selectionDirection'),[])},selectText:function(e,t,i){var n,r,s=this.dom;return s&&J.test(s.type)?(e=e||0,r=s.value.length,void 0===t&&(t=r),i=D[i]||i||"forward",s.setSelectionRange?s.setSelectionRange(e,t,i):s.createTextRange&&(t<e&&(e=t),(n=s.createTextRange()).moveStart("character",e),n.moveEnd("character",-(r-t)),n.select())):J.test(s.type)||Ext.raise('Input type of "'+s.type+'" does not support setSelectionRange'),this},getTop:function(e){return e?this.getLocalY():this.getY()},getTouchAction:function(){return Ext.dom.TouchAction.get(this.dom)},getValue:function(e){var t=this.dom.value;return e?parseInt(t,10):t},getViewSize:function(){var e=this.dom;return e===m||e===m.body?{width:O.getViewportWidth(),height:O.getViewportHeight()}:{width:e.clientWidth,height:e.clientHeight}},getVisibilityMode:function(){var e=this.getData(),t=e.visibilityMode;return void 0===t&&(e.visibilityMode=t=O.DISPLAY),t},getWidth:function(e,t){var i,n,r,s=this.dom;return this.isStyle("display","none")?0:(n=Ext.supports.BoundingClientRect?(i=s.getBoundingClientRect(),n=this.vertical&&!Ext.supports.RotatedBoundingClientRect?i.bottom-i.top:i.right-i.left,t?n:Math.ceil(n)):s.offsetWidth,Ext.supports.Direct2DBug&&!this.vertical&&(r=this.adjustDirect2DDimension("width"),t?n+=r:0<r&&r<.5&&n++),e&&(n-=this.getBorderWidth("lr")+this.getPadding("lr")),n<0?0:n)},getX:function(){return this.getXY()[0]},getXY:function(){var e,t,i=Math.round,n=this.dom,r=m.body,s=0,o=0;if(n!==m&&n!==r)try{e=r.getBoundingClientRect(),s=(t=n.getBoundingClientRect()).left-e.left,o=t.top-e.top}catch(e){}return[i(s),i(o)]},getY:function(){return this.getXY()[1]},getZIndex:function(){return parseInt(this.getStyle("z-index"),10)},hasCls:function(e){return this.getClassMap().hasOwnProperty(e)},hide:function(){return this.setVisible(!1)},hover:function(e,t,i,n){return this.on("mouseenter",e,i||this.dom,n),this.on("mouseleave",t,i||this.dom,n),this},indexOf:function(e){var t=this.dom,i=e&&Ext.getDom(e);return t=t&&t.childNodes,i&&t?Array.prototype.indexOf.call(t,i):-1},insertAfter:function(e){return(e=Ext.getDom(e)).parentNode.insertBefore(this.dom,e.nextSibling),this},insertBefore:function(e){return(e=Ext.getDom(e)).parentNode.insertBefore(this.dom,e),this},insertFirst:function(e,t){return(e=e||{}).nodeType||e.dom||"string"==typeof e?(e=Ext.getDom(e),this.dom.insertBefore(e,this.dom.firstChild),t?e:Ext.get(e)):this.createChild(e,this.dom.firstChild,t)},insertHtml:function(e,t,i){var n=Ext.DomHelper.insertHtml(e,this.dom,t);return i?Ext.get(n):n},insertSibling:function(e,t,i){var n,r,s,o,a=Ext.DomHelper,l="after"===(t||"before").toLowerCase();if(Ext.isIterable(e)){if(s=e.length,r=Ext.fly(m.createDocumentFragment()),Ext.isArray(e))for(o=0;o<s;o++)n=r.appendChild(e[o],i);else{for(o=0;o<s;o++)r.dom.appendChild(n=e[0]);!1===i&&(n=Ext.get(n))}return this.dom.parentNode.insertBefore(r.dom,l?this.dom.nextSibling:this.dom),n}return(e=e||{}).nodeType||e.dom?(n=this.dom.parentNode.insertBefore(Ext.getDom(e),l?this.dom.nextSibling:this.dom),i||(n=Ext.get(n))):n=l&&!this.dom.nextSibling?a.append(this.dom.parentNode,e,!i):a[l?"insertAfter":"insertBefore"](this.dom,e,!i),n},is:function(e){var t=this.dom;return!e||!!t.tagName&&(Ext.isFunction(e)?e(t):t[Ext.supports.matchesSelector](e))},isAncestor:function(e){var t=!1,i=this.dom,n=Ext.getDom(e);if(i&&n){if(!n.nodeType)return!1;if(i.contains)return i.contains(n);if(i.compareDocumentPosition)return!!(16&i.compareDocumentPosition(n));for(;n=n.parentNode;)t=n===i||t}return t},isPainted:Ext.browser.is.IE?function(){var e=this.dom;return Boolean(e&&(0!==e.offsetHeight||0!==e.offsetWidth))}:function(){var e=this.dom;return Boolean(e&&e.offsetParent)},isScrollable:function(){var e=this.dom;return e.scrollHeight>e.clientHeight||e.scrollWidth>e.clientWidth},isStyle:function(e,t){return this.getStyle(e)===t},isVisible:function(e,t){var i,n=this.dom,r=!0;if(!n)return!1;for(t=t||3,s=s||new Ext.dom.Fly,i=n.ownerDocument.documentElement;n!==i&&(n&&11!==n.nodeType||(r=!1),r&&(s.attach(n),1&t&&(r=!s.isStyle("display","none")),r&&2&t&&(r=!s.isStyle("visibility","hidden"))),r&&e);n=n.parentNode);return r},last:function(e,t){return this.matchNode("previousSibling","lastChild",e,t)},matchNode:function(e,t,i,n){var r,s=this.dom;if(!s)return null;for(r=s[t];r;){if(1===r.nodeType&&(!i||Ext.fly(r,"_matchNode").is(i)))return n?r:Ext.get(r);r=r[e]}return null},measure:function(e){var t,i,n=this.dom,r="h"!==e,s="w"!==e,o=0,a=0,l=!Ext.supports.ComputedSizeIncludesPadding;return"BODY"===n.nodeName?(a=s&&O.getViewportHeight(),o=r&&O.getViewportWidth()):(i=n.offsetParent,l|="content-box"===(t=n.ownerDocument.defaultView.getComputedStyle(n,null)).boxSizing,null===i&&"fixed"!==t.position||(s&&(a=c(t.height),l&&(a+=c(t.paddingTop)+c(t.paddingBottom)+c(t.borderTopWidth)+c(t.borderBottomWidth))),r&&(o=c(t.width),l&&(o+=c(t.paddingLeft)+c(t.paddingRight)+c(t.borderLeftWidth)+c(t.borderRightWidth))))),e?r?o:a:e?null:{width:o,height:a}},measureContent:function(e){var t="h"!==e,i=this.measure(e),n=e?i:i.height,r=e?i:i.width;return"w"!==e&&(n-=this.getBorderWidth("tb")+this.getPadding("tb")),t&&(r-=this.getBorderWidth("lr")+this.getPadding("lr")),e?t?r:n:{width:r,height:n}},monitorMouseLeave:function(t,i,n){var r,s=this,e={mouseleave:function(e){Ext.isIE9m&&e.enableIEAsync(),r=Ext.defer(i,t,n||s,[e])},mouseenter:function(){Ext.undefer(r)},destroy:function(){Ext.undefer(r),s.destroyed||s.un(e)}};return s.on(e),e},next:function(e,t){return this.matchNode("nextSibling","nextSibling",e,t)},parent:function(e,t){return this.matchNode("parentNode","parentNode",e,t)},peekData:function(){var e=this.dom;return e&&e._extData||null},position:function(e,t,i,n){"BODY"!==this.dom.tagName&&(!e&&this.isStyle(E,"static")?this.setStyle(E,"relative"):e&&this.setStyle(E,e),t&&this.setStyle("z-index",t),(i||n)&&this.setXY([i||!1,n||!1]))},prev:function(e,t){return this.matchNode("previousSibling","previousSibling",e,t)},query:function(e,t,i){var n,r,s,o,a,l,c,u=this.dom;if(!u)return null;for(t=!1!==t,i||(n=[]),l=0,r=(e=e.split(",")).length;l<r;l++)if("string"==typeof e[l]){if(i)return o=u.querySelector(e[l]),t?o:Ext.get(o);for(c=0,s=(a=u.querySelectorAll(e[l])).length;c<s;c++)n.push(t?a[c]:Ext.get(a[c]))}return n},radioCls:function(e){var t,i,n,r=this.dom.parentNode.childNodes;for(e=Ext.isArray(e)?e:[e],i=0,n=r.length;i<n;i++)(t=r[i])&&1===t.nodeType&&Ext.fly(t).removeCls(e);return this.addCls(e)},redraw:function(){var e=this.dom,t=e.style;t.display="none",e.offsetHeight,t.display=""},remove:function(){this.destroy()},removeChild:function(e){return this.dom.removeChild(Ext.getDom(e)),this},removeCls:function(e,t,i){return this.replaceCls(e,null,t,i)},repaint:function(e,t){var i,n,r=this;return e?null!=t&&(i=!(n=t)):(e=Ext.baseCSSPrefix+"repaint",n=!(i=!1)),r.toggleCls(e,n),r.repaintTimer||(r.repaintTimer=Ext.defer(function(){r.repaintTimer=null,r.dom&&r.toggleCls(e,i)},1)),r},replace:function(e,t){var i=(e=Ext.getDom(e)).parentNode,n=e.id,r=this.dom;return i||Ext.raise('Cannot replace element "'+n+'". It is not attached to a parent node.'),!1!==t&&n&&Ext.cache[n]?(i.insertBefore(r,e),Ext.get(e).destroy()):i.replaceChild(r,e),this},replaceCls:function(e,t,i,n){var r,s,o,a,l,c=this.dom,u=0,d=0,h=e,f=(t||e)&&this.getData();if(f){for(r=f.classList,s=f.classMap,t=t?"string"==typeof t?t.split(C):t:v,h=h?"string"==typeof h?h.split(C):h:v,(i=i||"")&&"-"!==i[i.length-1]&&(i+="-"),(n=n||"")&&"-"!==n[0]&&(n="-"+n),o=0,a=h.length;o<a;o++)(l=h[o])&&(l=i+l+n,C.test(l)&&Ext.raise("Class names in arrays must not contain spaces"),s[l]&&(delete s[l],++d));for(o=0,a=t.length;o<a;o++)(l=t[o])&&(l=i+l+n,C.test(l)&&Ext.raise("Class names in arrays must not contain spaces"),s[l]||(s[l]=!0,d||(r.push(l),++u)));d?this.setClassMap(s,!0):u&&(r=r.join(" "),!Ext.isIE8&&c instanceof SVGElement?c.setAttribute("class",r):c.className=r)}return this},replaceWith:function(e){var t,i=this.dom,n=i.parentNode,r=Ext.cache;return this.clearListeners(),t=e.nodeType||e.dom||"string"==typeof e?(e=Ext.get(e),n.insertBefore(e.dom,i)):Ext.DomHelper.insertBefore(i,e),n.removeChild(i),this.dom=t,this.isFly||(delete r[this.id],r[this.id=Ext.id(t)]=this),this},resolveListenerScope:function(e){var t=this.component;return t?t.resolveListenerScope(e):this},scroll:function(e,t,i){if(!this.isScrollable())return!1;e=e.charAt(0);var n,r,s=this.dom,o="r"===e||"l"===e?"left":"top",a=!1;return"l"!==e&&"t"!==e&&"u"!==e||(t=-t),(r="left"==o?(n=s.scrollLeft,this.constrainScrollLeft(n+t)):(n=s.scrollTop,this.constrainScrollTop(n+t)))!==n&&(this.scrollTo(o,r,i),a=!0),a},scrollBy:function(e,t,i){var n=this.dom;return e.length?(i=t,t=e[1],e=e[0]):"number"!=typeof e&&(i=t,t=e.y,e=e.x),e&&this.scrollTo("left",this.constrainScrollLeft(n.scrollLeft+e),i),t&&this.scrollTo("top",this.constrainScrollTop(n.scrollTop+t),i),this},scrollChildIntoView:function(e,t){Ext.fly(e).scrollIntoView(this,t)},scrollIntoView:function(e,t,i,n){return e=Ext.getDom(e)||Ext.getBody().dom,this.doScrollIntoView(e,t,i,n,"getScrollLeft","scrollTo")},scrollTo:function(e,t,i){var n,r=T.test(e)?"scrollTop":"scrollLeft",s=this.dom;return i&&this.anim?((n={to:{}}).to[r]=t,Ext.isObject(i)&&Ext.applyIf(n,i),this.animate(n)):(s[r]=t,s[r]=t),this},select:function(e,t){var i,n;return"string"==typeof e?n=this.query(e,!t):void 0===e.length?Ext.raise("Invalid selector specified: "+e):(n=e,i=!0),t?new Ext.CompositeElement(n,!i):new Ext.CompositeElementLite(n,!0)},selectNode:function(e,t){return this.query(e,t,!0)},set:function(e,t){var i,n,r=this.dom;for(i in e)e.hasOwnProperty(i)&&(n=e[i],"style"===i?this.applyStyles(n):"cls"===i?r.className=n:!1!==t?void 0===n?r.removeAttribute(i):r.setAttribute(i,n):r[i]=n);return this},setBottom:function(e){return this.dom.style.bottom=O.addUnits(e),this},setClassMap:function(e,t){var i,n=this.getData(!1);n&&(e=t&&e||Ext.apply({},e),n.classMap=e,n.classList=i=Ext.Object.getKeys(e),n.isSynchronized=!0,this.dom.className=i.join(" "))},setCls:function(e){var t,i,n,r,s=this.getData(!1);for("string"==typeof e&&(e=e.split(C)),s.classList=r=e.slice(),s.classMap=n={},t=0,i=r.length;t<i;t++)n[r[t]]=!0;this.dom.className=r.join(" ")},setDisplayed:function(e){return"boolean"==typeof e&&(e=e?this._getDisplay():"none"),this.setStyle("display",e),(this.shadow||this.shim)&&this.setUnderlaysVisible("none"!==e),this},setHeight:function(e){return this.dom.style.height=O.addUnits(e),(this.shadow||this.shim)&&this.syncUnderlays(),this},setHtml:function(e){return this.dom&&(this.dom.innerHTML=e),this},setId:function(e){var t=this.id,i=Ext.cache;return t&&delete i[t],this.dom.id=e,i[this.id=e]=this},setLeft:function(e){return this.dom.style.left=O.addUnits(e),(this.shadow||this.shim)&&this.syncUnderlays(),this},setLocalX:function(e){var t=this.dom.style;return t.right="",t.left=null===e?"auto":e+"px",(this.shadow||this.shim)&&this.syncUnderlays(),this},setLocalXY:function(e,t){var i=this.dom.style;return i.right="",e&&e.length&&(t=e[1],e=e[0]),null===e?i.left="auto":void 0!==e&&(i.left=e+"px"),null===t?i.top="auto":void 0!==t&&(i.top=t+"px"),(this.shadow||this.shim)&&this.syncUnderlays(),this},setLocalY:function(e){return this.dom.style.top=null===e?"auto":e+"px",(this.shadow||this.shim)&&this.syncUnderlays(),this},setMargin:function(e){var t=this.dom.style;e||0===e?(e=this.self.unitizeBox(!0===e?5:e),t.setProperty("margin",e,"important")):(t.removeProperty("margin-top"),t.removeProperty("margin-right"),t.removeProperty("margin-bottom"),t.removeProperty("margin-left"))},setMaxHeight:function(e){return this.dom.style["max-height"]=O.addUnits(e),this},setMaxWidth:function(e){return this.dom.style["max-width"]=O.addUnits(e),this},setMinHeight:function(e){return this.dom.style["min-height"]=O.addUnits(e),this},setMinWidth:function(e){return this.dom.style["min-width"]=O.addUnits(e),this},setOpacity:function(e){return this.dom&&this.setStyle("opacity",e),this},setPadding:function(e){var t=this.dom.style;e||0===e?(e=this.self.unitizeBox(!0===e?5:e),t.setProperty("padding",e,"important")):(t.removeProperty("padding-top"),t.removeProperty("padding-right"),t.removeProperty("padding-bottom"),t.removeProperty("padding-left"))},setRight:function(e){return this.dom.style.right=O.addUnits(e),this},setScrollLeft:function(e){return this.dom.scrollLeft=e,this},setScrollTop:function(e){return this.dom.scrollTop=e,this},setSize:function(e,t){var i=this.dom.style;return Ext.isObject(e)&&(t=e.height,e=e.width),void 0!==e&&(i.width=O.addUnits(e)),void 0!==t&&(i.height=O.addUnits(t)),(this.shadow||this.shim)&&this.syncUnderlays(),this},setStyle:function(e,t){var i,n=this.dom,r=this.styleHooks,s=n.style,o=e;if("string"==typeof o)(i=r[o])||(r[o]=i={name:O.normalize(o)}),t=null==t?"":t,i.set?i.set(n,t,this):s[i.name]=t,i.afterSet&&i.afterSet(n,t,this);else for(o in e)(i=r[o])||(r[o]=i={name:O.normalize(o)}),t=null==(t=e[o])?"":t,i.set?i.set(n,t,this):s[i.name]=t,i.afterSet&&i.afterSet(n,t,this);return this},setText:function(e){this.dom.textContent=e},getText:function(){return this.dom.textContent},setTop:function(e){return this.dom.style.top=O.addUnits(e),(this.shadow||this.shim)&&this.syncUnderlays(),this},setTouchAction:function(e){Ext.dom.TouchAction.set(this.dom,e)},setUnderlaysVisible:function(e){var t=this.shadow,i=this.shim;t&&!t.disabled&&(e?t.show():t.hide()),i&&!i.disabled&&(e?i.show():i.hide())},setVisibility:function(e){var t=this.dom.style;e?t.removeProperty("visibility"):t.setProperty("visibility","hidden","important")},setVisibilityMode:function(e){return 1!==e&&2!==e&&3!==e&&4!==e&&5!==e&&Ext.raise("visibilityMode must be one of the following: Ext.Element.DISPLAY, Ext.Element.VISIBILITY, Ext.Element.OFFSETS, Ext.Element.CLIP, or Element.OPACITY"),this.getData().visibilityMode=e,this},setVisible:function(e){var t=this,i=e?"removeCls":"addCls";switch(t.getVisibilityMode()){case O.DISPLAY:t.removeCls([Y,X,K,W]),t[i](U);break;case O.VISIBILITY:t.removeCls([U,X,K,W]),t[i](Y);break;case O.OFFSETS:t.removeCls([Y,U,K,W]),t[i](X);break;case O.CLIP:t.removeCls([Y,U,X,W]),t[i](K);break;case O.OPACITY:t.removeCls([Y,U,X,K]),t[i](W)}return(t.shadow||t.shim)&&t.setUnderlaysVisible(e),!e&&t.$ripples&&t.destroyAllRipples(),t},setWidth:function(e){return this.dom.style.width=O.addUnits(e),(this.shadow||this.shim)&&this.syncUnderlays(),this},setX:function(e){return this.setXY([e,!1])},setXY:function(e){var t,i=this.translatePoints(e),n=this.dom.style;for(t in this.position(),n.right="",i)isNaN(i[t])||(n[t]=i[t]+"px");return(this.shadow||this.shim)&&this.syncUnderlays(),this},setY:function(e){return this.setXY([!1,e])},setZIndex:function(e){return this.shadow&&this.shadow.setZIndex(e),this.shim&&this.shim.setZIndex(e),this.setStyle("z-index",e)},show:function(){return this.setVisible(!0)},swallowEvent:function(e,t){function i(e){e.stopPropagation(),t&&e.preventDefault()}var n,r,s={destroyable:!0};if(Ext.isArray(e))for(r=e.length,n=0;n<r;n++)s[e[n]]=i;else s[e]=i;return this.on(s)},swapCls:function(e,t,i,n){void 0===i&&(i=!0);var r=i?e:t,s=i?t:e;return s&&this.removeCls(n?n+"-"+s:s),r&&this.addCls(n?n+"-"+r:r),this},synchronize:function(){var e,t,i,n=this.dom,r={},s=n.className,o=this.getData(!1);if(s&&0<s.length)for(t=0,i=(e=n.className.split(S)).length;t<i;t++)r[e[t]]=!0;else e=[];return o.classList=e,o.classMap=r,o.isSynchronized=!0,this},syncUnderlays:function(){var e,t,i,n,r,s=this.shadow,o=this.shim,a=this.dom;this.isVisible()&&(t=(e=this.getXY())[0],i=e[1],n=a.offsetWidth,r=a.offsetHeight,s&&!s.hidden&&s.realign(t,i,n,r),o&&!o.hidden&&o.realign(t,i,n,r))},toggleCls:function(e,t){return null==t&&(t=!this.hasCls(e)),t?this.addCls(e):this.removeCls(e)},toggle:function(){return this.setVisible(!this.isVisible()),this},translate:(r="webkitTransform"in m.createElement("div").style?"webkitTransform":"transform",function(e,t,i){e=Math.round(e),t=Math.round(t),i=Math.round(i),this.dom.style[r]="translate3d("+(e||0)+"px, "+(t||0)+"px, "+(i||0)+"px)"}),unwrap:function(){var e,t,i,n,r=this.dom,s=r.parentNode,o=(g=g||new Ext.dom.Fly).attach(Ext.Element.getActiveElement());return a=a||new Ext.dom.Fly,(t=Ext.cache[o.dom.id])&&(o=t),this.contains(o)&&(t&&t.suspendFocusEvents(),i=!0),s?(e=s.parentNode,i&&(n=e.getAttribute("tabIndex"),a.attach(e),a.set({tabIndex:-1}),a.suspendFocusEvents(),a.focus()),e.insertBefore(r,s),e.removeChild(s)):(e=m.createDocumentFragment()).appendChild(r),i&&(t?(t.focus(),t.resumeFocusEvents()):o.focus(),a&&(a.resumeFocusEvents(),a.set({tabIndex:n}))),this},up:function(e,t,i){return this.findParentNode(e,t,!i)},update:function(e){return this.setHtml(e)},wrap:function(e,t,i){var n,r,s,o=this.dom,a=Ext.DomHelper.insertBefore(o,e||{tag:"div"},!t),l=(f=f||new Ext.dom.Fly).attach(Ext.getDom(a)),c=l,u=(g=g||new Ext.dom.Fly).attach(Ext.Element.getActiveElement());return(n=Ext.cache[u.dom.id])&&(u=n),i&&(c=l.selectNode(i,t)),this.contains(u)&&(n&&n.suspendFocusEvents(),s=Ext.getDom(l).getAttribute("tabIndex"),l.set({tabIndex:-1}),l.suspendFocusEvents(),l.focus(),r=!0),(c.dom||c).appendChild(o),r&&(n?(n.focus(),n.resumeFocusEvents()):u.focus(),l.resumeFocusEvents(),l.set({tabIndex:s})),a},isFocusable:function(e){var t,i=this.dom,n=!1;return i&&!i.disabled&&(t=i.nodeName,n=!!Ext.Element.naturallyFocusableTags[t]||("A"===t||"LINK"===t)&&!!i.href||null!=i.getAttribute("tabIndex")||"true"===i.contentEditable,Ext.isIE8&&"INPUT"===t&&"hidden"===i.type&&(n=!1),n=n&&(e||this.isVisible(!0))),n},isInputField:function(){var e=this.dom,t=e.contentEditable;return!!(Ext.Element.inputTags[e.tagName]&&"button"!==e.type||""===t||"true"===t)},isTabbable:function(e){var t,i,n,r=this.dom,s=!1;return r&&!r.disabled&&(t=r.nodeName,i=null!=(n=r.getAttribute("tabIndex")),n-=0,"A"===t||"LINK"===t?s=r.href?!(i&&n<0):"true"===r.contentEditable&&!i||i&&0<=n:"true"===r.contentEditable||Ext.Element.naturallyTabbableTags[t]?s=!(i&&n<0):i&&0<=n&&(s=!0),Ext.isIE8&&"INPUT"===t&&"hidden"===r.type&&(s=!1),s=s&&(e||(!this.component||this.component.isVisible(!0))&&this.isVisible(!0))),s},ripplingCls:Ext.baseCSSPrefix+"rippling",ripplingTransitionCls:Ext.baseCSSPrefix+"ripple-transition",ripplingUnboundCls:Ext.baseCSSPrefix+"rippling-unbound",rippleBubbleCls:Ext.baseCSSPrefix+"ripple-bubble",rippleContainerCls:Ext.baseCSSPrefix+"ripple-container",rippleWrapperCls:Ext.baseCSSPrefix+"ripple-wrapper",noRippleDisplayMap:{table:1,"table-row":1,"table-row-group":1},noRippleTagMap:{TABLE:1,TR:1,TBODY:1},ripple:function(e,t){!0!==t&&t?Ext.isString(t)&&(t={color:t}):t={};var i,n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v,E,b,C,S=this,w=Ext.isString(t.delegate)?S.down(t.delegate):S,T=Ext.isString(t.measureSelector)?S.down(t.measureSelector):null,P=window.getComputedStyle(w.dom).color,I=!1===t.bound,A=t.position,k=S.ripplingCls,D=S.ripplingTransitionCls,R=S.ripplingUnboundCls,M=S.rippleBubbleCls,F=S.rippleContainerCls,L=S.rippleWrapperCls;if(w){if(i=w.getXY(),n=w.getWidth(),r=w.getHeight(),(C=w.$rippleClearTimeout)&&(w.$rippleClearTimeout=Ext.undefer(C)),s=T?(a=T.getWidth(),l=T.getHeight(),Math.max(a,l)):r<n?n:r,void 0===t.diameterLimit||!0===t.diameterLimit?s=Math.min(s,O.maxRippleDiameter):t.diameterLimit&&!1!==t.diameterLimit&&0!==t.diameterLimit&&(s=Math.min(s,t.diameterLimit)),o=[i[0]+n/2,i[1]+r/2],I&&(E=!1!==t.fit?(c=2.15*s,(v=w.getRegion()).setPosition(v.getCenter()).setSize(c).translateBy(-c/2,-c/2),S.up(function(e){var t=Ext.fly(e,"ripple");return!(e.tagName in S.noRippleTagMap)&&!(t.getStyle("display")in S.noRippleDisplayMap)&&t.getRegion().contains(v)})||Ext.getBody()):w),Ext.isString(e)?(t.color=e,e=null):e&&!e.isEvent&&(e=new Ext.event.Event(e)),e&&e.isEvent){if(e.browserEvent.$preventRipple)return;A=e.getXY(),e.browserEvent.$preventRipple=!0}d=(u=!I&&!t.centered&&A||o)[0]-i[0]-s/2,h=u[1]-i[1]-s/2,w.addCls(D),I?(b=E.getData(),(f=b.rippleWrapper)||(b.rippleWrapper=f=E.insertFirst({style:"position: absolute; top: 0; left: 0",cls:L+" "+k+" "+R}))):(w.addCls(k),g=w.child("."+F)),g||(I?(g=f.append({cls:F})).setXY(i):g=w.append({cls:F})),p=g.append({cls:M}),"default"!==t.color&&p.setStyle("backgroundColor",t.color||P),p.setWidth(s),p.setHeight(s),p.setTop(h),p.setLeft(d),x=function(){w.destroyed||(w.$rippleClearTimeout=Ext.defer(function(){w.removeCls([k,D]),w.$rippleClearTimeout=null},50))},m=function(){var e;p.destroy(),S.$ripples&&delete S.$ripples[p.id],(e=w.$rippleClearTimeout)&&(w.$rippleClearTimeout=Ext.undefer(e)),I?(g.destroy(),f.child("."+F)||(b.rippleWrapper=null,f.destroy(),x())):g.child("."+M)||(g.destroy(),x())},y=Ext.defer(m,t.destroyTime||1e3,S),S.$ripples||(S.$ripples={}),S.$ripples[p.id]={timerId:y,destructor:m},p.addCls(Ext.baseCSSPrefix+"ripple")}},destroyAllRipples:function(){var e,t;for(e in this.$ripples)t=this.$ripples[e],Ext.undefer(t.timerId),t.destructor&&t.destructor();this.$ripples=null},privates:{findTabbableElements:function(e){var t,i,n,r,s,o,a,l,c,u,d,h=this.dom,f=Ext.Element.tabbableSavedCounterAttribute,g=[],p=0;if(!h)return g;if(e&&(t=e.skipSelf,i=e.skipChildren,n=e.excludeRoot,r=e.includeSaved,s=e.includeHidden),(n=n&&Ext.getDom(n))&&n.contains(h))return g;if(!t&&(r&&h.hasAttribute(f)||this.isTabbable(s))&&(g[p++]=h),i)return g;if(!(u=(o=h.querySelectorAll(Ext.Element.tabbableSelector)).length))return g;for(l=new Ext.dom.Fly,c=0;c<u;c++)d=+(a=o[c]).getAttribute("tabIndex"),!(r&&a.hasAttribute(f)||!(d<0)&&l.attach(a).isTabbable(s))||n&&(n===a||n.contains(a))||(g[p++]=a);return g},saveTabbableState:function(e){var t,i,n,r,s,o=Ext.Element.tabbableSavedCounterAttribute,a=Ext.Element.tabbableSavedValueAttribute;for(e&&null!=e.includeSaved||((e=Ext.Object.chain(e||null)).includeSaved=!0),r=0,s=(i=this.findTabbableElements(e)).length;r<s;r++)0<(t=+(n=i[r]).getAttribute(o))?n.setAttribute(o,++t):(n.hasAttribute("tabIndex")?n.setAttribute(a,n.getAttribute("tabIndex")):n.setAttribute(a,"none"),n.setAttribute("tabIndex","-1"),n.setAttribute(o,"1"));return i},restoreTabbableState:function(e){var t,i,n,r,s,o=this.dom,a=Ext.Element.tabbableSavedCounterAttribute,l=Ext.Element.tabbableSavedValueAttribute,c=[],u=e&&e.skipSelf,d=e&&e.skipChildren,h=e&&e.reset;if(!o)return this;for(d||(c=Ext.Array.from(o.querySelectorAll("["+a+"]"))),u||c.unshift(o),r=0,s=c.length;r<s;r++)(n=c[r]).hasAttribute(a)&&n.hasAttribute(l)&&(i=+n.getAttribute(a),!h&&1<i?n.setAttribute(a,--i):("none"===(t=n.getAttribute(l))?n.removeAttribute("tabIndex"):n.setAttribute("tabIndex",t),n.removeAttribute(l),n.removeAttribute(a)));return c},setTabIndex:function(e){var t=this.dom,i=Ext.Element.tabbableSavedValueAttribute;t.hasAttribute(i)?null==e?(t.setAttribute(i,"none"),t.removeAttribute("tabIndex")):t.setAttribute(i,e):null==e?t.removeAttribute("tabIndex"):t.setAttribute("tabIndex",e)},doAddListener:function(e,t,i,n,r,s,o){var a,l,c,u=this,d=e;e=Ext.canonicalEventName(e),u.blockedEvents[e]||(a=u.mixins.observable.doAddListener,n=n||{},!1===O.useDelegatedEvents&&(n.delegated=n.delegated||!1),!1!==n.translate&&((l=u.additiveEvents[e])&&(n.type=e,e=l,a.call(u,e,t,i,n,r,s,o)),(c=u.eventMap[e])&&(n.type=n.type||e,o&&(n.managedName=d),e=c)),a.call(u,e,t,i,n,r,s,o)&&u.longpressEvents[e]&&1==++u.longpressListenerCount&&u.on("MSHoldVisual","preventMsHoldVisual",u),o&&c&&delete n.managedName,delete n.type)},doRemoveListener:function(e,t,i){var n,r,s,o,a=this;e=Ext.canonicalEventName(e),a.blockedEvents[e]||(n=a.mixins.observable.doRemoveListener,(s=a.additiveEvents[e])&&(e=s,n.call(a,e,t,i)),(r=a.eventMap[e])&&(o=n.call(a,r,t,i)),(o=n.call(a,e,t,i)||o)&&a.longpressEvents[e]&&!--a.longpressListenerCount&&a.un("MSHoldVisual","preventMsHoldVisual",a))},_initEvent:function(e){return this.events[e]=new Ext.dom.ElementEvent(this,e)},_getDisplay:function(){var e=this.getData(),t=e[$];return void 0===t&&(e[$]=t=""),t},_getPublisher:function(e,t){var i=Ext.event.publisher.Publisher,n=i.publishersByEvent[e];return(t&&!Ext.event.Event.gestureEvents[e]||!n||this.dom===window&&"resize"===e)&&(n=i.publishers.dom),n},isFocusSuspended:function(){var e=this.peekData();return e&&e.suspendFocusEvents},preventMsHoldVisual:function(e){e.preventDefault()},suspendFocusEvents:function(){this.isFly||this.suspendEvent("focus","blur"),this.getData().suspendFocusEvents=!0},resumeFocusEvents:function(){function e(){var e;this.destroyed||((e=this.getData())&&(e.suspendFocusEvents=!1),this.isFly||this.resumeEvent("focus","blur"))}!this.destroyed&&this.getData().suspendFocusEvents&&(Ext.isIE&&!this.isFly?this.resumeFocusEventsTimer=Ext.asap(e,this):e.call(this))}},deprecated:{"5.0":{methods:{getHTML:"getHtml",getPageBox:function(e){var t=this.dom,i="BODY"===t.nodeName,n=i?O.getViewportWidth():t.offsetWidth,r=i?O.getViewportHeight():t.offsetHeight,s=this.getXY(),o=s[1],a=s[0]+n,l=s[1]+r,c=s[0];return e?new Ext.util.Region(o,a,l,c):{left:c,top:o,width:n,height:r,right:a,bottom:l}},isTransparent:function(e){var t=this.getStyle(e);return!!t&&i.test(t)},purgeAllListeners:"clearListeners",removeAllListeners:"clearListeners",setHTML:"setHtml"}}}}},function(o){var e,a=document,n=a.documentElement,t=o.prototype,r=Ext.supports,i="pointerdown",s="pointermove",l="pointerup",c="pointercancel",u="MSPointerDown",d="MSPointerMove",h="MSPointerUp",f="MSPointerCancel",g="mousedown",p="mousemove",m="mouseup",x="touchstart",y="touchmove",v="touchend",E="touchcancel",b=t.eventMap={},C=t.additiveEvents={},S=Ext.id;t._init(o),delete t._init,Ext.id=function(e,t){var i,n=e&&Ext.getDom(e,!0);return n?(i=n.id)||(i=S(null,t||o.prototype.identifiablePrefix),Ext.isSandboxed&&(i=(Ext.sandboxPrefix||(Ext.sandboxPrefix=Ext.sandboxName.toLowerCase()+"-"))+i),n.id=i):i=S(e,t),i},r.PointerEvents?(b[g]=i,b[p]=s,b[m]=l,b[x]=i,b[y]=s,b[v]=l,b[E]=c,b.mouseover="pointerover",b.mouseout="pointerout",b.mouseenter="pointerenter",Ext.isIE11||(b.mouseleave="pointerleave")):r.MSPointerEvents?(b[i]=u,b[s]=d,b[l]=h,b[c]=f,b[g]=u,b[p]=d,b[m]=h,b[x]=u,b[y]=d,b[v]=h,b[E]=f,b.mouseover="MSPointerOver",b.mouseout="MSPointerOut"):r.TouchEvents?(b[i]=x,b[s]=y,b[l]=v,b[c]=E,b[g]=x,b[p]=y,b[m]=v,b.click="tap",b.dblclick="doubletap",Ext.os.is.Desktop&&(b[x]=g,b[y]=p,b[v]=m,b[E]=m,C[g]=g,C[p]=p,C[m]=m,C[x]=x,C[y]=y,C[v]=v,C[E]=E,C[i]=g,C[s]=p,C[l]=m,C[c]=m)):(b[i]=g,b[s]=p,b[l]=m,b[c]=m,b[x]=g,b[y]=p,b[v]=m,b[E]=m),Ext.isWebKit&&(b.transitionend=Ext.browser.getVendorProperyName("transitionEnd"),b.animationstart=Ext.browser.getVendorProperyName("animationStart"),b.animationend=Ext.browser.getVendorProperyName("animationEnd")),Ext.supports.MouseWheel||Ext.isOpera||(b.mousewheel="DOMMouseScroll"),(e=t.$eventOptions=Ext.Object.chain(t.$eventOptions)).translate=e.capture=e.delegate=e.delegated=e.stopEvent=e.preventDefault=e.stopPropagation=e.element=1,t.styleHooks.opacity={name:"opacity",afterSet:function(e,t,i){var n=i.shadow;n&&n.setOpacity(t)}},t.getTrueXY=t.getXY,Ext.getViewportHeight=o.getViewportHeight,Ext.getViewportWidth=o.getViewportWidth,Ext.select=o.select,Ext.query=o.query,Ext.apply(Ext,{get:function(e){return o.get(e)},getDom:function(e){return e&&a?"string"==typeof e?Ext.getElementById(e):"dom"in e?e.dom:e:null},getBody:function(){if(!Ext._bodyEl){if(!a.body)throw new Error("[Ext.getBody] document.body does not yet exist");Ext._bodyEl=Ext.get(a.body),Ext._bodyEl.skipGarbageCollection=!0}return Ext._bodyEl},getHead:function(){return Ext._headEl||(Ext._headEl=Ext.get(a.head||a.getElementsByTagName("head")[0]),Ext._headEl.skipGarbageCollection=!0),Ext._headEl},getDoc:function(){return Ext._docEl||(Ext._docEl=Ext.get(a),Ext._docEl.skipGarbageCollection=!0),Ext._docEl},getWin:function(){return Ext._winEl||(Ext._winEl=Ext.get(window),Ext._winEl.skipGarbageCollection=!0),Ext._winEl},removeNode:function(e){var t,i=(e=e.dom||e)&&e.id,n=Ext.cache[i];n?n.destroy():!e||3!==e.nodeType&&"BODY"===e.tagName.toUpperCase()||(t=e.parentNode)&&t.removeChild(e)}}),Ext.isGarbage=function(e){return e&&1===e.nodeType&&"BODY"!==e.tagName&&"HTML"!==e.tagName&&(!e.parentNode||null===e.offsetParent&&(Ext.isIE8?a.all[e.id]:a.getElementById(e.id))!==e&&!(Ext.detachedBodyEl&&Ext.detachedBodyEl.isAncestor(e)))},Ext.onInternalReady(function(){var e,t=[];if(Ext.getDoc().on("selectstart",function(e,t){var i=o.selectableCls,n=o.unselectableCls,r=t&&t.tagName,s=new Ext.dom.Fly;if("input"!==(r=r&&r.toLowerCase())&&"textarea"!==r)for(;t&&1===t.nodeType&&t!==a.documentElement;){if(s.attach(t),s.hasCls(i))return;if(s.hasCls(n))return void e.stopEvent();t=t.parentNode}}),Ext.os.is.Android||Ext.os.is.Windows&&Ext.supports.Touch){var i=Ext.getWin();o._documentWidth=o._viewportWidth=n.clientWidth,o._documentHeight=o._viewportHeight=n.clientHeight,i.on({focusin:"_onWindowFocusChange",focusout:"_onWindowFocusChange",pointerup:"_onWindowFocusChange",capture:!0,delegated:!1,delay:1,scope:o}),i.on({resize:"_onWindowResize",priority:2e3,scope:o})}r.Touch&&t.push(Ext.baseCSSPrefix+"touch"),Ext.isIE&&Ext.isIE9m&&(t.push(Ext.baseCSSPrefix+"ie",Ext.baseCSSPrefix+"ie9m"),t.push(Ext.baseCSSPrefix+"ie8p"),Ext.isIE8?t.push(Ext.baseCSSPrefix+"ie8"):t.push(Ext.baseCSSPrefix+"ie9",Ext.baseCSSPrefix+"ie9p"),Ext.isIE8m&&t.push(Ext.baseCSSPrefix+"ie8m")),Ext.isIE10&&t.push(Ext.baseCSSPrefix+"ie10"),Ext.isIE10p&&t.push(Ext.baseCSSPrefix+"ie10p"),Ext.isIE11&&t.push(Ext.baseCSSPrefix+"ie11"),Ext.isEdge&&t.push(Ext.baseCSSPrefix+"edge"),Ext.isGecko&&t.push(Ext.baseCSSPrefix+"gecko"),Ext.isOpera&&t.push(Ext.baseCSSPrefix+"opera"),Ext.isOpera12m&&t.push(Ext.baseCSSPrefix+"opera12m"),Ext.isWebKit&&t.push(Ext.baseCSSPrefix+"webkit"),Ext.isSafari&&t.push(Ext.baseCSSPrefix+"safari"),Ext.isSafari9&&t.push(Ext.baseCSSPrefix+"safari9"),Ext.isSafari10&&t.push(Ext.baseCSSPrefix+"safari10"),Ext.isSafari&&(Ext.browser.version.isLessThan(11)&&t.push(Ext.baseCSSPrefix+"safari10m"),Ext.browser.version.isLessThan(9)&&t.push(Ext.baseCSSPrefix+"safari8m")),Ext.isChrome&&t.push(Ext.baseCSSPrefix+"chrome"),Ext.isMac&&t.push(Ext.baseCSSPrefix+"mac"),Ext.isWindows&&t.push(Ext.baseCSSPrefix+"windows"),Ext.isLinux&&t.push(Ext.baseCSSPrefix+"linux"),r.CSS3BorderRadius||t.push(Ext.baseCSSPrefix+"nbr"),r.CSS3LinearGradient||t.push(Ext.baseCSSPrefix+"nlg"),r.Touch&&t.push(Ext.baseCSSPrefix+"touch"),Ext.os.deviceType&&t.push(Ext.baseCSSPrefix+Ext.os.deviceType.toLowerCase()),Ext.os.is.BlackBerry&&(t.push(Ext.baseCSSPrefix+"bb"),Ext.browser.userAgent.match(/Kbd/gi)&&t.push(Ext.baseCSSPrefix+"bb-keyboard")),Ext.os.is.iOS&&Ext.isSafari&&t.push(Ext.baseCSSPrefix+"mobile-safari"),Ext.os.is.iOS&&Ext.browser.is.WebView&&!Ext.browser.is.Standalone&&t.push(Ext.baseCSSPrefix+"ios-native"),Ext.supports.FlexBoxBasisBug&&t.push(Ext.baseCSSPrefix+"has-flexbasis-bug"),Ext.getBody().addCls(t),(e=Ext.theme)&&e.getDocCls&&Ext.fly(document.documentElement).addCls(e.getDocCls())},null,{priority:1500})}),Ext.define("Ext.overrides.dom.Element",{override:"Ext.dom.Element",_positionTopLeft:["position","top","left"],setX:function(e,t){return this.setXY([e,this.getY()],t)},setXY:function(e,t){return t?(Ext.isObject(t)||(t={}),this.animate(Ext.applyIf({to:{x:e[0],y:e[1]}},t))):this.callParent([e]),this},setY:function(e,t){return this.setXY([this.getX(),e],t)},translateXY:function(e,t){var i=this.el,n=i.getStyle(this._positionTopLeft),r="relative"===n.position,s=parseFloat(n.left),o=parseFloat(n.top),a=this.getXY();return Ext.isArray(e)&&(t=e[1],e=e[0]),isNaN(s)&&(s=r?0:i.dom.offsetLeft),isNaN(o)&&(o=r?0:i.dom.offsetTop),{x:s="number"==typeof e?e-a[0]+s:void 0,y:o="number"==typeof t?t-a[1]+o:void 0}},visit:function(e){var t=this.dom,i=e.skipSelf,n=e.excludeRoot,r=e.callback||e.fn,s=e.scope||this,o=e.reverse,a=e.selector,l=e.include||NodeFilter.SHOW_ELEMENT,c=document.createTreeWalker(t,l,null,!1),u=null,d=t;if(o){for(d=t.lastElementChild;d.lastElementChild;d=d.lastElementChild);c.currentNode=d}for(;!1!==u&&d;d=o?c.previousNode():c.nextNode())n&&n.contains(d)||d===t&&i||a&&!d[Ext.supports.matchesSelector](a)||(u=Ext.callback(r,s,[d]));return u}}),Ext.define("Ext.overrides.dom.Element",{override:"Ext.dom.Element",rippleShowTimeout:300}),Ext.define("Ext.GlobalEvents",{extend:Ext.mixin.Observable,alternateClassName:"Ext.globalEvents",observableType:"global",singleton:!0,resizeBuffer:100,idleEventMask:{mousemove:1,touchmove:1,pointermove:1,MSPointerMove:1,unload:1},windowListeners:{resize:{fn:"fireResize"}},constructor:function(){var e=this;e.callParent(),Ext.onInternalReady(function(){e.attachListeners()})},setPressedComponent:function(e,t){var i=this,n=i.pressedComponent;n&&n.onRelease&&n.onRelease(t),i.pressedComponent=e,i.pressedScrollStart=e?Ext.on({scrollstart:function(){i.setPressedComponent(null,t)},destroyable:!0}):Ext.destroy(i.pressedScrollStart)},attachListeners:function(){var e=Ext.getWin(),t=this.windowListeners;this.onlineState=Ext.isOnline(),this.curHeight=Ext.Element.getViewportHeight(),this.curWidth=Ext.Element.getViewportWidth(),e.on({scope:this,online:"handleOnlineChange",offline:"handleOnlineChange"}),this.fireResize.$skipTimerCheck=!0,t&&(t.scope=this,Ext.isModern?t.resize.onFrame=!0:t.resize.buffer=this.resizeBuffer,e.on(t)),Ext.getDoc().on({touchstart:"fireMouseDown",mousedown:"fireMouseDown",mouseup:"fireMouseUp",touchend:"fireMouseUp",drop:"fireMouseUp",dragend:"fireMouseUp",scope:this})},fireMouseDown:function(e){this.fireEvent("mousedown",e),Ext.ComponentManager.handleDocumentMouseDown(e)},fireMouseUp:function(e){this.fireEvent("mouseup",e),this.setPressedComponent(null,e)},fireResize:function(){var e=Ext.Element,t=e.getViewportWidth(),i=e.getViewportHeight();this.curHeight===i&&this.curWidth===t||(this.curHeight=i,this.curWidth=t,this.hasListeners.resize&&this.fireEvent("resize",t,i))},handleOnlineChange:function(){var e=Ext.isOnline();e!==this.onlineState&&(this.onlineState=e,this.fireEvent("onlinechange",e))}},function(e){Ext.hasListeners=e.hasListeners,Ext.on=function(){return e.addListener.apply(e,arguments)},Ext.un=function(){return e.removeListener.apply(e,arguments)},Ext.fireEvent=function(){return e.fireEvent.apply(e,arguments)},Ext.fireIdle=function(){e.hasListeners.idle&&!Ext._suppressIdle&&e.fireEventArgs("idle"),Ext._suppressIdle=!1},Ext._suppressIdle=!1}),Ext.USE_NATIVE_JSON=!0,Ext.JSON=new function(){var me=this,hasNative=window.JSON&&"[object JSON]"===JSON.toString(),useHasOwn=!!{}.hasOwnProperty,pad=function(e){return e<10?"0"+e:e},doDecode=function(json){return eval("("+json+")")},doEncode=function(e,t){return null==e?"null":Ext.isDate(e)?me.encodeDate(e):Ext.isString(e)?Ext.isMSDate(e)?me.encodeMSDate(e):me.encodeString(e):"number"==typeof e?isFinite(e)?String(e):"null":Ext.isBoolean(e)?String(e):"function"==typeof e.toJSON?doEncode(e.toJSON()):Ext.isArray(e)?encodeArray(e,t):Ext.isObject(e)?encodeObject(e,t):"function"==typeof e?"null":"undefined"},m={"\\b":"\\\\b","\\t":"\\\\t","\\n":"\\\\n","\\f":"\\\\f","\\r":"\\\\r",'"':'\\\\"',"\\\\":"\\\\\\\\","\\v":"\\\\u000b"},charToReplace=/[\\\\\\"\\x00-\\x1f\\x7f-\\uffff]/g,encodeString=function(e){return'"'+e.replace(charToReplace,function(e){var t=m[e];return"string"==typeof t?t:"\\\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"'},encodeMSDate=function(e){return'"'+e+'"'},encodeArrayPretty=function(e,t){var i,n=e.length,r=t+"   ",s=","+r,o=["[",r];for(i=0;i<n;i+=1)o.push(me.encodeValue(e[i],r),s);return o[o.length-1]=t+"]",o.join("")},encodeObjectPretty=function(e,t){var i,n,r=t+"   ",s=","+r,o=["{",r];for(i in e)if(n=e[i],!useHasOwn||e.hasOwnProperty(i)){if("function"==typeof n||void 0===n||n.isInstance)continue;o.push(me.encodeValue(i)+": "+me.encodeValue(n,r),s)}return o[o.length-1]=t+"}",o.join("")},encodeArray=function(e,t){if(t)return encodeArrayPretty(e,t);var i,n=["[",""],r=e.length;for(i=0;i<r;i+=1)n.push(me.encodeValue(e[i]),",");return n[n.length-1]="]",n.join("")},encodeObject=function(e,t){if(t)return encodeObjectPretty(e,t);var i,n,r=["{",""];for(i in e)if(n=e[i],!useHasOwn||e.hasOwnProperty(i)){if("function"==typeof n||void 0===n)continue;r.push(me.encodeValue(i),":",me.encodeValue(n),",")}return r[r.length-1]="}",r.join("")};me.encodeString=encodeString,me.encodeValue=doEncode,me.encodeDate=function(e){return'"'+e.getFullYear()+"-"+pad(e.getMonth()+1)+"-"+pad(e.getDate())+"T"+pad(e.getHours())+":"+pad(e.getMinutes())+":"+pad(e.getSeconds())+'"'},me.encode=function(e){return hasNative&&Ext.USE_NATIVE_JSON?JSON.stringify(e):me.encodeValue(e)},me.decode=function(t,i){try{return hasNative&&Ext.USE_NATIVE_JSON?JSON.parse(t):doDecode(t)}catch(e){if(i)return null;Ext.raise({sourceClass:"Ext.JSON",sourceMethod:"decode",msg:"You're trying to decode an invalid JSON String: "+t})}},me.encodeMSDate=encodeMSDate,Ext.util||(Ext.util={}),Ext.util.JSON=me,Ext.encode=me.encode,Ext.decode=me.decode},Ext.define("Ext.mixin.Inheritable",{extend:Ext.Mixin,mixinConfig:{id:"inheritable"},getInherited:function(e){var t,i,n,r,s=this,o=e&&s.inheritedStateInner||s.inheritedState,a=s.getRefOwner(),l=s.isContainer;return o&&!o.invalid||(t=s.getRefOwner(),r=s.ownerLayout,a&&(n=!r||r===a.layout),s.inheritedState=o=Ext.Object.chain(t?t.getInherited(n):Ext.rootInheritedState),l&&(s.inheritedStateInner=i=Ext.Object.chain(o)),s.initInheritedState(o,i),o=l&&e?s.inheritedStateInner:s.inheritedState),o},getInheritedConfig:function(e,t){var i,n,r=this.inheritedState;return r&&!r.invalid||(r=this.getInherited()),n=r[e],t&&r.hasOwnProperty(e)&&(i=n,delete r[e],n=r[e],r[e]=i),n},resolveListenerScope:function(e,t){var i,n="boolean"==typeof t,r=Ext._namedScopes[e];return r?r.isController?i=this.getInheritedConfig("controller",n?t:!r.isSelf):r.isOwner?i=this.getRefOwner():r.isSelf?i=this.getInheritedConfig("defaultListenerScope",n&&t)||this:r.isThis&&(i=this):i=this.getInheritedConfig("defaultListenerScope",!n||t)||e||this,i||null},resolveSatelliteListenerScope:function(e,t){var i,n=Ext._namedScopes[t];return n?n.isController?i=this.getInheritedConfig("controller"):n.isSelf?i=this.getInheritedConfig("defaultListenerScope")||e:n.isThis&&(i=e):i=this.getInheritedConfig("defaultListenerScope")||t||this,i||null},lookupNameHolder:function(e){return this.getInheritedConfig("nameHolder",!1!==e)||null},lookupReferenceHolder:function(e){return this.getInheritedConfig("referenceHolder",!1!==e)||null},getRefOwner:function(){return this.ownerCmp||this.ownerCt||this.parent||this.$initParent||this.floatParent},bubble:function(e,t,i){var n;for(n=this;n&&!1!==e.apply(t||n,i||[n]);n=n.getRefOwner());},isDescendantOf:function(e){return!!e&&e.isAncestor(this)},isAncestor:function(e){for(;e;){if(e.getRefOwner()===this)return!0;e=e.getRefOwner()}return!1},invalidateInheritedState:function(){var e=this.inheritedState;e&&(e.invalid=!0,delete this.inheritedState)},privates:{_fixReference:function(){var e;this.name&&this.nameable&&(e=this.lookupNameHolder())&&!e.destroyed&&e.attachNameRef(this),this.reference&&(e=this.lookupReferenceHolder())&&!e.destroyed&&e.attachReference(this)},onInheritedAdd:function(e,t){this.inheritedState&&t&&this.invalidateInheritedState(),Ext.ComponentManager.markReferencesDirty()},onInheritedRemove:function(e){Ext.ComponentManager.markReferencesDirty(),this.inheritedState&&!e&&this.invalidateInheritedState()}}},function(){Ext.rootInheritedState={}}),Ext.define("Ext.mixin.Bindable",{mixinId:"bindable",config:{bind:{$value:null,lazy:!0},controller:null,defaultListenerScope:!1,publishes:{$value:null,lazy:!0,merge:function(e,t){return this.mergeSets(e,t)}},session:{$value:null,lazy:!0},twoWayBindable:{$value:null,lazy:!0,merge:function(e,t){return this.mergeSets(e,t)}},viewModel:{$value:null,lazy:!0}},defaultBindProperty:null,nameable:!1,shareableName:!1,reference:null,validRefRe:/^[a-z_][a-z0-9_]*$/i,getReference:function(){return this.reference},initInheritedState:function(e){var t=this,i=t.reference,n=t.getController(),r=t.getConfig("viewModel",!0),s=t.getConfig("session",!0),o=t.getDefaultListenerScope();n&&(e.controller=n),o?e.defaultListenerScope=t:n&&(e.defaultListenerScope=n),r&&(r.isViewModel||(r=t),e.viewModel=r),s&&(s.isSession||(s=t),e.session=s),i&&(t.referenceKey=(e.referencePath||"")+i,t.viewModelKey=(e.viewModelPath||"")+i)},isBound:function(e){var t=this.getBind();return!(!t||!t[e||this.defaultBindProperty])},lookupController:function(e){return this.getInheritedConfig("controller",e)||null},lookupSession:function(e){var t=e?null:this.getSession();return t||(t=this.getInheritedConfig("session",e))&&!t.isSession&&(t=t.getInherited().session=t.getSession()),t||null},lookupViewModel:function(e){var t=e?null:this.getViewModel();return t||(t=this.getInheritedConfig("viewModel",e))&&!t.isViewModel&&(t=t.getInherited().viewModel=t.getViewModel()),t||null},publishState:function(e,t){var i,n,r,s,o=this.publishedState,a=this.getBind(),l=a&&e&&a[e],c=0;if(0!==arguments.length&&2!==arguments.length&&Ext.raise("publishState must either be called with no args, or with both name AND value passed"),!l||l.syncing||l.isReadOnly()||(l.calls||null!=t&&t!==this.getInitialConfig()[e])&&l.setValue(t),(n=this.getPublishes())&&(r=this.lookupViewModel())&&(s=this.viewModelKey)){if(o=o||(this.publishedState={}),e){if(!n[e])return;if(!(t&&t.constructor===Object||t instanceof Array)&&o[e]===t)return;s+=".",s+=e}else{for(i in n)++c,o[i]=this.getConfig(i);if(!c)return;t=o}r.set(s,t)}},privates:{applyBind:function(e,t){if(!e)return t;var i,n,r,s,o=this,a=o.lookupViewModel(),l=o.getTwoWayBindable(),c=o._getBindTemplateScope;for(r in a||Ext.raise("Cannot use bind config without a viewModel"),"string"==typeof e&&(o.defaultBindProperty||Ext.raise(o.$className+" has no defaultBindProperty - Please specify a bind object"),i=e,(e={})[o.defaultBindProperty]=i),e)s=e[r],(i=t&&t[r])&&(i.destroy(),delete t[r]),s&&(!i&&l&&l[r]&&((n=n||{})[r]="_onConfigPropChange"),(i=a.bind(s,o.onBindNotify,o))._config=Ext.Config.get(r),i.getTemplateScope=c,o[i._config.names.set]||Ext.raise("Cannot bind "+r+" on "+o.$className+" - missing a "+i._config.names.set+" method."),(t=t||{})[r]=i);return n&&(n.scope=o).watchConfig(n),o.$bindings=t},applyController:function(e){return e&&(e=Ext.Factory.controller(e)).setView(this),this.controller=e},updatePublishes:function(e){var t,i;if(e&&this.lookupViewModel()){for(t in e)e[t]&&((i=i||{})[t]="_onConfigPropChange");i&&(i.scope=this).watchConfig(i)}return e},applySession:function(e){var t,i;return e?(e.isSession||(i=!0===e?{}:e,e=(t=this.lookupSession(!0))?t.spawn(i):new Ext.data.Session(i)),e):null},applyViewModel:function(e){var t;return e?(e.isViewModel||((t={parent:this.lookupViewModel(!0),view:this}).session=this.getSession(),t.parent||(t.session=this.lookupSession()),e&&(e.constructor===Object?Ext.apply(t,e):"string"==typeof e&&(t.type=e)),e=Ext.Factory.viewModel(t)),e):null},_getBindTemplateScope:function(){return this.scope.resolveListenerScope()},destroyBindable:function(){var e=this.getConfig("viewModel",!0),t=this.getConfig("session",!0),i=this.getController();e&&e.isViewModel&&(e.destroy(),this.setViewModel(null)),t&&t.isSession&&(t.getAutoDestroy()&&t.destroy(),this.setSession(null)),i&&(this.setController(null),i.destroy())},initBindable:function(){var e=this.controller;this.initBindable=Ext.emptyFn,this.getBind(),this.getPublishes(),this.viewModel||this.getViewModel(),e&&e.initBindings(),this.reference&&this.publishState()},isSyncing:function(e){var t,i=this.getBind(),n=!1;return i&&(t=i[e])&&(n=0<t.syncing),n},notifyIf:function(e){var t=this.lookupViewModel(e);t&&t.notify()},onBindNotify:function(e,t,i){i.syncing=i.syncing+1||1,this[i._config.names.set](e),--i.syncing},_onConfigPropChange:function(e,t,i){e.publishState(t,i)},removeBindings:function(){var e,t,i=this.$bindings;if(i)for(t in i)(e=i[t])&&(e.destroy(),e._config=e.getTemplateScope=null,i[t]=null)},updateSession:function(e){var t=this.getInherited();e?t.session=e:delete t.session},updateViewModel:function(e,t){var i=this.getInherited(),n=this.getController();e?(this.hasVM=!0,(i.viewModel=e).setView(this),n&&n.initViewModel(e)):delete i.viewModel,this.viewModel=e}}}),Ext.define("Ext.mixin.ComponentDelegation",{extend:Ext.Mixin,mixinConfig:{id:"componentDelegation"},privates:{addDelegatedListener:function(e,t,i,n,r,s,o){var a;e=Ext.canonicalEventName(e),(r=r||n.order)&&(n&&n.priority||((n=n?Ext.Object.chain(n):{}).priority=this.$orderToPriority[r])),n.target&&Ext.raise("Cannot add '"+e+"' listener to component: '"+this.id+"' - 'delegate' and 'target' event options are incompatible."),((a=this.$delegatedEvents||(this.$delegatedEvents={}))[e]||(a[e]=new Ext.util.Event(this,e))).addListener(t,i,n,s,o)&&this.$hasDelegatedListeners._incr_(e)},clearDelegatedListeners:function(){var e,t,i,n=this.$delegatedEvents;if(n)for(e in n)i=(t=n[e]).listeners.length,t.clearListeners(),this.$hasDelegatedListeners._decr_(e,i),delete n[e]},doFireDelegatedEvent:function(e,t){var i,n,r,s=!0;if(this.$hasDelegatedListeners[e])for(i=this.getRefOwner();i&&(!(n=i.$delegatedEvents)||!(r=n[e])||!1!==(s=r.fireDelegated(this,t)));)i=i.getRefOwner();return s},removeDelegatedListener:function(e,t,i){var n,r=this.$delegatedEvents;r&&(n=r[e])&&n.removeListener(t,i)&&(this.$hasDelegatedListeners._decr_(e),0===n.listeners.length&&delete r[e])},destroyComponentDelegation:function(){this.clearPropertiesOnDestroy&&(this.$delegatedEvents=null)}},onClassMixedIn:function(e){function t(){}e.prototype.HasListeners=e.HasListeners=t,t.prototype=e.hasListeners=new Ext.mixin.ComponentDelegation.HasDelegatedListeners}},function(e){function t(){}(e.HasDelegatedListeners=t).prototype=e.prototype.$hasDelegatedListeners=new Ext.mixin.Observable.HasListeners}),Ext.define("Ext.plugin.Abstract",{alternateClassName:"Ext.AbstractPlugin",mixins:[Ext.mixin.Identifiable],isPlugin:!0,constructor:function(e){e&&(this.cmp=e.cmp,this.pluginConfig=e,this.initConfig(e))},init:Ext.emptyFn,destroy:function(){this.destroy=Ext.emptyFn,this.destroying=!0,this.cmp=this.pluginConfig=null,this.doDestroy(),this.callParent()},doDestroy:Ext.emptyFn,clonePlugin:function(e){return new this.self(Ext.apply({},e,this.pluginConfig))},getCmp:function(){return this.cmp},setCmp:function(e){this.cmp=e},getStatefulOwner:function(){return[this.cmp,"plugins"]},onClassExtended:function(e,t,i){var n=t.alias,r=e.prototype;n&&!t.ptype&&(Ext.isArray(n)&&(n=n[0]),r.ptype=n.split("plugin.")[1])},resolveListenerScope:function(e){var t,i=this.getCmp();return i&&(t=i.resolveSatelliteListenerScope(this,e)),t||this.mixins.observable.resolveListenerScope.call(this,e)},statics:{decode:function(e,t,i){if(e){var n,r,s,o,a=Ext.typeOf(e);if("string"===a)(s={})[t]=e,e=[s];else if(e.isInstance)e=[e];else if("object"===a)if(e[t])e=[e];else{for(r in s=i?Ext.merge(Ext.clone(i),e):e,e=[],s)(o=s[r])&&((n={id:r})[t]=r,Ext.apply(n,o),e.push(n));Ext.sortByWeight(e)}else"array"!==a?Ext.raise('Invalid value for "plugins" config ("'+a+'"'):e=e.slice()}return e}}}),Ext.define("Ext.mixin.Pluggable",function(i){return{mixinId:"pluggable",config:{plugins:null},addPlugin:function(e){var t=this.getPlugins();return t?((e=this.createPlugin(e)).init(this),t.push(e)):(this.setPlugins(e),e=this.getPlugins()[0]),e},destroyPlugin:function(e){return this.removePlugin(e,!0)},findPlugin:function(e){var t,i,n,r=this.getPlugins(),s=r&&r.length;for(t=0;t<s&&!n;t++)(i=r[t]).type!==e&&i.ptype!==e||(n=i);return n||null},getPlugin:function(e){var t,i,n,r=this.getPlugins(),s=r&&r.length;for(t=0;t<s&&!n;t++)(i=r[t]).id!==e&&i.pluginId!==e||(n=i);return n||null},removePlugin:function(e,t){for(var i,n=this.getPlugins(),r=n&&n.length||0;0<r--;){if((i=n[r])===e||i.id===e){n.splice(r,1),t?i.destroy&&i.destroy():i.detachCmp&&(i.detachCmp(),i.setCmp&&i.setCmp(null));break}i=null}return i},privates:{statics:{idSeed:0},activatePlugin:function(e){var t,i,n,r=this.initialConfig,s=r&&r.plugins,o=null;if(s)for(i=(i=this.config.plugins)&&"object"==typeof i?i:null,t=(s=Ext.plugin.Abstract.decode(s,"type",i)).length;0<t--;)if((n=s[t])===e||n.type===e){this.initialConfig=r=Ext.apply({},r),(r.plugins=s)[t]=o=this.createPlugin(n);break}return o},applyPlugins:function(e,t){var i,n,r,s=t&&t.length||0;for(e=e&&Ext.plugin.Abstract.decode(e,"type"),n=0;n<s;++n)t[n].$dead=!0;for(i=e&&e.length||0,n=0;n<i;++n)e[n]=this.createPlugin(e[n]);for(n=0;n<i;++n)(r=e[n]).$dead?delete r.$dead:r.init(this);for(n=0;n<s;++n)(r=t[n]).$dead&&(delete r.$dead,Ext.destroy(r));return e},createPlugin:function(e){var t;return"string"==typeof e&&(e={type:e}),(t=e).isInstance||(e.cmp=this,t=Ext.factory(e,null,null,"plugin"),delete e.cmp),t.id||(t.id=++i.idSeed),t.setCmp&&t.setCmp(this),t}}}}),Ext.define("Ext.mixin.Keyboard",function(d){return{extend:Ext.Mixin,mixinConfig:{id:"keyboard"},config:{keyMap:{$value:null,cached:!0,merge:function(e,t,i,n){var r,s,o,a,l;if(null===e)return e;for(s in r=t&&!i.isInstance?Ext.Object.chain(t):{},e)"scope"!==s&&(o=s.toUpperCase(),n&&void 0!==r[o]||((a=e[s])&&(l=(a="string"==typeof a||"function"==typeof a?{handler:a}:Ext.apply({handler:a.fn},a)).scope||e.scope||"self",a.scope="controller"===l?"self.controller":l),r[o]=a));return r}},keyMapEnabled:null},keyMapTarget:"el",applyKeyMap:function(e,t){var i=this.hasOwnProperty("config");return i&&t&&t.$owner!==this&&(t=Ext.apply({},t)),e=e?d.combineKeyMaps(t,e,i&&this):null,this._keyMapReady&&this.setKeyMapListener(e&&this.getKeyMapEnabled()),e},initKeyMap:function(){var e=this.getKeyMapEnabled();this._keyMapReady=!0,null===e?this.setKeyMapEnabled(!0):this.setKeyMapListener(e&&this.getKeyMap())},disableKeyMapGroup:function(e){this.setKeyMapGroupEnabled(e,!1)},enableKeyMapGroup:function(e){this.setKeyMapGroupEnabled(e,!0)},setKeyMapGroupEnabled:function(e,t){(this.disabledKeyMapGroups||(this.disabledKeyMapGroups={}))[e]=!t},updateKeyMapEnabled:function(e){this.setKeyMapListener(e&&this._keyMapReady&&this.getKeyMap())},privates:{_keyMapListenCount:0,_keyMapReady:!1,comparePriorities:function(e,t){return(t.priority||0)-(e.priority||0)},findKeyMapEntries:function(e){var t,i,n,r=this.disabledKeyMapGroups,s=this.getKeyMap(),o=s&&d.getKeyName(e),a=[];if(o=o&&s[o])for(o.sorted||(Ext.Array.sort(o,this.comparePriorities),o.sorted=!0),i=o.length,n=0;n<i;n++)t=o[n],r&&r[t.group]||d.matchEntry(t,e)&&a.push(t);return a},onKeyMapEvent:function(e){var t,i,n,r=this.getKeyMapEnabled()?this.findKeyMapEntries(e):null,s=r&&r.length;for(this.lastKeyMapEvent=e,t=0;t<s&&!1!==n;t++)i=r[t],n=Ext.callback(i.handler,i.scope,[e,this],0,this);return n},setKeyMapListener:function(e){var t,i=this._keyMapListener;i&&(i.destroy(),i=null),e&&(++this._keyMapListenCount,e&&("function"==typeof(t=this[this.keyMapTarget])&&(t=t.call(this)),i=t.on({destroyable:!0,scope:this,keydown:"onKeyMapEvent",keypress:"onKeyMapEvent"}))),this._keyMapListener=i||null},statics:{_charCodeRe:/^#([\\d]+)$/,_keySpecRe:/^(?:(?:(\\*)[\\+\\-])|(?:([a-z\\+\\-]*)[\\+\\-]))?(?:([a-z0-9_]+|[\\+\\-]|(?:#?\\d+))(?:\\:([a-z]+))?)$/i,_delimiterRe:/-|\\+/,_keyMapEvents:{charCode:"keypress",keyCode:"keydown"},combineKeyMaps:function(e,t,i){var n,r,s,o,a=t.scope||"controller";for(r in t)if("scope"!==r){if(s=t[r])s="string"==typeof s||"function"==typeof s?{handler:s,scope:a}:s&&Ext.apply({handler:s.fn,scope:a},s),e=e||{};else if(void 0===s&&Ext.raise('keyMap entry "'+r+'" is undefined'),!e)continue;d.parseEntry(r,n=s||{})?(o=e[n.name])?(i&&o.$owner!==i&&(e[n.name]=o=o.slice(),o.$owner=i),o.push(s),o.sorted=!1):((o=e[n.name]=[s]).$owner=i,o.sorted=!0):Ext.raise('Invalid keyMap key specification "'+r+'"')}return e&&i&&(e.$owner=i),e||null},getKeyName:function(e){var t;if(e.isEvent){if(t=e.keyCode||e.charCode,e=e.browserEvent,229===t&&"code"in e){if(Ext.String.startsWith(e.code,"Key"))return e.key.substr(3);if(Ext.String.startsWith(e.code,"Digit"))return e.key.substr(5)}}else t=e;return Ext.event.Event.keyCodes[t]||String.fromCharCode(t)},matchEntry:function(e,t){var i,n=t.browserEvent;if(t.type!==e.event)return!1;if(i=e.charCode){if(t.getCharCode()!==i)return!1}else if(e.keyCode!==t.keyCode||!e.ignoreModifiers&&!e.shiftKey!=!n.shiftKey)return!1;return e.ignoreModifiers||!e.ctrlKey==!n.ctrlKey&&!e.altKey==!n.altKey&&!e.metaKey==!n.metaKey&&!e.shiftKey==!n.shiftKey},parseEntry:function(e,t){e=e.toUpperCase();var i,n,r,s,o,a=Ext.event.Event,l=a.keyFlags,c=this._keySpecRe.exec(e),u="keyCode";if(c){if(i=c[3],c[4]&&(t.group=c[4]),!(t.ignoreModifiers=!!c[1])&&c[2])for(o=(c=c[2].split(this._delimiterRe)).length,r=0;r<o;r++){if(!l[c[r]])return!1;t[l[c[r]]]=!0}return t.name=i,isNaN(n=a[i])&&((s=this._charCodeRe.exec(i))?n=+s[1]:1===i.length&&(n=i.charCodeAt(0)),n?u="charCode":n=+i,t.name=d.getKeyName(n)),t.event=t.event||this._keyMapEvents[u],!isNaN(n)&&(t[u]=n)}}}}}}),Ext.define("Ext.mixin.Focusable",{mixinId:"focusable",$isFocusableEntity:!0,focusable:!1,hasFocus:!1,containsFocus:!1,focusCls:Ext.baseCSSPrefix+"focused",focusEl:"el",getFocusEl:function(){var e=this.focusEl;return e&&e.dom?e:null},getFocusClsEl:function(){return this.getFocusEl()},initFocusable:Ext.emptyFn,initFocusableEvents:function(e){this.initFocusableElement(e)},enableFocusable:Ext.emptyFn,disableFocusable:function(){this.hasFocus&&this.revertFocus(),this.removeFocusCls()},destroyFocusable:function(){Ext.destroy(this.focusListeners),this.focusListeners=this.focusEnterEvent=this.focusTask=null,this.focusEl=this.ariaEl=null},isFocusable:function(e){var t;return!!(this.focusable||this.isContainer&&e)&&(!(!(t=this.getFocusEl())||!this.canFocus())&&(t&&!t.destroyed&&t.isFocusable(e)))},isDestructing:function(){var e;for(e=this;e;e=e.getRefOwner())if(e.destroying||e.destroyed)return!0;return!1},canFocus:function(e,t){var i=this.ownerFocusableContainer,n=i&&i.allowFocusingDisabledChildren;return!this.destroyed&&this.rendered&&!this.isDestructing()&&(this.isContainer||this.focusable)&&(!this.isDisabled()||n)&&(e||this.isVisible(!0))||t&&!!this.findFocusTarget()},focus:function(e){var t,i,n=this;if(!n.focusable&&!n.isContainer||n.destroyed||n.destroying)return!1;if(!n.canFocus()||!(t=n.getFocusEl()))return!(!(t=n.findFocusTarget())||t===n)&&t.focus.apply(t,arguments);if(t.$isFocusableEntity)return t.focus.apply(t,arguments);if(i=t.dom)t.focus(),e&&(n.selectText||i.select)&&(n.selectText?Ext.isArray(e)?n.selectText.apply(n,e):n.selectText():i.select());else{if(!t.focus)return!1;t.focus()}return!0},onBlur:function(e){var t=this,i=t.ownerFocusableContainer;t.hasFocus=!1,t.beforeBlur&&!t.beforeBlur.$emptyFn&&t.beforeBlur(e),i&&i.beforeFocusableChildBlur(t,e),t.removeFocusCls(e),t.hasListeners.blur&&t.fireEvent("blur",t,e),t.postBlur&&!t.postBlur.$emptyFn&&t.postBlur(e),i&&i.afterFocusableChildBlur(t,e)},onFocus:function(e){var t=this,i=t.ownerFocusableContainer;t.canFocus()&&(t.beforeFocus&&!t.beforeFocus.$emptyFn&&t.beforeFocus(e),i&&i.beforeFocusableChildFocus(t,e),t.addFocusCls(e),t.hasFocus||(t.hasFocus=!0,t.fireEvent("focus",t,e)),t.postFocus&&!t.postFocus.$emptyFn&&t.postFocus(e),i&&i.afterFocusableChildFocus(t,e))},getTabIndex:function(){var e,t;if(this.focusable){if(e=this.getFocusEl())if(e.$isFocusableEntity)t=e.getTabIndex();else{if(!e.isElement||!e.dom)return;null!==(t=e.dom.getAttribute("tabIndex"))&&(t-=0)}return"number"!=typeof t&&(t=this.tabIndex),t}},setTabIndex:function(e,t){var i,n=this,r=n.ownerFocusableContainer,s=r&&r.allowFocusingDisabledChildren,o=n.focusable;(o||n.forceTabIndex||null==e)&&(n.tabIndex=e,n.destroying||n.destroyed||n.isDisabled()&&!s||(n.focusable=!0,i=t||n.getFocusEl(),n.focusable=o,i&&(i.$isFocusableEntity||i.isElement&&i.dom)&&i.setTabIndex(e)))},onFocusEnter:function(e){this.destroying||this.destroyed||(this.focusEnterEvent=e,this.containsFocus=!0,this.hasListeners.focusenter&&this.fireEvent("focusenter",this,e))},onFocusLeave:function(e){this.destroying||this.destroyed||(this.focusEnterEvent=null,this.containsFocus=!1,this.hasListeners.focusleave&&this.fireEvent("focusleave",this,e))},onFocusMove:Ext.emptyFn,privates:{forceTabIndex:!1,revertFocus:function(){var e,t,i=this.focusEnterEvent,n=Ext.Element.getActiveElement();i&&!this.preventRefocus&&this.el.contains(n)&&((e=(t=i.fromComponent)&&(t.destroyed||t.isDestructing())?document.body:i.relatedTarget)===document.body&&(t=this.findFocusTarget())&&(e=t.getFocusEl()),e&&e.$isFocusableEntity?!e.destroyed&&e.isFocusable()&&e.focus():Ext.getDoc().contains(e)&&Ext.fly(e).isFocusable()?(t=Ext.Component.from(e))?t.revertFocusTo(e):e.focus():i.fromComponent&&i.fromComponent.focus&&(i.fromComponent.focus()||n.blur()))},revertFocusTo:function(e){e.focus()},findFocusTarget:function(){var e,t,i,n,r,s;if(this.preventRefocus)return null;for(e=[],t=this.getRefOwner();t;t=t.getRefOwner())t.isDisabled()||e.unshift(t);for(n=0,i=e.length;n<i;n++)if((t=e[n]).destroying||!t.isVisible()){e.length=n;break}for(n=e.length-1;0<=n;n--){if(t=e[n],(r=Ext.ComponentQuery.query(":canfocus()",t)).length)return r[(s=Ext.Array.indexOf(r,Ext.ComponentManager.getActiveComponent()))+1]||r[s-1]||r[0];if(t.isFocusable&&t.isFocusable())return t}},initFocusableElement:function(e){var t=this.getTabIndex(),i=this.getFocusEl();i&&!i.$isFocusableEntity&&(null!=t&&(e||this.canFocus(!0))&&this.setTabIndex(t,i),i.dom.hasAttribute("data-componentid")||i.dom.setAttribute("data-componentid",this.id))},addFocusCls:function(e){var t,i=this.focusCls;t=this.getFocusClsEl(),i&&(t=this.getFocusClsEl(e))&&t.addCls(i)},removeFocusCls:function(e){var t,i=this.focusCls;i&&(t=this.getFocusClsEl(e))&&t.removeCls(i)},handleFocusEvent:function(e){var t;!this.focusable||this.destroying||this.destroyed||this.isFocusing(e)&&((t=new Ext.event.Event(e.event)).type="focus",t.relatedTarget=e.fromElement,t.target=e.toElement,this.onFocus(t))},handleBlurEvent:function(e){var t;!this.focusable||this.destroying||this.destroyed||e.toElement!==document.body&&!this.isBlurring(e)||((t=new Ext.event.Event(e.event)).type="blur",t.target=e.fromElement,t.relatedTarget=e.toElement,this.onBlur(t))},isFocusing:function(e){var t=this.getFocusEl();return!!t&&(t.isFocusing?t.isFocusing(e):t.dom===document.activeElement&&e.toElement===t.dom&&e.fromElement!==e.toElement)},isBlurring:function(e){var t=this.getFocusEl();return!!t&&(t.isFocusing?t.isBlurring(e):t.dom!==document.activeElement&&e.fromElement===t.dom&&e.fromElement!==e.toElement)},blur:function(){var e;this.focusable&&this.canFocus()&&(e=this.getFocusEl())&&(this.blurring=!0,e.blur(),delete this.blurring)},isTabbable:function(){var e;return!!(this.focusable&&(e=this.getFocusEl())&&e.isTabbable())&&e.isTabbable()},disableTabbing:function(){var e,t=this.el;this.destroying||this.destroyed||(t&&t.saveTabbableState(),(e=this.getFocusEl())&&(e.$isFocusableEntity?e.disableTabbing():e.isElement&&t&&!t.contains(e)&&e.saveTabbableState()))},enableTabbing:function(e){var t,i=this.el;this.destroying||this.destroyed||((t=this.getFocusEl())&&(t.$isFocusableEntity?t.enableTabbing():t.isElement&&i&&!i.contains(t)&&t.restoreTabbableState()),i&&i.restoreTabbableState({reset:e}))}}},function(){var t=Ext.baseCSSPrefix+"keyboard-mode",i=!1;function n(){i!==Ext.getBody().hasCls(t)&&Ext.setKeyboardMode(i)}Ext.enableKeyboardMode=Ext.isModern||!Ext.os.is.Desktop,Ext.setKeyboardMode=Ext.setKeyboardMode||function(e){Ext.keyboardMode=e,Ext.getBody().toggleCls(t,e)},Ext.isTouchMode=function(){return Ext.now()-Ext.lastTouchTime<500},Ext.syncKeyboardMode=function(e){var t;Ext.enableKeyboardMode&&("pointermove"===(t=e.type)?i=!1:(i="keydown"===t,Ext.lastTouchTime="touch"===e.pointerType&&Ext.now(),Ext.setKeyboardMode(i)))},Ext.getEnableKeyboardMode=function(){return Ext.enableKeyboardMode},Ext.setEnableKeyboardMode=function(e){var t={pointerdown:Ext.syncKeyboardMode,pointermove:Ext.syncKeyboardMode,keydown:Ext.syncKeyboardMode,capture:!0,delegated:!1};Ext.enableKeyboardMode=!!e,Ext.enableKeyboardMode?(Ext.getWin().on(t),Ext.on("focus",n)):(Ext.getWin().un(t),Ext.un("focus",n))},Ext.onReady(function(){Ext.enableKeyboardMode||Ext.getBody().addCls(t),Ext.setEnableKeyboardMode(Ext.enableKeyboardMode)})}),Ext.define("Ext.mixin.Accessible",{extend:Ext.Mixin,mixinConfig:{id:"accessible"},config:{ariaAttributes:{$value:null,lazy:!0}},ariaEl:"el",privates:{getAriaLabelEl:function(e){var t,i,n,r,s=[];if(e){if(Ext.isFunction(e))return e.call(this);if(Ext.isArray(e)||(e=[e]),t=this.lookupReferenceHolder())for(i=0,n=e.length;i<n;i++)(r=t.lookupReference(e[i]))&&s.push(r.ariaEl.id)}return s.length?s.join(" "):null}}}),Ext.define("Ext.Widget",{extend:Ext.Evented,xtype:"widget",alternateClassName:"Ext.Gadget",mixins:[Ext.mixin.Inheritable,Ext.mixin.Bindable,Ext.mixin.ComponentDelegation,Ext.mixin.Pluggable,Ext.mixin.Keyboard,Ext.mixin.Factoryable,Ext.mixin.Focusable,Ext.mixin.Accessible],isWidget:!0,factoryConfig:{creator:null,defaultProperty:"xtype",defaultType:"component",typeProperty:"xtype"},element:{reference:"element"},observableType:"component",cachedConfig:{cls:null,margin:null,style:null,border:null,touchAction:null,eventHandlers:{focus:"handleFocusEvent",blur:"handleBlurEvent"}},name:null,config:{renderTo:null,ui:null,userCls:null,ripple:null,hideMode:null,instanceCls:null},eventedConfig:{width:null,height:null,hidden:null,disabled:null},template:[],baseCls:null,classCls:null,classClsRoot:!0,classClsList:[],clearPropertiesOnDestroy:"async",focusEl:"element",ariaEl:"element",spaceRe:/\\s+/,noBorderCls:Ext.baseCSSPrefix+"noborder-trbl",borderedCls:Ext.baseCSSPrefix+"bordered",disabledCls:Ext.baseCSSPrefix+"disabled",heightedCls:Ext.baseCSSPrefix+"heighted",widthedCls:Ext.baseCSSPrefix+"widthed",constructor:function(e){var t,i=this,n=i.baseCls,r=e&&e.renderTo;i.$iid=++Ext.$nextIid,null!=n&&!0!==n||(i.baseCls=i.classCls||Ext.baseCSSPrefix+i.xtype),e&&"baseCls"in e&&Ext.raise("baseCls cannot be used as an instance config. It must be specified at class definition time."),(e&&e.controller||i.config.controller)&&(i.referenceHolder=!0),i.initId(e),i.initElement(),r&&delete(e=Ext.apply({},e)).renderTo,i.mixins.observable.constructor.call(i,e),i.focusable&&i.initFocusableEvents(!0),i.syncUiCls(),Ext.ComponentManager.register(i),(t=i.getController())&&t.init(i),r&&i.setRenderTo(r)},afterCachedConfig:function(){var e,t,i,n,r=this.self.prototype,s=this.referenceList,o=this.renderElement;for(r.renderTemplate=e=document.createDocumentFragment(),e.appendChild(o.clone(!0,!0)),t=0,i=(n=e.querySelectorAll("[id]")).length;t<i;t++)n[t].removeAttribute("id");for(t=0,i=s.length;t<i;t++)this[s[t]].dom.removeAttribute("reference")},applyHidden:function(e){return!!e},applyDisabled:function(e){return!!e},updateDisabled:function(e){var t=this,i=t.ownerFocusableContainer;i&&(e?i.beforeFocusableChildDisable.$nullFn||i.beforeFocusableChildDisable(t):i.beforeFocusableChildEnable.$nullFn||i.beforeFocusableChildEnable(t)),t.element.toggleCls(t.disabledCls,e),t.focusable&&(e?t.disableFocusable():t.enableFocusable()),i&&(e?i.onFocusableChildDisable.$nullFn||i.onFocusableChildDisable(t):i.onFocusableChildEnable.$nullFn||i.onFocusableChildEnable(t))},disable:function(){this.setDisabled(!0)},enable:function(){this.setDisabled(!1)},isDisabled:function(){return this.getDisabled()},isEnabled:function(){return!this.getDisabled()},applyTouchAction:function(e,t){return null!=t&&(e=Ext.merge({},t,e)),e},applyWidth:function(e){return this.filterLengthValue(e)},applyHeight:function(e){return this.filterLengthValue(e)},updateBorder:function(e){e=e||null===e,this.toggleCls(this.noBorderCls,!e),this.toggleCls(this.borderedCls,!!e)},clearListeners:function(){this.mixins.observable.clearListeners.call(this),this.mixins.componentDelegation.clearDelegatedListeners.call(this)},destroy:function(){this.isDestroying=this.destroying=!0,this.destroy=Ext.emptyFn,this.doDestroy(),this.clearListeners(),this.mixins.componentDelegation.destroyComponentDelegation.call(this),this.callParent()},doDestroy:function(){var e,t,i,n=this.referenceList,r=this.ownerFocusableContainer;for(this.ownerCmp=null,r&&!r.onFocusableChildDestroy.$nullFn&&r.onFocusableChildDestroy(this),e=0,t=n.length;e<t;e++)i=n[e],this.hasOwnProperty(i)&&(this[i].destroy(),this[i]=null);this.destroyBindable(),Ext.ComponentManager.unregister(this)},doFireEvent:function(e,t,i){var n,r;return!1===(r=this.mixins.observable.doFireEvent.call(this,e,t,i))||this.destroyed||(n=this.events[e])&&n.suspended||(r=this.mixins.componentDelegation.doFireDelegatedEvent.call(this,e,t)),r},getBubbleTarget:function(){return this.getRefOwner()},getElementConfig:function(){var e=this.element;return"children"in e||(e=Ext.apply({children:this.getTemplate()},e)),e},getSize:function(){return this.el.getSize()},getTemplate:function(){return Ext.clone(this.template)},getClassCls:function(){for(var e,t,i,n,r=this.self.prototype,s=r;s;){if(t=s.hasOwnProperty("classCls")?s.classCls:null)if(t instanceof Array)for(i=0,n=t.length;i<n;i++)(e=e||[]).push(t[i]);else(e=e||[]).push(t);if(s.classClsRoot&&s.hasOwnProperty("classClsRoot"))break;s=s.superclass}return e&&(r.classClsList=e),e},hide:function(){this.setHidden(!0)},initElement:function(){var e,t,i,n,r,s,o,a,l,c,u,d,h=this,f=h.self.prototype,g=h.getId(),p=h.referenceList=h.referenceList=[],m=!f.hasOwnProperty("renderTemplate"),x=f.hasOwnProperty("uiReferences")?f.uiReferences:f.uiReferences={element:""};if(m)for(e=document.createDocumentFragment(),i=h.processElementConfig.call(f),t=Ext.Element.create(i,!0),e.appendChild(t),s=0,o=(r=e.querySelectorAll("[uiCls]")).length;s<o;s++)l=(a=r[s]).getAttribute("reference"),u=a.getAttribute("uiCls"),l||Ext.raise('Cannot render element with uiCls="'+u+'". uiCls is only allowed on elements that have a reference name.'),x[l]=u,a.removeAttribute("uiCls");else t=(e=h.renderTemplate.cloneNode(!0)).firstChild;for(s=0,o=(r=e.querySelectorAll("[reference]")).length;s<o;s++)l=(a=r[s]).getAttribute("reference"),m||a.removeAttribute("reference"),"element"===l?(n&&Ext.raise("Duplicate 'element' reference detected in '"+h.$className+"' template."),a.id=g,(n=h.el=h.addElementReference(l,a)).dom.setAttribute("data-componentid",g),m&&((c=h.getClassCls())&&n.addCls(c),(d=h.baseCls)&&d!==h.classCls&&n.addCls(d))):(u=x[l])&&m?(h.addElementReference(l,a),h.initUiReference(l,u,!1)):h.addElementReferenceOnDemand(l,a),l===h.focusEl&&h.addElementReference("focusEl",a),l===h.ariaEl&&h.addElementReferenceOnDemand("ariaEl",a),p.push(l);n||Ext.raise("No 'element' reference found in '"+h.$className+"' template."),t===n.dom?h.renderElement=n:h.addElementReferenceOnDemand("renderElement",t),t.setAttribute(h.dataXid,h.$iid)},dataXid:"data-"+Ext.baseCSSPrefix.substr(0,Ext.baseCSSPrefix.length-1)+"id",is:function(e){return Ext.ComponentQuery.is(this,e)},isHidden:function(e){var t,i=!!this.getHidden();if(!i&&e)for(t=this.getRefOwner();t&&t!==e&&!i;)i=!!t.getHidden(),t=t.getRefOwner();return i},isVisible:function(e){return this.rendered&&!this.destroyed&&!this.isHidden(e)},isXType:function(e,t){return t?-1!==Ext.Array.indexOf(this.xtypes,e):!!this.xtypesMap[e]},lookupTpl:function(e){return Ext.XTemplate.getTpl(this,e)},owns:function(e){var t,i=!1;return e.isEvent?e=e.target:e.isElement&&(e=e.dom),(t=Ext.Component.from(e))&&(i=t===this||!!t.up(this)),i},render:function(e,t){e&&e.isWidget&&(e=e.el);var i,n=this.renderElement.dom,r=Ext.getDom(e);Ext.isNumber(i)&&(t=r.childNodes[t]),i=Ext.getDom(t),r&&(i?r.insertBefore(n,i):r.appendChild(n),this.setRendered(Ext.getBody().contains(n),!0))},toggleCls:function(e,t){return this.element.toggleCls(e,t),this},resolveListenerScope:function(e,t){return this.mixins.inheritable.resolveListenerScope.call(this,e,t)},setSize:function(e,t){if(e&&"object"==typeof e)return this.setSize(e.width,e.height);void 0!==e&&this.setWidth(e),void 0!==t&&this.setHeight(t)},show:function(){this.setHidden(!1)},addCls:function(e,t,i){this.destroyed||this.el.replaceCls(null,e,t,i)},applyCls:function(e){return e&&Ext.dom.Element.splitCls(e)},applyUi:function(e){return this.parseUi(e,!0)},removeCls:function(e,t,i){this.destroyed||this.el.replaceCls(e,null,t,i)},replaceCls:function(e,t,i,n){this.destroyed||this.el.replaceCls(e,t,i,n)},hasCls:function(e){return this.el.hasCls(e)},updateCls:function(e,t){this.element.replaceCls(t,e)},updateHidden:function(e){var t=this,i=t.renderElement,n=t.ownerFocusableContainer;n?e?n.beforeFocusableChildHide.$nullFn||n.beforeFocusableChildHide(t):n.beforeFocusableChildShow.$nullFn||n.beforeFocusableChildShow(t):e&&t.revertFocus(),i&&!i.destroyed&&(e?i.hide():i.show()),t.focusableContainer&&t.activateFocusableContainer&&t.activateFocusableContainer(!e),n&&(e?n.onFocusableChildHide.$nullFn||n.onFocusableChildHide(t):n.onFocusableChildShow.$nullFn||n.onFocusableChildShow(t))},updateMargin:function(e){this.element.setMargin(e)},updateRipple:function(e){var t=this.el;t&&(t.un("touchstart","onRippleStart",this),t.un("touchend","onRippleStart",this),t.destroyAllRipples(),e.release?t.on("touchend","onRippleStart",this):t.on("touchstart","onRippleStart",this))},shouldRipple:function(e){var t,i=this.getDisabled&&this.getDisabled(),n=this.el,r=!i&&this.getRipple();return r&&e&&(t=e.getTarget(this.noRippleSelector))&&(n.dom!==t&&!n.contains(t)||(r=null)),r},onRippleStart:function(e){var t=this.shouldRipple(e);0===e.button&&t&&this.el.ripple(e,t)},applyStyle:function(e,t){return t&&e===t&&Ext.isObject(t)&&(e=Ext.apply({},e)),this.element.applyStyles(e),null},getStyle:function(){Ext.Error.raise("'style' is a write-only config. To query element styles use the Ext.dom.Element API.")},updateRenderTo:function(e){this.render(e)},updateTouchAction:function(e){var t,i,n,r;for(t in e)i=this[t],n=e[t],i&&i.isElement?i.setTouchAction(n):r=!0;r&&this.el.setTouchAction(e)},updateUi:function(){this.isConfiguring||this.syncUiCls()},updateWidth:function(e){var t=this.el;t.setWidth(e),t.toggleCls(this.widthedCls,null!=e&&"auto"!==e)},updateHeight:function(e){var t=this.el;t.setHeight(e),t.toggleCls(this.heightedCls,null!=e&&"auto"!==e)},isWidthed:function(){var e=this.getWidth();return null!=e&&"auto"!==e},isHeighted:function(){var e=this.getHeight();return null!=e&&"auto"!==e},up:function(e,t){var i=this.getRefOwner(),n="string"==typeof t,r="number"==typeof t,s=t&&t.isComponent,o=0;if(e)for(;i;i=i.getRefOwner()){if(i.destroyed)return null;if(o++,e.isComponent||e.isWidget){if(i===e)return i}else if(Ext.ComponentQuery.is(i,e))return i;if(n&&i.is(t))return;if(r&&o===t)return;if(s&&i===t)return}return i},updateLayout:Ext.emptyFn,updateInstanceCls:function(e,t){var i,n,r,s,o,a,l=this.el,c=this.classClsList,u=Ext.Array,d=this.uiReferences;if(t)for(l.removeCls(t),r=0,s=(t=u.from(t)).length;r<s;r++)for(i in o=t[r],u.remove(c,o),d)n=this[i],a=d[i],n.removeCls(o+"-"+a);if(e)for(l.addCls(e),e=u.from(e),this.classClsList=c.concat(e),r=0,s=e.length;r<s;r++)for(i in o=e[r],d)n=this[i],a=d[i],n.addCls(o+"-"+a);this.isConfiguring||this.syncUiCls()},getBaseCls:function(){return this.baseCls},setBaseCls:function(){Ext.raise("baseCls cannot be reconfigured. It must be specified at class definition time.")},onClassExtended:function(e,t){t.config&&t.config.baseCls&&Ext.raise("baseCls must be declared directly on the class body. Please move it outside of the config block.")},privates:{_hideModes:{clip:"CLIP",display:"DISPLAY",offsets:"OFFSETS",opacity:"OPACITY",visibility:"VISIBILITY"},noRippleSelector:"."+Ext.baseCSSPrefix+"no-ripple",addElementReferenceOnDemand:function(e,t){this._elementListeners[e]?this.addElementReference(e,t):Ext.Object.defineProperty(this,e,{get:function(){return this.destroyed?null:(delete this[e],this.addElementReference(e,t))},configurable:!0})},addElementReference:function(e,t){var i,n,r=this[e]=Ext.get(t),s=this._elementListeners[e];if(r.skipGarbageCollection=!0,r.component=this,s){for(i in s=Ext.clone(s))"object"==typeof(n=s[i])&&(n.scope=this);s.scope=this,r.on(s)}return r},detachFromBody:function(){Ext.getDetachedBody().appendChild(this.element,!0),this.isDetached=!0},reattachToBody:function(){this.isDetached&&Ext.getDetachedBody().contains(this.element)&&Ext.getBody().appendChild(this.element,!0),this.isDetached=!1},doAddListener:function(e,t,i,n,r,s,o){var a,l,c,u=n&&n.element,d=n&&n.delegate;if(u){for(c in-1===Ext.Array.indexOf(this.referenceList,u)&&Ext.Logger.error("Adding event listener with an invalid element reference of '"+u+"' for this component. Available values are: '"+this.referenceList.join("', '")+"'",this),(a={})[e]=t,i&&(a.scope=i),l=Ext.Element.prototype.$eventOptions,n)l[c]&&(a[c]=n[c]);this.mon(this[u],a)}else d?this.mixins.componentDelegation.addDelegatedListener.call(this,e,t,i,n,r,s,o):this.callParent([e,t,i,n,r,s,o])},doRemoveListener:function(e,t,i){this.mixins.observable.doRemoveListener.call(this,e,t,i),this.mixins.componentDelegation.removeDelegatedListener.call(this,e,t,i)},filterLengthValue:function(e){return e||0===e?e:null},hasHiddenContent:function(){return this.getHidden()},initElementListeners:function(e){var t,i,n,r,s,o=this.self.superclass._elementListeners,a=e.reference,l=e.children;if(t=this.hasOwnProperty("_elementListeners")?this._elementListeners:this._elementListeners=o?Ext.Object.chain(o):{},a&&(i=e.listeners)&&(o&&(n=o[a])&&(i=Ext.Object.chain(n),Ext.apply(i,e.listeners)),t[a]=i,e.listeners=null),l)for(s=0,r=l.length;s<r;s++)this.initElementListeners(l[s])},initId:function(e){var t=this.config,i=e&&e.id||t&&t.id;i?(this.setId(i),this.id=i):this.getId()},measure:function(e){return this.element.measure(e)},processElementConfig:function(){var e,t=this.self.superclass;return this.hasOwnProperty("_elementConfig")?e=this._elementConfig:(e=this._elementConfig=this.getElementConfig(),t.isWidget&&this.processElementConfig.call(t),this.initElementListeners(e)),e},parseUi:function(e,t){return e=Ext.String.splitWords(e),t&&(e=e.join(" ")),e},addUi:function(e){this.setUi(this.doAddUi(e,this.getUi()))},doAddUi:function(e,t){var i,n,r,s=null;if(e){for(r=(e=this.parseUi(e)).length,t=this.parseUi(t),i=0;i<r;i++)n=e[i],-1===Ext.Array.indexOf(t,n)&&t.push(n);s=t.join(" ")}return s},removeUi:function(e){this.setUi(this.doRemoveUi(e,this.getUi()))},doRemoveUi:function(e,t){var i,n,r,s,o=null;if(e){for(s=(e=this.parseUi(e)).length,t=this.parseUi(t),i=0;i<s;i++)n=e[i],-1!==(r=Ext.Array.indexOf(t,n))&&t.splice(r,1);o=t.join(" ")}return o},initUiReference:function(e,t,i){var n,r,s=this,o=s[e],a=s.baseCls,l=s.classClsList,c=[];if((i=!1!==i)&&(s.hasOwnProperty("uiReferences")||(s.uiReferences=Ext.clone(s.uiReferences)),s.uiReferences[e]=t),t="-"+t,a&&a!==s.classCls&&c.push(a+t),l)for(n=0,r=l.length;n<r;n++)c.push(l[n]+t);o.addCls(c),i&&!s.isConfiguring&&s.syncUiCls()},syncUiCls:function(e){var t,i,n,r,s,o,a,l,c,u=this.getUi(),d=this.currentUiCls||(this.currentUiCls={}),h=this.baseCls,f=e||this.uiReferences,g=this.classClsList,p=g?g.length:0;for(n in u&&(i=(u=this.parseUi(u)).length),f)if(t=[],(r=this[n])&&((s=d[n])&&r.removeCls(s),u)){for(o=(o=f[n])?"-"+o:"",l=0;l<i;l++)if(a="-"+u[l]+o,h&&h!==this.classCls&&t.push(h+a),g)for(c=0;c<p;c++)t.push(g[c]+a);r.addCls(t),d[n]=t}},applyHideMode:function(e){return e||"display"},updateHideMode:function(e){var t=this.el,i=this.getHidden();this._hideModes[e]||Ext.raise('Invalid hideMode: "'+e+'" (must be one of: "'+Object.keys(this._hideModes).join('", "')+'")'),i&&t.show(),this.renderElement.setVisibilityMode(Ext.Element[this._hideModes[e]]),i&&t.hide()},updateUserCls:function(e,t){this.element.replaceCls(t,e)}}},function(e){var t=e.prototype;(t.$elementEventOptions=Ext.Object.chain(Ext.Element.prototype.$eventOptions)).element=1,(t.$eventOptions=Ext.Object.chain(t.$eventOptions)).delegate=1,Ext.updateWidget=Ext.Factory.widget.update}),Ext.define("Ext.mixin.Traversable",{extend:Ext.Mixin,mixinConfig:{id:"traversable"},setParent:function(e){return this.parent=e,this},hasParent:function(){return Boolean(this.getParent())},is:function(){return!0},getParent:function(){return this.parent||this.$initParent},getAncestors:function(){for(var e=[],t=this.getParent();t;)e.push(t),t=t.getParent();return e},getAncestorIds:function(){for(var e=[],t=this.getParent();t;)e.push(t.getId()),t=t.getParent();return e},previousNode:function(e,t){var i,n,r,s,o=this.getRefOwner();if(t&&this.is(e))return this;if(o){for(n=o.items.items,r=Ext.Array.indexOf(n,this)-1;-1<r;r--){if((s=n[r]).query&&(i=(i=s.query(e))[i.length-1]))return i;if(!e||s.is(e))return s}return o.previousNode(e,!0)}return null},previousSibling:function(e){var t,i,n,r=this.getRefOwner();if(r&&-1!==(i=(t=r.items).indexOf(this)))if(e){for(--i;0<=i;i--)if((n=t.getAt(i)).is(e))return n}else if(i)return t.getAt(--i);return null},nextNode:function(e,t){var i,n,r,s,o,a=this.getRefOwner();if(t&&this.is(e))return this;if(a){for(n=a.items.items,s=Ext.Array.indexOf(n,this)+1,r=n.length;s<r;s++){if(o=n[s],!e||o.is(e))return o;if(o.down&&(i=o.down(e)))return i}return a.nextNode(e)}return null},nextSibling:function(e){var t,i,n,r,s=this.getRefOwner();if(s&&(n=(t=s.items).indexOf(this)+1))if(e){for(i=t.getCount();n<i;n++)if((r=t.getAt(n)).is(e))return r}else if(n<t.getCount())return t.getAt(n);return null}}),Ext.define("Ext.fx.easing.Abstract",{config:{startTime:0,startValue:0},isEasing:!0,isEnded:!1,constructor:function(e){return this.initConfig(e),this},applyStartTime:function(e){return e=e||Ext.Date.now()},updateStartTime:function(e){this.reset()},reset:function(){this.isEnded=!1},getValue:Ext.emptyFn}),Ext.define("Ext.fx.easing.Linear",{extend:Ext.fx.easing.Abstract,alias:"easing.linear",config:{duration:0,endValue:0},updateStartValue:function(e){this.distance=this.getEndValue()-e},updateEndValue:function(e){this.distance=e-this.getStartValue()},getValue:function(){var e=Ext.Date.now()-this.getStartTime(),t=this.getDuration();return t<e?(this.isEnded=!0,this.getEndValue()):this.getStartValue()+e/t*this.distance}}),Ext.define("Ext.util.translatable.Abstract",{extend:Ext.Evented,mixins:[Ext.mixin.Factoryable],factoryConfig:{type:"translatable",defaultType:"csstransform"},config:{easing:null,easingX:{duration:300},easingY:{duration:300},offsetX:0,offsetY:0},x:0,y:0,activeEasingX:null,activeEasingY:null,isAnimating:!1,isTranslatable:!0,constructor:function(e){this.callParent([e]),this.position={x:0,y:0}},factoryEasing:function(e){return Ext.factory(e,Ext.fx.easing.Linear,null,"easing")},applyEasing:function(e){this.getEasingX()||this.setEasingX(this.factoryEasing(e)),this.getEasingY()||this.setEasingY(this.factoryEasing(e))},applyEasingX:function(e){return this.factoryEasing(e)},applyEasingY:function(e){return this.factoryEasing(e)},updateOffsetX:function(){this.isConfiguring||this.isAnimating||this.translateXY(this.x,this.y)},updateOffsetY:function(){this.isConfiguring||this.isAnimating||this.translateXY(this.x,this.y)},translate:function(e,t,i){if(i)return this.translateAnimated(e,t,i);this.isAnimating&&this.stopAnimation(),isNaN(e)||"number"!=typeof e?e=this.x:this.x=e,isNaN(t)||"number"!=typeof t?t=this.y:this.y=t,this.translateXY(e,t)},translateXY:function(e,t){this.destroyed||(this.doTranslate(e+this.getOffsetX(),t+this.getOffsetY()),this.hasListeners.translate&&this.fireEvent("translate",this,e,t))},translateAxis:function(e,t,i){var n,r;return"x"===e?n=t:r=t,this.translate(n,r,i)},getPosition:function(){var e=this.position;return e.x=-this.x,e.y=-this.y,e},animate:function(e,t){var i=this;return i.activeEasingX=e,i.activeEasingY=t,i.isAnimating=!0,i.ownerCmp&&(i.ownerCmp.isTranslating=!0),i.lastX=null,i.lastY=null,Ext.AnimationQueue.start(i.doAnimationFrame,i),i.fireEvent("animationstart",i,i.x,i.y),i},translateAnimated:function(e,t,i){var n,r,s,o,a=this;return Ext.isObject(i)||(i={}),a.isAnimating&&a.stopAnimation(),a.callback=i.callback,a.callbackScope=i.scope,n=Ext.Date.now(),r=i.easing,s="number"==typeof e?i.easingX||r||a.getEasingX()||!0:null,o="number"==typeof t?i.easingY||r||a.getEasingY()||!0:null,s&&((s=a.factoryEasing(s)).setStartTime(n),s.setStartValue(a.x),s.setEndValue(e),"duration"in i&&s.setDuration(i.duration)),o&&((o=a.factoryEasing(o)).setStartTime(n),o.setStartValue(a.y),o.setEndValue(t),"duration"in i&&o.setDuration(i.duration)),a.animate(s,o)},doAnimationFrame:function(){var e,t,i=this,n=i.activeEasingX,r=i.activeEasingY,s=Date.now();i.isAnimating&&(i.lastRun=s,null!==n||null!==r?(null!==n?(i.x=e=Math.round(n.getValue()),n.isEnded&&(i.activeEasingX=null,i.fireEvent("axisanimationend",i,"x",e))):e=i.x,null!==r?(i.y=t=Math.round(r.getValue()),r.isEnded&&(i.activeEasingY=null,i.fireEvent("axisanimationend",i,"y",t))):t=i.y,i.lastX===e&&i.lastY===t||(i.translateXY(e,t),i.lastX=e,i.lastY=t),i.fireEvent("animationframe",i,e,t)):i.stopAnimation())},stopAnimation:function(){var e=this;e.isAnimating&&(e.activeEasingX=null,e.activeEasingY=null,e.isAnimating=!1,e.ownerCmp&&(e.ownerCmp.isTranslating=!1),Ext.AnimationQueue.stop(e.doAnimationFrame,e),e.fireEvent("animationend",e,e.x,e.y),e.callback&&(e.callback.call(e.callbackScope),e.callback=null))},refresh:function(){this.translate(this.x,this.y)},resolveListenerScope:function(){var e=this.ownerCmp,t=arguments;return e?e.resolveListenerScope.apply(e,t):this.callParent(t)},destroy:function(){this.destroying=!0,this.isAnimating&&this.stopAnimation(),this.callParent(),this.destroyed=!0}}),Ext.define("Ext.overrides.Widget",{override:"Ext.Widget",mixins:[Ext.mixin.Traversable],statics:{floatInset:8,onModalMaskTap:function(e){var t=this.topModal;t&&t.onModalMaskTap&&t.onModalMaskTap(e)&&(this.topModal=null)},range:document.createRange()},config:{flex:{evented:!0,$value:null},itemId:void 0,floated:null,relative:null,x:null,y:null,shadow:null,shim:null,alwaysOnTop:null,toFrontOnShow:!0,translatable:{lazy:!0,$value:null},constrainAlign:null,alignSelf:null},inheritUi:!1,floatedCls:Ext.baseCSSPrefix+"floated",floatedSelector:"."+Ext.baseCSSPrefix+"floated",shadowCls:Ext.baseCSSPrefix+"shadow",noShadowCls:Ext.baseCSSPrefix+"no-shadow",floatWrapCls:Ext.baseCSSPrefix+"float-wrap",shimCls:Ext.baseCSSPrefix+"shim",rootCls:Ext.baseCSSPrefix+"root",isInner:!0,clearPropertiesOnDestroy:"async",beforeHide:Ext.emptyFn,afterHide:function(){var e=this.getParent();e&&e.afterItemHide&&e.afterItemHide(this),this.getFloated()&&this.syncShim()},beforeShow:Ext.emptyFn,afterShow:function(){var e=this.getParent();e&&e.afterItemShow&&e.afterItemShow(this)},applyItemId:function(e){return e||this.getId()},doDestroy:function(){var e=this,t=e.getParent(),i=e.floatWrap;t&&t.remove&&t.remove(e,!1),e.setShim(!1),Ext.destroy(e.getTranslatable()),i&&(e.un("resize","syncFloatWrap",e),i.destroy(),e.floatWrap=null),e.removeBindings(),e.callParent()},isInnerItem:function(){return this.isInner},isCentered:function(){return!1},isDocked:function(){return Boolean(this.getDocked())},isPositioned:function(){return!1},getDocked:function(){return this._docked},isHidden:function(e){var t;return this.isConfiguring?(t=this.getConfig("hidden",!0),this.getConfig("floated",!0)?!1!==t:!!t):this.callParent([e])},onAdded:function(e,t){var i=this.parent;i&&i!==e&&i.remove(this,!1),this.parent=e,this.onInheritedAdd(e,t),this.isDetached=!1,this.getFloated()&&this.findFloatParent(),this.inheritUi&&this.doInheritUi()},onRemoved:function(e){this.inheritUi&&!e&&this.doUninheritUi(),this.onInheritedRemove(e),this.parent=null},setIsInner:function(e){var t;e!==this.isInner&&(this.isInner=e,(t=this.initialized&&this.getParent())&&t.onItemInnerStateChange(this,e))},refreshInnerState:function(){this.setIsInner(!(this.getFloated()||this.isCentered()||this.isPositioned()||this.isDocked()))},toFront:function(e){var t;return this.getFloated()||Ext.raise("Cannot use toFront on a non-floated component"),t=this.getFloatParent(),this.hasListeners.beforetofront&&!1===this.fireEvent("beforetofront",this)||(this.syncAlwaysOnTop(e),t&&t.getFloated()&&t.toFront(e),this.hasListeners.tofront&&this.fireEvent("tofront",this)),this},applyTranslatable:function(e,t){return Ext.Factory.translatable.update(t,e,this,"createTranslatable")},createTranslatable:function(e){var t=e.listeners;return e=Ext.apply({type:"cssposition",ownerCmp:this,element:this.renderElement},e),t&&"this"===t.scope&&(e.listeners=t=Ext.apply({},t),t.scope=this),e},ensureTranslatable:function(){var e=this.getTranslatable();return e||(this.setTranslatable(!0),e=this.getTranslatable()),e},translate:function(){var e=this.ensureTranslatable();e.translate.apply(e,arguments)},getAlignmentInfo:function(e,t){var i=e.isRegion?e:(e.isWidget?e.renderElement:Ext.fly(e)).getBox(),n=this.renderElement.getBox(),r={alignToBox:i,alignment:t,top:i.top,left:i.left,alignToWidth:i.width||0,alignToHeight:i.height||0,width:n.width,height:n.height,anchor:!(!this.getAnchor||!this.getAnchor())},s=this.getCurrentAlignmentInfo(),o=!0;return Ext.isEmpty(s)?o=!1:Ext.Object.each(r,function(e,t){return!(!Ext.isObject(t)&&s[e]!==t)||(o=!1)}),{isAligned:o,stats:r}},getCurrentAlignmentInfo:function(){return this.$currentAlignmentInfo},setCurrentAlignmentInfo:function(e){this.$currentAlignmentInfo=Ext.isEmpty(e)?null:Ext.merge({},e.stats?e.stats:e)},alignTo:function(e,t,i){var n,r,s=this,o=s.getAlignmentInfo(e,t),a=s.initialConfig,l=!s.getFloated(),c=l?s.setLeft:s.setX,u=l?s.setTop:s.setY;o.isAligned||("unconstrainedWidth"in s&&s.setWidth(s.unconstrainedWidth),"unconstrainedHeight"in s&&s.setHeight(s.unconstrainedHeight),r=s.getAlignRegion(e,t,i),c.call(s,r.x),u.call(s,r.y),r.constrainWidth&&(s.unconstrainedWidth=a.width||s.self.prototype.width,n=s.el.getHeight(),s.setWidth(o.stats.width=r.getWidth()),0===r.align.position&&u.call(s,r.y+(n-s.el.getHeight()))),r.constrainHeight&&(s.unconstrainedHeight=a.height||s.self.prototype.height,s.setHeight(o.stats.height=r.getHeight())),s.alignToArgs=[e,t,i],s.setCurrentAlignmentInfo(o))},realign:function(e,t,i){var n=this.alignToArgs;this.isVisible()&&this.alignTo.call(this,e||n[0],t||n[1],i||n[2])},getAlignRegion:function(e,t,i){var n,r,s,o,a,l,c=this.getAlignmentInfo(e,t);if(!c.isAligned)return s=c.stats.alignToBox,o=this.getConstrainAlignRegion(),a=c.stats.height,l=c.stats.width,!o||t&&"auto"!==t||(t=o.bottom-s.bottom<a?s.top-o.top<a?s.left-o.left<l?"l-r?":"r-l?":"b-t?":"t-b?"),"!"===(n=t[t.length-1])?(r=e.isRegion?e:(e.isWidget?e.renderElement:Ext.fly(e)).getBox(),t=t.substr(0,t.length-1)):(r=o,"?"===n&&(t=t.substr(0,t.length-1))),this.el.getRegion().alignTo(Ext.apply({target:Ext.util.Region.from(c.stats.alignToBox),align:t,inside:r,minWidth:this.getMinWidth&&this.getMinWidth(),minHeight:this.getMinHeight&&this.getMinHeight()},i))},render:function(e,t){this.getFloated()?Ext.raise("floated: true components cannot be rendered. They render themselves on first show"):this.callParent([e,t])},afterRender:Ext.emptyFn,onRender:Ext.emptyFn,applyFloated:function(e){return Boolean(e)},updateFloated:function(e,t){var i,n,r=this,s=r.floatWrap;e?(r.refreshInnerState=Ext.emptyFn,r.isPositioned()&&r.resetPositioned(),r.isDocked()&&r.setDocked(!1),delete r.refreshInnerState):s&&(s.dom.removeChild(r.el.dom),r.un("resize","syncFloatWrap",r),s.destroy(),r.floatWrap=null,r.setRendered(!1)),r.refreshInnerState(),r.el.toggleCls(r.floatedCls,e),r.hasOwnProperty("_modal")&&((i=r.getModal&&r.getModal())&&(r.setModal(!1),e?(Ext.destroy(i),r.isVisible()&&r.showModalMask()):(n=r.getModalSibling())?n.showModalMask():r.hideModalMask(),r.setModal(!0)),r.getHideOnMaskTap&&r.getHideOnMaskTap()&&(r.setHideOnMaskTap(!1),r.setHideOnMaskTap(!0))),r.syncFloatedState(e,t,r.rendered&&!1===t)},applyUi:function(e){var t=this._inheritedUi;return e=this.callParent([e]),t&&(e=this.doAddUi(t,e)),e},updateUi:function(e,t){var i,n,r,s;if(this.callParent([e,t]),this.$inheritUiCount&&!this.destroying)for(r=0,s=(n=this.getRefItems()).length;r<s;r++)(i=n[r]).inheritUi&&(i.doUninheritUi(),i.doInheritUi())},updateHidden:function(e,t){var i=Ext.GlobalEvents,n=e?"hide":"show";this.callParent([e,t]),!this.isConfiguring&&i.hasListeners[n]&&i.fireEvent(n,this)},updateAlignSelf:function(e){this.el.setStyle({"align-self":e})},privates:{setRendered:function(e,t){var i,n,r,s,o,a=this;if(!e&&a.rendered&&a.getFloated()&&a.floatWrap.dom.parentNode.removeChild(a.floatWrap.dom),a.rendered=e,!a.destroying&&!a.destroyed){for(e&&a.onRender&&(a.initBindable(),a.initKeyMap(),a.onRender.$nullFn||a.onRender(),a.onRender=null,a.afterRender.$nullFn||(Ext._afterRenderQueue||(Ext._afterRenderQueue=[])).push(a)),s=(r=a.getRefItems&&a.getRefItems())&&r.length,o=0;o<s;o++)(n=r[o]).setRendered&&a.setChildRendered(e,n);if(a.focusableContainer&&a.initFocusableContainer&&a.initFocusableContainer(),t&&(i=Ext._afterRenderQueue))for(;i.length;)(n=i.pop()).destroyed||n.afterRender()}},setChildRendered:function(e,t){e&&t.getFloated()||t.setRendered(e)},hideFromModal:function(){this.hide()},owns:function(e){var t,i=!1;return e.isEvent?e=e.target:e.isElement&&(e=e.dom),(t=Ext.Component.from(e))&&(i=t===this||!!t.up(this)),i},doInheritUi:function(){var e,t;this.inheritUi&&(this._ownUi=this.getUi(),(t=(e=this.getRefOwner()).getUi())&&(this.addUi(t),this._inheritedUi=t),e.$inheritUiCount=(e.$inheritUiCount||0)+1)},doUninheritUi:function(){var e,t;this.inheritUi&&(t=this.getRefOwner(),e=this._ownUi,this._ownUi=null,this._inheritedUi=null,this.setUi(e||null),t.$inheritUiCount&&--t.$inheritUiCount)},getBubbleTarget:function(){return this.getParent()},getConstrainAlignRegion:function(){var e,t,i,n=this.getFloated(),r=this.getConstrainAlign();if(!1!==r)return"string"==typeof r&&(r=e=this.up(r)),this.floatParentNode.destroyed&&!this.destroyed&&this.findFloatParent(),r||(e=n?this.floatParentNode.getData().component:this.getParent()),e?t=e.getFloated()&&!e.getRelative()?(r=Ext.getBody(),!0):(r=e.getRenderTarget?e.getRenderTarget():e.bodyElement||e.element,e.isViewport):r=r||(n?(t=!0,Ext.getBody()):this.element.parent()),r.isRegion||(r=Ext.fly(r).getConstrainRegion(),t&&(i=Math.round(Ext.Widget.floatInset),r.adjust(i,-i,-i,i))),r},getFloatParent:function(){var e=this.floatParentNode.getData().component;return e&&e.getFloated()?e:null},syncFloatedState:function(e,t,i){var n=this,r=n.isHidden();e?i?(n.isCentered()?(n.getWidth(),n.getHeight(),n.center()):n.syncXYPosition(),r||n.showModalMask()):r?n.setHidden(!0):n.findFloatParent():n.translate(0,0,0)},findFloatParent:function(e){for(var t=this.getRefOwner();t&&!t.getFloated();)t=t.getRefOwner();this.floatParentNode=t?t.getFloatWrap():Ext.getFloatRoot(),this.insertFloatedDom(e)},getFloatWrap:function(){var e=this,t=e.floatWrap;return t||(e.floatWrap=t=Ext.get(Ext.DomHelper.createDom({cls:e.floatWrapCls,id:e.id+"-floatWrap","data-componentId":e.id})),e.on("resize","syncFloatWrap",e),!(t.getData().component=e).isContainer||e.isWidthed()&&e.isHeighted()||e.setAutoSize(!0),t.dom.appendChild(e.element.dom),t.getData().alwaysOnTop=e.element.getData().alwaysOnTop,e.syncFloatWrap()),t},applyRenderTo:function(e){if(!e||!this.getFloated())return e;Ext.raise("floated: true components cannot be rendered. They render themselves on first show")},syncFloatWrap:function(){var e,t=this.floatWrap,i=this.el.getSize();this.getRelative()?t.setSize(i):(e=t.getData().modalMask)&&e.setSize(i)},insertFloatedDom:function(e){var t=this.getFloatWrap(),i=this.floatParentNode;t.dom.parentNode!==i.dom&&(i.dom.appendChild(this.getFloatWrap().dom),e&&(this.setVisibility(!0),this._hidden=!1),this.setRendered(!0,!0),this.syncXYPosition())},applyShim:function(e){return e&&!this.getFloated()&&Ext.raise("Cannot use setShim on a non-floated component"),e?Ext.getBody().createChild(Ext.apply({cls:this.shimCls},e)):(Ext.destroy(this.shim),null)},updateShim:function(e,t){e?(this.syncShim(),t||this.on("resize","syncShim",this)):t&&this.un("resize","syncShim",this)},hideModalMask:function(){var e,t,i=Ext.getFloatRoot(),n=this.floatParentNode;n&&(e=n.getData(),n===i||e.component.getRelative()||(e=i.getData()),(t=e.modalMask)&&t.dom.parentNode&&(t=t.dom,Ext.getDetachedBody().appendChild(t))),Ext.Viewport&&Ext.Viewport.enableTabbing()},showModalMask:function(){var e,t=Ext.Widget,i=Ext.getFloatRoot(),n=this.getFloatWrap(),r=this.getParent(),s=this.floatParentNode,o=s.getData();this.getFloated()&&this.getModal&&this.getModal()&&(s===i||o.component.getRelative()||(o=i.getData()),(e=o.modalMask)?n.dom.parentElement===s.dom?s.dom.insertBefore(e.dom,n.dom):s.dom.appendChild(e.dom):((e=o.modalMask=s.createChild({cls:"x-mask"},n)).on({tap:t.onModalMaskTap,scope:t}),Ext.isiOS&&s===i&&e.on({touchmove:function(e){e.preventDefault()}})),t.topModal=this,r&&r.getFloated()&&!r.getRelative()&&r.syncXYPosition(),Ext.Viewport&&Ext.Viewport.disableTabbing())},syncShim:function(){var e=this.getShim();e&&(this.isVisible(!0)?(e.show(),this.getFloatWrap().dom.insertBefore(e.dom,this.el.dom),e.setSize(this.getSize())):e.hide())},updateAlwaysOnTop:function(e){this.getFloatWrap().getData().alwaysOnTop=Number(e),this.floatParentNode||this.findFloatParent(),this.isConfiguring||this.syncAlwaysOnTop()},syncAlwaysOnTop:function(e){var t,i,n,r,s,o,a=this,l=a.getFloatWrap().dom,c=a.floatParentNode,u=c.dom.childNodes,d=u.length,h=Number(a.getAlwaysOnTop()),f=a.statics().range,g=Ext.Mask.prototype.baseCls;if(i=c===Ext.floatRoot?0:1,s=a.getModal&&a.getModal()&&l.previousSibling&&Ext.fly(l.previousSibling).hasCls(g),l.nextSibling){for(t=d-1;i<=t;t--)if(!(n=Ext.fly(u[t])).hasCls(a.shimCls)&&!n.hasCls(g)&&u[t]!==l&&h>=(Ext.get(u[t]).getData().alwaysOnTop||0)){r=u[t].nextSibling;break}if(r===l)return;t<i&&(r=u[0]),a.containsFocus||e?(f.setStartAfter(l),f.setEndAfter(r||u[d-1]),c.dom.insertBefore(f.extractContents(),l)):c.dom.insertBefore(l,r)}else if(l.previousSibling)for(t=d-2;i<=t;t--)Ext.fly(u[t]).is("."+a.shimCls)||u[t]===l||h<(o=Ext.get(u[t]).getData().alwaysOnTop)&&(r=u[t],c.dom.insertBefore(r,null),u[t-1]&&Ext.fly(u[t-1]).hasCls(g)&&(c.dom.insertBefore(u[t-1],r),--t),h=o);if(s&&a.showModalMask(),a.syncShim(),!r||Ext.fly(r).hasCls(g))return!0;Ext.Component.from(r).syncShim()},updateRelative:function(){this.syncXYPosition()},updateShadow:function(e){this.el.toggleCls(this.shadowCls,e),this.el.toggleCls(this.noShadowCls,!1===e)},updateX:function(){this.getFloated()||Ext.raise("Cannot use setX on a non-floated component"),this.$updatingXY||this.syncXYPosition()},updateY:function(){this.getFloated()||Ext.raise("Cannot use setY on a non-floated component"),this.$updatingXY||this.syncXYPosition()},syncXYPosition:function(e){var t,i=this.getFloatWrap(),n=e,r=this.getX()||0,s=this.getY()||0;this.getRelative()?(i.translate(r,s,e),i.setWidth(this.el.getWidth()),i.setHeight(this.el.getHeight()),this.translate(0,0),(t=i.getData().modalMask)&&t.translate(0,0)):(this.translate(r,s,e),(t=i.getData().modalMask)&&(n&&delete(n=Ext.apply({},n)).callback,t.translate(r,s,n))),this.syncShim()}}},function(n){this.borrow(Ext.util.Positionable,["clipTo","clearClip"]),n.createAlias({prev:"previousSibling",next:"nextSibling"}),Ext.getFloatRoot=function(){var e=Ext.floatRoot,t=n.prototype,i=n.range;return e?e.el.dom.nextSibling&&(e.el.contains(document.activeElement)?(i.setStartBefore(e.el.dom.nextSibling),i.setEndAfter(e.el.dom.parentNode.lastChild),e.el.dom.parentNode.insertBefore(i.extractContents(),e.el.dom)):e.el.dom.parentNode.appendChild(e.dom)):((e=Ext.getBody().createChild({cls:t.floatWrapCls+" "+t.rootCls,id:"ext-global-floatWrap","data-sticky":!0})).$skipResourceCheck=!0,Ext.floatRoot=e),e}}),Ext.define("Ext.util.Bag",{isBag:!0,constructor:function(){this.items=[],this.map={}},generation:0,length:0,beginUpdate:Ext.emptyFn,endUpdate:Ext.emptyFn,add:function(e){var t,i,n,r,s,o,a,l=this.items,c=this.map,u=1;for(Ext.isArray(e)&&(t=o=[],u=e.length),i=0;i<u;i++)void 0===(n=c[r=this.getKey(s=t?e[i]:e)])?(l.push(s),c[r]=this.length++,t?t.push(s):o=s):(a=l[n],t?t.push(a):o=a,l[n]=s);return++this.generation,o},clear:function(){var e=this.generation||this.length,t=e?this.items:[];return e&&(this.items=[],this.length=0,this.map={},++this.generation),t},clone:function(){var e=new this.self;return this.length&&(Ext.apply(e.map,this.map),e.items=this.items.slice(),e.length=this.length),e},contains:function(e){var t,i=!1,n=this.map;return null!=e&&(t=this.getKey(e))in n&&(i=this.items[n[t]]===e),i},containsKey:function(e){return e in this.map},destroy:function(){this.items=this.map=null,this.callParent()},each:function(e,t){var i,n,r=this.items,s=r.length;if(s)for(t=t||this,r=r.slice(0),i=0;i<s&&!1!==(n=e.call(t,r[i],i,s));i++);return n},getAt:function(e){var t=null;return e<this.length&&(t=this.items[e]),t},get:function(e){return this.getByKey(e)},getByKey:function(e){var t=this.map;return e in t?this.items[t[e]]:null},indexOfKey:function(e){var t=this.map;return e in t?t[e]:-1},last:function(){return this.items[this.length-1]},updateKey:function(e,t){var i,n=this.map;e&&t&&((i=this.getKey(e))!==t?this.getAt(n[t])!==e||i in n||(this.generation++,n[i]=n[t],delete n[t]):(i in n&&this.getAt(n[i])!==e&&Ext.raise('Duplicate newKey "'+i+'" for item with oldKey "'+t+'"'),t in n&&this.getAt(n[t])!==e&&Ext.raise('Incorrect oldKey "'+t+'" for item with newKey "'+i+'"')))},getCount:function(){return this.length},getKey:function(e){return e.id||e.getId()},getRange:function(e,t){var i,n=this.items,r=n.length;return i=r?(i=Ext.Number.clipIndices(r,[e,t]),n.slice(i[0],i[1])):[]},remove:function(e){var t,i,n,r,s,o,a,l=this.map,c=this.items,u=null,d=1;if(Ext.isArray(e)&&(d=e.length,i=u=[]),this.length){for(n=0;n<d;n++)void 0!==(r=l[s=this.getKey(i?e[n]:e)])&&(delete l[s],a=c[r],i?i.push(a):u=a,o=c.pop(),r<--this.length&&(c[r]=o,l[this.getKey(o)]=r),t=!0);t&&++this.generation}return u},removeByKey:function(e){var t=this.getByKey(e);return t&&this.remove(t),t||null},replace:function(e){return this.add(e),e},sort:function(e){var t,i=this.items,n=i.length;if(n){for(Ext.Array.sort(i,e),this.map={};0<n--;)t=i[n],this.map[this.getKey(t)]=n;++this.generation}}}),Ext.define("Ext.state.Provider",function(i){return{mixins:[Ext.mixin.Bufferable],statics:{get:function(){return i._default},register:function(e){var t=i._default;t!==e&&((i._default=e)&&(e.global=!0),t&&(t.global=!1),Ext.hasListeners.stateproviderchange&&Ext.fireEvent("stateproviderchange",e,t))}},bufferableMethods:{saveState:50},constructor:function(e){this.queue=new Ext.util.Bag,this.state={},this.initConfig(e)},clear:function(){this.cancelSaveState(),this.queue.clear(),this.state={}},get:function(e,t){var i=this.state[e];return void 0===i?t:i},remove:function(e){return this.set(e,null)},set:function(e,t){var i=this.state,n=e;for(e in"string"==typeof e&&((n={})[e]=t),n)null==(t=n[e])?(delete i[e],t=null):i[e]=t},decodeValue:function(e){return Ext.decode(e)},encodeValue:function(e){return Ext.encode(e)},privates:{doSave:function(e){e.$saveStatePending=!1,e.persistState()},doSaveState:function(){var e=this.queue;e.each(this.doSave,this),e.clear()},save:function(e){(e.destroyed||e.destroying)&&Ext.raise("Cannot save state of instance during or after destroy"),e.$saveStatePending=!0,this.queue.add(e),this.saveState()}}}},function(e){e.register(new e)}),Ext.define("Ext.state.Stateful",function(a){return{extend:Ext.Mixin,mixinConfig:{id:"state",configs:!0,before:{destroy:"_flushStateful"},mixed:function(e){e.addConfigTransform("transformStatefulConfig",20)}},isStateful:!0,config:{stateful:{$value:null,merge:function(e,t){return!0===e?t||e:!!e&&this.mergeSets(e,t)}},statefulDefaults:{$value:null,cached:!0,merge:function(e,t){return this.mergeSets(e,t)}},stateId:null},getStatefulOwner:Ext.emptyFn,loadState:function(e,t){var i,n,r=t&&e.data;if(r=r&&r.$)for(i in t)t[i]&&i in r&&((n=n||{})[i]=r[i]);return n},saveState:function(e,t){var i;if(t)for(i in t)e.save(this,i)},applyStateful:function(e,t){var i,n,r=!1,s="onStatefulChange",o=(e||t)&&this.getConfigWatcher(),a=this.isConfiguring;if(e){for(i in!0===e?(r={},a=!0):"string"==typeof e?(r={})[e]=!0:r=Ext.isObject(e)?e:Ext.Array.toMap(e),(a=a&&this.getStatefulDefaults())&&(r=Ext.merge({},a,r)),t=t||{},r)!(n=r[i])!=!t[i]&&(o[n?"on":"un"](i,s,this),n?t[i]=!0:delete t[i]);r=!Ext.Object.isEmpty(t)&&t}else if(t)for(i in t)o.un(i,s,this);return r},privates:{statics:{_configNames:["stateful","stateId"]},_flushStateful:function(){if(this.$saveStatePending){var e=Ext.state.Provider.get();e&&e.isSaveStatePending&&e.flushSaveState()}},getStateBuilder:function(e){var t,i,n,r=this._getStateId(),s=e&&this.$state||null,o=r&&Ext.state.Provider.get();if(o&&!s){if(n=this.getStatefulOwner()){if((i=n).isStateful||(i=n[0],t=1),s=i.getStateBuilder(e)){for(;t&&t<n.length;++t)s=s.child(n[t]);s=s.child(r)}}else s=new Ext.state.Builder,e&&(s.data=o.get(r));s&&(s.owner=this,s.id=r),this.$state=e?s:null}return s},_getStateId:function(){var e=this.getStateId();return this._getStateId=this.getStateId,e||(e=this.id||this.getId(),this.autoGenId?e=null:this.setStateId(e)),e},onStatefulChange:function(){!this.destroying&&this._getStateId()&&Ext.state.Provider.get().save(this)},persistState:function(){var e,t,i,n=this.getStateBuilder();n&&(t=Ext.state.Provider.get(),e=(i=n.root).id,n.parent&&(i.data=t.get(e),n.clear()),this.saveState(n,this.getStateful()),t.set(e,i.data))},readStateObject:function(){var e,t=this.getStateBuilder(!0);return t&&(t.getData(),e=this.loadState(t,this.getStateful())),e||null},transformStatefulConfig:function(e,t){var i,n,r,s,o=e;if(t.hoistConfigs(this,e,a._configNames)){if(r=this.readStateObject()){for(n in s=this.getStateful(),i={},r)s[n]?i[n]=!0:delete r[n];r=Ext.Object.isEmpty(r)?null:r,this.$statefulConfigs=r&&i}delete(o=r?t.merge(this,o,r,!0):Ext.apply({},o)).stateful,delete o.stateId}return o}}}}),Ext.define("Ext.util.Format",function(){var f,i;return{singleton:!0,defaultDateFormat:"m/d/Y",thousandSeparator:",",decimalSeparator:".",currencyPrecision:2,currencySign:"$",currencySpacer:"",percentSign:"%",currencyAtEnd:!1,stripTagsRe:/<\\/?[^>]+>/gi,stripScriptsRe:/(?:<script.*?>)((\\n|\\r|.)*?)(?:<\\/script>)/gi,nl2brRe:/\\r?\\n/g,hashRe:/#+$/,allHashes:/^#+$/,formatPattern:/[\\d,.#]+/,formatCleanRe:/[^\\d.#]/g,I18NFormatCleanRe:null,formatFns:{},constructor:function(){f=this},nbsp:function(e,t){return((t=!1!==t)?""!==e&&null!=e:e)||(e=""),e},undef:function(e){return void 0!==e?e:""},defaultValue:function(e,t){return void 0!==e&&""!==e?e:t},substr:"b"!=="ab".substr(-1)?function(e,t,i){var n=String(e);return t<0?n.substr(Math.max(n.length+t,0),i):n.substr(t,i)}:function(e,t,i){return String(e).substr(t,i)},lowercase:function(e){return String(e).toLowerCase()},uppercase:function(e){return String(e).toUpperCase()},usMoney:function(e){return f.currency(e,"$",2)},currency:function(e,t,i,n,r){var s="",o=",0",a=0;for((e=+e)<0&&(e=-e,s="-"),o+=0<(i=Ext.isDefined(i)?i:f.currencyPrecision)?".":"";a<i;a++)o+="0";return e=f.number(e,o),null==r&&(r=f.currencySpacer),!0===(n||f.currencyAtEnd)?Ext.String.format("{0}{1}{2}{3}",s,e,r,t||f.currencySign):Ext.String.format("{0}{1}{2}{3}",s,t||f.currencySign,r,e)},date:function(e,t){return e?(Ext.isDate(e)||(e=new Date(Date.parse(e))),Ext.Date.dateFormat(e,t||Ext.Date.defaultFormat)):""},dateRenderer:function(t){return function(e){return f.date(e,t)}},hex:function(e,t){var i=parseInt(e||0,10).toString(16);if(t)for(t<0&&(t=-t,i.length>t&&(i=i.substring(i.length-t)));i.length<t;)i="0"+i;return i},or:function(e,t){return e||t},pick:function(e,t,i){var n;return Ext.isNumber(e)&&(n=arguments[e+1])?n:e?i:t},lessThanElse:function(e,t,i,n,r){var s=Ext.Number.from(e,0),o=Ext.Number.from(t,0),a=!Ext.isDefined(r);return s<o?i:o<s||a?n:r},sign:function(e,t,i,n){return void 0===n&&(n=i),f.lessThanElse(e,0,t,i,n)},stripTags:function(e){return e?String(e).replace(f.stripTagsRe,""):e},stripScripts:function(e){return e?String(e).replace(f.stripScriptsRe,""):e},fileSize:function(e){return e<1024?1===e?"1 byte":e+" bytes":e<1048576?Math.round(10*e/1024)/10+" KB":e<1073741824?Math.round(10*e/1048576)/10+" MB":Math.round(10*e/1073741824)/10+" GB"},math:(i={},function(e,t){return i[t]||(i[t]=Ext.functionFactory("v","return v "+t+";")),i[t](e)}),round:function(e,t){var i=Number(e);return"number"==typeof t?(t=Math.pow(10,t),i=Math.round(e*t)/t):void 0===t&&(i=Math.round(i)),i},number:function(e,t){var i;if(!t)return e;if(isNaN(e))return"";if(!(i=f.formatFns[t])){var n,r,s,o,a,l=t,c=f.thousandSeparator,u=f.decimalSeparator,d=0,h="";r="/i"===t.substr(t.length-2)?(f.I18NFormatCleanRe&&f.lastDecimalSeparator===u||(f.I18NFormatCleanRe=new RegExp("[^\\\\d\\\\"+u+"#]","g"),f.lastDecimalSeparator=u),n=-1!==(t=t.substr(0,t.length-2)).indexOf(c),t.replace(f.I18NFormatCleanRe,"").split(u)):(n=-1!==t.indexOf(","),t.replace(f.formatCleanRe,"").split(".")),s=t.replace(f.formatPattern,""),2<r.length?Ext.raise({sourceClass:"Ext.util.Format",sourceMethod:"number",value:e,formatString:t,msg:"Invalid number format, should have no more than 1 decimal"}):2===r.length&&(d=r[1].length,(o=r[1].match(f.hashRe))&&(h='trailingZeroes=new RegExp(Ext.String.escapeRegex(utilFormat.decimalSeparator) + "*0{0,'+o[0].length+'}$")')),a=["var utilFormat=Ext.util.Format,extNumber=Ext.Number,neg,absVal,fnum,parts"+(n?",thousandSeparator,thousands=[],j,n,i":"")+(s?',formatString="'+t+'",formatPattern=/[\\\\d,\\\\.#]+/':"")+',trailingZeroes;return function(v){if(typeof v!=="number"&&isNaN(v=extNumber.from(v,NaN)))return"";neg=v<0;',"absVal=Math.abs(v);","fnum=Ext.Number.toFixed(absVal, "+d+");",h,";"],n?(d&&(a[a.length]='parts=fnum.split(".");',a[a.length]="fnum=parts[0];"),a[a.length]="if(absVal>=1000) {",a[a.length]="thousandSeparator=utilFormat.thousandSeparator;thousands.length=0;j=fnum.length;n=fnum.length%3||3;for(i=0;i<j;i+=n){if(i!==0){n=3;}thousands[thousands.length]=fnum.substr(i,n);}fnum=thousands.join(thousandSeparator);}",d&&(a[a.length]="fnum += utilFormat.decimalSeparator+parts[1];")):d&&(a[a.length]='if(utilFormat.decimalSeparator!=="."){parts=fnum.split(".");fnum=parts[0]+utilFormat.decimalSeparator+parts[1];}'),a[a.length]='if(neg&&fnum!=="'+(d?"0."+Ext.String.repeat("0",d):"0")+'") { fnum="-"+fnum; }',o&&(a[a.length]='fnum=fnum.replace(trailingZeroes,"");'),a[a.length]="return ",a[a.length]=s?"formatString.replace(formatPattern, fnum);":"fnum;",a[a.length]="};",i=f.formatFns[l]=Ext.functionFactory("Ext",a.join(""))(Ext)}return i(e)},numberRenderer:function(t){return function(e){return f.number(e,t)}},percent:function(e,t){return f.number(100*e,t||"0")+f.percentSign},repeat:function(e,t,i){return Ext.String.repeat(t,e,i)},attributes:function(e){var t,i;if("object"==typeof e){for(i in t=[],e)e.hasOwnProperty(i)&&t.push(i,'="',"style"===i?Ext.DomHelper.generateStyles(e[i],null,!0):Ext.htmlEncode(e[i]),'" ');e=t.join("")}return e||""},plural:function(e,t,i){return e+" "+(1===e?t:i||t+"s")},nl2br:function(e){return Ext.isEmpty(e)?"":e.replace(f.nl2brRe,"<br/>")},capitalize:Ext.String.capitalize,uncapitalize:Ext.String.uncapitalize,ellipsis:Ext.String.ellipsis,escape:Ext.String.escape,escapeRegex:Ext.String.escapeRegex,htmlDecode:Ext.String.htmlDecode,htmlEncode:Ext.String.htmlEncode,leftPad:Ext.String.leftPad,toggle:Ext.String.toggle,trim:Ext.String.trim,parseBox:function(e){if("number"==typeof(e=e||0))return{top:e,right:e,bottom:e,left:e};var t=e.split(" "),i=t.length;return 1===i?t[1]=t[2]=t[3]=t[0]:2===i?(t[2]=t[0],t[3]=t[1]):3===i&&(t[3]=t[1]),{top:parseInt(t[0],10)||0,right:parseInt(t[1],10)||0,bottom:parseInt(t[2],10)||0,left:parseInt(t[3],10)||0}},resource:function(e,t){return t=t||"",Ext.resolveResource(t+e)},uri:function(e){return encodeURI(e)},uriCmp:function(e){return encodeURIComponent(e)},wordBreakRe:/[\\W\\s]+/,word:function(e,t,i){var n=i?"string"==typeof i?new RegExp(i):i:f.wordBreakRe;return(e||"").split(n)[t||0]||""}}}),Ext.define("Ext.overrides.exporter.util.Format",{override:"Ext.util.Format",decToHex:function(e,t){var i,n="";for(i=0;i<t;i++)n+=String.fromCharCode(255&e),e>>>=8;return n}}),Ext.define("Ext.Template",{inheritableStatics:{from:function(e,t){return new this((e=Ext.getDom(e)).value||e.innerHTML,t||"")}},useEval:Ext.isGecko,constructor:function(e){var t,i,n=arguments,r=[],s=n.length;if(this.initialConfig={},1===s&&Ext.isArray(e)&&(s=(n=e).length),1<s)for(t=0;t<s;t++)"object"==typeof(i=n[t])?(Ext.apply(this.initialConfig,i),Ext.apply(this,i)):r.push(i);else r.push(e);this.html=r.join("")},isTemplate:!0,disableFormats:!1,tokenRe:/\\{(?:(?:(\\d+)|([a-z_$][\\w\\-$]*))(?::([a-z_.]+)(?:\\(([^)]*?)?\\))?)?)\\}/gi,apply:function(e){return this.compiled?(this.fn||this.compile(),this.fn(e).join("")):this.evaluate(e)},evaluate:function(s){var o=!this.disableFormats,a=Ext.util.Format,l=this;return this.html.replace(this.tokenRe,function(e,t,i,n,r){return null!=i&&""!==i||(i=t),n&&o?(r=r?[s[i]].concat(Ext.functionFactory("return ["+r+"];")()):[s[i]],"this."===n.substr(0,5)?l[n.substr(5)].apply(l,r):a[n]?a[n].apply(a,r):e):void 0!==s[i]?s[i]:""})},applyOut:function(e,t){return this.compiled?(this.fn||this.compile(),t.push.apply(t,this.fn(e))):t.push(this.apply(e)),t},applyTemplate:function(){return this.apply.apply(this,arguments)},set:function(e,t){return this.html=e,this.compiled=!!t,this.fn=null,this},compileARe:/\\\\/g,compileBRe:/(\\r\\n|\\n)/g,compileCRe:/'/g,compile:function(){var e,t=this;return e=t.html.replace(t.compileARe,"\\\\\\\\").replace(t.compileBRe,"\\\\n").replace(t.compileCRe,"\\\\'").replace(t.tokenRe,t.regexReplaceFn.bind(t)),e=(!0!==this.disableFormats?"var fm=Ext.util.Format;":"")+(t.useEval?"$=":"return")+" function(v){return ['"+e+"'];};",t.fn=t.useEval?t.evalCompiled(e):new Function("Ext",e)(Ext),t.compiled=!0,t},evalCompiled:function($){return eval($),$},regexReplaceFn:function(e,t,i,n,r){if(null==t||""===t?t='"'+i+'"':this.stringFormat&&(t=parseInt(t)+1),n&&!0!==this.disableFormats){if(r=r?","+r:"","this."===n.substr(0,5))n+="(";else{if(!Ext.util.Format[n])return e;n="fm."+n+"("}return"',"+n+"v["+t+"]"+r+"),'"}return"',v["+t+"] == undefined ? '' : v["+t+"],'"},insertFirst:function(e,t,i){return this.doInsert("afterBegin",e,t,i)},insertBefore:function(e,t,i){return this.doInsert("beforeBegin",e,t,i)},insertAfter:function(e,t,i){return this.doInsert("afterEnd",e,t,i)},append:function(e,t,i){return this.doInsert("beforeEnd",e,t,i)},doInsert:function(e,t,i,n){var r=Ext.DomHelper.insertHtml(e,Ext.getDom(t),this.apply(i));return n?Ext.get(r):r},overwrite:function(e,t,i){var n=Ext.DomHelper.overwrite(Ext.getDom(e),this.apply(t));return i?Ext.get(n):n}},function(i){var n=/\\{\\d+\\}/,r={useFormat:!1,compiled:!0,stringFormat:!0},s={};Ext.String.format=Ext.util.Format.format=function(e){var t;return(s[e]||(s[e]=(t=e,n.test(t)?(t=new i(t,r),function(){return t.apply(arguments)}):function(){return t}))).apply(this,arguments)},Ext.String.formatEncode=function(){return Ext.String.htmlEncode(Ext.String.format.apply(this,arguments))}}),Ext.define("Ext.util.XTemplateParser",{constructor:function(e){Ext.apply(this,e)},doTpl:Ext.emptyFn,parse:function(e){var t,i,n,r,s,o,a,l,c,u,d,h,f,g=this,p=e.length,m={elseif:"elif"},x=g.topRe,y=g.actionsRe;for(g.level=0,g.stack=i=[],t=0;t<p;t=u){if(x.lastIndex=t,!(r=x.exec(e))){g.doText(e.substring(t,p));break}if(c=r.index,u=x.lastIndex,t<c&&(n=e.substring(t,c),f&&""===Ext.String.trim(n)||g.doText(n)),f=!1,r[1])u=e.indexOf("%}",c+2),g.doEval(e.substring(c+2,u)),u+=2;else if(r[2])u=e.indexOf("]}",c+2),g.doExpr(e.substring(c+2,u)),u+=2;else if(r[3])g.doTag(r[3]);else if(r[4]){for(d=null;null!==(l=y.exec(r[4]));)(n=l[2]||l[3])&&(n=Ext.String.htmlDecode(n),"string"==typeof(o=(d=d||{})[s=m[s=l[1]]||s])?d[s]=[o,n]:o?d[s].push(n):d[s]=n);d?d.if?(g.doIf(d.if,d),i.push({type:"if"})):d.switch?(g.doSwitch(d.switch,d),i.push({type:"switch"}),f=!0):d.case?g.doCase(d.case,d):d.elif?g.doElseIf(d.elif,d):d.for?(++g.level,(h=g.propRe.exec(r[4]))&&(d.propName=h[1]||h[2]),g.doFor(d.for,d),i.push({type:"for",actions:d})):d.foreach?(++g.level,(h=g.propRe.exec(r[4]))&&(d.propName=h[1]||h[2]),g.doForEach(d.foreach,d),i.push({type:"foreach",actions:d})):d.exec&&(g.doExec(d.exec,d),i.push({type:"exec",actions:d})):g.elseRe.test(r[4])?g.doElse():g.defaultRe.test(r[4])?g.doDefault():(g.doTpl(),i.push({type:"tpl"}))}else 5===r[0].length?i.push({type:"tpl"}):(a=i.pop(),g.doEnd(a.type,a.actions),"for"!==a.type&&"foreach"!==a.type||--g.level)}},topRe:/(?:(\\{\\%)|(\\{\\[)|\\{([^{}]+)\\})|(?:<tpl([^>]*)\\>)|(?:<\\/tpl>)/g,actionsRe:/\\s*(elif|elseif|if|for|foreach|exec|switch|case|eval|between)\\s*\\=\\s*(?:(?:"([^"]*)")|(?:'([^']*)'))\\s*/g,propRe:/prop=(?:(?:"([^"]*)")|(?:'([^']*)'))/,defaultRe:/^\\s*default\\s*$/,elseRe:/^\\s*else\\s*$/}),Ext.define("Ext.util.XTemplateCompiler",{extend:Ext.util.XTemplateParser,useEval:Ext.isGecko,useIndex:Ext.isIE8m,useFormat:!0,propNameRe:/^[\\w\\d$]*$/,compile:function(e){var t=this.generate(e);return this.useEval?this.evalTpl(t):new Function("Ext",t)(Ext)},generate:function(e){var t,i=this,n="var fm=Ext.util.Format,ts=Object.prototype.toString;";return i.maxLevel=0,i.body=["var c0=values, a0="+i.createArrayTest(0)+", p0=parent, n0=xcount, i0=xindex, k0, v;\\n"],i.definitions?"string"==typeof i.definitions?i.definitions=[i.definitions,n]:i.definitions.push(n):i.definitions=[n],i.switches=[],i.parse(e),i.definitions.push((i.useEval?"$=":"return")+" function ("+i.fnArgs+") {",i.body.join(""),"}"),t=i.definitions.join("\\n"),i.definitions.length=i.body.length=i.switches.length=0,i.definitions=i.body=i.switches=0,t},doText:function(e){var t=this.body;e=e.replace(this.aposRe,"\\\\'").replace(this.newLineRe,"\\\\n"),this.useIndex?t.push("out[out.length]='",e,"'\\n"):t.push("out.push('",e,"')\\n")},doExpr:function(e){var t=this.body;t.push("if ((v="+e+") != null) out"),this.useIndex?t.push("[out.length]=v\\n"):t.push(".push(v)\\n")},doTag:function(e){var t=this.parseTag(e);t?this.doExpr(t):this.doText("{"+e+"}")},doElse:function(){this.body.push("} else {\\n")},doEval:function(e){this.body.push(e,"\\n")},doIf:function(e,t){"."===e?this.body.push("if (values) {\\n"):this.propNameRe.test(e)?this.body.push("if (",this.parseTag(e),") {\\n"):this.body.push("if (",this.addFn(e),this.callFn,") {\\n"),t.exec&&this.doExec(t.exec)},doElseIf:function(e,t){"."===e?this.body.push("else if (values) {\\n"):this.propNameRe.test(e)?this.body.push("} else if (",this.parseTag(e),") {\\n"):this.body.push("} else if (",this.addFn(e),this.callFn,") {\\n"),t.exec&&this.doExec(t.exec)},doSwitch:function(e){var t;"."===e||"#"===e?(t="."===e?"values":"xindex",this.body.push("switch (",t,") {\\n")):this.propNameRe.test(e)?this.body.push("switch (",this.parseTag(e),") {\\n"):this.body.push("switch (",this.addFn(e),this.callFn,") {\\n"),this.switches.push(0)},doCase:function(e){var t,i,n=Ext.isArray(e)?e:[e],r=this.switches.length-1;for(this.switches[r]?this.body.push("break;\\n"):this.switches[r]++,i=0,r=n.length;i<r;++i)t=this.intRe.exec(n[i]),n[i]=t?t[1]:"'"+n[i].replace(this.aposRe,"\\\\'")+"'";this.body.push("case ",n.join(": case "),":\\n")},doDefault:function(){var e=this.switches.length-1;this.switches[e]?this.body.push("break;\\n"):this.switches[e]++,this.body.push("default:\\n")},doEnd:function(e,t){var i=this.level-1;"for"===e||"foreach"===e?(t.exec&&this.doExec(t.exec),this.body.push("}\\n"),this.body.push("parent=p",i,";values=r",1+i,";xcount=n"+i+";xindex=i",i,"+1;xkey=k",i,";\\n")):"if"!==e&&"switch"!==e||this.body.push("}\\n")},doFor:function(e,t){var i,n,r=this,s=r.level,o=s-1;i="."===e?"values":r.propNameRe.test(e)?r.parseTag(e):r.addFn(e)+r.callFn,r.maxLevel<s&&(r.maxLevel=s,r.body.push("var ")),n="."===e?"c"+s:"a"+o+"?c"+o+"[i"+o+"]:c"+o,r.body.push("i",s,"=0,n",s,"=0,c",s,"=",i,",a",s,"=",r.createArrayTest(s),",r",s,"=values,p",s,",k",s,";\\n","p",s,"=parent=",n,"\\n","if (c",s,"){if(a",s,"){n",s,"=c",s,".length;}else if (c",s,".isMixedCollection){c",s,"=c",s,".items;n",s,"=c",s,".length;}else if(c",s,".isStore){c",s,"=c",s,".data.items;n",s,"=c",s,".length;}else{c",s,"=[c",s,"];n",s,"=1;}}\\n","for (xcount=n",s,";i",s,"<n"+s+";++i",s,"){\\n","values=c",s,"[i",s,"]"),t.propName&&r.body.push(".",t.propName),r.body.push("\\n","xindex=i",s,"+1\\n"),t.between&&r.body.push('if(xindex>1){ out.push("',t.between,'"); } \\n')},doForEach:function(e,t){var i,n,r=this,s=r.level,o=s-1;i="."===e?"values":r.propNameRe.test(e)?r.parseTag(e):r.addFn(e)+r.callFn,r.maxLevel<s&&(r.maxLevel=s,r.body.push("var ")),n="."===e?"c"+s:"a"+o+"?c"+o+"[i"+o+"]:c"+o,r.body.push("i",s,"=-1,n",s,"=0,c",s,"=",i,",a",s,"=",r.createArrayTest(s),",r",s,"=values,p",s,",k",s,";\\n","p",s,"=parent=",n,"\\n","for(k",s," in c",s,"){\\n","xindex=++i",s,"+1;\\n","xkey=k",s,";\\n","values=c",s,"[k",s,"];"),t.propName&&r.body.push(".",t.propName),t.between&&r.body.push('if(xindex>1){ out.push("',t.between,'"); } \\n')},createArrayTest:"isArray"in Array?function(e){return"Array.isArray(c"+e+")"}:function(e){return"ts.call(c"+e+')==="[object Array]"'},doExec:function(e,t){var i="f"+this.definitions.length,n=this.guards[this.strict?0:1];this.definitions.push("function "+i+"("+this.fnArgs+") {",n.doTry," var $v = values; with($v) {","  "+e," }",n.doCatch,"}"),this.body.push(i+this.callFn+"\\n")},guards:[{doTry:"",doCatch:""},{doTry:"try { ",doCatch:' } catch(e) {\\nExt.log.warn("XTemplate evaluation exception: " + e.message);\\n}'}],addFn:function(e){var t="f"+this.definitions.length,i=this.guards[this.strict?0:1];return"."===e?this.definitions.push("function "+t+"("+this.fnArgs+") {"," return values","}"):".."===e?this.definitions.push("function "+t+"("+this.fnArgs+") {"," return parent","}"):this.definitions.push("function "+t+"("+this.fnArgs+") {",i.doTry," var $v = values; with($v) {","  return("+e+")"," }",i.doCatch,"}"),t},parseTag:function(e){var t,i,n,r,s,o=this.tagRe.exec(e);return o?(t=o[1],i=o[2],n=o[3],r=o[4],s="."===t?(this.validTypes||(this.definitions.push("var validTypes={string:1,number:1,boolean:1};"),this.validTypes=!0),'validTypes[typeof values] || ts.call(values) === "[object Date]" ? values : ""'):"#"===t?"xindex":"$"===t?"xkey":"parent."===t.substr(0,7)?t:isNaN(t)&&-1===t.indexOf("-")&&-1!==t.indexOf(".")?"values."+t:"values['"+t+"']",r&&(s="("+s+r+")"),i&&this.useFormat?(n=n?","+n:"","this."!==i.substr(0,5)?i="fm."+i+"(":i+="(",i+s+n+")"):s):null},evalTpl:function($){return eval($),$},newLineRe:/\\r\\n|\\r|\\n/g,aposRe:/[']/g,intRe:/^\\s*(\\d+)\\s*$/,tagRe:/^([\\w-\\.\\#\\$]+)(?:\\:([\\w\\.]*)(?:\\((.*?)?\\))?)?(\\s?[\\+\\-\\*\\/]\\s?[\\d\\.\\+\\-\\*\\/\\(\\)]+)?$/},function(){var e=this.prototype;e.fnArgs="out,values,parent,xindex,xcount,xkey",e.callFn=".call(this,"+e.fnArgs+")"}),Ext.define("Ext.XTemplate",{extend:Ext.Template,isXTemplate:!0,emptyObj:{},fn:null,strict:!1,apply:function(e,t,i,n){var r=this.applyOut(e,[],t,i,n);return 1===r.length?r[0]:r.join("")},applyOut:function(e,t,i,n,r){var s,o=this;if(o.fn||(s=new Ext.util.XTemplateCompiler({useFormat:!0!==o.disableFormats,definitions:o.definitions,strict:o.strict}),o.fn=s.compile(o.html)),n=n||1,r=r||1,o.strict)o.fn(t,e,i||o.emptyObj,n,r);else try{o.fn(t,e,i||o.emptyObj,n,r)}catch(e){Ext.log.warn("XTemplate evaluation exception: "+e.message)}return t},compile:function(){return this},statics:{get:function(e,t,i){var n=e;return null==e?t&&i&&(n=this.getTpl(t,i)):!e&&""!==e||e.isTemplate||(n=new this(e)),n},getTpl:function(e,t){var i,n=e[t];if(n&&(n.isTemplate||(n=Ext.XTemplate.get(n)),!n.owner)){if(e.hasOwnProperty(t))i=e;else for(i=e.self.prototype;i&&!i.hasOwnProperty(t);i=i.superclass);(i[t]=n).owner=i}return n||null}}}),Ext.define("Ext.util.translatable.Dom",{extend:Ext.util.translatable.Abstract,alias:"translatable.dom",config:{element:null},applyElement:function(e){if(e)return Ext.get(e)},updateElement:function(){this.refresh()},translateXY:function(e,t){var i=this.getElement();i&&!i.destroyed&&this.callParent([e,t])}}),Ext.define("Ext.util.translatable.CssPosition",{extend:Ext.util.translatable.Dom,alias:"translatable.cssposition",doTranslate:function(e,t){var i=this.getElement().dom.style;"number"==typeof e&&(i.left=e+"px"),"number"==typeof t&&(i.top=t+"px")},syncPosition:function(){var e=this.getElement().dom.style;return[this.x=parseFloat(e.left),this.y=parseFloat(e.top)]},destroy:function(){var e=this.getElement().dom.style;e.left=null,e.top=null,this.callParent()}}),Ext.define("Ext.util.translatable.CssTransform",{extend:Ext.util.translatable.Dom,alias:"translatable.csstransform",isCssTransform:!0,posRegex:/(\\d+)px[^\\d]*(\\d+)px/,doTranslate:function(e,t){this.getElement().translate(e,t)},syncPosition:function(){var e=this.posRegex.exec(this.getElement().dom.style.tranform);return e&&(this.x=parseFloat(e[1]),this.y=parseFloat(e[2])),[this.x,this.y]},destroy:function(){var e=this.getElement();e&&!e.destroyed&&(e.dom.style.webkitTransform=null),this.callParent()}}),Ext.define("Ext.scroll.Scroller",{extend:Ext.Evented,alias:"scroller.scroller",mixins:[Ext.mixin.Factoryable,Ext.mixin.Bufferable],isScroller:!0,factoryConfig:{defaultType:"native"},bufferableMethods:{onScrollEnd:100},config:{direction:void 0,element:null,size:null,x:!0,y:!0,touchAction:null,translatable:"scrollposition"},constructor:function(e){this.position={x:0,y:0},this.configuredSize={x:!1,y:!1},this.callParent([e])},destroy:function(){this.destroying=!0,this.destroy=Ext.emptyFn,this.doDestroy(),this.callParent()},doDestroy:function(){var e,t;if(this.component=null,e=this._partners)for(t in e)this.removePartner(e[t].scroller);this._partners=null,this.setElement(null),this.setTranslatable(null)},addPartner:function(e,t){var i=this._partners||(this._partners={}),n=e._partners||(e._partners={});t=this.axisConfigs[t||"both"],i[e.getId()]={scroller:e,axes:t,called:!1,calledPrimary:!1},n[this.getId()]={scroller:this,axes:t,called:!1,calledPrimary:!1}},convertX:function(e){return e},ensureVisible:function(e,t){var i,n,r=this.getPosition();return e?(e&&e.element&&!e.isElement&&(e=(t=e).element),i=(t=t||{}).highlight,(n=this.getEnsureVisibleXY(e,t)).y!==r.y||n.x!==r.x?(i&&this.on({scrollend:"doHighlight",scope:this,single:!0,args:[e,i]}),this.doScrollTo(n.x,n.y,t.animation)):(i&&this.doHighlight(e,i),Ext.Deferred.getCachedResolved())):Ext.Deferred.getCachedRejected()},getPosition:function(){return this.position},isInView:function(e,t){var i,n,r=this.component,s={x:!1,y:!1},o=this.getElement();return e&&(!1===t||o.contains(e)||r&&r.owns(e))&&(n=o.getRegion(),i=Ext.fly(e).getRegion(),s.x=i.right>n.left&&i.left<n.right,s.y=i.bottom>n.top&&i.top<n.bottom),s},refresh:function(){return this.fireEvent("refresh",this),this},removePartner:function(e){var t=this._partners,i=e._partners;t&&delete t[e.getId()],i&&delete i[this.getId()]},scrollBy:function(e,t,i){var n=this.getPosition();return e&&(e.length?(i=t,t=e[1],e=e[0]):"number"!=typeof e&&(i=t,t=e.y,e=e.x)),e="number"==typeof e?e+n.x:null,t="number"==typeof t?t+n.y:null,this.doScrollTo(e,t,i)},scrollIntoView:function(e,t,i,n){return this.ensureVisible(e,{animation:i,highlight:n,x:t})},scrollTo:function(e,t,i){var n;return e&&(Ext.isArray(e)?(i=t,t=e[1],e=e[0]):"number"!=typeof e&&(i=t,t=e.y,e=e.x)),(e<0||t<0)&&(n=this.getMaxPosition(),e<0&&(e+=n.x),t<0&&(t+=n.y)),this.doScrollTo(e,t,i)},applyElement:function(e){return e&&("string"!=typeof e||Ext.get(e)||Ext.raise("Cannot create Ext.scroll.Scroller instance. Element with id '"+e+"' not found."),e.isElement||(e=Ext.get(e))),e},updateElement:function(e,t){var i,n=this.scrollerCls;t&&!t.destroyed&&t.removeCls(n),e&&(this.isConfiguring||(i=this.getTouchAction())&&e.setTouchAction(i),e.addCls(n))},updateDirection:function(e){var t,i;e?("auto"===e?i=t=!0:"vertical"===e?i=!(t=!1):"horizontal"===e?i=!(t=!0):"both"===e&&(i=t="scroll"),this.setX(t),this.setY(i)):(t=this.getX(),i=this.getY(),t&&i?e="scroll"===i&&"scroll"===t?"both":"auto":i?e="vertical":t&&(e="horizontal"),this._direction=e)},applySize:function(e,t){var i,n,r="number",s=this.configuredSize;return null==e||typeof e==r?i=n=e:e&&(i=e.x,n=e.y),typeof i==r?s.x=!0:null===i&&(s.x=!1),typeof n==r?s.y=!0:null===n&&(s.y=!1),void 0===i&&(i=t?t.x:null),void 0===n&&(n=t?t.y:null),t&&i===t.x&&n===t.y?t:{x:i,y:n}},updateTouchAction:function(e){var t=this.getElement();t&&t.setTouchAction(e)},statics:{create:function(e,t){return Ext.Factory.scroller(e,t)},getScrollingElement:function(){return Ext.get(document.scrollingElement||document.documentElement)}},privates:{scrollerCls:Ext.baseCSSPrefix+"scroller",axisConfigs:{x:{x:1,y:0},y:{x:0,y:1},both:{x:1,y:1}},callPartners:function(e,t,i){var n,r,s,o,a,l,c,u=this._partners;if(!this.suspendSync)for(r in u)(a=(s=u[r]).scroller).isPrimary||s.called||(s.called=!0,n=u[r].axes,o=a.position,l=n.x&&void 0!==t?t:o.x,c=n.y&&void 0!==i?i:o.y,a[e](l,c,l-o.x||0,c-o.y||0),a.callPartners(e,l,c),s.called=!1)},contains:function(e){for(var t=this.getElement(),i=e;i&&i!==Ext.Viewport;){if(t.contains(i.el))return!0;i=i.getRefOwner()}return!1},fireScrollStart:function(e,t,i,n){var r=this.component;this.startX=e-i,this.startY=t-n,this.hasListeners.scrollstart&&this.fireEvent("scrollstart",this,e,t),r&&r.onScrollStart&&r.onScrollStart(e,t),Ext.GlobalEvents.fireEvent("scrollstart",this,e,t)},fireScroll:function(e,t,i,n){var r=this.component;this.hasListeners.scroll&&this.fireEvent("scroll",this,e,t,i,n),r&&r.onScrollMove&&r.onScrollMove(e,t,i,n),Ext.fireEvent("scroll",this,e,t,i,n)},fireScrollEnd:function(e,t){var i=this.component,n=e-this.startX,r=t-this.startY;this.hasListeners.scrollend&&this.fireEvent("scrollend",this,e,t,n,r),i&&i.onScrollEnd&&i.onScrollEnd(e,t,n,r),Ext.fireEvent("scrollend",this,e,t,n,r)},getEnsureVisibleXY:function(e,t){var i,n,r=this.getPosition(),s=this.component?this.component.getScrollableClientRegion():this.getElement();return e&&e.element&&!e.isElement&&(e=(t=e).element),(n=(t=t||{}).align)&&(Ext.isString(n)?n={x:!1===t.x?null:n,y:!1===t.y?null:n}:Ext.isObject(n)&&(n.x&&!1===t.x&&(n.x=null),n.y&&!1===t.y&&(n.y=null))),(i=Ext.fly(e).getScrollIntoViewXY(s,r.x,r.y,n)).x=!1===t.x?r.x:i.x,i.y=!1===t.y?r.y:i.y,i},onPartnerScroll:function(e,t){this.doScrollTo(e,t)},onPartnerScrollStart:function(e,t,i,n){this.isScrolling=!0,(i||n)&&this.doScrollTo(e,t)},onPartnerScrollEnd:function(){this.isScrolling=!1},restoreState:Ext.privateFn,resumePartnerSync:function(e){var t,i,n,r=this;r.suspendSync&&r.suspendSync--,!r.suspendSync&&e&&(i=(t=r.position).x,n=t.y,r.callPartners("onPartnerScrollStart",void 0,void 0),r.callPartners("fireScrollStart",void 0,void 0),r.callPartners("onPartnerScroll",i,n),r.callPartners("fireScroll",i,n),r.callPartners("onPartnerScrollEnd"),r.callPartners("fireScrollEnd",i,n))},setPrimary:function(e){var t,i,n,r=this._partners;if(e){for(n in r)i=(t=r[n]).scroller,t.calledPrimary||(t.calledPrimary=!0,i.setPrimary(!1),t.calledPrimary=!1);this.isScrolling=Ext.isScrolling=!0}else this.isScrolling&&(this.cancelOnScrollEnd(),this.doOnScrollEnd());this.isPrimary=e},suspendPartnerSync:function(){this.suspendSync=(this.suspendSync||0)+1},syncWithPartners:function(){var e,t,i,n,r,s,o,a,l,c,u=this._partners,d=this.position;for(e in u)i=(t=u[e].axes).x,n=t.y,s=(r=u[e].scroller).position,r.setPrimary(!0),o=i?d.x:null,a=n?d.y:null,0,this.onPartnerScrollStart(o,a,0,0),this.fireScrollStart(o,a,0,0),o=i?s.x:null,a=n?s.y:null,l=null===o?0:o-d.x,c=null===a?0:a-d.y,this.onPartnerScroll(o,a),this.fireScroll(o,a,l,c),this.onPartnerScrollEnd(),this.fireScrollEnd(o,a),r.setPrimary(null)},applyTranslatable:function(e,t){return Ext.Factory.translatable.update(t,e,this,"createTranslatable")}},deprecated:{5:{methods:{getScroller:function(){return this}}},"5.1.0":{methods:{scrollToTop:function(e){return this.scrollTo(0,0,e)},scrollToEnd:function(e){return this.scrollTo(1/0,1/0,e)}}}}}),Ext.define("Ext.Component",{extend:Ext.Widget,mixins:[Ext.state.Stateful],alternateClassName:["Ext.lib.Component","Ext.Gadget"],xtype:"component",cachedConfig:{padding:null,tabIndex:null},eventedConfig:{left:null,top:null,right:null,bottom:null,minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,scrollable:null,docked:null,centered:{lazy:!0,$value:null}},config:{displayed:null,html:null,draggable:null,zIndex:null,tpl:null,enterAnimation:null,exitAnimation:null,showAnimation:null,hideAnimation:null,tplWriteMode:"overwrite",data:null,contentEl:null,record:null,tooltip:null,axisLock:null,modal:{lazy:!0,$value:null},hideOnMaskTap:null,weight:null,userSelectable:null},modelValidation:null,defaultBindProperty:"html",isComponent:!0,positioned:!1,rendered:!1,activeAnimation:null,dockPositions:{top:!0,right:!0,bottom:!0,left:!0},bodyElement:null,classCls:Ext.baseCSSPrefix+"component",floatingCls:Ext.baseCSSPrefix+"floating",hiddenCls:Ext.baseCSSPrefix+"hidden",_scrollableCfg:{x:{x:!0,y:!1},y:{x:!1,y:!0},horizontal:{x:!0,y:!1},vertical:{x:!1,y:!0},both:{x:!0,y:!0},true:{x:!0,y:!0},false:{x:!1,y:!1}},statics:{from:function(e,t,i){return Ext.ComponentManager.from(e,t,i)},fromElement:function(e,t,i){return Ext.ComponentManager.from(e,t,i)}},initialConfig:null,$initParent:null,userSelectableClsMap:{true:Ext.baseCSSPrefix+"user-selectable-auto",false:Ext.baseCSSPrefix+"user-selectable-none",all:Ext.baseCSSPrefix+"user-selectable-all",auto:Ext.baseCSSPrefix+"user-selectable-auto",text:Ext.baseCSSPrefix+"user-selectable-text",none:Ext.baseCSSPrefix+"user-selectable-none"},constructor:function(e){var t,i,n,r=this,s=Ext.Viewport,o=e&&e.renderTo;r.lastSize={},r.onInitializedListeners=[],e&&(r.initialConfig=e,r.$initParent=e.$initParent),o&&delete(e=Ext.apply({},e)).renderTo,r.callParent([e]),n=r.el,r.getRefOwner()||n.addCls(r.rootCls),r.refreshPositioned=r.doRefreshPositioned,r.refreshPositionedOnInitialized&&r.refreshPositioned(),r.initialize(),r.triggerInitialized(),r.isCentered()&&r.center(),i=(t=r.hasListeners).resize,r.hasListeners.painted&&n.on("painted","handleElementPainted",r),!i&&!r.onResize||r.isViewport||(i||t._incr_("resize"),n.on({scope:r,resize:"handleElementResize",priority:1e3})),r.fullscreen&&s&&s.setItemFullScreen(r),r.fireEvent("initialize",r),o&&r.setRenderTo(o)},beforeInitConfig:function(e){this.beforeInitialize.apply(this,arguments)},beforeInitialize:Ext.emptyFn,initialize:Ext.emptyFn,center:function(){var e,t,i,n,r=this,s=r.getParent();return s&&!s.rendered||!r.shouldRecenter()?r.needsCenter=!0:(t=!!s,e=(s=s?s.bodyElement:Ext.getBody()).getConstrainRegion(),n=r.measure(),i=[(e.getWidth()-n.width)/2,(e.getHeight()-n.height)/2],r.needsCenter=!1,r._centering=!0,r.getFloated()?(t&&(i=s.reverseTranslateXY(i)),r.setXY(i)):(r.setLeft(i[0]),r.setTop(i[1])),r._centering=!1),r},shouldRecenter:function(){return this.rendered&&!this.$isShowing&&(this.el.isVisible()||this.el.getVisibilityMode()!==Ext.Element.DISPLAY)},getModalSibling:function(){var e,t,i,n,r,s=Ext.getFloatRoot().dom;for(e=this.floatParentNode&&this.floatParentNode.dom;e;e=e===s||t.getRelative()?null:e.parentNode)for(t=Ext.fly(e).getData().component,r=(i=e.childNodes)?i.length:0;0<r--;)if((n=Ext.fly(i[r])).hasCls(this.floatWrapCls)&&(n=n.getData().component)&&n!==this&&n.isVisible()&&n.getModal())return n;return null},triggerInitialized:function(){var e,t,i,n,r,s=this.onInitializedListeners,o=s.length;if(!this.initialized&&(this.initialized=!0,0<o)){for(r=0;r<o;r++)t=(e=s[r]).fn,i=e.scope,n=e.args,"string"==typeof t?i[t].apply(i,n):t.apply(i,n);s.length=0}},onInitialized:function(e,t,i){var n=this.onInitializedListeners;t=t||this,i?(i=i.slice()).unshift(this):i=[this],this.initialized?"string"==typeof e?t[e].apply(t,i):e.apply(t,i):n.push({fn:e,scope:t,args:i})},initElement:function(){this.callParent(),this.bodyElement||(this.bodyElement=this.element),this.innerElement=this.innerElement||this.bodyElement},initInheritedState:function(e){null!==this.modelValidation&&(e.modelValidation=this.modelValidation),this.callParent([e])},applyScrollable:function(e,t){return"boolean"!=typeof e&&"string"!=typeof e||(this._scrollableCfg[e]||Ext.raise("'"+e+"' is not a valid value for 'scrollable'"),e=this._scrollableCfg[e]),Ext.Factory.scroller.update(t,e,this,"createScrollable")},applyHidden:function(e){return!e&&this.isConfiguring&&this.getFloated()&&this.preprocessShow(),!!e},createScrollable:function(e){return Ext.apply({component:this,element:this.getScrollerTarget()},e)},getScrollerTarget:function(){return this.bodyElement},getScrollableClientRegion:function(){var e,t=this.getScrollerTarget().getClientRegion(),i=this.getScrollable();return i&&i.isVirtualScroller&&(e=i.getScrollbarSize(),t.adjust(0,0,-e.height,-e.width)),t},updatePadding:function(e){this.bodyElement.setPadding(e)},updateWeight:function(e,t){var i=!this.isConfiguring&&this.getRefOwner();this.weight=e,i&&i.onItemWeightChange&&i.onItemWeightChange(this,e,t)},applyContentEl:function(e){if(e)return Ext.get(e)},updateContentEl:function(e,t){t&&(t.hide(),Ext.getBody().append(t)),e&&(this.setHtml(e.dom),e.show())},createTranslatable:function(e){var t=this.callParent([e]);return e&&!e.type&&this.getFloated()&&(t.type="csstransform"),t},isCentered:function(){return Boolean(this.getCentered())},isPositioned:function(){return this.positioned},isDocked:function(){return Boolean(this.getDocked())},applyTop:function(e){return this.filterLengthValue(e)},applyRight:function(e){return this.filterLengthValue(e)},applyBottom:function(e){return this.filterLengthValue(e)},applyLeft:function(e){return this.filterLengthValue(e)},applyMinWidth:function(e){return this.filterLengthValue(e)},applyMinHeight:function(e){return this.filterLengthValue(e)},applyMaxWidth:function(e){return this.filterLengthValue(e)},applyMaxHeight:function(e){return this.filterLengthValue(e)},updateTop:function(e){this.$updatingXY||this.element.setTop(e),this.refreshPositioned()},updateRight:function(e){this.$updatingXY||this.element.setRight(e),this.refreshPositioned()},updateBottom:function(e){this.$updatingXY||this.element.setBottom(e),this.refreshPositioned()},updateLeft:function(e){this.$updatingXY||this.element.setLeft(e),this.refreshPositioned()},onResize:null,updateMinWidth:function(e){this.element.setMinWidth(e)},updateMinHeight:function(e){this.element.setMinHeight(e)},updateMaxWidth:function(e){this.element.setMaxWidth(e)},updateMaxHeight:function(e){this.element.setMaxHeight(e)},applyCentered:function(e){if(null===this.getLeft()&&null===this.getRight()&&null===this.getTop()&&null===this.getBottom())return!!e},updateCentered:function(e){var t,i=this;i.getFloated()?e?(i.center(),i.centerResizeListener||i.needsCenter||(t=(t=i.floatParentNode)===Ext.floatRoot?Ext:t,i.centerResizeListener=t.on({resize:"center",scope:i,destroyable:!0}))):i.centerResizeListener=Ext.destroy(i.centerResizeListener):(i.el.toggleCls(i.floatingCls,e),e?(i.refreshInnerState=Ext.emptyFn,!i.isContainer||i.isWidthed()&&i.isHeighted()||i.setAutoSize(!0),i.isPositioned()&&i.resetPositioned(),i.isDocked()&&i.setDocked(!1),i.setIsInner(!1),delete i.refreshInnerState):i.refreshInnerState())},applyDocked:function(e){return e?/^(top|right|bottom|left)$/.test(e)?(this.refreshInnerState=Ext.emptyFn,this.isPositioned()&&this.resetPositioned(),this.isCentered()&&this.setCentered(!1),this.setIsInner(!1),delete this.refreshInnerState,e):void Ext.Logger.error("Invalid docking position of '"+e.position+"', must be either 'top', 'right', 'bottom', 'left' or \`null\` (for no docking)",this):null},getDisplayed:function(){return!this.getHidden()},setDisplayed:function(e){return e===(!1!==this.getHidden())&&(this._displayed=e,this.updateDisplayed(e,!e)),this},updateDisplayed:function(e){this[e?"show":"hide"]()},updateDocked:function(e,t){this.isConfiguring||(this.fireEvent("afterdockedchange",this,e,t),e||this.refreshInnerState())},updateUserSelectable:function(e,t){var i,n,r=this.userSelectableClsMap,s=this.el;if("boolean"==typeof t||"string"==typeof t)s.removeCls(r[t]);else for(i in t)(n=this[i])&&n.isElement||Ext.raise('Element not found: "'+i+'"'),n.removeCls(r[t[i]]);if("boolean"==typeof e||"string"==typeof e)s.addCls(r[e]);else for(i in e)(n=this[i])&&n.isElement||Ext.raise('Element not found: "'+i+'"'),n.addCls(r[e[i]])},resetPositioned:function(){this.setTop(null),this.setRight(null),this.setBottom(null),this.setLeft(null)},refreshPositioned:function(){this.refreshPositionedOnInitialized=!0},doRefreshPositioned:function(){var e=this,t=!e.getConfig("floated",!1,!0)&&(null!==e.getTop()||null!==e.getBottom()||null!==e.getRight()||null!==e.getLeft());t!==this.positioned&&((e.positioned=t)&&(e.refreshInnerState=Ext.emptyFn,!e.isContainer||e.isWidthed()&&e.isHeighted()||e.setAutoSize(!0),e.isCentered()&&e.setCentered(!1),e.isDocked()&&e.setDocked(!1),e.setIsInner(!1),delete e.refreshInnerState),e.element.toggleCls(e.floatingCls,t),e.initialized&&(e.fireEvent("floatingchange",e,t),e.fireEvent("positionedchange",e,t)),t||e.refreshInnerState())},applyZIndex:function(e){return e||0===e||(e=null),null!==e&&(e=Number(e),isNaN(e)&&(e=null)),e},updateZIndex:function(e){var t,i=this.element,n=!this.getFloated()&&this.getModal();i&&!i.destroyed&&(t=i.dom.style,null!==e?t.setProperty("z-index",e,"important"):t.removeProperty("z-index")),n&&!n.destroyed&&n.setZIndex(e-1)},getInnerHtmlElement:function(){var e=this.innerHtmlElement;return e&&e.dom&&e.dom.parentNode||(this.innerHtmlElement=e=Ext.Element.create({cls:Ext.baseCSSPrefix+"innerhtml"}),this.getRenderTarget().appendChild(e)),e},updateHtml:function(e){var t;this.destroyed||(t=this.getInnerHtmlElement(),Ext.isElement(e)?(t.setHtml(""),t.append(e)):t.setHtml(e))},updateHidden:function(e,t){var i,n=this,r=n.renderElement,s=n.getModal();n.rendered?(s&&!s.destroyed&&(n.getFloated()?e?(s=n.getModalSibling())?s.showModalMask():n.hideModalMask():n.showModalMask():!0!==s&&(s.setZIndex(n.getZIndex()-1),s.getHidden()!==e&&s.setHidden(e))),n.destroying||!r||r.destroyed||r.toggleCls(n.hiddenCls,e)):r.toggleCls(n.hiddenCls,e),n.callParent([e,t]),n.isConfiguring||n.destroying||(i=e?"hide":"show",n.hasListeners[i]&&n.fireEvent(i,n),n[e?"afterHide":"afterShow"](n))},hide:function(e){var t,i=this,n=i.activeAnimation;if(i.isVisible()){if(i.hasListeners.beforehide&&!1===i.fireEvent("beforehide",i))return;if(!1===i.beforeHide())return;if(i.viewportResizeListener=Ext.destroy(i.viewportResizeListener),i.setCurrentAlignmentInfo(null),n)return n.on({animationend:function(){i.hide(e)},single:!0}),i;i.getHidden()||((void 0===e||e&&!Ext.isObject(e))&&(e=i.getHideAnimation()),e&&i.on({beforehiddenchange:"onBeforeHiddenChange",scope:i,single:!0,args:[e]}),i.setHidden(!0)),i.getFloated()||(t=i.getModal())&&!0!==t&&!t.destroyed&&t.setHidden(!0)}else i.setHidden(!0);return i},preprocessShow:function(e,t,i){var n,r=this,s=r.getHideMode();r.isContainer&&r.getItems(),r.getHtml(),r.getFloated()&&(n=(!s||"display"===s)&&r.getHidden(),r.rendered?n&&(r.setVisibility(!0),r._hidden=!1):(n=!1!==n,r.findFloatParent(n)),e?(r.notifyIf(),r.alignTo(e,t,i)):r.isCentered()?(r.notifyIf(),r.updateCentered(!0)):r.syncXYPosition(),r.getModal()&&r.showModalMask(),r.getToFrontOnShow()?r.toFront():r.syncAlwaysOnTop(),n&&(r.setVisibility(!1),r._hidden=!0))},showBy:function(e,t,i){Ext.isArray(i)&&(i={offset:i}),this.isVisible()?this.alignTo(e,t,i):(this.getFloated()||(this.getParent()?this.positioned=!0:this.setFloated(!0)),this.alignToArgs=[e,t,i],this.show({animation:!0,alignment:{component:e,alignment:t,options:i}}))},show:function(e,t){var i,n,r=this,s=r.getHidden(),o=r.getFloated();return e&&"object"==typeof e&&"animation"in e?e=(t=e).animation:t=Ext.apply({animation:e},t),(!r.hasListeners.beforeshow||!1!==r.fireEvent("beforeshow",r,t))&&(!1!==r.beforeShow(t)?(i=t.alignment||{},r.preprocessShow(i.component,i.alignment,i.options),r.activeAnimation?r.$isShowing||r.activeAnimation.on({animationend:function(){r.destroying||r.destroyed||r.show(e,t)},single:!0}):(!s&&null!==s||((void 0===e||e&&!Ext.isObject(e))&&(e=r.getShowAnimation()),e&&!r.isConfiguring&&r.on({beforehiddenchange:"onBeforeHiddenChange",scope:r,single:!0,args:[e]}),r.setHidden(!1)),o||(n=r.getModal())&&n.setHidden&&n.setHidden(!1)),r):void 0)},onAnimationStart:function(e,t,i){var n=this.element,r=i.from.transform,s=i.to.transform;e||(this.renderElement.show(),n.removeCls(this.hiddenCls),this.needsCenter&&this.center()),this.$isShowing=!0,this.getFloated()&&r&&s&&!(r.translateX|s.translateX|r.translateY|s.translateY)&&(r.translateX=s.translateX=null,r.translateY=s.translateY=null)},onBeforeHiddenChange:function(e,t,i,n,r){var s=this;e&&(!i||i&&s.isPainted())&&(e.isAnimation||(e=i?s.createHideAnimation(e):s.createShowAnimation(e),e=Ext.Factory.animation(e)),(s.activeAnimation=e).on({animationstart:"onAnimationStart",scope:s,single:!0,args:[i]}),Ext.isEmpty(i)||(e.setOnEnd(function(){if(s.activeAnimation=null,s.$isShowing=!1,!s.destroyed){if(r.resume(),s.destroying||s.destroyed)return;s.getFloated()&&s.syncXYPosition()}}),i||(s._hidden=!1),r.pause()),Ext.Animator.run(e))},setVisibility:function(e){this.renderElement.setVisible(e)},isRendered:function(){return this.rendered},isPainted:function(){return this.renderElement.isPainted()},applyTpl:function(e){return Ext.XTemplate.get(e)},updateTpl:function(e){this.isConfiguring||(e?this.doUpdateTpl():this.getInnerHtmlElement().setHtml(""))},applyData:function(e){return Ext.isObject(e)?Ext.apply({},e):e=e||{}},updateData:function(e){e&&(this.doUpdateTpl(e),this.isConfiguring||this.fireEvent("updatedata",this,e))},applyRecord:function(e){return e&&Ext.isObject(e)&&e.isModel?e:null},updateRecord:function(e,t){t&&t.unjoin(this),e?(e.join(this),this.doUpdateTpl(e.getData(!0))):this.updateData("")},afterEdit:function(){this.updateRecord(this.getRecord())},afterErase:function(){this.setRecord(null)},getXTypes:function(){return this.xtypesChain.join("/")},applyDraggable:function(e,t){return t?e?t.setConfig(e):t.destroy():e&&(e=this.createDraggable(e),e=new Ext.drag.Source(e),this.initDragConstraints&&e.on("initdragconstraints","initDragConstraints",this)),e},createDraggable:function(e){var t=e.listeners;return e=Ext.apply({autoDestroy:!1,component:this,ownerCmp:this,local:!0},e),t&&"this"===t.scope&&(e.listeners=t=Ext.apply({},t),t.scope=this),e},updateDraggable:function(e,t){t&&(e?t.setConfig(e):t.destroy())},onModalMaskTap:function(e){this.getHideOnMaskTap()&&this.hide()},translateAxis:function(e,t,i){var n,r;return"x"===e?n=t:r=t,this.translate(n,r,i)},alignTo:function(e,t,i){this.viewportResizeListener||(this.viewportResizeListener=Ext.on({resize:"onViewportResize",scope:this,destroyable:!0})),this.aligning=!0,this.callParent([e,t,Ext.apply({axisLock:this.getAxisLock()},i)]),this.aligning=!1},onViewportResize:function(){this.isVisible()&&this.realign()},showAt:function(e,t){return(this.getFloated()||this.isPositioned())&&(1===arguments.length&&(e=e.x?(t=e.y,e.x):(t=e[1],e[0])),this.show(),this.isPositioned()?(this.setLeft(e),this.setTop(t)):(this.setX(e),this.setY(t))),this},onAdded:function(e,t){var i;this.callParent([e,t]),this.getFloated()||(i=this.getModal())&&(e.insertBefore(i,this),i.setZIndex(this.getZIndex()-1)),this.el.removeCls(this.rootCls)},onRemoved:function(e){e||this.el.addCls(this.rootCls),this.callParent([e])},applyTooltip:function(e){if(e){if(e.isInstance)return e.setTarget(this),e;(e="string"==typeof e?{html:e}:Ext.merge({},e)).autoCreate||!1===e.autoHide?(delete e.autoCreate,e.target=this,e.xtype=e.xtype||"tooltip",e=Ext.create(e)):delete e.xtype}return e},updateTooltip:function(e,t){var i,n,r,s,o=this.el;t&&(t.isInstance?Ext.destroy(t):(i=(r=Ext.fly(t.target))&&r.peekData())&&delete i.qtip),e&&!e.isInstance&&(o.getData().qtip=e,(n=(n=(n=Ext.tip)&&n.Manager)&&n.instance)&&(s=n.tip).currentTarget.dom===o.dom&&n.onBeforeShow(s))},applyModal:function(e,t){var i;return this.getFloated()?!!e:(i=this.isVisible(),!1===e&&(i=!(e=!0)),(t=Ext.factory(e,Ext.Mask,"boolean"==typeof t?null:t))&&(t.setVisibility(i),t.on("tap","onModalMaskTap",this)),t)},updateModal:function(e){var t,i=this,n=i.getParent(),r=(i.floatWrap||i.element).dom;i.getFloated()?e?i.isVisible()&&!r.nextSibling&&i.showModalMask():(t=i.getModalSibling())?t.showModalMask():i.hideModalMask():n&&(e?(n.insertBefore(e,i),e.setZIndex(i.getZIndex()-1)):n.remove(e))},applyHideAnimation:function(e,t){return Ext.Factory.animation.update(t,e,this,"createHideAnimation")},createHideAnimation:function(e){return Ext.apply({type:"fadeOut",element:this.element},e)},applyShowAnimation:function(e,t){return Ext.Factory.animation.update(t,e,this,"createShowAnimation")},createShowAnimation:function(e){return Ext.apply({type:"fadeIn",element:this.element},e)},doDestroy:function(){var e,t=this;t.isVisible()&&(t.revertFocus(),t.getModal()&&t.getFloated()&&((e=t.getModalSibling())?e.showModalMask():t.hideModalMask())),t.hasListeners.destroy&&t.fireEvent("destroy",t),t.destroyMembers("modal","innerHtmlElement","scrollerElement","scrollable","showAnimation","hideAnimation","centerResizeListener","visibleListener"),t.setPlugins(null),t.setRecord(null),t.setTooltip(null),t.callParent()},privates:{preciseWidth:!1,clearWhenVisible:function(e){var t=this.pendingVisible;t&&(delete t[e],Ext.Object.isEmpty(t)&&(this.pendingVisible=null,this.visibleListener=Ext.destroy(this.visibleListener)))},convertToLocalXY:function(e){var t=this.element.getXY(),i=0,n=0;return n=this.isPositioned()?(i=this.getLeft()||0,this.getTop()||0):(i=this.getX()||0,this.getY()||0),[e[0]-t[0]+i,e[1]-t[1]+n]},doAddListener:function(e,t,i,n,r,s,o){var a=this.element;return this.initialized&&("painted"===e?this.hasListeners.painted||a.on("painted","handleElementPainted",this):"resize"!==e||this.isViewport||this.hasListeners.resize||a.on({scope:this,resize:"handleElementResize",priority:1e3})),this.callParent([e,t,i,n,r,s,o])},doRemoveListener:function(e,t,i){var n=this.element,r=this.callParent([e,t,i]);return r&&this.initialized&&("painted"===e?this.hasListeners.painted||n.un("painted","handleElementPainted",this):"resize"!==e||this.isViewport||this.hasListeners.resize||n.un("resize","handleElementResize",this)),r},doUpdateTpl:function(e){var t,i=this.getTpl();i&&(t=this.getTplWriteMode(),e=e||this.getData()||{},i[t](this.getInnerHtmlElement(),e))},getRenderTarget:function(){var e=this.getScrollable();return e&&e.isVirtualScroller?e.getInnerElement():this.bodyElement},handleElementPainted:function(e){this.fireEvent("painted",this,e)},handleElementResize:function(e,t){var i,n,r=Math.ceil,s=this.lastSize,o=s.width||null,a=s.height||null;if(t.flag){if(i=t.width,n=t.height,0===i&&0===n)return;this.preciseWidth||(i=r(i),n=r(n)),s.width=i,s.height=n,this.onResize&&this.onResize(i,n,o,a,t),this.isCentered()&&this.center(),this.fireEvent("resize",this,i,n,o,a,t)}},handleGlobalShow:function(e){this.maybeRunWhenVisible(e)},handleGlobalExpand:function(e){this.maybeRunWhenVisible(e)},maybeRunWhenVisible:function(e){(e===this||this.isDescendantOf(e))&&this.canLayoutChildren()&&this.runWhenVisible()},canLayoutChildren:function(){for(var e=this;e;){if(!e.isVisible()||e.hasHiddenContent())return!1;e=e.getRefOwner()}return!0},runWhenVisible:function(){var e,t=this.pendingVisible;for(e in this.pendingVisible=null,this.visibleListener=Ext.destroy(this.visibleListener),t)this[e].apply(this,t[e])},whenVisible:function(e,t){var i=this.visibleListener,n=this.pendingVisible,r=this.canLayoutChildren();return t=t||Ext.emptyArray,r||i||(this.visibleListener=Ext.on({scope:this,show:"handleGlobalShow",expand:"handleGlobalExpand",destroyable:!0})),r?n?(n[e]=t,this.runWhenVisible()):this[e].apply(this,t):(n||(this.pendingVisible=n={}),n[e]=t),r},setXY:function(e,t,i){var n=this.getFloated();"number"!=typeof e&&(i=t,t=e[1],e=e[0]),this.$updatingXY=!0,n?(null!=e&&this.setX(e),null!=t&&this.setY(t)):(null!=e&&this.setLeft(e),null!=t&&this.setTop(t)),this.$updatingXY=!1,n?this.syncXYPosition(i):this.translate(e,t,i)},syncXYPosition:function(e){this.aligning||(this.viewportResizeListener=Ext.destroy(this.viewportResizeListener)),this.callParent([e])}},deprecated:{"6.2.0":{methods:{resetFloating:"resetPositioned"}},6.5:{configs:{styleHtmlCls:null,styleHtmlContent:null}}}},function(e){document.querySelector("meta[name=viewport]")||Ext.log.warn('Ext JS requires a viewport meta tag in order to function correctly on mobile devices. Please add the following tag to the <head> of your html page: \\n <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=10, user-scalable=yes">')}),Ext.define("Ext.theme.material.Widget",{override:"Ext.Widget",statics:{floatInset:16/(window.devicePixelRatio||1)}}),Ext.define("Ext.fx.State",{isAnimatable:{"background-color":!0,"background-image":!0,"background-position":!0,"border-bottom-color":!0,"border-bottom-width":!0,"border-color":!0,"border-left-color":!0,"border-left-width":!0,"border-right-color":!0,"border-right-width":!0,"border-spacing":!0,"border-top-color":!0,"border-top-width":!0,"border-width":!0,bottom:!0,color:!0,crop:!0,"font-size":!0,"font-weight":!0,height:!0,left:!0,"letter-spacing":!0,"line-height":!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"max-height":!0,"max-width":!0,"min-height":!0,"min-width":!0,opacity:!0,"outline-color":!0,"outline-offset":!0,"outline-width":!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,right:!0,"text-indent":!0,"text-shadow":!0,top:!0,"vertical-align":!0,visibility:!0,width:!0,"word-spacing":!0,"z-index":!0,zoom:!0,transform:!0},constructor:function(e){this.data={},this.set(e)},setConfig:function(e){return this.set(e),this},setRaw:function(e){return this.data=e,this},clear:function(){return this.setRaw({})},setTransform:function(e,t){var i,n,r=this.data,s=Ext.isArray(t),o=r.transform;if(o=o||(r.transform={translateX:0,translateY:0,translateZ:0,scaleX:1,scaleY:1,scaleZ:1,rotate:0,rotateX:0,rotateY:0,rotateZ:0,skewX:0,skewY:0}),"string"==typeof e)switch(e){case"translate":if(s){if(0===(i=t.length))break;if(o.translateX=t[0],1===i)break;if(o.translateY=t[1],2===i)break;o.translateZ=t[2]}else o.translateX=t;break;case"rotate":if(s){if(0===(i=t.length))break;if(o.rotateX=t[0],1===i)break;if(o.rotateY=t[1],2===i)break;o.rotateZ=t[2]}else o.rotate=t;break;case"scale":if(s){if(0===(i=t.length))break;if(o.scaleX=t[0],1===i)break;if(o.scaleY=t[1],2===i)break;o.scaleZ=t[2]}else o.scaleX=t,o.scaleY=t;break;case"skew":if(s){if(0===(i=t.length))break;if(o.skewX=t[0],1===i)break;o.skewY=t[1]}else o.skewX=t;break;default:o[e]=t}else for(n in e)e.hasOwnProperty(n)&&(t=e[n],this.setTransform(n,t))},set:function(e,t){var i,n=this.data;if("string"!=typeof e)for(i in e)t=e[i],"transform"===i?this.setTransform(t):n[i]=t;else"transform"===e?this.setTransform(t):n[e]=t;return this},unset:function(e){var t=this.data;return t.hasOwnProperty(e)&&delete t[e],this},getData:function(){return this.data}}),Ext.define("Ext.fx.animation.Abstract",{extend:Ext.Evented,mixins:[Ext.mixin.Factoryable],factoryConfig:{type:"animation"},isAnimation:!0,config:{name:"",element:null,before:null,from:{},to:{},after:null,states:{},duration:300,easing:"linear",iteration:1,direction:"normal",delay:0,onBeforeStart:null,callback:null,onEnd:null,onBeforeEnd:null,scope:null,reverse:null,preserveEndState:!1,replacePrevious:!0},STATE_FROM:"0%",STATE_TO:"100%",DIRECTION_UP:"up",DIRECTION_TOP:"top",DIRECTION_DOWN:"down",DIRECTION_BOTTOM:"bottom",DIRECTION_LEFT:"left",DIRECTION_RIGHT:"right",stateNameRegex:/^(?:[\\d.]+)%$/,constructor:function(){return this.states={},this.callParent(arguments),this},applyElement:function(e){return Ext.get(e)},applyBefore:function(e,t){if(e)return Ext.factory(e,Ext.fx.State,t)},applyAfter:function(e,t){if(e)return Ext.factory(e,Ext.fx.State,t)},setFrom:function(e){return this.setState(this.STATE_FROM,e)},setTo:function(e){return this.setState(this.STATE_TO,e)},getFrom:function(){return this.getState(this.STATE_FROM)},getTo:function(){return this.getState(this.STATE_TO)},setStates:function(e){var t,i=this.stateNameRegex;for(t in e)i.test(t)&&this.setState(t,e[t]);return this},getStates:function(){return this.states},updateCallback:function(e){e&&this.setOnEnd(e)},end:function(){this.stop()},stop:function(){this.fireEvent("stop",this)},destroy:function(){this.destroying=!0,this.stop(),this.callParent(),this.destroying=!1,this.destroyed=!0},setState:function(e,t){var i,n=this.getStates();return(i=Ext.factory(t,Ext.fx.State,n[e]))?n[e]=i:e===this.STATE_TO&&Ext.Logger.error("Setting and invalid '100%' / 'to' state of: "+t),this},getState:function(e){return this.getStates()[e]},getData:function(){var e,t,i=this,n=i.getStates(),r={},s=i.getBefore(),o=i.getAfter(),a=n[i.STATE_FROM],l=n[i.STATE_TO],c=a.getData(),u=l.getData();for(t in n)n.hasOwnProperty(t)&&(e=n[t].getData(),r[t]=e);return{before:s?s.getData():{},after:o?o.getData():{},states:r,from:c,to:u,duration:i.getDuration(),iteration:i.getIteration(),direction:i.getDirection(),easing:i.getEasing(),delay:i.getDelay(),onEnd:i.getOnEnd(),onBeforeEnd:i.getOnBeforeEnd(),onBeforeStart:i.getOnBeforeStart(),scope:i.getScope(),preserveEndState:i.getPreserveEndState(),replacePrevious:i.getReplacePrevious()}}}),Ext.define("Ext.fx.animation.Slide",{extend:Ext.fx.animation.Abstract,alternateClassName:"Ext.fx.animation.SlideIn",alias:["animation.slide","animation.slideIn"],config:{direction:"left",out:!1,offset:0,easing:"auto",containerBox:"auto",elementBox:"auto",isElementBoxFit:!0,useCssTransform:!0},reverseDirectionMap:{up:"down",top:"down",down:"up",bottom:"up",left:"right",right:"left"},applyEasing:function(e){return"auto"===e?"ease-"+(this.getOut()?"in":"out"):e},getContainerBox:function(){var e=this._containerBox;return"auto"===e&&(e=this.getElement().getParent().getBox()),e},getElementBox:function(){var e=this._elementBox;return this.getIsElementBoxFit()?this.getContainerBox():("auto"===e&&(e=this.getElement().getBox()),e)},getData:function(){var e,t,i,n,r,s=this.getElementBox(),o=this.getContainerBox(),a=s||o,l=this.getFrom(),c=this.getTo(),u=this.getOut(),d=this.getOffset(),h=this.getDirection(),f=this.getUseCssTransform(),g=this.getReverse(),p=0,m=0;switch("string"==typeof d&&(e=!0,d=parseFloat(d)),g&&(h=this.reverseDirectionMap[h]),h){case this.DIRECTION_UP:case this.DIRECTION_TOP:e&&(d=a.height*d/100),m=u?o.top-a.top-a.height-d:o.bottom-a.bottom+a.height+d;break;case this.DIRECTION_DOWN:case this.DIRECTION_BOTTOM:e&&(d=a.height*d/100),m=u?o.bottom-a.bottom+a.height+d:o.top-a.height-a.top-d;break;case this.DIRECTION_RIGHT:e&&(d=a.width*d/100),p=u?o.right-a.right+a.width+d:o.left-a.left-a.width-d;break;case this.DIRECTION_LEFT:e&&(d=a.width*d/100),p=u?o.left-a.left-a.width-d:o.right-a.right+a.width+d}return t=u?0:p,i=u?0:m,f?l.setTransform({translateX:t,translateY:i}):(l.set("left",t),l.set("top",i)),n=u?p:0,r=u?m:0,f?c.setTransform({translateX:n,translateY:r}):(c.set("left",n),c.set("top",r)),this.callParent(arguments)}}),Ext.define("Ext.fx.animation.SlideOut",{extend:Ext.fx.animation.Slide,alias:["animation.slideOut"],config:{out:!0}}),Ext.define("Ext.fx.animation.Fade",{extend:Ext.fx.animation.Abstract,alternateClassName:"Ext.fx.animation.FadeIn",alias:["animation.fade","animation.fadeIn"],config:{out:!1,before:{display:null,opacity:0},after:{opacity:null},reverse:null},updateOut:function(e){var t=this.getTo(),i=this.getFrom();e?(i.set("opacity",1),t.set("opacity",0)):(i.set("opacity",0),t.set("opacity",1))}}),Ext.define("Ext.fx.animation.FadeOut",{extend:Ext.fx.animation.Fade,alias:"animation.fadeOut",config:{out:!0,before:{}}}),Ext.define("Ext.fx.animation.Flip",{extend:Ext.fx.animation.Abstract,alias:"animation.flip",config:{easing:"ease-in",direction:"right",half:!1,out:null},getData:function(){var e=this.getFrom(),t=this.getTo(),i=this.getDirection(),n=this.getOut(),r=this.getHalf()?90:180,s=1,o=1,a=0,l=0,c=0,u=0;switch(n?o=.8:s=.8,i){case this.DIRECTION_UP:case this.DIRECTION_TOP:n?c=r:a=-r;break;case this.DIRECTION_DOWN:case this.DIRECTION_BOTTOM:n?c=-r:a=r;break;case this.DIRECTION_RIGHT:n?u=r:l=-r;break;case this.DIRECTION_LEFT:n?u=-r:l=r}return e.setTransform({rotateX:a,rotateY:l,scale:s}),t.setTransform({rotateX:c,rotateY:u,scale:o}),this.callParent()}}),Ext.define("Ext.fx.animation.Pop",{extend:Ext.fx.animation.Abstract,alias:["animation.pop","animation.popIn"],alternateClassName:"Ext.fx.animation.PopIn",config:{out:!1,before:{display:null,opacity:0},after:{opacity:null}},getData:function(){var e=this.getTo(),t=this.getFrom();return this.getOut()?(t.set("opacity",1),t.setTransform({scale:1}),e.set("opacity",0),e.setTransform({scale:0})):(t.set("opacity",0),t.setTransform({scale:0}),e.set("opacity",1),e.setTransform({scale:1})),this.callParent(arguments)}}),Ext.define("Ext.fx.animation.PopOut",{extend:Ext.fx.animation.Pop,alias:"animation.popOut",config:{out:!0,before:{}}}),Ext.define("Ext.fx.Animation",{constructor:function(e){var t,i=Ext.fx.animation.Abstract;return"string"==typeof e?(t=e,e={}):e&&e.type&&(t=e.type),t&&((i=Ext.ClassManager.getByAlias("animation."+t))||Ext.Logger.error("Invalid animation type of: '"+t+"'")),Ext.factory(e,i)}}),Ext.define("Ext.overrides.Progress",{override:"Ext.Progress",initialize:function(){this.callParent(),this.on("painted","onPainted",this)},onPainted:function(){this.syncWidth()},onResize:function(e){this.syncWidth(e)},syncWidth:function(e){null==e&&(e=this.element.getWidth()),this.backgroundEl.setWidth(e),this.textEl.setWidth(e)},privates:{startBarAnimation:function(e){var t=this;t.barAnim=new Ext.fx.Animation(Ext.apply(e,{element:t.barEl,preserveEndState:!0,callback:function(){delete t.barAnim}})),Ext.Animator.run(t.barAnim)},stopBarAnimation:function(){var e=this.barAnim;e&&e.destroy(),this.barAnim=null}}}),Ext.define("Ext.app.EventDomain",{statics:{instances:{}},isEventDomain:!0,isInstance:!1,constructor:function(){this.isInstance||(Ext.app.EventDomain.instances[this.type]=this),this.bus={},this.monitoredClasses=[]},dispatch:function(e,t,i){t=Ext.canonicalEventName(t);var n,r,s,o,a,l,c,u,d=this.bus[t];if(!d)return!0;for(n in d)if(d.hasOwnProperty(n)&&this.match(e,n,this.controller))for(s in r=d[n])if(r.hasOwnProperty(s)&&(o=r[s]).controller.isActive())for(l=(a=o.list).length,c=0;c<l;c++)if(!1===(u=a[c]).fire.apply(u,i))return!1;return!0},listen:function(e,t){var i,n,r,s,o,a,l,c,u,d,h=this.bus,f=this.idProperty,g=this.monitoredClasses,p=g.length,m=t.getId(),x="component"===this.type,y=x?t.getRefMap():null;for(r in e)if(c=e[r],x&&(r=y[r]||r),c)for(u in f&&(/^[*#]/.test(r)||Ext.raise("Selectors containing id should begin with #"),r="*"===r?r:r.substring(1)),c){for(s=null,o=c[u],a=t,u=Ext.canonicalEventName(u),l=new Ext.util.Event(t,u),Ext.isObject(o)&&(o=(s=o).fn,a=s.scope||t,delete s.fn,delete s.scope),s&&s.scope||"string"!=typeof o?"string"==typeof o&&(o=a[o]):(a[o]||Ext.raise('Cannot resolve "'+o+'" on controller.'),a=null),l.addListener(o,a,s),i=0;i<p;++i)(d=g[i].hasListeners)&&d._incr_(u);((n=(n=h[u]||(h[u]={}))[r]||(n[r]={}))[m]||(n[m]={controller:t,list:[]})).list.push(l)}},match:function(e,t){var i=this.idProperty;return!!i&&("*"===t||e[i]===t)},monitor:function(e){var n=this,t=e.isInstance?e:e.prototype,r=t.doFireEvent;n.monitoredClasses.push(e),t.doFireEvent=function(e,t){var i;return!1===(i=r.apply(this,arguments))||this.destroyed||this.isSuspended(e)||(i=n.dispatch(this,e,t)),i}},unlisten:function(e){var t,i,n,r,s,o,a,l,c,u,d,h=this.bus,f=e,g=this.monitoredClasses,p=g.length;for(i in e.isController&&(f=e.getId()),h)if(i=Ext.canonicalEventName(i),h.hasOwnProperty(i)&&(a=h[i]))for(o in a)if((u=(t=a[o])[f])&&(n=u.list)){for(l=0,r=n.length;l<r;++l)for((s=n[l]).clearListeners(),c=0;c<p;++c)(d=g[c].hasListeners)&&d._decr_(s.name);delete t[f]}},destroy:function(){this.monitoredClasses=this.bus=null,this.callParent()}}),Ext.define("Ext.app.domain.Component",{extend:Ext.app.EventDomain,singleton:!0,type:"component",constructor:function(){this.callParent(),this.monitor(Ext.Widget)},dispatch:function(e,t,i){for(var n,r,s=e.lookupController(!1);s;){if((n=s.compDomain)&&!1===n.dispatch(e,t,i))return!1;s=(r=s.getView())?r.lookupController(!0):null}return this.callParent([e,t,i])},match:function(e,t){return e.is(t)}}),Ext.define("Ext.app.EventBus",{singleton:!0,constructor:function(){var e=Ext.app.EventDomain.instances;this.callParent(),this.domains=e,this.bus=e.component.bus},control:function(e,t){return this.domains.component.listen(e,t)},listen:function(e,t){var i,n=this.domains;for(i in e)e.hasOwnProperty(i)&&n[i].listen(e[i],t)},unlisten:function(e){var t,i=Ext.app.EventDomain.instances;for(t in i)i[t].unlisten(e)}}),Ext.define("Ext.app.domain.Global",{extend:Ext.app.EventDomain,singleton:!0,type:"global",constructor:function(){this.callParent(),this.monitor(Ext.GlobalEvents)},listen:function(e,t){this.callParent([{global:e},t])},match:Ext.returnTrue}),Ext.define("Ext.route.Handler",{lazy:!1,statics:{fromRouteConfig:function(e,t){return new this({action:e.action,before:e.before,lazy:e.lazy,exit:e.exit,scope:t,single:e.single})}},constructor:function(e){Ext.apply(this,e)}}),Ext.define("Ext.route.Action",{config:{actions:null,befores:null,urlParams:[]},started:!1,stopped:!1,constructor:function(e){this.deferred=new Ext.Deferred,this.resume=this.resume.bind(this),this.stop=this.stop.bind(this),this.initConfig(e),this.callParent([e])},applyActions:function(e){return e=e&&Ext.Array.from(e)},applyBefores:function(e){return e=e&&Ext.Array.from(e)},destroy:function(){this.deferred=null,this.setBefores(null).setActions(null).setUrlParams(null),this.callParent()},resume:function(){return this.next()},stop:function(){return this.stopped=!0,this.done()},next:function(){var e,t,i,n=this,r=n.getActions(),s=n.getBefores(),o=n.getUrlParams();return i=Ext.isArray(o)?o.slice():[o],!n.stopped&&(s&&s.length||r&&r.length)?s&&s.length?(e=s.shift(),i.push(n),(t=Ext.callback(e.fn,e.scope,i))&&t.then&&t.then(function(e){n.resume(e)},function(e){n.stop(e)})):(r&&r.length&&(e=r.shift(),Ext.callback(e.fn,e.scope,i)),n.next()):n.done(),n},run:function(){var e=this.deferred;return this.started||(this.next(),this.started=!0),e.promise},done:function(){var e=this.deferred;return this.stopped?e.reject():e.resolve(),this.destroy(),this},before:function(e,t,i){Ext.isBoolean(e)||(i=t,t=e,e=!1);var n=this.getBefores(),r={fn:t,scope:i};if(!this.destroyed)return n?e?n.unshift(r):n.push(r):this.setBefores(r),this;Ext.raise("This action has has already resolved and therefore will never execute this function.")},action:function(e,t,i){Ext.isBoolean(e)||(i=t,t=e,e=!1);var n=this.getActions(),r={fn:t,scope:i};if(!this.destroyed)return n?e?n.unshift(r):n.push(r):this.setActions(r),this;Ext.raise("This action has has already resolved and therefore will never execute this function.")},then:function(e,t){if(!this.destroyed)return this.deferred.then(e,t);Ext.raise("This action has has already resolved and therefore will never execute either function.")}}),Ext.define("Ext.route.Route",{config:{name:null,url:null,allowInactive:!1,conditions:{},caseInsensitive:!1,handlers:[],types:{cached:!0,$value:{alpha:{re:"([a-zA-Z]+)"},alphanum:{re:"([a-zA-Z0-9]+|[0-9]+(?:\\\\.[0-9]+)?|[0-9]*(?:\\\\.[0-9]+){1})",parse:function(e){var t;return e&&this.numRe.test(e)&&(t=parseFloat(e),isNaN(t)||(e=t)),e}},num:{re:"([0-9]+(?:\\\\.[0-9]+)?|[0-9]*(?:\\\\.[0-9]+){1})",parse:function(e){return e=e&&parseFloat(e)}},"...":{re:"(.+)?",split:"/",parse:function(e){var t,i,n;if(e)for(t=e.length,i=0;i<t;i++)n=parseFloat(e[i]),isNaN(n)||(e[i]=n);return e}}}}},defaultMatcher:"([%a-zA-Z0-9\\\\-\\\\_\\\\s,]+)",numRe:/^[0-9]*(?:\\.[0-9]*)?$/,typeParamRegex:/:{([0-9A-Za-z_]+)(?::?([0-9A-Za-z_]+|.{3})?)}/g,optionalGroupRegex:/\\((.+?)\\)/g,paramMatchingRegex:/:([0-9A-Za-z_]+)/g,isRoute:!0,constructor:function(e){var t;this.initConfig(e),(t=this.getUrl().replace(this.optionalGroupRegex,function(e,t){return"(?:"+t+")?"})).match(this.typeParamRegex)?this.handleNamedPattern(t):this.handlePositionalPattern(t)},handlePositionalPattern:function(e){this.paramsInMatchString=e.match(this.paramMatchingRegex)||[],this.matcherRegex=this.createMatcherRegex(e),this.mode="positional"},handleNamedPattern:function(s){var e=this.typeParamRegex,o=this.getConditions(),a=this.getTypes(),l=this.defaultMatcher,c={},t=s.replace(e,function(e,t,i){var n=i&&a[i],r=o[t]||n||l;return c[t]&&Ext.raise('"'+t+'" already defined in route "'+s+'"'),i&&!n&&Ext.raise('Unknown parameter type "'+i+'" in route "'+s+'"'),Ext.isObject(r)&&(r=r.re),c[t]={matcher:r,type:i},r});-1!==t.search(this.paramMatchingRegex)&&Ext.raise("URL parameter mismatch. Positional url parameter found while in named mode."),this.paramsInMatchString=c,this.matcherRegex=new RegExp("^"+t+"$",this.getCaseInsensitive()?"i":""),this.mode="named"},recognize:function(e){var t,i,n,r,s,o;if(this.recognizes(e)){for(i=(t=this.getHandlers()).length,o=0;o<i;o++)if(t[o].lastToken!==e){n=!0;break}return n||e!==this.lastToken?(r=this.matchesFor(e),s=this.getUrlParams(e),Ext.applyIf(r,{historyUrl:e,urlParams:s})):!0}return!1},getUrlParams:function(e){return"named"===this.mode?this.getNamedUrlParams(e):this.getPositionalUrlParams(e)},getPositionalUrlParams:function(e){var t,i,n,r,s=[],o=this.getConditions(),a=this.paramsInMatchString,l=e.match(this.matcherRegex),c=a.length;for(l.shift(),t=0;t<c;t++)i=a[t],r=l[t],(o[i]||":"===i[0]&&o[i=i.substr(1)])&&(n=o[i]),r=this.parseValue(r,n),Ext.isDefined(r)&&""!==r&&(Ext.isArray(r)?s.push.apply(s,r):s.push(r));return s},getNamedUrlParams:function(e){var t,i,n,r,s,o=this.getConditions(),a=this.getTypes(),l={},c=this.paramsInMatchString,u=e.match(this.matcherRegex);for(t in u.shift(),c)i=c[t],n=u.shift(),s=o[t],r=a[i.type],(s||r)&&(r=Ext.merge({},s,a[i.type])),l[t]=this.parseValue(n,r);return l},parseValue:function(e,t){return t&&(e&&t.split&&((e=e.split(t.split))[0]||e.shift(),e[e.length-1]||e.pop()),t.parse&&(e=t.parse.call(this,e))),!e&&Ext.isString(e)&&(e=void 0),e},recognizes:function(e){return this.matcherRegex.test(e)},execute:function(i,n){var r,s,o,a,l,c,u,d=this,h=d.getAllowInactive(),f=d.getHandlers(),g=Ext.route.Router.getQueueRoutes(),p=f.length,m=n&&n.urlParams||[];return d.lastToken=i,g||(l=[]),new Ext.Promise(function(e,t){if(!1===n)t();else{for(g&&(a=new Ext.route.Action({urlParams:m})),r=0;r<p;r++)s=f[r],null!=i&&s.lastToken===i||(o=s.scope,s.lastToken=i,!h&&o.isActive&&!o.isActive()||(g||(a=new Ext.route.Action({urlParams:m})),c=s.single,s.before&&a.before(s.before,o),s.action&&a.action(s.action,o),c&&(u=Ext.bind(d.removeHandler,d,[null,s]),!0===c?s.action?a.action(u,d):a.before(function(){return u(),Ext.Promise.resolve()},d):a.before("before"===c,function(){return u(),Ext.Promise.resolve()},d)),g||(!1===Ext.fireEvent("beforeroute",a,d)?a.destroy():l.push(a.run()))));g?!1===Ext.fireEvent("beforeroute",a,d)?(a.destroy(),t()):a.run().then(e,t):Ext.Promise.all(l).then(e,t)}})},matchesFor:function(e){var t,i={},n="named"===this.mode?Ext.Object.getKeys(this.paramsInMatchString):this.paramsInMatchString,r=e.match(this.matcherRegex),s=n.length;for(r.shift(),t=0;t<s;t++)i[n[t].replace(":","")]=r[t];return i},createMatcherRegex:function(e){var t,i,n,r=this.paramsInMatchString,s=this.getConditions(),o=this.defaultMatcher,a=r.length,l=this.getCaseInsensitive()?"i":"";if("*"===e)e=e.replace("*","\\\\*");else for(t=0;t<a;t++)n=s[i=r[t]]?s[i]:":"===i[0]&&s[i.substr(1)]?s[i.substr(1)]:o,Ext.isObject(n)&&(n=n.re),e=e.replace(new RegExp(i),n||o);return new RegExp("^"+e+"$",l)},addHandler:function(e){var t=this.getHandlers();return e.isInstance||(e=new Ext.route.Handler(e)),t.push(e),e.route=this},removeHandler:function(e,t){var i,n,r=this.getHandlers(),s=r.length,o=[];for(i=0;i<s;i++)n=r[i],t?n!==t&&o.push(n):n.scope!==e&&o.push(n);return this.setHandlers(o),this},clearLastTokens:function(){var e,t=this.getHandlers(),i=t.length;for(e=0;e<i;e++)t[e].lastToken=null;this.lastToken=null},onExit:function(){var e,t,i,n=this.getHandlers(),r=this.getAllowInactive(),s=n.length,o=new Ext.route.Action({urlParams:[this.lastToken]});for(this.clearLastTokens(),e=0;e<s;e++)if((t=n[e]).exit){if(i=t.scope,!r&&i.isActive&&!i.isActive())continue;o.action(t.exit,i)}!1===Ext.fireEvent("beforerouteexit",o,this)?o.destroy():o.run()}}),Ext.define("Ext.util.Observable",{extend:Ext.mixin.Observable,$applyConfigs:!0},function(e){var t=Ext.mixin.Observable;e.releaseCapture=t.releaseCapture,e.capture=t.capture,e.captureArgs=t.captureArgs,e.observe=e.observeClass=t.observe}),Ext.define("Ext.util.History",{singleton:!0,alternateClassName:"Ext.History",mixins:{observable:Ext.util.Observable},useTopWindow:!1,hashRe:/^(#?!?)/,constructor:function(){this.ready=!1,this.currentToken=null,this.mixins.observable.constructor.call(this)},getHash:function(){return(this.win.location.hash||"").replace(this.hashRe,"")},setHash:function(e,t){var i=this.hashRe,n=this.win.location;e=e.replace(i,this.hashbang?"#!":"#");try{t?n.replace(e):n.hash=e,this.currentToken=e.replace(i,"")}catch(e){}},handleStateChange:function(e){e=e.replace(this.hashRe,""),this.fireEvent("change",this.currentToken=e)},startUp:function(){this.currentToken=this.getHash(),Ext.get(this.win).on("hashchange",this.onHashChange,this),this.ready=!0,this.fireEvent("ready",this)},onHashChange:function(){var e=this.getHash();e!==this.hash&&(this.hash=e,this.handleStateChange(e))},init:function(e,t){var i=this;i.ready?Ext.callback(e,t,[i]):Ext.isReady?(i.win=i.useTopWindow?window.top:window,i.hash=i.getHash(),e&&i.on("ready",e,t,{single:!0}),i.startUp()):Ext.onInternalReady(function(){i.init(e,t)})},add:function(e,t){var i=!1;return!1!==t&&this.getToken()===e||(this.setHash(e),i=!0),i},replace:function(e,t){var i=!1;return!1!==t&&this.getToken()===e||(this.setHash(e,!0),i=!0),i},back:function(){this.win.history.go(-1)},forward:function(){this.win.history.go(1)},getToken:function(){return this.ready?this.currentToken:this.getHash()}}),Ext.define("Ext.route.Router",{singleton:!0,config:{hashbang:null,multipleToken:"|",queueRoutes:!0},constructor:function(){var e=Ext.util.History;e.ready||e.init(),e.on("change",this.onStateChange,this),this.initConfig(),this.clear()},updateHashbang:function(e){Ext.util.History.hashbang=e},onStateChange:function(e){var t,i,n,r=e.split(this.getMultipleToken());if(this.isSuspended){if(t=this.suspendedQueue,i=0,n=r.length,t)for(;i<n;i++)e=r[i],Ext.Array.contains(t,e)||t.push(e)}else this.handleBefore(r)},handleBefore:function(e){var t=new Ext.route.Action;!1===Ext.fireEvent("beforeroutes",t,e)?t.destroy():t.run().then(this.handleBeforeRoute.bind(this,e),Ext.emptyFn)},handleBeforeRoute:function(e){var t=this.getByName("*");t?t.execute().then(this.doRun.bind(this,e),Ext.emptyFn):this.doRun(e)},doRun:function(e){for(var t,i,n,r,s,o=this.application,a=this.routes,l=0,c=e.length,u={},d=[];l<c;l++){for(n in t=e[l],i=!1,a)(s=(r=a[n]).recognize(t))?((i=!0)!==s&&r.execute(t,s).then(null,Ext.bind(this.onRouteRejection,this,[r],0)),Ext.Array.remove(d,r),u[n]||(u[n]=1)):u[n]||d.push(r);i||(o&&o.fireEvent("unmatchedroute",t),Ext.fireEvent("unmatchedroute",t))}for(l=0,c=d.length;l<c;l++)d[l].onExit()},onRouteRejection:function(e,t){Ext.fireEvent("routereject",e,t),t&&Ext.raise(t)},connect:function(e,t,i){var n,r,s=this.routes,o=this.getMultipleToken(),a=t.name||e,l=Ext.getVersion().parts.slice(0,3).join(".");if("!"===e[0]&&(Ext.util.History.hashbang||Ext.log({level:"error",msg:'Route found with "!" ("'+e+'"). Should use new hashbang functionality instead. Please see the router guide for more: https://docs.sencha.com/extjs/'+l+"/guides/application_architecture/router.html"}),e=e.substr(1),this.setHashbang(!0)),Ext.isString(t)&&(t={action:t}),n=Ext.route.Handler.fromRouteConfig(t,i),(r=s[a])||(t.name=a,t.url=e,r=s[a]=new Ext.route.Route(t)),r.addHandler(n),n.lazy){var c,u,d=Ext.util.History.getToken().split(o),h=d.length,f=[];for(c=0;c<h;c++)u=d[c],-1===Ext.Array.indexOf(f,u)&&r.recognize(u)&&f.push(u);this.onStateChange(f.join(o))}return n},disconnect:function(e,t){var i,n,r=this.routes;if(t)(i=t.route||this.getByName(t.name||t.url))&&i.removeHandler(e,t);else for(n in r)(i=r[n]).removeHandler(e)},recognize:function(e){var t,i,n,r,s,o,a=this.routes,l=[];for(t in a)if(r=(i=a[t])&&i.length)for(n=0;n<r;n++)(o=(s=i[n]).recognize(e))&&l.push({route:s,urlParams:o});return!!l.length&&l},draw:function(e){e.call(this,this)},clear:function(){this.routes={}},clearLastTokens:function(e){var t,i,n=this.routes;for(t in n)i=n[t],e&&!i.recognize(e)||i.clearLastTokens()},getByName:function(e){var t=this.routes;if(t)return t[e]},suspend:function(e){this.isSuspended=!0,this.suspendedQueue||!1===e||(this.suspendedQueue=[])},resume:function(e){var t,i=this.suspendedQueue;this.isSuspended&&(this.isSuspended=!1,this.suspendedQueue=null,!e&&i&&(t=i.join(this.getMultipleToken()),this.onStateChange(t)))}}),Ext.define("Ext.route.Mixin",{extend:Ext.Mixin,mixinConfig:{id:"routerable",before:{destroy:"destroyRouterable"}},config:{routes:null},destroyRouterable:function(){Ext.route.Router.disconnect(this)},applyRoutes:function(e,t){var i,n=Ext.route.Router;if(e)for(i in e)e[i]=n.connect(i,e[i],this);if(t)for(i in t)n.disconnect(this,t[i]);return e},redirectTo:function(e,t){var i,n,r,s,o,a,l,c=Ext.util.History.getToken(),u=Ext.route.Router,d=u.getMultipleToken(),h=c?c.split(d):[],f=h.length;if(-1===e)return Ext.util.History.back();if(1===e)return Ext.util.History.forward();if(e.isModel)e=e.toUrl();else if(Ext.isObject(e)){for(r in e)if(s=e[r],Ext.isObject(s)||(s={token:s}),f){if(o=u.getByName(r)){for(l=!1,n=0;n<f;n++)if(a=h[n],o.matcherRegex.test(a))if(l=!0,s.token){if(s.fn&&!1===s.fn.call(this,a,h,s))continue;h[n]=s.token,s.force&&(o.lastToken=null)}else h.splice(n,1),n--,f--,o.lastToken=null;s&&s.token&&!l&&h.push(s.token)}}else s&&s.token&&h.push(s.token);e=h.join(d)}if(!0===t?(i=t,t=null):t&&(i=t.force),f=h.length,i&&f)for(n=0;n<f;n++)a=h[n],u.clearLastTokens(a);return c===e?(i&&u.onStateChange(e),!1):(t&&t.replace?Ext.util.History.replace(e):Ext.util.History.add(e),!0)},privates:{afterClassMixedIn:function(e){var t=e.prototype,i=t.routes;i&&(delete t.routes,e.getConfigurator().add({routes:i}))}}}),Ext.define("Ext.app.BaseController",{mixins:[Ext.mixin.Observable,Ext.route.Mixin],isController:!0,config:{id:void 0,control:null,listen:null},constructor:function(e){Ext.apply(this,e),delete this.control,delete this.listen,this.eventbus=Ext.app.EventBus,this.mixins.observable.constructor.call(this,e)},updateId:function(e){this.id=e},applyListen:function(e){return Ext.isObject(e)&&(e=Ext.clone(e)),e},applyControl:function(e){return Ext.isObject(e)&&(e=Ext.clone(e)),e},updateControl:function(e){this.getId(),e&&this.control(e)},updateListen:function(e){this.getId(),e&&this.listen(e)},isActive:function(){return!0},control:function(e,t,i){var n,r=i;Ext.isString(e)?(n={})[e]=t:(n=e,r=t),this.eventbus.control(n,r||this)},listen:function(e,t){this.eventbus.listen(e,t||this)},destroy:function(){var e=this.eventbus;e&&(e.unlisten(this),this.eventbus=null),this.callParent()}}),Ext.define("Ext.app.Util",{},function(){Ext.apply(Ext.app,{namespaces:{Ext:{}},addNamespaces:function(e){var t,i,n=Ext.app.namespaces;for(Ext.isArray(e)||(e=[e]),t=0,i=e.length;t<i;t++)n[e[t]]=!0},clearNamespaces:function(){Ext.app.namespaces={}},getNamespace:function(e){var t,i=Ext.apply({},Ext.ClassManager.paths,Ext.app.namespaces),n="";for(t in i)i.hasOwnProperty(t)&&t.length>n.length&&t+"."===e.substring(0,t.length+1)&&(n=t);return""===n?void 0:n},setupPaths:function(e,t,i){var n,r=Ext.manifest;if(e&&null!==t&&((r=r&&r.paths)&&void 0===t||Ext.Loader.setPath(e,void 0===t?"app":t)),i)for(n in i)i.hasOwnProperty(n)&&Ext.Loader.setPath(n,i[n])}}),Ext.getNamespace=Ext.app.getNamespace}),Ext.define("Ext.util.BasicFilter",{isFilter:!0,config:{id:null,disabled:!1,serializer:null},generation:0,constructor:function(e){this.initConfig(e)},updateDisabled:function(){this.isConfiguring||++this.generation}}),Ext.define("Ext.util.Filter",{extend:Ext.util.BasicFilter,config:{property:null,root:null,value:null,filterFn:null,anyMatch:!1,exactMatch:!1,caseSensitive:!1,disableOnEmpty:!1,operator:null,convert:null},scope:null,$configStrict:!1,statics:{createFilterFn:function(o){return o?function(e){var t,i,n=o.isCollection?o.items:o,r=n.length,s=!0;for(t=0;s&&t<r;t++)(i=n[t]).getDisabled()||(s=i.filter(e));return s}:Ext.returnTrue},isEqual:function(e,t){return e.getProperty()===t.getProperty()&&(e.getOperator()===t.getOperator()&&(e.getValue()===t.getValue()||!(!Ext.isArray(e)||!Ext.isArray(t))&&Ext.Array.equals(e,t)))},isInvalid:function(e){if(!e.filterFn){if(!e.property)return"A Filter requires either a property or a filterFn to be set";if(!e.hasOwnProperty("value")&&!e.operator)return"A Filter requires either a property and value, or a filterFn to be set"}return!1}},constructor:function(e){var t=Ext.util.Filter.isInvalid(e);t&&Ext.log.warn(t),this.callParent([e])},preventConvert:{in:1,notin:1},filter:function(e){var t=this,i=t._filterFn||t.getFilterFn(),n=t.getConvert(),r=t._value;return t._filterValue=r,t.isDateValue=Ext.isDate(r),t.isDateValue&&(t.dateValue=r.getTime()),n&&!t.preventConvert[t.getOperator()]&&(t._filterValue=n.call(t.scope||t,r)),i.call(t.scope||t,e)},getId:function(){var e=this._id;return e||(e=(e=this.getProperty())||Ext.id(null,"ext-filter-"),this._id=e),e},getFilterFn:function(){var e,t=this._filterFn;return t||(t=(e=this.getOperator())?this.operatorFns[e]:this.createRegexFilter(),this._filterFn=t,this.generatedFilterFn=!0),t},createRegexFilter:function(){var i=this,e=!!i.getAnyMatch(),t=!!i.getExactMatch(),n=i.getValue(),r=Ext.String.createRegex(n,!e,!e&&t,!i.getCaseSensitive());return function(e){var t=i.getPropertyValue(e);return r?r.test(t):null==t}},getPropertyValue:function(e){var t=this._root;return(null==t?e:e[t])[this._property]},getState:function(){var e,t=this.getInitialConfig(),i={};for(e in t)t.hasOwnProperty(e)&&(i[e]=t[e]);return delete i.root,i.value=this.getValue(),i},getScope:function(){return this.scope},serialize:function(){var e,t=this.getState(),i=this.getSerializer();return delete t.id,delete t.serializer,i&&(e=i.call(this,t))&&(t=e),t},serializeTo:function(e){var t,i;return this.getFilterFn(),this.generatedFilterFn&&(e.push(i=this.serialize()),t=this.primitiveRe.test(typeof i)),!t},updateOperator:function(){this.onConfigMutation()},updateConvert:function(){this.onConfigMutation()},updateProperty:function(){this.onConfigMutation()},updateAnyMatch:function(){this.onConfigMutation()},updateExactMatch:function(){this.onConfigMutation()},updateCaseSensitive:function(){this.onConfigMutation()},updateValue:function(e){this.onConfigMutation(),this.getDisableOnEmpty()&&this.setDisabled(Ext.isEmpty(e))},updateFilterFn:function(e){delete this.generatedFilterFn},onConfigMutation:function(){this.generation++,this.generatedFilterFn&&(this._filterFn=null)},updateDisableOnEmpty:function(e){e&&this.setDisabled(Ext.isEmpty(this.getValue()))},privates:{primitiveRe:/string|number|boolean/,getCandidateValue:function(e,t,i){var n=this._convert,r=this.getPropertyValue(e);return n?r=n.call(this.scope||this,r):i||(r=Ext.coerce(r,t)),r}}},function(e){var t=e.prototype.operatorFns={"<":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)<t},"<=":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)<=t},"=":function(e){var t=this._filterValue;return e=this.getCandidateValue(e,t),this.isDateValue&&e instanceof Date&&(e=e.getTime(),t=this.dateValue),e==t},"===":function(e){var t=this._filterValue;return e=this.getCandidateValue(e,t,!0),this.isDateValue&&e instanceof Date&&(e=e.getTime(),t=this.dateValue),e===t},">=":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)>=t},">":function(e){var t=this._filterValue;return this.getCandidateValue(e,t)>t},"!=":function(e){var t=this._filterValue;return e=this.getCandidateValue(e,t),this.isDateValue&&e instanceof Date&&(e=e.getTime(),t=this.dateValue),e!=t},"!==":function(e){var t=this._filterValue;return e=this.getCandidateValue(e,t,!0),this.isDateValue&&e instanceof Date&&(e=e.getTime(),t=this.dateValue),e!==t},in:function(e){var t=this._filterValue;return Ext.Array.contains(t,this.getCandidateValue(e,t))},notin:function(e){var t=this._filterValue;return!Ext.Array.contains(t,this.getCandidateValue(e,t))},like:function(e){var t=this._filterValue;return t&&-1<this.getCandidateValue(e,t).toLowerCase().indexOf(t.toLowerCase())},"/=":function(e){var t=this._filterValue;if(e=this.getCandidateValue(e,t),t!==this.lastRegExpSource){this.lastRegExpSource=t;try{this.regex=new RegExp(t,"i")}catch(e){this.regex=null}}return!!this.regex&&this.regex.test(e)}};t["=="]=t["="],t.gt=t[">"],t.ge=t[">="],t.lt=t["<"],t.le=t["<="],t.eq=t["="],t.ne=t["!="]}),Ext.define("Ext.util.AbstractMixedCollection",{mixins:{observable:Ext.util.Observable},isMixedCollection:!0,generation:0,indexGeneration:0,constructor:function(e,t){var i=this;1===arguments.length&&Ext.isObject(e)?(i.initialConfig=e,Ext.apply(i,e)):(i.allowFunctions=!0===e,t&&(i.getKey=t),i.initialConfig={allowFunctions:i.allowFunctions,getKey:i.getKey}),i.items=[],i.map={},i.keys=[],i.indexMap={},i.length=0,i.mixins.observable.constructor.call(i)},destroy:function(){this.items=this.map=this.keys=this.indexMap=null,this.callParent()},allowFunctions:!1,add:function(e,t){var i=this.length;return 1===arguments.length?this.insert(i,e):this.insert(i,e,t)},getKey:function(e){return e.id},replace:function(e,t){var i,n;return 1===arguments.length&&(t=e,e=this.getKey(t)),i=this.map[e],null==e||void 0===i?this.add(e,t):(this.generation++,n=this.indexOfKey(e),this.items[n]=t,this.map[e]=t,this.hasListeners.replace&&this.fireEvent("replace",e,i,t),t)},reorder:function(e){var t,i=this.items,n=0,r=i.length,s=[],o=[];for(t in this.suspendEvents(),e)s[e[t]]=i[t];for(n=0;n<r;n++)null==e[n]&&o.push(i[n]);for(n=0;n<r;n++)null==s[n]&&(s[n]=o.shift());this.clear(),this.addAll(s),this.resumeEvents()},updateKey:function(e,t){var i,n=this.map,r=this.indexOfKey(e),s=this.indexMap;-1<r&&(i=n[e],delete n[e],delete s[e],n[t]=i,s[t]=r,this.keys[r]=t,this.indexGeneration=++this.generation)},addAll:function(e){var t;if(1<arguments.length||Ext.isArray(e))this.insert(this.length,1<arguments.length?arguments:e);else for(t in e)e.hasOwnProperty(t)&&(!this.allowFunctions&&"function"==typeof e[t]||this.add(t,e[t]))},each:function(e,t){for(var i,n=Ext.Array.push([],this.items),r=0,s=n.length;r<s&&(i=n[r],!1!==e.call(t||i,i,r,s));r++);},eachKey:function(e,t){for(var i=this.keys,n=this.items,r=0,s=i.length;r<s;r++)e.call(t||window,i[r],n[r],r,s)},findBy:function(e,t){for(var i=this.keys,n=this.items,r=0,s=n.length;r<s;r++)if(e.call(t||window,n[r],i[r]))return n[r];return null},find:function(){return Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.util.MixedCollection: find has been deprecated. Use findBy instead."),this.findBy.apply(this,arguments)},insert:function(e,t,i){return Ext.isIterable(t)?this.doInsert(e,t,i):(2<arguments.length?this.doInsert(e,[t],[i]):this.doInsert(e,[t]))[0]},doInsert:function(e,t,i){var n,r,s,o,a,l,c,u=this,d=t.length,h=d,f=u.hasListeners.add,g={};if(null!=i)u.useLinearSearch=!0;else for(i=t,t=new Array(d),s=0;s<d;s++)t[s]=this.getKey(i[s]);for(u.suspendEvents(),s=0;s<d;s++)n=t[s],-1!==(r=u.indexOfKey(n))&&(r<e&&e--,u.removeAt(r)),null!=n&&(null!=g[n]&&(a=!0,h--),g[n]=s);if(u.resumeEvents(),a){for(n in l=t,c=i,t=new Array(h),i=new Array(h),s=0,g)t[s]=l[g[n]],i[s]=c[g[n]],s++;d=h}for(o=e===u.length&&u.indexGeneration===u.generation,Ext.Array.insert(u.items,e,i),Ext.Array.insert(u.keys,e,t),u.length+=d,u.generation++,o&&(u.indexGeneration=u.generation),s=0;s<d;s++,e++)null!=(n=t[s])&&(u.map[n]=i[s],o&&(u.indexMap[n]=e)),f&&u.fireEvent("add",e,i[s],n);return i},remove:function(e){var t,i;return-1!==(i=!this.useLinearSearch&&(t=this.getKey(e))?this.indexOfKey(t):Ext.Array.indexOf(this.items,e))&&this.removeAt(i)},removeAll:function(e){var t,i=this;if(e||i.hasListeners.remove)if(e)for(t=e.length-1;0<=t;--t)i.remove(e[t]);else for(;i.length;)i.removeAt(0);else i.length=i.items.length=i.keys.length=0,i.map={},i.indexMap={},i.generation++,i.indexGeneration=i.generation},removeAt:function(e){var t,i,n=this;return e<n.length&&0<=e&&(n.length--,t=n.items[e],Ext.Array.erase(n.items,e,1),void 0!==(i=n.keys[e])&&delete n.map[i],Ext.Array.erase(n.keys,e,1),n.hasListeners.remove&&n.fireEvent("remove",t,i),n.generation++,t)},removeRange:function(e,t){var i,n,r,s,o,a,l=this;if(e<l.length&&0<=e){for(t=t||1,t=(s=Math.min(e+t,l.length))-e,o=(a=s===l.length)&&l.indexGeneration===l.generation,r=e;r<s;r++)null!=(n=l.keys[r])&&(delete l.map[n],o&&delete l.indexMap[n]);return i=l.items[r-1],l.length-=t,l.generation++,o&&(l.indexGeneration=l.generation),a?l.items.length=l.keys.length=l.length:(l.items.splice(e,t),l.keys.splice(e,t)),i}return!1},removeAtKey:function(e){var t,i=this.keys;if(null!=e)return this.removeAt(this.indexOfKey(e));for(t=i.length-1;0<=t;t--)null==i[t]&&this.removeAt(t)},getCount:function(){return this.length},indexOf:function(e){var t;return null!=e?!this.useLinearSearch&&(t=this.getKey(e))?this.indexOfKey(t):Ext.Array.indexOf(this.items,e):-1},indexOfKey:function(e){return this.map.hasOwnProperty(e)?(this.indexGeneration!==this.generation&&this.rebuildIndexMap(),this.indexMap[e]):-1},rebuildIndexMap:function(){var e,t=this.indexMap={},i=this.keys,n=i.length;for(e=0;e<n;e++)t[i[e]]=e;this.indexGeneration=this.generation},get:function(e){var t=this.map[e],i=void 0!==t?t:"number"==typeof e?this.items[e]:void 0;return"function"!=typeof i||this.allowFunctions?i:null},getAt:function(e){return this.items[e]},getByKey:function(e){return this.map[e]},contains:function(e){var t;return null!=e&&(!this.useLinearSearch&&(t=this.getKey(e))?null!=this.map[t]:-1!==Ext.Array.indexOf(this.items,e))},containsKey:function(e){return this.map.hasOwnProperty(e)},clear:function(){var e=this;e.generation&&(e.length=0,e.items=[],e.keys=[],e.map={},e.indexMap={},e.generation++,e.indexGeneration=e.generation),e.hasListeners.clear&&e.fireEvent("clear")},first:function(){return this.items[0]},last:function(){return this.items[this.length-1]},sum:function(e,t,i,n){var r,s=this.extractValues(e,t),o=s.length,a=0;for(n=n||0===n?n:o-1,r=i=i||0;r<=n;r++)a+=s[r];return a},collect:function(e,t,i){var n,r,s,o=this.extractValues(e,t),a=o.length,l={},c=[];for(s=0;s<a;s++)n=o[s],r=String(n),!i&&Ext.isEmpty(n)||l[r]||(l[r]=!0,c.push(n));return c},extractValues:function(e,t){var i=this.items;return t&&(i=Ext.Array.pluck(i,t)),Ext.Array.pluck(i,e)},hasRange:function(e,t){return t<this.length},getRange:function(e,t){var i,n,r=this.items,s=[],o=r.length;return o<1||(t<e&&(n=!0,i=e,e=t,t=i),e<0&&(e=0),(null==t||o<=t)&&(t=o-1),s=r.slice(e,t+1),n&&s.length&&s.reverse()),s},filter:function(e,t,i,n){var r=[];return Ext.isString(e)?r.push(new Ext.util.Filter({property:e,value:t,anyMatch:i,caseSensitive:n})):(Ext.isArray(e)||e instanceof Ext.util.Filter)&&(r=r.concat(e)),this.filterBy(Ext.util.Filter.createFilterFn(r))},filterBy:function(e,t){var i,n=new this.self(this.initialConfig),r=this.keys,s=this.items,o=s.length;for(n.getKey=this.getKey,i=0;i<o;i++)e.call(t||this,s[i],r[i])&&n.add(r[i],s[i]);return n.useLinearSearch=this.useLinearSearch,n},findIndex:function(t,i,e,n,r){return Ext.isEmpty(i,!1)?-1:(i=this.createValueMatcher(i,n,r),this.findIndexBy(function(e){return e&&i.test(e[t])},null,e))},findIndexBy:function(e,t,i){for(var n=this.keys,r=this.items,s=i||0,o=r.length;s<o;s++)if(e.call(t||this,r[s],n[s]))return s;return-1},createValueMatcher:function(e,t,i,n){var r;return e.exec||(r=Ext.String.escapeRegex,e=String(e),!0===t?e=r(e):(e="^"+r(e),!0===n&&(e+="$")),e=new RegExp(e,i?"":"i")),e},clone:function(){var e=new this.self(this.initialConfig);return e.add(this.keys,this.items),e.useLinearSearch=this.useLinearSearch,e}}),Ext.define("Ext.util.Sorter",{isSorter:!0,config:{property:null,sorterFn:null,root:null,transform:null,direction:"ASC",id:void 0},statics:{createComparator:function(o,a){return a=a||0,function(e,t){var i,n,r=o.isCollection?o.items:o,s=r.length;for(n=0;n<s;++n)if(i=r[n].sort(e,t))return i;return a&&a(e,t)}}},multiplier:1,constructor:function(e){e&&!this.isGrouper&&!e.property==!e.sorterFn&&Ext.raise("A Sorter requires either a property or a sorterFn."),this.initConfig(e)},getId:function(){var e=this._id;return e||(e=(e=this.getProperty())||Ext.id(null,"ext-sorter-"),this._id=e),e},sort:function(e,t){return this.multiplier*this.sortFn(e,t)},sortFn:function(e,t){var i,n,r=this._transform,s=this._root,o=this._property;return s&&(e=e[s],t=t[s]),i=e[o],n=t[o],r&&(i=r(i),n=r(n)),n<i?1:i<n?-1:0},applyDirection:function(e){return e||"ASC"},updateDirection:function(e){this.multiplier="DESC"===e.toUpperCase()?-1:1},updateProperty:function(e){e&&delete this.sortFn},updateSorterFn:function(e){this.sortFn=e},toggle:function(){this.setDirection(Ext.String.toggle(this.getDirection(),"ASC","DESC"))},getState:function(){var e={root:this.getRoot(),property:this.getProperty(),direction:this.getDirection()};return this._id&&(e.id=this._id),e},serialize:function(){return{property:this.getProperty(),direction:this.getDirection()}}}),Ext.define("Ext.util.Sortable",{isSortable:!0,$configPrefixed:!1,$configStrict:!1,config:{sorters:null},defaultSortDirection:"ASC",multiSortLimit:3,statics:{createComparator:function(s){return s&&s.length?function(e,t){for(var i=s[0].sort(e,t),n=s.length,r=1;!i&&r<n;r++)i=s[r].sort.call(s[r],e,t);return i}:function(){return 0}}},applySorters:function(e){var t;return t=this.getSorters()||new Ext.util.MixedCollection(!1,Ext.returnId),e&&t.addAll(this.decodeSorters(e)),t},sort:function(e,t,i,n){var r,s,o=this,a=o.getSorters();if(a||(o.setSorters(null),a=o.getSorters()),Ext.isArray(e)?(n=i,i=t):Ext.isObject(e)?(e=[e],n=i,i=t):Ext.isString(e)&&((r=a.get(e))?null==t?r.toggle():r.setDirection(t):r={property:e,direction:t},e=[r]),e&&e.length)switch(e=o.decodeSorters(e),i){case"multi":a.insert(0,e[0]),0<(s=a.getCount()-o.multiSortLimit)&&a.removeRange(o.multiSortLimit,s);break;case"prepend":a.insert(0,e);break;case"append":a.addAll(e);break;case void 0:case null:case"replace":a.clear(),a.addAll(e);break;default:Ext.raise('Sorter insertion point must be "multi", "prepend", "append" or "replace"')}return!1!==n&&(o.fireEvent("beforesort",o,e),o.onBeforeSort(e),o.getSorterCount()&&o.doSort(o.generateComparator())),e},getSorterCount:function(){return this.getSorters().items.length},generateComparator:function(){var e=this.getSorters().getRange();return e.length?this.createComparator(e):this.emptyComparator},emptyComparator:function(){return 0},onBeforeSort:Ext.emptyFn,decodeSorters:function(e){Ext.isArray(e)||(e=void 0===e?[]:[e]);var t,i,n,r=e.length,s=Ext.util.Sorter,o=this.getModel?this.getModel():this.model;for(n=0;n<r;n++)(i=e[n])instanceof s||(Ext.isString(i)&&(i={property:i}),Ext.applyIf(i,{root:this.sortRoot,direction:"ASC"}),i.fn&&(i.sorterFn=i.fn),"function"==typeof i&&(i={sorterFn:i}),o&&!i.transform&&(t=o.getField(i.property),i.transform=t&&t.sortType!==Ext.identityFn?t.sortType:void 0),e[n]=new Ext.util.Sorter(i));return e},getFirstSorter:function(){for(var e,t=this.getSorters().items,i=t.length,n=0;n<i;++n)if(!(e=t[n]).isGrouper)return e;return null}},function(){this.prototype.createComparator=this.createComparator}),Ext.define("Ext.util.MixedCollection",{extend:Ext.util.AbstractMixedCollection,mixins:{sortable:Ext.util.Sortable},constructor:function(){this.initConfig(),this.callParent(arguments)},doSort:function(e){this.sortBy(e)},_sort:function(i,e,n){var t,r,s,o="DESC"===String(e).toUpperCase()?-1:1,a=[],l=this.keys,c=this.items;for(n=n||function(e,t){return e-t},t=0,r=c.length;t<r;t++)a[a.length]={key:l[t],value:c[t],index:t};for(Ext.Array.sort(a,function(e,t){return n(e[i],t[i])*o||(e.index<t.index?-1:1)}),t=0,r=a.length;t<r;t++)s=a[t],c[t]=s.value,l[t]=s.key,this.indexMap[s.key]=t;this.generation++,this.indexGeneration=this.generation,this.fireEvent("sort",this)},sortBy:function(i){var e,t,n,r=this.items,s=this.keys,o=r.length;for(n=0;n<o;n++)r[n].$extCollectionIndex=n;for(Ext.Array.sort(r,function(e,t){return i(e,t)||(e.$extCollectionIndex<t.$extCollectionIndex?-1:1)}),n=0;n<o;n++)e=r[n],t=this.getKey(e),s[n]=t,this.indexMap[t]=n,delete e.$extCollectionIndex;this.generation++,this.indexGeneration=this.generation,this.fireEvent("sort",this,r,s)},findInsertionIndex:function(e,t){var i,n,r=this.items,s=0,o=r.length-1;for(t=t||this.generateComparator();s<=o;)0<=(n=t(e,r[i=s+o>>1]))?s=1+i:n<0&&(o=i-1);return s},reorder:function(e){this.callParent([e]),this.fireEvent("sort",this)},sortByKey:function(e,t){this._sort("key",e,t||function(e,t){var i=String(e).toUpperCase(),n=String(t).toUpperCase();return n<i?1:i<n?-1:0})}}),Ext.define("Ext.util.CollectionKey",{mixins:[Ext.mixin.Identifiable],isCollectionKey:!0,observerPriority:-200,config:{collection:null,keyFn:null,property:null,rootProperty:null,unique:!0},generation:0,map:null,mapRebuilds:0,constructor:function(e){this.initConfig(e),Ext.isFunction(this.getKey)||Ext.raise("CollectionKey requires a keyFn or property config")},get:function(e){return(this.map||this.getMap())[e]||null},clear:function(){this.map=null},getRootProperty:function(){var e=this.callParent();return null!==e?e:this.getCollection().getRootProperty()},indexOf:function(e,t){var i,n,r,s,o=(this.map||this.getMap())[e],a=this.getCollection(),l=a.length;if(!o)return-1;if(void 0===t&&(t=-1),o instanceof Array){for(n=l,s=(r=o).length;0<s--;)(i=a.indexOf(r[s]))<n&&t<i&&(n=i);if(n===l)return-1}else n=a.indexOf(o);return t<n?n:-1},updateKey:function(e,t){var i,n,r=this.map;r&&((i=r[t])instanceof Array?0<=(n=Ext.Array.indexOf(i,e))&&(2<i.length?i.splice(n,1):r[t]=i[1-n]):i&&(this.getUnique()&&i!==e&&Ext.raise('Incorrect oldKey "'+t+'" for item with newKey "'+this.getKey(e)+'"'),delete r[t]),this.add([e]))},onCollectionAdd:function(e,t){this.map&&this.add(t.items)},onCollectionItemChange:function(e,t){this.map=null},onCollectionRefresh:function(){this.map=null},onCollectionRemove:function(e,t){var i,n=this.map,r=t.items,s=r.length;if(n)if(this.getUnique()&&s<e.length/2)for(i=0;i<s;++i)delete n[this.getKey(r[i])];else this.map=null},add:function(e){var t,i,n,r,s,o,a=this.map;for(s=e.length,o=this.getUnique(),i=0;i<s;++i)r=this.getKey(n=e[i]),!o&&r in a?((t=a[r])instanceof Array||(a[r]=t=[t]),t.push(n)):a[r]=n},applyKeyFn:function(t){Ext.isString(t)?this.getKey=function(e){return e[t]()}:this.getKey=t},updateProperty:function(t){var i=this.getRootProperty();this.getKey=function(e){return(i?e[i]:e)[t]}},getMap:function(){var e=this.map;return e||(this.map=e={},this.keysByItemKey={},++this.mapRebuilds,this.add(this.getCollection().items)),e},updateCollection:function(e,t){e&&e.addObserver(this),t&&t.removeObserver(this)},clone:function(){return new Ext.util.CollectionKey(this.getCurrentConfig())},destroy:function(){this.clear(),this.getCollection().removeObserver(this),this.destroyed=!0}}),Ext.define("Ext.util.Grouper",{extend:Ext.util.Sorter,isGrouper:!0,config:{groupFn:null,sortProperty:null},constructor:function(e){e&&e.getGroupString&&Ext.raise("Cannot set getGroupString - use groupFn instead"),this.callParent(arguments)},getGroupString:function(e){return e.$collapsedGroupPlaceholder?e.$groupKey:this.getGroupValue(e).toString()},getGroupValue:function(e){var t=e.$collapsedGroupPlaceholder?e.$groupValue:this._groupFn(e);return null!=t?t:""},sortFn:function(e,t){var i=this.getGroupValue(e),n=this.getGroupValue(t),r=this._sortProperty,s=this._root,o=this._sorterFn,a=this._transform;if(i===n||Ext.Date.isEqual(i,n))return 0;if(r||o){if(o)return o.call(this,e,t);s&&(e=e[s],t=t[s]),i=e[r],n=t[r],a&&(i=a(i),n=a(n))}return n<i?1:i<n?-1:0},standardGroupFn:function(e){var t=this._root;return(t?e[t]:e)[this._property]},updateSorterFn:function(){},updateProperty:function(){this.getGroupFn()||this.setGroupFn(this.standardGroupFn)}}),Ext.define("Ext.util.Collection",{mixins:[Ext.mixin.Observable],isCollection:!0,config:{autoFilter:!0,autoSort:!0,autoGroup:!0,decoder:null,extraKeys:null,filters:null,grouper:null,groups:null,groupConfig:null,rootProperty:null,sorters:null,multiSortLimit:3,defaultSortDirection:"ASC",source:null,trackGroups:!0},generation:0,indices:null,indexRebuilds:0,updating:0,grouped:!1,sorted:!1,filtered:!1,$endUpdatePriority:1001,manageSorters:!0,constructor:function(e){this.callParent([e]),this.items=[],this.map={},this.length=0,e&&e.keyFn&&(this.getKey=e.keyFn),this.mixins.observable.constructor.call(this,e)},destroy:function(){var e=this,t=e._filters,i=e._sorters,n=e._groups;t&&(t.destroy(),e._filters=null),i&&(e.grouped=e.sorted=!1,e.setSorters(null),e.manageSorters&&i.destroy()),n&&(n.destroy(),e._groups=null),e.setSource(null),e.observers=e.items=e.map=null,e.callParent()},add:function(e){var t=this.decodeItems(arguments,0),i=t;return t.length&&(this.splice(this.length,0,t),i=1===t.length?t[0]:t),i},replaceAll:function(){var e,t;return(e=t=this.decodeItems(arguments,0)).length?(this.splice(0,this.length,t),e=1===t.length?t[0]:t):this.removeAll(),e},aggregate:function(e,t,i,n,r){var s=Ext.Array.slice(arguments);return s.unshift(this.items),this.aggregateItems.apply(this,s)},aggregateByGroup:function(e,t,i){var n=this.getGroups();return this.aggregateGroups(n,e,t,i)},aggregateItems:function(e,t,i,n,r,s){var o,a,l,c,u,d,h=Ext.Number.clipIndices(e.length,[n,r]),f=0!==n&&r!==e.length;if(n=h[0],r=h[1],!Ext.isFunction(i))return(i=this._aggregators[i]).call(this,e,n,r,t,this.getRootProperty());for(l=this.getRootProperty(),u=new Array(void 0),d=f?new Array(void 0):e,o=n,a=0;o<r;++o,a++)f&&(d[a]=c=e[o]),u[a]=(l?c[l]:c)[t];return i.call(s||this,e,u,0)},aggregateGroups:function(e,t,i,n){var r,s,o,a=e.items,l=a.length,c=!Ext.isFunction(i),u={};for(r=0;r<l;++r)s=a[r],o=c?s[i](t):this.aggregateItems(s.items,t,i,null,null,n),u[s.getGroupKey()]=o;return u},beginUpdate:function(){this.updating++||this.notify("beginupdate")},clear:function(){var e,t,i=this.generation,n=i?this.items:[];if(i&&(this.items.length=this.length=0,this.map={},this.indices={},this.generation++,e=this.getExtraKeys()))for(t in e)e[t].clear();return n},clone:function(){var e=new this.self(this.initialConfig);return e.add(this.items),e},collect:function(e,t,i){var n,r,s,o=this.items,a=o.length,l={},c=[];for(n=0;n<a;++n)s=o[n],s=(t?s[t]:s)[e],r=String(s),!i&&Ext.isEmpty(s)||l[r]||(l[r]=1,c.push(s));return c},contains:function(e){var t,i=!1;return null!=e&&(t=this.getKey(e),i=this.map[t]===e),i},containsAll:function(e){var t,i=Ext.isArray(e)?e:arguments;for(t=i.length;0<t--;)if(!this.contains(i[t]))return!1;return!0},containsKey:function(e){return e in this.map},createFiltered:function(e,t,i,n,r){var s,o,a,l,c,u=new this.self(Ext.applyIf({source:null},this.initialConfig)),d=this.getRootProperty(),h=this.items;if(Ext.isFunction(e))l=e,c=t;else{if(Ext.isString(e))a=[new Ext.util.Filter({property:e,value:t,root:d,anyMatch:i,caseSensitive:n,exactMatch:r})];else if(e instanceof Ext.util.Filter)a=[e],e.setRoot(d);else if(Ext.isArray(e))for(o=0,s=(a=e.slice(0)).length;o<s;++o)a[o].setRoot(d);l=Ext.util.Filter.createFilterFn(a)}for(c=c||this,o=0,s=h.length;o<s;o++)l.call(c,h[o])&&u.add(h[o]);return u},filterBy:function(e,t){return this.createFiltered(e,t)},each:function(e,t){var i,n,r=this.items,s=r.length;if(s)for(t=t||this,r=r.slice(0),i=0;i<s&&!1!==(n=e.call(t,r[i],i,s));i++);return n},eachKey:function(e,t){var i,n,r,s,o=this.items,a=o.length;if(a)for(t=t||this,o=o.slice(0),i=0;i<a&&(r=this.getKey(n=o[i]),!1!==(s=e.call(t,r,n,i,a)));i++);return s},endUpdate:function(){--this.updating||this.notify("endupdate")},find:function(t,e,i,n,r,s){var o,a;return Ext.isEmpty(e,!1)?null:(o=Ext.String.createRegex(e,n,r,s),a=this.getRootProperty(),this.findBy(function(e){return e&&o.test((a?e[a]:e)[t])},null,i))},findBy:function(e,t,i){var n,r,s,o=this.items,a=o.length;for(t=t||this,n=i||0;n<a;n++)if(s=this.getKey(r=o[n]),e.call(t,r,s))return o[n];return null},findIndex:function(e,t,i,n,r,s){var o=this.find(e,t,i,n,r,s);return o?this.indexOf(o):-1},findIndexBy:function(e,t,i){var n=this.findBy(e,t,i);return n?this.indexOf(n):-1},first:function(e){var t=e?this.getGroups():void 0;return t?this.aggregateGroups(t,null,"first"):this.items[0]},last:function(e){var t=e?this.getGroups():void 0;return t?this.aggregateGroups(t,null,"last"):this.items[this.length-1]},get:function(e){return this.map[e]},getAt:function(e){return this.items[e]},getByKey:function(e){return this.map[e]},getCount:function(){return this.length},getKey:function(e){var t=e.id;return 0===t||t||0===(t=e._id)||t?t:e.getId()},getRange:function(e,t){var i,n=this.items,r=n.length;return t<e&&Ext.raise("Inverted range passed to Collection.getRange: ["+e+","+t+"]"),i=r?(i=Ext.Number.clipIndices(r,[e,t]),n.slice(i[0],i[1])):[]},getValues:function(e,t,i,n){var r,s,o=this.items,a=Ext.Number.clipIndices(o.length,[i,n]),l=[];for(r=a[0],n=a[1];r<n;++r)s=o[r],s=(t?s[t]:s)[e],l.push(s);return l},indexOf:function(e){var t;return e?(t=this.getKey(e),this.indexOfKey(t)):-1},indexOfKey:function(e){var t=this.indices;return e in this.map?(t=t||this.getIndices())[e]:-1},insert:function(e,t){var i=this.decodeItems(arguments,1),n=i;return i.length&&(this.splice(e,0,i),n=1===i.length?i[0]:i),n},itemChanged:function(e,t,i,n){var r,s,o,a,l,c,u=this,d=void 0!==i,h=u.filtered&&u.getAutoFilter(),f=!1,g=0,p=u.items,m=u.length-1,x=u.sorted&&0<m&&u.getAutoSort(),y=u.getSource(),v=0,E=!1,b=!1;y&&!y.updating?(u.sourceUpdating=!0,y.itemChanged(e,t,i,n),u.sourceUpdating=!1):(s=u.getKey(e),h&&(f=(b=(l=u.indexOfKey(d?i:s))<0)!==(E=u.isItemFiltered(e))),f?c=E?(v=[e],-1):(a=[e],u.length):x&&!E&&(h||(l=u.indexOfKey(d?i:s)),o=u.getSortFn(),-1!==l&&(l&&0<o(p[l-1],p[l])?(g=-1,c=Ext.Array.binarySearch(p,e,0,l,o)):l<m&&0<o(p[l],p[l+1])&&(g=1,c=Ext.Array.binarySearch(p,e,l+1,o)),g&&(a=[e]))),r={item:e,key:s,index:c,filterChanged:f,keyChanged:d,indexChanged:!!g,filtered:E,oldIndex:l,newIndex:c,wasFiltered:b,meta:n},d&&(r.oldKey=i),t&&(r.modified=t),++u.generation,u.beginUpdate(),u.notify("beforeitemchange",[r]),d&&u.updateKey(e,i,r),(a||v)&&u.splice(c,v,a),0<g?r.newIndex--:g<0&&r.oldIndex++,u.notify(E?"filtereditemchange":"itemchange",[r]),u.endUpdate())},remove:function(e){var t=this.decodeRemoveItems(arguments,0),i=this.length;return this.splice(0,t),i-this.length},removeAll:function(){var e=this.length;return this.generation&&e&&this.splice(0,e),this},removeAt:function(e,t){var i,n=this.length,r=Ext.Number,s=r.clipIndices(n,[e,void 0===t?1:t],r.Clip.COUNT),o=s[0],a=s[1]-o,l=1==a&&this.getAt(o);return this.splice(o,a),i=this.length-n,l&&i?l:i},removeByKey:function(e){var t=this.getByKey(e);return!(!t||!this.remove(t))&&t},replace:function(e){var t=this.indexOf(e);-1===t?this.add(e):this.insert(t,e)},splice:function(e,t,i){var n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y=this,v=y.sorted&&y.getAutoSort(),E=y.map,b=y.items,C=y.length,S=t instanceof Array?y.decodeRemoveItems(t):null,w=!S,T=Ext.Number,P=T.clipIndices(C,[e,w?t:0],T.Clip.COUNT),I=P[0],A=P[1],k=A-I,D=y.decodeItems(arguments,2),R=D?D.length:0,M=I,F=y.indices||(R||S?y.getIndices():null),L=null,O=k?[I]:null,B=null,N=y.getSource();if(N&&!N.updating){if(w)for(S=[],c=0;c<k;++c)S.push(b[I+c]);return c=I<C?N.indexOf(b[I]):N.length,y.requestedIndex=e,N.splice(c,S,D),delete y.requestedIndex,y}if(R){for(n=D,B=[],r={},v&&(x=y.getSorters(),1<R&&(n.$cloned||(D=n=n.slice(0)),y.sortData(n))),c=0;c<R;++c)void 0!==(h=r[f=y.getKey(u=D[c])])?(m=m||{})[h]=1:((d=F[f])<I||A<=d)&&(O=O||[]).push(d),r[f]=c,B.push(f);if(m){for(g=B,B=[],(n=[]).$cloned=!0,c=0;c<R;++c)m[c]||(u=D[c],n.push(u),B.push(g[c]));R=n.length}L={items:n,keys:B}}for(c=S?S.length:0;0<c--;)void 0!==(d=F[f=y.getKey(S[c])])&&(O=O||[]).push(d);if(!L&&!O)return y;if(y.beginUpdate(),O){for(o=null,l=[],s={},1<O.length&&O.sort(Ext.Array.numericSortFn),c=0,p=O.length;c<p;++c)(f=y.getKey(u=b[d=O[c]]))in E&&(delete E[f],(!o||d>o.at+a.length)&&(l.push(o={at:d,items:a=[],keys:g=[],map:s,next:o,replacement:L}),L&&(L.replaced=o)),a.push(s[f]=u),g.push(f),d<M&&--M,1<k&&d===I&&(--k,O[c--]=++I));for(L&&(L.at=M),h=l.length;0<h--;){if((c=(o=l[h]).at)+(p=o.items.length)<C&&(y.indices=F=null),y.length=C-=p,b.splice(c,p),F)for(g=o.keys,c=0;c<p;++c)delete F[g[c]];++y.generation,y.notify("remove",[o])}}if(L)if(v&&1<R&&C)y.spliceMerge(n,B);else{if(v&&(1<R?(M=0,y.indices=F=null):M=x.findInsertionIndex(L.items[0],b,y.getSortFn(),e)),M===C){for(A=M,c=n.length-1;0<=c;--c)b[A+c]=n[c];if(F=y.indices)for(c=0;c<R;++c)F[B[c]]=M+c}else y.indices=null,Ext.Array.insert(b,M,n);for(c=0;c<R;++c)E[B[c]]=n[c];y.length+=R,L.at=M,L.atItem=0===M?null:b[M-1],++y.generation,y.notify("add",[L])}return y.endUpdate(),y},update:function(e,t){this.beginUpdate();try{return e.call(t||this,this)}catch(e){throw Ext.log.error(this.$className+": Unhandled Exception: ",e.description||e.message),e}finally{this.endUpdate()}},updateKey:function(e,t,i){var n,r=this.map,s=this.indices,o=this.getSource();o&&!o.updating?o.updateKey(e,t):(n=this.getKey(e))!==t&&(r[t]!==e||n in r?(n in r&&r[n]!==e&&Ext.raise('Duplicate newKey "'+n+'" for item with oldKey "'+t+'"'),t in r&&r[t]!==e&&Ext.raise('Incorrect oldKey "'+t+'" for item with newKey "'+n+'"')):(delete r[t],this.updating++,this.generation++,r[n]=e,s&&(s[n]=s[t],delete s[t]),this.notify("updatekey",[Ext.apply({item:e,newKey:n,oldKey:t},i)]),this.updating--))},findInsertIndex:function(e,t){for(var i,n,r=this.getSource(),s=r.items,o=r.indexOf(e)-1;-1<o;){if(i=s[o],-1<(n=this.indexOf(i)))return n+1;--o}return t},onCollectionAdd:function(e,t){var i,n,r,s,o,a,l=this,c=t.atItem,u=l.transformItems(t.items),d=l.requestedIndex;if(void 0!==d?n=d:-1<(n=(o=c||e.items[1])?l.indexOf(o):-1)?c&&++n:l.sorted||(n=l.findInsertIndex(u[0],t.at?l.length:0)),l.getAutoFilter()&&l.filtered)for(s=0,a=u.length;s<a;++s)o=u[s],l.isItemFiltered(o)?(r=r||u.slice(0,s),(i=i||[]).push(o)):r&&r.push(o);l.splice(n<0?l.length:n,0,r||u),i&&l.notify("filteradd",[i])},onCollectionBeforeItemChange:function(e,t){this.onCollectionUpdateKey=null,this.sourceUpdating||this.notify("beforeitemchange",[t])},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(e,t){delete this.onCollectionUpdateKey,this.itemChanged(t.item,t.modified,t.oldKey,t.meta)},onCollectionFilteredItemChange:function(){delete this.onCollectionUpdateKey},onCollectionRefresh:function(e){var t,i,n,r,s,o=this,a={},l={},c=o.items,u=o.transformItems(e.items),d=o.getFilterFn();if(o.filtered&&o.getAutoFilter()){for(s=t=0,r=u.length;t<r;t++)d(u[t])&&(c[s++]=u[t]);c.length=s}else c.length=0,c.push.apply(c,u);for(o.sorted&&o.sortData(c),o.length=r=c.length,o.map=a,o.indices=l,t=0;t<r;++t)a[n=o.getKey(i=c[t])]=i,l[n]=t;++o.generation,o.notify("refresh")},onCollectionRemove:function(e,t){this.splice(0,t.items)},onCollectionUpdateKey:function(e,t){this.updateKey(t.item,t.oldKey,t)},_aggregators:{average:function(e,t,i,n,r){var s=i-t;return s&&this._aggregators.sum.call(this,e,t,i,n,r)/s},bounds:function(e,t,i,n,r){var s,o,a,l;for(l=t;l<i;++l)s=e[l],(s=(r?s[r]:s)[n])<o||(o=s),a<s||(a=s);return[a,o]},count:function(e){return e.length},extremes:function(e,t,i,n,r){var s,o,a,l,c,u=null,d=null;for(s=t;s<i;++s)o=e[s],(c=(r?o[r]:o)[n])<a||(a=c,u=o),l<c||(l=c,d=o);return[d,u]},max:function(e,t,i,n,r){return this._aggregators.bounds.call(this,e,t,i,n,r)[1]},maxItem:function(e,t,i,n,r){return this._aggregators.extremes.call(this,e,t,i,n,r)[1]},min:function(e,t,i,n,r){return this._aggregators.bounds.call(this,e,t,i,n,r)[0]},minItem:function(e,t,i,n,r){return this._aggregators.extremes.call(this,e,t,i,n,r)[0]},sum:function(e,t,i,n,r){var s,o,a;for(o=0,a=t;a<i;++a)s=e[a],o+=s=(r?s[r]:s)[n];return o}},_eventToMethodMap:{add:"onCollectionAdd",beforeitemchange:"onCollectionBeforeItemChange",beginupdate:"onCollectionBeginUpdate",endupdate:"onCollectionEndUpdate",itemchange:"onCollectionItemChange",filtereditemchange:"onCollectionFilteredItemChange",refresh:"onCollectionRefresh",remove:"onCollectionRemove",beforesort:"beforeCollectionSort",sort:"onCollectionSort",filter:"onCollectionFilter",filteradd:"onCollectionFilterAdd",updatekey:"onCollectionUpdateKey"},addObserver:function(e){var t=this.observers;t||(this.observers=t=[]),Ext.Array.contains(t,e)&&Ext.Error.raise("Observer already added"),this.notifying&&(this.observers=t=t.slice(0)),t.push(e),1<t.length&&Ext.Array.sort(t,this.prioritySortFn)},prioritySortFn:function(e,t){return(e.observerPriority||0)-(t.observerPriority||0)},applyExtraKeys:function(e,t){var i,n,r,s=t||{};for(n in e)(r=e[n]).isCollectionKey?r.setCollection(this):(i={collection:this},Ext.isString(r)?i.property=r:i=Ext.apply(i,r),r=new Ext.util.CollectionKey(i)),s[n]=this[n]=r,r.name=n;return s},applyGrouper:function(e){return e=e&&this.getSorters().decodeSorter(e,Ext.util.Grouper)},decodeItems:function(e,t){var i,n,r,s=void 0===t?e:e[t];if(!s||!s.$cloned){if((i=e.length>t+1||!Ext.isIterable(s))&&1===(s=Ext.Array.slice(e,t)).length&&void 0===s[0]&&(s.length=0),n=this.getDecoder())for(i||(s=s.slice(0),i=!0),r=s.length;0<r--;)!1===(s[r]=n.call(this,s[r]))&&s.splice(r,1);i&&(s.$cloned=!0)}return s},getIndices:function(){var e,t=this.indices,i=this.items,n=i.length;if(!t)for(this.indices=t={},++this.indexRebuilds,e=0;e<n;++e)t[this.getKey(i[e])]=e;return t},notify:function(e,t){var i,n,r,s,o=this.observers,a=this._eventToMethodMap[e],l=0;if(t=t||[],o&&a){for(this.notifying=!0,i=0,n=o.length;i<n;++i)(r=(s=o[i])[a])&&(l++||t.unshift(this),r.apply(s,t));this.notifying=!1}this.hasListeners&&this.hasListeners[e]&&(l||t.unshift(this),this.fireEventArgs(e,t))},getFilterFn:function(){return this.getFilters().getFilterFn()},getFilters:function(e){var t=this._filters;return t||!1===e||(t=new Ext.util.FilterCollection({id:this.getId()+"-filters"+(this.generation||"")}),this.setFilters(t)),t},isItemFiltered:function(e){return!this.getFilters().filterFn(e)},onFilterChange:function(e){var t,i,n,r=this,s=r.getSource();if(s){if(s.destroyed)return;(s.length||r.length)&&r.onCollectionRefresh(s)}else{if(t=r.getExtraKeys())for(n in i={},t)i[n]=t[n].clone(r);s=new Ext.util.Collection({keyFn:r.getKey,extraKeys:i,rootProperty:r.getRootProperty()}),r.length&&s.add(r.items),r.setSource(s),r.autoSource=s}r.notify("filter")},applyFilters:function(e,t){return!e||e.isFilterCollection?e:(e&&(t=t||this.getFilters()).splice(0,t.length,e),t)},updateFilters:function(e,t){t&&t.un("endupdate","onEndUpdateFilters",this),e&&(e.on({endupdate:"onEndUpdateFilters",scope:this,priority:this.$endUpdatePriority}),e.$filterable=this),this.onEndUpdateFilters(e)},onEndUpdateFilters:function(e){var t=this.filtered,i=!!e&&0<e.getFilterCount();(t||i)&&(this.filtered=i,this.onFilterChange(e))},getSortFn:function(){return this._sortFn||this.createSortFn()},getSorters:function(e){var t=this._sorters;return t||!1===e||(t=new Ext.util.SorterCollection({id:this.getId()+"-sorters"+(this.generation||"")}),this.setSorters(t)),t},onSortChange:function(){this.sorted&&this.sortItems()},sort:function(e,t,i){var n=this.getSorters();return n.addSort.apply(n,arguments),this},sortData:function(e){return Ext.Array.sort(e,this.getSortFn()),e},sortItems:function(e){this.sorted&&(e&&Ext.raise("Collections with sorters cannot resorted"),e=this.getSortFn()),this.indices=null,this.notify("beforesort",[this.getSorters(!1)]),this.length&&Ext.Array.sort(this.items,e),this.notify("sort")},sortBy:function(e){return this.sortItems(e)},findInsertionIndex:function(e,t,i,n){return Ext.Array.findInsertionIndex(e,t||this.items,i||this.getSortFn(),n)},applySorters:function(e,t){return!e||e.isSorterCollection?e:(e&&(t=t||this.getSorters()).splice(0,t.length,e),t)},createSortFn:function(){var n=this.getGrouper(),e=this.getSorters(!1),r=e?e.getSortFn():null;return n?function(e,t){var i=n.sort(e,t);return!i&&r&&(i=r(e,t)),i}:r},updateGrouper:function(e){var t,i=this,n=i.getGroups(),r=i.getSorters();i.onSorterChange(),i.grouped=!!e,e?i.getTrackGroups()&&(n||((n=new Ext.util.GroupCollection({id:i.getId()+"-groups"+(i.generation||""),itemRoot:i.getRootProperty(),groupConfig:i.getGroupConfig()})).$groupable=i).setGroups(n),n.setGrouper(e),t=!0):(n&&(i.removeObserver(n),n.destroy()),i.setGroups(null)),r.updating||i.onEndUpdateSorters(r),t&&n.onCollectionRefresh(i)},updateSorters:function(e,t){t&&!t.destroyed&&t.un("endupdate","onEndUpdateSorters",this),e&&(e.on({endupdate:"onEndUpdateSorters",scope:this,priority:this.$endUpdatePriority}),this.manageSorters&&(e.$sortable=this)),this.onSorterChange(),this.onEndUpdateSorters(e)},onSorterChange:function(){this._sortFn=null},onEndUpdateSorters:function(e){var t=this.sorted,i=this.grouped&&this.getAutoGroup()||e&&0<e.length;(t||i)&&(this.sorted=!!i,this.onSortChange(e))},removeObserver:function(e){var t=this.observers;t&&Ext.Array.remove(t,e)},spliceMerge:function(e,t){var i,n,r,s,o,a,l=this.map,c=e.length,u=0,d=this.items,h=d.length,f=[],g=0,p=[],m=this.getSortFn();for(this.items=p,a=0;a<c;a=n){for(s=e[a];u<h&&!(m(s,o=d[u])<0);++u)p.push(o);if(u===h){for(f[g++]={at:p.length,itemAt:p[p.length-1],items:i=[]},1<g&&(f[g-2].next=f[g-1]);a<c;++a)i.push(s=e[a]),p.push(s);break}for(f[g++]={at:p.length,itemAt:p[p.length-1],items:i=[s]},1<g&&(f[g-2].next=f[g-1]),p.push(s),n=a+1;n<c&&!(0<=m(s=e[n],o));++n)p.push(s),i.push(s)}for(;u<h;++u)p.push(d[u]);for(r=0;r<c;++r)l[t[r]]=e[r];for(this.length=p.length,++this.generation,this.indices=null,r=0;r<g;++r)this.notify("add",[f[r]])},transformItems:Ext.identityFn,getGroups:function(){return this.callParent()||null},updateAutoGroup:function(e){var t=this.getGroups();t&&t.setAutoGroup(e),this.onEndUpdateSorters(this._sorters)},updateGroups:function(e,t){t&&this.removeObserver(t),e&&this.addObserver(e)},updateSource:function(e,t){var i=this.autoSource;t&&(t.destroyed||t.removeObserver(this),t===i&&(i.destroy(),this.autoSource=null)),e&&(e.addObserver(this),(e.length||this.length)&&this.onCollectionRefresh(e))}},function(){var e=this.prototype;e.removeAtKey=e.removeByKey,e.decodeRemoveItems=e.decodeItems,Ext.Object.each(e._aggregators,function(n){e[n]=function(e,t,i){return this.aggregate(e,n,t,i)},e[n+"ByGroup"]=function(e){return this.aggregateByGroup(e,n)}})}),Ext.define("Ext.data.Range",{isDataRange:!0,begin:0,buffer:0,end:0,length:0,store:null,waitTimeout:1e4,activeWait:null,constructor:function(e){var t,i;Ext.apply(this,e),(t=(i=this.store).activeRanges)||(i.activeRanges=t=[]),t.push(this),this.refresh(),"begin"in e&&(this.begin=this.end=0,this.goto(e.begin,e.end).catch(function(){}))},destroy:function(){var e=this.store,t=e&&e.activeRanges;Ext.destroy(this.storeListeners),t&&Ext.Array.remove(t,this),this.cancelActiveWait(),this.callParent()},goto:function(e,t){var i,n=this,r=n.buffer,s=n.task;return n.begin=e,n.end=t,n.length=t-e,n.cancelActiveWait(),n.activeWait=n.setupWait(e,t),i=n.activeWait.promise,n.resolveWaitIfSatisfied(),0<r?(s||(n.task=s=new Ext.util.DelayedTask(n.doGoto,n)),s.delay(r)):n.doGoto(),i},privates:{lastBegin:0,lastEnd:0,cancelActiveWait:function(){this.resolveWait(null)},doGoto:Ext.privateFn,refresh:function(){this.records=this.store.getData().items},resolveWait:function(e){var t=this.activeWait;return t&&(t.deferred.resolve(e),this.activeWait=null),e},resolveWaitIfSatisfied:function(){this.resolveWait(this)},setupWait:function(e,t){var i=this,n=i.waitTimeout,r=new Ext.Deferred,s=r.promise;return n&&(s=Ext.Deferred.timeout(s,n).catch(function(){return i.resolveWait(null)})),{deferred:r,promise:s}}}}),Ext.define("Ext.util.ObjectTemplate",{isObjectTemplate:!0,excludeProperties:{},valueRe:/^[{][a-z.]+[}]$/i,statics:{create:function(e,t){return Ext.isObject(e)||Ext.raise("The template is not an Object"),e.isObjectTemplate?e:new Ext.util.ObjectTemplate(e,t)}},constructor:function(e,t){Ext.apply(this,t),this.template=e},apply:function(e){return delete this.apply,this.apply=this.compile(this.template),this.apply(e)},privates:{compile:function(r){var s,e,n,t,o=this.excludeProperties;if(Ext.isString(r))t=r.indexOf("{")<0?function(){return r}:this.valueRe.test(r)?(r=r.substring(1,r.length-1).split("."),function(e){var t,i;for(t=e,i=0;t&&i<r.length;++i)t=t[r[i]];return t}):(r=new Ext.XTemplate(r),function(e){return r.apply(e)});else if(!r||Ext.isPrimitive(r)||Ext.isFunction(r))t=function(){return r};else if(r instanceof Array){for(s=[],e=0,n=r.length;e<n;++e)s[e]=this.compile(r[e]);t=function(e){var t,i=[];for(t=0;t<n;++t)i[t]=s[t](e);return i}}else{for(e in s={},r)o[e]||(s[e]=this.compile(r[e]));t=function(e){var t,i,n={};for(t in r)void 0!==(i=o[t]?r[t]:s[t](e))&&(n[t]=i);return n}}return t}}}),Ext.define("Ext.data.schema.Role",{isRole:!0,left:!0,owner:!1,side:"left",isMany:!1,defaultReaderType:"json",_internalReadOptions:{recordsOnly:!0,asRoot:!0},constructor:function(e,t){var i=t.extra;Ext.apply(this,t),i&&(delete(i=Ext.apply({},i)).type,Ext.apply(this,i),delete this.extra),(this.association=e).owner===this.side&&((e.owner=this).owner=!0)},processUpdate:function(){Ext.raise('Only the "many" for an association may be processed. "'+this.role+'" is not valid.')},processLoad:function(e,t,i,n){return i},checkMembership:Ext.emptyFn,adoptAssociated:function(e,t){var i=this.getAssociatedItem(e);i&&t.adopt(i)},$roleFilterId:"$associationRoleFilter",createAssociationStore:function(e,t,i,n){var r,s=this.association,o=s.getFieldName(),a=s.isManyToMany,l=this.storeConfig,c=t.getId(),u={asynchronousLoad:!1,model:this.cls,role:this,session:e,associatedEntity:t,disableMetaChangeEvent:!0,pageSize:null,remoteFilter:!0,trackRemoved:!e};return a?u.filters=[{id:this.$roleFilterId,property:this.inverse.field,value:c,exactMatch:!0}]:o&&(u.filters=[{id:this.$roleFilterId,property:o,value:c,exactMatch:!0}],u.foreignKeyName=o),l&&Ext.apply(u,l),r=Ext.Factory.store(u),this.onStoreCreate(r,e,c),a&&!e||r.on({scope:this,add:"onAddToMany",remove:"onRemoveFromMany",clear:"onRemoveFromMany"}),i&&r.loadData(i),r.complete=!!n,r},onStoreCreate:Ext.emptyFn,getAssociatedStore:function(r,s,o,e,t){var i,a,n,l,c,u,d,h,f,g=this.getStoreName(),p=r[g],m=p,x=r.session,y=s&&s.reload,v=r.$source,E=!1,b=!1;if(!p){if(x){if(v&&(b=v.phantom),!e&&v&&(d=v[g])&&!d.isLoading()){for(e=[],n=0,l=(c=d.getData().items).length;n<l;++n)u=c[n],e.push(x.getRecord(u.self,u.id));E=!!d.complete,i=!0}i||(h=!!e,e=this.findRecords(x,r,e,t),h||e&&e.length||(e=null),E=b||h)}else E=!!e;(p=this.createAssociationStore(x,r,e,E||r.phantom)).$source=d,e||!this.autoLoad&&!s||(y=!0),r[g]=p}return s&&(y||p.isLoading()?p.on("load",function(e,t,i,n){a=[e,n],o=o||s.scope||r,i?Ext.callback(s.success,o,a):Ext.callback(s.failure,o,a),a.push(i),Ext.callback(s,o,a),Ext.callback(s.callback,o,a)},null,{single:!0}):(a=[p,null],o=o||s.scope||r,Ext.callback(s.success,o,a),a.push(!0),Ext.callback(s,o,a),Ext.callback(s.callback,o,a))),f=p.isLoading(),y?f||p.load():m&&e&&!f&&p.loadData(e),p},getAssociatedItem:function(e){return e[this.isMany?this.getStoreName():this.getInstanceName()]||null},onDrop:Ext.emptyFn,onIdChanged:Ext.emptyFn,getReaderRoot:function(){return this.associationKey||(this.associationKey=this.association.schema.getNamer().readerRoot(this.role))},getReader:function(){var e=this.reader,t=this.cls,i=!this.associationKey,n=this.getReaderRoot();return e&&!e.isReader&&(Ext.isString(e)&&(e={type:e}),Ext.applyIf(e,{model:t,rootProperty:n,useSimpleAccessors:i,type:this.defaultReaderType}),e=this.reader=Ext.createByAlias("reader."+e.type,e)),e},getInstanceName:function(){return this.instanceName||(this.instanceName=this.association.schema.getNamer().instanceName(this.role))},getOldInstanceName:function(){return this.oldInstanceName||(this.oldInstanceName="$old"+this.getInstanceName())},getStoreName:function(){return this.storeName||(this.storeName=this.association.schema.getNamer().storeName(this.role))},constructReader:function(e){var t,i,n=this.getReader(),r=this.cls,s=!this.associationKey,o=this.getReaderRoot();return n||((i=r.getProxy())?((n=new((t=i.getReader()).self)).copyFrom(t),n.setRootProperty(o)):n=new e.self({model:r,useSimpleAccessors:s,rootProperty:o}),this.reader=n),n},read:function(e,t,i,n){var r=this.constructReader(i),s=r.getRoot(t);if(s)return r.readRecords(s,n,this._internalReadOptions)},getCallbackOptions:function(e,t,i){return"function"==typeof e?e={callback:e,scope:t||i}:e&&((e=Ext.apply({},e)).scope=t||e.scope||i),e},doGetFK:function(e,t,i){var n,r,s=this.cls,o=this.association.getFieldName(),a=this.getInstanceName(),l=e[a],c=t&&t.reload,u=void 0!==l&&!c,d=e.session;return u?l&&(u=!l.isLoading()):d?(n=e.get(o))||0===n?(u=d.peekRecord(s,n,!0)&&!c,l=d.getRecord(s,n,!1)):(u=!0,e[a]=l=null):o?(n=e.get(o))||0===n?l=l||s.createWithId(n):(u=!0,e[a]=l=null):(u=!0,l=null),u?t&&(r=[l,null],i=i||t.scope||e,Ext.callback(t.success,i,r),r.push(!0),Ext.callback(t,i,r),Ext.callback(t.callback,i,r)):(e[a]=l,t=this.getCallbackOptions(t,i,e),l.load(t)),l},doSetFK:function(e,t,i,n){var r,s=this.association.getFieldName(),o=this.getInstanceName(),a=e[o],l=this.inverse,c=l.setterName;if(t&&t.isEntity?a!==t&&(e[r=this.getOldInstanceName()]=a,e[o]=t,a&&a.isEntity&&(a[l.getInstanceName()]=void 0),s&&e.set(s,t.getId()),delete e[r],e.onAssociatedRecordSet(t,this),c&&t[c](e)):(s||Ext.raise('No foreignKey specified for "'+this.association.left.role+'" by '+e.$className),(e.changingKey&&!l.isMany||e.set(s,t))&&a&&a.isEntity&&!a.isEqual(a.getId(),t)&&(e[o]=void 0,l.isMany||(a[l.getInstanceName()]=void 0))),i)return Ext.isFunction(i)&&(i={callback:i,scope:n||e}),e.save(i)}}),Ext.define("Ext.data.schema.Association",{isOneToOne:!1,isManyToOne:!1,isManyToMany:!1,owner:null,field:null,constructor:function(e){var t,i;Ext.apply(this,e),this.left=t=new this.Left(this,this.left),this.right=i=new this.Right(this,this.right),(t.inverse=i).inverse=t},hasField:function(){return!!this.field},getFieldName:function(){var e=this.field;return e?e.name:""}}),Ext.define("Ext.data.schema.OneToOne",{extend:Ext.data.schema.Association,isOneToOne:!0,isToOne:!0,kind:"one-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",onDrop:function(e,t){var i=this.getAssociatedItem(e);e[this.getInstanceName()]=null,i&&(i[this.inverse.getInstanceName()]=null)},onIdChanged:function(e,t,i){var n=this.getAssociatedItem(e),r=this.association.getFieldName();!e.session&&n&&r&&n.set(r,i)},createGetter:function(){var e=this;return function(){return e.doGet(this)}},createSetter:function(){var t=this;return function(e){return t.doSet(this,e)}},doGet:function(e){var t=e[this.getInstanceName()];e.session;return t||null},doSet:function(e,t){var i=this.getInstanceName(),n=e[i],r=this.inverse.setterName;return n!==t&&(e[i]=t,r&&t[r](e),e.onAssociatedRecordSet(t,this)),n},read:function(e,t,i,n){var r,s=this.callParent([e,t,i,n]);s&&(r=s[0])&&((r[this.inverse.getInstanceName()]=e)[this.getInstanceName()]=r,delete e.data[this.role])}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:!1,side:"right",createGetter:function(){var i=this;return function(e,t){return i.doGetFK(this,e,t)}},createSetter:function(){var n=this;return function(e,t,i){return n.doSetFK(this,e,t,i)}},onDrop:function(e,t){var i,n=this.association.field,r=this.getAssociatedItem(e);this.inverse.owner&&(t&&n?((i=e.get(n.name))||0===i)&&(r=t.getEntry(this.cls,i).record)&&r.drop():r&&r.drop()),n&&e.set(n.name,null),e[this.getInstanceName()]=null,r&&(r[this.inverse.getInstanceName()]=null)},onValueChange:function(e,t,i){var n=e[this.getOldInstanceName()]||this.getAssociatedItem(e),r=i||0===i,s=this.getInstanceName(),o=this.cls;e.changingKey=!0,this.doSetFK(e,i),r?t&&o&&(e[s]=t.peekRecord(o,i)||void 0):e[s]=null,this.inverse.owner&&n&&this.association.schema.queueKeyCheck(n,this),e.changingKey=!1},checkKeyForDrop:function(e){this.inverse.getAssociatedItem(e)||e.drop()},read:function(e,t,i,n){var r,s,o,a,l,c,u,d,h=this.callParent([e,t,i,n]);h&&(r=h[0],(s=this.association.field)&&(o=s.name),a=e.session,d=e.data,r&&(a&&!((l=a.getRefs(r,this.inverse,!0))&&l[e.id]||void 0===d[o])||(s&&(u=d[o])!==(c=r.id)&&(d[o]=c,a&&a.updateReference(e,s,c,u)),(r[this.inverse.getInstanceName()]=e)[this.getInstanceName()]=r),delete d[this.role]))}})}),Ext.define("Ext.data.schema.ManyToOne",{extend:Ext.data.schema.Association,isManyToOne:!0,isToOne:!0,kind:"many-to-one",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:!0,onDrop:function(e,t){var i,n,r,s,o=this.getAssociatedItem(e);if(o){if((i=o.removeAll())&&this.inverse.owner)for(r=0,n=i.length;r<n;++r)i[r].drop();o.destroy(),e[this.getStoreName()]=null}else if(t&&(i=t.getRefs(e,this)))for(s in i)i[s].drop()},onIdChanged:function(e,t,i){var n,r,s,o,a=this.association.getFieldName(),l=this.getAssociatedItem(e);if(l&&((o=l.getFilters().get(this.$roleFilterId))&&o.setValue(i),!e.session&&a))for(r=0,s=(n=l.getDataSource().items).length;r<s;++r)n[r].set(a,i)},processUpdate:function(e,t){var i,n,r,s,o=this.inverse.cls,a=t.R;if(a)for(i in a)(n=e.peekRecord(o,i))?(s=e.getEntityList(this.cls,a[i]),(r=this.getAssociatedItem(n))?(r.loadData(s),r.complete=!0):n[this.getterName](null,null,s)):e.onInvalidAssociationEntity(o,i)},findRecords:function(e,t,i,n){var r,s,o,a,l,c,u=i,d=e.getRefs(t,this,!0),h=this.association.field;if(h&&(d||n)){if(r=h.name,u=[],i)for(c={},a=0,l=i.length;a<l;++a)o=(s=i[a]).id,d&&d[o]?u.push(s):n&&void 0===s.data[r]&&(u.push(s),s.data[r]=t.id,e.updateReference(s,h,t.id,void 0)),c[o]=!0;if(d)for(o in d)c&&c[o]||u.push(d[o])}return u},processLoad:function(e,t,i,n){var r=i;return n&&(r=this.findRecords(n,t,i,!0)),this.onLoadMany(t,r,n),r},adoptAssociated:function(e,t){var i,n,r,s=this.getAssociatedItem(e);if(s)for(s.setSession(t),n=0,r=(i=s.getData().items).length;n<r;++n)t.adopt(i[n])},createGetter:function(){var n=this;return function(e,t,i){return n.getAssociatedStore(this,e,t,i,!0)}},createSetter:null,onAddToMany:function(e,t){var i=e.getAssociatedEntity();this.association.field?this.syncFK(t,i,!1):this.setInstances(i,t)},onLoadMany:function(e,t,i){this.setInstances(e,t,i)},onRemoveFromMany:function(e,t){this.association.field?this.syncFK(t,e.getAssociatedEntity(),!0):this.setInstances(null,t)},read:function(e,t,i,n){var r,s,o,a=this.inverse.getInstanceName(),l=this.callParent([e,t,i,n]);if(l)for(r=e[this.getterName](null,null,l),delete e.data[this.role],o=0,s=(l=r.getData().items).length;o<s;++o)l[o][a]=e},setInstances:function(e,t,i){var n,r,s,o,a,l=this.inverse.getInstanceName(),c=e?e.getId():null,u=this.association.field,d=t.length;for(n=0;n<d;++n)(r=t[n])[l]=e,u&&(a=u.name,(s=(o=r.data)[a])!==c&&(o[a]=c,i&&i.updateReference(r,u,c,s)))},syncFK:function(e,t,i){for(var n,r,s=this.association.getFieldName(),o=this.inverse,a=o.setterName,l=o.getInstanceName(),c=e.length,u=t.getId();0<c--;)r=i?null:t,!(n=e[c]).isEqual(u,n.get(s))!==i?(n.changingKey=!0,n[a](r),n.changingKey=!1):n[l]=r}}),Right:Ext.define(null,{extend:"Ext.data.schema.Role",left:!1,side:"right",onDrop:function(e,t){var i=this.association.field;i&&e.set(i.name,null),e[this.getInstanceName()]=null},createGetter:function(){var i=this;return function(e,t){return i.doGetFK(this,e,t)}},createSetter:function(){var n=this;return function(e,t,i){return n.doSetFK(this,e,t,i)}},checkMembership:function(e,t){var i,n=this.association.field;n&&(i=this.getSessionStore(e,t.get(n.name)))&&!i.contains(t)&&i.add(t)},onValueChange:function(e,t,i,n){var r,s,o,a,l,c,u=this.getInstanceName(),d=this.cls;if(!e.changingKey)if((r=i||0===i)||(e[u]=null),t)(o=this.getSessionStore(t,n))&&o.remove(e),r&&((o=this.getSessionStore(t,i))&&!o.isLoading()&&o.add(e),d&&(c=t.peekRecord(d,i)),e[u]=c||void 0);else if(s=e.joined)for(a=s.length-1;0<=a;a--)(o=s[a]).isStore&&(l=o.getAssociatedEntity())&&l.self===this.cls&&l.getId()===n&&o.remove(e);this.owner&&null===i&&this.association.schema.queueKeyCheck(e,this)},checkKeyForDrop:function(e){var t=this.association.field;null===e.get(t.name)&&e.drop()},getSessionStore:function(e,t){var i,n=this.cls;if(n&&(i=e.peekRecord(n,t)))return this.inverse.getAssociatedItem(i)},read:function(e,t,i,n){var r,s=this.callParent([e,t,i,n]);s&&(r=s[0])&&(e[this.getInstanceName()]=r,delete e.data[this.role])}})}),Ext.define("Ext.data.schema.ManyToMany",{extend:Ext.data.schema.Association,isManyToMany:!0,isToMany:!0,kind:"many-to-many",Left:Ext.define(null,{extend:"Ext.data.schema.Role",isMany:!0,digitRe:/^\\d+$/,findRecords:function(e,t,i){var n,r,s,o,a,l,c=e.getMatrixSlice(this.inverse,t.id).members,u=[],d=this.cls;if(i)for(n={},r=0,s=i.length;r<s;++r)(a=c[o=(l=i[r]).id])&&-1===a[2]||u.push(l),n[o]=!0;for(o in c)a=c[o],(!n||!n[o]&&a&&-1!==a[2])&&(l=e.peekRecord(d,o))&&u.push(l);return u},onIdChanged:function(e,t,i){var n=this.getAssociatedItem(e);n&&n.getFilters().get(this.$roleFilterId).setValue(i)},processLoad:function(e,t,i,n){var r=i;return n&&(r=this.findRecords(n,t,i),this.onAddToMany(e,r,!0)),r},processUpdate:function(e,t){var i,n,r,s,o=this.inverse.cls,a=t.R;if(a)for(i in a)(n=e.peekRecord(o,i))?(s=e.getEntityList(this.cls,a[i]),(r=this.getAssociatedItem(n))?(r.loadData(s),r.complete=!0):n[this.getterName](null,null,s)):e.onInvalidAssociationEntity(o,i);this.processMatrixBlock(e,t.C,1),this.processMatrixBlock(e,t.D,-1)},checkMembership:function(e,t){var i,n,r,s,o,a,l,c,u,d=e.getMatrix(this.association,!0);if(d&&(n=(i=this.left?d.right:d.left).inverse.role.cls,r=this.inverse,(o=i.slices)&&(s=o[t.id])))for(a in l=s.members)-1!==l[a][2]&&(c=e.peekRecord(n,a))&&(u=r.getAssociatedItem(c))&&(u.matrixUpdate=1,u.add(t),u.matrixUpdate=0)},onStoreCreate:function(e,t,i){var n;t&&((n=t.getMatrixSlice(this.inverse,i)).attach(e),n.notify=this.onMatrixUpdate,n.scope=this)},processMatrixBlock:function(e,t,i){var n,r=this.inverse,s=this.digitRe;if(t)for(n in t)s.test(n)&&(n=parseInt(n,10)),e.getMatrixSlice(r,n).update(t[n],i)},createGetter:function(){var n=this;return function(e,t,i){return n.getAssociatedStore(this,e,t,i,!1)}},onAddToMany:function(e,t,i){e.matrixUpdate||(e.matrixUpdate=1,e.matrix.update(t,!0===i?0:1),e.matrixUpdate=0)},onRemoveFromMany:function(e,t){e.matrixUpdate||(e.matrixUpdate=1,e.matrix.update(t,-1),e.matrixUpdate=0)},read:function(e,t,i,n){var r=this.callParent([e,t,i,n]);r&&(e[this.getterName](null,null,r),delete e.data[this.role])},onMatrixUpdate:function(e,t,i){var n,r,s,o=e.store;!o||o.loading||o.matrixUpdate||(o.matrixUpdate=1,n=o.indexOfId(t),i<0?0<=n&&o.remove([n]):n<0&&(r=(s=o.getSession().getEntry(this.type,t))&&s.record)&&o.add(r),o.matrixUpdate=0)},adoptAssociated:function(e,t){var i,n,r,s=this.getAssociatedItem(e);if(s)for(s.setSession(t),this.onStoreCreate(s,t,e.getId()),n=0,r=(i=s.getData().items).length;n<r;++n)t.adopt(i[n])}},function(){var e=this;Ext.ClassManager.onCreated(function(){Ext.data.schema.ManyToMany.prototype.Right=Ext.define(null,{extend:e,left:!1,side:"right"})},null,"Ext.data.schema.ManyToMany")})}),Ext.define("Ext.util.Inflector",{singleton:!0,plurals:[[/(quiz)$/i,"$1zes"],[/^(ox)$/i,"$1en"],[/([m|l])ouse$/i,"$1ice"],[/(matr|vert|ind)ix|ex$/i,"$1ices"],[/(x|ch|ss|sh)$/i,"$1es"],[/([^aeiouy]|qu)y$/i,"$1ies"],[/(hive)$/i,"$1s"],[/(?:([^f])fe|([lr])f)$/i,"$1$2ves"],[/sis$/i,"ses"],[/([ti])um$/i,"$1a"],[/(buffal|tomat|potat)o$/i,"$1oes"],[/(bu)s$/i,"$1ses"],[/(alias|status|sex)$/i,"$1es"],[/(octop|vir)us$/i,"$1i"],[/(ax|test)is$/i,"$1es"],[/^(p)erson$/i,"$1eople"],[/^(m)an$/i,"$1en"],[/(.*)(child)(ren)?$/i,"$1$2ren"],[/s$/i,"s"],[/$/,"s"]],singulars:[[/(address)$/i,"$1"],[/(quiz)zes$/i,"$1"],[/(matr)ices$/i,"$1ix"],[/(vert|ind)ices$/i,"$1ex"],[/^(ox)en/i,"$1"],[/(alias|status)es$/i,"$1"],[/(octop|vir)i$/i,"$1us"],[/(cris|ax|test)es$/i,"$1is"],[/(shoe)s$/i,"$1"],[/(o)es$/i,"$1"],[/(bus)es$/i,"$1"],[/([m|l])ice$/i,"$1ouse"],[/(x|ch|ss|sh)es$/i,"$1"],[/(m)ovies$/i,"$1ovie"],[/(s)eries$/i,"$1eries"],[/([^aeiouy]|qu)ies$/i,"$1y"],[/([lr])ves$/i,"$1f"],[/(tive)s$/i,"$1"],[/(hive)s$/i,"$1"],[/([^f])ves$/i,"$1fe"],[/(^analy)ses$/i,"$1sis"],[/((a)naly|(b)a|(d)iagno|(p)arenthe|(p)rogno|(s)ynop|(t)he)ses$/i,"$1$2sis"],[/([ti])a$/i,"$1um"],[/(n)ews$/i,"$1ews"],[/(p)eople$/i,"$1erson"],[/s$/i,""]],uncountable:["sheep","fish","series","species","money","rice","information","equipment","grass","mud","offspring","deer","means"],singular:function(e,t){this.singulars.unshift([e,t])},plural:function(e,t){this.plurals.unshift([e,t])},clearSingulars:function(){this.singulars=[]},clearPlurals:function(){this.plurals=[]},isTransnumeral:function(e){return-1!==Ext.Array.indexOf(this.uncountable,e)},pluralize:function(e){if(this.isTransnumeral(e))return e;var t,i,n,r=this.plurals,s=r.length;for(n=0;n<s;n++)if((i=(t=r[n])[0])==e||i.test&&i.test(e))return e.replace(i,t[1]);return e},singularize:function(e){if(this.isTransnumeral(e))return e;var t,i,n,r=this.singulars,s=r.length;for(n=0;n<s;n++)if((i=(t=r[n])[0])==e||i.test&&i.test(e))return e.replace(i,t[1]);return e},classify:function(e){return Ext.String.capitalize(this.singularize(e))},ordinalize:function(e){var t=parseInt(e,10),i=t%100;if(11<=i&&i<=13)return e+"th";switch(t%10){case 1:return e+"st";case 2:return e+"nd";case 3:return e+"rd";default:return e+"th"}}},function(){var e,t={alumnus:"alumni",cactus:"cacti",focus:"foci",nucleus:"nuclei",radius:"radii",stimulus:"stimuli",ellipsis:"ellipses",paralysis:"paralyses",oasis:"oases",appendix:"appendices",index:"indexes",beau:"beaux",bureau:"bureaux",tableau:"tableaux",woman:"women",child:"children",man:"men",corpus:"corpora",criterion:"criteria",curriculum:"curricula",genus:"genera",memorandum:"memoranda",phenomenon:"phenomena",foot:"feet",goose:"geese",tooth:"teeth",antenna:"antennae",formula:"formulae",nebula:"nebulae",vertebra:"vertebrae",vita:"vitae"};for(e in t)t.hasOwnProperty(e)&&(this.plural(e,t[e]),this.singular(t[e],e))}),Ext.define("Ext.data.schema.Namer",{mixins:[Ext.mixin.Factoryable],alias:"namer.default",isNamer:!0,capitalize:function(e){return Ext.String.capitalize(e)},fieldRole:function(e){var t=e.match(this.endsWithIdRe,"");return t&&(e=e.substr(0,e.length-(t[1]||t[2]).length)),this.apply("uncapitalize",e)},idField:function(e){return this.apply("uncapitalize,singularize",e)+"Id"},instanceName:function(e){return this.apply("underscore",e)},multiRole:function(e){return this.apply("undotted,uncapitalize,pluralize",e)},pluralize:function(e){return Ext.util.Inflector.pluralize(e)},readerRoot:function(e){return this.apply("uncapitalize",e)},singularize:function(e){return Ext.util.Inflector.singularize(e)},storeName:function(e){return this.apply("underscore",e)},uncapitalize:function(e){return Ext.String.uncapitalize(e)},underscore:function(e){return"_"+e},uniRole:function(e){return this.apply("undotted,uncapitalize,singularize",e)},undotted:function(e){var t,i;if(e.indexOf(".")<0)return e;for(i=(t=e.split(".")).length;1<i--;)t[i]=this.apply("capitalize",t[i]);return t.join("")},getterName:function(e){var t=e.role;return e&&e.isMany?t:"get"+this.apply("capitalize",t)},inverseFieldRole:function(e,t,i,n){var r=this.apply(t?"uniRole":"multiRole",e),s=this.apply("pluralize",i),o=this.apply("undotted,pluralize",n);return s.toLowerCase()!==o.toLowerCase()&&(r=i+this.apply("capitalize",r)),r},manyToMany:function(e,t,i){var n=this.apply("undotted,capitalize,singularize",t)+this.apply("undotted,capitalize,pluralize",i);return e&&(n=this.apply("capitalize",e+n)),n},manyToOne:function(e,t,i,n){return this.apply("capitalize,singularize",i)+this.apply("capitalize",t)},matrixRole:function(e,t){var i=this.apply(e?"multiRole,capitalize":"multiRole",t);return e?e+i:i},oneToOne:function(e,t,i,n){return this.apply("undotted,capitalize,singularize",i)+this.apply("capitalize",t)},setterName:function(e){return"set"+this.apply("capitalize",e.role)},endsWithIdRe:/(?:(_id)|[^A-Z](Id))$/,cache:{},apply:function(e,t){var i,n,r,s=this.cache,o=s[t]||(s[t]={}),a=o[e];if(!a){if(e.indexOf(",")<0)a=this[e](t);else for(n=(r=e.split(",")).length,a=t,i=0;i<n;++i)a=this.apply(r[i],a);o[e]=a}return a}}),Ext.define("Ext.data.schema.Schema",{mixins:[Ext.mixin.Factoryable],alias:"schema.default",aliasPrefix:"schema.",isSchema:!0,type:"default",statics:{instances:{},clearInstance:function(e){var t=this.instances[e];delete this.instances[e],t&&(t.clear(!0),t.destroy())},get:function(e){var t,i,n=this.instances,r="default",s=e&&Ext.isString(e);if(e){if(e.isSchema)return e;r=s?e:e.id||r}return(t=n[r])?e&&!s&&("default"!==r&&Ext.raise("Only the default Schema instance can be reconfigured"),i=Ext.merge({},t.config),Ext.merge(i,e),t.setConfig(i),t.config=i,t.setConfig=function(){Ext.raise("The schema can only be reconfigured once")}):(n[r]=t=this.create(e),t.id=r),t},lookupEntity:function(e){var t,i,n=null,r=this.instances;if(e)if(e.isEntity)n=e.self;else if(Ext.isFunction(e))n=e;else if(Ext.isString(e)){if(!(n=Ext.ClassManager.get(e))||n.prototype&&n.prototype.isEntity||(n=null),!n)for(i in r)(t=r[i].getEntity(e))&&(n&&Ext.raise('Ambiguous entity name "'+e+'". Defined by schema "'+n.schema.type+'" and "'+i+'"'),n=t);n||Ext.raise('No such Entity "'+e+'".')}return n}},assocCount:0,entityCount:0,config:{defaultIdentifier:null,keyCheckDelay:10,namer:"default",namespace:null,proxy:{type:"ajax",url:"{prefix}/{entityName}"},urlPrefix:""},onClassExtended:function(e,t){var i=t.alias;i&&!t.type&&(Ext.isString(i)||(i=i[0]),e.prototype.type=i.substring(this.prototype.aliasPrefix.length))},constructor:function(e){this.initConfig(e),this.clear()},applyDefaultIdentifier:function(e){return e&&Ext.Factory.dataIdentifier(e)},applyNamer:function(e){var t=Ext.data.schema.Namer.create(e);return t.schema=this,t},applyNamespace:function(e){var t;return e&&(t=e.length-1,"."!==e.charAt(t)&&(e+=".")),e},applyProxy:function(e){return Ext.util.ObjectTemplate.create(e)},eachAssociation:function(e,t){var i,n=this.associations;for(i in n)if(n.hasOwnProperty(i)&&!1===e.call(t,i,n[i]))break},eachEntity:function(e,t){var i,n=this.entities;for(i in n)if(n.hasOwnProperty(i)&&!1===e.call(t,i,n[i].cls))break},getAssociation:function(e){return this.associations[e]||null},getEntity:function(e){var t=this.entityClasses[e]||this.entities[e];return t&&t.cls||null},getEntityName:function(e){var t,i,n=this.getNamespace();if(i="string"==typeof e?e:e.$className||null){if(n&&(t=n.length,i.substring(0,t)!==n))return i;t&&(i=i.substring(t))}return i},hasAssociations:function(e){return e=e.entityName||e,!!this.associationEntityMap[e]},hasEntity:function(e){var t=this.getEntityName(e);return!(!this.entities[t]&&!this.entityClasses[t])},addMatrix:function(e,t,i,n,r){var s,o,a,l=this.getNamer(),c=this.associations,u=this.entities,d=n.type,h=r.type,f=n.field||l.apply("idField",d),g=r.field||l.apply("idField",h),p=n.role||l.matrixRole(i,d),m=r.role||l.matrixRole(i,h);o=u[d]||(u[d]={cls:null,name:d,associations:{}}),a=u[h]||(u[h]={cls:null,name:h,associations:{}}),++this.assocCount,c[t]=s=new Ext.data.schema.ManyToMany({name:t,schema:this,definedBy:e,left:{cls:o.cls,type:d,role:p,field:f,associationKey:n.associationKey},right:{cls:a.cls,type:h,role:m,field:g,associationKey:r.associationKey}}),o.associations[s.right.role]=s.right,a.associations[s.left.role]=s.left,o.cls&&(this.associationEntityMap[o.cls.entityName]=!0),a.cls&&(this.associationEntityMap[a.cls.entityName]=!0),this.decorateModel(s)},addReference:function(e,t,i,n,r){var s,o=this.getNamer(),a=this.entities,l=this.associations,c=e.entityName,u=i.association,d=i.child,h=i.parent,f=i.role,g=i.type||h||d,p=i.inverse,m=Ext.isString(p)?{role:p}:p,x=m&&m.role;f=f||(!t||i.legacy?o.apply("uncapitalize",g):o.apply("fieldRole",t.name)),x=x||o.inverseFieldRole(c,n,f,g),u=u||(n?o.oneToOne(e,x,g,f):o.manyToOne(e,x,g,f)),r&&u in l&&!1!==r(l[u],u,x,f)||(u in l&&Ext.raise('Duplicate association: "'+u+'" declared by '+c+(t?"."+t.name:"")+" (collides with "+l[u].definedBy.entityName+")"),t&&t.definedBy===a[g]&&Ext.raise("ForeignKey reference should not be owned by the target model"),s=a[g]||(a[g]={cls:null,name:g,associations:{}}),u=new(n?Ext.data.schema.OneToOne:Ext.data.schema.ManyToOne)({name:u,owner:d?"left":h?"right":null,definedBy:e,schema:this,field:t,nullable:!t||!!t.allowBlank,left:{cls:e,type:c,role:x,extra:m},right:{cls:s.cls,type:g,role:f,extra:i},meta:i}),e.associations[f]=u.right,s.associations[x]=u.left,t&&(t.reference=u.right,e.references.push(t)),++this.assocCount,this.associationEntityMap[c]=!0,s.cls&&(this.associationEntityMap[s.cls.entityName]=!0),(l[u.name]=u).right.cls&&this.decorateModel(u))},privates:{addEntity:function(e){var t,i,n,r,s,o=this.entities,a=e.entityName,l=o[a],c=e.fields;if(l)if(l.cls)Ext.raise('Duplicate entity name "'+a+'": '+l.cls.$className+" and "+e.$className);else for(s in t=l.associations)t[s].inverse.cls=e,this.associationEntityMap[a]=!0,this.decorateModel(t[s].association);else o[a]=l={name:a,associations:{}};for((l.cls=e).prototype.associations=e.associations=l.associations,this.entityClasses[e.$className]=l,++this.entityCount,n=0,r=c.length;n<r;++n)(i=c[n]).reference&&this.addReferenceDescr(e,i)},addMatrices:function(e,t){var i,n,r;if(Ext.isString(t))this.addMatrixDescr(e,null,t);else if(t[0])for(i=0,n=t.length;i<n;++i)this.addMatrixDescr(e,null,t[i]);else for(r in t)this.addMatrixDescr(e,r,t[r])},addMatrixDescr:function(e,t,i){var n,r,s=e.entityName,o=this.associations,a=this.getNamer(),l=i.left,c=i.right;if(Ext.isString(i)?c="#"===i.charAt(0)?(l={type:s},{type:i.substring(1)}):"#"===i.charAt(n=i.length-1)?(l={type:i.substring(0,n)},{type:s}):a.apply("multiRole",s)<a.apply("multiRole",i)?(l={type:s},{type:i}):(l={type:i},{type:s}):(Ext.Assert.isString(i.type,'No "type" for manyToMany in '+s),r=i.relation,l||!c&&a.apply("multiRole",s)<a.apply("multiRole",i.type)?(l=l&&!0!==l?Ext.apply({type:s},l):{type:s},c=i):(c=c&&!0!==c?Ext.apply({type:s},c):{type:s},l=i)),(t=t||a.manyToMany(r,l.type,c.type))in o){var u,d=o[t],h=[d.kind,d.left.type,d.left.role,d.left.field,d.right.type,d.right.role,d.right.field].join("|");delete o[t],this.addMatrix(e,t,r,l,c),u=o[t],(o[t]=d).left.cls.associations[d.right.role]=d.right,d.right.cls.associations[d.left.role]=d.left,--this.assocCount,h!=(u=[u.kind,u.left.type,u.left.role,u.left.field,u.right.type,u.right.role,u.right.field].join("|"))&&(Ext.log.warn(t+"("+d.definedBy.entityName+"): "+h),Ext.log.warn(t+"("+s+"): "+u),Ext.raise('Conflicting association: "'+t+'" declared by '+s+" was previously declared by "+d.definedBy.entityName))}else this.addMatrix(e,t,r,l,c)},addReferenceDescr:function(e,t){var i=t.$reference;i=Ext.isString(i)?{type:i}:Ext.apply({},i),this.addReference(e,t,i,t.unique)},addBelongsTo:function(e,t){this.addKeylessSingle(e,t,!1)},addHasOne:function(e,t){this.addKeylessSingle(e,t,!0)},addKeylessSingle:function(e,t,i){var n,r;(t=Ext.apply({},this.checkLegacyAssociation(e,t))).type=this.getEntityName(t.child||t.parent||t.type),n=t.foreignKey||t.type.toLowerCase()+"_id",r=e.getField(n),t.fromSingle=!0,r&&(r.$reference=t,r.unique=!0,t.legacy=!0,Ext.log.warn("Using foreignKey is deprecated, use a keyed association. See Ext.data.field.Field.reference")),this.addReference(e,r,t,i)},addHasMany:function(a,e){var l,t,i,n,r,s,o,c=this.entities,u=this.pending;(e=Ext.apply({},this.checkLegacyAssociation(a,e))).type=this.getEntityName(e.child||e.parent||e.type),n=c[t=e.type],(l=n&&n.cls)?(t=a.entityName,r=e.foreignKey||t.toLowerCase()+"_id",delete e.foreignKey,o=Ext.apply({},e.inverse),delete e.inverse,delete(s=Ext.apply({},e)).type,e=Ext.apply({type:t,inverse:s},o),s.child&&(delete s.child,e.parent=t),(i=l.getField(r))&&((i.$reference=e).legacy=!0,Ext.log.warn("Using foreignKey is deprecated, use a keyed association. See Ext.data.field.Field.reference")),this.addReference(l,i,e,!1,function(e,t,i,n){var r,s,o=!!e.meta.fromSingle&&l===e.left.cls;return o&&(r=l.entityName,s=a.entityName,Ext.raise('hasMany ("'+s+'") and belongsTo ("'+r+'") should not be used in conjunction to declare a relationship. Use only one.')),o})):(u[t]||(u[t]=[]),u[t].push([a,e]))},checkLegacyAssociation:function(e,t){var i;return(t=Ext.isString(t)?{type:t}:Ext.apply({},t)).model&&(t.type=t.model,delete t.model),(i=t.associatedName||t.name)&&(delete t.associatedName,delete t.name,t.role=i),t},afterKeylessAssociations:function(e){var t,i,n=this.pending,r=e.entityName,s=n[r];if(s){for(t=0,i=s.length;t<i;++t)this.addHasMany.apply(this,s[t]);delete n[r]}},clear:function(e){var t=this,i=t.timer;delete t.setConfig,i&&(window.clearTimeout(i),t.timer=null),t.associations={},t.associationEntityMap={},t.entities={},t.entityClasses={},t.pending={},t.assocCount=t.entityCount=0,e&&t.setNamespace(null)},constructProxy:function(e){var t=Ext.Object.chain(e),i=this.getProxy();return t.schema=this,t.prefix=this.getUrlPrefix(),i.apply(t)},applyDecoration:function(e){var t,i,n,r=e.inverse.cls,s=this.getNamer();r&&!e.decorated&&(e.decorated=!0,n=r.prototype,(t=e.getterName)||(e.getterName=t=s.getterName(e)),n[t]=e.createGetter(),e.createSetter&&((i=e.setterName)||(e.setterName=i=s.setterName(e)),n[i]=e.createSetter()))},decorateModel:function(e){this.applyDecoration(e.left),this.applyDecoration(e.right)},processKeyChecks:function(e){var t,i,n,r=this.keyCheckQueue,s=this.timer;if(s&&(window.clearTimeout(s),this.timer=null),r)do{for(r=this.keyCheckQueue,this.keyCheckQueue=[],i=0,t=r.length;i<t;++i)(n=r[i]).role.checkKeyForDrop(n.record)}while(e&&this.keyCheckQueue.length)},queueKeyCheck:function(e,t){var i=this.keyCheckQueue,n=this.timer;i||(this.keyCheckQueue=i=[]),i.push({record:e,role:t}),n||(this.timer=n=Ext.defer(this.processKeyChecks,this.getKeyCheckDelay(),this))},rankEntities:function(){var e,t,i=this.entities,n=Ext.Object.getKeys(i),r=n.length;for(this.nextRank=1,n.sort(),t=0;t<r;++t)(e=i[n[t]].cls).rank||this.rankEntity(e);this.topoStack=null},rankEntity:function(e){var t,i,n,r=e.associations,s=this.topoStack||(this.topoStack=[]),o=e.entityName;for(n in s.push(o),0===e.rank&&Ext.raise(o+" has circular foreign-key references: "+s.join(" --\\x3e ")),e.rank=0,r)!(i=r[n]).left&&i.association.field&&((t=i.cls).rank||this.rankEntity(t));e.rank=this.nextRank++,s.pop()}}}),Ext.define("Ext.data.AbstractStore",{mixins:[Ext.mixin.Observable,Ext.mixin.Factoryable],factoryConfig:{defaultType:"store",type:"store"},$configPrefixed:!1,$configStrict:!1,config:{filters:null,autoDestroy:void 0,storeId:null,statefulFilters:!1,sorters:null,remoteSort:{lazy:!0,$value:!1},remoteFilter:{lazy:!0,$value:!1},groupField:void 0,groupDir:"ASC",grouper:null,pageSize:25,autoSort:null,reloadOnClearSorters:!1},currentPage:1,loading:!1,isStore:!0,updating:0,constructor:function(e){var t;this.callParent([e]),this.isInitializing=!0,this.mixins.observable.constructor.call(this,e),this.isInitializing=!1,!(t=this.getStoreId())&&e&&e.id&&this.setStoreId(t=e.id),t&&Ext.data.StoreManager.register(this)},createActiveRange:function(e){var t=Ext.apply({store:this},e);return new Ext.data.Range(t)},syncActiveRanges:function(){var e,t=this.activeRanges,i=t&&t.length;for(e=0;e<i;e++)t[e].refresh()},getCount:function(){var e=this.getData();return e?e.getCount():0},rangeCached:function(e,t){return this.getData().getCount()>=Math.max(e,t)},find:function(e,t,i,n,r,s){var o=!n,a=!(!o||!s);return this.getData().findIndex(e,t,i,o,a,!r)},findRecord:function(){var e=this.find.apply(this,arguments);return-1!==e?this.getAt(e):null},findExact:function(t,i,e){return this.getData().findIndexBy(function(e){return e.isEqual(e.get(t),i)},this,e)},findBy:function(e,t,i){return this.getData().findIndexBy(e,t,i)},getAt:function(e){return this.getData().getAt(e)||null},getRange:function(e,t,i){var n=this.getData().getRange(e,Ext.isNumber(t)?t+1:t);return i&&i.callback&&i.callback.call(i.scope||this,n,e,t,i),n},getFilters:function(e){var t=this.callParent();return t||!1===e||(this.setFilters([]),t=this.callParent()),t},applyFilters:function(e,t){var i=!t;return i&&(t=this.createFiltersCollection()),e!==t&&(e&&e.isCollection&&(e=e.items.slice()),t.add(e),i&&this.onRemoteFilterSet(t,this.getRemoteFilter())),t},getSorters:function(e){var t=this.callParent();return t||!1===e||(this.setSorters([]),t=this.callParent()),t},applySorters:function(e,t){var i;return t||(t=this.createSortersCollection(),i=!0),t.add(e),i&&this.onRemoteSortSet(t,this.getRemoteSort()),t},filter:function(e,t,i){Ext.isString(e)&&(e={property:e,value:t}),this.suppressNextFilter=!!i,this.getFilters().add(e),this.suppressNextFilter=!1},removeFilter:function(e,t){var i=this.getFilters();this.suppressNextFilter=!!t,e instanceof Ext.util.Filter?i.remove(e):i.removeByKey(e),this.suppressNextFilter=!1},updateAutoSort:function(e){this.getData().setAutoSort(e)},updateRemoteSort:function(e){this.onRemoteSortSet(this.getSorters(!1),e)},updateRemoteFilter:function(e){this.onRemoteFilterSet(this.getFilters(!1),e)},addFilter:function(e,t){this.suppressNextFilter=!!t,this.getFilters().add(e),this.suppressNextFilter=!1},filterBy:function(e,t){this.getFilters().add({filterFn:e,scope:t||this})},clearFilter:function(e){var t=this.getFilters(!1);t&&0!==t.getCount()&&(this.suppressNextFilter=!!e,t.removeAll(),this.suppressNextFilter=!1)},isFiltered:function(){return 0<this.getFilters().getCount()},isSorted:function(){var e=this.getSorters(!1);return!!(e&&0<e.length)||this.isGrouped()},addFieldTransform:function(e){if(!e.getTransform()){var t,i,n=e.getProperty(),r=this.getModel();r&&(i=(t=r.getField(n))?t.getSortType():null),i&&i!==Ext.identityFn&&e.setTransform(i)}},beginUpdate:function(){!this.updating++&&this.hasListeners.beginupdate&&this.fireEvent("beginupdate")},endUpdate:function(){this.updating&&!--this.updating&&(this.hasListeners.endupdate&&this.fireEvent("endupdate"),this.onEndUpdate())},getState:function(){var t,i,e,n=[],r=this.getFilters(),s=this.getGrouper();return this.getSorters().each(function(e){n[n.length]=e.getState(),i=!0}),this.statefulFilters&&this.saveStatefulFilters&&(i=!0,t=[],r.each(function(e){t[t.length]=e.getState()})),s&&(i=!0),i&&(e={},n.length&&(e.sorters=n),t&&(e.filters=t),s&&(e.grouper=s.getState())),e},applyState:function(e){var t=e.sorters,i=e.filters,n=e.grouper;t&&this.getSorters().replaceAll(t),i&&(this.saveStatefulFilters=!0,this.getFilters().replaceAll(i)),n&&this.setGrouper(n)},hasPendingLoad:Ext.emptyFn,isLoaded:Ext.emptyFn,isLoading:Ext.emptyFn,destroy:function(){var e=this;e.hasListeners.beforedestroy&&e.fireEvent("beforedestroy",e),e.destroying=!0,e.getStoreId()&&Ext.data.StoreManager.unregister(e),e.doDestroy(),e.hasListeners.destroy&&e.fireEvent("destroy",e),e.callParent()},doDestroy:Ext.emptyFn,sort:function(e,t,i){0===arguments.length?this.getRemoteSort()?this.load():this.forceLocalSort():this.getSorters().addSort(e,t,i)},onBeforeCollectionSort:function(e,t){t&&this.fireEvent("beforesort",this,t.getRange())},onSorterEndUpdate:function(){var e,t=this,i=!0,n=t.getSorters(!1);!t.settingGroups&&n&&(e=(n=n.getRange()).length,t.getRemoteSort()?(n.length||t.getReloadOnClearSorters())&&(i=!1,t.load({callback:function(){t.fireEvent("sort",t,n)}})):e&&(t.fireEvent("datachanged",t),t.fireEvent("refresh",t)),i&&t.fireEvent("sort",t,n))},onFilterEndUpdate:function(){var e=this,t=e.suppressNextFilter;e.getFilters(!1)&&(e.getRemoteFilter()?(e.getFilters().each(function(e){e.getInitialConfig().filterFn&&Ext.raise("Unable to use a filtering function in conjunction with remote filtering.")}),e.currentPage=1,t||e.load()):t||(e.fireEvent("datachanged",e),e.fireEvent("refresh",e)),e.trackStateChanges&&(e.saveStatefulFilters=!0),e.fireEvent("filterchange",e,e.getFilters().getRange()))},updateGroupField:function(e){e?this.setGrouper({property:e,direction:this.getGroupDir()}):this.setGrouper(null)},getGrouper:function(){return this.getData().getGrouper()},group:function(e,t){var i=this,n=i.getSorters(!1),r=e||n&&n.length,s=i.getData();e&&"string"==typeof e&&(e={property:e,direction:t||i.getGroupDir()}),i.settingGroups=!0,e===s.getGrouper()?s.updateGrouper(e):s.setGrouper(e),delete i.settingGroups,r?i.getRemoteSort()?i.isInitializing||i.load({scope:i,callback:function(){i.fireGroupChange()}}):(i.fireEvent("datachanged",i),i.fireEvent("refresh",i),i.fireGroupChange()):i.fireGroupChange()},fireGroupChange:function(e){this.isConfiguring||this.destroying||this.destroyed||this.fireGroupChangeEvent(e||this.getGrouper())},fireGroupChangeEvent:function(e){this.fireEvent("groupchange",this,e)},clearGrouping:function(){this.group(null)},getGroupField:function(){var e=this.getGrouper(),t="";return e&&(t=e.getProperty()),t},isGrouped:function(){return!!this.getGrouper()},applyGrouper:function(e){return this.group(e),this.getData().getGrouper()},getGroups:function(){return this.getData().getGroups()},onEndUpdate:Ext.emptyFn,privates:{_metaProperties:{count:"getCount",first:"first",last:"last",loading:"hasPendingLoad",totalCount:"getTotalCount"},interpret:function(e){var t=this._metaProperties[e];return t&&this[t]()},loadsSynchronously:Ext.privateFn,onRemoteFilterSet:function(e,t){e&&e[t?"on":"un"]("endupdate","onFilterEndUpdate",this)},onRemoteSortSet:function(e,t){var i;e&&(e[t?"on":"un"]("endupdate","onSorterEndUpdate",this),(i=this.getData())&&i[t?"un":"on"]("beforesort","onBeforeCollectionSort",this))}},deprecated:{5:{methods:{destroyStore:function(){this.destroy()}}}}}),Ext.define("Ext.data.Error",{isError:!0,$configPrefixed:!1,config:{field:null,message:""},constructor:function(e){this.initConfig(e),this.msg=this.message}}),Ext.define("Ext.data.ErrorCollection",{extend:Ext.util.MixedCollection,alternateClassName:"Ext.data.Errors",init:function(e){var t,i,n,r,s,o,a,l=e.fields,c=e.data;for(n=0,r=l.length;n<r;++n)o=c[a=(i=l[n]).name],i.validate&&!i.validate.$nullFn&&(t=this.length,s=i.validate(o,null,this,e),t===this.length&&!0!==s&&this.add(a,s));return this},add:function(e,t){var i,n=Ext.data.field.Field.defaultInvalidMessage,r=e;if(Ext.isString(e)?r=new Ext.data.Error({field:e,message:t||n}):(r.isError||(r=new Ext.data.Error({field:r.field||r.name,message:r.error||r.message||r.msg||n})),e=r.field),i=this.get(e)){if(Ext.isArray(i))return i.push(r),i;this.removeAtKey(e),(r=[i,r]).field=e,r=[r]}return this.callParent([r])},getKey:function(e){return e.field},isValid:function(){return 0===this.length},getByField:function(e){var t=this.get(e);return t&&!Ext.isArray(t)&&(t=[t]),t||[]}}),Ext.define("Ext.data.operation.Operation",{alternateClassName:"Ext.data.Operation",isOperation:!0,config:{synchronous:!1,url:"",params:void 0,callback:void 0,scope:void 0,resultSet:null,response:null,request:null,records:null,id:void 0,proxy:null,batch:null,recordCreator:null,internalCallback:null,internalScope:null},order:0,foreignKeyDirection:1,started:!1,running:!1,complete:!1,success:void 0,exception:!1,error:void 0,idPrefix:"ext-operation-",constructor:function(e){var t=e&&e.scope;this.initConfig(e),e&&(e.scope=t),t&&(this.setScope(t),this.initialConfig.scope=t),this._internalId=Ext.id(this,this.idPrefix)},getAction:function(){return this.action},execute:function(){var e;return delete this.error,delete this.success,this.complete=this.exception=!1,this.setStarted(),this.request=e=this.doExecute(),e&&e.setOperation(this),e},doExecute:Ext.emptyFn,abort:function(){var e,t=this.request;this.aborted=!0,this.running&&t&&((e=this.getProxy())&&!e.destroyed&&e.abort(t),this.request=null),this.running=!1},process:function(e,t,i,n){n=!1!==n,this.setResponse(i),this.setResultSet(e),e.getSuccess()?(this.doProcess(e,t,i),this.setSuccessful(n)):n&&this.setException(e.getMessage())},_commitSetOptions:{convert:!0,commit:!0},doProcess:function(e,t,i){var n,r,s,o,a=this._commitSetOptions,l=this.getRecords(),c=l.length,u=l[0].clientIdProperty,d=e.getRecords(),h=d?d.length:0;if(h&&u){for(n=Ext.Array.toValueMap(l,"id"),o=0;o<h;++o)(s=n[(r=d[o])[u]])?(delete n[s.id],delete r[u],s.set(r,a)):Ext.log.warn("Ignoring server record: "+Ext.encode(r));for(o in n)n[o].commit()}else for(o=0;o<c;++o)s=l[o],0!==h&&(r=d[o])?s.set(r,a):s.commit()},setStarted:function(){this.started=this.running=!0},setCompleted:function(){var e;this.complete=!0,this.running=!1,this.destroying||this.triggerCallbacks(),this.destroyed||(e=this.getProxy())&&!e.destroyed&&e.completeOperation(this)},setSuccessful:function(e){this.success=!0,e&&this.setCompleted()},setException:function(e){this.exception=!0,this.success=this.running=!1,this.error=e,this.setCompleted()},triggerCallbacks:function(){var e=this,t=e.getInternalCallback();if(t){if(t.call(e.getInternalScope()||e,e),e.destroyed)return;e.setInternalCallback(null),e.setInternalScope(null)}if(t=e.getCallback()){if(t.call(e.getScope()||e,e.getRecords(),e,e.wasSuccessful()),e.destroyed)return;e.setCallback(null),e.setScope(null)}},hasException:function(){return this.exception},getError:function(){return this.error},getRecords:function(){var e;return this._records||((e=this.getResultSet())?e.getRecords():null)},isStarted:function(){return this.started},isRunning:function(){return this.running},isComplete:function(){return this.complete},wasSuccessful:function(){return this.isComplete()&&!0===this.success},allowWrite:function(){return!0},destroy:function(){var e=this;e.destroying=!0,e.running&&e.abort(),e._params=e._callback=e._scope=e._resultSet=e._response=null,e.request=e._request=e._records=e._proxy=e._batch=null,e._recordCreator=e._internalCallback=e._internalScope=null,e.callParent()}}),Ext.define("Ext.data.operation.Create",{extend:Ext.data.operation.Operation,alias:"data.operation.create",action:"create",isCreateOperation:!0,order:10,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().create(this)}}),Ext.define("Ext.data.operation.Destroy",{extend:Ext.data.operation.Operation,alias:"data.operation.destroy",action:"destroy",isDestroyOperation:!0,order:30,foreignKeyDirection:-1,doProcess:function(){var e,t=this.getRecords(),i=t.length;for(e=0;e<i;++e)t[e].setErased()},doExecute:function(){return this.getProxy().erase(this)},getRecordData:function(e,t){var i={};return i[e.idField[this.getNameProperty()||"name"]]=e.id,i}}),Ext.define("Ext.data.operation.Read",{extend:Ext.data.operation.Operation,alias:"data.operation.read",action:"read",isReadOperation:!0,config:{filters:void 0,sorters:void 0,grouper:void 0,start:void 0,limit:void 0,page:void 0,addRecords:!1},doExecute:function(){return this.getProxy().read(this)},doProcess:Ext.emptyFn,allowWrite:function(){return!1}}),Ext.define("Ext.data.operation.Update",{extend:Ext.data.operation.Operation,alias:"data.operation.update",action:"update",isUpdateOperation:!0,order:20,config:{recordCreator:Ext.identityFn},doExecute:function(){return this.getProxy().update(this)}}),Ext.define("Ext.data.SortTypes",function(){var i;return{singleton:!0,constructor:function(){i=this},none:Ext.identityFn,stripCommasRe:/,/g,stripTagsRE:/<\\/?[^>]+>/gi,asText:function(e){return null!=e?String(e).replace(i.stripTagsRE,""):"\\0"},asUCText:function(e){return null!=e?String(e).toUpperCase().replace(i.stripTagsRE,""):"\\0"},asUCString:function(e){return null!=e?String(e).toUpperCase():"\\0"},asDate:function(e){return e?Ext.isDate(e)?e.getTime():Date.parse(String(e)):0},asFloat:function(e){var t=parseFloat(String(e).replace(i.stripCommasRe,""));return isNaN(t)?0:t},asInt:function(e){var t=parseInt(String(e).replace(i.stripCommasRe,""),10);return isNaN(t)?0:t}}}),Ext.define("Ext.data.validator.Validator",{mixins:[Ext.mixin.Factoryable],alias:"data.validator.base",isValidator:!0,factoryConfig:{cacheable:!0},type:"base",constructor:function(e){"function"==typeof e?(this.fnOnly=!0,this.validate=e):this.initConfig(e)},validate:function(){return!0},clone:function(){return this.fnOnly?new Ext.data.validator.Validator(this.validate):new this.self(this.getCurrentConfig())}},function(e){Ext.Factory.validator=Ext.Factory.dataValidator}),Ext.define("Ext.data.field.Field",{mixins:[Ext.mixin.Factoryable],alternateClassName:"Ext.data.Field",alias:"data.field.auto",aliasPrefix:"data.field.",type:"auto",factoryConfig:{defaultProperty:"name"},isDataField:!0,isField:!0,allowBlank:!0,allowNull:!1,critical:!1,defaultInvalidMessage:"This field is invalid",defaultValue:void 0,definedBy:null,depends:null,dependents:null,mapping:null,name:null,ordinal:void 0,persist:null,reference:null,summary:null,summaryField:"",unique:!1,rank:null,stripRe:/[$,%]/g,calculated:!1,evil:!1,identifier:!1,onClassExtended:function(e,t){var i=t.sortType,n=e.prototype,r=n.validators,s=t.validators,o=t.alias;o&&("string"!=typeof o&&(o=o[0]),o&&(n.type=o.substr(o.lastIndexOf(".")+1))),i&&Ext.isString(i)&&(n.sortType=Ext.data.SortTypes[i]),s&&(Ext.isArray(s)||(s=[s]),delete t.validators,r&&(s=r.concat(s)),n.validators=s)},argumentNamesRe:/^function\\s*\\(\\s*([^,\\)\\s]+)/,calculateRe:/[^.a-z0-9_]([a-z_][a-z_0-9]*)\\.([a-z_][a-z_0-9]*)/gi,constructor:function(e){var t,i,n,r,s,o,a,l,c,u,d,h=this,f=h.calculateRe;if(e&&(Ext.isString(e)?h.name=e:((d=e.validators)&&(delete e.validators,h.instanceValidators=d),Ext.apply(h,e))),h.allowNull||(h.allowNull=!!h.reference),t=h.calculate,s=h.depends,t&&(h.convert=h.doCalculate,!s)){if(!(s=t.$depends))for(o={},c=Ext.Function.toCode(t),t.$depends=s=[],l=(a=h.argumentNamesRe.exec(c))?a[1]:"data";a=f.exec(c);)l!==a[1]||o[u=a[2]]||(o[u]=1,s.push(u));h.depends=s}n=h.defaultValue,h.convert&&(h.calculated=i=1<h.convert.length,h.evil=i&&!s),null===h.persist&&(h.persist=!t),r=h.sortType,h.sortType?Ext.isString(r)&&(h.sortType=Ext.data.SortTypes[r]):h.sortType=Ext.data.SortTypes.none,s&&"string"==typeof s&&(h.depends=[s]),h.cloneDefaultValue=void 0!==n&&(Ext.isDate(n)||Ext.isArray(n)||Ext.isObject(n))},setModelValidators:function(e){this._validators=null,this.modelValidators=e},constructValidators:function(e){var t,i,n,r,s,o;if(e){for(e instanceof Array||(e=[e]),t=this._validators,n=0,i=e.length;n<i;++n)(r=e[n]).fn&&(r=r.fn),(s=Ext.Factory.dataValidator(r)).isPresence?o=s:t.push(s);o&&(this.presence=[o])}},collate:function(e,t){var i=e,n=t;return this.sortType&&(i=this.sortType(i),n=this.sortType(n)),i===n?0:i<n?-1:1},compare:function(e,t){return e===t?0:e<t?-1:1},isEqual:function(e,t){return 0===this.compare(e,t)},convert:null,serialize:null,validate:function(e,t,i,n){var r,s,o=this.getValidators();return!(s=this.presence)||null!=e&&""!==e||!0===(r=this.validateGroup(s,e,t,i,n))?this.validateGroup(o,e,t,i,n):r},validateGroup:function(e,t,i,n,r){var s,o,a,l="";for(o=0,s=e.length;o<s;++o)if(!0!==(a=e[o].validate(t,r)))if(a=a||this.defaultInvalidMessage,n)n.isMixedCollection?n.add(this.name,a):n.isCollection?n.add(a):n.push(a),l=l||a;else{if(!i){l=a;break}l&&(l+=i),l+=a}return l||!0},doCalculate:function(e,t){return t?this.calculate(t.data):e},getName:function(){return this.name},getAllowBlank:function(){return this.allowBlank},getAllowNull:function(){return this.allowNull},getConvert:function(){return this.convert},getDefaultValue:function(){return this.defaultValue},getDepends:function(){return this.depends},getMapping:function(){return this.mapping},hasMapping:function(){var e=this.mapping;return!(!e&&0!==e)},getPersist:function(){return this.persist},getSortType:function(){return this.sortType},getSummary:function(){var e=this.doneSummary,t=this.summary;return e||(this.doneSummary=!0,t&&(this.summary=t=Ext.Factory.dataSummary(t))),t||null},getType:function(){return"auto"},privates:{getValidators:function(){var e=this._validators;return e||(this._validators=e=[],this.constructValidators(this.validators),this.constructValidators(this.modelValidators),this.constructValidators(this.instanceValidators)),e}},deprecated:{5.1:{methods:{getSortDir:function(){return this.sortDir}}}}}),Ext.define("Ext.data.field.Array",{extend:Ext.data.field.Field,alias:"data.field.array",isArrayField:!0,itemType:{type:"auto"},getType:function(){return"array"},collate:function(e,t){return this.collateOrCompare(e,t,"collate")},compare:function(e,t){return this.collateOrCompare(e,t,"compare")},convert:function(e){return this.doForEach(!e&&0!==e||Ext.isArray(e)?e:[e],"convert")},serialize:function(e){return this.doForEach(e,"serialize")},getItemField:function(){var e=this.itemType;return this.itemField||("string"==typeof e?e={type:e}:e&&e.isDataField||(e=Ext.apply({type:"auto"},e)),this.itemField=Ext.data.field.Field.create(e)),this.itemField},doForEach:function(e,t){if(!e)return this.allowNull?null:[];var i,n=e.length,r=Array(n),s=this.getItemField();for(i=0;i<n;++i)r[i]=s[t]?s[t](e[i]):e[i];return r},collateOrCompare:function(e,t,i){var n,r,s,o,a,l=this.getItemField();if(!e&&!t||e===t)return 0;if(!e||!t)return e?1:-1;for(r=e.length,s=t.length,o=Math.min(r,s),n=0;n<o;++n)if(0!==(a=l[i](e[n],t[n])))return a;return r===s?0:r<s?-1:1}}),Ext.define("Ext.data.field.Boolean",{extend:Ext.data.field.Field,alias:["data.field.bool","data.field.boolean"],isBooleanField:!0,trueRe:/^\\s*(?:true|yes|on|1)\\s*$/i,convert:function(e){return"boolean"==typeof e?e:!this.allowNull||null!=e&&""!==e?this.trueRe.test(String(e)):null},getType:function(){return"bool"}}),Ext.define("Ext.data.field.Date",{extend:Ext.data.field.Field,alias:"data.field.date",sortType:"asDate",isDateField:!0,dateFormat:null,dateReadFormat:null,dateWriteFormat:null,compare:function(e,t){var i,n=e instanceof Date,r=t instanceof Date;return i=r&&n?0===(i=e.getTime()-t.getTime())?0:i<0?-1:1:n==r?0:n?1:-1},convert:function(e){if(!e)return null;if(e instanceof Date)return e;var t,i=this.dateReadFormat||this.dateFormat;return i?Ext.Date.parse(e,i,this.useStrict):(t=Date.parse(e))?new Date(t):null},serialize:function(e){var t,i=null;return Ext.isDate(e)&&(i=(t=this.getDateWriteFormat())?Ext.Date.format(e,t):e),i},getDateFormat:function(){return this.dateFormat},getDateReadFormat:function(){return this.dateReadFormat},getDateWriteFormat:function(){return this.hasOwnProperty("dateWriteFormat")?this.dateWriteFormat:this.hasOwnProperty("dateFormat")?this.dateFormat:this.dateWriteFormat||this.dateFormat||"timestamp"},getType:function(){return"date"}}),Ext.define("Ext.data.field.Integer",{extend:Ext.data.field.Field,alias:["data.field.int","data.field.integer"],isNumeric:!0,isIntegerField:!0,numericType:"int",convert:function(e){if("number"==typeof e)return this.getNumber(e);var t,i=null==e||""===e,n=this.allowNull;return i?t=n?null:0:(t=this.parse(e),n&&isNaN(t)&&(t=null)),t},getNumber:function(e){return parseInt(e,10)},getType:function(){return this.numericType},parse:function(e){return parseInt(String(e).replace(this.stripRe,""),10)},sortType:function(e){return null==e&&(e=1/0),e}}),Ext.define("Ext.data.field.Number",{extend:Ext.data.field.Integer,alias:["data.field.float","data.field.number"],isIntegerField:!1,isNumberField:!0,numericType:"float",getNumber:Ext.identityFn,parse:function(e){return parseFloat(String(e).replace(this.stripRe,""))}}),Ext.define("Ext.data.field.String",{extend:Ext.data.field.Field,alias:"data.field.string",sortType:"asUCString",isStringField:!0,convert:function(e){var t=this.allowNull?null:"";return null==e?t:String(e)},getType:function(){return"string"}}),Ext.define("Ext.data.identifier.Generator",{abstract:!0,mixins:[Ext.mixin.Factoryable],alias:"data.identifier.default",factoryConfig:{defaultType:"sequential"},isGenerator:!0,config:{id:null},constructor:function(e){var t;this.initConfig(e),(t=this.getId())&&(Ext.data.identifier.Generator.all[t]=this)},privates:{clone:function(e){var t=this.getInitialConfig();return t=e?Ext.apply({},e,t):t,new this.self(t)},statics:{all:{}}}},function(){var i=this,e=Ext.Factory,n=e.dataIdentifier;e.dataIdentifier=function(e){var t=Ext.isString(e)?e:e&&e.id;return t&&i.all[t]||n(e)}}),Ext.define("Ext.data.identifier.Sequential",{extend:Ext.data.identifier.Generator,alias:"data.identifier.sequential",config:{increment:1,prefix:null,seed:1},generate:function(){var e=this._seed,t=this._prefix;return this._seed+=this._increment,null!==t?t+e:e}}),Ext.define("Ext.data.Model",{alternateClassName:"Ext.data.Record",isEntity:!0,isModel:!0,validIdRe:null,erasing:!1,loadOperation:null,loadCount:0,observableType:"record",crudState:"R",crudStateWas:null,constructor:function(e,t,i){var n,r,s,o,a,l,c,u=this,d=u.self,h=d.identifier,f=Ext.data.Model,g=f.identifier,p=u.idField.name;u.data=u.data=e=e||{},u.internalId=o=g.generate();var m=e[p];if(t&&!t.isSession&&Ext.raise('Bad Model constructor argument 2 - "session" is not a Session'),(n=e)instanceof Array)for(u.data=e={},c=u.getFields(),a=Math.min(c.length,n.length),l=0;l<a;++l)e[c[l].name]=n[l];(s=d.initializeFn)||(d.initializeFn=s=f.makeInitializeFn(d)),s.$nullFn||d.initializeFn(u),u.isSummaryModel||((u.id=r=e[p])||0===r||(m&&Ext.raise('The model ID configured in data ("'+m+'") has been rejected by the '+u.fieldsMap[p].type+" field converter for the "+p+" field"),r=t?(h=t.getIdentifier(d)).generate():g===h?o:h.generate(),e[p]=u.id=r,u.phantom=!0,u.crudState="C"),t&&!i&&t.add(u),u.phantom&&(u.crudStateWas="C")),u.init&&Ext.isFunction(u.init)&&u.init()},editing:!1,dirty:!1,session:null,dropped:!1,erased:!1,clientIdProperty:null,evented:!1,phantom:!1,idProperty:"id",manyToMany:null,identifier:null,previousValues:void 0,proxy:void 0,schema:"default",summary:null,versionProperty:null,generation:1,validationSeparator:null,convertOnSet:!0,beginEdit:function(){var e=this.modified,t=this.previousValues;this.editing||(this.editing=!0,this.editMemento={dirty:this.dirty,data:Ext.apply({},this.data),generation:this.generation,modified:e&&Ext.apply({},e),previousValues:t&&Ext.apply({},t)})},calculateSummary:function(e){var t,i,n,r,s,o,a=this.getFields(),l=a.length,c=e.length;for(t=0;t<l;++t)(n=(o=a[t]).getSummary())&&(i=i||{},s=o.name,r=o.summaryField||s,i[s]=n.calculate(e,r,"data",0,c));i&&this.set(i,this._commitOptions)},cancelEdit:function(){var e=this.editMemento,t=this.validation;e&&(this.editing=!1,Ext.apply(this,e),this.editMemento=null,t&&t.syncGeneration!==this.generation&&(t.syncGeneration=0))},endEdit:function(e,t){var i=this.editMemento;i&&(this.editing=!1,this.editMemento=null,this.previousValues=i.previousValues,e||(t=t||this.getModifiedFieldNames(i.data),(this.dirty||t&&t.length)&&this.callJoined("afterEdit",[t])))},getField:function(e){return this.self.getField(e)},getFields:function(){return this.self.getFields()},getFieldsMap:function(){return this.fieldsMap},getIdProperty:function(){return this.idProperty},getId:function(){return this.id},getObservableId:function(){return this.internalId},setId:function(e,t){this.set(this.idProperty,e,t)},getPrevious:function(e){var t=this.previousValues;return t&&t[e]},isModified:function(e){var t=this.modified;return!(!t||!t.hasOwnProperty(e))},getModified:function(e){var t;return this.isModified(e)&&(t=this.modified[e]),t},get:function(e){return this.data[e]},_singleProp:{},_rejectOptions:{convert:!1,silent:!0},set:function(e,t,i){var n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v,E=this,b=E.self,C=E.data,S=E.modified,w=E.previousValues,T=E.session,P=Ext.isString(e),I=P?i:t,A=I?!1!==I.convert:E.convertOnSet,k=E.fieldsMap,D=I&&I.silent,R=I&&I.commit,M=!(I&&!1===I.refs)&&T,F=!(I&&!1===I.dirty&&!R),L=null,O=0,B=E.associations;for(P?(y=E._singleProp)[e]=t:y=e,(p=b.rankedFields)||(p=b.rankFields()),f=p.length;;){for(a in y)if(x=y[a],n=C[a],c=E,m=(r=k[a])?(A&&r.convert&&(x=r.convert(x,E)),(c=r).reference):null,!c.isEqual(n,x)){for(C[a]=x,(L=L||[]).push(a),(w||(E.previousValues=w={}))[a]=n,m&&m.cls&&(M&&T.updateReference(E,r,x,n),m.onValueChange(E,T,x,n)),h=(d=r&&r.dependents)&&d.length;0<h--;)(u=d[h]).dirty=!0,O=O?Math.min(O,u.rank):u.rank;r&&!r.persist||(S&&S.hasOwnProperty(a)?F&&!c.isEqual(S[a],x)||(delete S[a],E.dirty=-1):F&&(S||(E.modified=S={}),E.dirty=!0,S[a]=n)),a===E.idField.name&&(s=!0,l=n,g=x)}if(!O)break;for((r=p[O-1]).dirty=!1,P?delete y[e]:(y=E._singleProp,P=!0),y[e=r.name]=C[e],A=!0;O<f&&!p[O].dirty;++O);O<f?++O:O=0}if(E.dirty<0)for(o in E.dirty=!1,S)if(S.hasOwnProperty(o)){E.dirty=!0;break}if(P&&delete y[e],++E.generation,s&&(E.id=g,E.onIdChanged(g,l),E.callJoined("onIdChanged",[l,g]),B))for(v in B)B[v].onIdChanged(E,l,g);return R?E.commit(D,L):D||E.editing||!L||E.callJoined("afterEdit",[L]),L},reject:function(e){var t=this.modified;this.erased&&Ext.raise("Cannot reject once a record has been erased."),t&&this.set(t,this._rejectOptions),this.dropped=!1,this.clearState(),e||this.callJoined("afterReject")},commit:function(e,t){var i,n=this.versionProperty,r=this.data;this.clearState(),!n||this.phantom||isNaN(r[n])||++r[n],this.phantom=!1,this.dropped&&(this.erased=i=!0),e||(i?this.callJoined("afterErase"):this.callJoined("afterCommit",[t]))},clearState:function(){this.dirty=this.editing=!1,this.editMemento=this.modified=null},drop:function(e){var t,i=this.associations,n=this.session;if(!this.erased&&!this.dropped){if(this.dropped=!0,i&&!1!==e)for(t in i)i[t].onDrop(this,n);this.callJoined("afterDrop"),this.phantom&&this.setErased()}},join:function(e){var t=this.joined;t?t.length?Ext.Array.include(t,e):t[0]=e:t=this.joined=[e],e.isStore&&!this.store&&(this.store=e)},unjoin:function(e){var t,i=this.joined,n=i&&i.length,r=this.store;if(e===this.session)this.session=null;else if(1===n&&i[0]===e?i.length=0:n&&Ext.Array.remove(i,e),r===e){if(r=null,i)for(t=0,n=i.length;t<n;++t)if((e=i[t]).isStore){r=e;break}this.store=r}},clone:function(e){var t=this.modified,i=this.copy(this.id,e);return t&&(i.modified=Ext.apply({},t)),i.dirty=this.dirty,i.dropped=this.dropped,i.phantom=this.phantom,i},copy:function(e,t){var i=Ext.apply({},this.data),n=this.idProperty,r=this.self;return e||0===e?i[n]=e:null===e&&delete i[n],new r(i,t)},getProxy:function(){return this.self.getProxy()},getValidation:function(e){var t=this.validation;return t||(this.validation=t=new Ext.data.Validation,t.attach(this)),(!0===e||!1!==e&&t.syncGeneration!==this.generation)&&t.refresh(e),t},validate:function(){return(new Ext.data.ErrorCollection).init(this)},isValid:function(){return this.getValidation().isValid()},toUrl:function(){var e=this.$className.split(".");return e[e.length-1].toLowerCase()+"/"+this.getId()},erase:function(e){return this.erasing=!0,this.drop(),this.erasing=!1,this.save(e)},setErased:function(){this.erased=!0,this.callJoined("afterErase")},getChanges:function(){return this.getData(this._getChangesOptions)},getCriticalFields:function(){var e=this.self,t=e.criticalFields;return t||(e.rankFields(),t=e.criticalFields),t},getAssociatedData:function(e,t){var i,n,r,s,o,a,l,c,u,d,h,f=this.associations;for(c in e=e||{},this.$gathering=1,t=t&&Ext.apply({},t),f)if((r=f[c].getAssociatedItem(this))&&!r.$gathering){if(r.isStore){for(r.$gathering=1,a=(s=r.getData().items).length,o=[],n=0;n<a;++n)i=!(l=s[n]).$gathering,l.$gathering=1,u=t?(void 0===(h=t.associated)?(t.associated=i,d=!0):i||(d=!(t.associated=!1)),t):i?this._getAssociatedOptions:this._getNotAssociatedOptions,o.push(l.getData(u)),d&&(t.associated=h,d=!1),delete l.$gathering;delete r.$gathering}else u=t||this._getAssociatedOptions,t&&void 0===t.associated&&(u.associated=!0),o=r.getData(u);e[c]=o}return delete this.$gathering,e},getData:function(e){var t,i,n,r,s,o=this,a={},l=!0===e?o._getAssociatedOptions:e||a,c=o.data,u=l.associated,d=l.changes,h=d&&l.critical,f=d?o.modified:c,g=o.fieldsMap,p=l.persist,m=l.serialize;if(f)for(r in f){if(s=c[r],i=g[r]){if(p&&!i.persist)continue;m&&i.serialize&&(s=i.serialize(s,o))}a[r]=s}if(h)for(n=(t=o.self.criticalFields||o.getCriticalFields()).length;0<n--;)(r=(i=t[n]).name)in a||(s=c[r],m&&i.serialize&&(s=i.serialize(s,o)),a[r]=s);return u&&("object"==typeof u?o.getNestedData(l,a):o.getAssociatedData(a,l)),a},getNestedData:function(e,t){var i,n,r,s,o,a,l,c,u,d=this.associations,h=e.associated;for(c in t=t||{},h)if(l=d[c],!0===(u=h[c])?delete e.associated:e.associated=u,n=l.getAssociatedItem(this)){if(n.isStore)for(o=(r=n.getData().items).length,s=[],i=0;i<o;++i)a=r[i],s.push(a.getData(e));else s=n.getData(e);t[c]=s}return e.associated=h,t},getTransientFields:function(){var e=this.self,t=e.transientFields;return t||(e.rankFields(),t=e.transientFields),t},isLoading:function(){return!!this.loadOperation},abort:function(){var e=this.loadOperation;e&&e.abort()},load:function(a){a=Ext.apply({},a);var l=this,c=a.scope||l,e=l.getProxy(),u=a.callback,t=l.loadOperation,r=l.getId();if(t)return(t.extraCalls||(t.extraCalls=[])).push(a),t;var s=!0;return l.phantom&&(s=!1),a.id=r,a.recordCreator=function(e,t,i){var n=l.session;return i&&(i.recordCreator=n?n.recordCreator:null),l.set(e,l._commitOptions),s&&l.getId()!==r&&Ext.raise("Invalid record id returned for "+r+"@"+l.entityName),l},a.internalCallback=function(e){var t,i,n=e.wasSuccessful()&&0<e.getRecords().length,r=l.loadOperation.extraCalls,s=[l,e],o=[l,e,n];if(l.loadOperation=null,++l.loadCount,n?Ext.callback(a.success,c,s):Ext.callback(a.failure,c,s),Ext.callback(u,c,o),r)for(t=0,i=r.length;t<i;++t)a=r[t],n?Ext.callback(a.success,c,s):Ext.callback(a.failure,c,s),Ext.callback(a.callback,c,o);l.callJoined("afterLoad")},delete a.callback,l.loadOperation=t=e.createOperation("read",a),t.execute(),t},mergeData:function(e){this.dirty||this.set(e,this._commitOptions)},save:function(n){n=Ext.apply({},n);var e,r=this,t=r.phantom,i=r.dropped,s=i?"destroy":t?"create":"update",o=n.scope||r,a=n.callback,l=r.getProxy();return n.records=[r],n.internalCallback=function(e){var t=[r,e],i=e.wasSuccessful();i?Ext.callback(n.success,o,t):Ext.callback(n.failure,o,t),t.push(i),Ext.callback(a,o,t)},delete n.callback,e=l.createOperation(s,n),i&&t?(e.setResultSet(Ext.data.reader.Reader.prototype.nullResultSet),r.setErased(),e.setSuccessful(!0)):e.execute(),e},statics:{defaultProxy:"memory"},inheritableStatics:{_associatedReadOptions:{recordsOnly:!0,asRoot:!0},loadData:function(e,t){return e?this.getProxy().getReader().readRecords([e],t?{recordCreator:t.recordCreator}:void 0,this._associatedReadOptions)[0]:new this(e,t)},getSummaryModel:function(){var e=this.prototype,t=this.summaryModel;return t||((t=Ext.define(null,{extend:this,fields:e.summaryFields||[],isSummaryModel:!0})).isSummaryModel=!0,this.summaryModel=e.summaryModel=t),t||null},addFields:function(e){this.replaceFields(e)},replaceFields:function(e,t){var i,n,r,s,o,a,l,c=this,u=c.prototype,d=Ext.data.field.Field,h=c.fields,f=c.fieldsMap,g=c.fieldOrdinals;if(!0===t)h.length=0,c.fieldsMap=f={},c.fieldOrdinals=g={},l=!0;else if(t){for(n=t.length;0<n--;)(o=t[n])in g&&(delete g[o],delete f[o]);for(n=0,s=h.length;n<s;++n)(o=(i=h[n]).name)in g?g[o]=n:(h.splice(n,1),--n,--s)}for(n=0,s=e?e.length:0;n<s;n++)(o=(i=e[n]).name)in g||(g[o]=a=h.length,h.push(i=d.create(i)),(f[o]=i).ordinal=a,i.definedBy=i.owner=this);if(!l)for(n=0,s=h.length;n<s;++n)h[n].rank=null;c.idField=u.idField=r=f[u.idProperty],r&&(r.allowNull=r.critical=r.identifier=!0,r.defaultValue=null),c.initializeFn=c.rankedFields=c.transientFields=c.criticalFields=null},removeFields:function(e){this.replaceFields(null,e)},getIdFromData:function(e){var t=this.idField;return t.calculated?new this(e).id:e[t.name]},createWithId:function(e,t,i){var n=t;return!e&&0!==e||(n={},t&&Ext.apply(n,t),n[this.idField.name]=e),new this(n,i)},getFields:function(){return this.fields},getFieldsMap:function(){return this.fieldsMap},getField:function(e){return this.fieldsMap[e]||null},getProxy:function(){var e,t=this.proxy,i=this.defaultProxy;return t||(!(t=this.proxyConfig)&&i&&(t=i),t&&t.isProxy||("string"==typeof t&&(t={type:t}),e=Ext.merge(this.schema.constructProxy(this),t),t=t&&t.type&&!1===t.schema?t:e),t=this.setProxy(t)),t},setProxy:function(e){var t;return e&&(e.isProxy?(t=e.getModel())&&t!==this&&(e=e.clone()):e=Ext.Factory.proxy(e),e.setModel(this)),this.prototype.proxy=this.proxy=e},load:function(e,t,i){var n,r={};return i&&(n=i.peekRecord(this,e)),n||(r[this.prototype.idProperty]=e,n=new this(r,i)),n.load(t),n}},deprecated:{5:{methods:{hasId:null,markDirty:null,setDirty:null,eachStore:function(e,t){var i,n=this.stores,r=n.length;for(i=0;i<r;++i)e.call(t,n[i])},join:function(e){var t=this.stores,i=this.joined;i?i.push(e):i=this.joined=[e],e.isStore&&(this.store=this.store||e,(t=t||(this.stores=[])).push(e))},unjoin:function(e){var t=this.stores,i=this.joined;1===i.length?i.length=0:Ext.Array.remove(i,e),e.isStore&&(Ext.Array.remove(t,e),this.store=t[0]||null)}},properties:{persistenceProperty:null},inheritableStatics:{methods:{setFields:null}}}},privates:{_commitOptions:{commit:!0},_getChangesOptions:{changes:!0},_getAssociatedOptions:{associated:!0},_getNotAssociatedOptions:{associated:!1},_metaProperties:{dirty:"isDirty",phantom:"isPhantom",valid:"isValid"},copyFrom:function(e){var t,i,n,r,s=this.fields,o=s.length,a=[],l=this.idProperty,c=0;if(e){for(t=this.data,i=e.data;c<o;c++)(n=s[c].name)!==l&&(void 0===(r=i[n])||this.isEqual(t[n],r)||(t[n]=r,a.push(n)));this.phantom&&!e.phantom&&(this.beginEdit(),this.setId(e.getId()),this.endEdit(!0),this.commit(!0))}return a},callJoined:function(e,t){var i,n,r,s,o=this.joined,a=this.session,l=this.dropped?"D":this.phantom?"C":this.dirty?"U":"R";if(this.crudState=l,(o||a)&&(t?t.unshift(this):t=[this],(r=a&&a[e])&&r.apply(a,t),o))for(i=0,n=o.length;i<n;++i)(s=o[i])&&(r=s[e])&&r.apply(s,t);this.crudStateWas=l},hasPendingLoad:function(){return this.isLoading()},interpret:function(e){var t=this._metaProperties[e];return(t=t||(t=this.associations)&&t[e]&&t[e].getterName)?this[t]():this.data[e]},isDirty:function(){return this.dirty},isPhantom:function(){return this.phantom},onAssociatedRecordSet:function(e,t){this.callJoined("afterAssociatedRecordSet",[e,t])},onIdChanged:Ext.privateFn,setSession:function(e){e&&(this.session&&Ext.raise("This model already belongs to a session."),this.id||Ext.raise("The model must have an id to participate in a session.")),(this.session=e)&&e.add(this)},getModifiedFieldNames:function(e){var t,i=this.data,n=[],r=e||this.editMemento.data;for(t in i)i.hasOwnProperty(t)&&(this.isEqual(i[t],r[t],t)||n.push(t));return n},isEqual:function(e,t,i){var n;return i&&(n=i.isField?i:this.fieldsMap[i])?n.isEqual(e,t):e instanceof Date&&t instanceof Date?e.getTime()===t.getTime():e===t},statics:{EDIT:"edit",REJECT:"reject",COMMIT:"commit",rankFields:function(){var e,t,i,n=this.prototype,r=this.fields,s=r.length,o=[],a=[],l=[];for(this.rankedFields=n.rankedFields=o,this.criticalFields=n.criticalFields=a,this.transientFields=n.transientFields=l,i=0;i<s;++i)(t=r[i]).critical&&a.push(t),t.persist||l.push(t),t.evil?(e=e||[]).push(t):t.depends||(o.push(t),t.rank=o.length);for(i=0;i<s;++i)(t=r[i]).rank||t.evil||this.topoAdd(t);if(e)for(i=0,s=e.length;i<s;++i)o.push(t=e[i]),t.rank=o.length;return this.topoStack=null,o},topoAdd:function(e){var t,i,n=e.depends,r=n?n.length:0,s=this.rankedFields,o=this.topoStack||(this.topoStack=[]);for(o.push(e.name),0===e.rank&&Ext.raise(this.$className+" has circular field dependencies: "+o.join(" --\\x3e ")),o.length&&e.evil&&Ext.raise(this.$className+": Field "+o[o.length-1]+" cannot depend on depends-less field "+e.name),t=e.rank=0;t<r;++t)(i=this.fieldsMap[n[t]])||Ext.raise(this.$className+": Field "+e.name+" depends on undefined field "+n[t]),(i.dependents||(i.dependents=[])).push(e),i.rank||this.topoAdd(i);s.push(e),e.rank=s.length,o.pop()},initFields:function(e,t,i){var n,r,s,o,a,l,c,u,d,h,f,g=Ext.data.field.Field,p=e.fields,m=[],x={},y={},v=i.fields,E=e.versionProperty||i.versionProperty,b=t.idProperty;if(t.fields=i.fields=m,t.fieldOrdinals=i.fieldOrdinals=x,t.fieldsMap=i.fieldsMap=y,t.references=i.references=[],v)for(s=0,o=v.length;s<o;++s)m[s]=r=Ext.Object.chain(v[s]),r.dependents=null,r.owner=t,x[a=r.name]=s,(y[a]=r).rank=null,r.generated&&(d=(u=r).name);if(delete e.fields,p)for(s=0,o=p.length;s<o;++s)(c=(r=p[s]).reference)&&"string"!=typeof c&&(c=Ext.merge({},c)),r.$reference=c,void 0===(l=x[a=(r=g.create(p[s])).name])&&(x[a]=l=m.length),y[a]=r,(m[l]=r).definedBy=r.owner=t,r.ordinal=l,a===b&&(f=r),a===d&&(h=!0);if(n=y[b]){if(f&&!h&&u&&u.generated)for(Ext.Array.remove(m,u),delete y[d],delete x[d],y[b]=f,s=0,o=m.length;s<o;++s)r=m[s],m.ordinal=s,x[r.name]=s}else l=u&&u.generated?u.ordinal:m.length,delete y[d],delete x[d],n=new g(b),m[l]=n,x[b]=l,(y[b]=n).definedBy=t,n.ordinal=l,n.generated=!0;n.allowNull=n.critical=n.identifier=!0,n.defaultValue=null,t.idField=i.idField=n,E&&((r=y[E])||(l=m.length,r=new g({name:E,type:"int"}),m[l]=r,x[E]=l,(y[E]=r).definedBy=t,r.ordinal=l,r.generated=!0),r.defaultValue=1,r.critical=!0)},initSummaries:function(e,t,i){var n,r,s,o,a,l,c,u,d,h,f,g=e.summary,p=i.fields,m=i.summaryFields;if(m)for(u=[],d={},s=0,l=m.length;s<l;++s)h=m[s],u.push(h),d[h.name]=s;for(s=0,l=p.length;s<l;++s)(n=p[s]).summary&&n.definedBy===t&&((a=a||{})[n.name]=n.summary);if(a&&(g=Ext.apply(a,g)),g)for(c in delete e.summary,u=u||[],d=d||{},g)"function"!=(f=typeof(h=g[c]))&&"string"!=f||(h={summary:h}),o=d[c],(n=(h=Ext.apply({name:c},h)).field)&&(delete h.field,h.summaryField=n),r=h.summaryField,(n=i.fieldsMap[r||c])&&!h.type&&(h.type=n.type),void 0===o&&(o=u.length,d[c]=o),u[o]=h;u&&(i.summaryFields=u)},initValidators:function(e,t,i){var n,r,s,o,a,l,c,u,d,h,f=i.validators;if(f)for(r in n={},f)n[r]=Ext.Array.clone(f[r]);if(o=e.validators||e.validations,e.validations&&(delete e.validations,Ext.log.warn((t.$className||"Ext.data.Model")+": validations has been deprecated. Please use validators instead.")),o){if(delete e.validators,n=n||{},Ext.isArray(o)){for(s={},a=0,l=o.length;a<l;++a)s[u=(h=o[a]).field]||(s[u]=[]),h=h.fn||h,s[u].push(h);o=s}for(u in o)c=o[u],Ext.isArray(c)||(c=[c]),(d=n[u])?Ext.Array.push(d,c):n[u]=c}if(n)for(u in n)(r=t.getField(u))&&r.setModelValidators(n[u]);t.validators=i.validators=n},initAssociations:function(e,t,i){var n,r,s,o,a=t.associations,l=t.belongsTo,c=t.hasMany,u=t.hasOne,d=t.manyToMany;if(delete t.associations,delete t.belongsTo,delete t.hasMany,delete t.hasOne,delete t.manyToMany,d&&e.addMatrices(i,d),a)for(n=0,r=(a=Ext.isArray(a)?a:[a]).length;n<r;++n)switch(s=a[n],delete(o=Ext.apply({},s)).type,s.type){case"belongsTo":e.addBelongsTo(i,o);break;case"hasMany":e.addHasMany(i,o);break;case"hasOne":e.addHasOne(i,o);break;default:Ext.raise('Invalid association type: "'+s.type+'"')}if(l)for(n=0,r=(l=Ext.isArray(l)?l:[l]).length;n<r;++n)e.addBelongsTo(i,l[n]);if(c)for(n=0,r=(c=Ext.isArray(c)?c:[c]).length;n<r;++n)e.addHasMany(i,c[n]);if(u)for(n=0,r=(u=Ext.isArray(u)?u:[u]).length;n<r;++n)e.addHasOne(i,u[n]);e.afterKeylessAssociations(i)},initIdentifier:function(e,t,i){var n,r=e.identifier||e.idgen,s=i.identifier||t.schema._defaultIdentifier;e.idgen&&Ext.log.warn("Ext.data.Model: idgen has been deprecated. Please use identifier instead."),r?(delete e.identifier,delete e.idgen,r=Ext.Factory.dataIdentifier(r)):s&&(r=s.clone&&!s.getId()?s.clone():s.isGenerator?s:Ext.Factory.dataIdentifier(s)),t.identifier=i.identifier=r,r||(n=(n=t.entityName)||Ext.id(null,"extModel"),t.identifier=Ext.Factory.dataIdentifier({type:"sequential",prefix:n+"-"}))},findValidator:function(e,t,i){var n,r,s,o=i.type||i,a=e[t];if(a)for(r=0,n=a.length;r<n;++r)if((s=a[r]).type===o)return s;return null},makeInitializeFn:function(e){var t,i,n,r,s,o,a,l,c,u,d=["var "],h=["\\nreturn function (e) {\\n    var data = e.data, v;\\n"],f=0;for((o=e.rankedFields)||(o=e.rankFields()),c=0,u=o.length;c<u;++c)a="f"+c,n=(s=o[c]).convert,c&&d.push(",  \\n    "),d.push(a," = $fields["+c+"]"),d.push("  /*  ",s.name,"  */"),((l=void 0!==s.defaultValue)||n)&&(r='data["'+s.name+'"]',++f,t=i="",s.cloneDefaultValue&&(t="Ext.clone(",i=")"),h.push("\\n"),n&&l?h.push("    v = ",r,";\\n    if (v !== undefined) {\\n        v = ",a,".convert(v, e);\\n    }\\n    if (v === undefined) {\\n        v = ",t,a,".defaultValue",i,";\\n    }\\n    ",r," = v;"):n?h.push("    v = ",a,".convert(",r,",e);\\n    if (v !== undefined) {\\n        ",r," = v;\\n    }\\n"):l&&h.push("    if (",r," === undefined) {\\n        ",r," = ",t,a,".defaultValue",i,";\\n    }\\n"));return f?(d.push(";\\n"),d.push.apply(d,h),d.push("}"),d=d.join(""),new Function("$fields","Ext",d)(o,Ext)):Ext.emptyFn}}}},function(){var l,c=this,e=c.prototype,u=Ext.data.schema.Schema;c.proxyConfig=e.proxy,delete e.proxy,c.fields=[],c.fieldsMap=e.fieldsMap={},c.schema=e.schema=u.get(e.schema),e.idField=new Ext.data.field.Field(e.idProperty),c.identifier=new Ext.data.identifier.Sequential,c.onExtended(function(e,t){var i,n,r,s=e.prototype,o=t.schema,a=s.superclass.self;e.idProperty=t.idProperty||s.idProperty,o?(delete t.schema,i=u.get(o)):(i=s.schema)||(i=l=l||u.get("default")),e.rankFields=c.rankFields,e.topoAdd=c.topoAdd,s.schema=e.schema=i,(n=t.entityName)||(s.entityName=n=i.getEntityName(e),n||(t.associations&&Ext.raise('Anonymous entities cannot specify "associations"'),t.belongsTo&&Ext.raise('Anonymous entities cannot specify "belongsTo"'),t.hasMany&&Ext.raise('Anonymous entities cannot specify "hasMany"'),t.hasOne&&Ext.raise('Anonymous entities cannot specify "hasOne"'),t.matrices&&Ext.raise('Anonymous entities cannot specify "manyToMany"'))),e.entityName=n,e.fieldExtractors={},c.initIdentifier(t,e,s),c.initFields(t,e,s),c.initValidators(t,e,s),t.isSummaryModel||c.initSummaries(t,e,s),e.fields.items=e.fields,n&&(i.addEntity(e),c.initAssociations(i,t,e)),(r=t.proxy)?delete t.proxy:a!==c&&(r=a.proxyConfig||a.proxy),e.proxyConfig=r})}),Ext.define("Ext.data.ResultSet",{isResultSet:!0,$configPrefixed:!1,config:{loaded:!0,count:null,total:null,remoteTotal:null,success:!1,records:null,message:null,metadata:null,groupData:null,summaryData:null},constructor:function(e){this.initConfig(e)},getCount:function(){var e,t=this.callParent();return t||(e=this.getRecords())&&(t=e.length),t}}),Ext.define("Ext.data.reader.Reader",{alternateClassName:["Ext.data.Reader","Ext.data.DataReader"],mixins:[Ext.mixin.Observable,Ext.mixin.Factoryable],alias:"reader.base",factoryConfig:{defaultType:null},config:{groupRootProperty:"",implicitIncludes:!0,keepRawData:null,messageProperty:"",model:null,proxy:null,readRecordsOnFailure:!0,rootProperty:"",successProperty:"success",summaryRootProperty:"",totalProperty:"total",transform:null,typeProperty:""},isReader:!0,constructor:function(e){e&&e.hasOwnProperty("root")&&((e=Ext.apply({},e)).rootProperty=e.root,delete e.root,Ext.log.error('Ext.data.reader.Reader: Using the deprecated "root" configuration. Use "rootProperty" instead.')),this.duringInit=1,this.mixins.observable.constructor.call(this,e),--this.duringInit,this.buildExtractors()},forceBuildExtractors:function(){this.duringInit||this.buildExtractors(!0)},updateGroupRootProperty:function(){this.forceBuildExtractors()},updateMessageProperty:function(){this.forceBuildExtractors()},applyModel:function(e){return Ext.data.schema.Schema.lookupEntity(e)},updateSuccessProperty:function(){this.forceBuildExtractors()},updateSummaryRootProperty:function(){this.forceBuildExtractors()},updateTotalProperty:function(){this.forceBuildExtractors()},applyTransform:function(e){return e?(Ext.isFunction(e)?e={fn:e}:e.charAt&&(e={fn:this[e]}),e.fn.bind(e.scope||this)):e},read:function(e,t){var i,n,r;if(e)if(r=e.responseText,e.responseType||r){if((n=this.getResponseData(e))&&n.__$isError)return new Ext.data.ResultSet({total:0,count:0,records:[],success:!1,message:n.msg});i=this.readRecords(n,t)}else""!==r&&(i=this.readRecords(e,t));return i||this.nullResultSet},getNullResultSet:function(){return this.nullResultSet},createReadError:function(e){return{__$isError:!0,msg:e}},readRecords:function(e,t,i){var n,r,s,o,a,l,c,u,d,h,f,g=this,p=i&&i.recordsOnly,m=i&&i.asRoot,x=null,y=null;return(h=g.getMeta?g.getMeta(e):e.metaData)&&g.onMetaChange(h),(d=g.getTransform())&&(e=d(e)),g.buildExtractors(),g.getKeepRawData()&&(g.rawData=e),g.hasListeners.rawdata&&g.fireEventArgs("rawdata",[e]),e=g.getData(e),n=!0,r=0,s=[],g.getSuccessProperty()&&(!1!==(c=g.getSuccess(e))&&"false"!==c||(n=!1)),g.getMessageProperty()&&(u=g.getMessage(e)),(n||g.getReadRecordsOnFailure())&&((o=m||Ext.isArray(e)?e:g.getRoot(e))&&(l=o.length),g.getTotalProperty()&&(c=parseInt(g.getTotal(e),10),isNaN(c)||(a=l=c)),o&&(r=(s=g.extractData(o,t)).length),g.getGroupRootProperty()&&(o=g.getGroupRoot(e))&&(f={includes:!1,model:g.getModel().getSummaryModel()},x=g.extractData(o,f)||null),g.getSummaryRootProperty()&&(o=g.getSummaryRoot(e))&&(f=f||{includes:!1,model:g.getModel().getSummaryModel()},y=(y=g.extractData(o,f)||null)&&y[0])),p?s:new Ext.data.ResultSet({total:l||r,remoteTotal:a,metadata:h,count:r,records:s,success:n,message:u,groupData:x,summaryData:y})},extractData:function(e,t){var i,n,r,s,o,a=t&&t.model?Ext.data.schema.Schema.lookupEntity(t.model):this.getModel(),l=a.schema,c=t&&"includes"in t?t.includes:l.hasAssociations(a)&&this.getImplicitIncludes(),u=this.getFieldExtractorInfo(a),d=e.length,h=new Array(d),f=this.getTypeProperty();for(!d&&Ext.isObject(e)&&(e=[e],d=1),o=0;o<d;o++)(s=e[o]).isModel||(n=s,(s=f&&(r=this.getChildType(l,n,f))?(i=r.getProxy().getReader()).extractRecord(n,t,r,l.hasAssociations(r)&&i.getImplicitIncludes(),i.getFieldExtractorInfo(r)):this.extractRecord(n,t,a,c,u)).isModel&&s.isNode&&(s.raw=n)),s.onLoad&&s.onLoad(),h[o]=s;return h},getChildType:function(e,t,i){var n;switch(typeof i){case"string":return e.getEntity(t[i]);case"object":return n=i.namespace,e.getEntity((n?n+".":"")+t[i.name]);case"function":return e.getEntity(i(t))}},extractRecordData:function(e,t){var i=t&&t.model?Ext.data.schema.Schema.lookupEntity(t.model):this.getModel(),n=this.getFieldExtractorInfo(i);return this.extractRecord(e,t,i,!1,n)},extractRecord:function(e,t,i,n,r){var s,o,a=t&&t.recordCreator||this.defaultRecordCreator;return s=this.extractModelData(e,r),o=a.call(this,s,i||this.getModel(),t),n&&o.isModel&&this.readAssociated(o,e,t),o},getFieldExtractorInfo:function(e){var t,i,n=e.fieldExtractors;if(n)return void 0===(i=n[t=this.$className])&&(n[t]=i=this.buildFieldExtractors(e)),i},buildFieldExtractors:function(e){var t,i,n,r,s=e.getFields(),o=s.length,a=[],l=[],c=null,u=0;for(n=0;n<o;++n)t=s[n],(r=this.createFieldAccessor(t))&&(i=t.name,a.push("val = extractors["+u+"](raw, self); if (val !== undefined) { data['"+i+"'] = val; }"),l.push(r),++u);return a.length&&(c={extractors:l,fn:new Function("raw","data","extractors","self","var val;"+a.join("\\n"))}),c},defaultRecordCreator:function(e,t){return new t(e)},defaultRecordCreatorFromServer:function(e,t){var i=new t(e);return i.phantom=!1,i},getModelData:function(e){return{}},extractModelData:function(e,t){var i=this.getModelData(e);return t&&(0,t.fn)(e,i,t.extractors,this),i},readAssociated:function(e,t,i){var n,r,s=e.associations;for(n in s)s.hasOwnProperty(n)&&(r=s[n]).cls&&r.read(e,t,this,i)},getData:Ext.identityFn,getRoot:Ext.identityFn,getResponseData:function(e){Ext.raise("getResponseData must be implemented in the Ext.data.reader.Reader subclass")},onMetaChange:function(e){var t,i,n,r,s=e.fields;(this.metaData=e).root&&this.setRootProperty(e.root),e.totalProperty&&this.setTotalProperty(e.totalProperty),e.successProperty&&this.setSuccessProperty(e.successProperty),e.messageProperty&&this.setMessageProperty(e.messageProperty),n=e.clientIdProperty,s?(i=Ext.define(null,{extend:"Ext.data.Model",fields:s,clientIdProperty:n}),this.setModel(i),(r=this.getProxy())&&r.setModel(i)):n&&(t=this.getModel())&&(t.self.prototype.clientIdProperty=n)},buildExtractors:function(e){var t,i,n,r=this;if(e||!r.hasExtractors)return t=r.getTotalProperty(),i=r.getSuccessProperty(),n=r.getMessageProperty(),t&&(r.getTotal=r.getAccessor(t)),i&&(r.getSuccess=r.getAccessor(i)),n&&(r.getMessage=r.getAccessor(n)),r.hasExtractors=!0},getAccessor:function(e){var t,i,n=this.extractorCache;return"string"==typeof e?((i=this.getAccessorKey(e))&&(t=n.get(i)),t||(t=this.createAccessor(e),i&&n.add(i,t))):t=this.createAccessor(e),t},getAccessorKey:function(e){var t=this.$className;return t?t+e:""},createAccessor:Ext.emptyFn,createFieldAccessor:Ext.emptyFn,destroy:function(){this.model=this.getTotal=this.getSuccess=this.getMessage=this.rawData=null,this.onMetaChange=null,this.transform=null,this.callParent()},privates:{copyFrom:function(e){e.buildExtractors(),this.getTotal=e.getTotal,this.getSuccess=e.getSuccess,this.getMessage=e.getMessage,++this.duringInit,this.setConfig(e.getConfig()),--this.duringInit,this.hasExtractors=!0}}},function(e){var t=e.prototype;Ext.apply(t,{nullResultSet:new Ext.data.ResultSet({total:0,count:0,records:[],success:!0,message:""})}),t.extractorCache=new Ext.util.LruCache}),Ext.define("Ext.data.writer.Writer",{alias:"writer.base",alternateClassName:["Ext.data.DataWriter","Ext.data.Writer"],mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:null},isWriter:!0,config:{clientIdProperty:null,allDataOptions:{persist:!0},partialDataOptions:{changes:!0,critical:!0},writeAllFields:!1,dateFormat:null,nameProperty:"name",writeRecordId:!0,transform:null},constructor:function(e){this.initConfig(e)},applyTransform:function(e){return e?(Ext.isFunction(e)&&(e={fn:e}),e.fn.bind(e.scope||this)):e},write:function(e){var t,i=e.getOperation(),n=i.getRecords()||[],r=n.length,s=[];for(t=0;t<r;t++)s.push(this.getRecordData(n[t],i));return this.writeRecords(e,s)},writeRecords:Ext.emptyFn,getRecordData:function(e,t){var i,n,r,s,o,a,l,c,u=this.getNameProperty(),d="name"!==u,h=e.self.idField,f=h?h[u]||h.name:"id",g=e.id,p=this.getWriteAllFields();if(h&&h.serialize&&(g=h.serialize(g)),!p&&t&&t.isDestroyOperation)(i={})[f]=g;else for(f in n=this.getDateFormat(),s=(r=e.phantom)||p?this.getAllDataOptions():this.getPartialDataOptions(),o=r&&this.getClientIdProperty(),a=e.getFieldsMap(),s.serialize=!1,l=e.getData(s),i=d?{}:l,o?(i[o]=g,delete l[f]):this.getWriteRecordId()||delete l[f],l)g=l[f],(c=a[f])?(c.isDateField&&n&&Ext.isDate(g)?g=Ext.Date.format(g,n):c.serialize&&(g=c.serialize(g,e)),d&&(f=c[u]||f),i[f]=g):d&&(i[f]=g);return i}}),Ext.define("Ext.data.proxy.Proxy",{mixins:[Ext.mixin.Factoryable,Ext.mixin.Observable],$configPrefixed:!1,alias:"proxy.proxy",alternateClassName:["Ext.data.DataProxy","Ext.data.Proxy"],config:{batchOrder:"create,update,destroy",batchActions:!0,model:void 0,reader:{type:"json"},writer:{type:"json"}},isProxy:!0,isSynchronous:!1,constructor:function(e){this.mixins.observable.constructor.call(this,e),this.pendingOperations={}},applyModel:function(e){return Ext.data.schema.Schema.lookupEntity(e)},updateModel:function(e){var t;e&&(t=this.getReader())&&!t.getModel()&&t.setModel(e)},applyReader:function(e){return this.isSynchronous&&((e=e||{}).keepRawData=!0),Ext.Factory.reader(e)},updateReader:function(e){var t;e&&((t=this.getModel())?e.setModel(t):(t=e.getModel())&&this.setModel(t),null!=e.responseType&&(this.responseType=e.responseType))},applyWriter:function(e){var t=this.getReader();return(e=Ext.Factory.writer(e)).getRecord&&!e.getRecord()&&t&&t.getRecord&&(t=t.getRecord())&&e.setRecord(t),e},abort:Ext.emptyFn,onMetaChange:function(e){this.fireEvent("metachange",this,e)},create:Ext.emptyFn,read:Ext.emptyFn,update:Ext.emptyFn,erase:Ext.emptyFn,batch:function(e,t){var i,n,r,s,o,a,l,c,u,d=this.getBatchActions();for(void 0===e.operations&&(e={operations:e,listeners:t}),e.batch?Ext.isDefined(e.batch.runOperation)&&(i=Ext.applyIf(e.batch,{proxy:this,listeners:{}})):e.batch={proxy:this,listeners:e.listeners||{}},(i=i||new Ext.data.Batch(e.batch)).on("complete",Ext.bind(this.onBatchComplete,this,[e],0),null,{single:!0,priority:1e3}),i.$destroyOwner=e.$destroyOwner,s=(r=this.getBatchOrder().split(",")).length,a=0;a<s;a++)if(o=r[a],n=e.operations[o])if(d)i.add(this.createOperation(o,{records:n,params:e.params}));else for(c=n.length,l=0;l<c;l++)u=n[l],i.add(this.createOperation(o,{records:[u],params:e.params}));return i.start(),i},onBatchComplete:function(e,t){var i=e.scope||this;t.hasException()?Ext.isFunction(e.failure)&&Ext.callback(e.failure,i,[t,e]):Ext.isFunction(e.success)&&Ext.callback(e.success,i,[t,e]),Ext.isFunction(e.callback)&&Ext.callback(e.callback,i,[t,e]),t.$destroyOwner||t.destroy()},createOperation:function(e,t){var i=Ext.createByAlias("data.operation."+e,t);return i.setProxy(this),this.pendingOperations[i._internalId]=i},completeOperation:function(e){delete this.pendingOperations[e._internalId]},clone:function(){return new this.self(this.getInitialConfig())},destroy:function(){var e,t,i=this.pendingOperations;for(e in i)(t=i[e])&&t.isRunning()&&t.abort(),t.destroy();this.pendingOperations=null,this.callParent()}}),Ext.define("Ext.data.proxy.Client",{extend:Ext.data.proxy.Proxy,alternateClassName:"Ext.data.ClientProxy",isSynchronous:!0,clear:function(){Ext.raise("The Ext.data.proxy.Client subclass that you are using has not defined a 'clear' function. See src/data/ClientProxy.js for details.")}}),Ext.define("Ext.data.proxy.Memory",{extend:Ext.data.proxy.Client,alias:"proxy.memory",alternateClassName:"Ext.data.MemoryProxy",isMemoryProxy:!0,config:{enablePaging:null,data:{$value:null,merge:function(e,t,i,n){return e?Ext.clone(e):e}},clearOnRead:null},finishOperation:function(e){var t,i=e.getRecords(),n=i.length;for(t=0;t<n;t++)i[t].dropped=!!e.isDestroyOperation,i[t].commit();e.setSuccessful(!0)},create:function(e){this.finishOperation(e)},update:function(e){this.finishOperation(e)},erase:function(e){this.finishOperation(e)},read:function(e){var t,i=this.getReader(),n=i.read(this.getData(),{recordCreator:i.defaultRecordCreatorFromServer}),r=n.getRecords(),s=e.getSorters(),o=e.getGrouper(),a=e.getFilters(),l=e.getStart(),c=e.getLimit();!1!==e.process(n,null,null,!1)&&(e.success&&this.getClearOnRead()&&this.setData(null),a&&a.length&&(n.setRecords(r=Ext.Array.filter(r,Ext.util.Filter.createFilterFn(a))),n.setTotal(r.length)),o&&(s=s?s.concat(o):s),s&&s.length&&n.setRecords(r=Ext.Array.sort(r,Ext.util.Sortable.createComparator(s))),this.getEnablePaging()&&void 0!==l&&void 0!==c&&(l>=n.getTotal()?n.setConfig({success:!1,records:[],total:0}):n.setRecords(Ext.Array.slice(r,l,l+c))),e.setCompleted(),(t=n.getMetadata())&&this.onMetaChange(t))},clear:Ext.emptyFn}),Ext.define("Ext.data.ProxyStore",{extend:Ext.data.AbstractStore,config:{model:void 0,fields:null,proxy:void 0,autoLoad:void 0,autoSync:!1,batchUpdateMode:"operation",sortOnLoad:!0,trackRemoved:!0,asynchronousLoad:void 0},onClassExtended:function(e,t,i){var n,r=t.model;"string"==typeof r&&(n=i.onBeforeCreated,i.onBeforeCreated=function(){var e=this,t=arguments;Ext.require(r,function(){n.apply(e,t)})})},implicitModel:"Ext.data.Model",autoSyncSuspended:0,removed:null,constructor:function(e){var t=this.model;if(this.callParent(arguments),!1===this.getAsynchronousLoad()&&this.flushLoad(),!this.getModel()&&!1!==this.useModelWarning&&"ext-empty-store"!==this.getStoreId()){var i=[Ext.getClassName(this)||"Store"," created with no model."];"string"==typeof t&&i.push(" The name '",t,"'"," does not correspond to a valid model."),Ext.log.warn(i.join(""))}},doDestroy:function(){var e=this.getProxy();this.clearLoadTask(),Ext.destroy(this.getData()),this.data=null,this.setProxy(null),e.autoCreated&&e.destroy(),this.setModel(null),this.callParent()},applyAsynchronousLoad:function(e){return null==e&&(e=!this.loadsSynchronously()),e},updateAutoLoad:function(e){this.getData(),e&&this.load(Ext.isObject(e)?e:void 0)},getTotalCount:function(){return this.totalCount||0},applyFields:function(e){e&&this.createImplicitModel(e)},applyModel:function(e){return e?e=Ext.data.schema.Schema.lookupEntity(e):this.destroying||(this.getFields(),e=this.getModel()||this.createImplicitModel()),e},applyProxy:function(e){var t=this.getModel();return null!==e&&(e?e.isProxy?e.setModel(t):(Ext.isString(e)?e={type:e,model:t}:e.model||(e=Ext.apply({model:t},e)),(e=Ext.createByAlias("proxy."+e.type,e)).autoCreated=!0):t&&(e=t.getProxy(),this.useModelProxy=!0),e||((e=Ext.createByAlias("proxy.memory")).autoCreated=!0)),e},applyState:function(e){this.callParent([e]),(this.getAutoLoad()||this.isLoaded())&&(this.getRemoteSort()||this.getRemoteFilter())&&this.load()},updateProxy:function(e,t){this.proxyListeners=Ext.destroy(this.proxyListeners)},updateTrackRemoved:function(e){this.cleanRemoved(),this.removed=e?[]:null},onMetaChange:function(e,t){this.fireEvent("metachange",this,t)},create:function(e,t){var i=new(this.getModel())(e);return(t=Ext.apply({},t)).records||(t.records=[i]),t.internalScope=this,t.internalCallback=this.onProxyWrite,this.createOperation("create",t).execute()},read:function(){return this.load.apply(this,arguments)},update:function(e){return(e=Ext.apply({},e)).records||(e.records=this.getUpdatedRecords()),e.internalScope=this,e.internalCallback=this.onProxyWrite,this.createOperation("update",e).execute()},onProxyWrite:function(e){var t=e.wasSuccessful(),i=e.getRecords();switch(e.getAction()){case"create":this.onCreateRecords(i,e,t);break;case"update":this.onUpdateRecords(i,e,t);break;case"destroy":this.onDestroyRecords(i,e,t)}t&&(this.fireEvent("write",this,e),this.fireEvent("datachanged",this))},onCreateRecords:Ext.emptyFn,onUpdateRecords:Ext.emptyFn,onDestroyRecords:function(e,t,i){i&&this.cleanRemoved()},erase:function(e){return(e=Ext.apply({},e)).records||(e.records=this.getRemovedRecords()),e.internalScope=this,e.internalCallback=this.onProxyWrite,this.createOperation("destroy",e).execute()},onBatchOperationComplete:function(e,t){return this.onProxyWrite(t)},onBatchComplete:function(e,t){var i,n=e.operations,r=n.length;if("operation"!==this.batchUpdateMode){for(this.suspendEvents(),i=0;i<r;i++)this.onProxyWrite(n[i]);this.resumeEvents()}this.isSyncing=!1,e.$destroyOwner===this&&e.destroy(),this.fireEvent("datachanged",this)},onBatchException:function(e,t){},filterNew:function(e){return e.phantom&&e.isValid()},getNewRecords:function(){return[]},getUpdatedRecords:function(){return[]},getModifiedRecords:function(){return[].concat(this.getNewRecords(),this.getUpdatedRecords())},filterUpdated:function(e){return e.dirty&&!e.phantom&&e.isValid()},getRemovedRecords:function(){var e=this.getRawRemovedRecords();return e?Ext.Array.clone(e):[]},sync:function(e){var t=this,i={},n=t.getNewRecords(),r=t.getUpdatedRecords(),s=t.getRemovedRecords(),o=!1;return t.isSyncing&&Ext.log.warn("Sync called while a sync operation is in progress. Consider configuring autoSync as false."),t.needsSync=!1,0<n.length&&(i.create=n,o=!0),0<r.length&&(i.update=r,o=!0),0<s.length&&(i.destroy=s,o=!0),o&&!1!==t.fireEvent("beforesync",i)&&(t.isSyncing=!0,e=e||{},t.proxy.batch(Ext.apply(e,{operations:i,listeners:t.getBatchListeners(),$destroyOwner:t}))),t},getBatchListeners:function(){var e={scope:this,exception:this.onBatchException,complete:this.onBatchComplete};return"operation"===this.batchUpdateMode&&(e.operationcomplete=this.onBatchOperationComplete),e},save:function(){return this.sync.apply(this,arguments)},load:function(e){return e="function"==typeof e?{callback:e}:e?Ext.Object.chain(e):{},this.pendingLoadOptions=e,this.getAsynchronousLoad()?this.loadTimer||(this.loadTimer=Ext.asap(this.flushLoad,this)):this.flushLoad(),this},flushLoad:function(){var e,t=this,i=t.pendingLoadOptions;t.destroying||t.destroyed||(t.clearLoadTask(),i&&(t.setLoadOptions(i),t.getRemoteSort()&&i.sorters&&t.fireEvent("beforesort",t,i.sorters),e=Ext.apply({internalScope:t,internalCallback:t.onProxyLoad,scope:t},i),t.lastOptions=e,e=t.createOperation("read",e),!1!==t.fireEvent("beforeload",t,e)?(t.onBeforeLoad(e),t.loading=!0,t.hasListeners.beginload&&t.fireEvent("beginload",t,e),e.execute()):(t.getAsynchronousLoad()&&e.abort(),e.setCompleted())))},reload:function(e){return this.load(Ext.apply({},e,this.lastOptions))},onEndUpdate:function(){this.needsSync&&this.autoSync&&!this.autoSyncSuspended&&this.sync()},afterReject:function(e){this.contains(e)&&(this.onUpdate(e,Ext.data.Model.REJECT,null),this.fireEvent("update",this,e,Ext.data.Model.REJECT,null),this.fireEvent("datachanged",this))},afterCommit:function(e,t){t=t||null,this.contains(e)&&(this.onUpdate(e,Ext.data.Model.COMMIT,t),this.fireEvent("update",this,e,Ext.data.Model.COMMIT,t),this.fireEvent("datachanged",this))},afterErase:function(e){this.onErase(e)},onErase:Ext.emptyFn,onUpdate:Ext.emptyFn,hasPendingLoad:function(){return!!this.pendingLoadOptions||this.isLoading()},isLoading:function(){return!!this.loading},isLoaded:function(){return 0<this.loadCount},suspendAutoSync:function(){++this.autoSyncSuspended},resumeAutoSync:function(e){this.autoSyncSuspended||Ext.log.warn("Mismatched call to resumeAutoSync - auto synchronization is currently not suspended."),this.autoSyncSuspended&&!--this.autoSyncSuspended&&e&&this.sync()},removeAll:Ext.emptyFn,clearData:Ext.emptyFn,privates:{getRawRemovedRecords:function(){return this.removed},onExtraParamsChanged:function(){},clearLoadTask:function(){this.pendingLoadOptions=this.loadTimer=Ext.unasap(this.loadTimer)},cleanRemoved:function(){var e,t,i=this.getRawRemovedRecords();if(i){for(t=0,e=i.length;t<e;++t)i[t].unjoin(this);i.length=0}},createOperation:function(e,t){var i,n=this.getProxy();return this.proxyListeners||(i={scope:this,destroyable:!0,beginprocessresponse:this.beginUpdate,endprocessresponse:this.endUpdate},this.disableMetaChangeEvent||(i.metachange=this.onMetaChange),this.proxyListeners=n.on(i)),n.createOperation(e,t)},createImplicitModel:function(e){var t,i,n={extend:this.implicitModel,statics:{defaultProxy:"memory"}};e&&(n.fields=e),i=Ext.define(null,n),this.setModel(i),(t=this.getProxy())?i.setProxy(t):this.setProxy(i.getProxy())},loadsSynchronously:function(){return this.getProxy().isSynchronous},onBeforeLoad:Ext.privateFn,removeFromRemoved:function(e){var t=this.getRawRemovedRecords();t&&(Ext.Array.remove(t,e),e.unjoin(this))},setLoadOptions:function(e){var t,i;this.getRemoteFilter()&&(t=this.getFilters(!1))&&t.getCount()&&(e.filters=t.getRange()),this.getRemoteSort()&&(i=this.getSorters(!1))&&i.getCount()&&(e.sorters=i.getRange())}}}),Ext.define("Ext.util.Group",{extend:Ext.util.Collection,isGroup:!0,config:{groupKey:null,groupValue:null},$endUpdatePriority:2001,manageSorters:!1}),Ext.define("Ext.data.Group",{extend:Ext.util.Group,isDataGroup:!0,store:null,getSummaryRecord:function(){var e,t=this.summaryRecord,i=this.store,n=i.getData().generation;return t||(e=i.getModel().getSummaryModel(),this.summaryRecord=t=new e),t.isRemote||t.summaryGeneration===n||(t.calculateSummary(this.items),t.summaryGeneration=n),t}}),Ext.define("Ext.data.LocalStore",{extend:Ext.Mixin,mixinConfig:{id:"localstore",after:{fireGroupChangeEvent:"onGrouperChange"}},config:{extraKeys:null},applyExtraKeys:function(e){var t,i=this.getData();for(t in i.setExtraKeys(e),e=i.getExtraKeys())this[t]=e[t]},add:function(e){return this.insert(this.getCount(),1===arguments.length?e:arguments)},constructDataCollection:function(){var e=new Ext.util.Collection({id:this.getId()+"-data",rootProperty:"data",groupConfig:{xclass:"Ext.data.Group",store:this}});return e.addObserver(this),e},createModel:function(e){var t=this.getSession();return e.isModel||(e=new(this.getModel())(e,t)),e},createFiltersCollection:function(){return this.getData().getFilters()},createSortersCollection:function(){var e=this.getData().getSorters();return e.setSorterConfigure(this.addFieldTransform,this),e},getSummaryRecord:function(){var e,t=this.summaryRecord,i=this.getData(),n=i.generation;return t||(e=this.getModel().getSummaryModel(),this.summaryRecord=t=new e),t.isRemote||t.summaryGeneration===n||(t.calculateSummary(i.items),t.summaryGeneration=n),t},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionSort:function(){this.onSorterEndUpdate()},onCollectionFilter:function(){this.onFilterEndUpdate()},onGrouperChange:function(e){this.callObservers("GrouperChange",[e])},notifySorterChange:function(){this.getData().onSorterChange()},forceLocalSort:function(){var e=this.getSorters();e.beginUpdate(),e.endUpdate()},contains:function(e){return-1<this.indexOf(e)},each:function(e,t,i){var n,r,s,o=this.getData(),a=i;for("object"==typeof i&&(a=i.filtered),a&&o.filtered&&(o=o.getSource()),n=(o=o.items.slice(0)).length,s=0;s<n&&(r=o[s],!1!==e.call(t||r,r,s,n));++s);},collect:function(e,t,i){var n=t,r=this.getData();return"object"==typeof t&&(i=t.filtered,n=t.allowNull),i&&r.filtered&&(r=r.getSource()),r.collect(e,"data",n)},getById:function(e){var t=this.getData();return t.filtered&&(t=t.getSource()),t.get(e)||null},getByInternalId:function(e){var t,i=this.getData();return i.filtered&&(i.$hasExtraKeys||(t=this.makeInternalKeyCfg(),i.setExtraKeys(t),i.$hasExtraKeys=!0),i=i.getSource()),i.$hasExtraKeys||(i.setExtraKeys(t||this.makeInternalKeyCfg()),i.$hasExtraKeys=!0),i.byInternalId.get(e)||null},getDataSource:function(){var e=this.getData();return e.getSource()||e},indexOf:function(e){return this.getData().indexOf(e)},indexOfId:function(e){return this.indexOf(this.getById(e))},insert:function(e,t){var i,n;if(t&&(i=(t=Ext.isIterable(t)?Ext.Array.clone(t):[t]).length),!i)return[];for(n=0;n<i;++n)t[n]=this.createModel(t[n]);return this.getData().insert(e,t),t},queryBy:function(e,t){var i=this.getData();return(i.getSource()||i).createFiltered(e,t)},query:function(e,t,i,n,r){var s=this.getData();return(s.getSource()||s).createFiltered(e,t,i,n,r)},first:function(e){return this.getData().first(e)||null},last:function(e){return this.getData().last(e)||null},sum:function(e,t){var i=this.getData();return t&&this.isGrouped()?i.sumByGroup(e):i.sum(e)},count:function(e){var t=this.getData();return e&&this.isGrouped()?t.countByGroup():t.count()},min:function(e,t){var i=this.getData();return t&&this.isGrouped()?i.minByGroup(e):i.min(e)},max:function(e,t){var i=this.getData();return t&&this.isGrouped()?i.maxByGroup(e):i.max(e)},average:function(e,t){var i=this.getData();return t&&this.isGrouped()?i.averageByGroup(e):i.average(e)},aggregate:function(e,t,i,n){var r,s,o,a,l;if(i&&this.isGrouped()){for(s=(r=this.getGroups().items).length,o={},l=0;l<s;++l)o[(a=r[l]).getGroupKey()]=this.getAggregate(e,t||this,a.items,n);return o}return this.getAggregate(e,t,this.getData().items,n)},getAggregate:function(e,t,i,n){var r,s=[],o=i.length;for(r=0;r<o;++r)s[r]=i[r].get(n);return e.call(t||this,i,s)},addObserver:function(e){var t=this.observers;t||(this.observers=t=new Ext.util.Collection),t.add(e)},removeObserver:function(e){var t=this.observers;t&&t.remove(e)},callObservers:function(e,t){var i,n,r,s,o,a=this.observers;if(a)for(n=a.items,t?t.unshift(this):t=[this],r=0,i=n.length;r<i;++r)(o=n[r])[s="onSource"+e]&&o[s].apply(o,t)},queryRecordsBy:function(e,t){var i,n,r,s=this.getData(),o=[];for(t=t||this,n=0,i=(s=(s.getSource()||s).items).length;n<i;++n)r=s[n],!0===e.call(t,r)&&o.push(r);return o},queryRecords:function(e,t){var i,n,r,s=this.getData(),o=[];for(n=0,i=(s=(s.getSource()||s).items).length;n<i;++n)(r=s[n]).get(e)===t&&o.push(r);return o},privates:{isLast:function(e){return e===this.last()},makeInternalKeyCfg:function(){return{byInternalId:{property:"internalId",rootProperty:""}}}}}),Ext.define("Ext.data.proxy.Server",{extend:Ext.data.proxy.Proxy,alias:"proxy.server",alternateClassName:"Ext.data.ServerProxy",isRemote:!0,config:{url:"",pageParam:"page",startParam:"start",limitParam:"limit",groupParam:"group",groupDirectionParam:"groupDir",sortParam:"sort",filterParam:"filter",directionParam:"dir",idParam:"id",simpleSortMode:!1,simpleGroupMode:!1,noCache:!0,cacheString:"_dc",timeout:3e4,api:{create:void 0,read:void 0,update:void 0,destroy:void 0},extraParams:{}},create:function(){return this.doRequest.apply(this,arguments)},read:function(){return this.doRequest.apply(this,arguments)},update:function(){return this.doRequest.apply(this,arguments)},erase:function(){return this.doRequest.apply(this,arguments)},setExtraParam:function(e,t){var i=this.getExtraParams();i[e]=t,this.fireEvent("extraparamschanged",i)},updateExtraParams:function(e,t){this.fireEvent("extraparamschanged",e)},buildRequest:function(e){var t,i,n,r=Ext.apply({},e.getParams()),s=Ext.applyIf(r,this.getExtraParams()||{});return Ext.applyIf(s,this.getParams(e)),i=e.getId(),n=this.getIdParam(),void 0!==i&&void 0===s[n]&&(s[n]=i),(t=new Ext.data.Request({params:s,action:e.getAction(),records:e.getRecords(),url:e.getUrl(),operation:e,proxy:this})).setUrl(this.buildUrl(t)),e.setRequest(t),t},processResponse:function(e,t,i,n){var r,s,o,a,l,c=this;c.destroying||c.destroyed||(c.fireEvent("beginprocessresponse",c,n,t),r=!0===e?(s=c.getReader(),o=204===n.status?s.getNullResultSet():s.read(c.extractResponseData(n),{recordCreator:t.getRecordCreator()||s.defaultRecordCreatorFromServer}),t.$destroyOwner||(t.$destroyOwner=c,l=!0),t.process(o,i,n),!t.wasSuccessful()):(c.setException(t,n),!0),c.destroyed||(r?c.fireEvent("exception",c,n,t):(a=o.getMetadata())&&c.onMetaChange(a),c.destroyed||(c.afterRequest(i,e),c.fireEvent("endprocessresponse",c,n,t))),!t.destroyed&&l&&t.$destroyOwner===c&&t.destroy())},setException:function(e,t){e.setException({status:t.status,statusText:t.statusText,response:t})},extractResponseData:Ext.identityFn,applyEncoding:function(e){return Ext.encode(e)},encodeSorters:function(e,t){var i,n=[],r=e.length;for(i=0;i<r;i++)n[i]=e[i].serialize();return this.applyEncoding(t?n[0]:n)},encodeFilters:function(e){var t,i,n=[],r=e.length;for(i=0;i<r;i++)t|=e[i].serializeTo(n);return t?this.applyEncoding(n):n},getParams:function(e){if(!e.isReadOperation)return{};var t,i,n=this,r={},s=e.getGrouper(),o=e.getSorters(),a=e.getFilters(),l=e.getPage(),c=e.getStart(),u=e.getLimit(),d=n.getSimpleSortMode(),h=n.getSimpleGroupMode(),f=n.getPageParam(),g=n.getStartParam(),p=n.getLimitParam(),m=n.getGroupParam(),x=n.getGroupDirectionParam(),y=n.getSortParam(),v=n.getFilterParam(),E=n.getDirectionParam();if(f&&l&&(r[f]=l),g&&(c||0===c)&&(r[g]=c),p&&u&&(r[p]=u),(t=m&&s)&&(h?(r[m]=s.getProperty(),x===m?r[m]+=" "+s.getDirection():r[x]=s.getDirection()):r[m]=n.encodeSorters([s],!0)),y&&o&&0<o.length)if(d)for(i=1<o.length&&t?1:0;i<o.length;i++)E===y?r[y]=Ext.Array.push(r[y]||[],o[i].getProperty()+" "+o[i].getDirection()):(r[y]=Ext.Array.push(r[y]||[],o[i].getProperty()),r[E]=Ext.Array.push(r[E]||[],o[i].getDirection()));else r[y]=n.encodeSorters(o);return v&&a&&0<a.length&&(r[v]=n.encodeFilters(a)),r},buildUrl:function(e){var t=this.getUrl(e);return t||Ext.raise("You are using a ServerProxy but have not supplied it with a url."),this.getNoCache()&&(t=Ext.urlAppend(t,Ext.String.format("{0}={1}",this.getCacheString(),Ext.Date.now()))),t},getUrl:function(e){var t;return e&&(t=e.getUrl()||this.getApi()[e.getAction()]),t||this.callParent()},doRequest:function(e,t,i){Ext.raise("The doRequest function has not been implemented on your Ext.data.proxy.Server subclass. See src/data/ServerProxy.js for details")},afterRequest:Ext.emptyFn,destroy:function(){this.destroying=!0,this.reader=this.writer=Ext.destroy(this.reader,this.writer),this.callParent(),this.destroyed=!0}}),Ext.define("Ext.data.proxy.Ajax",{extend:Ext.data.proxy.Server,alias:"proxy.ajax",alternateClassName:["Ext.data.HttpProxy","Ext.data.AjaxProxy"],isAjaxProxy:!0,defaultActionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"},config:{binary:!1,headers:void 0,paramsAsJson:!1,withCredentials:!1,useDefaultXhrHeader:!0,username:null,password:null,actionMethods:{create:"POST",read:"GET",update:"POST",destroy:"POST"}},doRequest:function(e){var t,i,n=this,r=n.getWriter(),s=n.buildRequest(e),o=n.getMethod(s);return r&&e.allowWrite()&&(s=r.write(s)),s.setConfig({binary:n.getBinary(),headers:n.getHeaders(),timeout:n.getTimeout(),scope:n,callback:n.createRequestCallback(s,e),method:o,useDefaultXhrHeader:n.getUseDefaultXhrHeader(),disableCaching:!1}),null!=n.responseType&&Ext.supports.XHR2&&s.setResponseType(n.responseType),"GET"!==o.toUpperCase()&&n.getParamsAsJson()&&(i=s.getParams())&&(t=(t=s.getJsonData())?Ext.Object.merge({},t,i):i,s.setJsonData(t),s.setParams(void 0)),n.getWithCredentials()&&(s.setWithCredentials(!0),s.setUsername(n.getUsername()),s.setPassword(n.getPassword())),n.sendRequest(s)},sendRequest:function(e){return e.setRawRequest(Ext.Ajax.request(e.getCurrentConfig())),this.lastRequest=e},abort:function(e){(e=e||this.lastRequest)&&Ext.Ajax.abort(e.getRawRequest())},getMethod:function(e){var t,i=this.getActionMethods(),n=e.getAction();return i&&(t=i[n]),t||this.defaultActionMethods[n]},createRequestCallback:function(n,r){return function(e,t,i){n===this.lastRequest&&(this.lastRequest=null),this.destroying||this.destroyed||this.processResponse(t,r,n,i)}},destroy:function(){this.lastRequest=null,this.callParent()}}),Ext.define("Ext.data.reader.Json",{extend:Ext.data.reader.Reader,alternateClassName:"Ext.data.JsonReader",alias:"reader.json",config:{record:null,metaProperty:"metaData",useSimpleAccessors:!1,preserveRawData:!1},responseType:"json",updateRootProperty:function(){this.forceBuildExtractors()},updateMetaProperty:function(){this.forceBuildExtractors()},getResponseData:function(t){var i;if("object"==typeof t.responseJson)return t.responseJson;try{return Ext.decode(t.responseText)}catch(e){return i=this.createReadError(e.message),Ext.Logger.warn("Unable to parse the JSON returned by the server"),this.fireEvent("exception",this,t,i),i}},buildExtractors:function(e){var t=this,i=Ext.emptyFn;t.callParent([e])&&(t.getRoot=t.setupExtractor(t.getRootProperty(),Ext.identityFn),t.getGroupRoot=t.setupExtractor(t.getGroupRootProperty(),i),t.getSummaryRoot=t.setupExtractor(t.getSummaryRootProperty(),i),t.getMeta=t.setupExtractor(t.getMetaProperty(),i))},extractData:function(e,t){var i,n,r=this.getRecord(),s=[];if(r)for(!(i=e.length)&&Ext.isObject(e)&&(i=1,e=[e]),n=0;n<i;n++)s[n]=e[n][r];else s=e;return this.callParent([s,t])},getModelData:function(e){return this.getPreserveRawData()?Ext.apply({},e):e},createAccessor:function(){var p=/[\\[\\.]/;return function(t){var e,i,n,r,s,o,a,l,c,u,d,h,f,g=this.getUseSimpleAccessors();if(t||0===t){if("function"==typeof t)return t;if(g||(e=String(t).search(p)),!0===g||e<0)i=function(e){return null==e?null:e[t]};else{for(n="raw",r=[],s="",o=0,f=t.length,d=0;d<=f;++d)a="["===(u=t[d]),l="]"===u,!(c="."===u||a||l||!u)||1<o||o&&!l?s+=u:c&&(h=!1,a?++o:l&&(--o,h=!0),s&&(n+=s=h?"["+s+"]":"."+s,r.push(""+n),s=""));i=r.join(" && "),i=Ext.functionFactory("raw","return "+i)}return i}}}(),createFieldAccessor:function(i){var e=i.mapping,t=e||0===e,n=t?e:i.name;if(t)return"function"==typeof n?function(e,t){return i.mapping(e,t)}:this.createAccessor(n)},getAccessorKey:function(e){var t=this.getUseSimpleAccessors()?"simple":"";return this.callParent([t+e])},privates:{copyFrom:function(e){this.callParent([e]),this.getRoot=e.getRoot},getGroupRoot:function(e){return this.buildExtractors(),this.getGroupRoot(e)},getSummaryRoot:function(e){return this.buildExtractors(),this.getSummaryRoot(e)},setupExtractor:function(e,t){return e?this.getAccessor(e):t}}}),Ext.define("Ext.data.writer.Json",{extend:Ext.data.writer.Writer,alternateClassName:"Ext.data.JsonWriter",alias:"writer.json",config:{rootProperty:void 0,encode:!1,allowSingle:!0,expandData:!1},constructor:function(e){e&&e.hasOwnProperty("root")&&((e=Ext.apply({},e)).rootProperty=e.root,delete e.root,Ext.log.warn('Ext.data.writer.Json: Using the deprecated "root" configuration. Use "rootProperty" instead.')),this.callParent([e])},getExpandedData:function(e){var t,i,n,r,s,o,a=e.length,l=0;for(o=function(e,t){var i={};return i[e]=t,i};l<a;l++)for(i in t=e[l])if(t.hasOwnProperty(i)&&0<(r=(n=i.split(".")).length-1)){for(s=t[i];0<r;r--)s=o(n[r],s);t[n[0]]=t[n[0]]||{},Ext.Object.merge(t[n[0]],s),delete t[i]}return e},writeRecords:function(e,t){var i,n,r,s=this.getRootProperty();return this.getExpandData()&&(t=this.getExpandedData(t)),this.getAllowSingle()&&1===t.length&&(t=t[0],n=!0),(r=this.getTransform())&&(t=r(t,e)),this.getEncode()?s?e.setParam(s,Ext.encode(t)):Ext.raise("Must specify a root when using encode"):(n||t&&t.length)&&(i=e.getJsonData()||{},s?i[s]=t:i=t,e.setJsonData(i)),e}}),Ext.define("Ext.util.SorterCollection",{extend:Ext.util.Collection,isSorterCollection:!0,$sortable:null,sortFn:null,config:{sorterOptionsFn:null,sorterOptionsScope:null},constructor:function(e){this.sortFn=Ext.util.Sorter.createComparator(this),this.callParent([e]),this.setDecoder(this.decodeSorter)},addSort:function(e,t,i){var n,r,s,o,a,l,c,u=this;e?(o=u.getOptions(),e instanceof Array?(c=e,i=t,t=null):Ext.isString(e)?c=(l=u.get(e))?[l]:[{property:e,direction:t||o.getDefaultSortDirection()}]:Ext.isFunction(e)?c=[{sorterFn:e,direction:t||o.getDefaultSortDirection()}]:(Ext.isObject(e)||Ext.raise("Invalid sort descriptor: "+e),c=[e],i=t,t=null),i&&!u._sortModes[i]&&Ext.raise('Sort mode should be "multi", "append", "prepend" or "replace", not "'+i+'"'),i=u._sortModes[i||"replace"],a=u.getAt(0),n=u.length,r=i.append?n:0,u.beginUpdate(),u.splice(r,i.replace?n:0,c),i.multi&&(n=u.length,(s=o.getMultiSortLimit())<n&&u.removeAt(s,n)),l&&t?l.setDirection(t):0===r&&a&&a===u.getAt(0)&&a.toggle()):u.beginUpdate(),u.endUpdate()},clear:function(){this.beginUpdate(),this.callParent(),this.endUpdate(this.items)},getSortFn:function(){return this.sortFn},getByProperty:function(e){var t,i,n=this.items,r=n.length;for(t=0;t<r;++t)if((i=n[t]).getProperty()===e)return i;return null},_sortModes:{append:{append:1},multi:{multi:1},prepend:{prepend:1},replace:{replace:1}},decodeSorter:function(e,t){var i,n,r,s=this.getOptions(),o=s.getRootProperty(),a=this.getSorterOptionsFn();if(e.isSorter)e.getRoot()||e.setRoot(o);else{if(n={direction:s.getDefaultSortDirection(),root:o},"string"==(r=typeof e)){if(i=this.get(e))return i;n.property=e}else"function"==r?n.sorterFn=e:(Ext.isObject(e)||Ext.raise("Invalid sorter specified: "+e),(n=Ext.apply(n,e)).fn&&(n.sorterFn=n.fn,delete n.fn));e=Ext.create(t||Ext.util.Sorter,n)}return a&&a.call(this.getSorterOptionsScope()||this,e),e},setSorterConfigure:function(e,t){this.setSorterOptionsFn(e),this.setSorterOptionsScope(t)},decodeRemoveItems:function(e,t){var i=void 0===t?e:e[t];if(!i||!i.$cloned){(e.length>t+1||!Ext.isIterable(i))&&(i=Ext.Array.slice(e,t));var n,r,s,o,a,l=this.items,c=i.length,u=[];for(n=0;n<c;n++)if((o=i[n])&&o.isSorter)u.push(o);else if("string"==(a=typeof o))(o=this.get(o))&&u.push(o);else if("function"==a)for(s=l.length;0<s--;)(r=l[s]).getSorterFn()===o&&u.push(r);else Ext.raise("Invalid sorter specification: "+o);(i=u).$cloned=!0}return i},getOptions:function(){return this.$sortable||this}}),Ext.define("Ext.util.FilterCollection",{extend:Ext.util.Collection,isFilterCollection:!0,$filterable:null,filterFn:null,constructor:function(e){this.filterFn=Ext.util.Filter.createFilterFn(this),this.callParent([e]),this.setDecoder(this.decodeFilter)},filterData:function(e){return this.filtered?Ext.Array.filter(e,this.filterFn):e},getFilterFn:function(){return this.filterFn},isItemFiltered:function(e){return!this.filterFn(e)},getFilterCount:function(){var e,t=this.items,i=t.length;for(e=i-1;0<=e;e--)t[e].getDisabled()&&i--;return i},decodeFilter:function(e){var t,i=this.getOptions().getRootProperty();if(e.isFilter)e.setRoot&&!e.getRoot()&&e.setRoot(i);else{if(t={root:i},Ext.isFunction(e))t.filterFn=e;else if(Ext.isObject(e)||Ext.raise("Invalid filter specified: "+e),(t=Ext.apply(t,e)).fn&&(t.filterFn=t.fn,delete t.fn),Ext.util.Filter.isInvalid(t))return!1;e=new Ext.util.Filter(t)}return e},decodeRemoveItems:function(e,t){var i=void 0===t?e:e[t];if(!i.$cloned){(e.length>t+1||!Ext.isIterable(i))&&(i=Ext.Array.slice(e,t));var n,r,s,o,a,l,c,u,d,h=this.items,f=i.length,g=[];for(r=0;r<f;r++)if((n=i[r])&&n.isFilter)g.push(n);else for(s="function"==(d=typeof n),o=void 0!==n.property&&void 0!==n.value,a="string"==d,s||o||a||Ext.raise("Invalid filter specification: "+n),u=h.length;0<u--;)l=h[u],c=!1,a?c=l.getProperty()===n:s?c=l.getFilterFn()===n:o&&(c=l.getProperty()===n.property&&l.getValue()===n.value),c&&g.push(l);(i=g).$cloned=!0}return i},getOptions:function(){return this.$filterable||this}}),Ext.define("Ext.util.GroupCollection",{extend:Ext.util.Collection,isGroupCollection:!0,config:{grouper:null,groupConfig:null,itemRoot:null},observerPriority:-100,emptyGroupRetainTime:3e5,constructor:function(e){this.emptyGroups={},this.callParent([e]),this.on("remove","onGroupRemove",this)},getItemGroup:function(e){var t=this.getGrouper().getGroupString(e);return this.get(t)},onCollectionAdd:function(e,t){this.isConfiguring||this.addItemsToGroups(e,t.items,t.at)},onCollectionBeforeItemChange:function(e,t){this.changeDetails=t},onCollectionBeginUpdate:function(){this.beginUpdate()},onCollectionEndUpdate:function(){this.endUpdate()},onCollectionItemChange:function(e,t){t.indexChanged||this.syncItemGrouping(e,t),this.changeDetails=null},onCollectionRefresh:function(e){if(e.generation){var t,i,n,r,s,o=this.itemGroupKeys={},a=this.createEntries(e,e.items),l=a.entries;for(i=0,n=l.length;i<n;++i)for((r=l[i]).group.splice(0,1e99,r.items),s=0;s<r.items.length;s++)o[e.getKey(r.items[s])]=r.group;for(t in l=null,this.map)t in a.groups||(l=l||[]).push(this.map[t]);l&&this.remove(l),this.sortItems()}},onCollectionRemove:function(e,t){var i,n,r,s,o,a,l,c,u=this.changeDetails,d=this.itemGroupKeys||(this.itemGroupKeys={});if(e.getCount()){u?(c=u.item||u.items[0],(i=this.createEntries(e,[c],!1).entries)[0].group=d["oldKey"in t?t.oldKey:e.getKey(c)]):i=this.createEntries(e,t.items,!1).entries;for(s=0,o=i.length;s<o;++s){for((r=(n=i[s]).group)&&r.remove(n.items),a=0;a<n.items.length;a++)delete d[e.getKey(n.items[a])];r&&!r.length&&(l=l||[]).push(r)}}else for(this.itemGroupKeys={},s=0,o=(l=this.items).length;s<o;++s)l[s].clear();l&&this.remove(l)},onCollectionSort:function(e){var t,i,n,r,s=e.getSorters(!1);if(s)for(t=this.items,i=this.length,n=0;n<i;++n)(r=t[n]).getSorters()===s?r.sortItems():r.setSorters(s)},onCollectionUpdateKey:function(e,t){t.indexChanged||(t.oldIndex=e.indexOf(t.item),this.syncItemGrouping(e,t))},addItemsToGroups:function(e,t,i,n){var r,s,o,a,l,c,u,d,h=this.itemGroupKeys||(this.itemGroupKeys={}),f=this.createEntries(e,t).entries,g=-1;for(o=0,a=f.length;o<a;++o)if(c=(s=f[o]).group,n||0===n)d=t[0],0<c.getCount()&&0===e.getSorters().getCount()&&(g=n<(u=e.indexOf(c.items[0]))?0:n-u),-1===g?c.add(d):c.insert(g,d);else for(1<this.length&&i&&(r=e.indexOf(f[0].group.getAt(0)),i=Math.max(i-r,0)),s.group.insert(null!=i?i:c.items.length,s.items),l=0;l<s.items.length;l++)h[e.getKey(s.items[l])]=s.group;this.sortItems()},createEntries:function(e,t,i){var n,r,s,o,a,l,c,u={},d=[],h=this.getGrouper();for(a=0,c=t.length;a<c;++a)s=h.getGroupString(l=t[a]),o=h.getGroupValue(l),(n=u[s])||(r=this.getGroup(e,s,o,i),d.push(u[s]=n={group:r,items:[]})),n.items.push(l);return{groups:u,entries:d}},syncItemGrouping:function(e,t){var i,n,r,s,o=this.itemGroupKeys||(this.itemGroupKeys={}),a=t.item,l=this.getGrouper();n=e.getKey(a),r=o[i="oldKey"in t?t.oldKey:n],s=this.getGroup(e,l.getGroupString(a),l.getGroupValue(a)),t.group=s,t.oldGroup=r,(t.groupChanged=s!==r)?(r&&(r.updateKey(a,i,n),r.remove(a),r.length||this.remove(r)),this.addItemsToGroups(e,[a],null,t.oldIndex)):r.itemChanged(a,t.modified,t.oldKey,t),delete o[i],o[n]=s},getGroup:function(e,t,i,n){var r=this.get(t),s=this.getAutoSort();return r?r.setSorters(e.getSorters()):!1!==n&&((r=this.emptyGroups[t]||Ext.create(Ext.apply({xclass:"Ext.util.Group",id:this.getId()+"-group-"+t,groupKey:t,groupValue:i,rootProperty:this.getItemRoot(),sorters:e.getSorters()},this.getGroupConfig()))).ejectTime=null,this.setAutoSort(!1),this.add(r),this.setAutoSort(s)),r},getKey:function(e){return e.getGroupKey()},createSortFn:function(){var i=this.getGrouper(),n=this.getSorters().getSortFn();return i?function(e,t){return i.sort(e.items[0],t.items[0])||n(e,t)}:n},updateGrouper:function(e){this.grouped=!(!e||!this.$groupable.getAutoGroup()),this.onSorterChange(),this.onEndUpdateSorters(this.getSorters())},destroy:function(){this.$groupable=null,this.destroyGroups(this.items),Ext.undefer(this.checkRemoveQueueTimer),this.callParent()},privates:{destroyGroups:function(e){var t,i=e.length;for(t=0;t<i;++t)e[t].destroy()},onGroupRemove:function(e,t){var i,n,r,s=t.items,o=this.emptyGroups;for(r=0,i=(s=Ext.Array.from(s)).length;r<i;r++)(n=s[r]).setSorters(null),(o[n.getGroupKey()]=n).ejectTime=Ext.now();this.checkRemoveQueue()},checkRemoveQueue:function(){var e,t,i,n=this.emptyGroups;for(e in n)!(t=n[e]).getCount()&&Ext.now()-t.ejectTime>this.emptyGroupRetainTime?(Ext.destroy(t),delete n[e]):i=!0;i&&(Ext.undefer(this.checkRemoveQueueTimer),this.checkRemoveQueueTimer=Ext.defer(this.checkRemoveQueue,this.emptyGroupRetainTime,this))}}}),Ext.define("Ext.data.Store",{extend:Ext.data.ProxyStore,alias:"store.store",mixins:[Ext.data.LocalStore],config:{data:void 0,clearRemovedOnLoad:!0,clearOnPageLoad:!0,associatedEntity:null,role:null,session:null},addRecordsOptions:{addRecords:!0},loadCount:0,complete:!1,moveMapCount:0,constructor:function(e){var t;if(e){if(e.buffered)return this.self!==Ext.data.Store&&Ext.raise("buffered config not supported on derived Store classes. Please derive from Ext.data.BufferedStore."),new Ext.data.BufferedStore(e);e.remoteGroup&&Ext.log.warn("Ext.data.Store: remoteGroup has been removed. Use remoteSort instead.")}this.callParent([e]),(t=this.inlineData)&&(delete this.inlineData,this.loadInlineData(t))},applyData:function(e,t){var i=this;return i.getFields(),i.getModel(),e&&e.isCollection?(e.setRootProperty("data"),(t=e).addObserver(this),e.getCount()&&(i.afterLoadRecords(e.items),i.hasListeners.load&&i.fireEvent("load",i,e.items,!0))):(t=t||i.constructDataCollection(),e&&(i.isInitializing?i.inlineData=e:i.loadData(e))),t},loadInlineData:function(e){var t=this.getProxy();t&&t.isMemoryProxy?(t.setData(e),this.suspendEvents(),this.read()):(this.removeAll(!0),this.suspendEvents(),this.loadData(e)),this.resumeEvents()},onCollectionAdd:function(e,t){this.loadCount=this.loadCount||1,this.onCollectionAddItems(e,t.items,t)},onCollectionFilterAdd:function(e,t){this.onCollectionAddItems(e,t)},onCollectionAddItems:function(e,t,i){var n,r,s,o,a=this,l=t.length,c=!!i&&!i.next,u=a.removed,d=a.ignoreCollectionAdd,h=a.getSession(),f=i&&i.replaced;for(a.activeRanges&&a.syncActiveRanges(),n=0;n<l;++n)s=t[n],h&&h.adopt(s),d||(s.join(a),u&&u.length&&Ext.Array.remove(u,s),r=r||s.phantom||s.dirty);if(!d){if(f){for(o=[];Ext.Array.push(o,f.items),f=f.next;);a.setMoving(o,!0)}i&&(i.replaced?c&&(a.fireEvent("datachanged",a),a.fireEvent("refresh",a)):(a.fireEvent("add",a,t,i.at),c&&a.fireEvent("datachanged",a))),o&&a.setMoving(o,!1),a.needsSync=a.needsSync||r}},onCollectionBeforeItemChange:function(e,t){var i=t.item,n=t.modified||null,r=t.meta;this.fireEvent("beforeupdate",this,i,r,n,t)},onCollectionFilteredItemChange:function(){this.onCollectionItemChange.apply(this,arguments)},onCollectionItemChange:function(e,t){var i=t.item,n=t.modified||null,r=t.meta;this.fireChangeEvent(i)&&(this.onUpdate(i,r,n,t),this.fireEvent("update",this,i,r,n,t),this.fireEvent("datachanged",this))},afterChange:function(e,t,i){this.getData().itemChanged(e,t||null,void 0,i)},afterCommit:function(e,t){this.afterChange(e,t,Ext.data.Model.COMMIT)},afterEdit:function(e,t){this.needsSync=this.needsSync||e.dirty,this.afterChange(e,t,Ext.data.Model.EDIT)},afterReject:function(e){this.afterChange(e,null,Ext.data.Model.REJECT)},afterDrop:function(e){this.getData().remove(e)},afterErase:function(e){this.removeFromRemoved(e)},addSorted:function(e){var t,i=this.getRemoteSort(),n=this.getData();return i&&n.setSorters(this.getSorters()),t=n.findInsertionIndex(e),i&&n.setSorters(null),this.insert(t,e)},remove:function(e,t,i){var n,r,s,o,a=this.getDataSource();if(e)if(e.isModel)n=-1<a.indexOf(e)?(s=[e],1):0;else{for(s=[],r=0,n=e.length;r<n;++r){if((o=e[r])&&o.isEntity){if(!a.contains(o))continue}else if(!(o=a.getAt(o)))continue;s.push(o)}n=s.length}return n?(this.removeIsMove=!0===t,this.removeIsSilent=i,a.remove(s),this.removeIsSilent=!1,s):[]},onCollectionRemove:function(e,t){var i,n,r=this,s=r.removed,o=t.items,a=o.length,l=t.at,c=t.replacement,u=r.removeIsMove||c&&Ext.Array.equals(o,c.items),d=r.removeIsSilent,h=!t.next,f=r.getDataSource();if(!r.ignoreCollectionRemove){for(c&&r.setMoving(c.items,!0),i=a-1;0<=i;i--)n=o[i],f.contains(n)||(!s||u||n.phantom||n.erasing?n.unjoin(r):(n.removedFrom=l+i,s.push(n),r.needsSync=!0));d||c&&c.items.length||(r.fireEvent("remove",r,o,l,u),h&&r.fireEvent("datachanged",r)),c&&r.setMoving(c.items,!1)}},onFilterEndUpdate:function(){this.destroying||this.destroyed||(this.activeRanges&&this.syncActiveRanges(),this.callParent(arguments),this.callObservers("Filter"))},removeAt:function(e,t){var i=this.getData();if((e=Math.max(e,0))<i.length){if(1===arguments.length)t=1;else if(!t)return;i.removeAt(e,t)}},removeAll:function(e){var t=this.getData(),i=t.getRange();return t.length&&(this.removeIsSilent=!0,this.callObservers("BeforeRemoveAll"),t.removeAll(),this.removeIsSilent=!1,e||(this.fireEvent("clear",this,i),this.fireEvent("datachanged",this)),this.callObservers("AfterRemoveAll",[!!e])),i},setRecords:function(e){var t=this.getCount();++this.loadCount,t?this.getData().splice(0,t,e):this.add(e)},splice:function(e,t,i){return this.getData().splice(e,t,i)},onProxyLoad:function(e){var t=this,i=e.getResultSet(),n=e.getRecords(),r=e.wasSuccessful();t.destroyed||(i&&(t.totalCount=i.getTotal()),r?(n=t.processAssociation(n),t.loadRecords(n,e.getAddRecords()?{addRecords:!0}:void 0),t.attachSummaryRecord(i)):t.loading=!1,t.hasListeners.load&&t.fireEvent("load",t,n,r,e),t.callObservers("AfterLoad",[n,r,e]))},onProxyWrite:function(e){e.wasSuccessful()&&this.attachSummaryRecord(e.getResultSet()),this.callParent([e])},filterDataSource:function(e){var t,i=this.getDataSource(),n=i.items,r=n.length,s=[];for(t=0;t<r;t++)e.call(i,n[t])&&s.push(n[t]);return s},getNewRecords:function(){return this.filterDataSource(this.filterNew)},getRejectRecords:function(){return this.filterDataSource(this.filterRejects)},getUpdatedRecords:function(){return this.filterDataSource(this.filterUpdated)},loadData:function(e,t){var i,n=e.length,r=[];for(i=0;i<n;i++)r.push(this.createModel(e[i]));r=this.processAssociation(r),this.loadRecords(r,t?this.addRecordsOptions:void 0)},loadRawData:function(e,t){var i,n,r,s=this.getSession();return n=(i=this.getProxy().getReader().read(e,s?{recordCreator:s.recordCreator}:void 0)).getRecords(),(r=i.getSuccess())&&(this.totalCount=i.getTotal(),this.loadRecords(n,t?this.addRecordsOptions:void 0)),r},loadRecords:function(e,t){var i,n,r=this.getData();t&&(i=t.addRecords),this.getRemoteSort()||this.getSortOnLoad()||(n=!0,r.setAutoSort(!1)),i||this.clearData(!0),this.loading=!1,this.ignoreCollectionAdd=!0,this.callObservers("BeforePopulate"),r.add(e),this.ignoreCollectionAdd=!1,n&&r.setAutoSort(!0),this.afterLoadRecords(e)},afterLoadRecords:function(e){var t,i=this,n=e.length;for(t=0;t<n;t++)e[t].join(i);i.isEmptyStore||(++i.loadCount,i.complete=!0),i.hasListeners.datachanged&&i.fireEvent("datachanged",i),i.hasListeners.refresh&&i.fireEvent("refresh",i),i.callObservers("AfterPopulate")},loadPage:function(e,t){var i=this.getPageSize();this.currentPage=e,t=Ext.apply({page:e,start:(e-1)*i,limit:i,addRecords:!this.getClearOnPageLoad()},t),this.read(t)},nextPage:function(e){this.loadPage(this.currentPage+1,e)},previousPage:function(e){this.loadPage(this.currentPage-1,e)},clearData:function(e){var t,i,n,r,s=this.removed,o=this.getDataSource(),a=this.getClearRemovedOnLoad(),l=s&&e&&!a;if(o){for(n=0,r=(t=o.items).length;n<r;++n)i=t[n],l&&Ext.Array.contains(s,i)||i.unjoin(this);this.ignoreCollectionRemove=!0,this.callObservers("BeforeClear"),o.removeAll(),this.ignoreCollectionRemove=!1,this.callObservers("AfterClear")}!s||e&&!a||(s.length=0)},onIdChanged:function(e,t,i){this.getData().updateKey(e,t),this.fireEvent("idchanged",this,e,t,i)},commitChanges:function(){var e=this.getModifiedRecords(),t=e.length,i=0;for(Ext.suspendLayouts(),this.beginUpdate();i<t;i++)e[i].commit();this.cleanRemoved(),this.endUpdate(),Ext.resumeLayouts(!0),this.fireEvent("commit",this)},filterNewOnly:function(e){return!0===e.phantom},filterRejects:function(e){return e.phantom||e.dirty},rejectChanges:function(){var e,t,i,n,r,s,o=this,a=o.getRejectRecords(),l=a.length;for(Ext.suspendLayouts(),o.beginUpdate(),e=0;e<l;e++)(t=a[e]).phantom?(i=i||[]).push(t):t.reject();if(i)for(o.remove(i),e=0,l=i.length;e<l;++e)i[e].reject();if(a=o.getRawRemovedRecords()){for(l=a.length,(n=!o.getRemoteSort()&&o.isSorted())&&(s=(r=o.getData()).getAutoSort(),r.setAutoSort(!1)),e=l-1;0<=e;e--)(t=a[e]).reject(),n||o.insert(t.removedFrom||0,t);n&&(r.setAutoSort(s),o.add(a)),a.length=0}o.endUpdate(),Ext.resumeLayouts(!0),o.fireEvent("reject",o)},doDestroy:function(){var e=this.loadTask,t=this.getData().getSource();this.clearData(),this.setSession(null),this.observers=null,e&&(e.cancel(),this.loadTask=null),t&&t.destroy(),this.callParent()},privates:{commitOptions:{commit:!0},attachSummaryRecord:function(e){if(e){var t,i,n,r,s,o=e.getSummaryData(),a=this.getGrouper(),l=this.summaryRecord,c=this.commitOptions;if(o&&(l?l.set(o.data,c):(this.summaryRecord=o).isRemote=!0),a&&(o=e.getGroupData()))for(t=this.getGroups(),n=0,i=o.length;n<i;++n)r=o[n],(s=t.getItemGroup(r))&&((l=s.summaryRecord)?l.set(r.data,c):(s.summaryRecord=r).isRemote=!0)}},fetch:function(e){e=Ext.apply({},e),this.setLoadOptions(e),this.createOperation("read",e).execute()},fireChangeEvent:function(e){return this.getDataSource().contains(e)},onBeforeLoad:function(e){this.callObservers("BeforeLoad",[e])},onRemoteFilterSet:function(e,t){e&&this.getData().setFilters(t?null:e),this.callParent([e,t])},onRemoteSortSet:function(e,t){var i=this.getData();e&&i.setSorters(t?null:e),i.setAutoGroup(!t),this.callParent([e,t])},isMoving:function(e,t){var i,n,r=this.moveMap,s=0;if(r)if(e)if(Ext.isArray(e))for(n=0,i=e.length;n<i;++n)s+=r[e[n].id]?1:0;else r[e.id]&&++s;else s=t?r:this.moveMapCount;return s},setLoadOptions:function(e){var t,i,n=this.getPageSize();this.getRemoteSort()&&!e.grouper&&(i=this.getGrouper())&&(e.grouper=i),(n||"start"in e||"limit"in e||"page"in e)&&(e.page=null!=e.page?e.page:this.currentPage,e.start=void 0!==e.start?e.start:(e.page-1)*n,e.limit=null!=e.limit?e.limit:n,this.currentPage=e.page),e.addRecords=e.addRecords||!1,e.recordCreator||(t=this.getSession())&&(e.recordCreator=t.recordCreator),this.callParent([e])},setMoving:function(e,t){var i,n,r=this.moveMap||(this.moveMap={}),s=e.length;for(i=0;i<s;++i)n=e[i].id,t?r[n]?++r[n]:(r[n]=1,++this.moveMapCount):0==--r[n]&&(delete r[n],--this.moveMapCount);0===this.moveMapCount&&(this.moveMap=null)},processAssociation:function(e){var t=this.getAssociatedEntity();return t&&(e=this.getRole().processLoad(this,t,e,this.getSession())),e}}}),Ext.define("Ext.data.reader.Array",{extend:Ext.data.reader.Json,alternateClassName:"Ext.data.ArrayReader",alias:"reader.array",config:{totalProperty:void 0,successProperty:void 0},createFieldAccessor:function(e){var t,i=e.mapping,n=e.hasMapping()?i:e.ordinal;return e.mapping=n,t=this.callParent(arguments),e.mapping=i,t},getModelData:function(e){return{}}}),Ext.define("Ext.data.ArrayStore",{extend:Ext.data.Store,alias:"store.array",alternateClassName:["Ext.data.SimpleStore"],config:{proxy:{type:"memory",reader:"array"}},loadData:function(e,t){if(this.expandData){for(var i=[],n=0,r=e.length;n<r;n++)i[i.length]=[e[n]];e=i}this.callParent([e,t])}}),Ext.define("Ext.data.StoreManager",{extend:Ext.util.MixedCollection,alternateClassName:["Ext.StoreMgr","Ext.data.StoreMgr","Ext.StoreManager"],singleton:!0,register:function(){var e,t;for(e=0;t=arguments[e];e++)this.add(t)},unregister:function(){var e,t;for(e=0;t=arguments[e];e++)this.remove(this.lookup(t))},lookup:function(e,t){var i,n,r,s,o,a;if(Ext.isArray(e)){if(i=e[0],n=e,!Ext.isObject(i)){if(s=["field1"],r=Ext.isArray(i))for(o=2,a=i.length;o<=a;++o)s.push("field"+o);else for(n=[],o=0,a=e.length;o<a;++o)n.push([e[o]]);return new Ext.data.ArrayStore({data:n,fields:s,autoDestroy:!0,autoCreated:!0,expanded:!r})}e={data:n}}return Ext.isString(e)?this.get(e):Ext.Factory.store(e,t)},getKey:function(e){return e.storeId},addEmptyStore:function(){var e=this.$emptyStore,t={destroy:Ext.emptyFn};e||((e=this.$emptyStore=Ext.regStore("ext-empty-store",{proxy:"memory",useModelWarning:!1})).ignoreLeaked=!0,e.isEmptyStore=!0,e.on=e.addListener=function(){return t},e.un=e.removeListener=Ext.emptyFn,e.add=e.remove=e.insert=e.destroy=e.loadData=function(){Ext.raise("Cannot modify ext-empty-store")}),this.add(e)},clear:function(){this.callParent(),this.addEmptyStore()}},function(){Ext.regStore=function(e,t){var i;if(Ext.isObject(e))t=e;else{if(Ext.data.StoreManager.containsKey(e))return Ext.data.StoreManager.lookup(e);t.storeId=e}return i=t instanceof Ext.data.Store?t:new Ext.data.Store(t),Ext.data.StoreManager.register(i),i},Ext.getStore=function(e){return Ext.data.StoreManager.lookup(e)},Ext.data.StoreManager.addEmptyStore()}),Ext.define("Ext.app.domain.Store",{extend:Ext.app.EventDomain,singleton:!0,type:"store",prefix:"store.",idMatchRe:/^#/,constructor:function(){this.callParent(),this.monitor(Ext.data.AbstractStore)},match:function(e,t){var i=!1,n=e.alias;return"*"===t?i=!0:this.idMatchRe.test(t)?i=e.getStoreId()===t.substring(1):n&&(i=-1<Ext.Array.indexOf(n,this.prefix+t)),i}}),Ext.define("Ext.app.Controller",{extend:Ext.app.BaseController,statics:{strings:{model:{getter:"getModel",upper:"Model"},view:{getter:"getView",upper:"View"},controller:{getter:"getController",upper:"Controller"},store:{getter:"getStore",upper:"Store"},profile:{getter:"getProfile",upper:"Profiles"}},controllerRegex:/^(.*)\\.controller\\./,profileRegex:/^(.*)\\.profile\\./,createGetter:function(e,t){return function(){return this[e](t)}},getGetterName:function(e,t){var i,n="get",r=e.split("."),s=r.length;for(i=0;i<s;i++)n+=Ext.String.capitalize(r[i]);return n+=t},resolveNamespace:function(e,t){var i,n,r,s,o=Ext.app.Controller;return i=e.prototype.isProfile?o.profileRegex:o.controllerRegex,n=Ext.getClassName(e),(r=t.$namespace||t.namespace||Ext.app.getNamespace(n)||(s=i.exec(n))&&s[1])||Ext.log.warn("Missing namespace for "+n+", please define it in namespaces property of your Application class."),r},processDependencies:function(e,t,i,n,r,s){if(r&&r.length){var o,a,l,c,u,d,h,f,g=this.strings[n];for(Ext.isArray(r)||(r=[r]),u=0,d=r.length;u<d;u++)c=r[u],o=this.getFullName(c,n,i,s),r[u]=a=o.absoluteName,l=o.shortName,t.push(a),e[h=this.getGetterName(l,g.upper)]?"getMainView"===h&&Ext.log.warn("Cannot have a view named 'Main' - getter conflicts with mainView config."):e[h]=f=this.createGetter(g.getter,c),f&&"controller"!==n&&(f["Ext.app.getter"]=!0)}},getFullName:function(e,t,i,n){var r,s,o=e;return 0<(r=e.indexOf("@"))?(o=e.substring(0,r),s=e.substring(r+1)+"."+o):0<e.indexOf(".")&&(Ext.ClassManager.isCreated(e)||this.hasRegisteredPrefix(e))?o=(s=e).replace(i+"."+t+".",""):(i||Ext.log.warn("Cannot find namespace for "+t+" "+e+", assuming it is fully qualified class name"),i?(s=i+"."+t+"."+(n?n+"."+e:e),o=e):s=e),{absoluteName:s,shortName:o}},hasRegisteredPrefix:function(e){var t=Ext.ClassManager.getPrefix(e);return t&&t!==e}},models:null,views:null,stores:null,controllers:null,config:{application:null,refs:null,active:!0,moduleClassName:null},onClassExtended:function(e,t,i){var o=i.onBeforeCreated;i.onBeforeCreated=function(e,t){var i,n,r=Ext.app.Controller,s=[];n=e.prototype,(i=r.resolveNamespace(e,t))&&(n.$namespace=i),r.processDependencies(n,s,i,"model",t.models),r.processDependencies(n,s,i,"view",t.views),r.processDependencies(n,s,i,"store",t.stores),r.processDependencies(n,s,i,"controller",t.controllers),Ext.require(s,Ext.Function.pass(o,arguments,this))}},constructor:function(e){this.initAutoGetters(),this.callParent([e])},normalizeRefs:function(e){var i=[];return e&&(Ext.isObject(e)?Ext.Object.each(e,function(e,t){Ext.isString(t)&&(t={selector:t}),t.ref=e,i.push(t)}):Ext.isArray(e)&&(i=Ext.Array.merge(i,e))),(e=this.refs)&&(this.refs=null,(e=this.normalizeRefs(e))&&(i=Ext.Array.merge(i,e))),i},getRefMap:function(){var e,t,i,n,r=this._refMap;if(!r&&(e=this.getRefs(),r=this._refMap={},e))for(n=0,i=e.length;n<i;n++)r[(t=e[n]).ref]=t.selector;return r},applyId:function(e){return e||Ext.app.Controller.getFullName(this.$className,"controller",this.$namespace).shortName},applyRefs:function(e){return this.normalizeRefs(Ext.clone(e))},updateRefs:function(e){e&&this.ref(e)},initAutoGetters:function(){var e,t,i=this.self.prototype;for(e in i)(t=i[e])&&t["Ext.app.getter"]&&t.call(this)},doInit:function(e){this._initialized||(this.init(e),this._initialized=!0)},finishInit:function(e){var t,i,n=this.controllers;if(this._initialized&&n&&n.length)for(t=0,i=n.length;t<i;t++)this.getController(n[t]).finishInit(e)},init:Ext.emptyFn,onLaunch:Ext.emptyFn,activate:function(){this.setActive(!0)},deactivate:function(){this.setActive(!1)},isActive:function(){return this.getActive()},ref:function(e){var t,i,n,r=0,s=e.length;for(e=Ext.Array.from(e),this.references=this.references||[];r<s;r++)i=(t=e[r]).ref,this[n="get"+Ext.String.capitalize(i)]||(this[n]=Ext.Function.pass(this.getRef,[i,t],this)),this.references.push(i.toLowerCase())},addRef:function(e){this.ref(e)},getRef:function(e,t,i){var n=this.refCache||(this.refCache={}),r=n[e];return t=t||{},i=i||{},Ext.apply(t,i),t.forceCreate?Ext.ComponentManager.create(t,"component"):(r||(t.selector&&(n[e]=r=Ext.ComponentQuery.query(t.selector)[0]),!r&&t.autoCreate&&(n[e]=r=Ext.ComponentManager.create(t,"component")),r&&r.on("destroy",function(){n[e]=null})),r)},hasRef:function(e){var t=this.references;return t&&-1!==Ext.Array.indexOf(t,e.toLowerCase())},getController:function(e){var t=this.getApplication();return e===this.getId()?this:t&&t.getController(e)},getStore:function(e){var t,i;return t=-1===e.indexOf("@")?e:e.split("@")[0],(i=Ext.StoreManager.get(t))||(e=Ext.app.Controller.getFullName(e,"store",this.$namespace))&&(i=Ext.create(e.absoluteName,{id:t})),i},getModel:function(e){var t=Ext.app.Controller.getFullName(e,"model",this.$namespace),i=Ext.ClassManager.get(t.absoluteName);return i=i||Ext.data.schema.Schema.lookupEntity(e)},getProfile:function(e){return e=Ext.app.Controller.getFullName(e,"profile",this.$namespace)},getView:function(e){var t=Ext.app.Controller.getFullName(e,"view",this.$namespace);return t&&Ext.ClassManager.get(t.absoluteName)},destroy:function(e,t){var i,n,r=this.application;if(!t&&r&&r.unregister(this),this.application=null,e)for(n in i=this.refCache)i.hasOwnProperty(n)&&Ext.destroy(i[n]);this.callParent()}}),Ext.define("Ext.app.Application",{extend:Ext.app.Controller,isApplication:!0,scope:void 0,namespaces:[],paths:null,config:{name:"",appProperty:"app",profiles:[],currentProfile:null,mainView:{$value:null,lazy:!0},defaultToken:null,glyphFontFamily:null,quickTips:!0,router:null},onClassExtended:function(e,t,i){var n,r,s=Ext.app.Controller,o=e.prototype,a=[];(r=t.name||e.superclass.name)&&(t.$namespace=r,Ext.app.addNamespaces(r)),t.namespaces&&Ext.app.addNamespaces(t.namespaces),t["paths processed"]?delete t["paths processed"]:Ext.app.setupPaths(r,"appFolder"in t?t.appFolder:e.superclass.appFolder,t.paths),s.processDependencies(o,a,r,"profile",t.profiles),o.getDependencies(e,t,a),a.length&&(n=i.onBeforeCreated,i.onBeforeCreated=function(e,t){var i=Ext.Array.clone(arguments);t.__handleRequires?t.__handleRequires.call(this,a,Ext.bind(function(){return n.apply(this,i)},this)):Ext.require(a,function(){return n.apply(this,i)})})},getDependencies:Ext.emptyFn,constructor:function(e){var t=Ext.app.Application;Ext.route.Router.application=this,t.instance||(t.instance=this),this.callParent([e]),Ext.isEmpty(this.getName())&&Ext.raise("[Ext.app.Application] Name property is required"),this.doInit(this),Ext.on("appupdate",this.onAppUpdate,this,{single:!0}),Ext.Loader.setConfig({enabled:!0}),this.onProfilesReady()},applyId:function(e){return e||this.$className},updateRouter:function(e){e&&Ext.route.Router.setConfig(e)},onAppUpdate:Ext.emptyFn,onProfilesReady:function(){var e,t,i,n=this.getProfiles(),r=n.length;for(t=0;t<r;t++)(i=Ext.create(n[t],{application:this})).isActive()&&!e&&(e=i,this.setCurrentProfile(e));e&&e.init(),this.initControllers(),this.onBeforeLaunch(),this.finishInitControllers(),Ext.fireEvent("applaunch",this)},doInit:function(e){this.initNamespace(e),this.callParent([e])},initNamespace:function(e){var t=e.getAppProperty(),i=Ext.namespace(e.getName());i&&(i.getApplication=function(){return e},t&&(i[t]?i[t]!==e&&Ext.log.warn("An existing reference is being overwritten for "+name+"."+t+". See the appProperty config."):i[t]=e))},initControllers:function(){var e,t,i=Ext.Array.from(this.controllers),n=this.getCurrentProfile();for(this.controllers=new Ext.util.MixedCollection,e=0,t=i.length;e<t;e++)this.getController(i[e]);if(n)for(e=0,t=(i=n.getControllers()).length;e<t;e++)this.getController(i[e])},finishInitControllers:function(){var e,t,i;for(t=0,i=(e=this.controllers.getRange()).length;t<i;t++)e[t].finishInit(this)},launch:Ext.emptyFn,onBeforeLaunch:function(){var e,t,i,n,r=this,s=Ext.util.History,o=r.getDefaultToken(),a=r.getCurrentProfile();for(r.initMainView(),a&&a.launch(),r.launch.call(r.scope||r),r.launched=!0,r.fireEvent("launch",r),i=(e=r.controllers.items).length,t=0;t<i;t++)e[t].onLaunch(r);s.ready||s.init(),(n=s.getToken())||n===o?Ext.route.Router.onStateChange(n):o&&s.replace(o),Ext.Microloader&&Ext.Microloader.appUpdate&&Ext.Microloader.appUpdate.updated&&Ext.Microloader.fireAppUpdate(),r.cnsTimer||(r.cnsTimer=Ext.defer(Ext.ClassManager.clearNamespaceCache,2e3,Ext.ClassManager))},getModuleClassName:function(e,t){return Ext.app.Controller.getFullName(e,t,this.getName()).absoluteName},initMainView:function(){var e,t=this.getCurrentProfile();t&&(e=t.getMainView()),e?this.setMainView(e):this.getMainView()},applyMainView:function(e){return this.getView(e).create({$initParent:this.viewport})},createController:function(e){return this.getController(e)},destroyController:function(e){"string"==typeof e&&(e=this.getController(e,!0)),Ext.destroy(e)},getController:function(e,t){var i,n,r,s,o,a,l=this.controllers;if(!(n=l.get(e)))for(s=0,r=(a=l.items).length;s<r;++s)if((i=(o=a[s]).getModuleClassName())&&i===e){n=o;break}return n||t||(i=this.getModuleClassName(e,"controller"),n=Ext.create(i,{application:this,moduleClassName:i}),l.add(n),this._initialized&&n.doInit(this)),n},unregister:function(e){this.controllers.remove(e)},getApplication:function(){return this},destroy:function(t){var e=this,i=e.controllers,n=Ext.namespace(e.getName()),r=e.getAppProperty();Ext.undefer(e.cnsTimer),Ext.un("appupdate",e.onAppUpdate,e),Ext.destroy(e.viewport),i&&i.each(function(e){e.destroy(t,!0)}),e.controllers=null,e.callParent([t,!0]),n&&n[r]===e&&delete n[r],Ext.route.Router.application===e&&(Ext.route.Router.application=null),Ext.app.Application.instance===e&&(Ext.app.Application.instance=null)},updateGlyphFontFamily:function(e){Ext.setGlyphFontFamily(e)},applyProfiles:function(e){var t=this;return Ext.Array.map(e,function(e){return t.getModuleClassName(e,"profile")})}},function(){Ext.getApplication=function(){return Ext.app.Application.instance}}),Ext.application=function(e){function t(t){Ext.onReady(function(){var e=Ext.viewport;(e=e&&e.Viewport)&&e.setup&&e.setup(t.prototype.config.viewport),Ext.app.Application.instance=new t})}"string"==typeof e?Ext.require(e,function(){t(Ext.ClassManager.get(e))}):(e=Ext.apply({extend:"Ext.app.Application"},e),Ext.app.setupPaths(e.name,e.appFolder,e.paths),e["paths processed"]=!0,Ext.define(e.name+".$application",e,function(){t(this)}))},Ext.define("Ext.util.ItemCollection",{extend:Ext.util.MixedCollection,alternateClassName:"Ext.ItemCollection",getKey:function(e){return e.getItemId&&e.getItemId()},has:function(e){return this.map.hasOwnProperty(e.getId())}}),Ext.define("Ext.mixin.Queryable",{mixinId:"queryable",isQueryable:!0,query:function(e){return e=e||"*",Ext.ComponentQuery.query(e,this.getQueryRoot())},queryBy:function(e,t){for(var i,n=[],r=this.getQueryRoot().getRefItems(!0),s=0,o=r.length;s<o;++s)i=r[s],!1!==e.call(t||i,i)&&n.push(i);return n},queryById:function(e){return this.down(Ext.makeIdSelector(e))},child:function(e){var t=this.getQueryRoot().getRefItems();return e&&e.isComponent?this.matchById(t,e.getItemId()):(e&&(t=Ext.ComponentQuery.query(e,t)),t.length?t[0]:null)},down:function(e){return e&&e.isComponent?this.matchById(this.getRefItems(!0),e.getItemId()):(e=e||"",this.query(e)[0]||null)},visitPreOrder:function(e,t,i,n){Ext.ComponentQuery._visit(!0,e,this.getQueryRoot(),t,i,n)},visitPostOrder:function(e,t,i,n){Ext.ComponentQuery._visit(!1,e,this.getQueryRoot(),t,i,n)},getRefItems:function(){return[]},getQueryRoot:function(){return this},privates:{matchById:function(e,t){var i,n,r=e.length;for(i=0;i<r;++i)if((n=e[i]).getItemId()===t)return n;return null}}}),Ext.define("Ext.mixin.Container",{extend:Ext.Mixin,mixinConfig:{id:"container"},isContainer:!0,nameHolder:!1,referenceHolder:!1,getNamedItems:function(){return Ext.referencesDirty&&Ext.fixReferences(),this.nameRefs||null},getReferences:function(){return Ext.referencesDirty&&Ext.fixReferences(),this.refs||null},lookup:function(e){var t=this.getReferences();return t&&t[e]||null},lookupName:function(e){var t=this.getNamedItems();return t&&t[e]||null},lookupReference:function(e){return this.lookup(e)},privates:{attachNameRef:function(e){var t,i,n=e.name||e._name;!n||this.destroying||this.destroyed||((t=(i=this.nameRefs||(this.nameRefs={}))[n])?t.isInstance?Ext.raise('Duplicate name: "'+n+'" on '+this.id+" between "+t.id+" and "+e.id):t.push(e):t=e.shareableName?[e]:e,i[n]=t)},attachReference:function(e){var t,i;this.destroying||this.destroyed||((i=this.refs||(this.refs={}))[t=e.referenceKey]&&i[t]!==e&&Ext.log.warn('Duplicate reference: "'+t+'" on '+this.id),i[t]=e)},containerOnAdded:function(e,t){Ext.ComponentManager.markReferencesDirty()},containerOnRemoved:function(e){e||Ext.ComponentManager.markReferencesDirty()},initContainerInheritedState:function(e,t){var i=this,n=i.getController(),r=i.getSession(),s=i.getConfig("viewModel",!0),o=i.reference,a=i.referenceHolder;i.nameHolder&&(e.nameHolder=i),n?(e.referenceHolder=n,a=!0):a&&(e.referenceHolder=i),a?e.referencePath="":o&&i.isParentReference&&(e.referencePath=i.referenceKey+"."),r&&(e.session=r),s?e.viewModelPath="":o&&i.isParentReference&&(e.viewModelPath=i.viewModelKey+".")},setupReference:function(e){var t;return e&&">"===e.charAt(t=e.length-1)&&(this.isParentReference=!0,e=e.substring(0,t)),e&&!Ext.validIdRe.test(e)&&Ext.Error.raise('Invalid reference "'+e+'" for '+this.getId()+" - not a valid identifier"),e}}}),Ext.define("Ext.util.KeyMap",{alternateClassName:"Ext.KeyMap",eventName:"keydown",constructor:function(e){var t=this;(1!==arguments.length||"string"==typeof e||e.dom||e.tagName||e===document||e.isComponent)&&Ext.raise("Legacy multi-argument KeyMap constructor is removed. Use a config object instead."),Ext.apply(t,e),t.bindings=[],t.target.isComponent||(t.target=Ext.get(t.target)),t.binding?t.addBinding(t.binding):e.key&&t.addBinding(e),t.enable()},addBinding:function(e){var t,i,n=e.key;if(this.processing&&(this.bindings=this.bindings.slice(0)),Ext.isArray(e))for(t=0,i=e.length;t<i;t++)this.addBinding(e[t]);else this.bindings.push(Ext.apply({keyCode:this.processKeys(n)},e))},removeBinding:function(e){var t,i,n,r=this.bindings,s=r.length;for(this.processing&&(this.bindings=r.slice(0)),n=this.processKeys(e.key),t=0;t<s;t++)if(((i=r[t]).fn||i.handler)===(e.fn||e.handler)&&i.scope===e.scope&&e.alt===i.alt&&e.ctrl===i.ctrl&&e.shift===i.shift&&Ext.Array.equals(i.keyCode,n))return void Ext.Array.erase(this.bindings,t,1)},processKeys:function(e){var t,i,n,r,s,o=!1;if(e.test)return e;if(Ext.isString(e)){for(i=[],s=0,r=(n=e.toUpperCase()).length;s<r;s++)i.push(n.charCodeAt(s));e=i,o=!0}if(Ext.isArray(e)||(e=[e]),!o)for(s=0,r=e.length;s<r;s++)t=e[s],Ext.isString(t)&&(e[s]=t.toUpperCase().charCodeAt(0));return e},handleTargetEvent:function(e){var t,i,n,r,s=this;if(s.enabled&&(t=s.bindings,e=s.processEvent.apply(s.processEventScope||s,arguments))){if(s.lastKeyEvent=e,s.ignoreInputFields&&Ext.fly(e.target).isInputField())return;if(!e.getKey)return e;for(s.processing=!0,i=0,n=t.length;i<n;i++)if(!1===(r=s.processBinding(t[i],e)))return s.processing=!1,r;s.processing=!1}},processEvent:Ext.identityFn,processBinding:function(e,t){if(this.checkModifiers(e,t)){var i,n,r,s=t.getKey(),o=e.fn||e.handler,a=e.scope||this,l=e.keyCode,c=e.defaultEventAction;if(l.test){if(l.test(String.fromCharCode(t.getCharCode()))&&(!0!==(r=o.call(a,s,t))&&c&&t[c](),!1===r))return r}else if(l.length)for(i=0,n=l.length;i<n;i++)if(s===l[i]){if(!0!==(r=o.call(a,s,t))&&c&&t[c](),!1===r)return r;break}}},checkModifiers:function(e,t){var i,n,r,s,o=["shift","ctrl","alt"];for(i=0,n=o.length;i<n;i++)if(void 0!==(r=e[s=o[i]])&&r!==t[s+"Key"])return!1;return!0},on:function(e,t,i){var n,r,s,o;Ext.isObject(e)&&!Ext.isArray(e)?(n=e.key,r=e.shift,s=e.ctrl,o=e.alt):n=e,this.addBinding({key:n,shift:r,ctrl:s,alt:o,fn:t,scope:i})},un:function(e,t,i){var n,r,s,o;Ext.isObject(e)&&!Ext.isArray(e)?(n=e.key,r=e.shift,s=e.ctrl,o=e.alt):n=e,this.removeBinding({key:n,shift:r,ctrl:s,alt:o,fn:t,scope:i})},isEnabled:function(){return!!this.enabled},enable:function(){this.enabled||(this.target.on(this.eventName,this.handleTargetEvent,this,{capture:this.capture,priority:this.priority}),this.enabled=!0)},disable:function(){this.enabled&&(this.target.destroyed||this.target.removeListener(this.eventName,this.handleTargetEvent,this),this.enabled=!1)},setDisabled:function(e){e?this.disable():this.enable()},destroy:function(e){var t=this.target;this.bindings=[],this.disable(),this.target=null,e&&(t.destroy(),Ext.raise("Using removeTarget argument in KeyMap destructor is not supported.")),this.callParent()}}),Ext.define("Ext.util.KeyNav",{alternateClassName:"Ext.KeyNav",disabled:!1,defaultEventAction:!1,forceKeyDown:!1,eventName:"keypress",statics:{keyOptions:{left:37,right:39,up:38,down:40,space:32,pageUp:33,pageDown:34,del:46,backspace:8,home:36,end:35,enter:13,esc:27,tab:9}},constructor:function(e){var t,i,n=this;2===arguments.length&&Ext.raise("2-argument KeyNav constructor is removed. Use a config object instead."),t={target:(e=e||{}).target,ignoreInputFields:e.ignoreInputFields,eventName:n.getKeyEvent("forceKeyDown"in e?e.forceKeyDown:n.forceKeyDown,e.eventName),capture:e.capture},n.map&&n.map.destroy(),n.initConfig(e),e.processEvent&&(t.processEvent=e.processEvent,t.processEventScope=e.processEventScope||n),e.priority&&(t.priority=e.priority),e.keyMap?i=n.map=e.keyMap:(i=n.map=new Ext.util.KeyMap(t),n.destroyKeyMap=!0),n.addBindings(e),i.disable(),e.disabled||i.enable()},addBindings:function(e){var t,i,n,r=this.map,s=Ext.util.KeyNav.keyOptions,o=Ext.event.Event,a=e.scope||this;for(i in e)t=e[i],null!=(n=1===i.length?i.charCodeAt(0):s[i]||o[i.toUpperCase()])&&(i=n),!t||1!==i.length&&isNaN(i=parseInt(i,10))||("function"==typeof t&&(t={handler:t,defaultEventAction:void 0!==e.defaultEventAction?e.defaultEventAction:this.defaultEventAction}),r.addBinding({key:i,ctrl:t.ctrl,shift:t.shift,alt:t.alt,handler:Ext.Function.bind(this.handleEvent,t.scope||a,[t.handler||t.fn,this],!0),defaultEventAction:void 0!==t.defaultEventAction?t.defaultEventAction:this.defaultEventAction}))},handleEvent:function(e,t,i,n){return n.lastKeyEvent=t,i.call(this,t)},destroy:function(e){e&&Ext.raise("removeEl argument in KeyNav destructor is not supported anymore."),this.destroyKeyMap&&this.map.destroy(e),this.map=null,this.callParent()},enable:function(){this.map&&(this.map.enable(),this.disabled=!1)},disable:function(){this.map&&this.map.disable(),this.disabled=!0},setDisabled:function(e){this.map.setDisabled(e),this.disabled=e},isEnabled:function(){return!this.disabled},getKeyEvent:function(e,t){return e||Ext.supports.SpecialKeyDownRepeat&&!t?"keydown":t||this.eventName}}),Ext.define("Ext.mixin.FocusableContainer",{extend:Ext.Mixin,mixinConfig:{id:"focusablecontainer"},isFocusableContainer:!0,focusableContainer:!1,resetFocusPosition:!1,activeChildTabIndex:0,inactiveChildTabIndex:-1,allowFocusingDisabledChildren:!1,focusableContainerEl:"el",privates:{initFocusableContainer:function(e){var t,i,n;if(this.focusableContainer)e=null==e||e,this.doInitFocusableContainer(e);else for(i=0,n=(t=this.getFocusables()).length;i<n;i++)t[i].ownerFocusableContainer=null},doInitFocusableContainer:function(e){var t,i=this,n=i.focusableContainerEl;n.isElement||(n=i.focusableContainerEl=i[n]),i.initFocusableContainerKeyNav&&i.initFocusableContainerKeyNav(n),e&&(i.clearFocusables(),i.isDisabled()||(t=i.findNextFocusableChild({step:1})||i.findNextFocusableChild({beforeRender:!0}))&&i.activateFocusable(t)),t=i.findNextFocusableChild({firstTabbable:!0}),i.activateFocusableContainer(!!t&&!i.isDisabled())},initFocusableContainerKeyNav:function(e){var t=this;t.focusableKeyNav||(e=e||t.focusableContainerEl,t.focusableKeyNav=new Ext.util.KeyNav({target:e,disabled:!0,eventName:"keydown",processEvent:t.processFocusableContainerKeyEvent,processEventScope:t,scope:t,tab:t.onFocusableContainerTabKey,enter:{handler:t.onFocusableContainerEnterKey,ctrl:!1,shift:!1,alt:!1},space:{handler:t.onFocusableContainerSpaceKey,ctrl:!1,shift:!1,alt:!1},up:{handler:t.onFocusableContainerUpKey,ctrl:!1,shift:!1,alt:!1},down:{handler:t.onFocusableContainerDownKey,ctrl:!1,shift:!1,alt:!1},left:{handler:t.onFocusableContainerLeftKey,ctrl:!1,shift:!1,alt:!1},right:{handler:t.onFocusableContainerRightKey,ctrl:!1,shift:!1,alt:!1}}))},destroyFocusableContainer:function(){this.focusableKeyNav=Ext.destroy(this.focusableKeyNav)},activateFocusableContainer:function(e){var t=this.focusableKeyNav;t&&t.setDisabled(!e)},isFocusableContainerActive:function(){var e=this.focusableKeyNav;return!!e&&!e.disabled},getFocusables:function(){return this.items.items},initDefaultFocusable:function(){var e,t,i,n,r=!1;if(n=(e=this.getFocusables()).length){for(i=0;i<n;i++)if(!(t=e[i]).isDisabled()&&t.isFocusable()){r=!0;break}if(r)return(t=this.findNextFocusableChild({items:e,step:!0}))&&this.activateFocusable(t),t}},clearFocusables:function(e){var t,i,n=this.getFocusables(),r=n.length;for(i=0;i<r;i++)!(t=n[i]).destroyed&&t.focusable&&t.isTabbable()&&this.deactivateFocusable(t)},processFocusableContainerKeyEvent:function(e){if(!Ext.fly(e.target).isInputField())return e},activateFocusable:function(e){e.setTabIndex(this.activeChildTabIndex)},deactivateFocusable:function(e){e.setTabIndex(this.inactiveChildTabIndex)},onFocusableContainerTabKey:function(){return!0},onFocusableContainerEnterKey:function(){return!0},onFocusableContainerSpaceKey:function(){return!0},onFocusableContainerUpKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!1)},onFocusableContainerDownKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!0)},onFocusableContainerLeftKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!1)},onFocusableContainerRightKey:function(e){return e.preventDefault(),this.moveChildFocus(e,!0)},getFocusableFromEvent:function(e){var t=Ext.Component.from(e);return t||Ext.raise("No focusable child found for keyboard event!"),t},moveChildFocus:function(e,t){var i=this.getFocusableFromEvent(e);return this.focusChild(i,t,e)},focusChild:function(e,t){var i=this.findNextFocusableChild({child:e,step:t});return i&&i.focus(),i},findNextFocusableChild:function(e){var t,i,n,r,s,o,a,l,c=e.beforeRender,u=e.firstTabbable;for(t=e.items||this.getFocusables(),r=null!=e.step?e.step:1,n=e.child,l=!!this.allowFocusingDisabledChildren,s=Ext.Array.indexOf(t,n),r=!0===r?1:!1===r?-1:r,a=t.length,o=0<r?s<a?s+r:0:0<s?s+r:a-1;;o+=r){if(s<0&&(a<=o||o<0))return null;if(a<=o)o=-1;else if(o<0)o=a;else{if(o===s)return null;if((i=t[o])&&i.focusable&&(!i.isDisabled()||l))if(u){if(i.isTabbable&&i.isTabbable())return i}else if(c||i.isFocusable&&i.isFocusable())return i}}return null},onFocusEnter:function(e){var t;e.toComponent===this&&(t=this.initDefaultFocusable())&&t.focus(),this.activateFocusableContainer(!0)},onFocusLeave:function(e){this.resetFocusPosition&&(this.clearFocusables(),this.initDefaultFocusable())},beforeFocusableChildBlur:Ext.privateFn,afterFocusableChildBlur:Ext.privateFn,beforeFocusableChildFocus:function(e){!this.focusableContainer||this.destroying||this.destroyed||(this.clearFocusables(),this.activateFocusable(e))},afterFocusableChildFocus:function(e){!this.focusableContainer||this.destroying||this.destroyed||(this.lastFocusedChild=e)},onFocusableChildAdd:function(e){e.focusable&&(e.ownerFocusableContainer=this)},onFocusableChildRemove:function(e){var t;e.ownerFocusableContainer=null,e===this.lastFocusedChild&&(this.lastFocusedChild=null,t=this.initDefaultFocusable(),e.hasFocus&&(t=t||e.findFocusTarget())&&t.focus()),(e=t||this.findNextFocusableChild({step:1,beforeRender:!0}))||this.activateFocusableContainer(!1)},beforeFocusableChildEnable:Ext.privateFn,onFocusableChildEnable:function(e){var t,i=this;!i.focusableContainer||i.destroying||i.destroyed||(i.containsFocus?(t=Ext.ComponentManager.getActiveComponent(),i.clearFocusables(),i.activateFocusable(t)):i.resetFocusPosition||null==i.lastFocusedChild?(i.clearFocusables(),e.hasFocus&&(i.activateFocusable(e),t=e)):(i.deactivateFocusable(e),e===i.lastFocusedChild&&(i.clearFocusables(),i.activateFocusable(e)),t=i.findNextFocusableChild({firstTabbable:!0})),t||i.initDefaultFocusable(),i.activateFocusableContainer(!0))},beforeFocusableChildDisable:function(e){var t;!this.focusableContainer||this.destroying||this.destroyed||e.hasFocus&&(t=this.findNextFocusableChild({child:e})||e.findFocusTarget())&&t.focus()},onFocusableChildDisable:function(e){!this.focusableContainer||this.destroying||this.destroyed||(this.findNextFocusableChild({firstTabbable:!0})||this.initDefaultFocusable())||this.activateFocusableContainer(!1)},beforeFocusableChildHide:function(e){return this.beforeFocusableChildDisable(e)},onFocusableChildHide:function(e){return this.onFocusableChildDisable(e)},beforeFocusableChildShow:function(e){return this.beforeFocusableChildEnable(e)},onFocusableChildShow:function(e){return this.onFocusableChildEnable(e)},onFocusableChildMasked:Ext.privateFn,onFocusableChildDestroy:Ext.privateFn,onFocusableChildUpdate:Ext.privateFn},deprecated:{7:{configs:{enableFocusableContainer:"focusableContainer"}}}}),Ext.define("Ext.Container",{extend:Ext.Component,alternateClassName:["Ext.lib.Container","Ext.container.Container"],xtype:"container",isContainer:!0,mixins:[Ext.mixin.Queryable,Ext.mixin.Container,Ext.mixin.FocusableContainer],eventedConfig:{activeItem:0},config:{activeItemIndex:null,autoSize:null,bodyCls:null,layout:"auto",control:null,defaults:null,items:null,autoDestroy:!0,defaultType:null,defaultFocus:{$value:null,lazy:!0},innerCls:null,masked:null},weighted:!1,manageBorders:!1,classCls:Ext.baseCSSPrefix+"container",managedBordersCls:Ext.baseCSSPrefix+"managed-borders",template:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",uiCls:"body-el"}],constructor:function(e){this._items=this.items=new Ext.util.ItemCollection,this.innerItems=[],this.getReferences=this.getFirstReferences,this.onItemAdd=this.onFirstItemAdd,this.callParent(arguments),delete this.getReferences},initialize:function(){this.reference=this.setupReference(this.reference),this.callParent(),this.manageBorders&&this.addCls(this.managedBordersCls),this.getLayout()},applyMasked:function(e){var t,i=!0;return!1===e?i=!(e=!0):Ext.isString(e)?e={xtype:"loadmask",message:e}:e&&!e.isComponent&&e.hidden&&(i=!1),(t=Ext.factory(e,Ext.Mask,this.getMasked()))&&(t.sender=this,t.setHidden(!i),t.render(this.el)),t},mask:function(e){this.setMasked(e||!0)},unmask:function(){this.setMasked(!1)},initInheritedState:function(e,t){this.callParent([e,t]),this.initContainerInheritedState(e,t)},onAdded:function(e,t){this.callParent([e,t]),this.containerOnAdded(e,t)},onRemoved:function(e){this.containerOnRemoved(e),this.callParent([e])},afterItemShow:function(e){var t;e.getDocked()&&(t=this.getLayout(),this.items.generation++,t.handleDockedItemBorders())},afterItemHide:function(e){var t;e.getDocked()&&(t=this.getLayout(),this.items.generation++,t.handleDockedItemBorders())},applyBodyCls:function(e){return e&&Ext.dom.Element.splitCls(e)},updateBodyCls:function(e,t){this.bodyElement.replaceCls(t,e)},applyItems:function(e,t){var i,n=this;e&&(n.getDefaultType(),n.getDefaults(),n.initialized&&0<t.length&&n.removeAll(),!n.weighted||e.isWidget||e.xtype||(e=Ext.convertKeyedItems(e)),n.add(e),n.initialized&&(i=n.initialConfig.activeItem||n.config.activeItem||0,n.setActiveItem(i)))},applyControl:function(e){var t,i,n,r;for(t in e){for(i in r=e[t])n=r[i],Ext.isObject(n)&&(n.delegate=t);r.delegate=t,this.addListener(r)}return e},updateDisabled:function(e){this.callParent([e]),this.focusableContainer&&(this.getItems(),e?this.element.saveTabbableState():this.element.restoreTabbableState(),this.activateFocusableContainer(!e),e||this.initDefaultFocusable())},onFirstItemAdd:function(e){return delete this.onItemAdd,e.isInner&&this.innerHtmlElement&&!this.getHtml()&&!this.getTpl()&&(this.innerHtmlElement.destroy(),delete this.innerHtmlElement),this.onItemAdd.apply(this,arguments)},applyLayout:function(e,t){return"string"==typeof e&&(e={type:e}),t?(e&&(e.isLayout?Ext.raise("Cannot change layout instances on "+this.$className):t.setConfig(e)),t):(e&&e.isLayout||(e=Ext.Factory.layout(Ext.apply({container:this},e),Ext.layout.Auto)),this.link("layout",e),e)},updateDefaultType:function(e){this.defaultItemClass=Ext.ClassManager.getByAlias("widget."+e),this.defaultItemClass||Ext.Logger.error("Invalid defaultType of: '"+e+"', must be a valid component xtype")},factoryItem:function(e){return e||Ext.Logger.error("Invalid item given: "+e+", must be either the config object to factory a new item, or an existing component instance"),(e=this.applyItemDefaults(e)).isComponent||(this.$hasCachedDefaultItemClass||(this.getDefaultType(),this.$hasCachedDefaultItemClass=!0),e=Ext.factory(e,this.defaultItemClass)),e},add:function(e){var t,i,n,r,s,o=this,a=o.getItems(),l=o.weighted,c=!0,u=[];for(Ext.isArray(e)||(c=!(e=[e])),l&&(a.length?t=!0:Ext.sortByWeight(e)),i=0,n=e.length;i<n;i++)(r=e[i])?((s=r.isWidget)||(r.$initParent=o),r=o.factoryItem(r),t?o.doInsert(a.findInsertionIndex(r,Ext.weightSortFn),r,s):o.doAdd(r,s),delete r.$initParent,o.focusableContainer&&o.onFocusableChildAdd(r),u.push(r)):null!==r&&Ext.raise("Invalid item passed to add");return(o.isConfiguring||!o.getActiveItem())&&0<o.innerItems.length&&o.setActiveItem(o.initialConfig.activeItem||0),o.rendered&&n&&o.focusableContainer&&o.initFocusableContainer(),c?u:u[0]},onItemWeightChange:function(e){var t,i=this.getItems(),n=i.indexOf(e);i.remove(e),t=i.findInsertionIndex(e,Ext.weightSortFn),i.insert(t,e),this.insertInner(e,t),this.onItemMove(e,t,n)},doAdd:function(e,t){var i,n=this.getItems();n.has(e)||(i=n.length,n.add(e),e.isInnerItem()&&this.insertInner(e,i),e.onAdded(this,!!t),this.focusableContainer&&this.onFocusableChildAdd(e),this.onItemAdd(e,i))},remove:function(e,t){var i,n,r,s,o,a=this,l=a.getComponent(e);if(void 0===t&&(t=a.getAutoDestroy()),l)return n=a.indexOf(l),r=a.getInnerItems(),-1!==n&&(!a.removingAll&&1<r.length&&l===a.getActiveItem()?(a.on({activeitemchange:"doRemove",scope:a,single:!0,order:"after",args:[l,n,t]}),a.doResetActiveItem(r.indexOf(l))):(a.doRemove(l,n,t),0===r.length&&a.setActiveItem(null))),l;for(Ext.isArray(e)||Ext.raise("Invalid first argument to Ext.Container#remove() - ",Ext.typeOf(e)),i=a.getActiveItem(),n=0;n<e.length;++n)(s=a.getComponent(e[n]))===i?o=!0:s&&a.remove(s,t);return o&&a.remove(i,t),e},doResetActiveItem:function(e){0===e?this.setActiveItem(1):this.setActiveItem(0)},doRemove:function(e,t,i){this.destroying||(this.items.remove(e),e.isInnerItem()&&this.removeInner(e),this.onItemRemove(e,t,i)),e.destroyed||e.onRemoved(e.destroying||i),!this.focusableContainer||this.destroying||this.destroyed||this.onFocusableChildRemove(e,i),i&&!e.destroyed&&e.destroy()},removeAll:function(e,t){var i,n,r=this.destroying,s=this.items,o=r?null:[],a=s.length;for("boolean"!=typeof e&&(e=this.getAutoDestroy()),this.removingAll=!0,i=0;i<a;i++)(n=s.getAt(i))&&(t||n.isInnerItem())&&(this.doRemove(n,i,e),r||(i--,a--)),o&&o.push(n);return r||this.setActiveItem(null),this.removingAll=!1,o},getAt:function(e){return this.items.getAt(e)},getInnerAt:function(e){return this.innerItems[e]},removeAt:function(e,t){var i=this.getAt(e);return i&&this.remove(i,t),i},removeInnerAt:function(e){var t=this.getInnerItems()[e];return t&&this.remove(t),t},has:function(e){return-1!==this.getItems().indexOf(e)},hasInnerItem:function(e){return-1!==this.innerItems.indexOf(e)},indexOf:function(e){return this.getItems().indexOf(e)},innerIndexOf:function(e){return this.innerItems.indexOf(e)},insertInner:function(e,t){var i,n=this.getItems().items,r=this.innerItems,s=r.indexOf(e),o=-1;if(-1!==s&&r.splice(s,1),"number"==typeof t){for(;(i=n[++t])&&!i.isInnerItem(););i&&(o=r.indexOf(i),r.splice(o,0,e))}return-1===o&&(r.push(e),o=r.length-1),-1!==s&&this.onInnerItemMove(e,o,s),this},onInnerItemMove:Ext.emptyFn,removeInner:function(e){return Ext.Array.remove(this.innerItems,e),this},insert:function(e,t){var i,n;if("number"!=typeof e&&Ext.Logger.error("Invalid index of '"+e+"', must be a valid number"),Ext.isArray(t)){for(n=t.length-1;0<=n;n--)this.insert(e,t[n]);return this}return(i=t.isWidget)||(t.$initParent=this),t=this.factoryItem(t),this.doInsert(e,t,i),delete t.$initParent,t},doInsert:function(e,t,i){var n,r,s=this.items,o=s.length;r=t.isInnerItem(),o<e&&(e=o),s[e-1]!==t&&(-1!==(n=this.indexOf(t))&&s.removeAt(n),s.insert(e,t),-1===n&&t.onAdded(this,!!i),r&&this.insertInner(t,e),-1!==n?this.onItemMove(t,e,n):this.onItemAdd(t,e))},insertFirst:function(e){return this.insert(0,e)},insertLast:function(e){return this.insert(this.getItems().length,e)},insertBefore:function(e,t){var i,n,r=this.getItems();return null===t?this.add(e):(-1===(i=r.indexOf(t))&&Ext.raise("Item does not exist in the container"),-1!==(n=r.indexOf(e))&&n<i&&--i,this.insert(i,e))},insertAfter:function(e,t){var i=this.indexOf(t);return-1!==i&&this.insert(i+1,e),this},onItemAdd:function(e,t){this.doItemLayoutAdd(e,t),this.initialized&&(e.hasListeners.added&&e.fireEvent("added",e,this,t),this.hasListeners.add&&this.fireEvent("add",this,e,t))},doItemLayoutAdd:function(e,t){var i=this.getLayout();this.rendered&&!e.rendered?e.fireAction("renderedchange",[this,e,!0],"onItemAdd",i,{args:[e,t]}):i.onItemAdd(e,t)},onItemRemove:function(e,t,i){this.doItemLayoutRemove(e,t,i),e.hasListeners.removed&&e.fireEvent("removed",e,this,t),this.hasListeners.remove&&this.fireEvent("remove",this,e,t)},doItemLayoutRemove:function(e,t,i){var n=this.getLayout();e.rendered?(e.setRendered(!1),e.fireAction("renderedchange",[this,e,!1],"onItemRemove",n,{args:[e,t,i]})):n.onItemRemove(e,t,i)},onItemMove:function(e,t,i){this.doItemLayoutMove(e,t,i),e.hasListeners.moved&&e.fireEvent("moved",e,this,t,i),this.hasListeners.move&&this.fireEvent("move",this,e,t,i)},doItemLayoutMove:function(e,t,i){this.getLayout().onItemMove(e,t,i)},onItemInnerStateChange:function(e,t){var i=this.getLayout();t?this.insertInner(e,this.items.indexOf(e)):this.removeInner(e),i.onItemInnerStateChange.apply(i,arguments)},onItemFloatedChange:function(e,t){this.getLayout().onItemFloatedChange(e,t)},getInnerItems:function(){return this.innerItems},getDockedItems:function(){var e,t,i=this.getItems().items,n=[],r=i.length;for(t=0;t<r;t++)(e=i[t]).isDocked()&&n.push(e);return n},applyActiveItem:function(e,t){var i,n=this,r=n.getInnerItems(),s=n.initialConfig,o=s.activeItem||e;if(n.getItems(),n.isConfiguring&&!s.activeItem&&(e=o),!e&&0===r.length)return 0;if("number"==typeof e){if(e=r[e=Math.max(0,Math.min(e,r.length-1))])return e;if(t)return null}else if(e)return(i="string"==typeof e?n.child(e):e.isComponent?e:(e=Ext.apply({$initParent:n},e),n.factoryItem(e)))?((n.pendingActiveItem=i).isInnerItem()||Ext.Logger.error("Setting activeItem to be a non-inner item"),n.has(i)||n.add(i),delete i.$initParent,i):null},animateActiveItem:function(e,t){var i,n=this.getLayout();return this.activeItemAnimation&&this.activeItemAnimation.destroy(),this.activeItemAnimation=t=new Ext.Factory.layoutCardFx(t),t&&n.isCard&&(t.setLayout(n),(i=n.getAnimation())&&i.disable(),t.on("animationend",function(){i&&i.enable(),t.destroy()},this)),this.setActiveItem(e)},updateActiveItem:function(e,t){delete this.pendingActiveItem,t&&!t.destroyed&&t.fireEvent("deactivate",t,this,e),e&&e.fireEvent("activate",e,this,t),this.setActiveItemIndex(this.innerItems.indexOf(e))},updateActiveItemIndex:function(e){this.setActiveItem(this.innerItems[e])},getRefItems:function(e){var t,i,n,r,s=this.getItems().items;if(s)if(e)for(t=[],n=0,i=s.length;n<i;n++)r=s[n],(t[t.length]=r).getRefItems&&t.push.apply(t,r.getRefItems(!0));else t=s.slice();return t||[]},getComponent:function(e){return"number"==typeof e?this.getItems().getAt(e):(Ext.isObject(e)&&(e=e.getItemId()),this.getItems().get(e))},getDockedComponent:function(e){var t,i,n,r;if(Ext.isObject(e)&&(e=e.getItemId()),i=(t=this.getDockedItems()).length,Ext.isNumber(e))return t[e];for(r=0;r<i;r++)if((n=t[r]).id===e)return n;return!1},doDestroy:function(){var e=this;e.focusableContainer&&e.destroyFocusableContainer(),e.removeAll(!0,!0),Ext.destroy(e.items,e.getMasked()),e.items=null,e._layout&&(e._layout=Ext.destroy(e._layout)),e.callParent()},getFocusEl:function(){var e=this.findDefaultFocus();return e?e.isWidget?e.getFocusEl():e:this.focusable?this.focusEl:void 0},findDefaultFocus:function(){var e=this.getDefaultFocus();if(!e||e.isWidget||!(e=this.down(e))||e.canFocus())return e},onFocusEnter:function(e){this.callParent([e]),!this.focusableContainer||this.destroying||this.destroyed||this.mixins.focusablecontainer.onFocusEnter.call(this,e)},onFocusLeave:function(e){this.callParent([e]),!this.focusableContainer||this.destroying||this.destroyed||this.mixins.focusablecontainer.onFocusLeave.call(this,e)},updateInnerCls:function(e,t){this.getRenderTarget().replaceCls(t,e)},updateAutoSize:function(e){var t=this.bodySizerElement;!1===e?t||(this.bodySizerElement=this.bodyElement.wrap({cls:Ext.baseCSSPrefix+"body-sizer-el"})):t&&(this.bodyElement.unwrap(),t.destroy(),this.bodySizerElement=null)},updateMaxHeight:function(e,t){this.callParent([e,t]),Ext.isIE11&&null!=e&&!1!==this.getAutoSize()&&(this.getMaxHeightElement().setMaxHeight(e),this.addCls(Ext.baseCSSPrefix+"max-height-wrapped"))},privates:{getFirstReferences:function(){return delete this.getReferences,this.getItems(),this.getReferences.apply(this,arguments)},getPositionedItemTarget:function(){return this.getRenderTarget()},applyItemDefaults:function(e){var t=this.getDefaults();return t&&!e.ignoreDefaults&&(e.isComponent?e.isInnerItem()&&!this.has(e)&&(Ext.isFunction(t)&&(t=t(e)),e.setConfig(t,null,{defaults:!0})):(Ext.isFunction(t)&&(t=t(e)),e=Ext.merge({},t,e))),e},setChildRendered:function(e,t){t.isInnerItem()?this.getLayout().renderInnerItem(t):e&&t.getFloated()||t.setRendered(e)},getMaxHeightElement:function(){var e,t,i,n,r=this.el,s=this.maxHeightElement;if(!s)for(this.maxHeightElement=s=r.insertFirst({cls:Ext.baseCSSPrefix+"max-height-el"}),i=1,n=(e=Ext.Array.clone(r.dom.childNodes)).length;i<n;i++)t=e[i],Ext.fly(t).is(".x-dock,.x-panelheader,.x-body-el,.x-body-wrap-el,.x-tab-guard-el")&&s.appendChild(t);return s}}},function(){this.prototype.defaultItemClass=this}),Ext.define("Ext.mixin.Hookable",{extend:Ext.Mixin,mixinConfig:{id:"hookable"},bindHook:function(e,t,i,n,r){return e.afterMethod(t,i||t,this,n,r),this},unbindHook:function(e,t,i){return e.removeMethodListener(t,i||t,this),this}}),Ext.define("Ext.util.Wrapper",{mixins:[Ext.mixin.Hookable],constructor:function(e,t){var i=this.link("element",Ext.Element.create(e));t&&(i.insertBefore(t),this.wrap(t))},bindSize:function(e){var t,i=this.wrappedElement;this.boundSizeName=e,this.boundMethodName=t="width"===e?"setWidth":"setHeight",this.bindHook(i,t,"onBoundSizeChange"),i[t].call(i,i.getStyleValue(e))},onBoundSizeChange:function(e,t){var i=this.element;"string"==typeof e&&"%"===e.substr(-1)?t[0]="100%":e="",i[this.boundMethodName].call(i,e)},wrap:function(e){var t,i=this.element;for(this.wrappedElement=e,t=i.dom;null!==t.firstElementChild;)t=t.firstElementChild;t.appendChild(e.dom)},destroy:function(){var e,t=this.element,i=t.dom,n=this.wrappedElement,r=this.boundMethodName,s=i.parentNode;r&&(this.unbindHook(n,r,"onBoundSizeChange"),(e=t.getStyle(this.boundSizeName))&&n[r].call(n,e)),s&&(n.destroyed||s.replaceChild(i.firstElementChild,i),delete this.wrappedElement),this.callParent()}}),Ext.define("Ext.layout.wrapper.BoxDock",{config:{direction:"horizontal",element:{className:Ext.baseCSSPrefix+"dock"},innerWrapper:null,container:null,manageBorders:null},positionMap:{top:"start",left:"start",bottom:"end",right:"end"},managedBordersCls:Ext.baseCSSPrefix+"managed-borders",constructor:function(e){this.items={start:[],end:[]},this.itemsCount=0,this.initConfig(e)},addItems:function(e){var t,i,n;for(t=0,i=e.length;t<i;t++)n=e[t],this.addItem(n)},addItem:function(e){var t,i,n,r,s=e.getDocked(),o=this.positionMap[s],a=e.$dockWrapper,l=this.getContainer(),c=l.indexOf(e),u=e.element,d=this.items[o];for(a&&a.removeItem(e),e.$dockWrapper=this,e.addCls(Ext.baseCSSPrefix+"dock-item"),e.addCls(Ext.baseCSSPrefix+"docked-"+s),t=0,i=d.length;t<i;t++)if(n=d[t],c<l.indexOf(n)){r=n.element,d.splice(t,0,e);break}r||(d.push(e),r=this.getInnerWrapper().getElement()),this.itemsCount++,"start"===o?u.insertBefore(r):u.insertAfter(r)},removeItem:function(e,t){var i=t||e.getDocked(),n=this.items[this.positionMap[i]];Ext.Array.remove(n,e),e.element.detach(),delete e.$dockWrapper,e.removeCls(Ext.baseCSSPrefix+"dock-item"),e.removeCls(Ext.baseCSSPrefix+"docked-"+i),0==--this.itemsCount&&this.destroy()},getItemsSlice:function(e){var t,i,n,r,s=this.getContainer(),o=this.items,a=[];for(i=0,n=(t=o.start).length;i<n;i++)r=t[i],s.indexOf(r)>e&&a.push(r);for(i=0,n=(t=o.end).length;i<n;i++)r=t[i],s.indexOf(r)>e&&a.push(r);return a},applyElement:function(e){return Ext.Element.create(e)},updateElement:function(e){e.addCls(Ext.baseCSSPrefix+"dock-"+this.getDirection())},updateInnerWrapper:function(e,t){t?(e.getElement().replace(t.getElement(),!1),t.$outerWrapper=null):this.getElement().append(e.getElement()),e.setManageBorders(this.getManageBorders()),e.$outerWrapper=this},updateManageBorders:function(e){var t=this.getInnerWrapper();this.getElement().toggleCls(this.managedBordersCls,e),t&&t.setManageBorders(e)},destroy:function(){var e,t=this.getInnerWrapper(),i=this.$outerWrapper;t&&(i?i.setInnerWrapper(t):((e=t.getElement()).destroyed||e.replace(this.getElement()),delete t.$outerWrapper)),delete this.$outerWrapper,this.unlink(["_element"]),this.callParent()}}),Ext.define("Ext.layout.wrapper.Inner",{config:{container:null,manageBorders:null},constructor:function(e){this.initConfig(e)},getElement:function(){var e=this.getContainer();return e.boxScrollerElement||e.bodySizerElement||e.bodyElement},setInnerWrapper:Ext.emptyFn,getInnerWrapper:Ext.emptyFn}),Ext.define("Ext.layout.Auto",{alias:["layout.default","layout.auto"],alternateClassName:"Ext.layout.Default",mixins:[Ext.mixin.Observable,Ext.mixin.Factoryable],factoryConfig:{type:"layout",defaultType:"auto",instanceProp:"isLayout"},isLayout:!0,config:{animation:null,container:null},centerCls:Ext.baseCSSPrefix+"center",cls:Ext.baseCSSPrefix+"layout-auto",itemCls:Ext.baseCSSPrefix+"layout-auto-item",spaceRe:/\\s+/,positionMap:{top:"start",left:"start",middle:"center",bottom:"end",right:"end"},positionDirectionMap:{top:"vertical",bottom:"vertical",left:"horizontal",right:"horizontal"},constructor:function(e){this.mixins.observable.constructor.call(this,e)},updateContainer:function(e,t){this.dockedItems=[],e.getRenderTarget().addCls(this.cls),e.initialized?this.onContainerInitialized(e):e.onInitialized("onContainerInitialized",this)},onContainerInitialized:function(e){this.handleDockedItemBorders(),e.on({delegate:"> component",beforecenteredchange:"onItemCenteredChange",positionedchange:"onItemPositionedChange",afterdockedchange:"onAfterItemDockedChange",scope:this})},onItemAdd:function(e){var t=this.getContainer(),i=e.getFloated();null!=e.getDocked()?this.dockItem(e):e.isCentered()?this.onItemCenteredChange(e,!0):e.isPositioned()?this.onItemPositionedChange(e,!0):i||this.onItemInnerStateChange(e,!0),t.rendered&&!i&&(e.isInnerItem()?this.renderInnerItem(e,!0):e.setRendered(!0,!0))},onItemInnerStateChange:function(e,t,i){var n=this.itemCls;t?(this.insertInnerItem(e,this.getContainer().innerIndexOf(e)),e.addCls(n)):(this.removeInnerItem(e),e.removeCls(n))},insertInnerItem:function(e,t){var i=e.element.dom,n=this.getContainer(),r=n.getRenderTarget(e),s=null;-1!==t&&(s=r===n.getRenderTarget()?(s=n.getInnerAt(t+1))?s.element.dom:null:r.dom.childNodes[t]),r.dom.insertBefore(i,s)},insertPositionedItem:function(e){var t=this.getContainer().getPositionedItemTarget(e).dom;return null===e.getZIndex()&&e.setZIndex(2*(this.getContainer().indexOf(e)+1)),t.insertBefore(e.element.dom,t.firstChild),this},removeInnerItem:function(e){e.element.detach()},removePositionedItem:function(e){e.setZIndex(null),e.element.detach()},onItemRemove:function(e,t,i){e.getDocked()?this.undockItem(e):e.isCentered()?this.onItemCenteredChange(e,!1):e.isPositioned()?this.onItemPositionedChange(e,!1):e.getFloated()||this.onItemInnerStateChange(e,!1,i)},onItemMove:function(e,t,i){e.isCentered()||e.isPositioned()?e.setZIndex(2*(t+1)):e.isInnerItem()?this.insertInnerItem(e,this.getContainer().innerIndexOf(e)):(this.undockItem(e),this.dockItem(e))},onItemCenteredChange:function(e,t){var i="$centerWrapper";e.getFloated()?e.center():t?(this.insertPositionedItem(e),e.link(i,new Ext.util.Wrapper({className:this.centerCls},e.element))):(e.unlink([i]),this.removePositionedItem(e))},onItemPositionedChange:function(e,t){t?this.insertPositionedItem(e):this.removePositionedItem(e)},onAfterItemDockedChange:function(e,t,i){e.initialized&&(i&&this.undockItem(e,i),t&&this.dockItem(e))},dockItem:function(e){var t,i,n,r,s,o,a,l,c,u,d,h=Ext.layout.wrapper.BoxDock,f=this.dockedItems,g=f.length,p=this.getContainer(),m=p.indexOf(e),x=this.positionDirectionMap,y=x[e.getDocked()],v=this.dockInnerWrapper,E=!v;if(E&&(v=new Ext.layout.wrapper.Inner({container:p})),0===g)f.push(e),(c=new h({container:p,direction:y,manageBorders:p.manageBorders})).getElement().replace(v.getElement(),!1),c.setInnerWrapper(v),c.addItem(e);else{for(i=0;i<g;i++){if(n=f[i],m<p.indexOf(n)){o=r||f[0],f.splice(i,0,e);break}r=n}o||(o=f[g-1],f.push(e)),a=o.getDocked(),l=o.$dockWrapper,y===(t=x[a])?l.addItem(e):(s=l.getItemsSlice(m),c=new h({container:p,direction:y}),0<s.length?s.length===l.itemsCount?(u=l,c.getElement().replace(u.getElement(),!1),c.setInnerWrapper(u)):(u=new h({container:p,direction:t}),d=l.getInnerWrapper(),c.setInnerWrapper(u),l.setInnerWrapper(c),u.setInnerWrapper(d),u.addItems(s)):(d=l.getInnerWrapper(),l.setInnerWrapper(c),c.setInnerWrapper(d)),c.addItem(e))}c&&this.link("dockOuterWrapper",c),E&&this.link("dockInnerWrapper",v),p.initialized&&this.handleDockedItemBorders()},getDockWrapper:function(){var e=this.dockedItems;return 0<e.length?e[0].$dockWrapper:null},undockItem:function(e,t){var i,n,r=this.dockedItems,s=e.$dockWrapper;s&&s.removeItem(e,t),this.getContainer().initialized&&(i=e.lastBorderMask,n=e.lastBorderCollapse,i&&(e.lastBorderMask=0,e.removeCls(this.noBorderClassTable[i])),n&&(e.lastBorderCollapse=0,e.removeCls(this.getBorderCollapseTable()[n])),this.handleDockedItemBorders()),Ext.Array.remove(r,e)},destroy:function(){this.dockedItems=null,Ext.destroy(this.getAnimation()),this.callParent()},noBorderClassTable:[0,Ext.baseCSSPrefix+"noborder-l",Ext.baseCSSPrefix+"noborder-b",Ext.baseCSSPrefix+"noborder-bl",Ext.baseCSSPrefix+"noborder-r",Ext.baseCSSPrefix+"noborder-rl",Ext.baseCSSPrefix+"noborder-rb",Ext.baseCSSPrefix+"noborder-rbl",Ext.baseCSSPrefix+"noborder-t",Ext.baseCSSPrefix+"noborder-tl",Ext.baseCSSPrefix+"noborder-tb",Ext.baseCSSPrefix+"noborder-tbl",Ext.baseCSSPrefix+"noborder-tr",Ext.baseCSSPrefix+"noborder-trl",Ext.baseCSSPrefix+"noborder-trb",Ext.baseCSSPrefix+"noborder-trbl"],edgeMasks:{top:8,right:4,bottom:2,left:1},handleDockedItemBorders:function(e){var t,i,n,r,s,o,a,l,c,u,d,h,f,g=this,p=0,m=g.getContainer(),x=m.getBodyBorder&&m.getBodyBorder(),y=m.getBorder(),v=g.collapsed,E=g.edgeMasks,b=g.noBorderClassTable,C=m.items.generation,S=m.boxScrollerElement||m.bodyElement;if((e||g.initializedBorders!==C)&&m.manageBorders){for(d=[],h=[],i=g.getBorderCollapseTable(),b=g.getBorderClassTable?g.getBorderClassTable():b,g.initializedBorders=C,g.collapsed=!1,n=m.getDockedItems(),g.collapsed=v,(f=m.getHeader&&m.getHeader())&&(n=[f].concat(n)),s=0,o=n.length;s<o;s++)(a=n[s]).getHidden()||(l=a.isPanelHeader?a.getPosition():a.getDocked(),u=r=0,d.length=0,h.length=0,"bottom"!==l&&(8&p?t=a.border:!1!==(t=y)&&(r+=8),!1===t&&(u+=8)),"left"!==l&&(4&p?t=a.border:!1!==(t=y)&&(r+=4),!1===t&&(u+=4)),"top"!==l&&(2&p?t=a.border:!1!==(t=y)&&(r+=2),!1===t&&(u+=2)),"right"!==l&&(1&p?t=a.border:!1!==(t=y)&&(r+=1),!1===t&&(u+=1)),(c=a.lastBorderMask)!==u&&(a.lastBorderMask=u,c&&(h[0]=b[c]),u&&(d[0]=b[u])),(c=a.lastBorderCollapse)!==r&&(a.lastBorderCollapse=r,c&&h.push.apply(h,i[c]),r&&d.push.apply(d,i[r])),h.length&&a.removeCls(h),d.length&&a.addCls(d),p|=E[l]);u=r=0,d.length=0,h.length=0,8&p?t=x:!1!==(t=y)&&(r+=8),!1===t&&(u+=8),4&p?t=x:!1!==(t=y)&&(r+=4),!1===t&&(u+=4),2&p?t=x:!1!==(t=y)&&(r+=2),!1===t&&(u+=2),1&p?t=x:!1!==(t=y)&&(r+=1),!1===t&&(u+=1),(c=g.lastBodyBorderMask)!==u&&(g.lastBodyBorderMask=u,c&&(h[0]=b[c]),u&&(d[0]=b[u])),(c=g.lastBodyBorderCollapse)!==r&&(g.lastBodyBorderCollapse=r,c&&h.push.apply(h,i[c]),r&&d.push.apply(d,i[r])),h.length&&S.removeCls(h),d.length&&S.addCls(d)}},borderCollapseMap:{},getBorderCollapseTable:function(){var e,t,i,n,r,s,o,a,l=this.borderCollapseMap,c=this.getContainer(),u=c.classCls,d=c.getUi(),h=d||"default";if(!(t=(l=l[u]||(l[u]={}))[h]))for(i=c.classClsList,l[h]=t=[[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[]],e=[0],d&&(e=e.concat(d.split(this.spaceRe))),a=e.length,r=0,s=i.length;r<s;r++)for(u=i[r],o=0;o<a;o++)n=u+((d=e[o])?"-"+d:"")+"-outer-border-",t[1].push(n+"l"),t[2].push(n+"b"),t[3].push(n+"bl"),t[4].push(n+"r"),t[5].push(n+"rl"),t[6].push(n+"rb"),t[7].push(n+"rbl"),t[8].push(n+"t"),t[9].push(n+"tl"),t[10].push(n+"tb"),t[11].push(n+"tbl"),t[12].push(n+"tr"),t[13].push(n+"trl"),t[14].push(n+"trb"),t[15].push(n+"trbl");return t},setConfig:function(e,t,i){var n=e,r=this.alias,s=n.type;return e&&("string"==typeof e?(n={})[e]=t:i=t,!s||r&&-1<r.indexOf("layout."+s)?this.callParent([n,i]):Ext.raise("Cannot change layout from "+this.$className+' to "'+s+'"')),this},privates:{renderInnerItem:function(e,t){e.setRendered(!0,t)}}}),Ext.define("Ext.Indicator",{extend:Ext.Component,xtype:"indicator",config:{activeIndex:null,count:null,direction:"horizontal",tapMode:"direction"},activeCls:Ext.baseCSSPrefix+"indicator-active",baseCls:Ext.baseCSSPrefix+"indicator",itemCls:Ext.baseCSSPrefix+"indicator-item",defaultBindProperty:"activeIndex",twoWayBindable:["activeIndex"],isIndicator:!0,constructor:function(e){this.indicators=[],this.callParent([e])},initialize:function(){this.callParent(),this.element.on({tap:"onTap",scope:this})},doDestroy:function(){Ext.destroy(this.indicators),this.callParent()},applyActiveIndex:function(e){return this.indicators.length-1<e&&Ext.raise("Cannot set the active index greater than the number of indicators"),e},updateActiveIndex:function(e,t){var i=this.activeCls,n=this.indicators,r=n[t],s=n[e];r&&r.removeCls(i),s&&s.addCls(i)},updateCount:function(e){for(var t=this.indicators;t.length<e;)this.doAdd();for(;t.length>e;)this.doRemove()},applyDirection:function(e){return"vertical"!==e&&"horizontal"!==e&&(Ext.raise("Invalid indicator direction provided: "+e),e="horizontal"),e},updateDirection:function(e,t){this.element.replaceCls(t,e,this.baseCls)},sync:function(e,t){return Ext.isNumber(e)&&this.setCount(e),Ext.isNumber(t)&&this.setActiveIndex(t),this},add:function(){var e=this.getCount();return this.setCount(++e)},removeAll:function(){return this.setCount(0)},remove:function(){var e=this.getCount();return this.setCount(--e)},doAdd:function(){return this.indicators.push(this.element.createChild({tag:"span",cls:this.itemCls})),this},doRemove:function(){var e=this.indicators.pop();return e&&e.destroy(),this},onTap:function(e){"item"===this.getTapMode()?this.onTapItem(e):this.onTapDirection(e)},onTapItem:function(e){var t,i=e.getTarget("."+this.itemCls,1,!0);i?-1!==(t=this.indicators.indexOf(i))&&this.fireEvent("indicatortap",this,t,i):this.onTapDirection(e)},onTapDirection:function(e){var t=this.getDirection(),i=e.touch,n=this.element.getBox(),r=n.left+n.width/2,s=n.top+n.height/2,o="horizontal"===t&&i.pageX>=r||"vertical"===t&&i.pageY>=s?"next":"previous";this.fireEvent(o,this)}}),Ext.define("Ext.layout.card.fx.Abstract",{extend:Ext.Evented,mixins:[Ext.mixin.Factoryable],alias:"layout.card.fx.abstract",isAnimation:!0,config:{direction:null,duration:null,reverse:null,layout:null},updateLayout:function(e){e&&this.enable()},enable:function(){var e=this.getLayout();e&&e.on("beforeactiveitemchange","onActiveItemChange",this)},disable:function(){var e=this.getLayout();this.isAnimating&&this.stopAnimation(),e&&e.un("beforeactiveitemchange","onActiveItemChange",this)},onActiveItemChange:Ext.emptyFn,destroy:function(){var e=this.getLayout();this.isAnimating&&this.stopAnimation(),e&&e.un("beforeactiveitemchange","onActiveItemChange",this),this.setLayout(null),this.observableId&&this.fireEvent("destroy",this),this.callParent()}}),Ext.define("Ext.layout.card.fx.Style",{extend:Ext.layout.card.fx.Abstract,config:{inAnimation:{before:{visibility:null},preserveEndState:!1,replacePrevious:!0},outAnimation:{preserveEndState:!1,replacePrevious:!0}},isAnimating:!1,constructor:function(e){var t,i;this.callParent([e]),this.endAnimationCounter=0,t=this.getInAnimation(),i=this.getOutAnimation(),t.on("animationend","incrementEnd",this),i.on("animationend","incrementEnd",this)},updateDirection:function(e){this.getInAnimation().setDirection(e),this.getOutAnimation().setDirection(e)},updateDuration:function(e){this.getInAnimation().setDuration(e),this.getOutAnimation().setDuration(e)},updateReverse:function(e){this.getInAnimation().setReverse(e),this.getOutAnimation().setReverse(e)},incrementEnd:function(){this.endAnimationCounter++,1<this.endAnimationCounter&&(this.endAnimationCounter=0,this.fireEvent("animationend",this))},applyInAnimation:function(e,t){return Ext.factory(e,Ext.fx.Animation,t)},applyOutAnimation:function(e,t){return Ext.factory(e,Ext.fx.Animation,t)},updateInAnimation:function(e){e.setScope(this)},updateOutAnimation:function(e){e.setScope(this)},onActiveItemChange:function(e,t,i,n){var r,s,o,a,l=this;t&&i&&i.isPainted()&&(o=l.getInAnimation(),a=l.getOutAnimation(),r=t.renderElement,s=i.renderElement,o.setElement(r),a.setElement(s),a.setOnEnd(function(){l.isAnimating=!1,n.resume()}),r.dom.style.setProperty("visibility","hidden","important"),t.show(),e.renderInnerItem(t,!0),l.isAnimating=!0,Ext.Animator.run([a,o]),n.pause())},destroy:function(){Ext.destroy(this.getInAnimation(),this.getOutAnimation()),this.callParent()}}),Ext.define("Ext.layout.card.fx.Cover",{extend:Ext.layout.card.fx.Style,alias:"layout.card.fx.cover",config:{reverse:null,inAnimation:{before:{"z-index":100},after:{"z-index":0},type:"slide",easing:"ease-out"},outAnimation:{easing:"ease-out",from:{opacity:.99},to:{opacity:1},out:!0}}}),Ext.define("Ext.layout.card.fx.Cube",{extend:Ext.layout.card.fx.Style,alias:"layout.card.fx.cube",config:{reverse:null,inAnimation:{type:"cube"},outAnimation:{type:"cube",out:!0}}}),Ext.define("Ext.layout.card.fx.Serial",{extend:Ext.layout.card.fx.Style,duration:500,updateDuration:function(e){var t=e/2,i=this.getInAnimation(),n=this.getOutAnimation();i.setDelay(t),i.setDuration(t),n.setDuration(t)}}),Ext.define("Ext.layout.card.fx.Fade",{extend:Ext.layout.card.fx.Serial,alias:"layout.card.fx.fade",config:{reverse:null,inAnimation:{type:"fade",easing:"ease-out"},outAnimation:{type:"fade",easing:"ease-out",out:!0}}}),Ext.define("Ext.layout.card.fx.Flip",{extend:Ext.layout.card.fx.Serial,alias:"layout.card.fx.flip",config:{inAnimation:{type:"flip",half:!0,easing:"ease-out",before:{"backface-visibility":"hidden"},after:{"backface-visibility":null}},outAnimation:{type:"flip",half:!0,easing:"ease-in",before:{"backface-visibility":"hidden"},after:{"backface-visibility":null},out:!0}},onActiveItemChange:function(e,t,i,n){var r=t.element.getParent();r.addCls(Ext.baseCSSPrefix+"layout-card-perspective"),this.on("animationend",function(){r.removeCls(Ext.baseCSSPrefix+"layout-card-perspective")},this,{single:!0}),this.callParent(arguments)}}),Ext.define("Ext.layout.card.fx.Pop",{extend:Ext.layout.card.fx.Serial,alias:"layout.card.fx.pop",config:{inAnimation:{type:"pop",easing:"ease-out"},outAnimation:{type:"pop",easing:"ease-in",out:!0}}}),Ext.define("Ext.layout.card.fx.Reveal",{extend:Ext.layout.card.fx.Style,alias:"layout.card.fx.reveal",config:{inAnimation:{easing:"ease-out",from:{opacity:.99},to:{opacity:1}},outAnimation:{before:{"z-index":100},after:{"z-index":0},type:"slide",easing:"ease-out",out:!0}}}),Ext.define("Ext.layout.card.fx.Scroll",{extend:Ext.layout.card.fx.Abstract,alias:"layout.card.fx.scroll",config:{duration:150},getEasing:function(){var e=this.easing;return e||(this.easing=e=new Ext.fx.easing.Linear),e},updateDuration:function(e){this.getEasing().setDuration(e)},onActiveItemChange:function(e,t,i,n){var r,s,o,a,l,c,u=this.getDirection(),d=this.getEasing();t&&i&&(this.isAnimating&&this.stopAnimation(),t.setWidth("100%"),t.setHeight("100%"),a=(r=this.getLayout().container.bodyElement).getWidth(),l=r.getHeight(),s=t.renderElement,o=i.renderElement,this.oldItem=i,this.newItem=t,this.containerElement=r,this.currentEventController=n,this.isReverse=c=this.getReverse(),t.show(),"right"===u?(u="left",this.isReverse=c=!c):"down"===u&&(u="up",this.isReverse=c=!c),"left"===u?c?(d.setConfig({startValue:a,endValue:0}),r.dom.scrollLeft=a,o.setLeft(a)):(d.setConfig({startValue:0,endValue:a}),s.setLeft(a)):c?(d.setConfig({startValue:l,endValue:0}),r.dom.scrollTop=l,o.setTop(l)):(d.setConfig({startValue:0,endValue:l}),s.setTop(l)),this.startAnimation(),n.pause())},startAnimation:function(){this.isAnimating=!0,this.getEasing().setStartTime(Date.now()),Ext.AnimationQueue.start(this.doAnimationFrame,this)},doAnimationFrame:function(){var e,t=this.getEasing(),i=this.getDirection(),n="scrollTop";"left"!==i&&"right"!==i||(n="scrollLeft"),t.isEnded?this.stopAnimation():(e=t.getValue(),this.containerElement.dom[n]=e)},stopAnimation:function(){var e=this.getDirection(),t="setTop",i=this.oldItem,n=this.newItem;"left"!==e&&"right"!==e||(t="setLeft"),this.currentEventController.resume(),this.isReverse&&i&&i.renderElement&&i.renderElement.dom?i.renderElement[t](null):n&&n.renderElement&&n.renderElement.dom&&n.renderElement[t](null),Ext.AnimationQueue.stop(this.doAnimationFrame,this),this.isAnimating=!1,this.fireEvent("animationend",this)}}),Ext.define("Ext.layout.card.fx.ScrollCover",{extend:Ext.layout.card.fx.Scroll,alias:"layout.card.fx.scrollcover",onActiveItemChange:function(e,t,i,n){var r,s,o,a;this.currentEventController=n,(this.inItem=t)&&i&&(r=this.getLayout().container.bodyElement.getSize(),s=this.calculateXY(r),o={easing:this.getEasing(),duration:this.getDuration()},t.renderElement.dom.style.setProperty("visibility","hidden","important"),a=t.setTranslatable(!0).getTranslatable(),i.setTranslatable(!0).getTranslatable().translate({x:0,y:0}),a.translate({x:s.left,y:s.top}),a.getWrapper().dom.style.setProperty("z-index","100","important"),t.show(),a.on({animationstart:"onInAnimationStart",animationend:"onInAnimationEnd",scope:this}),a.translateAnimated({x:0,y:0},o),n.pause())},onInAnimationStart:function(){this.inItem.renderElement.dom.style.removeProperty("visibility")},onInAnimationEnd:function(){this.destroyed||(this.inItem.getTranslatable().getWrapper().dom.style.removeProperty("z-index"),this.currentEventController.resume())}}),Ext.define("Ext.layout.card.fx.ScrollReveal",{extend:Ext.layout.card.fx.Scroll,alias:"layout.card.fx.scrollreveal",onActiveItemChange:function(e,t,i,n){var r,s,o,a,l;this.currentEventController=n,this.outItem=i,(this.inItem=t)&&i&&(r=this.getLayout().container.bodyElement.getSize(),s=this.calculateXY(r),o={easing:this.getEasing(),duration:this.getDuration()},a=i.setTranslatable(!0).getTranslatable(),l=t.setTranslatable(!0).getTranslatable(),a.getWrapper().dom.style.setProperty("z-index","100","important"),a.translate({x:0,y:0}),l.translate({x:0,y:0}),t.show(),a.on({animationend:"onOutAnimationEnd",scope:this}),a.translateAnimated({x:s.x,y:s.y},o),n.pause())},onOutAnimationEnd:function(){this.destroyed||(this.outItem.getTranslatable().getWrapper().dom.style.removeProperty("z-index"),this.currentEventController.resume())}}),Ext.define("Ext.layout.card.fx.Slide",{extend:Ext.layout.card.fx.Style,alias:"layout.card.fx.slide",config:{inAnimation:{type:"slide",easing:"ease-out"},outAnimation:{type:"slide",easing:"ease-out",out:!0}}}),Ext.define("Ext.layout.Card",{extend:Ext.layout.Auto,alias:"layout.card",type:"card",isCard:!0,config:{indicator:{lazy:!0,$value:{xtype:"indicator",flex:1}}},deferRender:!0,cls:Ext.baseCSSPrefix+"layout-card",itemCls:Ext.baseCSSPrefix+"layout-card-item",applyAnimation:function(e){return e?new Ext.Factory.layoutCardFx(e):null},updateAnimation:function(e,t){var i;this.autoDirection=null,e&&e.isAnimation&&(e.setLayout(this),(i=e.getDirection())&&!this.autoDirectionMap[i]||(this.autoDirection=i||"horizontal",e.setDirection(null))),t&&t.destroy()},applyIndicator:function(e,t){return Ext.updateWidget(t,e,this,"createIndicator")},createIndicator:function(e){return Ext.apply({ownerCmp:this.getContainer()},e)},updateIndicator:function(e){var t,i,n;e&&(i=(t=this.getContainer()).getInnerItems(),n=t.getActiveItem(),e.sync(i.length,i.indexOf(n)).on({indicatortap:"onIndicatorTap",next:"next",previous:"previous",scope:this}))},onContainerInitialized:function(e){var t=e.getInnerAt(0),i=e.getActiveItem(),n=e.getMinHeight();Ext.isIE&&null!=n&&null==e.getHeight()&&e.setHeight(n),this.callParent([e]),i&&(i.show(),t&&t!==i&&t.hide()),e.on("activeitemchange","onContainerActiveItemChange",this)},onContainerActiveItemChange:function(e,t,i){var n,r=e.getInnerItems(),s=r.indexOf(t),o=r.indexOf(i),a=this.getAnimation(),l=this.autoDirection,c=l&&"horizontal"===l;l&&-1!==s&&-1!==o&&(n=s<o?c?"right":"up":c?"left":"down",a.setDirection(n)),this.fireEventedAction("activeitemchange",[this,t,i],"doActiveItemChange",this)},onItemInnerStateChange:function(e,t,i){var n,r;this.callParent([e,t,i]),r=(n=this.getContainer()).getActiveItem(),t?r!==n.innerIndexOf(e)&&r!==e&&e!==n.pendingActiveItem&&e.hide():i||e.destroyed||!0===e.destroying||e.show()},doActiveItemChange:function(e,t,i){var n,r=e.getConfig("indicator",null,!0);i&&!i.destroyed&&i.hide(),t&&!t.destroyed&&(e.showItem(t),r&&(n=this.getContainer().getInnerItems(),r.setActiveIndex(n.indexOf(t))))},onItemAdd:function(e,t){var i,n;this.callParent([e,t]),e.isInnerItem()&&((i=this.getConfig("indicator",null,!0))&&i.add(),(n=e.element.dom.style).width=n.height="")},onItemRemove:function(e,t,i){var n,r,s;this.callParent([e,t,i]),e.isInnerItem()&&((n=this.getConfig("indicator",null,!0))&&n.remove(),r=e.getWidth(),s=e.getHeight(),e.setWidth(null).setWidth(r),e.setHeight(null).setHeight(s))},next:function(){var e=this.getContainer(),t=e.getActiveItem(),i=e.getInnerItems(),n=i.indexOf(t);(t=i[n+1])&&e.setActiveItem(t)},previous:function(){var e=this.getContainer(),t=e.getActiveItem(),i=e.getInnerItems(),n=i.indexOf(t);(t=i[n-1])&&e.setActiveItem(t)},onIndicatorTap:function(e,t){this.getContainer().setActiveItem(t)},destroy:function(){Ext.destroy(this.getAnimation(),this.getIndicator()),this.callParent()},privates:{autoDirectionMap:{horizontal:1,vertical:1},renderInnerItem:function(e,t){this.deferRender&&this.getContainer().getActiveItem()!==e||this.callParent([e,t])},showItem:function(e){e.show(),this.getContainer().rendered&&e.setRendered(!0,!0)}}}),Ext.define("Ext.util.InputBlocker",{singleton:!0,blockInputs:function(){Ext.browser.is.ie&&Ext.select(".x-field-text .x-input:not(.x-item-disabled) .x-input-el, .x-field-textarea .x-input:not(.x-item-disabled) .x-input-el, .x-field-search .x-input:not(.x-item-disabled) .x-input-el").each(function(e){0<e.dom.offsetWidth&&(e.dom.setAttribute("disabled",!0),e.dom.setAttribute("overlayfix",!0))})},unblockInputs:function(){Ext.browser.is.ie&&Ext.select("[overlayfix]").each(function(e){e.dom.removeAttribute("disabled"),e.dom.removeAttribute("overlayfix")})}}),Ext.define("Ext.viewport.Default",function(){var a={top:1,right:2,bottom:4,left:8},t={1:4,2:8,4:1,8:2},u={left:"right",right:"left",top:"bottom",bottom:"top",up:"bottom",down:"top"};return{extend:Ext.Container,xtype:"viewport",PORTRAIT:"portrait",LANDSCAPE:"landscape",nameHolder:!0,config:{autoMaximize:!1,autoBlurInput:!0,preventZooming:!1,autoRender:!0,layout:"card",width:"100%",height:"100%",menus:{},orientation:null,swipeThreshold:30},classCls:Ext.baseCSSPrefix+"viewport",getTemplate:function(){var e=this.callParent();return Ext.feature.has.MatchMedia||e.unshift({reference:"orientationElement",className:Ext.baseCSSPrefix+"orientation-inspector",children:[{className:Ext.baseCSSPrefix+"orientation-inspector-landscape"}]}),e},isReady:!1,isViewport:!0,isMaximizing:!1,id:"ext-viewport",isInputRegex:/^(input|textarea|select|a)$/i,isInteractiveWebComponentRegEx:/^(audio|video)$/i,notScalableRe:/user-scalable=no/,focusable:!1,focusEl:null,ariaEl:null,allSidesCls:[Ext.baseCSSPrefix+"top",Ext.baseCSSPrefix+"right",Ext.baseCSSPrefix+"bottom",Ext.baseCSSPrefix+"left"],sideClsMap:{top:Ext.baseCSSPrefix+"top",right:Ext.baseCSSPrefix+"right",bottom:Ext.baseCSSPrefix+"bottom",left:Ext.baseCSSPrefix+"left"},hasViewportCls:Ext.baseCSSPrefix+"has-viewport",fixedCls:Ext.baseCSSPrefix+"fixed-viewport",fullscreenItemCls:Ext.baseCSSPrefix+"fullscreen",constructor:function(e){var t,i=this;return i.doPreventPanning=i.doPreventPanning.bind(i),i.doPreventZooming=i.doPreventZooming.bind(i),i.maximizeOnEvents=["ready","orientationchange"],window.devicePixelRatio=window.devicePixelRatio||1,i.callParent([e]),i.updateSize(),i.windowOuterHeight=i.getWindowOuterHeight(),(t=i.getScrollable())||((t=Ext.getViewportScroller().setConfig({x:!1,y:!1})).component=i),Ext.setViewportScroller(t),Ext.getBody().setStyle("overflow","hidden"),Ext.get(document.documentElement).addCls(i.hasViewportCls),i.stretchHeights=i.stretchHeights||{},Ext.feature.has.OrientationChange&&i.addWindowListener("orientationchange",i.onOrientationChange.bind(i)),Ext.os.is.iOS&&i.isScalable()||Ext.get(document.documentElement).addCls(i.fixedCls),Ext.GlobalEvents.on("resize","onWindowResize",i,{priority:1e3}),Ext.onDocumentReady(i.onDomReady,i),i},initialize:function(){this.addMeta("apple-mobile-web-app-capable","yes"),this.addMeta("apple-touch-fullscreen","yes"),this.callParent()},getRefItems:function(e){var t,i,n=this.getMenus(),r=this.callParent([e]);for(t in n)(i=n[t])&&Ext.Array.include(r,i);return r},initInheritedState:function(e,t){var i=Ext.rootInheritedState;e!==i?this.initInheritedState(this.inheritedState=i,this.inheritedStateInner=Ext.Object.chain(i)):this.callParent([e,t])},onAppLaunch:function(){this.isReady||this.onDomReady()},onDomReady:function(){this.isReady||(this.isReady=!0,this.updateSize(),this.onReady(),this.fireEvent("ready",this),Ext.GlobalEvents.fireEvent("viewportready",this))},onReady:function(){this.getAutoRender()&&this.render()},render:function(){var e=Ext.getBody();this.rendered||(this.callParent([e,Ext.floatRoot]),this.setOrientation(this.determineOrientation()),Ext.getBody().addCls(Ext.baseCSSPrefix+this.getOrientation()))},applyAutoMaximize:function(e){return!Ext.browser.is.WebView&&e},updateAutoMaximize:function(e){e?(this.on("ready","doAutoMaximizeOnReady",this,{single:!0}),this.on("orientationchange","doAutoMaximizeOnOrientationChange",this)):(this.un("ready","doAutoMaximizeOnReady",this),this.un("orientationchange","doAutoMaximizeOnOrientationChange",this))},updatePreventPanning:function(e){this.toggleWindowListener(e,"touchmove",this.doPreventPanning,!1)},updatePreventZooming:function(e){var t=Ext.feature.has.TouchEvents?"touchstart":"mousedown";this.toggleWindowListener(e,t,this.doPreventZooming,!1)},doAutoMaximizeOnReady:function(){var e=this;e.isMaximizing=!0,e.on("maximize",function(){e.isMaximizing=!1,e.updateSize(),e.fireEvent("ready",e)},e,{single:!0}),e.maximize()},doAutoMaximizeOnOrientationChange:function(){var e=this;e.isMaximizing=!0,e.on("maximize",function(){e.isMaximizing=!1,e.updateSize()},e,{single:!0}),e.maximize()},doPreventPanning:function(e){var t,i=e.target;this.isInteractiveWebComponentRegEx.test(i.tagName)&&e.touches&&0<e.touches.length&&(t=e.touches[0])&&t.target&&this.isInputRegex.test(t.target.tagName)||i&&1===i.nodeType&&!this.isInputRegex.test(i.tagName)&&e.preventDefault()},doPreventZooming:function(e){if(!("button"in e&&0!==e.button)){var t,i=e.target,n=this.isInputRegex;this.isInteractiveWebComponentRegEx.test(i.tagName)&&e.touches&&0<e.touches.length&&(t=e.touches[0])&&t.target&&n.test(t.target.tagName)||i&&1===i.nodeType&&!n.test(i.tagName)&&e.preventDefault()}},addWindowListener:function(e,t,i){window.addEventListener(e,t,Boolean(i))},removeWindowListener:function(e,t,i){window.removeEventListener(e,t,Boolean(i))},supportsOrientation:function(){return Ext.feature.has.Orientation},supportsMatchMedia:function(){return Ext.feature.has.MatchMedia},onOrientationChange:function(){this.setOrientation(this.determineOrientation())},determineOrientation:function(){var e,t=this,i=t.orientationElement;return t.supportsOrientation()?(e=t.getWindowOrientation(),90===Math.abs(e)||270===e?t.LANDSCAPE:t.PORTRAIT):t.supportsMatchMedia()?window.matchMedia("(orientation : landscape)").matches?t.LANDSCAPE:t.PORTRAIT:i?i.first().isVisible()?t.LANDSCAPE:t.PORTRAIT:null},updateOrientation:function(e,t){t&&this.fireOrientationChangeEvent(e,t)},fireOrientationChangeEvent:function(e,t){var i=this.updateSize();Ext.getBody().replaceCls(Ext.baseCSSPrefix+t,Ext.baseCSSPrefix+e),this.fireEvent("orientationchange",this,e,i.width,i.height)},onWindowResize:function(e,t){var i=this.lastSize.width,n=this.lastSize.height;this.updateSize(e,t),this.setOrientation(this.determineOrientation()),null!=e&&this.fireEvent("resize",this,e,t,i,n)},updateSize:function(e,t){var i=this.lastSize;return i.width=void 0!==e?e:this.getWindowWidth(),i.height=void 0!==t?t:this.getWindowHeight(),i},waitUntil:function(t,i,n,r,s){var o=this,a=0;r=r||50,s=s||2e3,Ext.defer(function e(){a+=r,!0===t.call(o)?i&&i.call(o):s<=a?n&&n.call(o):Ext.defer(e,r)},r)},maximize:function(){this.fireMaximizeEvent()},fireMaximizeEvent:function(){this.updateSize(),this.fireEvent("maximize",this)},updateHeight:function(e,t){Ext.getBody().setHeight(e),this.callParent([e,t])},updateWidth:function(e,t){Ext.getBody().setWidth(e),this.callParent([e,t])},scrollToTop:function(){window.scrollTo(0,-1)},getWindowWidth:function(){return window.innerWidth},getWindowHeight:function(){return window.innerHeight},getWindowOuterHeight:function(){return window.outerHeight},getWindowOrientation:function(){return window.orientation},getSize:function(){return this.lastSize},setItemFullScreen:function(e){e.addCls(this.fullscreenItemCls),e.setTop(0),e.setRight(0),e.setBottom(0),e.setLeft(0),this.add(e)},setMenu:function(e,t){var i,n,r,s=this;return(t=t||{}).reveal&&t.cover&&Ext.raise("[Ext.Viewport] setMenu(): Only one of reveal or cover is allowed"),Ext.os.is.iOS&&!s.hasiOSOrientationFix&&(s.hasiOSOrientationFix=!0,s.on("orientationchange",function(){window.scrollTo(0,0)},s)),e||Ext.raise("You must specify a menu configuration."),n=s.getMenus(),s.addedSwipeListener||(s.attachSwipeListeners(),s.addedSwipeListener=!0),(r=n[i=(e=s.configureMenu(e,t)).getSide()])&&!r.destroyed&&r!==e&&(s.hideMenu(i),r.setSide(null)),n[i]=e,s.setMenus(n),e},attachSwipeListeners:function(){this.element.on({tap:this.onTap,swipestart:this.onSwipeStart,edgeswipestart:this.onEdgeSwipeStart,edgeswipe:this.onEdgeSwipe,edgeswipeend:this.onEdgeSwipeEnd,scope:this})},configureMenu:function(e,t){var i,n=e.isComponent,r=!n||"reveal"in t?!!t.reveal:e.getReveal(),s=!1!==(!n||"cover"in t?t.cover:e.getCover())&&!r,o=!n||"side"in t?t.side:e.getSide();return o||Ext.raise("You must specify a side to dock the menu."),a[o]||Ext.raise("Invalid side; must left, right, top or bottom."),(t={hideAnimation:null,showAnimation:null,hidden:!0,floated:s,zIndex:s?null:5,reveal:r,cover:s,side:o})[u[o]]=null,n?(i=e.getFloated(),t.floated!==i&&(e.rendered&&(i?this.remove(e,!1):(e.el.dom.parentNode.removeChild(e.el.dom),e.setRendered(!1))),e.setConfig({top:null,right:null,bottom:null,left:null})),e.setConfig(t,null,{strict:!1})):(t.xtype="actionsheet",e=Ext.create(Ext.apply(t,e))),(t={left:0,right:0,top:0,bottom:0})[u[o]]=null,e.setConfig(t),e.toggleCls(e.floatingCls,!e.getFloated()),e.removeCls(this.getLayout().itemCls),e.toggleCls(Ext.baseCSSPrefix+"menu-cover",s),e.toggleCls(Ext.baseCSSPrefix+"menu-reveal",r),e.replaceCls(this.allSidesCls,this.sideClsMap[o]),e.isViewportMenu=!0,e},removeMenu:function(e,t){var i=this.getMenus()||{},n=i[e];n&&(this.hideMenu(e,t),n.removeCls(this.sideClsMap[e])),delete i[e],this.setMenus(i)},showMenu:function(e,t){var i,n=a[e],r=this.getMenus()[e],s={translateX:0,translateY:0};r&&r.isHidden()&&(!1!==t?(this.beforeMenuAnimate(r),i=r.element.measure(10&n?"w":"h"),8===n?s.translateX=i:2===n?s.translateX=-i:1===n?s.translateY=i:4===n&&(s.translateY=-i),r.translate(0,0,{duration:200}),r.getFloated()||this.translate(s.translateX,s.translateY,{duration:200})):r.show(!1,{side:null}))},hideMenu:function(e,t){var i,n=a[e],r=this.getMenus()[e],s={translateX:0,translateY:0};t=!1!==t,r&&!r.isHidden()&&(i=r.element.measure(10&n?"w":"h"),8===n?s.translateX=-i:2===n?s.translateX=i:1===n?s.translateY=-i:4===n&&(s.translateY=i),t?(r.revertFocus(),r.translate(s.translateX,s.translateY,{duration:200,callback:function(){r.destroyed||(r.translate(0,0),r.setHidden(!0))}})):(r.getTranslatable().stopAnimation(),r.setHidden(!0)),r.getFloated()||this.translate(0,0,t?{duration:200}:null))},hideAllMenus:function(e){var t,i=this.getMenus();for(t in i)this.hideMenu(t,e)},hideOtherMenus:function(e,t){var i,n=this.getMenus();for(i in n)e!==i&&this.hideMenu(i,t)},toggleMenu:function(e){var t,i=this.getMenus();i[e]&&(t=i[e]).setDisplayed(t.isHidden())},applyScrollable:function(e){return this.callParent([e,Ext.getViewportScroller()])},doDestroy:function(){var e=Ext.get(document.documentElement),t=this._scrollable;e.removeCls(this.hasViewportCls),e.removeCls(this.fixedCls),t&&(t.setConfig({x:!0,y:!0}),this._scrollable=null),Ext.un("resize","onWindowResize",this),this.callParent(),Ext.Viewport=null},privates:{addMeta:function(e,t){var i=document.createElement("meta");i.setAttribute("name",e),i.setAttribute("content",t),Ext.getHead().append(i)},beforeMenuAnimate:function(e){var t,i,n=e.getSide(),r=a[n],s={translateX:0,translateY:0};this.hideOtherMenus(n),e.getFloated()?this.add(e):(Ext.getBody().insertFirst(e.element),e.rendered||e.setRendered(!0),(i=e.getModal())&&(Ext.getBody().insertFirst(i.element),i.rendered||i.setRendered(!0)),this.translate(0,0)),e.removeCls(this.getLayout().itemCls),e.show(!1,{side:null}),t=e.element.measure(10&r?"w":"h"),8===r?s.translateX=-t:2===r?s.translateX=t:1===r?s.translateY=-t:4===r&&(s.translateY=t),e.translate(s.translateX,s.translateY)},disableTabbing:function(){this.tabbingDisabled||(this.tabbingDisabled=!0,this.callParent())},enableTabbing:function(e){this.tabbingDisabled&&(this.tabbingDisabled=!1,this.callParent([e]))},doAddListener:function(e,t,i,n,r,s,o){if("ready"===e&&this.isReady&&!this.isMaximizing)return t.call(i),this;this.callParent([e,t,i,n,r,s,o])},isScalable:function(){var e,t=document.querySelectorAll('meta[name="viewport"]'),i=t.length&&t[t.length-1],n=!0;return i&&(n=!((e=i.getAttribute("content"))&&this.notScalableRe.test(e))),n},onTap:function(e){},onSwipeStart:function(e){var t=this.sideForSwipeDirection(e.direction),i=this.getMenus()[t];i&&!i.owns(e)&&this.hideMenu(t)},onEdgeSwipeStart:function(e){var t,i=this.getMenus(),n=i[u[e.direction]];if(n&&n.isHidden()){for(t in e.claimGesture(),i)if(i[t].isVisible())return;this.$swiping=!0,this.beforeMenuAnimate(n)}},onEdgeSwipe:function(e){var t,i,n,r,s,o=this.sideForDirection(e.direction),a=this.getMenus()[u[e.direction]];a&&this.$swiping&&(e.claimGesture(),e.distance!==this.lastSwipeDistance&&(this.reverseSwiping=e.distance<this.lastSwipeDistance),this.lastSwipeDistance=e.distance,t=a.element.measure(10&o?"w":"h"),r=Math.min(e.distance-t,0),s=Math.min(e.distance,t),i={translateX:0,translateY:0},n={translateX:0,translateY:0},8===o?(i.translateX=r,n.translateX=s):2===o?(i.translateX=-r,n.translateX=-s):1===o?(i.translateY=r,n.translateY=s):4===o&&(i.translateY=-r,n.translateY=-s),a.translate(i.translateX,i.translateY),a.getFloated()||this.translate(n.translateX,n.translateY))},onEdgeSwipeEnd:function(e){var t,i,n,r,s=this.sideForDirection(e.direction),o=this.getMenus()[u[e.direction]],a=this.reverseSwiping||e.distance<this.getSwipeThreshold(),l={translateX:0,translateY:0},c={translateX:0,translateY:0};o&&(t=o.element.measure(10&s?"w":"h"),i=e.flick?e.flick.velocity:0,2===s?0<i.x&&(a=!0):8===s?i.x<0&&(a=!0):1===s?i.y<0&&(a=!0):4===s&&0<i.y&&(a=!0),n=a?t:0,r=a?0:-t,8===s?(l.translateX=-n,c.translateX=-r):2===s?(l.translateX=n,c.translateX=r):1===s?(l.translateY=-n,c.translateY=-r):4===s&&(l.translateY=n,c.translateY=r),o.translate(l.translateX,l.translateY,{duration:200,callback:function(){a&&o.setHidden(!0)}}),o.getFloated()||this.translate(c.translateX,c.translateY,{duration:200}),this.$swiping=!1)},sideForDirection:function(e){return"up"===e?e="top":"down"===e&&(e="bottom"),t[a[e]]},sideForSwipeDirection:function(e){return"up"===e?"top":"down"===e?"bottom":e},toggleWindowListener:function(e,t,i,n){e?this.addWindowListener(t,i,n):this.removeWindowListener(t,i,n)}}}}),Ext.define("Ext.viewport.Ios",{extend:Ext.viewport.Default,isFullscreen:function(){return this.isHomeScreen()},isHomeScreen:function(){return!0===window.navigator.standalone},constructor:function(){this.callParent(arguments),document.documentElement.style.overflow="hidden"},maximize:function(){var e,t,i,n;if(this.isFullscreen())return this.callParent();e=this.stretchHeights,t=this.getOrientation(),i=this.getWindowHeight(),n=e[t],0<window.scrollY?(this.scrollToTop(),n||(e[t]=n=this.getWindowHeight()),this.setHeight(n),this.fireMaximizeEvent()):(n=n||this.getScreenHeight(),this.setHeight(n),this.waitUntil(function(){return this.scrollToTop(),i!==this.getWindowHeight()},function(){e[t]||(n=e[t]=this.getWindowHeight(),this.setHeight(n)),this.fireMaximizeEvent()},function(){Ext.Logger.error("Timeout waiting for window.innerHeight to change",this),n=e[t]=this.getWindowHeight(),this.setHeight(n),this.fireMaximizeEvent()},50,1e3))},getScreenHeight:function(){return window.screen[this.getOrientation()===this.PORTRAIT?"height":"width"]},scrollToTop:function(){window.scrollTo(0,0)}},function(){Ext.os.is.iOS&&(Ext.os.version.lt("3.2")&&this.override({constructor:function(){var e=this.stretchHeights={};return e[this.PORTRAIT]=416,e[this.LANDSCAPE]=268,this.callOverridden(arguments)}}),Ext.os.version.lt("5")&&this.override({fieldMaskClsTest:"-field-mask",doPreventZooming:function(e){var t=e.target;t&&1===t.nodeType&&!this.isInputRegex.test(t.tagName)&&-1===t.className.indexOf(this.fieldMaskClsTest)&&e.preventDefault()}}),Ext.os.is.iPad&&this.override({isFullscreen:function(){return!0}}),Ext.os.version.gtEq("7")&&Ext.os.version.lt("8")&&("Tablet"!==Ext.os.deviceType&&Ext.browser.is.Safari&&!window.navigator.standalone||this.override({constructor:function(){var e={},t={},i=this.determineOrientation(),n=window.screen.height,r=window.screen.width,s=i===this.PORTRAIT?n-window.innerHeight:r-window.innerHeight;e[this.PORTRAIT]=n-s,e[this.LANDSCAPE]=r-s,t[this.PORTRAIT]=r,t[this.LANDSCAPE]=n,this.stretchHeights=e,this.stretchWidths=t,this.callOverridden(arguments),this.on("ready",this.setViewportSizeToAbsolute,this),this.on("orientationchange",this.setViewportSizeToAbsolute,this)},getWindowHeight:function(){return this.stretchHeights[this.getOrientation()]},getWindowWidth:function(){return this.stretchWidths[this.getOrientation()]},setViewportSizeToAbsolute:function(){this.setWidth(this.getWindowWidth()),this.setHeight(this.getWindowHeight())}}),"Tablet"===Ext.os.deviceType&&this.override({constructor:function(){this.callOverridden(arguments),window.addEventListener("scroll",function(){0!==window.scrollX&&window.scrollTo(0,window.scrollY)},!1)},setViewportSizeToAbsolute:function(){window.scrollTo(0,0),this.callOverridden(arguments)},onElementBlur:function(){this.callOverridden(arguments),0!==window.scrollY&&window.scrollTo(0,0)}})))}),Ext.define("Ext.viewport.Android",{extend:Ext.viewport.Default,config:{translatable:{type:"csstransform"}},preventPullRefresh:!0,constructor:function(){this.callParent(arguments),this.on({orientationchange:"hideKeyboardIfNeeded",scope:this,priority:1001}),this.preventPullRefresh&&Ext.getBody().setStyle({overflow:"hidden"})},getWindowWidth:function(){return this.element.getWidth()},getWindowHeight:function(){return this.element.getHeight()},getDummyInput:function(){var e=this.dummyInput,t=this.focusedElement,i=Ext.fly(t).getBox();return e||(this.dummyInput=e=document.createElement("input"),e.style.position="absolute",e.style.opacity="0",e.style.pointerEvents="none",document.body.appendChild(e)),e.style.left=i.left+"px",e.style.top=i.top+"px",e.style.display="",e},doBlurInput:function(e){var t,i=e.target;this.focusedElement&&!this.isInputRegex.test(i.tagName)&&(t=this.getDummyInput(),delete this.focusedElement,t.focus(),Ext.defer(function(){t.style.display="none"},100))},hideKeyboardIfNeeded:function(){var e=this.focusedElement;e&&(delete this.focusedElement,Ext.os.version.lt("4")?e.style.display="none":e.blur(),Ext.defer(function(){e.style.display=""},1e3))},doFireOrientationChangeEvent:function(){return this.orientationChanging=!0,this.waitUntil(function(){return this.getWindowOuterHeight()!==this.windowOuterHeight},function(){this.windowOuterHeight=this.getWindowOuterHeight(),this.updateSize(),this.orientationChanging=!1},function(){Ext.Logger.error("Timeout waiting for viewport's outerHeight to change before firing orientationchange",this)}),this},getActualWindowOuterHeight:function(){return Math.round(this.getWindowOuterHeight()/window.devicePixelRatio)},maximize:function(){var e,t,i=this.stretchHeights,n=this.orientation;(t=i[n])||(i[n]=t=this.getActualWindowOuterHeight()),this.addressBarHeight||(this.addressBarHeight=t-this.getWindowHeight()),this.setHeight(t),e=this.isHeightMaximized.bind(this,t),this.scrollToTop(),this.waitUntil(e,this.fireMaximizeEvent,this.fireMaximizeEvent)},isHeightMaximized:function(e){return this.scrollToTop(),this.getWindowHeight()===e},doPreventZooming:function(e){var t;"button"in e&&0!==e.button||!(t=e.target)||1!==t.nodeType||this.isInputRegex.test(t.tagName)||this.focusedElement||e.preventDefault()}},function(){var e,t;Ext.os.is.Android&&(e=Ext.os.version,t=Ext.browser.userAgent,/(htc|desire|incredible|ADR6300)/i.test(t)&&e.lt("2.3")&&this.override({constructor:function(e){return(e=e||{}).autoMaximize=!1,this.watchDogTick=this.watchDogTick.bind(this),Ext.interval(this.watchDogTick,1e3),this.callParent([e])},watchDogTick:function(){this.watchDogLastTick=Ext.Date.now()},doPreventPanning:function(){if(!(2e3<=Ext.Date.now()-this.watchDogLastTick))return this.callParent(arguments)},doPreventZooming:function(){if(!(2e3<=Ext.Date.now()-this.watchDogLastTick))return this.callParent(arguments)}}),e.match("2")?this.override({onReady:function(){this.addWindowListener("resize",this.onWindowResize.bind(this)),this.callParent(arguments)},scrollToTop:function(){document.body.scrollTop=100},onWindowResize:function(){var e=this.windowWidth,t=this.windowHeight,i=this.getWindowWidth(),n=this.getWindowHeight();this.getAutoMaximize()&&!this.isMaximizing&&!this.orientationChanging&&0===window.scrollY&&e===i&&n<t&&(n>=t-this.addressBarHeight||!this.focusedElement)&&this.scrollToTop()}}):e.gtEq("3.1")?this.override({isHeightMaximized:function(e){return this.scrollToTop(),this.getWindowHeight()===e-1}}):e.match("3")&&this.override({isHeightMaximized:function(){return this.scrollToTop(),!0}}),e.gtEq("4")&&this.override({doBlurInput:Ext.emptyFn}))}),Ext.define("Ext.viewport.WindowsPhone",{extend:Ext.viewport.Default,requires:[],alternateClassName:"Ext.viewport.WP",config:{translatable:{type:"csstransform"}},initialize:function(){document.body.addEventListener("onselectstart",function(e){var t=e.srcElement.nodeName.toUpperCase();if(-1===["INPUT","TEXTAREA"].indexOf(t))return!1}),this.addMeta("msapplication-tap-highlight","no"),this.callParent()},supportsOrientation:function(){return!1},onWindowResize:function(e,t){this.callParent([e,t]),this.waitUntil(function(){var e=this.windowWidth,t=this.windowHeight,i=this.getWindowWidth(),n=this.getWindowHeight(),r=this.getOrientation(),s=this.determineOrientation();return e!==i&&t!==n&&r!==s},function(){var e=this.getOrientation(),t=this.determineOrientation();this.fireOrientationChangeEvent(t,e)},Ext.emptyFn,250)}}),Ext.define("Ext.viewport.Viewport",{singleton:!0,setup:function(e){var t;switch(Ext.os.name){case"Android":t="ChromeMobile"===Ext.browser.name?"Default":"Android";break;case"iOS":t="Ios";break;case"Windows":t="IE"===Ext.browser.name?"WindowsPhone":"Default";break;case"WindowsPhone":t="WindowsPhone";break;default:t="Default"}return Ext.Viewport=Ext.create("Ext.viewport."+t,e)}}),Ext.define("Ext.overrides.app.Application",{override:"Ext.app.Application",config:{viewport:null},quickTips:!1,destroy:function(){this.setQuickTips(!1),this.callParent()},initMainView:function(){var e,t=this.viewport=Ext.Viewport;this.callParent(),e=this.getMainView(),t.onAppLaunch(),e&&t.add(e)},applyQuickTips:function(e){return(e=e||null)&&(!0===e&&(e={}),e=new Ext.tip.Manager(e)),e},updateQuickTips:function(e,t){t&&t.destroy()}}),Ext.define("Ext.app.domain.View",{extend:Ext.app.EventDomain,isInstance:!0,constructor:function(e){this.callParent([e]),this.controller=e,this.monitoredClasses=[Ext.Widget]},match:function(e,t,i){return"#"===t?i===e.getController():e.is(t)},destroy:function(){this.controller=null,this.callParent()}}),Ext.define("Ext.app.ViewController",{extend:Ext.app.BaseController,alias:"controller.controller",mixins:[Ext.mixin.Factoryable],isViewController:!0,factoryConfig:{type:"controller"},config:{bindings:{$value:null,lazy:!0},closeViewAction:"destroy"},view:null,constructor:function(e){this.compDomain=new Ext.app.domain.View(this),this.callParent([e])},beforeInit:Ext.emptyFn,init:Ext.emptyFn,initViewModel:Ext.emptyFn,destroy:function(){var e,t,i,n=this.compDomain;if(this.$hasBinds)for(i in e=this.getBindings())(t=e[i])&&t.destroy();n&&(n.unlisten(this),n.destroy()),this.compDomain=this.view=null,this.callParent()},closeView:function(){var e=this.getView();e&&e[this.getCloseViewAction()]()},control:function(e,t){var i=e;Ext.isString(e)&&((i={})[e]=t),this.compDomain.listen(i,this)},listen:function(e,t){var i=e.component;i&&(delete(e=Ext.apply({},e)).component,this.control(i)),this.callParent([e,t])},applyId:function(e){return e=e||Ext.id(null,"controller-")},getReferences:function(){var e=this.view;return e&&e.getReferences()},getView:function(){return this.view},lookup:function(e){var t=this.view;return t&&t.lookup(e)},lookupReference:function(e){return this.lookup(e)},getSession:function(){var e=this.view;return e&&e.lookupSession()},getViewModel:function(){var e=this.view;return e&&e.lookupViewModel()},getStore:function(e){var t=this.getViewModel();return t?t.getStore(e):null},fireViewEvent:function(e,t){var i=this.view,n=!1,r=arguments;return i&&(i!==t&&(r=Ext.Array.slice(r)).splice(1,0,i),n=i.fireEvent.apply(i,r)),n},applyBindings:function(e){if(!e)return null;var t,i,n,r=this.getViewModel(),s=this.getBindTemplateScope();for(i in this.$hasBinds=!0,r||Ext.raise("Cannot use bind config without a viewModel"),e)t=null,(n=e[i])&&((t=r.bind(n,i,this)).getTemplateScope=s),e[i]=t;return e},privates:{view:null,attachReference:function(e){var t=this.view;t&&t.attachReference(e)},getBindTemplateScope:function(){return this.scope},initBindings:function(){this.getBindings()},setView:function(e){this.view=e,this.beforeInit.$nullFn||this.beforeInit(e)}}}),Ext.define("Ext.util.Scheduler",{mixins:[Ext.mixin.Observable],busyCounter:0,lastBusyCounter:0,destroyed:!1,firing:null,notifyIndex:-1,nextId:0,orderedItems:null,passes:0,scheduledCount:0,validIdRe:null,config:{cycleLimit:5,preSort:null,tickDelay:5},suspendOnNotify:!0,constructor:function(e){Ext.util.Scheduler.instances?Ext.util.Scheduler.instances.push(this):Ext.util.Scheduler.instances=[this],this.id=Ext.util.Scheduler.count=(Ext.util.Scheduler.count||0)+1,this.mixins.observable.constructor.call(this,e),this.items=new Ext.util.Bag},destroy:function(){var e=this.timer;e&&(window.clearTimeout(e),this.timer=null),this.items.destroy(),this.items=this.orderedItems=null,this.callParent(),Ext.Array.remove(Ext.util.Scheduler.instances,this)},add:function(e){var t=this.items;t===this.firing&&(this.items=t=t.clone()),e.id=e.id||++this.nextId,e.scheduler=this,t.add(e),this.sortMap||(this.orderedItems=null)},remove:function(e){var t=this.items;this.destroyed||(this.sortMap&&Ext.raise("Items cannot be removed during sort"),t===this.firing&&(this.items=t=t.clone()),e.scheduled&&(this.unscheduleItem(e),e.scheduled=!1),t.remove(e),this.orderedItems=null)},sort:function(){var e,t,i=this.items,n={},r=this.getPreSort();for(this.orderedItems=[],this.sortMap=n,this.sortStack=[],r&&i.sort(r),i=i.items,e=0;e<i.length;++e)n[(t=i[e]).id]||this.sortItem(t);this.sortMap=null,this.sortStack=null},sortItem:function(e){var t,i=this,n=i.sortMap,r=i.orderedItems;if(e.scheduler||i.add(e),t=e.id,e.scheduler!==i&&Ext.raise("Item "+t+" belongs to another Scheduler"),i.sortStack.push(e),0===n[t]){for(var s=[],o=0;o<i.sortStack.length;++o)s[o]=i.sortStack[o].getFullName();Ext.raise("Dependency cycle detected: "+s.join("\\n --\\x3e "))}return t in n||(n[t]=0,e.sort.$nullFn||e.sort(),n[t]=1,e.order=i.orderedItems.length,r.push(e)),i.sortStack.pop(),i},sortItems:function(e){var t=this.sortItem;return e&&(e instanceof Array?Ext.each(e,t,this):Ext.Object.eachValue(e,t,this)),this},applyPreSort:function(e){if("function"==typeof e)return e;var t,i,n,a=e.split(","),l=[],c=a.length;for(i=0;i<c;++i)l[i]=1,"-"===(t=(n=a[i]).charAt(0))?l[i]=-1:"+"!==t&&(t=0),t&&(a[i]=n.substring(1));return function(e,t){var i,n,r,s,o=0;for(i=0;!o&&i<c;++i)r=e[n=a[i]],s=t[n],o=l[i]*(r<s?-1:s<r?1:0);return o}},notify:function(){var e,t,i,n,r,s,o=this,a=o.timer,l=o.getCycleLimit(),c=Ext.GlobalEvents,u=o.suspendOnNotify;if(a&&(window.clearTimeout(a),o.timer=null),!o.firing&&o.scheduledCount){for(u&&Ext.suspendLayouts();o.scheduledCount;){if(!l){o.firing=null,o.onCycleLimitExceeded&&o.onCycleLimitExceeded();break}if(--l,s||(s=!0,c.hasListeners.beforebindnotify&&c.fireEvent("beforebindnotify",o)),++o.passes,(r=o.orderedItems)||(o.sort(),r=o.orderedItems),n=r.length)for(o.firing=o.items,t=0;t<n&&(!(i=r[t]).scheduled||(i.scheduled=!1,--o.scheduledCount,o.notifyIndex=t,i.react(),o.scheduledCount));++t);}o.firing=null,o.notifyIndex=-1,u&&Ext.resumeLayouts(!0)}(e=o.busyCounter)!==o.lastBusyCounter&&((o.lastBusyCounter=e)||o.fireEvent("idle",o))},onTick:function(){this.timer=null,this.notify()},scheduleItem:function(e){++this.scheduledCount,this.timer||this.firing||this.scheduleTick()},scheduleTick:function(){this.destroyed||this.timer||(this.timer=Ext.defer(this.onTick,this.getTickDelay(),this))},unscheduleItem:function(e){this.scheduledCount&&--this.scheduledCount},adjustBusy:function(e){var t=this.busyCounter+e;(this.busyCounter=t)?this.lastBusyCounter||(this.lastBusyCounter=t,this.fireEvent("busy",this)):this.lastBusyCounter&&!this.timer&&this.scheduleTick()},isBusy:function(){return!this.isIdle()},isIdle:function(){return!(this.busyCounter+this.lastBusyCounter)},debugHooks:{$enabled:!1,onCycleLimitExceeded:function(){Ext.raise("Exceeded cycleLimit "+this.getCycleLimit())},scheduleItem:function(e){e||Ext.raise("scheduleItem: Invalid argument"),Ext.log("Schedule item: "+e.getFullName()+" - "+(this.scheduledCount+1)),e.order<=this.notifyIndex&&Ext.log.warn("Suboptimal order: "+e.order+" < "+this.notifyIndex),this.callParent([e])},unscheduleItem:function(e){this.scheduledCount||Ext.raise("Invalid scheduleCount"),this.callParent([e]),Ext.log("Unschedule item: "+e.getFullName()+" - "+this.scheduledCount)}}}),Ext.define("Ext.data.Batch",{mixins:{observable:Ext.mixin.Observable},config:{pauseOnException:!1},current:-1,total:0,running:!1,complete:!1,exception:!1,constructor:function(e){this.mixins.observable.constructor.call(this,e),this.operations=[],this.exceptions=[]},add:function(e){var t,i;if(Ext.isArray(e))for(t=0,i=e.length;t<i;++t)this.add(e[t]);else this.total++,e.setBatch(this),this.operations.push(e);return this},sort:function(){this.operations.sort(this.sortFn)},sortFn:function(e,t){var i=e.order-t.order;if(i)return i;var n,r=e.entityType,s=t.entityType;return r&&s?((n=r.rank)||(r.schema.rankEntities(),n=r.rank),(n-s.rank)*e.foreignKeyDirection):0},start:function(e){return this.destroyed||!this.operations.length||this.running?this:(this.exceptions.length=0,this.exception=!1,this.running=!0,this.runOperation(Ext.isDefined(e)?e:this.current+1))},abort:function(){var e;this.running&&((e=this.getCurrent()).destroyed||e.abort()),this.running=!1,this.aborted=!0,this.current=void 0},retry:function(){return this.start(this.current)},runNextOperation:function(){return this.running&&this.runOperation(this.current+1),this},pause:function(){return this.running=!1,this},getOperations:function(){return this.operations},getExceptions:function(){return this.exceptions},getCurrent:function(){var e=null,t=this.current;return-1===t||this.complete||(e=this.operations[t]),e},getTotal:function(){return this.total},isRunning:function(){return this.running},isComplete:function(){return this.complete},hasException:function(){return this.exception},runOperation:function(e){var t=this.operations,i=t[e];return void 0===i?(this.running=!1,this.complete=!0,this.fireEvent("complete",this,t[t.length-1])):(this.current=e,i.setInternalCallback(this.onOperationComplete),i.setInternalScope(this),i.execute()),this},onOperationComplete:function(e){var t=e.hasException();t&&(this.exception=!0,this.exceptions.push(e),this.fireEvent("exception",this,e)),t&&this.getPauseOnException()?this.pause():(this.fireEvent("operationcomplete",this,e),this.runNextOperation())},destroy:function(){var e,t,i,n=this.operations;for(this.running&&this.abort(),t=0,i=this.operations.length;t<i;t++)(e=n[t])&&(e.destroyed||e.$destroyOwner||e.destroy(),e[t]=null);this.operations=this.exceptions=null,this.callParent()}}),Ext.define("Ext.data.matrix.Slice",{constructor:function(e,t){this.id=t,this.side=e,this.members={}},attach:function(e){Ext.Assert.falsey(this.store,"Store is already attached"),(this.store=e).matrix=this,e.on("load",this.onStoreLoad,this,{single:!0})},commit:function(){var e,t=this.members;for(e in t)t[e][2]=0},onStoreLoad:function(e){this.update(e.getData().items,0)},update:function(e,t){e instanceof Array||Ext.raise("Only array of records or record ids are supported");var i,n,r,s,o,a,l=Ext.data.matrix.Slice,c=this.side,u=c.index,d=e.length,h=this.id,f=this.members,g=c.inverse,p=g.slices;for(r=0;r<d;++r)n=null,i=f[o=(s=e[r]).isEntity?s.id:s],t<0&&i&&1===i[2]?(delete f[o],(a=p[o])&&delete a.members[h],n=1):i?t===i[2]||0===t||1===t&&0===i[2]||(i[2]=t,a=p[o],n=1):((i=[o,o,t])[u]=h,f[o]=i,(a=p[o])||(p[o]=a=new l(g,o)),a.members[h]=i,n=1),n&&(this.notify&&this.notify.call(this.scope,this,o,t),a&&a.notify&&a.notify.call(a.scope,a,h,t))},updateId:function(e){var t,i,n=this.id,r=this.side,s=r.slices,o=s[n],a=o.members,l=r.index,c=r.inverse.slices;for(t in s[this.id=e]=o,delete s[n],a)a[t][l]=e,(i=c[t].members)[e]=i[n],delete i[n]},destroy:function(){var e=this.store;e&&(e.matrix=null,e.un("load",this.onStoreLoad,this)),this.notify=this.scope=this.store=this.side=this.members=null,this.callParent()}}),Ext.define("Ext.data.matrix.Side",{constructor:function(e,t,i){this.matrix=e,this.index=t,this.role=i,this.slices={}},commit:function(){var e,t=this.slices;for(e in t)t[e].commit()},get:function(e,t){var i=this.slices,n=i[e]||(i[e]=new Ext.data.matrix.Slice(this,e));return t||0===t?n.members[t]:n},update:function(e,t,i){return this.get(e).update(t,i)},updateId:function(e,t){var i=this.get(e);i&&i.updateId(t)},destroy:function(){var e,t=this.slices;for(e in t)t[e].destroy();this.inverse=this.matrix=this.role=this.slices=null,this.callParent()}}),Ext.define("Ext.data.matrix.Matrix",{constructor:function(e,t){var i=t.isManyToMany?t:e.getSchema().getAssociation(t),n=Ext.data.matrix.Side,r=new n(this,0,i.left),s=new n(this,1,i.right);Ext.Assert.truthy(i.isManyToMany,"Association is not many-to-many"),this.association=i,this.session=e,this.left=r,this.right=s,(r.inverse=s).inverse=r},commit:function(){this.left.commit(),this.right.commit()},update:function(e,t,i){return this.left.update(e,t,i)},updateId:function(e,t,i){var n,r=e.self,s=this.left,o=this.right;r===s.role.cls&&(n=s),r===o.role.cls&&(n=o),n&&n.updateId(t,i)},destroy:function(){this.left.destroy(),this.right.destroy(),this.association=this.session=this.left=this.right=null,this.callParent()}}),Ext.define("Ext.data.session.ChangesVisitor",{constructor:function(e){var t;t=(this.session=e).getCrudProperties(),this.result=null,this.writerOptions={},this.createKey=t.create,this.readKey=t.read,this.updateKey=t.update,this.dropKey=t.drop},onDirtyRecord:function(e){var t,i,n,r,s=this.crud,o=e.phantom,a=e.dropped,l=e.$className,c=o||a?"allDataOptions":"partialDataOptions",u=this.writerOptions,d=e.entityName;if(o&&a)return!1;s=o?this.createKey:a?this.dropKey:this.updateKey,u=u[l]||(u[l]={}),a&&((t=u.drop)||(u.drop=t={all:e.getProxy().getWriter().getWriteAllFields()}),t.all||(n=e.id)),n||((t=u[c])||(t=e.getProxy().getWriter().getConfig(c),u[c]=t=Ext.Object.chain(t),this.setupOptions(t)),n=e.getData(t)),(i=(i=(r=this.result||(this.result={}))[d]||(r[d]={}))[s]||(i[s]=[])).push(n)},setupOptions:function(e){e.serialize=!0},onMatrixChange:function(e,t,i,n){var r,s,o=e.left.type,a=e.right.role,l=n<0?this.dropKey:this.createKey;(r=(r=(r=(r=(s=this.result||(this.result={}))[o]||(s[o]={}))[a]||(r[a]={}))[l]||(r[l]={}))[t]||(r[t]=[])).push(i)}}),Ext.define("Ext.data.session.ChildChangesVisitor",{extend:Ext.data.session.ChangesVisitor,constructor:function(){this.seen={},this.callParent(arguments)},setupOptions:function(e){this.callParent([e]),e.serialize=!1},onDirtyRecord:function(e){!1!==this.callParent(arguments)&&(e.$source||!e.dropped&&e.phantom||this.readEntity(e))},readEntity:function(e){var t,i,n=this.readKey,r=e.entityName,s=e.id,o=this.seen,a=r+s;o[a]||(o[a]=!0,(i=(i=(t=this.result||(this.result={}))[r]||(t[r]={}))[n]||(i[n]=[])).push(Ext.apply({},e.modified,e.data)))}}),Ext.define("Ext.data.session.BatchVisitor",{map:null,constructor:function(e){this.batch=e},getBatch:function(e){var t,i,n,r,s,o,a,l,c,u,d=this.map,h=this.batch;if(d)for(n in h=h||new Ext.data.Batch,d)for(s in a=(o=(i=(t=d[n]).entity).getProxy()).getBatchActions(),delete t.entity,t)if(a)(r=o.createOperation(s,{records:t[s]})).entityType=i,h.add(r);else for(u=0,c=(l=t[s]).length;u<c;++u)(r=o.createOperation(s,{records:[l[u]]})).entityType=i,h.add(r);return h&&!1!==e&&h.sort(),h},onDirtyRecord:function(e){var t=e.phantom?"create":e.dropped?"destroy":"update",i=e.$className,n=this.map||(this.map={}),r=n[i]||(n[i]={entity:e.self});(r=r[t]||(r[t]=[])).push(e)}}),Ext.define("Ext.mixin.Dirty",{mixinId:"dirty",config:{dirty:{$value:!1,lazy:!0}},dirty:!1,_dirtyRecordCount:0,ignoreDirty:!1,recordStateIsDirtyState:!0,isDirty:function(){return this.getDirty()},applyDirty:function(e){return!this.ignoreDirty&&e},updateDirty:function(e){this.dirty=e,this.fireEvent&&!this.isDirtyInitializing&&this.fireDirtyChange()},clearRecordStates:function(){var e=this._crudCounters;e&&(e.C=e.U=e.D=0),this._dirtyRecordCount=0,this.recordStateIsDirtyState&&this.setDirty(!1)},fireDirtyChange:function(){!this.ignoreDirty&&this.hasListeners.dirtychange&&this.fireEvent("dirtychange",this,this.dirty)},trackRecordState:function(e,t){var i,n,r=this._crudCounters||(this._crudCounters={C:0,R:0,U:0,D:0}),s=this._dirtyRecordCount,o=e.crudState,a=e.crudStateWas;return!t&&o===a||(!t&&a&&--r[a],e.phantom&&"D"===o||++r[o],this.checkCounters(),this._dirtyRecordCount=n=r.C+r.U+r.D,(i=!n!=!s)&&this.recordStateIsDirtyState&&this.setDirty(0<n)),i},untrackRecordState:function(e){var t,i,n=this._crudCounters,r=this._dirtyRecordCount,s=e.crudState;return n&&"D"!==s&&!e.erased&&(--n[s],this.checkCounters(),this._dirtyRecordCount=i=n.C+n.U+n.D,(t=!i!=!r)&&this.recordStateIsDirtyState&&this.setDirty(0<i)),t},checkCounters:function(){var e,t=this._crudCounters;for(e in t)t[e]<0&&Ext.raise("Invalid state for "+e)}}),Ext.define("Ext.data.Session",{mixins:[Ext.mixin.Dirty,Ext.mixin.Observable],isSession:!0,config:{schema:"default",parent:null,autoDestroy:!0,crudProperties:{create:"C",read:"R",update:"U",drop:"D"}},crudOperations:[{type:"R",entityMethod:"readEntities"},{type:"C",entityMethod:"createEntities"},{type:"U",entityMethod:"updateEntities"},{type:"D",entityMethod:"dropEntities"}],crudKeys:{C:1,R:1,U:1,D:1},statics:{nextId:1},constructor:function(e){this.data={},this.matrices={},this.id=Ext.data.Session.nextId++,this.identifierCache={},this.recordCreator=this.recordCreator.bind(this),this.mixins.observable.constructor.call(this,e)},destroy:function(){var e,t,i,n,r=this.matrices,s=this.data;for(n in r)r[n].destroy();for(e in s)for(n in t=s[e])(i=t[n].record)&&(i.$source=null,i.unjoin(this));this.identifierCache=this.recordCreator=this.matrices=this.data=null,this.setSchema(null),this.callParent()},adopt:function(e){var t,i=e.associations;if(this.checkModelType(e.self),e.session&&e.session!==this&&Ext.raise("Record already belongs to an existing session"),e.session!==this&&(this.add(e),i))for(t in i)i[t].adoptAssociated(e,this)},commit:function(){var e,t,i,n,r=this.data,s=this.matrices,o=this.getDirty();for(e in this.suspendEvent("dirtychange"),r)for(i in t=r[e])(n=t[i].record)&&n.commit();for(i in s)s[i].commit();this.clearRecordStates(),this.resumeEvent("dirtychange"),this.getDirty()!==o&&this.fireDirtyChange()},createRecord:function(e,t,i){this.checkModelType(e);var n,r=e.$isClass?e:this.getSchema().getEntity(e),s=this.getParent();return t&&s&&(n=r.getIdFromData(t),s.peekRecord(r,n)&&Ext.raise("A parent session already contains an entry for "+r.entityName+": "+n)),new r(t,i?null:this)},getChanges:function(){var e=new Ext.data.session.ChangesVisitor(this);return this.visitData(e),e.result},getChangesForParent:function(){var e=new Ext.data.session.ChildChangesVisitor(this);return this.visitData(e),e.result},getRecord:function(e,t,i){var n,r,s,o,a=e.isModel;return a&&(t=(a=e).id,e=e.self),(n=this.peekRecord(e,t))||(r=e.$isClass?e:this.getSchema().getEntity(e),(s=this.getParent())&&(o=s.peekRecord(r,t)),o&&(o.isLoading()?a=!1:(n=o.copy(void 0,this)).$source=o),n||(a?(n=a,this.adopt(n)):(n=r.createWithId(t,null,this),!1!==i&&n.load(Ext.isObject(i)?i:void 0)))),n},getSaveBatch:function(e){var t=new Ext.data.session.BatchVisitor;return this.visitData(t),t.getBatch(e)},onInvalidAssociationEntity:function(e,t){Ext.raise("Unable to read association entity: "+this.getModelIdentifier(e,t))},onInvalidEntityCreate:function(e,t){Ext.raise("Cannot create, record already not exists: "+this.getModelIdentifier(e,t))},onInvalidEntityDrop:function(e,t){Ext.raise("Cannot drop, record does not exist: "+this.getModelIdentifier(e,t))},onInvalidEntityRead:function(e,t){Ext.raise("Cannot read, record already not exists: "+this.getModelIdentifier(e,t))},onInvalidEntityUpdate:function(e,t,i){i?Ext.raise("Cannot update, record dropped: "+this.getModelIdentifier(e,t)):Ext.raise("Cannot update, record does not exist: "+this.getModelIdentifier(e,t))},peekRecord:function(e,t,i){this.checkModelType(e);var n,r,s=(e.$isClass?e:this.getSchema().getEntity(e)).entityName,o=this.data[s];return!(n=(o=o&&o[t])&&o.record)&&i&&(n=(r=this.getParent())&&r.peekRecord(e,t,i)),n||null},save:function(){var e,t=this.getParent();t?(e=new Ext.data.session.ChildChangesVisitor(this),this.visitData(e),t.update(e.result),this.commit()):Ext.raise("Cannot commit session, no parent exists")},spawn:function(){return new this.self({schema:this.getSchema(),parent:this})},update:function(e){var t,i,n,r,s,o,a,l,c,u,d=this,h=d.getSchema(),f=d.crudOperations,g=f.length,p=d.crudKeys,m=d.getDirty();for(t in d.suspendEvent("dirtychange"),d.getSchema().processKeyChecks(!0),e)for((i=h.getEntity(t))||Ext.raise("Invalid entity type: "+t),n=e[t],r=0;r<g;++r)(o=n[(s=f[r]).type])&&d[s.entityMethod](i,o);for(t in e)for(l in a=(i=h.getEntity(t)).associations,n=e[t])p[l]||((c=a[l])||Ext.raise("Invalid association key for "+t+', "'+l+'"'),u=n[c.role],c.processUpdate(d,u));d.resumeEvent("dirtychange"),d.getDirty()!==m&&d.fireDirtyChange()},afterCommit:function(e){this.trackRecordState(e)},afterDrop:function(e){this.trackRecordState(e)},afterEdit:function(e){this.trackRecordState(e)},afterErase:function(e){this.evict(e)},afterReject:function(e){this.trackRecordState(e)},privates:{add:function(e){var t,i,n=e.id,r=this.getEntry(e.self,n);for(i in r.record&&Ext.raise("Duplicate id "+e.id+" for "+e.entityName),e.session=this,r.record=e,this.trackRecordState(e,!0),this.registerReferences(e),t=e.associations)t[i].checkMembership(this,e)},applySchema:function(e){return Ext.data.schema.Schema.get(e)},checkModelType:function(e){e.$isClass&&(e=e.entityName),e?this.getSchema().getEntity(e)||Ext.raise("Unknown entity type "+e):Ext.raise("Unable to use anonymous models in a Session")},createEntities:function(e,t){var i,n,r,s,o=t.length;for(i=0;i<o;++i)n=t[i],s=e.getIdFromData(n),(r=this.peekRecord(e,s))?this.onInvalidEntityCreate(e,s):((r=this.createRecord(e,n,!0)).phantom=!0,r.crudState="C",this.add(r),r.crudStateWas="C")},dropEntities:function(e,t){var i,n,r,s,o=t.length;for(o&&(s=Ext.isObject(t[0])),i=0;i<o;++i)r=t[i],s&&(r=e.getIdFromData(r)),(n=this.peekRecord(e,r))?n.drop():this.onInvalidEntityDrop(e,r)},evict:function(e){var t=e.entityName,i=this.data[t],n=e.id;i&&i[n]&&(this.untrackRecordState(e),e.unjoin(this),delete i[n])},getEntityList:function(e,t){var i,n,r,s,o=t.length;for(i=0;i<o;++i)n=t[i],(r=this.peekRecord(e,n))?t[i]=r:(s=!0,t[i]=null,this.onInvalidAssociationEntity(e,n));return s&&(t=Ext.Array.clean(t)),t},getEntry:function(e,t){e.isModel&&(t=e.getId(),e=e.self);var i,n=(e.$isClass?e:this.getSchema().getEntity(e)).entityName,r=this.data;return i=(i=r[n]||(r[n]={}))[t]||(i[t]={})},getRefs:function(e,t,i){var n,r,s,o=this.getEntry(e),a=o&&o.refs&&o.refs[t.role],l=i&&this.getParent();if(l&&(n=l.getRefs(e,t))){for(r in n)s=n[r],a&&a[r]||this.getRecord(s.self,s.id);a=o&&o.refs&&o.refs[t.role]}return a||null},getIdentifier:function(e){var t,i,n,r,s=this.getParent();return s?r=s.getIdentifier(e):(r=(t=this.identifierCache)[n=(i=e.identifier).getId()||e.entityName])||(r=i.clone?i.clone({id:null}):i,t[n]=r),r},getMatrix:function(e,t){var i,n=e.isManyToMany?e.name:e,r=this.matrices;return(i=r[n])||t||(i=r[n]=new Ext.data.matrix.Matrix(this,e)),i||null},getMatrixSlice:function(e,t){return this.getMatrix(e.association)[e.side].get(t)},getModelIdentifier:function(e,t){return t+"@"+e.entityName},onIdChanged:function(e,t,i){var n,r,s,o,a,l,c=this.matrices,u=e.entityName,d=e.id,h=this.data[u],f=h[t],g=e.associations,p=f.refs,m=this._setNoRefs;for(l in h[i]&&Ext.raise("Cannot change "+u+" id from "+t+" to "+i+" id already exists"),delete h[t],h[i]=f,c)c[l].updateId(e,t,i);if(p)for(o in p)if(a=p[o],!(n=g[o].association).isManyToMany)for(s in r=n.field.name,a)a[s].set(r,d,m);this.registerReferences(e,t)},processManyBlock:function(e,t,i,n){var r,s,o,a;if(i)for(r in i)(s=this.peekRecord(e,r))?(o=this.getEntityList(t.cls,i[r]),a=t.getAssociatedItem(s),this[n](t,a,s,o)):this.onInvalidAssociationEntity(e,r)},processManyCreate:function(e,t,i,n){t?t.add(n):i[e.getterName](null,null,n)},processManyDrop:function(e,t,i,n){t&&t.remove(n)},processManyRead:function(e,t,i,n){t?t.setRecords(n):i[e.getterName](null,null,n)},readEntities:function(e,t){var i,n,r,s,o=t.length;for(i=0;i<o;++i)n=t[i],s=e.getIdFromData(n),(r=this.peekRecord(e,s))?this.onInvalidEntityRead(e,s):r=this.createRecord(e,n,!0),r.phantom=!1,this.add(r)},recordCreator:function(e,t){var i=t.getIdFromData(e),n=this.peekRecord(t,i,!0);return n?(n=this.getRecord(t,i)).mergeData(e):n=new t(e,this),n},registerReferences:function(e,t){e.entityName;var i,n,r,s,o,a,l,c,u=e.id,d=e.data,h=t||0===t;for(s=(a=e.references).length,n=0;n<s;++n)!(r=d[(o=a[n]).name])&&0!==r||((o=o.reference).type,c=o.inverse.role,(l=(l=(i=this.getEntry(o.cls,r)).refs||(i.refs={}))[c]||(l[c]={}))[u]=e,h&&delete l[t])},updateEntities:function(e,t){var i,n,r,s,o=t.length;if(Ext.isArray(t))for(i=0;i<o;++i)n=t[i],s=e.getIdFromData(n),(r=this.peekRecord(e,s))?r.set(n):this.onInvalidEntityUpdate(e,s);else for(s in t)n=t[s],(r=this.peekRecord(e,s))&&!r.dropped?r.set(n):this.onInvalidEntityUpdate(e,s,!!r)},updateReference:function(e,t,i,n){var r,s,o=t.reference,a=o.type,l=o.inverse.role,c=e.id;!n&&0!==n||delete(s=this.getEntry(a,n).refs[l])[c],!i&&0!==i||((s=(s=(r=this.getEntry(a,i)).refs||(r.refs={}))[l]||(s[l]={}))[c]=e)},visitData:function(e){var t,i,n,r,s,o,a,l,c,u,d=this.data,h=this.matrices;for(a in this.getSchema().processKeyChecks(!0),d)for(n in t=d[a])(l=t[n].record)&&(l.phantom||l.dirty||l.dropped?e.onDirtyRecord&&e.onDirtyRecord(l):e.onCleanRecord&&e.onCleanRecord(l));if(e.onMatrixChange)for(a in h)for(n in c=(s=h[a].left).slices,i=s.role.association,c)for(r in o=c[n].members)(u=(l=o[r])[2])&&e.onMatrixChange(i,l[0],l[1],u);return e},_setNoRefs:{refs:!1}}}),Ext.define("Ext.util.Schedulable",{abstract:!0,isSchedulable:!0,scheduled:!1,constructor:function(){this.getScheduler().add(this)},destroy:function(){var e=this.getScheduler();e&&!e.destroyed&&e.remove(this),this.scheduler=null,this.schedule=this.react=Ext.emptyFn,this.callParent()},getFullName:function(){return this.name||this.id},privates:{getScheduler:function(){return this.scheduler},schedule:function(){var e;this.scheduled||(e=this.getScheduler())&&(this.scheduled=!0,this.onSchedule&&this.onSchedule(),e.scheduleItem(this))},unschedule:function(){var e;this.scheduled&&((e=this.getScheduler())&&!e.destroyed&&e.unscheduleItem(this),this.scheduled=!1)},sort:function(){}}}),Ext.define("Ext.app.bind.BaseBinding",{extend:Ext.util.Schedulable,isBinding:!0,calls:0,kind:20,defaultOptions:{},lastValue:void 0,constructor:function(e,t,i,n){this.options=n,this.owner=e,this.scope=i,(this.callback=t)||Ext.raise("Callback is required"),this.lateBound=Ext.isString(t),n&&n.deep&&(this.deep=!0),this.callParent()},destroy:function(){var e=this.owner;e&&e.onBindDestroy(this),this.callParent(),this.scope=this.callback=this.owner=null},isReadOnly:function(){return!0},privates:{getScheduler:function(){var e=this.owner;return e&&e.getScheduler()},getSession:function(){var e=this.owner;return e.isSession?e:e.getSession()},notify:function(e){var t=this,i=t.options||t.defaultOptions,n=t.lastValue;t.calls&&!t.deep&&!t.valueChanged(e,n)||(++t.calls,t.lastValue=e,t.lateBound?t.scope[t.callback](e,n,t):t.callback.call(t.scope,e,n,t),i.single&&t.destroy())},valueChanged:function(e,t){var i=!0;return t!==e?e&&t&&e instanceof Date&&t instanceof Date&&(i=e.getTime()!==t.getTime()):i=Ext.isArray(e),i}}}),Ext.define("Ext.app.bind.Binding",{extend:Ext.app.bind.BaseBinding,constructor:function(e,t,i,n){this.callParent([e.owner,t,i,n]),this.stub=e,this.depth=e.depth,e.isAvailable()&&!e.scheduled&&this.schedule()},destroy:function(e){var t=this.stub;t&&!e&&(t.unbind(this),this.stub=null),this.callParent()},bindValidation:function(e,t){var i=this.stub;return i&&i.bindValidation(e,t)},bindValidationField:function(e,t){var i=this.stub;return i&&i.bindValidationField(e,t)},getFullName:function(){return this.fullName||(this.fullName="@("+this.stub.getFullName()+")")},getValue:function(){var e=this.stub;return e&&e.getValue()},isAvailable:function(){var e=this.stub;return e&&e.isAvailable()},isLoading:function(){var e=this.stub;return e&&e.isLoading()},isReadOnly:function(){var e=this.stub,t=this.options,i=!0;return t&&!1===t.twoWay||e&&(i=e.isReadOnly()),i},refresh:function(){},setValue:function(e){this.isReadOnly()&&Ext.raise("Cannot setValue on a readonly binding"),this.stub.set(e)},privates:{getDataObject:function(){var e=this.stub;return e&&e.getDataObject()},getRawValue:function(){var e=this.stub;return e&&e.getRawValue()},isDescendantOf:function(e){var t=this.stub;return!!t&&(e===t||t.isDescendantOf(e))},react:function(){this.notify(this.getValue())},schedule:function(){this.stub.scheduled||this.callParent()},sort:function(){var e=this.stub;e.scheduler.sortItem(e)}}}),Ext.define("Ext.app.bind.AbstractStub",{extend:Ext.util.Schedulable,children:null,depth:0,generation:1,kind:10,parent:null,constructor:function(e,t){this.owner=e,this.name=t,this.callParent()},destroy:function(){var e,t,i,n=this.children,r=this.bindings;if(r)for(t=0,e=r.length;t<e;++t)r[t].destroy(!0);for(i in n)n[i].destroy();this.scheduled&&this.unschedule(),this.callParent()},add:function(e){((this.children||(this.children={}))[e.name]=e).depth=this.depth+1,e.parent=this},getChild:function(e){var t=Ext.isString(e)?e.split("."):e;return t&&t.length?this.descend(t,0):this},getFullName:function(){var e,t=this.fullName,i=this.parent;return t||(t=this.name||this.id,i&&(e=i.getFullName())&&(t=(":"!==e.charAt(e.length-1)?e+".":e)+t),this.fullName=t),t},getSession:function(){var e=this.owner;return e.isSession?e:e.getSession()},bind:function(e,t,i){var n=new Ext.app.bind.Binding(this,e,t,i),r=this.bindings||(this.bindings=[]);return n.depth=this.depth,r.push(n),n},getValue:function(){return this.isAvailable()?this.getRawValue():null},graft:function(e){var t,i=this.bindings,n=this.name;if(this.parent=this.bindings=null,this.destroy(),e.depth=this.depth,e.bindings=i,e.generation=this.generation+1,e.name=n,e.id=this.id,e.path=this.path,i)for(t=i.length;0<t--;)i[t].stub=e;return e},isDescendantOf:function(e){var t;for(t=this;t=t.parent;)if(t===e)return!0;return!1},isAvailable:function(){return!0},isLoading:function(){return!1},onSchedule:function(){var e,t,i,n,r;for(r=this.parent;r;r=r.parent)if(n=r.bindings)for(e=0,t=n.length;e<t;++e)(i=n[e]).deep&&!i.scheduled&&i.schedule()},react:function(){var e,t,i,n=this.bindings;if(n)for(t=0,i=n.length;t<i;++t)(e=n[t]).scheduled||e.schedule()},unbind:function(e){var t=this.bindings;t&&t.length&&Ext.Array.remove(t,e)},privates:{collect:function(){var e,t,i=this.children,n=this.bindings,r=0,s=0;if(i)for(t in i)0===(s=(e=i[t]).collect())&&(e.destroy(),delete i[t]),r+=s;return n&&(r+=n.length),r},getScheduler:function(){var e=this.owner;return e&&e.getScheduler()},sort:function(){var e=this.parent;e&&this.scheduler.sortItem(e)}}}),Ext.define("Ext.app.bind.Stub",{extend:Ext.app.bind.AbstractStub,isStub:!0,dirty:!0,formula:null,validationKey:"validation",constructor:function(e,t,i){var n=t;this.callParent([e,t]),this.boundValue=null,i&&(i.add(this),i.isRootStub||(n=i.path+"."+t),this.checkHadValue()),this.path=n},destroy:function(){var e=this.formula,t=this.storeBinding;e&&e.destroy(),t&&t.destroy(),this.detachBound(),this.callParent()},bindValidation:function(e,t){var i=this.parent;return i&&i.descend([this.validationKey,this.name]).bind(e,t)},bindValidationField:function(i,n){var e,t=this.parent,r=this.name,s="string"==typeof i;return t&&(e=t.bind(function(e){var t=null;e&&e.isModel&&(t=e.getField(r)),s?n[i](t,e,this):i.call(n,t,e,this)})),e||null},descend:function(e,t){var i,n=this.children||(this.children={}),r=t||0,s=e[r++];return(i=n[s])||(i=new Ext.app.bind.Stub(this.owner,s,this)),r<e.length&&(i=i.descend(e,r)),i},getChildValue:function(e){var t,i=this.name,n=this.bindMappings,r=n.store,s=n.model;return e||Ext.isString(e)?(t=this.inspectValue(e))||(e.isEntity?t=s[i]?e[s[i]]():e.data[i]:e.isStore&&r[i]?t=e[r[i]]():void 0===(t=e[i])&&this.hadValue&&(t=null)):t=this.hadValue?null:void 0,t},getDataObject:function(){var e,t=this.parent.getDataObject(),i=this.name,n=t?t[i]:null,r=this.bindMappings.store;return n?t.isStore&&i in r&&(n=t[r[i]]()):t&&t.isEntity&&(e=t.associations)&&i in e&&(n=t[e[i].getterName]()),n&&(n.$className||Ext.isObject(n))||(t[i]=n={},this.hadValue=!0,this.invalidate(!0,!0)),n},getRawValue:function(){return this.getChildValue(this.getParentValue())},graft:function(e){var t,i,n=this.parent,r=this.children,s=this.name;if(e.parent=n,e.children=r,n&&(n.children[s]=e),r)for(t in r)r[t].parent=e;return this.children=null,e.checkHadValue(),(i=this.callParent([e])).invalidate(!0,!0),i},isAvailable:function(){return this.checkAvailability()},isLoading:function(){return!this.checkAvailability(!0)},invalidate:function(e,t){var i,n=this.children;if(this.dirty=!0,this.checkHadValue(),!t&&this.isAvailable()&&(this.scheduled||this.schedule()),e&&n)for(i in n)n[i].invalidate(e,t)},isReadOnly:function(){var e=this.formula;return!(!e||e.set)},set:function(e,t){var i,n,r,s,o=this.parent,a=this.name,l=this.formula;if(l&&!l.settingValue&&l.set)l.setValue(e);else{if(this.isLinkStub&&(l=(r=this.getLinkFormulaStub())?r.formula:null))return r.isReadOnly()&&Ext.raise("Cannot setValue on a readonly formula"),void l.setValue(e);(i=o.getDataObject()).isEntity?(n=i.associations)&&a in n?((s=n[a].setterName)&&i[s](e),this.invalidate(!0)):i.set(a,e):(e&&e.constructor===Object||e!==i[a]||!i.hasOwnProperty(a))&&(!t&&this.setByLink(e)||(void 0===e?delete i[a]:i[a]=e,this.inspectValue(i),this.invalidate(!0)))}},onStoreDataChanged:function(){this.invalidate(!0)},afterLoad:function(e){this.invalidate(!0)},afterCommit:function(e){this.afterEdit(e,null)},afterEdit:function(e,t){var i,n,r,s,o,a=this.children,l=t&&t.length,c=e.associations,u=this.bindMappings.model;if(a){if(l)for(n=0;n<l;++n)(r=(r=a[s=t[n]])||(o=(o=e.fieldsMap[s])&&o.reference)&&a[o.role])&&r.invalidate(!0);else for(i in a)c&&i in c||a[i].invalidate(!0);for(i in u)(r=a[i])&&r.invalidate()}this.invalidate()},afterReject:function(e){this.afterEdit(e,null)},afterAssociatedRecordSet:function(e,t,i){var n=this.children,r=i.role;n&&r in n&&n[r].invalidate(!0)},setByLink:function(e){var t,i,n,r,s,o,a=0,l=!1;for(r=this;r;r=r.parent){if(r.isLinkStub){if(i=r,a)for(n=[],t=0,r=this;r!==i;r=r.parent)n[a-++t]=r.name;break}++a}return r=null,i&&(s=i.parent,o=i.name,r=s.shouldClimb(o)?i.getTargetStub():s.insertChild(o)),r&&(n&&(r=r.descend(n)),r.set(e),l=!0),l},setFormula:function(e){var t=this.formula;t&&t.destroy(),this.formula=new Ext.app.bind.Formula(this,e)},react:function(){var e,t=this.boundValue,i=this.children;if(t)if(t.isValidation){if(t.refresh(),e=t.generation,this.lastValidationGeneration===e)return;this.lastValidationGeneration=e}else t.isModel&&i&&i[this.validationKey]&&t.isValid();this.callParent()},privates:{bindMappings:{store:{count:"getCount",first:"first",last:"last",loading:"hasPendingLoad",totalCount:"getTotalCount"},model:{dirty:"isDirty",phantom:"isPhantom",valid:"isValid"}},checkAvailability:function(e){var t,i,n,r,s=this.parent,o=this.bindMappings,a=this.name,l=!(!s||!s.checkAvailability(e));return l&&(i=this.getParentValue(),(n=this.inspectValue(i))?l=e?!n.hasPendingLoad():!!n.isStore||(!n.isLoading()||0<n.loadCount):(i&&(i.isModel?o.model[a]?(l=!s.isLoading(),r=!0):(t=i.associations)&&a in t||(r=l=!0):i.isStore&&o.store[a]&&"loading"!==a&&(l=!s.isLoading(),r=!0)),r||(l=this.hadValue||void 0!==this.getRawValue()))),l},checkHadValue:function(){this.hadValue||(this.hadValue=void 0!==this.getRawValue())},collect:function(){return this.callParent()+(this.storeBinding?1:0)+(this.formula?1:0)},getLinkFormulaStub:function(){for(var e=this;e.isLinkStub;)e=e.binding.stub;return e.formula?e:null},getParentValue:function(){return this.dirty&&(this.parentValue=this.parent.getValue(),this.dirty=!1),this.parentValue},setStore:function(e){this.storeBinding=e},inspectValue:function(e){var t,i,n=this.name,r=this.boundValue,s=null;return e&&e.isEntity?(t=e.associations)&&n in t?s=e[t[n].getterName]():n===this.validationKey&&(s=e.getValidation(),this.lastValidationGeneration=null):e&&(i=e[n])&&(i.isModel||i.isStore)&&(s=i),r!==s&&(r&&this.detachBound(),s&&(s.isModel?s.join(this):(!s.associatedEntity||!1===s.autoLoad||s.complete||s.hasPendingLoad()||s.load(),s.on({scope:this,beginload:"onStoreDataChanged",load:"onStoreDataChanged",datachanged:"onStoreDataChanged",destroy:"onDestroyBound"}))),this.boundValue=s),s},detachBound:function(){var e=this.boundValue;e&&!e.destroyed&&(e.isModel?e.unjoin(this):e.un({scope:this,beginload:"onStoreDataChanged",load:"onStoreDataChanged",datachanged:"onStoreDataChanged",destroy:"onDestroyBound"}))},onDestroyBound:function(){this.owner.destroying||this.set(null)},sort:function(){var e=this.formula,t=this.scheduler,i=this.storeBinding;this.callParent(),i&&t.sortItem(i),e&&t.sortItem(e)}}}),Ext.define("Ext.app.bind.LinkStub",{extend:Ext.app.bind.Stub,isLinkStub:!0,binding:null,destroy:function(){var e=this.binding,t=this.owner;e&&(this.binding=null,e.destroy(),t&&delete t.linkData[this.name]),this.target=null,this.callParent()},getFullName:function(){return this.fullName||(this.fullName="("+this.callParent()+" -> "+this.binding.getFullName()+")")},getDataObject:function(){var e,t,i=this.binding,n=this.parent,r=this.name;return n.isRootStub&&!n.shouldClimb(r)?(e=n.owner.getData()).hasOwnProperty(r)||(e[r]=t={}):t=i&&i.getDataObject(),t},getRawValue:function(){var e=this.binding;return e&&e.getRawValue()},getValue:function(){var e=this.binding;return e&&e.getValue()},getTargetStub:function(){var e=this.binding;return e&&e.stub},isAvailable:function(){var e=this.binding;return!!e&&e.isAvailable()},isLoading:function(){var e=this.binding;return!!e&&e.isLoading()},link:function(e,t){var i=this.binding;i&&i.destroy(),t=this.target=t||this.owner,this.linkDescriptor=e,this.binding=t.bind(e,this.onChange,this),this.binding.deep=!0},onChange:function(){this.invalidate(!0)},react:function(){this.owner.linkData[this.name]=this.getValue(),this.callParent()},privates:{collect:function(){return this.callParent()+(this.binding?1:0)},sort:function(){var e=this.binding;e&&this.scheduler.sortItem(e)}}}),Ext.define("Ext.app.bind.RootStub",{extend:Ext.app.bind.AbstractStub,isRootStub:!0,depth:0,createRootChild:function(e,t){var i,n,r=this.owner,s=r.getData(),o=this.children,a=o&&o[e],l=a?null:this;return t||s.hasOwnProperty(e)||!(i=r.getParent())?n=new Ext.app.bind.Stub(r,e,l):(n=new Ext.app.bind.LinkStub(r,e,l)).link("{"+e+"}",i),a&&a.graft(n),n},createStubChild:function(e){return this.createRootChild(e,!0)},descend:function(e,t){var i=this.children,n=t||0,r=e[n++],s=i&&i[r]||this.createRootChild(r);return n<e.length&&(s=s.descend(e,n)),s},getFullName:function(){return this.fullName||(this.fullName=this.owner.id+":")},getDataObject:function(){return this.owner.data},getRawValue:function(){return this.owner.data},getValue:function(){return this.owner.data},isDescendantOf:function(){return!1},set:function(e,t){e&&e.constructor===Object||Ext.raise("Only an object can be set at the root");var i,n,r,s,o,a=this.children||(this.children={}),l=this.owner,c=l.data,u=l.getParent();for(r in e)0<=r.indexOf(".")&&Ext.raise("Value names cannot contain dots"),void 0!==(n=e[r])?(i=a[r],s=t||!this.shouldClimb(r),i?s&&i.isLinkStub&&!i.getLinkFormulaStub()&&(i=this.insertChild(r)):(i=this.createRootChild(r,s),o=!0),o&&c.hasOwnProperty(e)||l.invalidateChildLinks(r),i.set(n,s)):c.hasOwnProperty(r)&&(delete c[r],(i=a[r])&&(!i.isLinkStub&&u&&(i=this.createRootChild(r)),l.invalidateChildLinks(r,!0),i.invalidate(!0)))},schedule:Ext.emptyFn,unschedule:Ext.emptyFn,privates:{checkAvailability:function(){return!0},insertChild:function(e){return this.createRootChild(e,!0)},invalidateChildLink:function(e,t){var i=this.children,n=i&&i[e];n&&n.isLinkStub&&!n.getLinkFormulaStub()&&(n=this.createRootChild(e),t&&n.invalidate(!0),this.owner.invalidateChildLinks(e,t))},shouldClimb:function(e){for(var t=this.owner.getParent();t;){if(t.getData().hasOwnProperty(e))return!0;t=t.getParent()}return!1}}}),Ext.define("Ext.app.bind.Multi",{extend:Ext.app.bind.BaseBinding,isMultiBinding:!0,missing:1,deep:!0,constructor:function(e,t,i,n,r){var s=this,o=r&&r.trackStatics;s.callParent([t,i,n,r]),s.bindings=[],s.literal=e.$literal,e.constructor===Object?(o&&(s.staticKeys=[]),s.addObject(e,s.lastValue={},s.staticKeys)):s.addArray(e,s.lastValue=[]),--s.missing||s.scheduled||s.schedule()},destroy:function(){this.bindings=Ext.destroy(this.bindings),this.callParent()},add:function(e,t,i){var n,r,s=this,o=s.owner,a=s.bindings,l=s.literal?e.reference?"bindEntity":"bindExpression":"bind";return++s.missing,r=(n=o[l](e,function(e){t[i]=e,1===n.calls&&--s.missing,s.missing||s.scheduled||s.schedule()},s,null)).depth,(!a.length||r<s.depth)&&(s.depth=r),a.push(n),!this.isBindingStatic(n)},addArray:function(e,t){var i,n,r,s=e.length,o=!1;for(r=0;r<s;++r)i=(n=e[r])&&(n.reference||Ext.isString(n))?this.add(n,t,r):Ext.isArray(n)?this.addArray(n,t[r]=[]):n&&n.constructor===Object?this.addObject(n,t[r]={}):(t[r]=n,!1),o=o||i;return o},addObject:function(e,t,i){var n,r,s,o=!1;for(s in e)n=(r=e[s])&&(r.reference||Ext.isString(r))?this.add(r,t,s):Ext.isArray(r)?this.addArray(r,t[s]=[]):r&&r.constructor===Object?this.addObject(r,t[s]={}):(t[s]=r,!1),i&&!n&&i.push(s),o=o||n;return o},getFullName:function(){var e,t=this.fullName,i=this.bindings,n=i.length;if(!t){for(t="@[",e=0;e<n;++e)e&&(t+=","),t+=i[e].getFullName();t+="]",this.fullName=t}return t},getRawValue:function(){return this.lastValue},isDescendantOf:function(){return!1},isLoading:function(){for(var e=this.bindings,t=e.length;0<t--;)if(e[t].isLoading())return!0;return!1},isAvailable:function(){for(var e=this.bindings,t=e.length;0<t--;)if(e[t].isAvailable())return!0;return!1},isBindingStatic:function(e){return e.isTemplateBinding&&e.isStatic},isStatic:function(){var e,t,i=this.bindings,n=i.length;for(e=0;e<n;++e)if(t=i[e],!this.isBindingStatic(t))return!1;return!0},pruneStaticKeys:function(){var e,t=Ext.apply({},this.lastValue),i=this.staticKeys,n=i.length;for(e=0;e<n;++e)delete t[i[e]];return t},react:function(){this.notify(this.lastValue)},refresh:function(){},privates:{sort:function(){this.scheduler.sortItems(this.bindings)}}}),Ext.define("Ext.app.bind.Formula",{extend:Ext.util.Schedulable,statics:{getFormulaParser:function(e){var t,i,n=this.formulaCache;return(t=(n=n||(this.formulaCache=new Ext.util.LruCache({maxSize:20}))).get(e))||(i="[^\\\\.a-z0-9_]"+Ext.String.escapeRegex(e)+"\\\\(\\\\s*(['\\"])(.*?)\\\\1\\\\s*\\\\)",t=new RegExp(i,"gi"),n.add(e,t)),t}},isFormula:!0,calculation:null,explicit:!1,set:null,single:!1,fnKeywordArgumentNamesRe:/^function\\s*[^\\(]*\\(\\s*([^,\\)\\s]+)/,fnKeywordRe:/^\\s*function/,replaceParenRe:/[\\(\\)]/g,constructor:function(e,t){var i,n,r,s,o=this,a=e.owner;o.owner=a,o.stub=e,o.callParent(),t instanceof Function?o.get=r=t:(o.get=r=t.get,o.set=t.set,n=t.bind,t.single&&(o.single=t.single),n&&(i=n.bindTo)&&(delete(s=Ext.apply({},n)).bindTo,n=i)),r||Ext.raise("Must specify a getter method for a formula"),n?o.explicit=!0:n=r.$expressions||o.parseFormula(r),o.binding=a.bind(n,o.onChange,o,s)},destroy:function(){var e=this.binding,t=this.stub;e&&(e.destroy(),this.binding=null),t&&(t.formula=null),this.callParent(),this.getterFn=this.owner=null},getFullName:function(){return this.fullName||(this.fullName=this.stub.getFullName()+"="+this.callParent()+")")},getRawValue:function(){return this.calculation},onChange:function(){this.scheduled||this.schedule()},parseFormula:function(e){var t,i,n,r,s=Ext.Function.toCode(e),o={$literal:!0};for(this.fnKeywordRe.test(s)?(t=this.fnKeywordArgumentNamesRe.exec(s))&&(i=t[1]):(t=s.split("=>")[0])&&(i=(t=Ext.String.trim(t.replace(this.replaceParenRe,"")).split(","))[0]),i=i||"get",n=Ext.app.bind.Formula.getFormulaParser(i);t=n.exec(s);)o[r=t[2]]=r;return o.$literal=!0,e.$expressions=o},react:function(){var e,t=this,i=t.owner,n=t.binding.lastValue;e=t.explicit?n:i.getFormulaFn(n),t.settingValue=!0,t.stub.set(t.calculation=t.get.call(i,e)),t.settingValue=!1,t.single&&t.destroy()},setValue:function(e){this.set.call(this.stub.owner,e)},privates:{getScheduler:function(){var e=this.owner;return e&&e.getScheduler()},sort:function(){var e=this.binding;e.destroyed||this.scheduler.sortItem(e)}}}),Ext.define("Ext.util.Fly",{inheritableStatics:{flyPoolSize:2,fly:function(){var e=this.flyweights||(this.flyweights=[]),t=e.length?e.pop():new this;return t.reset.apply(t,arguments),t}},release:function(){var e=this.self,t=e.flyweights||(e.flyweights=[]);this.reset(),t.length<e.flyPoolSize&&t.push(this)},reset:Ext.emptyFn}),Ext.define("Ext.parse.Tokenizer",function(e){var t=e.flyweights=[],i={literal:!0,boolean:!0,type:"boolean"},r={error:!0},u={ident:!0},n={literal:!0,nil:!0},c={literal:!0,number:!0,type:"number"},l={literal:!0,string:!0,type:"string"};return{extend:Ext.util.Fly,isTokenizer:!0,statics:{BOOLEAN:i,ERROR:r,IDENT:u,LITERAL:{literal:!0},NULL:n,NUMBER:c,STRING:l},config:{keywords:{null:{type:"literal",is:n,value:null},false:{type:"literal",is:i,value:!1},true:{type:"literal",is:i,value:!0}},operators:{"+":"plus","-":"minus","*":"multiply","/":"divide","!":"not",",":"comma",":":"colon","[":"arrayOpen","]":"arrayClose","{":"curlyOpen","}":"curlyClose","(":"parenOpen",")":"parenClose"},patterns:null},error:null,index:-1,constructor:function(e){this.operators={},this.patterns=[],this.initConfig(e)},next:function(){var e=this.peek();return this.head=void 0,e},peek:function(){var e=this.error,t=this.head;return e||(void 0===t&&(this.head=t=this.advance()),t)},release:function(){this.reset(),t.length<e.flyPoolSize&&t.push(this)},reset:function(e,t,i){return this.error=null,this.head=void 0,this.index=-1,this.text=e||null,this.pos=t||0,this.end=e&&null==i?e.length:i,this},privates:{digitRe:/[0-9]/,identFirstRe:/[a-z_$]/i,identRe:/[0-9a-z_$]/i,spaceRe:/[ \\t]/,end:0,head:void 0,pos:0,text:null,applyOperators:function(e){var t,i,n,r,s,o,a,l=this.operators;for(a in e){for(t=l,o=e[a],s=a.length,r=0;r<s;++r)t=t[i=a.charAt(r)]||(t[i]={});o?(t.token=n={type:"operator",name:o,value:a,is:{operator:!0}},n.is[o]=!0):t.token=null}},applyPatterns:function(e){var t,i,n,r,s=this.patterns;for(n in e)i=(t=e[n]).extract,r=t.re,delete t.extract,delete t.re,s.push({name:n,re:r,extract:i,token:t})},advance:function(){for(var e,t=this.spaceRe,i=this.text,n=this.end;this.pos<n;){if(e=i.charAt(this.pos),!t.test(e))return this.index=this.pos,this.parse(e);++this.pos}return null},parse:function(e){var t,i,n,r,s=this,o=s.digitRe,a=s.text,l=s.end,c=s.patterns;if("."===e&&s.pos+1<l&&o.test(a.charAt(s.pos+1))&&(r=s.parseNumber()),!r)for(t=0;t<c.length;++t)if((n=c[t]).re.lastIndex=s.pos,(i=n.re.exec(a))&&i.index===s.pos){r=Ext.apply({value:n.extract?n.extract(i):i[0]},n.token),s.pos+=i[0].length;break}return!r&&s.operators[e]&&(r=s.parseOperator(e)),r=r||('"'===e||"'"===e?s.parseString():o.test(e)?s.parseNumber():s.identFirstRe.test(e)?s.parseIdent():s.syntaxError("Unexpected character"))},parseIdent:function(){for(var e,t,i=this.identRe,n=this.getKeywords(),r=!this.operators["."],s=this.text,o=this.pos,a=o,l=this.end,c=0;a<l;){if(e=s.charAt(a),r&&"."===e){if("."===c)return this.syntaxError(a,"Unexpected dot operator");++a}else{if(!i.test(e))break;++a}c=e}return"."===c?this.syntaxError(a-1,"Unexpected dot operator"):(t=s.substring(o,this.pos=a),n&&n[t]||{type:"ident",is:u,value:t})},parseNumber:function(){for(var e,t,i,n,r=this,s=r.digitRe,o=r.text,a=r.pos,l=r.end;r.pos<l;)if("-"===(e=o.charAt(r.pos))||"+"===e){if(r.pos!==a)break;++r.pos}else if("."===e){if(t)break;t=!0,++r.pos}else if("e"===e||"E"===e){if(i)break;t=i=!0,"-"!==(e=o.charAt(++r.pos))&&"+"!==e||++r.pos}else{if(!s.test(e))break;++r.pos}return n={type:"literal",is:c,value:+o.substring(a,r.pos)},isFinite(n.value)||(n=r.syntaxError(a,"Invalid number")),n},parseOperator:function(e){for(var t,i,n,r=this.operators,s=this.text,o=this.end,a=this.pos;r[e]&&(++a,(n=(r=r[e]).token)&&(t=n,i=a),a<o);)e=s.charAt(a);return t&&(this.pos=i),t},parseString:function(){var e,t,i,n=this.text,r=this.pos,s=r,o=this.end,a="";for(i=n.charAt(r++);r<o;){if((e=n.charAt(r++))===i){t=!0;break}"\\\\"===e&&r<o&&(e=n.charAt(r++)),a+=e}return this.pos=r,t?{type:"literal",is:l,value:a}:this.syntaxError(s,"Unterminated string")},syntaxError:function(e,t){"string"==typeof e&&(t=e,e=this.pos);var i=null==e?"":" (at index "+e+")",n=new Error(t+i);return n.type="error",n.is=r,i&&(n.at=e),this.error=n}}}}),Ext.define("Ext.parse.Symbol",{priority:0,constructor:function(e,t){var i=this.defaultProperty;t&&"object"==typeof t?Ext.apply(this,t):void 0!==t&&i&&(this[i]=t),this.id=e},dump:function(){var e,t=this,i={at:t.at,arity:t.arity};if("value"in t&&(i.value=t.value),t.lhs&&(i.lhs=t.lhs.dump(),i.rhs=t.rhs.dump()),t.operand&&(i.operand=t.operand.dump()),t.args)for(i.args=[],e=0;e<t.args.length;++e)i.args.push(t.args[e].dump());return i},led:function(){this.parser.syntaxError(this.at,"Missing operator")},nud:function(){this.parser.syntaxError(this.at,"Undefined")},update:function(e){if(e&&"object"==typeof e){var t=e.priority,i=e.led,n=e.nud;this.priority<=t&&(this.priority=t),i&&(this.led=i),n&&(this.nud=n)}}}),Ext.define("Ext.parse.symbol.Constant",{extend:Ext.parse.Symbol,arity:"literal",isLiteral:!0,defaultProperty:"value",constructor:function(e,t){this.callParent([e,t]),this._value=this.value},nud:function(){return this.value=this._value,this.arity="literal",this.isLiteral=!0,this}}),Ext.define("Ext.parse.symbol.Infix",{extend:Ext.parse.Symbol,arity:"binary",isBinary:!0,defaultProperty:"priority",led:function(e){return this.lhs=e,this.rhs=this.parser.parseExpression(this.priority),this.arity="binary",this.isBinary=!0,this}}),Ext.define("Ext.parse.symbol.InfixRight",{extend:Ext.parse.symbol.Infix,led:function(e){return this.lhs=e,this.rhs=this.parser.parseExpression(this.priority-1),this.arity="binary",this.isBinary=!0,this}}),Ext.define("Ext.parse.symbol.Paren",{extend:Ext.parse.Symbol,arity:"binary",isBinary:!0,priority:80,led:function(e){var t=[],i=this.parser,n=e.id,r=e.arity;for("."!==n&&"["!==n&&("unary"===r&&"function"===n||"ident"===r||"("===n||"&&"===n||"||"===n||"?"===n||i.syntaxError(e.at,"Expected a variable name.")),this.arity="invoke",this.isInvoke=!0,this.operand=e,this.args=t;")"!==i.token.id;)t.length&&i.advance(","),t.push(i.parseExpression());return i.advance(")"),this},nud:function(){var e=this.parser,t=e.parseExpression();return e.advance(")"),t}}),Ext.define("Ext.parse.symbol.Prefix",{extend:Ext.parse.Symbol,arity:"unary",isUnary:!0,priority:70,nud:function(){return this.operand=this.parser.parseExpression(this.priority),this.arity="unary",this.isUnary=!0,this}}),Ext.define("Ext.parse.Parser",function(){function e(){return this}return{extend:Ext.util.Fly,isParser:!0,config:{constants:{null:null,false:!1,true:!0},infix:{"===":40,"!==":40,"==":40,"!=":40,"<":40,"<=":40,">":40,">=":40,"+":50,"-":50,"*":60,"/":60},infixRight:{"&&":30,"||":30},prefix:{"!":0,"-":0,"+":0},symbols:{":":0,",":0,")":0,"[":0,"]":0,"{":0,"}":0,"(end)":0,"(ident)":{arity:"ident",isIdent:!0,nud:e},"(literal)":{arity:"literal",isLiteral:!0,nud:e},"(":{xclass:"Ext.parse.symbol.Paren"}},tokenizer:{keywords:null}},token:null,constructor:function(e){this.symbols={},this.initConfig(e)},advance:function(e){var t,i,n,r,s=this.tokenizer,o=s.peek(),a=this.symbols,l=s.index;if(this.error)throw this.error;return e&&this.expect(e),o?(s.next(),t=o.is,r=o.value,t.ident?n=a[r]||a["(ident)"]:t.operator?((n=a[r])||this.syntaxError(o.at,'Unknown operator "'+r+'"'),i=o.name):t.literal?n=a["(literal)"]:this.syntaxError(o.at,"Unexpected token"),this.token=n=Ext.Object.chain(n),n.at=l,n.is=t,n.value=r,n.arity||(n.arity=o.type),i&&(n.name=i),n):this.token=a["(end)"]},expect:function(e){var t=this.token;return e!==t.id&&this.syntaxError(t.at,'Expected "'+e+'"'),this},parseExpression:function(e){var t,i=this.token;for(e=e||0,this.advance(),t=i.nud();e<(i=this.token).priority;)this.advance(),t=i.led(t);return t},reset:function(e,t,i){return this.error=this.token=null,this.tokenizer.reset(e,t,i),this.advance(),this},syntaxError:function(e,t){"string"==typeof e&&(t=e,e=this.pos);var i=null==e?"":" (at index "+e+")",n=new Error(t+i);throw n.type="error",i&&(n.at=e),this.error=n},privates:{error:null,addSymbol:function(e,t,i,n){var r,s,o,a=this.symbols,l=a[e];if(l){if("object"==typeof t)r=t;else{if(!n||!i)return l;for(s=(n=Ext.Array.from(n)).length,r={},o=0;o<s;o++)r[n[o]]=i.prototype[n[o]]}l.update(r)}else i=t&&t.xclass?Ext.ClassManager.get(t.xclass):i||Ext.parse.Symbol,a[e]=l=new i(e,t),l.parser=this;return l},addSymbols:function(e,t,i){var n;for(n in e)this.addSymbol(n,e[n],t,i)},applyConstants:function(e){this.addSymbols(e,Ext.parse.symbol.Constant,"nud")},applyInfix:function(e){this.addSymbols(e,Ext.parse.symbol.Infix,"led")},applyInfixRight:function(e){this.addSymbols(e,Ext.parse.symbol.InfixRight,"led")},applyPrefix:function(e){this.addSymbols(e,Ext.parse.symbol.Prefix,"nud")},applySymbols:function(e){this.addSymbols(e)},applyTokenizer:function(e){var t=e;e&&!e.isTokenizer&&(t=new Ext.parse.Tokenizer(e)),this.tokenizer=t}}}}),Ext.define("Ext.app.bind.Parser",{extend:Ext.parse.Parser,infix:{":":{priority:70,dump:function(){var e,t={at:this.at,arity:this.arity,value:this.value,operand:this.operand.dump(),fmt:[]},i=this.fmt;for(e=0;e<i.length;++e)t.fmt.push(i[e].dump());return t},led:function(e){return this.arity="formatter",this.operand=e,this.fmt=this.parser.parseFmt(),this}},"?":{priority:20,led:function(e){var t,i=this.parser,n=i.symbols[":"];return this.condition=e,t=n.priority,n.priority=0,this.tv=i.parseExpression(0),this.parser.advance(":"),n.priority=t,this.fv=i.parseExpression(0),this.arity="ternary",this}}},symbols:{"(":{nud:function(){var e,t,i=this.parser,n=i.symbols[":"];return t=n.priority,n.priority=70,e=i.parseExpression(),i.advance(")"),n.priority=t,e}}},prefix:{"@":0},tokenizer:{operators:{"@":"at","?":"qmark","===":"feq","!==":"fneq","==":"eq","!=":"neq","<":"lt","<=":"lte",">":"gt",">=":"gte","&&":"and","||":"or"}},compileExpression:function(e,t){var i,n,r=this;return r.tokens=e,r.tokensMap=t,(i=(i="@"===r.token.value&&r.tokenizer.peek())&&"debugger"===i.value)&&(r.advance(),r.advance()),n=r.parseSlot(r.parseExpression(),i),r.tokens=r.tokensMap=null,n},compileFormat:function(){var e;try{e=this.parseSlot({arity:"formatter",fmt:this.parseFmt(),operand:{arity:"ident",value:"dummy"}}),this.expect("(end)")}catch(e){Ext.raise('Invalid format expression: "'+this.tokenizer.text+'"')}return e},privates:{useEval:Ext.isGecko,escapeRe:/(["'\\\\])/g,parseFmt:function(){for(var e,t=[],i=this.symbols[":"].priority;t.length&&this.advance(),(e=this.parseExpression(i)).isIdent||e.isInvoke?t.push(e):this.syntaxError(e.at,"Expected formatter name"),":"===this.token.id;);return t},parseSlot:function(e,t){var i,n,r,s,o,a=[],l=[],c=this.tokens||[];if(this.definitions=a,(this.body=l).push("return "+this.compile(e)+";"),n="var fm = Ext.util.Format,\\nme,",o="var a = Ext.Array.from(values);\\nme = scope;\\n",s=c.length)for(r=0;r<s;r++)n+="v"+r+(r===s-1?";":","),o+="v"+r+" = a["+r+"]; ";else n+="v0;",o+="v0 = a[0];";return a=Ext.Array.insert(a,0,[n]),l=(l=Ext.Array.insert(l,0,[o])).join("\\n"),t&&(l="debugger;\\n"+l),a.push((this.useEval?"$=":"return")+" function (values, scope) {",l,"}"),n=a.join("\\n"),i=this.useEval?this.evalFn(n):new Function("Ext",n)(Ext),this.definitions=this.body=null,i},compile:function(e){var t;switch(e.arity){case"ident":return this.addToken(e.value);case"literal":return"string"==typeof(t=e.value)?'"'+String(t).replace(this.escapeRe,"\\\\$1")+'"':t;case"unary":return this.compileUnary(e);case"binary":return this.compileBinary(e);case"ternary":return this.compileTernary(e);case"formatter":return this.compileFormatter(e)}return this.syntaxError(e.at,"Compile error! Unknown symbol")},compileUnary:function(e){var t=e.value,i=e.operand;return"!"===t||"-"===t||"+"===t?t+"("+this.compile(i)+")":"@"===t?i.isIdent?i.value:this.syntaxError(e.at,"Compile error! Unexpected symbol"):""},compileBinary:function(e){return"("+this.compile(e.lhs)+" "+e.value+" "+this.compile(e.rhs)+")"},compileTernary:function(e){return"("+this.compile(e.condition)+" ? "+this.compile(e.tv)+" : "+this.compile(e.fv)+")"},compileFormatter:function(e){var t,i=e.fmt,n=i.length,r=["var ret;"];if(i.length)for(r.push("ret = "+this.compileFormatFn(i[0],this.compile(e.operand))+";"),t=1;t<n;t++)r.push("ret = "+this.compileFormatFn(i[t],"ret")+";");return r.push("return ret;"),this.addFn(r.join("\\n"))},compileFormatFn:function(e,t){var i,n,r,s=[],o="";if(e.isIdent?i=e.value:e.isInvoke&&(i=e.operand.value,s=e.args),"this."===i.substring(0,5))i="me."+i.substring(5);else{if(!(i in Ext.util.Format))return this.syntaxError(e.at,'Compile error! Invalid format specified "'+i+'"');i="fm."+i}for(o+=t,n=s.length,r=0;r<n;r++)o+=", "+this.compile(s[r]);return i+"("+o+")"},addFn:function(e){var t=this.definitions,i="f"+t.length;return t.push("function "+i+"() {",e,"}"),i+"()"},evalFn:function($){return eval($),$},addToken:function(e){var t=this.tokensMap,i=this.tokens,n=0;return t&&i&&(e in t?n=t[e]:(t[e]=n=i.length,i.push(e))),"v"+n}}}),Ext.define("Ext.app.bind.Template",{escapes:!1,buffer:null,slots:null,tokens:null,constructor:function(e){var t,i=this._initters;for(t in this.text=e,i)this[t]=i[t]},_initters:{apply:function(e,t){return this.parse().apply(e,t)},getTokens:function(){return this.parse().getTokens()}},apply:function(e,t){var i,n,r=this.slots,s=this.buffer,o=r.length;for(i=0;i<o;++i)(n=r[i])&&(s[i]=n(e,t));return n&&this.single?s[0]:s.join("")},getText:function(){return this.buffer.join("")},getTokens:function(){return this.tokens},isStatic:function(){var e=this.getTokens(),t=this.slots;return 0===e.length&&0===t.length},privates:{literalChar:"~",escapeChar:"\\\\",parse:function(){var e,t,i,n,r,s=this,o=s.text,a=Ext.app.bind.Parser.fly(),l=s.buffer=[],c=s.slots=[],u=o.length,d=0,h=s.escapes,f="",g=0,p=s.escapeChar,m=s.literalChar;for(r in s._initters)delete s[r];for(s.tokens=[],s.tokensMap={};g<u;){if(i=o[g],t=e,e=h&&i===p)i=o[g+1],++g;else{if(i===m&&n===m&&!t){f=f.slice(0,-1),f+=o.substring(g+1);break}if("{"===i){f&&(l[d++]=f,f=""),a.reset(o,g+1),g=s.parseExpression(a,d),++d;continue}}f+=i,++g,n=i}return f&&(l[d]=f),a.release(),s.single=0===l.length&&1===c.length,s},parseExpression:function(e,t){var i;return this.slots[t]=e.compileExpression(this.tokens,this.tokensMap),i=e.token.at+1,e.expect("}"),i}}}),Ext.define("Ext.app.bind.TemplateBinding",{extend:Ext.app.bind.BaseBinding,isTemplateBinding:!0,lastValue:void 0,value:void 0,constructor:function(e,t,i,n,r){var s=new Ext.app.bind.Template(e),o=s.getTokens();this.callParent([t,i,n,r]),this.tpl=s,(this.tokens=o).$literal=!0,s.isStatic()?(this.isStatic=!0,this.onData(s.getText())):this.multiBinding=new Ext.app.bind.Multi(o,t,this.onBindData,this)},destroy:function(){Ext.destroy(this.multiBinding),this.tpl=this.multiBinding=null,this.callParent()},getFullName:function(){var e=this.multiBinding;return this.fullName||(this.fullName="$"+(e?e.getFullName():this.callParent()))},getRawValue:function(){return this.value},getTemplateScope:function(){return null},isAvailable:function(){var e=this.multiBinding;return!!e&&e.isAvailable()},isDescendantOf:function(){return!1},isLoading:function(){var e=this.multiBinding;return!!e&&e.isLoading()},onBindData:function(e){this.onData(this.tpl.apply(e,this.getTemplateScope()))},onData:function(e){var t=this.value;t!==(this.value=e)&&(this.lastValue=t,this.schedule())},react:function(){this.notify(this.value)},refresh:function(){var e=this.multiBinding;e&&e.refresh()},privates:{sort:function(){var e=this.multiBinding;e&&this.scheduler.sortItem(e)}}}),Ext.define("Ext.data.ChainedStore",{extend:Ext.data.AbstractStore,alias:"store.chained",mixins:[Ext.data.LocalStore],isChainedStore:!0,config:{source:null,remoteFilter:!1,remoteSort:!1},syncSourceGrouping:!1,updateRemoteFilter:function(e,t){e&&Ext.raise("Remote filtering cannot be used with chained stores."),this.callParent([e,t])},updateRemoteSort:function(e,t){e&&Ext.raise("Remote sorting cannot be used with chained stores."),this.callParent([e,t])},remove:function(){var e=this.getSource();return e||Ext.raise("Cannot remove records with no source."),e.remove.apply(e,arguments)},removeAll:function(){var e=this.getSource();return e||Ext.raise("Cannot remove records with no source."),e.removeAll()},getData:function(){var e=this.data;return e||(this.data=e=this.constructDataCollection()),e},getTotalCount:function(){return this.getCount()},getSession:function(){return this.getSourceValue("getSession",null)},applySource:function(e){if(e){var t,i=e;(e=Ext.data.StoreManager.lookup(e))||(t="Invalid source {0}specified for Ext.data.ChainedStore",t=Ext.String.format(t,"string"==typeof i?'"'+i+'" ':""),Ext.raise(t))}return e},updateSource:function(e,t){var i=this;t&&!t.destroyed&&t.removeObserver(i),e&&(i.getData().setSource(e.getData()),i.syncSourceGrouping&&i.setGrouper(e.getGrouper()),i.isInitializing||(i.fireEvent("refresh",i),i.fireEvent("datachanged",i)),e.addObserver(i))},getModel:function(){return this.getSourceValue("getModel",null)},getProxy:function(){return null},onCollectionAdd:function(e,t){var i=t.items,n=!t.next;this.ignoreCollectionAdd||(this.activeRanges&&this.syncActiveRanges(),this.fireEvent("add",this,i,t.at),n&&this.fireEvent("datachanged",this))},onCollectionItemChange:function(e,t){var i=t.item,n=t.modified||null,r=t.meta;this.activeRanges&&t.newIndex!==t.oldIndex&&this.syncActiveRanges(),this.onUpdate(i,r,n,t),this.fireEvent("update",this,i,r,n,t),this.fireEvent("datachanged",this)},onCollectionUpdateKey:function(e,t){this.fireEvent("idchanged",this,t.item,t.oldKey,t.newKey)},onUpdate:Ext.emptyFn,lastCollectionRefesh:null,onCollectionRefresh:function(e){var t=e.generation;this.isConfiguring||this.lastCollectionRefesh===t||(this.lastCollectionRefesh=t,this.fireEvent("datachanged",this),this.fireEvent("refresh",this))},onCollectionRemove:function(e,t){var i=t.items,n=!t.next;this.ignoreCollectionRemove||(this.fireEvent("remove",this,i,t.at,!1),n&&this.fireEvent("datachanged",this))},onSourceBeforeLoad:function(e,t){this.fireEvent("beforeload",this,t),this.callObservers("BeforeLoad",[t])},onSourceAfterLoad:function(e,t,i,n){this.fireEvent("load",this,t,i,n),this.callObservers("AfterLoad",[t,i,n])},onFilterEndUpdate:function(){this.getData().generation!==this.lastCollectionRefesh||this.getRemoteFilter()||(this.suppressNextFilter=!0),this.callParent(arguments),this.callObservers("Filter")},onSourceBeforePopulate:function(){this.ignoreCollectionAdd=!0,this.callObservers("BeforePopulate")},onSourceAfterPopulate:function(){this.ignoreCollectionAdd=!1,this.fireEvent("datachanged",this),this.fireEvent("refresh",this),this.callObservers("AfterPopulate")},onSourceBeforeClear:function(){this.ignoreCollectionRemove=!0,this.callObservers("BeforeClear")},onSourceAfterClear:function(){this.ignoreCollectionRemove=!1,this.callObservers("AfterClear")},onSourceBeforeRemoveAll:function(){this.ignoreCollectionRemove=!0,this.callObservers("BeforeRemoveAll")},onSourceAfterRemoveAll:function(e,t){this.ignoreCollectionRemove=!1,t||(this.fireEvent("clear",this),this.fireEvent("datachanged",this)),this.callObservers("AfterRemoveAll",[t])},onSourceFilter:function(){var e=this.getData().generation;this.lastCollectionRefesh!==e&&(this.lastCollectionRefesh=e,this.fireEvent("refresh",this),this.fireEvent("datachanged",this))},onSourceGrouperChange:function(e,t){this.syncSourceGrouping&&this.setGrouper(t)},hasPendingLoad:function(){return this.getSourceValue("hasPendingLoad",!1)},isLoaded:function(){return this.getSourceValue("isLoaded",!1)},isLoading:function(){return this.getSourceValue("isLoading",!1)},doDestroy:function(){this.observers=null,this.setSource(null),this.getData().destroy(!0),this.data=null,this.callParent()},privates:{getSourceValue:function(e,t){var i=this.getSource(),n=t;return i&&!i.destroyed&&(n=i[e]()),n},isMoving:function(){var e=this.getSource();return!!e.isMoving&&e.isMoving.apply(e,arguments)},loadsSynchronously:function(){return this.getSource().loadsSynchronously()}}}),Ext.define("Ext.app.ViewModel",{mixins:[Ext.mixin.Factoryable,Ext.mixin.Identifiable],alias:"viewmodel.default",isViewModel:!0,factoryConfig:{name:"viewModel"},collectTimeout:100,expressionRe:/^(?:\\{(?:(\\d+)|([a-z_][\\w.]*))\\})$/i,statics:{escape:function(e){var t,i=e;if("string"==typeof e)i="~~"+e;else if(e&&e.constructor===Object)for(t in i={},e)i[t]=this.escape(e[t]);return i}},$configStrict:!1,config:{data:!0,formulas:{$value:null,merge:function(e,t,i,n){return this.mergeNew(e,t,i,n)}},links:null,parent:null,root:!0,scheduler:null,schema:"default",session:null,stores:null,view:null},constructor:function(e){this.bindings={},this.initConfig(e)},destroy:function(){var e,t,i,n,r=this,s=r._scheduler,o=r.storeInfo,a=r.getParent(),l=r.collectTask,c=r.children,u=r.bindings;if(r.destroying=!0,l&&(l.cancel(),r.collectTask=null),c)for(e in c)c[e].destroy();if(o)for(e in o)n=(t=o[e]).$binding,((i=t.autoDestroy)||!t.$wasInstance&&!1!==i)&&t.destroy(),Ext.destroy(n);for(e in a&&a.unregisterChild(r),r.getRoot().destroy(),u)u[e].destroy();s&&s.$owner===r&&(s.$owner=null,s.destroy()),r.children=r.storeInfo=r._session=r._view=r._scheduler=r.bindings=r._root=r._parent=r.formulaFn=r.$formulaData=null,r.callParent()},bind:function(e,t,i,n){var r,s=!0;return i=i||this,n||void 0===e.bindTo||Ext.isString(e)||(e=(n=e).bindTo),Ext.isString(e)?this.expressionRe.test(e)?(e=e.substring(1,e.length-1),r=this.bindExpression(e,t,i,n),s=!1):r=new Ext.app.bind.TemplateBinding(e,this,t,i,n):r=new Ext.app.bind.Multi(e,this,t,i,n),s&&(this.bindings[r.id]=r),r},getSession:function(){var e,t=this._session;return!t&&(e=this.getParent())&&this.setSession(t=e.getSession()),t||null},getStore:function(e){var t,i=this.storeInfo;return i&&(t=i[e]),t||null},linkTo:function(e,t){var i,n,r,s,o,a;-1<e.indexOf(".")&&Ext.raise('Links can only be at the top-level: "'+e+'"'),t.isModel&&(t={type:t.entityName,id:t.id}),s=t.type||t.reference,n=t.create,s?(r=t.id,!t.create&&Ext.isEmpty(r)&&Ext.raise('No id specified. To create a phantom model, specify "create: true" as part of the reference.'),n&&(r=void 0),a=this.getRecord(s,r),Ext.isObject(n)&&(a.set(n),a.commit(),a.phantom=!0),(i=this.getRoot().createStubChild(e)).set(a)):((i=this.getStub(e)).isLinkStub||(o=new Ext.app.bind.LinkStub(this,i.name),i.graft(o),i=o),i.link(t))},notify:function(){var e=this.getScheduler();e.firing||e.notify()},get:function(e){return this.getStub(e).getValue()},set:function(e,t){var i,n;this.getData(),void 0===t&&e&&e.constructor===Object?(n=this.getRoot(),t=e):n=e&&e.indexOf(".")<0?((i={})[e]=t,t=i,this.getRoot()):this.getStub(e),n.set(t)},privates:{registerChild:function(e){var t=this.children;t||(this.children=t={}),t[e.getId()]=e},unregisterChild:function(e){var t=this.children;!this.destroying&&t&&delete t[e.getId()]},getRecord:function(e,t){var i,n=this.getSession(),r=e,s=void 0!==t;return n?i=s?n.getRecord(e,t):n.createRecord(e):(r.$isClass||(r=this.getSchema().getEntity(r))||Ext.raise("Invalid model name: "+e),s?(i=r.createWithId(t)).load():i=new r),i},bindExpression:function(e,t,i,n){return this.getStub(e).bind(t,i,n)},applyScheduler:function(e){return e&&!e.isInstance&&(!0===e&&(e={}),"preSort"in e||(e=Ext.apply({preSort:"kind,-depth"},e)),(e=new Ext.util.Scheduler(e)).$owner=this),e},getScheduler:function(){var e,t=this._scheduler;return t||((e=this.getParent())?t=e.getScheduler():(t=new Ext.util.Scheduler({preSort:"kind,-depth"})).$owner=this,this.setScheduler(t)),t},getStub:function(e){var t=this.getRoot();return e?t.getChild(e):t},collect:function(){var e=this.getParent(),t=this.collectTask;e?e.collect():(t=t||(this.collectTask=new Ext.util.DelayedTask(this.doCollect,this)),0===this.collectTimeout?this.doCollect():t.delay(this.collectTimeout))},doCollect:function(){var e,t=this.children;if(t)for(e in t)t[e].doCollect();this.getRoot().collect()},invalidateChildLinks:function(e,t){var i,n=this.children;if(n)for(i in n)n[i].getRoot().invalidateChildLink(e,t)},onBindDestroy:function(e,t){var i;this.destroying||(t||delete this.bindings[e.id],(i=this.getParent())?i.onBindDestroy(e,!0):this.collect())},applyData:function(e,t){var i,n;this.getSession(),t||(n=this.getParent(),this.linkData=i=n?Ext.Object.chain(n.getData()):{},this.data=this._data=Ext.Object.chain(i)),e&&e.constructor===Object&&this.getRoot().set(e,!0)},applyParent:function(e){return e&&e.registerChild(this),e},applyStores:function(e){var t,i,n,r,s=this,o=s.getRoot();for(t in s.storeInfo={},s.listenerScopeFn=function(){return s.getView().getInheritedConfig("defaultListenerScope")},e)(i=e[t]).isStore?(i.$wasInstance=!0,s.setupStore(i,t)):(r=(i=Ext.isString(i)?{source:i}:Ext.apply({},i)).listeners,delete i.listeners,(n=s.bind(i,s.onStoreBind,s,{trackStatics:!0})).isStatic()?(n.destroy(),s.createStore(t,i,r)):(n.$storeKey=t,n.$listeners=r,o.createStubChild(t).setStore(n)))},onStoreBind:function(e,t,i){var n,r=this.storeInfo,s=i.$storeKey,o=r[s];o?(n=(e=Ext.merge({},i.pruneStaticKeys())).proxy,delete e.type,delete e.model,delete e.fields,delete e.proxy,delete e.listeners,n&&(delete n.reader,delete n.writer,o.getProxy().setConfig(n)),o.setConfig(e)):this.createStore(s,e,i.$listeners,i)},createStore:function(e,t,i,n){var r,s=this.getSession();(t=Ext.apply({},t)).session&&(t.session=s),t.source&&(t.type=t.type||"chained"),t.listeners=i,t.resolveListenerScope=this.listenerScopeFn,(r=Ext.Factory.store(t)).$binding=n,this.setupStore(r,e)},setupStore:function(e,t){var i={};this.getData(),e.resolveListenerScope=this.listenerScopeFn,this.storeInfo[t]=e,i[t]=e,this.setData(i)},applyFormulas:function(e){var t,i=this.getRoot();for(t in this.getData(),e)0<=t.indexOf(".")&&Ext.raise("Formula names cannot contain dots: "+t),i.createStubChild(t),this.getStub(t).setFormula(e[t]);return e},applyLinks:function(e){var t;for(t in e)this.linkTo(t,e[t]);return t},applySchema:function(e){return Ext.data.schema.Schema.get(e)},applyRoot:function(){var e=new Ext.app.bind.RootStub(this),t=this.getParent();return t&&(e.depth=t.getRoot().depth-1e3),e},getFormulaFn:function(e){var t=this,i=t.formulaFn;return i=i||(t.formulaFn=function(e){return t.$formulaData[e]}),t.$formulaData=e,i}}}),Ext.define("Ext.app.domain.Controller",{extend:Ext.app.EventDomain,singleton:!0,type:"controller",prefix:"controller.",idMatchRe:/^#/,constructor:function(){this.callParent(),this.monitor(Ext.app.BaseController)},match:function(e,t){var i=!1,n=e.alias;return"*"===t?i=!0:"#"===t?i=!!e.isApplication:this.idMatchRe.test(t)?i=e.getId()===t.substring(1):n&&(i=-1<Ext.Array.indexOf(n,this.prefix+t)),i}}),Ext.define("Ext.direct.Manager",{singleton:!0,mixins:[Ext.mixin.Observable],exceptions:{TRANSPORT:"xhr",PARSE:"parse",DATA:"data",LOGIN:"login",SERVER:"exception"},providerClasses:{},remotingMethods:{},config:{varName:"Ext.REMOTING_API"},apiNotFoundError:"Ext Direct API was not found at {0}",constructor:function(){this.mixins.observable.constructor.call(this),this.transactions=new Ext.util.MixedCollection,this.providers=new Ext.util.MixedCollection},addProvider:function(e){var t,i,n=arguments,r=this.relayers||(this.relayers={});if(!(1<n.length))return e.isProvider||(e=Ext.create("direct."+e.type+"provider",e)),this.providers.add(e),e.on("data",this.onProviderData,this),e.relayedEvents&&(r[e.id]=this.relayEvents(e,e.relayedEvents)),e.isConnected()||e.connect(),e;for(t=0,i=n.length;t<i;++t)this.addProvider(n[t])},loadProvider:function(e,t,i){var n,r,s,o,a,l,c=this.providerClasses;if(Ext.isArray(e))for(a=0,l=e.length;a<l;a++)this.loadProvider(e[a],t,i);else{if(n=e.type,r=e.url,c[n]&&c[n].checkConfig(e))return o=this.addProvider(e),this.fireEventArgs("providerload",[r,o]),void Ext.callback(t,i,[r,o]);s=e.varName||this.getVarName(),delete e.varName,r||Ext.raise("Need API discovery URL to load a Remoting provider!"),delete e.url,Ext.Loader.loadScript({url:r,scope:this,onLoad:function(){this.onApiLoadSuccess({url:r,varName:s,config:e,callback:t,scope:i})},onError:function(){this.onApiLoadFailure({url:r,callback:t,scope:i})}})}},getProvider:function(e){return e.isProvider?e:this.providers.get(e)},removeProvider:function(e){var t,i=this.providers,n=this.relayers;return(e=e.isProvider?e:i.get(e))?(e.un("data",this.onProviderData,this),n[t=e.id]&&(n[t].destroy(),delete n[t]),i.remove(e),e):null},addTransaction:function(e){return this.transactions.add(e),e},removeTransaction:function(e){return e=this.getTransaction(e),this.transactions.remove(e),e},getTransaction:function(e){return"object"==typeof e?e:this.transactions.get(e)},onProviderData:function(e,t){var i,n;if(Ext.isArray(t))for(i=0,n=t.length;i<n;++i)this.onProviderData(e,t[i]);else t.name&&"event"!==t.name&&"exception"!==t.name?this.fireEvent(t.name,t):!1===t.status&&this.fireEvent("exception",t),this.fireEvent("event",t,e)},parseMethod:function(e){var t,i,n,r=Ext.global,s=0;if(Ext.isFunction(e))t=e;else if(Ext.isString(e)&&!(t=this.remotingMethods[e])){for(n=(i=e.split(".")).length;r&&s<n;)r=r[i[s]],++s;t=Ext.isFunction(r)?r:null}return t||null},resolveApi:function(e,t){var i,n,r,s,o;for(n in(i=e&&e.prefix)&&"."!==i.substr(i.length-1)&&(i+="."),e)r=e[n],"prefix"!==n&&"function"!=typeof r&&(s=(i||"")+r,"function"==typeof(o=this.parseMethod(s))?e[n]=o:Ext.raise("Cannot resolve Direct API method '"+s+"' for "+n+" action in "+t.$className+" instance with id: "+(null!=t.id?t.id:"unknown")));return e},privates:{addProviderClass:function(e,t){this.providerClasses[e]=t},onApiLoadSuccess:function(options){var me=this,url=options.url,varName=options.varName,api,provider,error;try{api=Ext.apply(options.config,eval(varName)),provider=me.addProvider(api)}catch(e){error=e+""}error?(me.fireEventArgs("providerloaderror",[url,error]),Ext.callback(options.callback,options.scope,[url,error])):(me.fireEventArgs("providerload",[url,provider]),Ext.callback(options.callback,options.scope,[url,provider]))},onApiLoadFailure:function(e){var t,i=e.url;t=Ext.String.format(this.apiNotFoundError,i),this.fireEventArgs("providerloaderror",[i,t]),Ext.callback(e.callback,e.scope,[i,t])},registerMethod:function(e,t){this.remotingMethods[e]=t},clearAllMethods:function(){this.remotingMethods={}}}},function(){Ext.Direct=Ext.direct.Manager}),Ext.define("Ext.data.JsonP",{singleton:!0,requestCount:0,requests:{},timeout:3e4,disableCaching:!0,disableCachingParam:"_dc",callbackKey:"callback",request:function(e){(e=Ext.apply({},e)).url||Ext.raise("A url must be specified for a JSONP request.");var t,i,n=this,r=Ext.isDefined(e.disableCaching)?e.disableCaching:n.disableCaching,s=e.disableCachingParam||n.disableCachingParam,o=++n.requestCount,a=e.callbackName||"callback"+o,l=e.callbackKey||n.callbackKey,c=Ext.isDefined(e.timeout)?e.timeout:n.timeout,u=Ext.apply({},e.params),d=e.url,h=Ext.name;return r&&!u[s]&&(u[s]=Ext.Date.now()),(e.params=u)[l]=h+".data.JsonP."+a,i=n.createScript(d,u,e),n.requests[o]=t={url:d,params:u,script:i,id:o,scope:e.scope,success:e.success,failure:e.failure,callback:e.callback,callbackKey:l,callbackName:a},0<c&&(t.timeout=Ext.defer(n.handleTimeout,c,n,[t])),n.setupErrorHandling(t),n[a]=n.bindResponse(t),n.loadScript(t),t},bindResponse:function(t){var i=this;return function(e){Ext.elevate(function(){i.handleResponse(e,t)})}},abort:function(e){var t,i=this.requests;if(e)e.id||(e=i[e]),this.handleAbort(e);else for(t in i)i.hasOwnProperty(t)&&this.abort(i[t])},setupErrorHandling:function(e){e.script.onerror=Ext.bind(this.handleError,this,[e])},handleAbort:function(e){e.errorType="abort",this.handleResponse(null,e)},handleError:function(e){e.errorType="error",this.handleResponse(null,e)},cleanupErrorHandling:function(e){e.script.onerror=null},handleTimeout:function(e){e.errorType="timeout",this.handleResponse(null,e)},handleResponse:function(e,t){var i=!0;Ext.undefer(t.timeout),delete this[t.callbackName],delete this.requests[t.id],this.cleanupErrorHandling(t),Ext.fly(t.script).destroy(),t.errorType?(i=!1,Ext.callback(t.failure,t.scope,[t.errorType])):Ext.callback(t.success,t.scope,[e]),Ext.callback(t.callback,t.scope,[i,e,t.errorType])},createScript:function(e,t,i){var n=document.createElement("script");return n.setAttribute("src",Ext.urlAppend(e,Ext.Object.toQueryString(t))),n.setAttribute("async",!0),n.setAttribute("type","text/javascript"),n},loadScript:function(e){Ext.getHead().appendChild(e.script)}}),Ext.define("Ext.data.NodeInterface",{statics:{decorate:function(e){var t,i,n,r=Ext.data.schema.Schema.lookupEntity(e),s=r.prototype;r.prototype.isObservable||r.mixin(Ext.mixin.Observable.prototype.mixinId,Ext.mixin.Observable),s.isNode||(t=s.idProperty,n=(i=r.getField(t)).type,r.override(this.getPrototypeBody()),r.addFields([{name:"parentId",type:n,defaultValue:null,allowNull:i.allowNull},{name:"index",type:"int",defaultValue:-1,persist:!1,convert:null},{name:"depth",type:"int",defaultValue:0,persist:!1,convert:null},{name:"expanded",type:"bool",defaultValue:!1,persist:!1,convert:null},{name:"expandable",type:"bool",defaultValue:!0,persist:!1,convert:null},{name:"checked",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"leaf",type:"bool",defaultValue:!1},{name:"cls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"iconCls",type:"string",defaultValue:"",persist:!1,convert:null},{name:"icon",type:"string",defaultValue:"",persist:!1,convert:null},{name:"glyph",type:"string",defaultValue:"",persist:!1,convert:null},{name:"root",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isLast",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"isFirst",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"allowDrop",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"allowDrag",type:"boolean",defaultValue:!0,persist:!1,convert:null},{name:"loaded",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"loading",type:"boolean",defaultValue:!1,persist:!1,convert:null},{name:"href",type:"string",defaultValue:"",persist:!1,convert:null},{name:"hrefTarget",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtip",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qtitle",type:"string",defaultValue:"",persist:!1,convert:null},{name:"qshowDelay",type:"int",defaultValue:0,persist:!1,convert:null},{name:"children",type:"auto",defaultValue:null,persist:!1,convert:null},{name:"visible",type:"boolean",defaultValue:!0,persist:!1},{name:"text",type:"string",persist:!1}]))},getPrototypeBody:function(){var s={idchanged:!0,append:!0,remove:!0,move:!0,insert:!0,beforeappend:!0,beforeremove:!0,beforemove:!0,beforeinsert:!0,expand:!0,collapse:!0,beforeexpand:!0,beforecollapse:!0,sort:!0},f={silent:!0};return{isNode:!0,firstChild:null,lastChild:null,parentNode:null,previousSibling:null,nextSibling:null,constructor:function(){return this.mixins.observable.constructor.call(this),this.callParent(arguments),this.childNodes=[],this},createNode:function(e){var t,i,n,r,s,o,a=this.childType,l=this.self;return e.isModel||(a?l=this.schema.getEntity(a):(i=(t=this.getTreeStore())&&t.getProxy().getReader(),r=(n=this.getProxy())?n.getReader():null,(s=!i||r&&r.initialConfig.typeProperty?r:i)&&(o=s.getTypeProperty())&&(l=s.getChildType(this.schema,e,o))),e=new l(e)),e.childNodes||(e.firstChild=e.lastChild=e.parentNode=e.previousSibling=e.nextSibling=null,e.childNodes=[]),e},isLeaf:function(){return!0===this.get("leaf")},setFirstChild:function(e){this.firstChild=e},setLastChild:function(e){this.lastChild=e},updateInfo:function(e,t){var i,n,r,s,o,a=this.phantom;if(e={silent:!0,commit:e},null!=t.depth&&t.depth!==this.data.depth)for(n={depth:t.depth+1},s=(r=this.childNodes).length,o=0;o<s;o++)r[o].updateInfo(e,n);return i=this.set(t,e),this.phantom=a,i},isLast:function(){return this.get("isLast")},isFirst:function(){return this.get("isFirst")},hasChildNodes:function(){return!this.isLeaf()&&0<this.childNodes.length},isExpandable:function(){return!!this.get("expandable")&&!(this.isLeaf()||this.isLoaded()&&!this.phantom&&!this.hasChildNodes())},triggerUIUpdate:function(){this.callJoined("afterEdit",[])},appendChild:function(e,t,i){var n,r,s,o,a,l,c,u=this,d=u.getTreeStore(),h=d&&d.bulkUpdate,f={isLast:!0,parentId:u.getId(),depth:(u.data.depth||0)+1};if(Ext.suspendLayouts(),Ext.isArray(e)){for(c=e.length,a=new Array(c),u.callTreeStore("beginFill"),l=0;l<c;l++)a[l]=u.appendChild(e[l],t,i);u.callTreeStore("endFill",[a])}else{if(e=u.createNode(e),!0!==t&&!1===u.fireBubbledEvent("beforeappend",[u,e]))return Ext.resumeLayouts(!0),!1;if(o=u.childNodes.length,n=e.parentNode){if(!0!==t&&!1===e.fireBubbledEvent("beforemove",[e,n,u,o]))return Ext.resumeLayouts(!0),!1;if(!1===n.removeChild(e,!1,t,n.getTreeStore()===d))return Ext.resumeLayouts(!0),!1}d&&d.beginUpdate(),0===(o=u.childNodes.length)&&u.setFirstChild(e),(u.childNodes[o]=e).parentNode=u,e.nextSibling=null,u.setLastChild(e),(r=u.childNodes[o-1])?((e.previousSibling=r).nextSibling=e,r.updateInfo(i,{isLast:!1}),h||r.triggerUIUpdate()):e.previousSibling=null,f.isFirst=0===o,f.index=o,s=e.updateInfo(i,f),u.isLeaf()&&u.set("leaf",!1),u.isLoaded()?1!==u.childNodes.length||h||u.triggerUIUpdate():h?u.data.loaded=!0:u.set("loaded",!0),o&&u.childNodes[o-1].isExpanded()&&!h&&u.childNodes[o-1].cascade(u.triggerUIUpdate),d&&(d.registerNode(u,!h),h&&d.registerNode(e)),!0!==t&&(u.fireBubbledEvent("append",[u,e,o]),n&&e.fireBubbledEvent("move",[e,n,u,o])),u.callTreeStore("onNodeAppend",[e,o]),s&&e.callJoined("afterEdit",[s]),a=e,d&&d.endUpdate()}return Ext.resumeLayouts(!0),a},getOwnerTree:function(){var e=this.getTreeStore();return e&&e.ownerTree},getTreeStore:function(){for(var e=this;e&&!e.treeStore;)e=e.parentNode;return e&&e.treeStore},removeChild:function(e,t,i,n){var r,s,o,a,l=this,c=l.indexOf(e),u=l.getTreeStore(),d=u&&u.bulkUpdate,h=[];if(-1===c||!0!==i&&!1===l.fireBubbledEvent("beforeremove",[l,e,!!n]))return!1;if(Ext.suspendLayouts(),u&&u.beginUpdate(),Ext.Array.erase(l.childNodes,c,1),l.firstChild===e&&l.setFirstChild(e.nextSibling),l.lastChild===e&&l.setLastChild(e.previousSibling),(o=e.previousSibling)&&(e.previousSibling.nextSibling=e.nextSibling),e.nextSibling)for(e.nextSibling.previousSibling=e.previousSibling,0===c&&e.nextSibling.updateInfo(!1,{isFirst:!0}),r=c,s=l.childNodes.length;r<s;r++)l.childNodes[r].updateInfo(!1,{index:r});else o&&(o.updateInfo(!1,{isLast:!0}),d||(o.isExpanded()?o.cascade(l.triggerUIUpdate):o.triggerUIUpdate()));return l.childNodes.length||d||l.triggerUIUpdate(),Ext.resumeLayouts(!0),!0!==i&&(a={parentNode:e.parentNode,previousSibling:e.previousSibling,nextSibling:e.nextSibling},l.callTreeStore("beforeNodeRemove",[[e],!!n,h]),e.previousSibling=e.nextSibling=e.parentNode=null,l.fireBubbledEvent("remove",[l,e,!!n,a]),l.callTreeStore("onNodeRemove",[[e],!!n,h])),t?e.erase(!0):e.clear(),n||e.set({parentId:null,lastParentId:l.getId()},f),u&&u.endUpdate(),e},copy:function(e,t,i){var n,r,s=[e],o=this.childNodes?this.childNodes.length:0;if(t&&t.isSession?s.push(t):arguments.length<3&&(i=t),n=this.callParent(s),i)for(r=0;r<o;r++)n.appendChild(this.childNodes[r].copy(void 0,!0));return n},clear:function(e,t){var i=this;i.parentNode=i.previousSibling=i.nextSibling=null,e&&(i.firstChild=i.lastChild=i.childNodes=null),t&&(i.firstChild=i.lastChild=null,i.childNodes.length=0,i.data&&(i.data.children=null))},drop:function(){var e,t,i,n=this.childNodes,r=this.parentNode,s=this.getTreeStore();for(this.callParent(),r?r.removeChild(this):this.get("root")&&s.setRoot(null),s&&s.beginUpdate(),t=0,i=n?n.length:0;t<i;t++)(e=n[t]).clear(),e.drop();s&&s.endUpdate()},erase:function(e){var t,i,n=this.childNodes,r=n&&n.length;for(this.remove(),this.clear(!0),this.callParent([e]),t=0;t<r;t++)(i=n[t]).parentNode=null,i.erase(e)},insertBefore:function(e,t,i){var n,r,s,o,a,l,c=this,u=c.indexOf(t),d=e.parentNode,h=u,f=c.getTreeStore(),g=f&&f.bulkUpdate;if(!t)return c.appendChild(e);if(e===t)return!1;if(e=c.createNode(e),!0!==i&&!1===c.fireBubbledEvent("beforeinsert",[c,e,t]))return!1;if(d===c&&c.indexOf(e)<u&&h--,d){if(!0!==i&&!1===e.fireBubbledEvent("beforemove",[e,d,c,u,t]))return!1;if(!1===d.removeChild(e,!1,i,d.getTreeStore()===f))return!1}for(f&&f.beginUpdate(),0===h&&c.setFirstChild(e),Ext.Array.splice(c.childNodes,h,0,e),e.parentNode=c,(e.nextSibling=t).previousSibling=e,(r=c.childNodes[h-1])?(e.previousSibling=r).nextSibling=e:e.previousSibling=null,o=e.updateInfo(!1,{parentId:c.getId(),index:h,isFirst:0===h,isLast:!1,depth:(c.data.depth||0)+1}),s=h+1,n=c.childNodes.length;s<n;s++)(l=(a=c.childNodes[s]).updateInfo(!1,{index:s}))&&a.callJoined("afterEdit",[l]);return c.isLoaded()?1!==c.childNodes.length||g||c.triggerUIUpdate():g?c.data.loaded=!0:c.set("loaded",!0),f&&f.registerNode(c,!g),!0!==i&&(c.fireBubbledEvent("insert",[c,e,t]),d&&e.fireBubbledEvent("move",[e,d,c,h,t])),c.callTreeStore("onNodeInsert",[e,h]),o&&e.callJoined("afterEdit",[o]),f&&f.endUpdate(),e},insertChild:function(e,t){var i=this.childNodes[e];return i?this.insertBefore(t,i):this.appendChild(t)},isLastVisible:function(){var e=this.data.isLast,t=this.nextSibling;if(e||!this.getTreeStore().isFiltered())return e;for(;t;){if(t.data.visible)return!1;t=t.nextSibling}return!0},remove:function(e,t){var i=this.parentNode;return i?i.removeChild(this,e,t):e&&this.erase(!0),this},removeAll:function(e,t,i){var n,r,s,o=this,a=o.childNodes,l=a.length,c=[];if(!l)return o;for(i||(r=o.getTreeStore())&&(r.beginUpdate(),r.suspendEvent("remove"),o.callTreeStore("beforeNodeRemove",[a,!1,c])),s=0;s<l;++s)(n=a[s]).previousSibling=n.nextSibling=n.parentNode=null,o.fireBubbledEvent("remove",[o,n,!1]),e?n.erase(!0):n.removeAll(!1,t,!0);return!i&&r&&(r.resumeEvent("remove"),o.callTreeStore("onNodeRemove",[a,!1,c]),r.endUpdate()),o.firstChild=o.lastChild=null,a.length=0,i||o.triggerUIUpdate(),o},getChildAt:function(e){return this.childNodes[e]},replaceChild:function(e,t,i){var n=t?t.nextSibling:null;return this.removeChild(t,!1,i),this.insertBefore(e,n,i),t},indexOf:function(e){return Ext.Array.indexOf(this.childNodes,e)},indexOfId:function(e){for(var t=this.childNodes,i=t.length,n=0;n<i;++n)if(t[n].getId()===e)return n;return-1},getPath:function(e,t){e=e||this.idProperty,t=t||"/";for(var i=[this.get(e)],n=this.parentNode;n;)i.unshift(n.get(e)),n=n.parentNode;return t+i.join(t)},getDepth:function(){return this.get("depth")},bubble:function(e,t,i){for(var n=this;n&&!1!==e.apply(t||n,i||[n]);)n=n.parentNode},cascade:function(e,t,i,n){var r,s,o,a=e;if(1!==arguments.length||Ext.isFunction(e)||(n=e.after,t=e.scope,i=e.args,a=e.before),!a||!1!==a.apply(t||this,i||[this])){for(o=0,s=(r=this.childNodes).length;o<s;o++)r[o].cascade.call(r[o],a,t,i,n);n&&n.apply(t||this,i||[this])}},cascadeBy:function(){return this.cascade.apply(this,arguments)},eachChild:function(e,t,i){var n,r=this.childNodes,s=r.length;for(n=0;n<s&&!1!==e.apply(t||this,i||[r[n]]);n++);},findChild:function(e,t,i){return this.findChildBy(function(){return this.get(e)==t},null,i)},findChildBy:function(e,t,i){var n,r,s,o,a=this.childNodes;for(n=0,r=a.length;n<r;n++){if(s=a[n],!0===e.call(t||s,s))return s;if(i&&null!==(o=s.findChildBy(e,t,i)))return o}return null},contains:function(e){return e.isAncestor(this)},isAncestor:function(e){for(var t=this.parentNode;t;){if(t===e)return!0;t=t.parentNode}return!1},sort:function(e,t,i){var n,r,s=this.childNodes,o=s.length,a={isFirst:!0};if(0<o){for(e=e||this.getTreeStore().getSortFn(),Ext.Array.sort(s,e),this.setFirstChild(s[0]),this.setLastChild(s[o-1]),n=0;n<o;n++)(r=s[n]).previousSibling=s[n-1],r.nextSibling=s[n+1],a.isLast=n===o-1,a.index=n,r.updateInfo(!1,a),a.isFirst=!1,t&&!r.isLeaf()&&r.sort(e,!0,!0);!0!==i&&(this.fireBubbledEvent("sort",[this,s]),this.callTreeStore("onNodeSort",[s]))}},isExpanded:function(){return this.get("expanded")},isLoaded:function(){return this.get("loaded")},isBranchLoaded:function(){var t=!this.isLeaf()&&this.isLoaded();return t&&this.cascade(function(e){return e.isLeaf()||(t=t||e.isBranchLoaded()),t}),t},isLoading:function(){return this.get("loading")},isRoot:function(){return!this.parentNode},isVisible:function(){for(var e=this.parentNode;e;){if(!e.isExpanded())return!1;e=e.parentNode}return!0},expand:function(e,t,i){var n,r,s=this;s.isLeaf()?Ext.callback(t,i||s):s.isLoading()?s.on("expand",function(){s.expand(e,t,i)},s,{single:!0}):s.isExpanded()?e?s.expandChildren(!0,t,i):Ext.callback(t,i||s,[s.childNodes]):!1!==s.fireBubbledEvent("beforeexpand",[s])&&(e&&(s.parentNode&&s.parentNode.isSynchronousRecursiveExpand?s.isSynchronousRecursiveExpand=!0:((n=s.getTreeStore()).getProxy().isSynchronous||s.isBranchLoaded())&&(s.isSynchronousRecursiveExpand=!0,n.suspendEvent("add","datachanged"),r=!0)),s.callTreeStore("onBeforeNodeExpand",[s.onChildNodesAvailable,s,[e,t,i]]),r&&(n.resumeEvent("add","datachanged"),n.fireEvent("datachanged",n),n.fireEvent("refresh",n)),s.isSynchronousRecursiveExpand=!1)},onChildNodesAvailable:function(e,t,i,n){var r,s,o,a=this,l=a.getTreeStore(),c=l&&l.bulkUpdate;for(Ext.suspendLayouts(),r=a.parentNode;r;r=r.parentNode)r.isExpanded()||(s=s||[]).unshift(r);if(c||!l.isVisible(a)?a.data.expanded=!0:a.set("expanded",!0),s){for(o=1;o<s.length;o++)r=s[o],c||!l.isVisible(r)?r.data.expanded=!0:r.set("expanded",!0);for(s[0].expand(),o=1;o<s.length;o++)(r=s[o]).fireBubbledEvent("expand",[r,r.childNodes])}else a.callTreeStore("onNodeExpand",[e,!1]);a.fireBubbledEvent("expand",[a,e]),t?a.expandChildren(!0,i,n):Ext.callback(i,n||a,[a.childNodes]),Ext.resumeLayouts(!0)},expandChildren:function(e,t,i,n){var r,s,o,a,l,c,u;for(Ext.isBoolean(t)&&(r=t,t=i,i=n,n=r),void 0===n&&(n=(u=this.getTreeStore())&&u.singleExpand),o=this.childNodes,a=[],l=n?Math.min(o.length,1):o.length,s=0;s<l;++s)(c=o[s]).isLeaf()||(a[a.length]=c);for(l=a.length,s=0;s<l;++s)a[s].expand(e);t&&Ext.callback(t,i||this,[this.childNodes])},collapse:function(e,t,i){var n,r,s=this,o=s.isExpanded(),a=s.getTreeStore(),l=a&&a.bulkUpdate,c=s.childNodes.length;if(!s.isLeaf()&&(!o&&e||!1!==s.fireBubbledEvent("beforecollapse",[s]))){if(Ext.suspendLayouts(),s.isExpanded())t=e?(r=function(){for(n=0;n<c;n++)s.childNodes[n].setCollapsed(!0)},t?Ext.Function.createSequence(r,Ext.Function.bind(t,i,[s.childNodes])):r):t&&Ext.Function.bind(t,i,[s.childNodes]),l||!a.contains(s)?s.data.expanded=!1:s.set("expanded",!1),s.callTreeStore("onNodeCollapse",[s.childNodes,t,i]),s.fireBubbledEvent("collapse",[s,s.childNodes]),t=null;else if(e)for(n=0;n<c;n++)s.childNodes[n].setCollapsed(!0);Ext.resumeLayouts(!0)}Ext.callback(t,i||s,[s.childNodes])},setCollapsed:function(e){var t,i=this.childNodes.length;if(!this.isLeaf()&&!1!==this.fireBubbledEvent("beforecollapse",[this])&&(this.data.expanded=!1,this.fireBubbledEvent("collapse",[this,this.childNodes]),e))for(t=0;t<i;t++)this.childNodes[t].setCollapsed(!0)},collapseChildren:function(e,t,i){var n,r,s=this.childNodes,o=s.length,a=[];for(r=0;r<o;++r)!(n=s[r]).isLeaf()&&n.isLoaded()&&n.isExpanded()&&a.push(n);if(o=a.length)for(r=0;r<o;++r)n=a[r],r===o-1?n.collapse(e,t,i):n.collapse(e);else Ext.callback(t,i)},fireEvent:function(e){return this.fireBubbledEvent(e,Ext.Array.slice(arguments,1))},fireBubbledEvent:function(e,t){var i,n,r;if(s[e]){for(n=this;!1!==i&&n;n=(r=n).parentNode)i=n.fireEventArgs.call(n,e,t);return!1!==i&&(n=r.getTreeStore())&&n.hasListeners&&n.hasListeners[e="node"+e]&&(i=n.fireEventArgs(e,t)),i}return this.fireEventArgs.apply(this,arguments)},serialize:function(e){var t,i,n=e||new Ext.data.writer.Json({writeAllFields:!0}),r=n.getRecordData(this),s=this.childNodes,o=s.length;if(0<o)for(r.children=t=[],i=0;i<o;i++)t.push(s[i].serialize(n));return r},callTreeStore:function(e,t){var i=this.getTreeStore(),n=i&&i[e];i&&n&&((t=t||[])[0]!==this&&t.unshift(this),n.apply(i,t))},addCls:function(e){this.replaceCls(null,e)},removeCls:function(e){this.replaceCls(e)},replaceCls:function(e,t){var i=this._parseCls(this.data.cls),n=this._parseCls(e);n.length&&(i=Ext.Array.difference(i,n)),(n=this._parseCls(t)).length&&(i=Ext.Array.unique(i.concat(n))),this.set("cls",i.join(" "))},toggleCls:function(e,t){var i,n,r,s,o;if(void 0===t){for(i=this._parseCls(this.data.cls),s=0,r=(n=this._parseCls(e)).length;s<r;++s)o=n[s],Ext.Array.contains(i,o)?Ext.Array.remove(i,o):i.push(o);this.set("cls",i.join(" "))}else t?this.addCls(e):this.removeCls(e)},privates:{_noCls:[],spacesRe:/\\s+/,join:function(e){e.isTreeStore?this.isRoot()&&(this.treeStore=this.store=e):this.callParent([e])},callJoined:function(e,t){this.callParent([e,t]),this.callTreeStore(e,t)},_parseCls:function(e){return e?"string"==typeof e?e.split(this.spacesRe):e:this._noCls}}}}}}),Ext.define("Ext.data.TreeModel",{extend:Ext.data.Model,mixins:[Ext.mixin.Queryable],getRefItems:function(){return this.childNodes},getRefOwner:function(){return this.parentNode},statics:{defaultProxy:"memory"}},function(){Ext.data.NodeInterface.decorate(this)}),Ext.define("Ext.data.NodeStore",{extend:Ext.data.Store,alias:"store.node",isNodeStore:!0,config:{node:null,recursive:!1,rootVisible:!1,folderSort:!1},implicitModel:"Ext.data.TreeModel",getTotalCount:function(){return this.getCount()},updateFolderSort:function(e){var t=this.getData();t.setTrackGroups(!1),e?t.setGrouper({groupFn:this.folderSortFn}):t.setGrouper(null)},folderSortFn:function(e){return e.data.leaf?1:0},afterReject:function(e){this.contains(e)&&(this.onUpdate(e,Ext.data.Model.REJECT,null),this.fireEvent("update",this,e,Ext.data.Model.REJECT,null))},afterCommit:function(e,t){t=t||null,this.contains(e)&&(this.onUpdate(e,Ext.data.Model.COMMIT,t),this.fireEvent("update",this,e,Ext.data.Model.COMMIT,t))},onNodeAppend:function(e,t){e===this.getNode()&&this.add([t].concat(this.retrieveChildNodes(t)))},onNodeInsert:function(e,t,i){e===this.getNode()&&this.insert(0,[t].concat(this.retrieveChildNodes(t)))},onNodeRemove:function(e,t){e===this.getNode()&&this.remove([t].concat(this.retrieveChildNodes(t)))},onNodeExpand:function(e,t){e===this.getNode()&&this.loadRecords(t)},applyNode:function(e){return e&&(e.isModel||(e=new(this.getModel())(e)),e.isNode||Ext.data.NodeInterface.decorate(e)),e},updateNode:function(e,t){var i,n=this;t&&!t.destroyed&&(t.un({append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove",scope:n}),t.unjoin(n)),e&&(e.on({scope:n,append:"onNodeAppend",insert:"onNodeInsert",remove:"onNodeRemove"}),e.join(n),i=[],e.childNodes.length&&(i=i.concat(n.retrieveChildNodes(e))),n.getRootVisible()?i.push(e):(e.isLoaded()||e.isLoading())&&e.set("expanded",!0),n.getData().clear(),n.fireEvent("clear",n),n.suspendEvents(),n.isInitializing?n.inlineData=i:n.add(i),n.resumeEvents(),0===i.length&&(n.loaded=e.loaded=!0),n.fireEvent("refresh",n,n.data))},isVisible:function(e){var t=e.parentNode;if(!this.getRecursive()&&t!==this.getNode())return!1;for(;t;){if(!t.isExpanded())return!1;if(t===this.getNode())break;t=t.parentNode}return!0},privates:{retrieveChildNodes:function(e){var t=this.getNode(),i=this.getRecursive(),n=[],r=e;if(!e.childNodes.length||!i&&e!==t)return n;if(!i)return e.childNodes;for(;r;)if(r._added){if(delete r._added,r===e)break;r=r.nextSibling||r.parentNode}else r!==e&&n.push(r),r=r.firstChild?(r._added=!0,r.firstChild):r.nextSibling||r.parentNode;return n}}}),Ext.define("Ext.data.query.Compiler",{compile:function(){var e,t,i,n=this,r=n.ast;if(n.error=null,r){e=["return function (item) {","\\tvar rec = item.isEntity && item;","\\treturn "],i=[],(n.query=n).assemble(e,i,"\\t",r),e.push("}"),e=i.concat(e).join("\\n");try{t=new Function("Ext","O","F",e),n.fn=t(Ext,n.operators,n.getFunctions()),n.fn.generation=n.generation}catch(e){throw(n.error=e).message="Failed to compile: "+e.message,e}finally{n.query=null}}else n.fn=Ext.returnTrue},privates:{asmOps:{">":"gt","<":"lt","==":"eq",">=":"ge","<=":"le","!=":"ne"},assemblers:{binary:function(e,t,i,n,r,s,o){var a,l=e.operatorTypeMap[r.type][1],c=e.asmOps[l],u=r.on,d="";for(c?(t[s]+="O."+c+"(",l=", ",d=")"):l=" "+l+" ",t[s]+="(",a=0;a<u.length;++a)a&&t.push(n+")"+l+"("),t.push(o),e.assemble(t,i,o,u[a]);t.push(n+")"+d)},between:function(e,t,i,n,r,s,o){var a,l=r.on;for(t[s]+="O.between(",a=0;a<3;++a)a&&(t[s=t.length-1]+=", "),e.assemble(t,i,o,l[a]);t.push(n+")")},fn:function(e,t,i,n,r,s,o){var a,l,c=r.fn.toLowerCase(),u=e.query.getFunctions();for(u[c]||Ext.raise('Unsupported function "'+r.fn+'"'),(u=u[c]).vargs?t[s]+="F."+c+".fn([":t[s]+="F."+c+".fn(",a=r.args,l=0;l<a.length;++l)l&&(t[s=t.length-1]+=", "),t.push(o),e.assemble(t,i,o,a[l]);u.vargs?t.push(n+"])"):t.push(n+")")},id:function(e,t,i,n,r,s,o){var a=r.value,l=a.split(".");1===l.length?t[s]+="rec ? rec.interpret("+Ext.JSON.encode(a)+") : item."+a:(a="p"+i.length,i.push("var "+a+" = "+Ext.JSON.encode(l)+";"),t[s]+="O.dots(item, "+a+")")},in:function(e,t,i,n,r,s,o){var a=r.on;t[s]+="O.in(",e.assemble(t,i,o,a[0]),t[s=t.length-1]+=", ",e.assemble(t,i,o,a[1]),t.push(n+")")},like:function(e,t,i,n,r,s,o){var a,l=r.on;t[s]+="O.like(",e.assemble(t,i,o,l[0]),t[s=t.length-1]+=", ",(a=l[1]).re&&(a={type:"regexp",value:a.re,flags:a.flags}),e.assemble(t,i,o,a),t[s=t.length-1]+=") "},list:function(e,t,i,n,r,s,o){t[s]+="[";for(var a=0,l=r.value;a<l.length;++a)a&&(t[s=t.length-1]+=", "),t.push(o),e.assemble(t,i,o,l[a]);t.push(n+"]")},string:"regexp",regexp:function(e,t,i,n,r,s){var o="re"+i.length;i.push("var "+o+" = /"+(r.re||r.value)+"/"+(r.flags||"")+";"),t[s]+=o},unary:function(e,t,i,n,r,s,o){var a=e.operatorTypeMap[r.type][1],l=r.on;t[s]+=a+"(",t.push(o),e.assemble(t,i,o,l),t.push(n+")")}},operators:{between:function(e,t,i){return t<=e&&e<=i},dots:function(e,t){var i,n;if(e.isEntity)for(n=e,i=0;i<t.length;++i){if(!n||!n.interpret){n=void 0;break}n=n.interpret(t[i])}else for(n=e,i=0;i<t.length;++i){if(!n){n=void 0;break}n=n[t[i]]}return n},in:function(e,t){return Ext.Array.contains(t,e)},like:function(e,t){return e=String(e),"string"==typeof t?!!e&&-1<e.toLowerCase().indexOf(t.toLowerCase()):t.test(e)},eq:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?!Ext.Date.compare(e,t):e==t},ge:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?0<=Ext.Date.compare(e,t):t<=e},gt:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?0<Ext.Date.compare(e,t):t<e},le:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?Ext.Date.compare(e,t)<=0:e<=t},lt:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?Ext.Date.compare(e,t)<0:e<t},ne:function(e,t){return e&&t&&(e instanceof Date||t instanceof Date)?!!Ext.Date.compare(e,t):e!=t}},assemble:function(e,t,i,n){var r,s,o=this.assemblers,a=typeof n,l=e.length-1,c=i+"\\t",u=n.type;"boolean"==a||"number"==a?e[l]+=n:"string"==a?e[l]+=Ext.JSON.encode(n):(r=this.operatorTypeMap[u],"string"==typeof(s=o[u]||r&&o[r[0]])&&(s=o[s]),s(this,e,t,i,n,e.length-1,c))}}}),Ext.define("Ext.data.query.Converter",{getFilters:function(){var e,t,i,n,r,s,o,a,l,c,u=this.ast,d=this.exprToFilter,h=this.operatorTypeMap,f=this.fn,g=u&&u.on;if(u)if(f.hasOwnProperty("$filters"))a=f.$filters;else{if("and"===u.type&&g){for(i=[],n=0,s=g.length;n<s&&((r=(e=g[n]).on)&&2===r.length)&&(l=r[1],"id"===(r=r[0]).type)&&((c=d[e.type])||(o=h[e.type])&&(c=d[o[0]]))&&(t=c(e,r.value,l,o));++n)i.push(t);n===s&&(a=i)}f.$filters=a}else a=null;return a},setFilters:function(e){var t,i,n,r,s,o=null,a=e&&e.length;if(a)for(o={type:"and",on:[]},n=0;n<a;++n)i=e[n],t=(s=this.filterToExpr[r=i.operator])?s(i):{type:this.getOperatorType(r),on:[{type:"id",value:i.property},i.value]},o.on.push(t);this.ast=o,this.refresh()},privates:{exprToFilter:{binary:function(e,t,i,n){return Ext.isPrimitive(i)&&{property:t,operator:n[1],value:i}},in:function(e,t,i){var n=0,r=i.value;if("list"===i.type&&Ext.isArray(r))for(n=r.length;0<n--&&Ext.isPrimitive(r[n]););return n<0&&{property:t,operator:"in",value:r}},like:function(e,t,i){return"regexp"===i.type?{property:t,operator:"/=",value:i.value}:"string"===i.type&&{property:t,operator:"like",value:i.value}}},filterToExpr:{"/=":function(e){return{type:"like",on:[{type:"id",value:e.property},{type:"regexp",value:e.value}]}},in:function(e){return{type:"in",on:[{type:"id",value:e.property},{type:"list",value:e.value}]}},like:function(e){return{type:"like",on:[{type:"id",value:e.property},{type:"string",value:e.value,re:e.value,flags:"i"}]}}}}}),Ext.define("Ext.data.query.Stringifier",{stringify:function(e){var t,i,n=typeof e,r=e.type,s=this.operatorTypeMap,o=this.getPriority(e),a=this.stringifiers;return"boolean"==n||"number"==n?String(e):"string"==n?Ext.JSON.encode(e):(!(i=a[r])&&r in s&&(i=a[(t=s[r])[0]],t=t[2]||t[1]),"string"==typeof i&&(i=a[i]),i(this,e,o,t))},privates:{getPriority:function(e){var t=this.symbols,i=this.operatorTypeMap,n=e.type,r=1e9;return"between"===n?(r=0,r=t[n].priority):"and"===n||"or"===n||"in"===n||"like"===n?r=t[n].priority:n in i&&(r=t[i[n][1]].priority),r},stringifiers:{and:"or",or:function(e,t,i){var n,r,s,o="or"===t.type?" or ":" and ",a="",l=t.on;for(n=0;n<l.length;++n)a&&(a+=o),r=l[n],s=e.getPriority(r)<i,r=e.stringify(r),s&&(r="("+r+")"),a+=r;return a},between:function(e,t,i){var n,r,s,o,a=t.on,l=a[0],c=e.getPriority(l)<i;for(l=e.stringify(l),c&&(l="("+l+")"),o=l+" between ",i=e.symbols.and.priority,n=0;n<2;++n)n&&(o+=" and "),s=a[n+1],r=n?"id"!==s.type&&!Ext.isPrimitive(s):e.getPriority(s)<i,s=e.stringify(s),r&&(s="("+s+")"),o+=s;return o},binary:function(e,t,i,n){var r=t.on,s=r[0],o=r[1],a=e.getPriority(s)<i,l=e.getPriority(o)<i;return s=e.stringify(s),o=e.stringify(o),a&&(s="("+s+")"),l&&(o="("+o+")"),s+" "+n+" "+o},fn:function(e,t){return t.fn+"("+e.stringifyArray(t.args)+")"},id:function(e,t){return t.value},list:function(e,t){return"("+e.stringifyArray(t.value)+")"},regexp:function(e,t){return"/"+t.value+"/"+(t.flags||"")},string:function(e,t){return Ext.JSON.encode(t.value)},unary:function(e,t,i,n){var r=t.on,s=e.stringify(r),o=r.type;return"fn"!==o&&"id"!==o&&"unary"!==o&&(s="("+s+")"),n+s}},stringifyArray:function(e){var t,i,n="";for(t=0;t<e.length;++t)n&&(n+=", "),i=e[t],n+=i=this.stringify(i);return n}}}),Ext.define("Ext.data.query.Parser",function(d){var i={list:!0,literal:!0,type:"list"};return{extend:Ext.parse.Parser,tokenizer:{keywords:{and:{type:"operator",name:"and",value:"&&",is:{operator:!0}},or:{type:"operator",name:"or",value:"||",is:{operator:!0}},not:{type:"operator",name:"not",value:"!",is:{operator:!0}},between:{type:"operator",name:"between",value:"between",is:{operator:!0}},like:{type:"operator",name:"like",value:"like",is:{operator:!0}},in:{type:"operator",name:"in",value:"in",is:{operator:!0}}},operators:{"=":"eq","==":"seq","===":"seq","!==":"sne","!=":"neq","<>":"neq","<":"lt","<=":"lte",">":"gt",">=":"gte","&&":"and","||":"or",",":"comma"},patterns:{regex:{type:"literal",is:{literal:!0,regexp:!0,type:"regexp"},re:/\\/(?!\\/)((?:\\[.+?]|\\\\.|[^/\\\\\\r\\n])+)\\/([gimyu]{0,5})/g,extract:function(e){var t=e[1],i=e[2];return i?[t,i]:t}}}},infix:{"=":40,"<>":40,like:40,between:{priority:70,led:function(e){var t=this.parser;return this.arity="between",this.operand=e,this.low=t.parseExpression(t.symbols.and.priority),t.advance("&&"),this.high=t.parseExpression(80),this}},in:{priority:40,led:function(e){var t=this.parser;return t.advance("("),this.arity="binary",this.lhs=e,this.rhs={arity:"literal",value:t.parseList(),is:i},t.advance(")"),this}}},infixRight:{and:30,or:30},prefix:{not:0},parse:function(){var e=this.parseExpression();return this.convert(e)},privates:{opCodes:{binary:{"=":"eq",">":"gt","<":"lt",">=":"ge","<=":"le","!=":"ne","<>":"ne","+":"add","/":"div","*":"mul","-":"sub"},unary:{"-":"neg","!":"not"}},convert:function(e){var t,i,n,r,s=this,o=e.arity,a=e.is,l=e.name,c=s.opCodes,u=e.value;switch(o){case"between":r={type:"between",on:[s.convert(e.operand),s.convert(e.low),s.convert(e.high)]};break;case"ident":r={type:"id",value:u};break;case"invoke":r={type:"fn",fn:e.operand.value,args:s.convertArray(e.args)};break;case"unary":r={type:c.unary[u],on:s.convert(e.operand)};break;case"binary":"and"===l||"or"===l?(i=s.convert(e.lhs),(n=s.convert(e.rhs)).type===l?(t=n.on).unshift(i):t=[i,n],r={type:l,on:t}):("or"===u&&(u="||"),r={type:c.binary[u]||l,on:[s.convert(e.lhs),s.convert(e.rhs)]},"like"===l&&(r.on[1]=s.likeToRe(r.on[1],e.rhs.at)));break;case"literal":a.string||a.number||a.boolean?r=u:(r={type:a.type,value:u},a.list?r.value=s.convertArray(u):a.regexp&&"string"!=typeof u&&(r.value=u[0],r.flags=u[1]))}return r&&"object"==typeof r&&!r.type&&(r.type=o),r},convertArray:function(e){for(var t=[],i=e.length;0<i--;)t[i]=this.convert(e[i]);return t},likeToRe:function(e,t){if("string"==typeof e)e={type:"string",value:e};else if("regexp"===e.type)return e;var i,n,r,s,o=this.specialChars||(d.prototype.specialChars=Ext.Array.toMap(".+*?^$=!|:-<>[](){}\\\\".split(""))),a=e.value,l=a.length,c="",u=!0;e:for(r=0;r<l;++r){if(n=a[r],!i){if("\\\\"===n){i=n;continue}if("*"===n||"%"===n){c+=".*",u=!1;continue}if("?"===n||"_"===n){c+=".",u=!1;continue}if("["===n){for(c+=n,u=!1,s=r;++r<l;)if(n=a[r],i)c+=i+n,i=0;else if("\\\\"===n)i=n;else if(c+=n,"]"===n)continue e;this.syntaxError(s+(e.at||t||0),"Incomplete character set")}}i=0,o[n]&&(c+="\\\\"),c+=n}return e.re=c||".*",u?e.flags="i":e.re="^"+c+"$",e},parseList:function(){for(var e=[];e.length&&this.advance(),e.push(this.parseExpression()),","===this.token.id;);return e}}}}),Ext.define("Ext.data.Query",{extend:Ext.util.BasicFilter,mixins:[Ext.mixin.Factoryable,Ext.data.query.Compiler,Ext.data.query.Converter,Ext.data.query.Stringifier],alias:"query.default",config:{format:"ast",functions:{cached:!0,$value:{abs:function(e){return Math.abs(e)},"avg...":function(e){for(var t,i=0,n=0,r=e.length;0<r--;)null!=(t=e[r])&&(n+=t,++i);return i?n/i:0},date:function(e){return e instanceof Date?e:Ext.Date.parse(e)},lower:function(e){return null==e?"":String(e).toLowerCase()},"max...":function(e){for(var t,i=null,n=e.length;0<n--;)null!=(t=e[n])&&(i=null===i||i<t?t:i);return i},"min...":function(e){for(var t,i=null,n=e.length;0<n--;)null!=(t=e[n])&&(i=null!==i&&i<t?i:t);return i},"sum...":function(e){for(var t,i=null,n=e.length;0<n--;)null!=(t=e[n])&&(i=null===i?t:i+t);return null===i?0:i},upper:function(e){return null==e?"":String(e).toUpperCase()}}},source:""},ast:null,error:null,generation:0,constructor:function(e){"string"==typeof e&&(e={source:e});var t=Ext.data.query.Parser.fly();this.symbols=t.symbols,t.release(),this.callParent([e])},filter:function(e){var t=this.error;if(t)throw t;return!!this.fn(e)},refresh:function(){++this.generation,this.compile()},serialize:function(){var e,t,i=this.getFormat(),n=this.getSerializer();switch(i){case"ast":e=this.ast,n&&(e=Ext.clone(e));break;case"filters":e=this.getFilters()||null;break;case"query":e=this.toString()}return e&&n&&(t=n.call(this,e))&&(e=t),e},serializeTo:function(e){var t,i=this.serialize();return i&&i.length&&(e.push.apply(e,i),t=!0),t},sync:function(){var e=this.fn;e&&e.generation===this.generation||this.compile()},toString:function(){var e=this.ast;return e?this.stringify(e):""},validFormatsRe:/^(ast|filters|query)$/,applyFormat:function(e){return this.validFormatsRe.test(e)||Ext.raise("Invalid query format"),e},applyFunctions:function(e){var t,i,n,r={},s=this.vargsRe;for(i in e)(t={fn:e[n=i],vargs:s.test(i)}).vargs&&(n=i.substr(0,i.length-3)),r[n.toLowerCase()]=t;return r},applySource:function(e){if(e)return e;++this.generation,this.ast=null,this.compile()},updateSource:function(e){var t=Ext.data.query.Parser.fly(e);++this.generation;try{this.error=this.fn=null,this.ast=t.parse()}catch(e){throw(this.error=e).message="Failed to parse: "+e.message,e}finally{t.release()}this.compile()},privates:{operatorTypeMap:{and:["binary","&&","and"],or:["binary","||","or"],eq:["binary","==","="],ge:["binary",">=",null],gt:["binary",">",null],le:["binary","<=",null],lt:["binary","<",null],ne:["binary","!=",null],add:["binary","+",null],div:["binary","/",null],mul:["binary","*",null],sub:["binary","-",null],in:["binary",null,"in"],like:["binary",null,"like"],seq:["binary","===","=="],sne:["binary","!==",null],neg:["unary","-",null],not:["unary","!",null]},vargsRe:/\\.\\.\\.$/,getOperatorType:function(e){var t,i=this.operatorTypeMap;for(t in i)if(i[t][1]===e||i[t][2]===e)return t;return Ext.raise('Unrecognized filter operator: "'+e+'"'),null}}}),Ext.define("Ext.data.Request",{isDataRequest:!0,config:{action:void 0,params:void 0,method:"GET",url:null,operation:null,proxy:null,disableCaching:!1,headers:{},callbackKey:null,rawRequest:null,jsonData:void 0,xmlData:void 0,withCredentials:!1,username:null,password:null,binary:!1,callback:null,scope:null,timeout:3e4,records:null,directFn:null,args:null,useDefaultXhrHeader:null,responseType:null},constructor:function(e){this.initConfig(e)},getParam:function(e){var t=this.getParams();if(t)return t[e]},setParam:function(e,t){var i=this.getParams()||{};i[e]=t,this.setParams(i)}}),Ext.define("Ext.data.TreeStore",{extend:Ext.data.Store,alias:"store.tree",isTreeStore:!0,config:{root:null,rootVisible:!1,defaultRootProperty:"children",parentIdProperty:null,clearOnLoad:!0,clearRemovedOnLoad:!0,nodeParam:"node",defaultRootId:"root",defaultRootText:"Root",folderSort:!1,pageSize:null},filterer:"topdown",lazyFill:!1,fillCount:0,bulkUpdate:0,nodesToUnregister:0,_silentOptions:{silent:!0},implicitModel:"Ext.data.TreeModel",groupField:null,groupDir:null,grouper:null,constructor:function(e){this.byIdMap={},this.callParent([e]),Ext.isDefined(this.nodeParameter)&&(Ext.isDefined(Ext.global.console)&&Ext.global.console.warn("Ext.data.TreeStore: nodeParameter has been deprecated. Please use nodeParam instead."),this.nodeParam=this.nodeParameter,delete this.nodeParameter)},applyFields:function(e,t){e&&this.defaultRootProperty!==this.self.prototype.config.defaultRootProperty&&(e=e.concat({name:this.defaultRootProperty,type:"auto",defaultValue:null,persist:!1})),this.callParent([e,t])},applyGroupField:function(e){return null},applyGroupDir:function(e){return null},applyGrouper:function(e){return e&&Ext.raise("You can't group a TreeStore"),null},group:Ext.emptyFn,onSorterEndUpdate:function(){var e=this,t=e.getSorters().getRange(),i=e.getRoot(),n=e.getFolderSort();e.fireEvent("beforesort",e,t),i&&(n||t.length)?e.getRemoteSort()?t.length&&e.load({callback:function(){e.fireEvent("sort",e,t)}}):(i.sort(this.getSortFn(),!0),e.fireEvent("datachanged",e),e.fireEvent("refresh",e),e.fireEvent("sort",e,t)):e.fireEvent("sort",e,t)},updateFolderSort:function(e){this.needsFolderSort=e,this.onSorterEndUpdate()},getSortFn:function(){return this._sortFn||(this._sortFn=this.createSortFn())},createSortFn:function(){var n=this,r=this.sorters.getSortFn();return function(e,t){var i=0;return n.needsFolderSort&&(i=(e.data.leaf?1:0)-(t.data.leaf?1:0)),n.needsIndexSort&&0===i&&(i=e.data.index-t.data.index),i||r(e,t)}},getTotalCount:function(){return this.getCount()},afterEdit:function(e,t){var i,n,r,s=this,o=e.parentNode,a=s.getRootVisible(),l=!o&&!a,c=e.get("visible");l||c===s.contains(e)?s.getRoot()&&s.needsLocalFilter()&&s.onFilterEndUpdate(s.getFilters()):c?o&&!s.isVisible(e)||(n=[e],e.isExpanded()&&s.handleNodeExpand(e,e.childNodes,n),i=e.previousSibling?s.indexOfPreviousVisibleNode(e.previousSibling):o?s.indexOf(o):-1,s.insert(i+1,n)):(r=s.indexOf(e),s.removeAt(r,s.indexOfNextVisibleNode(e)-r)),s.callParent([e,t])},afterReject:function(e){this.contains(e)&&(this.onUpdate(e,Ext.data.Model.REJECT,null),this.fireEvent("update",this,e,Ext.data.Model.REJECT,null))},afterCommit:function(e,t){t=t||null,this.contains(e)&&(this.onUpdate(e,Ext.data.Model.COMMIT,t),this.fireEvent("update",this,e,Ext.data.Model.COMMIT,t))},updateRootVisible:function(e){var t,i=this.getRoot();i&&(t=this.getData(),e?t.insert(0,i):t.remove(i))},updateTrackRemoved:function(e){this.callParent(arguments),this.removedNodes=this.removed,this.removed=null},onDestroyRecords:function(e,t,i){i&&(this.removedNodes.length=0)},updateProxy:function(e){var t;e&&(e.setIdParam&&e.setIdParam(this.getNodeParam()),t=e.getReader(),Ext.isEmpty(t.getRootProperty())&&t.setRootProperty(this.getDefaultRootProperty()))},setProxy:function(e){this.changingProxy=!0,this.callParent([e]),this.changingProxy=!1},updateModel:function(e){var t;e&&(t=e.prototype.isNode,Ext.data.NodeInterface.decorate(e),t||this.changingProxy||this.getProxy().getReader().buildExtractors(!0))},onCollectionFilter:Ext.emptyFn,onFilterEndUpdate:function(e){var t,i,n,r,s=this,o=e.length,a=s.getRoot();if(s.getRemoteFilter())s.callParent([e]);else{if(o?s.doFilter(a):a.cascade({after:function(e){e.set("visible",!0,s._silentOptions)}}),o)for(n=[],r=0,o=(t=a.childNodes).length;r<o;r++)(i=t[r]).get("visible")&&n.push(i);else n=a.childNodes;s.onNodeFilter(a,n),a.fireEvent("filterchange",a,n),s.suppressNextFilter=!0,s.callParent([e]),s.suppressNextFilter=!1}},onNodeFilter:function(e,t){var i=this,n=i.getData(),r=[];i.getRootVisible()&&e.get("visible")&&r.push(e),i.handleNodeExpand(e,t,r),i.suspendEvents(),n.splice(0,n.getCount(),r),i.resumeEvents(),i.suppressNextFilter||(i.fireEvent("datachanged",i),i.fireEvent("refresh",i))},onBeforeNodeExpand:function(e,t,i,n){var r,s,o,a,l,c,u=this;e.isLoaded()?(c=[e.childNodes],n&&c.push.apply(c,n),Ext.callback(t,i||e,c)):e.isLoading()?u.on("load",function(){c=[e.childNodes],n&&c.push.apply(c,n),Ext.callback(t,i||e,c)},u,{single:!0,priority:1001}):(r=u.getProxy().getReader(),(l=(a=(o=(s=e.getProxy())?s.getReader():null)&&o.initialConfig.rootProperty?o:r).getRoot(e.raw||e.data))||e.phantom&&!e.isRoot()?(u.fillNode(e,a.extractData(l||[],{model:e.childType,recordCreator:u.recordCreator})),c=[e.childNodes],n&&c.push.apply(c,n),Ext.callback(t,i||e,c)):(u.read({node:e,onChildNodesAvailable:function(){delete u.lastOptions.onChildNodesAvailable,c=[e.childNodes],n&&c.push.apply(c,n),Ext.callback(t,i||e,c)}}),u.flushLoad()))},onNodeExpand:function(e,t){var i=this.indexOf(e)+1,n=[];this.handleNodeExpand(e,t,n),this.refreshCounter||!e.isRoot()||e.get("visible")?(++this.loadCount,this.insert(i,n)):this.loadRecords(n)},handleNodeExpand:function(e,t,i){var n,r,s=t?t.length:0;if((e===this.getRoot()||this.isVisible(e))&&s)for(n=0;n<s;n++)(r=t[n]).get("visible")&&(i.push(r),r.isExpanded()&&(r.isLoaded()?this.handleNodeExpand(r,r.childNodes,i):(r.set("expanded",!1,{silent:!0}),r.expand())))},onNodeCollapse:function(e,t,i,n){var r,s=this.indexOf(e)+1;this.needsLocalFilter()&&(t=Ext.Array.filter(t,this.filterVisible)),t.length&&this.isVisible(e)&&(r=this.indexOfNextVisibleNode(e),this.removeAt(s,r-s)),Ext.callback(i,n)},indexOfNextVisibleNode:function(e){for(var t;e.parentNode;){for(t=e.nextSibling;t&&!t.get("visible");t=t.nextSibling);if(t)return this.indexOf(t);e=e.parentNode}return this.getCount()},indexOfPreviousVisibleNode:function(e){var t;for(t=e;t&&!t.get("visible");t=t.previousSibling);if(t){if(t.isExpanded()&&t.lastChild)return this.indexOfPreviousVisibleNode(t.lastChild)}else t=e.parentNode;return this.indexOf(t)},filterNew:function(e){return!e.get("root")&&this.callParent([e])},filterRejects:function(e){return!e.get("root")&&this.callParent([e])},getNewRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterNew,this)},getRejectRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterRejects,this)},getUpdatedRecords:function(){return Ext.Array.filter(Ext.Object.getValues(this.byIdMap),this.filterUpdated)},beforeNodeRemove:function(e,t,i,n){Ext.isArray(t)||(t=[t]);var r,s,o=this,a=t.length,l=o.removedNodes;for(s=0;!r&&s<a;s++)t[s].get("visible")&&(r=t[s]);for(r?(n[0]=o.indexOf(t[0]),n[1]=o.indexOfNextVisibleNode(t[t.length-1])-n[0]):(n[0]=-1,n[1]=0),s=0;s<a;s++)t[s].cascade(function(e){o.unregisterNode(e,!0),l&&!i&&(e.phantom||e.erasing||o.loading||(e.removedFrom=o.indexOf(e),l.push(e),o.needsSync=!0))})},afterDrop:Ext.emptyFn,onNodeRemove:function(e,t,i,n){this.suspendAutoSync(),-1!==n[0]&&(this.removeIsMove=i,this.removeAt.apply(this,n),this.removeIsMove=!1),this.resumeAutoSync()},onNodeAppend:function(e,t,i){this.onNodeInsert(e,t,i)},onNodeInsert:function(e,t,i){var n,r,s,o,a,l,c=this,u=t.raw||t.data,d=c.removedNodes;e&&c.needsLocalFilter()&&c.doFilter(e),c.beginUpdate(),c.isVisible(t)&&(l=0!==i&&t.previousSibling?c.indexOfPreviousVisibleNode(t.previousSibling):c.indexOf(e),c.insert(l+1,t),!t.isLeaf()&&t.isExpanded()&&(t.isLoaded()?c.onNodeExpand(t,t.childNodes):c.fillCount||(t.set("expanded",!1),t.expand()))),Ext.Array.remove(d,t),c.needsSync=c.needsSync||t.phantom||t.dirty,t.isLeaf()||t.isLoaded()||c.lazyFill||(n=c.getProxy().getReader(),(a=(o=(s=(r=t.getProxy())?r.getReader():null)&&s.initialConfig.rootProperty?s:n).getRoot(u))&&c.fillNode(t,o.extractData(a,{model:t.childType,recordCreator:c.recordCreator}))),c.endUpdate()},registerNode:function(e,t){var i,n,r,s=this.byIdMap[e.id];if((this.byIdMap[e.id]=e).onRegisterTreeNode&&e!==s&&e.onRegisterTreeNode(this),e.onUnregisterTreeNode&&this.nodesToUnregister++,!0===t)for(n=(i=e.childNodes).length,r=0;r<n;r++)this.registerNode(i[r],!0)},unregisterNode:function(e,t){var i,n,r,s=this.byIdMap[e.id];if(delete this.byIdMap[e.id],!0===t)for(n=(i=e.childNodes).length,r=0;r<n;r++)this.unregisterNode(i[r],!0);e.onUnregisterTreeNode&&e===s&&(e.onUnregisterTreeNode(this),this.nodesToUnregister--)},onNodeSort:function(e,t){this.suspendAutoSync(),(-1!==this.indexOf(e)&&e.isExpanded()||e===this.getRoot()&&!this.getRootVisible())&&(Ext.suspendLayouts(),this.onNodeCollapse(e,t),this.onNodeExpand(e,t),Ext.resumeLayouts(!0)),this.resumeAutoSync(this.autoSync)},applyRoot:function(e){var t=this.getModel(),i=t.prototype.idProperty,n=this.getDefaultRootId();return e&&!e.isNode&&(e=Ext.apply({text:this.getDefaultRootText(),root:!0,isFirst:!0,isLast:!0,depth:0,index:0,parentId:null,allowDrag:!1},e),n&&void 0===e[i]&&(e[i]=n),e=new t(e)),e},updateRoot:function(e,t){var i,n,r=this,s=[],o=r.isConfiguring;if(r.getTrackRemoved(),r.suspendEvent("add","remove"),o&&r.suspendEvent("refresh","datachanged"),t&&t.isModel&&(n=r.getRootVisible()?[t]:t.childNodes,r.beforeNodeRemove(null,n,!1,s),t.set("root",!1),r.onNodeRemove(null,n,!1,s),t.fireEvent("remove",null,t,!1),t.fireEvent("rootchange",null),t.clearListeners(),t.store=t.treeStore=null,r.unregisterNode(t)),r.getData().clear(),e)if(!1===e.fireEventArgs("beforeappend",[null,e]))e=null;else{if(i=e.parentNode){if(!i.removeChild(e,!1,!1,i.getTreeStore()===r))return}else(i=e.getTreeStore())&&i!==r&&e===i.getRoot()&&i.setRoot(null);e.store=e.treeStore=r,e.set("root",!0),e.updateInfo(!0,{isFirst:!0,isLast:!0,depth:0,index:0,parentId:null}),r.registerNode(e,!0),e.fireEvent("append",null,e,!1),e.fireEvent("rootchange",e),r.onNodeAppend(null,e,0),e.phantom=!0}o||r.fireEvent("rootchange",e,t),e&&(r.getAutoLoad()||e.isExpanded())?e.isLoaded()?(r.onNodeExpand(e,e.childNodes),o||(r.fireEvent("datachanged",r),r.fireEvent("refresh",r))):(e.data.expanded=!1,e.expand(!1),!e.isLoaded||r.getProxy().isSynchronous||o||(r.fireEvent("datachanged",r),r.fireEvent("refresh",r))):o||(r.fireEvent("datachanged",r),r.fireEvent("refresh",r)),r.resumeEvent("add","remove"),o&&r.resumeEvent("refresh","datachanged")},doDestroy:function(){var t=this,e=t.getRoot();e&&t.nodesToUnregister&&e.cascade(function(e){e.onUnregisterTreeNode&&e.onUnregisterTreeNode(t)}),t.callParent()},each:function(t,i,e){var n,r=0,s=e;if(e&&"object"==typeof e&&(n=e.collapsed,s=e.filtered),!n)return this.callParent([t,i,s]);this.getRoot().cascade(function(e){if(!0===s||e.get("visible"))return t.call(i||e,e,r++)})},collect:function(t,e,i){var n,r,s,o={},a=[],l=e;return e&&"object"==typeof e&&(n=e.collapsed,i=e.filtered,l=e.allowNull),n||i?this.getRoot().cascade(function(e){if(!0!==i&&!e.get("visible")||(s=e.get(t),r=String(s),!l&&Ext.isEmpty(s)||o[r]||(o[r]=1,a.push(s))),!n&&!e.isExpanded())return!1}):a=this.callParent([t,l,i]),a},getNodeById:function(e){return this.byIdMap[e]||null},findNode:function(t,e,i,n,r){var s,o=null;return Ext.isEmpty(e,!1)?o:t===this.model.idProperty&&arguments.length<3?this.byIdMap[e]:(s=Ext.String.createRegex(e,i,n,r),Ext.Object.eachValue(this.byIdMap,function(e){if(e&&s.test(e.get(t)))return o=e,!1}),o)},load:function(e){var t=e&&e.node;if(t=t||this.getRoot()){if(!t.isLoading())return this.callParent([e])}else t=this.setRoot({expanded:!0,autoRoot:!0})},reload:function(e){var t=Ext.apply({},e,this.lastOptions);return t.node=this.getRoot(),this.load(t)},flushLoad:function(){var n,r,s,e,t,i,o=this,a=o.pendingLoadOptions,l=o.getClearOnLoad();if(o.clearLoadTask(),a)return e=(n=a.node||o.getRoot())&&n.isRoot(),r=a.callback,s=a.scope,a.params=a.params||{},n.data.expanded&&!e&&(n.data.loaded=!1,l&&(n.data.expanded=!1),a.callback=function(e,t,i){l||n.collapse(),n.expand(),Ext.callback(r,s,[e,t,i])}),a.id=n.getId(),o.setLoadOptions(a),o.getRemoteSort()&&a.sorters&&o.fireEvent("beforesort",o,a.sorters),a=Ext.apply({node:a.node||n,internalScope:o,internalCallback:o.onProxyLoad},a),o.lastOptions=Ext.apply({},a),a.isRootLoad=e,t=o.createOperation("read",a),!1!==o.fireEvent("beforeload",o,t)&&(o.loading=!0,e?(o.getClearRemovedOnLoad()&&(o.removedNodes.length=0),l&&(o.unregisterNode(n,!0),n.clear(!1,!0),o.registerNode(n),i=!0)):(o.loading&&(n.data.loaded=!1),o.getTrackRemoved()&&o.getClearRemovedOnLoad()&&o.clearRemoved(n),l&&n.removeAll(!1)),o.loading&&n&&n.set("loading",!0,{silent:!(o.contains(n)||n===o.getRoot())}),i&&(o.clearData(!0),o.getRootVisible()&&(o.suspendEvents(),o.add(n),o.resumeEvents())),t.execute()),o},onProxyLoad:function(e){var t=this,i=e.initialConfig,n=e.wasSuccessful(),r=e.getRecords(),s=i.node,o=i.isRootLoad,a=e.getScope()||t,l=[r,e,n];t.destroyed||(t.loading=!1,s.set("loading",!1),n&&(++t.loadCount,t.getClearOnLoad()||(r=t.cleanRecords(s,r)),t.getParentIdProperty()&&(r=t.treeify(s,r)),o&&t.suspendEvent("add","update"),r=t.fillNode(s,r)),Ext.callback(i.onChildNodesAvailable,a,l),o&&(t.resumeEvent("add","update"),t.callObservers("BeforePopulate"),t.fireEvent("datachanged",t),t.fireEvent("refresh",t),t.callObservers("AfterPopulate")),t.fireEvent("load",t,r,n,e,s))},clearRemoved:function(e){var t,i,n,r=this.removedNodes,s=e.getId(),o=r.length,a=o,l={},c=[],u={};if(e!==this.getRoot()){for(;a--;)u[(t=r[a]).getId()]=t;for(a=o;a--;){for(i=t=r[a];i&&i.getId()!==s;)n=i.get("parentId")||i.get("lastParentId"),i=i.parentNode||this.getNodeById(n)||u[n];i&&(l[t.getId()]=t)}for(a=0;a<o;a++)l[(t=r[a]).getId()]||c.push(t);this.removedNodes=c}else this.removedNodes.length=0},fillNode:function(e,t){var i=t?t.length:0;return 1==++this.bulkUpdate&&this.suspendEvent("datachanged"),i?(this.setupNodes(t),e.appendChild(t,void 0,!0)):1===this.bulkUpdate?e.set("loaded",!0):e.data.loaded=!0,--this.bulkUpdate||this.resumeEvent("datachanged"),t},setupNodes:function(e){var t,i,n,r=this,s=r.getSorters(),o=!1,a=e.length,l=r.sortOnLoad&&1<a&&!r.getRemoteSort()&&r.getFolderSort()||s.length,c=r.needsLocalFilter();for(c&&r.doFilter(e[0]),n=1;n<a;n++)t=e[n],i=e[n-1],c&&r.doFilter(t),o=t.data.index!==i.data.index;l?(r.needsIndexSort=!0,Ext.Array.sort(e,r.getSortFn()),r.needsIndexSort=!1):o&&Ext.Array.sort(e,r.sortByIndex)},beginFill:function(){this.fillCount++||(this.beginUpdate(),this.suspendEvent("add","update"),this.suspendAutoSync(),this.fillArray=[])},endFill:function(e,t){var i,n,r,s=this.fillArray;if(s.push(t),!--this.fillCount){for(this.resumeAutoSync(),this.resumeEvent("add","update"),i=0,n=s.length;i<n;i++)-1!==(r=this.indexOf(s[i][0]))&&this.fireEvent("add",this,s[i],r);this.fillArray=null,this.endUpdate()}},sortByIndex:function(e,t){return e.data.index-t.data.index},onIdChanged:function(e,t,i){var n,r=e.childNodes,s=r&&r.length;for(this.callParent(arguments),delete this.byIdMap[t],this.byIdMap[i]=e,n=0;n<s;n++)r[n].set("parentId",i)},treeify:function(e,t){var i,n,r,s,o,a,l=e.getId(),c=this.getParentIdProperty(),u=t.length,d=[],h={};for(i=0;i<u;i++)(n=t[i]).data.depth=1,h[n.id]=n;for(i=0;i<u;i++)!(r=(n=t[i]).data[c])&&0!==r||r===l?d.push(n):(h[r]||Ext.raise('Ext.data.TreeStore, Invalid parentId "'+r+'"'),(s=h[r]).$children=s.$children||[],s.$children.push(n),n.data.depth=s.data.depth+1);for(o in h)(a=(n=h[o]).$children)&&(delete n.$children,this.setupNodes(a),n.appendChild(a)),this.registerNode(n);return this.setupNodes(d),d},cleanRecords:function(e,t){for(var i,n={},r=e.childNodes,s=0,o=r.length,a=[];s<o;++s)n[r[s].getId()]=!0;for(s=0,o=t.length;s<o;++s)n[(i=t[s]).getId()]||a.push(i);return a},removeAll:function(){var e=this.getRoot(),t=this.getData().length;this.suspendEvents(),this.setRoot(null),this.resumeEvents(),this.callParent(),t&&(this.fireEvent("clear",this),this.fireEvent("rootchange",e,null))},doSort:function(e){var t=this;t.getRemoteSort()?t.load():(t.tree.sort(e,!0),t.fireEvent("datachanged",t),t.fireEvent("refresh",t)),t.fireEvent("sort",t,t.sorters.getRange())},filterVisible:function(e){return e.get("visible")},isVisible:function(e){for(var t=e.parentNode,i=e.data.visible,n=this.getRoot();i&&t;)i=t.data.expanded&&t.data.visible,t=t.parentNode;return i&&!(e===n&&!this.getRootVisible())},commitChanges:function(){var e=this.removedNodes;e&&(e.length=0),this.callParent()},getRootNode:function(){return this.getRoot()},setRootNode:function(e){return this.setRoot(e),this.getRoot()},privates:{fireChangeEvent:function(e){return!!this.byIdMap[e.id]},getRawRemovedRecords:function(){return this.removedNodes},createOperation:function(e,t){var i,n=t.node;return this.useModelProxy&&n&&n!==this.getRootNode()&&(i=n.getProxy()),i&&i!==this.getProxy()?i.createOperation(e,t):this.callParent([e,t])},recordCreator:function(e,t){return new t(e)},doFilter:function(e){this.filterNodes(e,this.getFilters().getFilterFn(),!0)},filterNodes:function(e,t,i){var n,r,s="bottomup"===this.filterer,o=t(e)&&i||e.isRoot()&&!this.getRootVisible(),a=e.childNodes,l=a&&a.length;if(l){for(n=0;n<l;++n)r=this.filterNodes(a[n],t,o||s)||r;s&&(o=r||o)}return e.set("visible",o,this._silentOptions),o},needsLocalFilter:function(){return!this.getRemoteFilter()&&this.getFilters().length},onRemoteFilterSet:function(e,t){this.getData().setFilters(null),e&&e.on("endupdate",this.onFilterEndUpdate,this)},onRemoteSortSet:function(e,t){this.getData().setSorters(null),e&&e.on("endupdate",this.onSorterEndUpdate,this)}},deprecated:{5:{properties:{tree:null}}}}),Ext.define("Ext.data.Validation",{extend:Ext.data.Model,isValidation:!0,syncGeneration:0,attach:function(e){this.record=e,this.isBase=e.self===Ext.data.Model,delete this.data.id},getValidation:function(){return null},isValid:function(){return this.syncGeneration!==this.record.generation&&this.refresh(),!this.dirty},refresh:function(e){if(!this.isBase){var t,i,n,r,s,o,a,l,c,u=this.data,d=this.record,h=d.fields,f=d.generation,g=d.data,p=d.validationSeparator,m=null;if(e||this.syncGeneration!==f){for(this.syncGeneration=f,s=0,o=h.length;s<o;++s)l=g[c=(r=h[s]).name],t=r.defaultInvalidMessage,n=0,c in u?i=u[c]:u[c]=i=!0,r.validate!==Ext.emptyFn&&!0!==(a=r.validate(l,p,null,d))&&(n=a||t),(n=n||!0)!==i&&((m=m||{})[c]=n);m&&this.set(m)}}}}),Ext.define("Ext.dom.Helper",function(){var t,i,l="afterbegin",c="afterend",u="beforebegin",d="beforeend",e=["BeforeBegin","previousSibling"],n=["AfterEnd","nextSibling"],h={beforebegin:e,afterend:n},f={beforebegin:e,afterend:n,afterbegin:["AfterBegin","firstChild"],beforeend:["BeforeEnd","lastChild"]};return{singleton:!0,alternateClassName:["Ext.DomHelper","Ext.core.DomHelper"],emptyTags:/^(?:br|frame|hr|img|input|link|meta|range|spacer|wbr|area|param|col)$/i,confRe:/^(?:tag|children|cn|html|tpl|tplData)$/i,endRe:/end/i,attributeTransform:{cls:"class",htmlFor:"for"},closeTags:{},detachedDiv:document.createElement("div"),decamelizeName:(t=/([a-z])([A-Z])/g,i={},function(e){return i[e]||(i[e]=e.replace(t,r))}),generateMarkup:function(e,t){var i,n,r,s,o,a=typeof e;if("string"==a||"number"==a)t.push(e);else if(Ext.isArray(e))for(s=0;s<e.length;s++)e[s]&&this.generateMarkup(e[s],t);else{for(i in r=e.tag||"div",t.push("<",r),e)e.hasOwnProperty(i)&&(void 0===(n=e[i])||this.confRe.test(i)||(n&&n.join&&(n=n.join(" ")),"object"==typeof n?(t.push(" ",i,'="'),this.generateStyles(n,t,!0).push('"')):t.push(" ",this.attributeTransform[i]||i,'="',n,'"')));this.emptyTags.test(r)?t.push("/>"):(t.push(">"),(n=e.tpl)&&n.applyOut(e.tplData,t),(n=e.html)&&t.push(n),(n=e.cn||e.children)&&this.generateMarkup(n,t),o=this.closeTags,t.push(o[r]||(o[r]="</"+r+">")))}return t},generateStyles:function(e,t,i){var n,r,s=t||[];for(n in e)e.hasOwnProperty(n)&&(r=e[n],n=this.decamelizeName(n),i&&Ext.String.hasHtmlCharacters(r)&&(r=Ext.String.htmlEncode(r)),s.push(n,":",r,";"));return t||s.join("")},markup:function(e){return"string"==typeof e?e:this.generateMarkup(e,[]).join("")},applyStyles:function(e,t){Ext.fly(e).applyStyles(t)},createContextualFragment:function(e){var t,i,n=this.detachedDiv,r=document.createDocumentFragment();for(n.innerHTML=e,t=(i=n.childNodes).length;t--;)r.appendChild(i[0]);return r},createDom:function(e){var t,i=this.markup(e),n=this.detachedDiv;return n.innerHTML=i,t=n.firstChild,Ext.supports.ChildContentClearedWhenSettingInnerHTML?t.cloneNode(!0):t},insertHtml:function(e,t,i){var n,r,s,o,a;if(e=e.toLowerCase(),t.insertAdjacentHTML)return this.ieInsertHtml&&(a=this.ieInsertHtml(e,t,i))?a:(n=f[e])?(t.insertAdjacentHTML(n[0],i),t[n[1]]):void Ext.raise({sourceClass:"Ext.DomHelper",sourceMethod:"insertHtml",htmlToInsert:i,targetElement:t,msg:'Illegal insertion point reached: "'+e+'"'});if(3===t.nodeType&&(e=(e=e===l?u:e)===d?c:e),r=Ext.supports.CreateContextualFragment?t.ownerDocument.createRange():void 0,o="setStart"+(this.endRe.test(e)?"After":"Before"),h[e])return a=r?(r[o](t),r.createContextualFragment(i)):this.createContextualFragment(i),t.parentNode.insertBefore(a,e===u?t:t.nextSibling),t[(e===u?"previous":"next")+"Sibling"];if(s=(e===l?"first":"last")+"Child",t.firstChild){if(r)try{r[o](t[s]),a=r.createContextualFragment(i)}catch(e){a=this.createContextualFragment(i)}else a=this.createContextualFragment(i);e===l?t.insertBefore(a,t.firstChild):t.appendChild(a)}else t.innerHTML=i;return t[s]},insertBefore:function(e,t,i){return this.doInsert(e,t,i,u)},insertAfter:function(e,t,i){return this.doInsert(e,t,i,c)},insertFirst:function(e,t,i){return this.doInsert(e,t,i,l)},append:function(e,t,i){return this.doInsert(e,t,i,d)},overwrite:function(e,t,i){var n;return e=Ext.getDom(e),t=this.markup(t),this.ieOverwrite&&(n=this.ieOverwrite(e,t)),n||(e.innerHTML=t,n=e.firstChild),i?Ext.get(n):n},doInsert:function(e,t,i,n){var r;return"innerHTML"in(e=e.dom||Ext.getDom(e))?r=this.insertHtml(n,e,this.markup(t)):(r=this.createDom(t,null),3===e.nodeType&&(n=(n=n===l?u:n)===d?c:n),h[n]?e.parentNode.insertBefore(r,n===u?e:e.nextSibling):e.firstChild&&n===l?e.insertBefore(r,e.firstChild):e.appendChild(r)),i?Ext.get(r):r},createTemplate:function(e){var t=this.markup(e);return new Ext.Template(t)},createHtml:function(e){return this.markup(e)}};function r(e,t,i){return t+"-"+i.toLowerCase()}}),Ext.define("Ext.data.summary.Base",{mixins:[Ext.mixin.Factoryable],alias:"data.summary.base",isAggregator:!0,factoryConfig:{defaultType:"base",cacheable:!0},constructor:function(e){var t=e&&e.calculate;t&&(delete(e=Ext.apply({},e)).calculate,this.calculate=t),this.initConfig(e)},extractValue:function(e,t,i){var n;return e&&(i&&(e=e[i]),n=e[t]),n}},function(){Ext.Factory.on("dataSummary",function(e,t){if("function"==typeof t)return e({calculate:t})})}),Ext.define("Ext.data.summary.Sum",{extend:Ext.data.summary.Base,alias:"data.summary.sum",calculate:function(e,t,i,n,r){var s,o,a,l=r-n;for(s=0;s<l;++s)a=this.extractValue(e[n+s],t,i),o=s?o+a:a;return o}}),Ext.define("Ext.data.summary.Average",{extend:Ext.data.summary.Sum,alias:"data.summary.average",calculate:function(e,t,i,n,r){var s,o=r-n;return 0<o&&(s=this.callParent([e,t,i,n,r])/o),s}}),Ext.define("Ext.data.summary.Count",{extend:Ext.data.summary.Base,alias:"data.summary.count",calculate:function(e,t,i,n,r){return r-n}}),Ext.define("Ext.data.summary.Max",{extend:Ext.data.summary.Base,alias:"data.summary.max",calculate:function(e,t,i,n,r){var s,o,a=this.extractValue(e[n],t,i);for(s=n;s<r;++s)a<(o=this.extractValue(e[s],t,i))&&(a=o);return a}}),Ext.define("Ext.data.summary.Min",{extend:Ext.data.summary.Base,alias:"data.summary.min",calculate:function(e,t,i,n,r){var s,o,a=this.extractValue(e[n],t,i);for(s=n;s<r;++s)(o=this.extractValue(e[s],t,i))<a&&(a=o);return a}}),Ext.define("Ext.data.summary.None",{extend:Ext.data.summary.Base,alias:"data.summary.none",config:{value:null},calculate:function(){return this.getValue()}}),Ext.define("Ext.data.validator.AbstractDate",{extend:Ext.data.validator.Validator,config:{message:null,format:""},applyFormat:function(e){return e=e||this.getDefaultFormat(),Ext.isArray(e)||(e=[e]),e},parse:function(e){if(Ext.isDate(e))return e;var t,i=this.getFormat(),n=i.length,r=null;for(t=0;t<n&&!r;++t)r=Ext.Date.parse(e,i[t],!0);return r},validate:function(e){return!!this.parse(e)||this.getMessage()}}),Ext.define("Ext.data.validator.Number",{extend:Ext.data.validator.Validator,alias:"data.validator.number",type:"number",config:{decimalSeparator:void 0,message:"Is not a valid number",thousandSeparator:void 0},constructor:function(e){this.callParent([e]),this.rebuildMatcher()},applyDecimalSeparator:function(e){return void 0===e?Ext.util.Format.decimalSeparator:e},updateDecimalSeparator:function(){this.rebuildMatcher()},applyThousandSeparator:function(e){return void 0===e?Ext.util.Format.thousandSeparator:e},updateThousandSeparator:function(){this.rebuildMatcher()},parse:function(e){var t=this.getDecimalSeparator(),i=Ext.Number;if("string"==typeof e){if(!this.matcher.test(e))return null;e=this.parseValue(e)}return t?i.parseFloat(e):i.parseInt(e)},validate:function(e){return null!==this.parse(e)||this.getMessage()},privates:{getMatcherText:function(e){var t=this.getThousandSeparator(),i=this.getDecimalSeparator(),n="(?:";return t&&(n+="(?:\\\\d{1,3}("+(t=Ext.String.escapeRegex(t))+"\\\\d{3})*)|"),n+="\\\\d*)",i&&(n+="(?:"+(i=Ext.String.escapeRegex(i))+"\\\\d*)?"),e||(n=this.getSignPart()+n),n},getSignPart:function(){return"(\\\\+|\\\\-)?"},parseValue:function(e){var t,i=this.thousandMatcher;return i&&(e=e.replace(i,"")),(t=this.getDecimalSeparator())&&"."!==t&&(e=e.replace(t,".")),e},rebuildMatcher:function(){var e;this.isConfiguring||(e=this.getThousandSeparator(),this.matcher=new RegExp("^"+this.getMatcherText()+"$"),e&&(this.thousandMatcher=e?new RegExp(Ext.String.escapeRegex(e),"g"):null))}}}),Ext.define("Ext.data.validator.Date",{extend:Ext.data.validator.AbstractDate,alias:"data.validator.date",type:"date",isDateValidator:!0,message:"Is not a valid date",privates:{getDefaultFormat:function(){return[Ext.Date.defaultFormat,"m/d/Y","n/j/Y","n/j/y","m/j/y","n/d/y","m/j/Y","n/d/Y","m-d-y","n-d-y","m-d-Y","mdy","mdY","Y-m-d"]}}}),Ext.define("Ext.util.TaskRunner",{fireIdleEvent:null,interval:10,timerId:null,constructor:function(e){"number"==typeof e?this.interval=e:e&&Ext.apply(this,e),this.tasks=[],this.timerFn=this.onTick.bind(this)},newTask:function(e){var t=new Ext.util.TaskRunner.Task(e);return t.manager=this,Ext.Timer.track&&(t.creator=(new Error).stack),t},start:function(e){var t=Ext.Date.now();return e.pending||(this.tasks.push(e),e.pending=!0),e.stopped=!1,e.taskStartTime=t,e.taskRunTime=!1!==e.fireOnStart?0:e.taskStartTime,e.taskRunCount=0,this.firing||(!1!==e.fireOnStart?this.startTimer(0,t):this.startTimer(e.interval,t)),e},stop:function(e,t){var i,n=this.tasks,r=0;for(e.stopped||(e.stopped=!0,e.pending=!1,e.onStop&&e.onStop.call(e.scope||e,e)),t&&Ext.Array.remove(n,e),i=0;!r&&i<n.length;i++)n[i].stopped||r++;return r||(Ext.undefer(this.timerId),this.timerId=null),e},stopAll:function(t){var i=this;Ext.each(this.tasks,function(e){i.stop(e,t)},null,!0)},firing:!1,nextExpires:1e99,onTick:function(){var e,t,i,n,r,s,o,a=this,l=a.tasks,c=a.fireIdleEvent,u=Ext.Date.now(),d=1e99,h=l.length,f=Ext.Timer.get(a.timerId);for(f&&(f.tasks=[]),a.timerId=null,a.firing=!0,i=0;i<h||i<(h=l.length);++i){if(!(s=(n=l[i]).stopped)){if((e=n.taskRunTime+n.interval)<=u){if(r=1,null===c&&!1!==n.fireIdleEvent&&(c=!0),n.taskRunCount++,o=n.args?n.addCountToArgs?n.args.concat([n.taskRunCount]):n.args:[n.taskRunCount],f&&f.tasks.push(n),a.disableTryCatch)r=n.run.apply(n.scope||n,o);else try{r=n.run.apply(n.scope||n,o)}catch(e){try{Ext.log({fn:n.run,prefix:"Error while running task",stack:e.stack,msg:e,level:"error"}),n.onError&&(r=n.onError.call(n.scope||n,n,e))}catch(e){}}n.taskRunTime=u,!1===r||n.taskRunCount===n.repeat?(a.stop(n),s=!0):(s=n.stopped,e=u+n.interval)}!s&&n.duration&&n.duration<=u-n.taskStartTime&&(a.stop(n),s=!0)}s?(n.pending=!1,t=t||l.slice(0,i)):(t&&t.push(n),e<d&&(d=e))}t&&(a.tasks=t),a.firing=!1,a.tasks.length&&a.startTimer(d-u,Ext.Date.now()),null===c&&(c=!1),Ext._suppressIdle=!c},startTimer:function(e,t){var i=this,n=t+e,r=i.timerId;if(r&&i.nextExpires-n>i.interval&&(r=Ext.undefer(r)),!r){e<i.interval&&(e=i.interval),i.timerId=Ext.defer(i.timerFn,e),i.nextExpires=n;var s=Ext.Timer.get(i.timerId);s&&(s.runner=i)}}},function(){var e=this.prototype;e.destroy=e.stopAll,this.Task=new Ext.Class({isTask:!0,stopped:!0,fireOnStart:!1,constructor:function(e){Ext.apply(this,e)},restart:function(e){void 0!==e&&(this.interval=e),this.manager.start(this)},start:function(e){this.stopped&&this.restart(e)},stop:function(e){this.manager.stop(this,e)},destroy:function(){this.stop(!0)}}),(e=this.Task.prototype).destroy=e.stop}),Ext.define("Ext.dom.Fly",{extend:Ext.dom.Element,alternateClassName:"Ext.dom.Element.Fly",validNodeTypes:{1:1,9:1,11:1},isFly:!0,constructor:function(e){this.dom=e,this.el=this},attach:function(e){var t;return e?(this.dom=Ext.getDom(e),Ext.cache[e.id]||(t=this.peekData())&&(t.isSynchronized=!1),this):this.detach()},detach:function(){return this.dom=null},addListener:function(){Ext.raise("Cannot use addListener() on Ext.dom.Fly instances. Please use Ext.get() to retrieve an Ext.dom.Element instance instead.")},removeListener:function(){Ext.raise("Cannot use removeListener() on Ext.dom.Fly instances. Please use Ext.get() to retrieve an Ext.dom.Element instance instead.")}},function(o){var e,a={};o.cache=a,Ext.fly=function(e,t){var i,n,r=null,s=Ext.fly;return t=t||s.caller&&(s.caller.$name||s.caller.name)||"_global",(e=Ext.getDom(e))&&(i=e.nodeType,(o.prototype.validNodeTypes[i]||!i&&e.window==e)&&((r=Ext.cache[e.id])&&r.dom===e||("constructor"===t&&(t="$constructor"),(r=a[t]||(a[t]=new o)).dom=e,(n=r.peekData())&&(n.isSynchronized=!1)))),r},Ext.getDetachedBody=function(){return e||(Ext.detachedBodyEl=e=new o(document.createElement("div")),e.isDetachedBody=!0),e}}),Ext.define("Ext.dom.CompositeElementLite",{alternateClassName:["Ext.CompositeElementLite"],isComposite:!0,isLite:!0,statics:{importElementMethods:function(){var e=Ext.dom.Element,i=this.prototype;Ext.Object.each(e.prototype,function(e,t){"function"!=typeof t||i[e]||(i[e]=function(){return this.invoke(e,arguments)})})}},constructor:function(e,t){t?this.elements=e||[]:(this.elements=[],this.add(e))},getElement:function(e){return(this._fly||(this._fly=new Ext.dom.Fly)).attach(e)},transformElement:function(e){return Ext.getDom(e)},getCount:function(){return this.elements.length},add:function(e,t){var i,n,r=this.elements;if(!e)return this;for("string"==typeof e?e=Ext.fly(t||document).query(e):e.isComposite?e=e.elements:Ext.isIterable(e)||(e=[e]),i=0,n=e.length;i<n;++i)r.push(this.transformElement(e[i]));return this},invoke:function(e,t){var i,n,r,s=this.elements,o=s.length;if(0!==r)for(i=(this.isLite?Ext.dom.Fly:Ext.dom.Element).prototype,r=0;r<o;r++)(n=s[r])&&i[e].apply(this.getElement(n),t);return this},item:function(e){var t=this.elements[e],i=null;return t&&(i=this.getElement(t)),i},slice:function(e,t){return Ext.Array.slice(this.elements,e,t)},each:function(e,t){var i,n,r=this.elements,s=r.length;for(i=0;i<s&&(!(n=r[i])||(n=this.getElement(n),!1!==e.call(t||n,n,this,i)));i++);return this},fill:function(e){return this.elements=[],this.add(e),this},insert:function(e,t){Ext.Array.insert(this.elements,e,t)},filter:function(e){for(var t,i=this.elements,n=i.length,r=[],s=0,o="function"==typeof e;s<n;s++)(t=i[s])&&(t=this.getElement(t),(o?!1!==e.call(t,t,this,s):t.is(e))&&r.push(this.transformElement(t)));return this.elements=r,this},indexOf:function(e){return Ext.Array.indexOf(this.elements,this.transformElement(e))},replaceElement:function(e,t,i){var n,r=isNaN(e)?this.indexOf(e):e;return-1<r&&(t=Ext.getDom(t),i&&((n=this.elements[r]).parentNode.insertBefore(t,n),Ext.removeNode(n)),Ext.Array.splice(this.elements,r,1,t)),this},clear:function(e){var t=this.elements,i=t.length-1;if(e)for(;0<=i;i--)Ext.removeNode(t[i]);this.elements=[]},addElements:function(e,t){if(!e)return this;"string"==typeof e&&(e=Ext.dom.Element.selectorFunction(e,t));var i,n=this.elements,r=e.length;for(i=0;i<r;i++)n.push(Ext.get(e[i]));return this},first:function(){return this.item(0)},last:function(){return this.item(this.getCount()-1)},contains:function(e){return-1!==this.indexOf(e)},removeElement:function(e,t){var i,n,r,s,o=this.elements;for(r=0,s=(e=[].concat(e)).length;r<s;r++)(n=o[i=e[r]]||o[i=this.indexOf(i)])&&(t&&(n.dom?n.destroy():Ext.removeNode(n)),Ext.Array.erase(o,i,1));return this},destroy:function(){this.invoke("destroy",arguments),this.callParent()}},function(e){var t=e.prototype;e.importElementMethods(),t.on=t.addListener}),Ext.define("Ext.dom.CompositeElement",{alternateClassName:"Ext.CompositeElement",extend:Ext.dom.CompositeElementLite,isLite:!1,getElement:function(e){return e},transformElement:function(e){return Ext.get(e)}}),Ext.define("Ext.dom.GarbageCollector",{singleton:!0,interval:3e4,constructor:function(){this.lastTime=Ext.now(),this.onTick=this.onTick.bind(this),this.onTick.$skipTimerCheck=!0,this.resume()},collect:function(){var t,e,i,n,r,s,o=Ext.cache,a=[];for(t in o)if(o.hasOwnProperty(t)&&!(i=o[t]).skipGarbageCollection){(e=i.dom)||Ext.raise("Missing DOM node in element garbage collection: "+t);try{r=Ext.isGarbage(e)}catch(e){delete o[t],a.push("#"+i.id);continue}r&&(r=!1,i&&i.dom&&(s=i.dom.tagName,i.collect(),a.push((s||"")+"#"+i.id)))}if(Ext.isIE9m){for(t in n={},o)o.hasOwnProperty(t)&&(n[t]=o[t]);Ext.cache=Ext.dom.Element.cache=n}return this.lastTime=Ext.now(),a},onTick:function(){this.timerId=null,Ext.enableGarbageCollector&&this.collect(),this.resume()},pause:function(){var e=this.timerId;e&&(this.timerId=null,Ext.undefer(e))},resume:function(){var e=this.lastTime;Ext.enableGarbageCollector&&Ext.now()-e>this.interval&&this.collect(),this.timerId||(this.timerId=Ext.defer(this.onTick,this.interval))}}),Ext.define("Ext.dom.TouchAction",{singleton:!0,lastTouchStartTime:0,minMoveDistance:8,spaceRe:/\\s+/,preventSingle:null,preventMulti:null,disabledOverflowDom:null,panXCls:Ext.baseCSSPrefix+"touch-action-pan-x",panYCls:Ext.baseCSSPrefix+"touch-action-pan-y",cssValues:["none","pan-x","pan-y","pan-x pan-y","pinch-zoom","pan-x pinch-zoom","pan-y pinch-zoom","pan-x pan-y pinch-zoom","double-tap-zoom","pan-x double-tap-zoom","pan-y double-tap-zoom","pan-x pan-y double-tap-zoom","pinch-zoom double-tap-zoom","pan-x pinch-zoom double-tap-zoom","pan-y pinch-zoom double-tap-zoom",""],objectValues:[{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1},{panX:!0,panY:!1,pinchZoom:!1,doubleTapZoom:!1},{panX:!1,panY:!0,pinchZoom:!1,doubleTapZoom:!1},{panX:!0,panY:!0,pinchZoom:!1,doubleTapZoom:!1},{panX:!1,panY:!1,pinchZoom:!0,doubleTapZoom:!1},{panX:!0,panY:!1,pinchZoom:!0,doubleTapZoom:!1},{panX:!1,panY:!0,pinchZoom:!0,doubleTapZoom:!1},{panX:!0,panY:!0,pinchZoom:!0,doubleTapZoom:!1},{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!0},{panX:!0,panY:!1,pinchZoom:!1,doubleTapZoom:!0},{panX:!1,panY:!0,pinchZoom:!1,doubleTapZoom:!0},{panX:!0,panY:!0,pinchZoom:!1,doubleTapZoom:!0},{panX:!1,panY:!1,pinchZoom:!0,doubleTapZoom:!0},{panX:!0,panY:!1,pinchZoom:!0,doubleTapZoom:!0},{panX:!1,panY:!0,pinchZoom:!0,doubleTapZoom:!0},{panX:!0,panY:!0,pinchZoom:!0,doubleTapZoom:!0}],attributeName:"data-extTouchAction",constructor:function(){var e=Ext.supports;if(e.TouchAction?this.cssProp="touch-action":e.MSPointerEvents&&(this.cssProp="-ms-touch-action"),e.TouchEvents&&(Ext.getWin().on({touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",scope:this,delegated:!1,translate:!1,capture:!0,priority:5e3}),Ext.on({scroll:"onScroll",scope:this,destroyable:!0})),Ext.isFunction(Object.freeze)){var t,i,n=this.objectValues;for(t=0,i=n.length;t<i;t++)Object.freeze(n[t])}},containsTargets:function(e,t){var i,n,r=!0,s=t.browserEvent,o="touchend"===t.type?s.changedTouches:s.touches;for(i=0,n=o.length;i<n;i++)if(!e.contains(o[i].target)){r=!1;break}return r},disableOverflow:function(e,t){var i,n,r=t?"overflow-y":"overflow-x";if(!this.disabledOverflowDom&&!Ext.isiOS&&!Ext.scrollbar.width())for(this.disabledOverflowDom=e,n=t?this.panXCls:this.panYCls;e;)"auto"!==(i=Ext.fly(e).getStyle(r))&&"scroll"!==i||Ext.fly(e).addCls(n),e=e.parentNode},get:function(e){var t=e.getAttribute(this.attributeName),i=null;return null!=t&&(i=this.objectValues[t]),i},getFlags:function(e){var t;return"number"==typeof e?t=e:(t=0,!1!==e.panX&&(t|=1),!1!==e.panY&&(t|=2),!1!==e.pinchZoom&&(t|=4),!1!==e.doubleTapZoom&&(t|=8)),t},isScrollable:function(e,t,i){var n=Ext.fly(e).getStyle(t?"overflow-y":"overflow-x"),r="auto"===n||"scroll"===n;return r=r&&(t?i?e.scrollTop+e.clientHeight<e.scrollHeight:0<e.scrollTop:i?e.scrollLeft+e.clientWidth<e.scrollWidth:0<e.scrollLeft)},lookupFlags:function(e){return parseInt(e.getAttribute&&e.getAttribute(this.attributeName)||15,10)},onScroll:function(){this.scrollOccurred=!0,this.isDoubleTap=!1},onTouchEnd:function(e){var t,i=e.target;if(0===e.browserEvent.touches.length){if(this.isDoubleTap)for(;i;)null!=(t=this.lookupFlags(i))&&(8&t||e.preventDefault()),i=i.parentNode;this.isDoubleTap=!1,this.preventSingle=null,this.preventMulti=null,this.resetOverflow()}},onTouchMove:function(e){var t,i,n,r,s,o,a,l,c,u,d,h,f,g=this,p=null,m=e.target;if(h=g.preventSingle,f=g.preventMulti,(1!==(i=e.browserEvent.touches.length)||!1!==h)&&!1!==f){if(1<i&&!0===f||1===i&&!0===h)p=!0;else for(1===i&&(s=e.getPoint(),o=g.startPoint,l=Ext.Element.getViewportScale(),c=s.getDistanceTo(g.startPoint)*l,u=s.x-o.x,d=s.y-o.y,a=Math.abs(d)>=Math.abs(u));m&&1===m.nodeType;){if(0&(t=g.lookupFlags(m)))p=!0;else if(1===i){if(r=!!(2&t),(n=!!(1&t))&&r?p=!1:n||r?c>=g.minMoveDistance&&(p=!!(n&&a||r&&!a)):p=!0,!p&&g.isScrollable(m,a,(a?d:u)<0))break}else p=!!g.containsTargets(m,e)&&!(4&t);if(p)break;m=m.parentNode}1===i?g.preventSingle=p:1<i&&(g.preventMulti=p),p&&e.preventDefault()}},onTouchStart:function(e){var t,i,n,r;if(1===e.browserEvent.touches.length)for(t=e.time,!this.scrollOccurred&&t-this.lastTouchStartTime<=500&&(this.isDoubleTap=!0),this.lastTouchStartTime=t,this.scrollOccurred=!1,this.startPoint=e.getPoint(),n=e.target;n;){if(null!=(i=this.lookupFlags(n))&&(r=!!(1&i))!=!!(2&i)){this.disableOverflow(n,r);break}n=n.parentNode}else this.isDoubleTap=!1},resetOverflow:function(){for(var e=this.disabledOverflowDom;e;)Ext.fly(e).removeCls([this.panXCls,this.panYCls]),e=e.parentNode;this.disabledOverflowDom=null},set:function(e,t){var i=this.cssProp,n=this.getFlags(t),r=n&Ext.supports.TouchAction,s=this.attributeName;i&&Ext.fly(e).setStyle(i,this.cssValues[r]),15===n?e.removeAttribute(s):e.setAttribute(s,n)}}),Ext.define("Ext.drag.Constraint",{alias:"drag.constraint.base",mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:"base",type:"drag.constraint"},config:{element:null,horizontal:null,region:null,snap:null,source:null,vertical:null,x:null,y:null},constructor:function(e){this.initConfig(e)},applyElement:function(e){return e&&"boolean"!=typeof e&&(e=Ext.get(e)),e||null},applySnap:function(e){return"number"==typeof e&&(e={x:e,y:e}),e},constrain:function(e,t){var i,n,r=e[0],s=e[1],o=this.constrainInfo,a=o.initial,l=o.x,c=o.y,u=o.snap;return o.vertical?r=a.x:(u&&u.x&&(r=u.xFn?u.x.call(this,t,r):this.doSnap(r,a.x,u.x)),l&&(null!==(i=l[0])&&r<i&&(r=i),null!==(n=l[1])&&n<r&&(r=n))),o.horizontal?s=a.y:(u&&u.y&&(s=u.yFn?u.y.call(this,t,s):this.doSnap(s,a.y,u.y)),c&&(null!==(i=c[0])&&s<i&&(s=i),null!==(n=c[1])&&n<s&&(s=n))),[r,s]},destroy:function(){this.setSource(null),this.setElement(null),this.callParent()},privates:{constrainValue:function(e,t,i){var n=null,r=null===e,s=null===t;return r&&s||(n=r?t:s?e:i(e,t)),n},doSnap:function(e,t,i){if(!i)return e;var n=(e-t)/i,r=Math.floor(n);return t+i*(n=n-r<=.5?r:r+1)},onDragStart:function(e){var t,i,n=this,r=n.getSnap(),s=!!n.getVertical(),o=!!n.getHorizontal(),a=n.getElement(),l=n.getRegion(),c=e.proxy,u=c.element,d=n.getX(),h=n.getY(),f=null,g=null,p=null,m=null,x=null,y=null,v=null,E=null;a&&("boolean"==typeof a&&(a=n.getSource().getElement().parent()),l=e.local?"relative"===(t=a.getStyle("position"))||"absolute"===t?(i=a.getSize(),new Ext.util.Region(0,i.width,i.height,0)):a.getRegion(!0,!0):a.getRegion(!0)),l&&(s||(x=l.left,y=l.right-(u?c.width:0)),o||(v=l.top,E=l.bottom-(u?c.height:0))),s||!l&&!d||(d&&(f=d[0],g=d[1]),null===f&&null===g&&null===x&&null===y||(d=[f=n.constrainValue(f,x,Math.max),g=n.constrainValue(g,y,Math.min)])),o||!l&&!h||(h&&(p=h[0],m=h[1]),null===p&&null===m&&null===v&&null===E||(h=[p=n.constrainValue(p,v,Math.max),m=n.constrainValue(m,E,Math.min)])),r=r&&{x:r.x,xFn:"function"==typeof r.x,y:r.y,yFn:"function"==typeof r.y},n.constrainInfo={initial:e.element.initial,vertical:s,horizontal:o,x:d,y:h,snap:r}}}}),Ext.define("Ext.drag.Info",{constructor:function(e,t){if(e){var i,n,r,s,o,a,l,c,u=this,d=e.getLocal();u.source=e,u.local=d,u.getEventXY(t),l=t.getXY(),c=(i=e.getElement()).getXY(),s=(o=d?i.getLocalXY():c)[0],a=o[1],u.initialEvent=t,u.eventTarget=t.target,u.cursor={current:{x:s,y:a},delta:{x:0,y:0},initial:{x:l[0],y:l[1]},offset:{x:l[0]-c[0],y:l[1]-c[1]}},u.element={current:{x:s,y:a},delta:{x:0,y:0},initial:{x:s,y:a}},u.proxy={instance:e.getProxy(),current:{x:s,y:a},delta:{x:0,y:0},initial:{x:s,y:a},element:i,isUnderCursor:!1,isElement:!0},u.types=[],u.data={},e.describe(u),n=(r=u.proxy).instance.setupElement(u),r.isElement=n===e.getElement(),(r.element=n)&&(r.width=n.getWidth(),r.height=n.getHeight()),r.isElement&&((i=u.element).current=r.current,i.delta=r.delta),u.needsCursorCheck=r.element&&e.manager&&e.manager.pointerBug}},cursor:null,element:null,eventTarget:null,files:null,isNative:!1,proxy:null,source:null,target:null,types:null,valid:!1,clearData:function(e){Ext.Array.remove(this.types,e),delete this.data[e]},clone:function(){var e=new Ext.drag.Info;return e.cursor=Ext.merge({},this.cursor),e.data=Ext.apply({},this.data),e.element=Ext.merge({},this.element),e.eventTarget=this.eventTarget,e.proxy=Ext.merge({},this.proxy),e.source=this.source,e.target=this.target,e.types=Ext.Array.clone(this.types),e.valid=this.valid,e},getData:function(e){var t,i=this.data,n=this.dataTransfer;return n?t=n.getData(e):(this.finalized||Ext.raise("Unable to call getData until the drop is complete"),"function"==typeof(t=i[e])&&(i[e]=t=t.call(this.source,this)),t||0===t||(t="")),Ext.Promise.resolve(t)},setData:function(e,t){Ext.Array.include(this.types,e),this.data[e]=t},destroy:function(){var e=this;e.eventTarget=e.data=e.proxy=e.targetMap=e.targetMap=e.types=e.elementMap=e.possibleTargets=e.target=null,e.callParent()},privates:{data:null,dataTransfer:null,elementMap:null,possibleTargets:null,targetMap:null,copyNativeData:function(e,t){var i=t.browserEvent.dataTransfer;this.target=e,this.dataTransfer=i,this.files=i.files},finalize:function(){var e=this.target;this.finalized=!0,e&&(e.info=null,e.handleDrop(this))},getAlignXY:function(e,t){var i=this.source,n=this.cursor.offset,r=i.getProxy(),s=this.proxy.element,o=i.getConstrain(),a=[e,t];return s&&(this.proxy.isElement?(a[0]-=n.x,a[1]-=n.y):a=r.adjustCursorOffset(this,a),o&&(a=o.constrain(a,this))),a},getEventXY:function(e){var t=e.getXY(),i=this.source;return this.local&&(t=i.convertToLocalXY(t)),t},onNativeDragEnter:function(e,t){this.valid=e.accepts(this),(e.info=this).copyNativeData(e,t)},onNativeDragLeave:function(e,t){this.target===e&&(e.info=null,this.valid=!1,this.target=this.dataTransfer=this.files=null)},onNativeDragMove:function(e,t){this.copyNativeData(e,t)},onNativeDrop:function(e,t){this.copyNativeData(e,t),e.info=null},setActive:function(e){var t=this,i=t.source,n=t.target,r=n!==e;n&&r&&(n.handleDragLeave(t),n.info=null),(t.target=e)?(r&&(t.valid=!!t.possibleTargets[e.getId()]&&!1!==e.accepts(t),e.handleDragEnter(t),e.info=t),e.handleDragMove(t)):t.valid=!1,r&&i.getProxy().update(t)},update:function(e,t){var i=this.getEventXY(e),n=i[0],r=i[1],s=this.getAlignXY(n,r),o=s[0],a=s[1],l=this.proxy,c=this.cursor,u=c.current,d=c.delta,h=c.initial,f=l.instance;u.x=n,u.y=r,d.x=n-h.x,d.y=r-h.y,u=l.current,d=l.delta,h=l.initial,u.x=o,u.y=a,d.x=o-h.x,d.y=a-h.y,this.needsCursorCheck&&(l.isUnderCursor=!(n<o||r<a||n>l.width+o||r>l.height+a)),!t&&f&&f.setXY(this,s)}}}),Ext.define("Ext.drag.Item",{mixins:[Ext.mixin.Observable,Ext.mixin.Identifiable],config:{autoDestroy:!0,component:null,element:null,groups:null},constructor:function(e){this.mixins.observable.constructor.call(this,e)},isDisabled:function(){return this.disabled},disable:function(){this.disabled=!0},enable:function(){this.disabled=!1},updateComponent:function(e,t){var i;if(e)i=e.el;else{if(!t||t.el!==this.getElement())return;i=null}this.setElement(i)},applyElement:function(e){return e?Ext.get(e):null},updateElement:function(){this.setupListeners()},applyGroups:function(e){return"string"==typeof e&&(e=[e]),e},destroy:function(){var e=this.getElement();this.destroying=!0,this.setElement(null),e&&this.getAutoDestroy()&&e.destroy(),this.callParent()},privates:{disabled:!1,convertToLocalXY:function(e){var t=this.getComponent();return e=t?t.convertToLocalXY(e):[(e=this.getElement().translateXY(e[0],e[1])).x,e.y]},getElListeners:Ext.privateFn,setupListeners:function(e){var t=this.elListeners;e=e||this.getElement(),t&&(t.destroy(),this.elListeners=null),e&&(this.elListeners=e.on(Ext.apply({scope:this,destroyable:!0},this.getElListeners())))}}}),Ext.define("Ext.drag.Manager",{singleton:!0,dragCls:Ext.baseCSSPrefix+"drag-body",pointerBug:Ext.isTouch||!Ext.supports.CSSPointerEvents||Ext.isIE10m||Ext.isOpera,constructor:function(){this.targets={},this.nativeTargets=[],Ext.onReady(this.init,this)},init:function(){Ext.getDoc().on({scope:this,dragenter:{capture:!0,fn:"onNativeDragEnter"},dragleave:"onNativeDragLeave",dragover:"onNativeDragOver",drop:"onNativeDrop"})},destroy:function(){var e,t=this.targets;for(e in this.destroying=!0,t)t[e].destroy();this.targets=null,this.callParent()},privates:{elementFromPoint:function(e,t){return Ext.rootInheritedState.rtl&&(e=Ext.Element.getViewportWidth()-e),Ext.dom.Element.fromPagePoint(e,t,!0)},getAtPoint:function(e){var t,i,n=e.cursor.current,r=e.elementMap,s=e.proxy.isUnderCursor,o=this.pointerBug&&s?e.proxy.element.dom:null;for(o&&(o.style.visibility="hidden"),i=this.elementFromPoint(n.x,n.y),o&&(o.style.visibility="visible");i;){if(t=r[i.id])return t;i=i.parentNode}return null},getNativeDragInfo:function(e){var t=this.nativeDragInfo;return t||(this.nativeDragInfo=t=new Ext.drag.Info,t.isNative=!0),t},onDragCancel:function(){Ext.getBody().removeCls(this.dragCls)},onDragEnd:function(e,t){e.finalize(),Ext.getBody().removeCls(this.dragCls)},onDragMove:function(e,t){this.processDrag(e)},onDragStart:function(e,t){var i,n,r,s,o,a,l,c=e.source,u=this.targets,d=c.getGroups(),h={},f={},g={};for(i in g={},f={},d&&(s=Ext.Array.toMap(d)),u){if(!(n=u[i]).isDisabled()){if(o=!1,r=n.getGroups(),s||r){if(s&&r)for(l=0,a=r.length;l<a;++l)if(s[r[l]]){o=!0;break}}else o=!0;o&&(f[i]=n)}g[(h[i]=n).getElement().id]=n}e.possibleTargets=f,e.targetMap=h,e.elementMap=g,Ext.getBody().addCls(this.dragCls),this.processDrag(e)},onNativeDragEnter:function(e){var t=this.nativeTargets,i=e.target;e.preventDefault(),t[t.length-1]!==i&&t.push(i)},onNativeDragLeave:function(e){var t=this.nativeTargets;Ext.Array.remove(t,e.target),0===t.length&&(this.nativeDragInfo=null)},onNativeDragOver:function(e){e.preventDefault()},onNativeDrop:function(e){e.preventDefault(),this.nativeTargets.length=0,this.nativeDragInfo=null},processDrag:function(e){e.setActive(this.getAtPoint(e))},register:function(e){this.targets[e.getId()]=e},unregister:function(e){var t;this.destroying||(t=e.getId(),this.targets[t]=null,delete this.targets[t])}}}),Ext.define("Ext.drag.Source",{extend:Ext.drag.Item,defaultIdPrefix:"source-",config:{activateOnLongPress:!1,activeCls:null,constrain:null,handle:null,local:null,proxy:"original",revert:!1},dragging:!1,constructor:function(e){var t=e&&e.describe;t&&(this.describe=t,delete(e=Ext.apply({},e)).describe),this.callParent([e]),this.manager=Ext.drag.Manager},describe:Ext.emptyFn,isDragging:function(){return this.dragging},beforeDragStart:Ext.emptyFn,onDragCancel:Ext.emptyFn,onDragEnd:Ext.emptyFn,onDragMove:Ext.emptyFn,onDragStart:Ext.emptyFn,applyActivateOnLongPress:function(e){return"string"==typeof e&&(e=[e]),e},updateActivateOnLongPress:function(e){this.isConfiguring||this.setupListeners()},updateActiveCls:function(e,t){this.dragging&&this.getElement().replaceCls(t,e)},applyConstrain:function(e){return e&&!e.$isClass&&(e.isRegion?e={region:e}:!e.isElement&&Ext.isObject(e)||(e={element:e}),e=Ext.apply({source:this},e),e=Ext.Factory.dragConstraint(e)),e},updateElement:function(e,t){t&&!t.destroyed&&t.un("dragstart","stopNativeDrag",this),e&&!this.getHandle()&&(e.setTouchAction({panX:!1,panY:!1}),e.on("dragstart","stopNativeDrag",this,{translate:!1,delegated:!1})),this.callParent([e,t])},updateHandle:function(){this.isConfiguring||this.setupListeners()},applyProxy:function(e){return e=e&&Ext.Factory.dragproxy(e)},updateProxy:function(e,t){t&&t.destroy(),e&&e.setSource(this)},resolveListenerScope:function(){var e=this.ownerCmp,t=arguments;return e?e.resolveListenerScope.apply(e,t):this.callParent(t)},destroy:function(){this.manager=this.initialEvent=null,this.setConstrain(null),this.setProxy(null),this.callParent()},privates:{draggingCls:Ext.baseCSSPrefix+"drag-dragging",info:null,revertCls:Ext.baseCSSPrefix+"drag-revert",canActivateOnLongPress:function(e){var t=this.getActivateOnLongPress();return!(!t||!0!==t&&!Ext.Array.contains(t,e.pointerType))},dragCleanup:function(e){var t=this.getActiveCls(),i=this.getProxy(),n=this.getElement(),r=e?e.proxy.element:null;t&&n.removeCls(t),r&&r.removeCls(this.draggingCls),i.cleanup(e),this.dragging=!1,this.initialEvent=this.info=null},getElListeners:function(){var e=this.getHandle(),t={touchstart:"handleTouchStart",dragstart:"handleDragStart",drag:"handleDragMove",dragend:"handleDragEnd",dragcancel:"handleDragCancel"};return e&&(t.dragstart={fn:t.dragstart,delegate:e}),this.getActivateOnLongPress()&&(t.longpress="handleLongPress"),t},handleDragCancel:function(e){var t=this.info,i=this.manager;i&&i.onDragCancel(t,e),this.onDragCancel(t),this.hasListeners.dragcancel&&this.fireEvent("dragcancel",this,t,e),Ext.fireEvent("dragcancel",this,t,e),this.dragCleanup(t)},handleDragEnd:function(e){if(this.dragging){var t=this,i=t.manager,n=t.getRevert(),r=t.info,s=r.proxy;r.update(e),i&&i.onDragEnd(r,e),t.onDragEnd(r),t.hasListeners.dragend&&t.fireEvent("dragend",t,r,e),Ext.fireEvent("dragend",t,r,e),s=s.instance,n&&s?s.dragRevert(r,t.revertCls,n,function(){t.dragCleanup(r)}):t.dragCleanup(r)}},handleDragMove:function(e){var t=this.info,i=this.manager;this.dragging&&(e.stopPropagation(),e.claimGesture(),t.update(e),i&&i.onDragMove(t,e),this.onDragMove(t),this.hasListeners.dragmove&&this.fireEvent("dragmove",this,t,e))},handleDragStart:function(e){var t,i,n,r,s,o=this,a=o.hasListeners,l=o.manager,c=o.getConstrain(),u=o.initialEvent;return!o.preventStart(e)&&(a.initdragconstraints&&o.fireEvent("initdragconstraints",o,e),o.info=n=new Ext.drag.Info(o,u),o.setup(n),c&&c.onDragStart(n),n.update(e,!0),!(r=!1===o.beforeDragStart(n))&&a.beforedragstart&&(r=!1===o.fireEvent("beforedragstart",o,n,e)),r?(o.dragCleanup(),!1):(e.claimGesture(),o.dragging=!0,i=o.getActiveCls(),t=o.getElement(),i&&t.addCls(i),(s=n.proxy.element)&&s.addCls(o.draggingCls),n.update(e),l&&l.onDragStart(n,e),o.onDragStart(n),a.dragstart&&o.fireEvent("dragstart",o,n,e),void Ext.fireEvent("dragstart",o,n,e)))},handleLongPress:function(e){!this.isDisabled()&&this.canActivateOnLongPress(e)&&(this.initialEvent=e).startDrag()},handleTouchStart:function(e){this.isDisabled()||(this.initialEvent=e)},preventStart:function(e){return this.isDisabled()||!e.longpress&&this.canActivateOnLongPress(e)},setup:Ext.privateFn,stopNativeDrag:function(e){e.preventDefault()}}}),Ext.define("Ext.drag.Target",{extend:Ext.drag.Item,defaultIdPrefix:"target-",config:{invalidCls:"",validCls:""},constructor:function(e){var t=e&&e.accepts;t&&(this.accepts=t,delete(e=Ext.apply({},e)).accepts),this.callParent([e]),Ext.drag.Manager.register(this)},accepts:function(e){return!0},disable:function(){this.callParent(),this.setupListeners(null)},enable:function(){this.callParent(),this.setupListeners()},beforeDrop:Ext.emptyFn,onDrop:Ext.emptyFn,onDragEnter:Ext.emptyFn,onDragLeave:Ext.emptyFn,onDragMove:Ext.emptyFn,updateInvalidCls:function(e,t){var i=this.info;this.doUpdateCls(i&&!i.valid,e,t)},updateValidCls:function(e,t){var i=this.info;this.doUpdateCls(i&&i.valid,e,t)},destroy:function(){Ext.drag.Manager.unregister(this),this.callParent()},privates:{doUpdateCls:function(e,t,i){var n=this.getElement();i&&n.removeCls(i),t&&e&&n.addCls(t)},getElListeners:function(){return{dragenter:"handleNativeDragEnter",dragleave:"handleNativeDragLeave",dragover:"handleNativeDragMove",drop:"handleNativeDrop"}},handleDrop:function(e){var t=this,i=t.hasListeners,n=e.valid;return t.getElement().removeCls([t.getInvalidCls(),t.getValidCls()]),!(!n||!1===t.beforeDrop(e))&&((!i.beforedrop||!1!==t.fireEvent("beforedrop",t,e))&&(t.onDrop(e),void(i.drop&&t.fireEvent("drop",t,e))))},handleDragEnter:function(e){var t=e.valid?this.getValidCls():this.getInvalidCls();t&&this.getElement().addCls(t),this.onDragEnter(e),this.hasListeners.dragenter&&this.fireEvent("dragenter",this,e)},handleDragLeave:function(e){this.getElement().removeCls([this.getInvalidCls(),this.getValidCls()]),this.onDragLeave(e),this.hasListeners.dragleave&&this.fireEvent("dragleave",this,e)},handleDragMove:function(e){this.onDragMove(e),this.hasListeners.dragmove&&this.fireEvent("dragmove",this,e)},handleNativeDragEnter:function(e){var t=Ext.drag.Manager.getNativeDragInfo(e);t.onNativeDragEnter(this,e),this.hasListeners.dragenter&&this.fireEvent("dragenter",this,t)},handleNativeDragLeave:function(e){var t=Ext.drag.Manager.getNativeDragInfo(e);t.onNativeDragLeave(this,e),this.hasListeners.dragleave&&this.fireEvent("dragleave",this,t)},handleNativeDragMove:function(e){var t=Ext.drag.Manager.getNativeDragInfo(e);t.onNativeDragMove(this,e),this.hasListeners.dragmove&&this.fireEvent("dragmove",this,t)},handleNativeDrop:function(e){var t=this.hasListeners,i=Ext.drag.Manager.getNativeDragInfo(e),n=i.valid;if(i.onNativeDrop(this,e),n){if(t.beforedrop&&!1===this.fireEvent("beforedrop",this,i))return;t.drop&&this.fireEvent("drop",this,i)}}}}),Ext.define("Ext.drag.proxy.None",{mixins:[Ext.mixin.Factoryable],alias:"drag.proxy.none",factoryConfig:{aliasPrefix:"drag.proxy.",type:"dragproxy"},config:{source:null},constructor:function(e){var t=e&&e.getElement;t&&(this.getElement=t,delete(e=Ext.apply({},e)).getElement),this.initConfig(e)},cleanup:Ext.emptyFn,dragRevert:function(e,t,i,n){var r=this.getPositionable(e),s=e.proxy.initial;r.addCls(t),r.setXY([s.x,s.y],Ext.apply({callback:function(){r.removeCls(t),n()}},i))},getElement:function(){return null},getPositionable:function(){return this.element},setXY:function(e,t,i){var n=this.getPositionable(e);n&&n.setXY(t,i)},update:Ext.emptyFn,privates:{setupElement:function(e){return this.element=this.getElement(e)},adjustCursorOffset:function(e,t){return t}}}),Ext.define("Ext.drag.proxy.Original",{extend:Ext.drag.proxy.None,alias:"drag.proxy.original",getElement:function(e){return e.source.getElement()},getPositionable:function(e){var t=e.source;return t.getComponent()||t.getElement()}}),Ext.define("Ext.drag.proxy.Placeholder",{extend:Ext.drag.proxy.None,alias:"drag.proxy.placeholder",config:{cls:"",cursorOffset:[12,20],html:null,invalidCls:"",validCls:""},placeholderCls:Ext.baseCSSPrefix+"drag-proxy-placeholder",cleanup:function(){this.element=Ext.destroy(this.element)},getElement:function(){var e=Ext.getBody().createChild({cls:this.getCls(),html:this.getHtml()});return e.addCls(this.placeholderCls),e.setTouchAction({panX:!1,panY:!1}),e},update:function(e){var t=this.element,i=this.getInvalidCls(),n=this.getValidCls(),r=e.valid;e.target?t.replaceCls(r?i:n,r?n:i):t.removeCls([i,n])},updateCls:function(e,t){var i=this.element;i&&(t&&i.removeCls(t),e&&i.addCls(e))},updateHtml:function(e){var t=this.element;t&&t.setHtml(e||"")},updateInvalidCls:function(e,t){this.doUpdateCls(e,t)},updateValidCls:function(e,t){this.doUpdateCls(e,t)},destroy:function(){this.element=Ext.destroy(this.element),this.callParent()},privates:{adjustCursorOffset:function(e,t){var i=this.getCursorOffset();return i&&(t[0]+=i[0]||0,t[1]+=i[1]||0),t},doUpdateCls:function(e,t){var i,n=this.element;n&&(t&&(i=e&&n.hasCls(t),n.removeCls(t)),e&&i&&n.addCls(e))}}}),Ext.define("Ext.overrides.drag.proxy.Placeholder",{override:"Ext.drag.proxy.Placeholder",getElement:function(){var e=this.callParent();return e.addCls(Ext.baseCSSPrefix+"root"),e}}),Ext.define("Ext.event.gesture.Recognizer",{mixins:[Ext.mixin.Identifiable],priority:0,handledEvents:[],isStarted:!1,config:{onRecognized:Ext.emptyFn,callbackScope:null},constructor:function(e){this.initConfig(e),Ext.event.publisher.Gesture.instance.registerRecognizer(this)},onStart:Ext.emptyFn,onEnd:Ext.emptyFn,onTouchStart:Ext.emptyFn,onTouchMove:Ext.emptyFn,onTouchEnd:function(){return this.reset()},onTouchCancel:function(e){return this.cancel(e)},fire:function(e,t,i,n){this.getOnRecognized().call(this.getCallbackScope(),this,e,t,i,n)},cancel:function(e){return this.isStarted&&this.onCancel(e),this.reset()},onCancel:Ext.emptyFn,reset:function(){return this.isStarted=!1}}),Ext.define("Ext.event.gesture.SingleTouch",{extend:Ext.event.gesture.Recognizer,isSingleTouch:!0,onTouchStart:function(e){if(1<e.touches.length)return this.cancel(e)}}),Ext.define("Ext.event.gesture.DoubleTap",{extend:Ext.event.gesture.SingleTouch,priority:300,config:{moveDistance:8,tapDistance:24,maxDuration:300},handledEvents:["singletap","doubletap"],singleTapTimer:null,startTime:0,lastTapTime:0,onTouchStart:function(e){var t,i=this.callParent([e]);return!1!==i&&(this.isStarted=!0,t=this.lastStartPoint=e.changedTouches[0].point,this.startPoint=this.startPoint||t,this.startTime=e.time,Ext.undefer(this.singleTapTimer)),i},onTouchMove:function(e){var t=e.changedTouches[0].point,i=Ext.Element.getViewportScale();if(Math.round(Math.abs(t.getDistanceTo(this.lastStartPoint)*i))>=this.getMoveDistance())return this.cancel(e)},onTouchEnd:function(e){var t,i,n=this,r=n.getMaxDuration(),s=e.time,o=e.target,a=n.lastTapTime,l=n.lastTarget,c=e.changedTouches[0].point;if(n.lastTapTime=s,n.lastTarget=o,a&&(t=s-a)<=r&&(i=Ext.Element.getViewportScale(),Math.round(Math.abs(c.getDistanceTo(n.startPoint)*i))<=n.getTapDistance()))return o!==l?n.cancel(e):(n.lastTarget=null,n.lastTapTime=0,n.fire("doubletap",e,{touch:e.changedTouches[0],duration:t}),n.callParent([e]));s-n.startTime>r?(n.fire("singletap",e),n.reset()):n.setSingleTapTimer(e)},setSingleTapTimer:function(e){var t=this;t.singleTapTimer=Ext.defer(function(){t.fire("singletap",e),t.reset()},t.getMaxDuration())},reset:function(){return Ext.undefer(this.singleTapTimer),this.startTime=this.lastTapTime=0,this.lastStartPoint=this.startPoint=this.singleTapTimer=null,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.doubleTap)}),Ext.define("Ext.event.gesture.Drag",{extend:Ext.event.gesture.SingleTouch,priority:100,startPoint:null,previousPoint:null,lastPoint:null,handledEvents:["dragstart","drag","dragend","dragcancel"],config:{minDistance:8},constructor:function(){this.callParent(arguments),this.initInfo()},initInfo:function(){this.info={touch:null,previous:{x:0,y:0},x:0,y:0,delta:{x:0,y:0},absDelta:{x:0,y:0},flick:{velocity:{x:0,y:0}},direction:{x:0,y:0},time:0,previousTime:{x:0,y:0},longpress:!1}},onTouchStart:function(e){var t=this.callParent([e]);return!1!==t&&(this.startTime=e.time,this.startPoint=e.changedTouches[0].point),t},tryDragStart:function(e){var t=e.changedTouches[0].point,i=this.getMinDistance(),n=Ext.Element.getViewportScale();i<=Math.round(Math.abs(t.getDistanceTo(this.startPoint)*n))&&this.doDragStart(e)},doDragStart:function(e,t){var i,n=e.changedTouches[0],r=n.point,s=this.info;t?(i=Ext.now(),this.startTime=i,this.startPoint=r,s.longpress=!0):i=e.time,this.isStarted=!0,this.previousPoint=this.lastPoint=r,this.resetInfo("x",e,n),this.resetInfo("y",e,n),s.time=i,this.fire("dragstart",e,s)},onTouchMove:function(e){var t,i,n=this;n.startPoint&&(n.isStarted||n.tryDragStart(e),n.isStarted&&(i=(t=e.changedTouches[0]).point,n.lastPoint&&(n.previousPoint=n.lastPoint),n.lastPoint=i,n.lastMoveEvent=e,n.updateInfo("x",e,t),n.updateInfo("y",e,t),n.info.time=e.time,n.fire("drag",e,n.info)))},onAxisDragEnd:function(e,t){var i=t.time-t.previousTime[e];0<i&&(t.flick.velocity[e]=(t[e]-t.previous[e])/i)},resetInfo:function(e,t,i){var n=this.lastPoint[e],r=this.startPoint[e],s=n-r,o=e.toUpperCase(),a=this.info;a.touch=i,a.delta[e]=s,a.absDelta[e]=Math.abs(s),a.previousTime[e]=this.startTime,a.previous[e]=r,a[e]=n,a.direction[e]=0,a["start"+o]=this.startPoint[e],a["previous"+o]=a.previous[e],a["page"+o]=a[e],a["delta"+o]=a.delta[e],a["absDelta"+o]=a.absDelta[e],a["previousDelta"+o]=0,a.startTime=this.startTime},updateInfo:function(e,t,i){var n=this.lastPoint[e],r=this.previousPoint[e],s=this.startPoint[e],o=n-s,a=this.info,l=a.direction,c=e.toUpperCase(),u=a.previous[e];a.touch=i,a.delta[e]=o,a.absDelta[e]=Math.abs(o),n!==u&&n!==a[e]&&(a.previous[e]=a[e],a.previousTime[e]=a.time),r<(a[e]=n)?l[e]=1:n<r&&(l[e]=-1),a["start"+c]=s,a["previous"+c]=a.previous[e],a["page"+c]=a[e],a["delta"+c]=a.delta[e],a["absDelta"+c]=a.absDelta[e],a["previousDelta"+c]=a.previous[e]-s,a.startTime=this.startTime},onTouchEnd:function(e){var t,i,n;return this.isStarted&&(i=(t=e.changedTouches[0]).point,n=this.info,this.lastPoint=i,this.updateInfo("x",e,t),this.updateInfo("y",e,t),n.time=e.time,this.onAxisDragEnd("x",n),this.onAxisDragEnd("y",n),this.fire("dragend",e,n)),this.callParent([e])},onCancel:function(e){var t=e.changedTouches[0],i=this.info;e.touches.length||(this.lastPoint=t.point),this.updateInfo("x",e,t),this.updateInfo("y",e,t),i.time=e.time,this.fire("dragcancel",e,i,!0)},reset:function(){return this.lastPoint=this.startPoint=this.previousPoint=this.lastPoint=this.lastMoveEvent=null,this.initInfo(),this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.drag)}),Ext.define("Ext.event.gesture.Swipe",{extend:Ext.event.gesture.SingleTouch,priority:600,handledEvents:["swipestart","swipe","swipecancel"],config:{minDistance:80,maxOffset:35,maxDuration:1e3},onTouchStart:function(e){var t,i=this.callParent([e]);return!1!==i&&(t=e.changedTouches[0],this.startTime=e.time,this.isHorizontal=!0,this.isVertical=!0,this.startX=t.pageX,this.startY=t.pageY),i},onTouchMove:function(e){var t,i,n,r=this,s=e.changedTouches[0],o=s.pageX,a=s.pageY,l=o-r.startX,c=a-r.startY,u=Math.abs(o-r.startX),d=Math.abs(a-r.startY),h=e.time-r.startTime;return 0===u&&0===d||h>r.getMaxDuration()?r.cancel(e):(r.isHorizontal&&d>r.getMaxOffset()&&(r.isHorizontal=!1),r.isVertical&&u>r.getMaxOffset()&&(r.isVertical=!1),r.isVertical&&r.isHorizontal||(t=r.getMinDistance(),r.isHorizontal&&u<t?(i=l<0?"left":"right",n=u):r.isVertical&&d<t&&(i=c<0?"up":"down",n=d)),r.isHorizontal||r.isVertical?void(i&&!r.isStarted&&(r.isStarted=!0,r.fire("swipestart",e,{touch:s,direction:i,distance:n,duration:h}))):r.cancel(e))},onTouchEnd:function(e){var t,i,n,r,s,o,a,l,c,u,d,h=this;return!1!==h.onTouchMove(e)&&(i=(t=e.changedTouches[0]).pageX,n=t.pageY,r=i-h.startX,s=n-h.startY,o=Math.abs(r),a=Math.abs(s),l=h.getMinDistance(),c=e.time-h.startTime,h.isVertical&&a<l&&(h.isVertical=!1),h.isHorizontal&&o<l&&(h.isHorizontal=!1),h.isHorizontal?(u=r<0?"left":"right",d=o):h.isVertical&&(u=s<0?"up":"down",d=a),h.fire("swipe",e,{touch:t,direction:u,distance:d,duration:c})),this.callParent([e])},onCancel:function(e){this.fire("swipecancel",e,null,!0)},reset:function(){return this.startTime=this.isHorizontal=this.isVertical=this.startX=this.startY=null,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.swipe)}),Ext.define("Ext.event.gesture.EdgeSwipe",{extend:Ext.event.gesture.Swipe,priority:500,handledEvents:["edgeswipe","edgeswipestart","edgeswipeend","edgeswipecancel"],config:{minDistance:60},onTouchStart:function(e){var t,i=this.callParent([e]);return!1!==i&&(t=e.changedTouches[0],this.direction=null,this.isHorizontal=!0,this.isVertical=!0,this.startX=t.pageX,this.startY=t.pageY),i},onTouchMove:function(e){var t,i,n=this,r=e.changedTouches[0],s=r.pageX,o=r.pageY,a=s-n.startX,l=o-n.startY,c=Math.abs(o-n.startY),u=Math.abs(s-n.startX),d=n.getMinDistance(),h=n.getMaxOffset(),f=e.time-n.startTime,g=Ext.Viewport&&Ext.Element.getViewportWidth(),p=Ext.Viewport&&Ext.Element.getViewportHeight();if(n.isVertical&&h<u&&(n.isVertical=!1),n.isHorizontal&&h<c&&(n.isHorizontal=!1),n.isVertical&&n.isHorizontal&&(u<c?n.isHorizontal=!1:n.isVertical=!1),n.isHorizontal?(t=a<0?"left":"right",i=a):n.isVertical&&(t=l<0?"up":"down",i=l),"up"===(t=n.direction||(n.direction=t))?i=-1*l:"left"===t&&(i=-1*a),!(n.distance=i))return n.cancel(e);if(n.isStarted)n.fire("edgeswipe",e,{touch:r,direction:t,distance:i,duration:f});else{if("right"===t&&n.startX>d||"down"===t&&n.startY>d||"left"===t&&g-n.startX>d||"up"===t&&p-n.startY>d)return n.cancel(e);n.isStarted=!0,n.startTime=e.time,n.fire("edgeswipestart",e,{touch:r,direction:t,distance:i,duration:f})}},onTouchEnd:function(e){var t;return!1!==this.onTouchMove(e)&&(t=e.time-this.startTime,this.fire("edgeswipeend",e,{touch:e.changedTouches[0],direction:this.direction,distance:this.distance,duration:t})),this.reset()},onCancel:function(e){this.fire("edgeswipecancel",e,{touch:e.changedTouches[0]},!0)},reset:function(){return this.direction=this.isHorizontal=this.isVertical=this.startX=this.startY=this.startTime=this.distance=null,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.edgeSwipe)}),Ext.define("Ext.event.gesture.LongPress",{extend:Ext.event.gesture.SingleTouch,priority:400,config:{moveDistance:8,minDuration:1e3},handledEvents:["longpress","taphold"],onTouchStart:function(e){var t=this.callParent([e]);return!1!==t&&(this.startPoint=e.changedTouches[0].point,this.setLongPressTimer(e)),t},setLongPressTimer:function(e){Ext.undefer(this.timer),this.timer=Ext.defer(this.fireLongPress,this.getMinDuration(),this,[e])},onTouchMove:function(e){var t=e.changedTouches[0].point,i=Ext.Element.getViewportScale();if(Math.round(Math.abs(t.getDistanceTo(this.startPoint)*i))>=this.getMoveDistance())return this.cancel(e)},reset:function(){return this.timer=this.startPoint=Ext.undefer(this.timer),this.callParent()},fireLongPress:function(e){var t={touch:e.changedTouches[0],duration:this.getMinDuration(),startDrag:this.startDrag};this.fire("taphold",e,t),this.fire("longpress",e,t),this.reset()},startDrag:function(){var e=Ext.event.gesture.Drag.instance,t=this.parentEvent;e.doDragStart(t,!0),Ext.event.publisher.Gesture.instance.claimRecognizer(e,t)}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.longPress)}),Ext.define("Ext.event.gesture.MultiTouch",{extend:Ext.event.gesture.Recognizer,requiredTouchesCount:2,isTracking:!1,isMultiTouch:!0,onTouchStart:function(e){var t=this.requiredTouchesCount,i=e.touches.length;if(i===t)this.isTracking=!0;else if(t<i)return this.cancel(e)},reset:function(){return this.isTracking=!1,this.callParent()}}),Ext.define("Ext.event.gesture.Pinch",{extend:Ext.event.gesture.MultiTouch,priority:700,handledEvents:["pinchstart","pinch","pinchend","pinchcancel"],startDistance:0,lastTouches:null,onTouchMove:function(e){var t,i,n,r;if(this.isTracking){if(i=(t=e.touches)[0].point,n=t[1].point,0===(r=i.getDistanceTo(n)))return;this.isStarted?this.fire("pinch",e,{touches:t,distance:r,scale:r/this.startDistance}):(this.isStarted=!0,this.startDistance=r,this.fire("pinchstart",e,{touches:t,distance:r,scale:1}))}},onTouchEnd:function(e){return this.isStarted&&this.fire("pinchend",e),this.callParent([e])},onCancel:function(e){this.fire("pinchcancel",e,null,!0)},reset:function(){return this.lastTouches=null,this.startDistance=0,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.pinch)}),Ext.define("Ext.event.gesture.Rotate",{extend:Ext.event.gesture.MultiTouch,priority:800,handledEvents:["rotatestart","rotate","rotateend","rotatecancel"],startAngle:0,lastTouches:null,lastAngle:null,onTouchMove:function(e){var t,i,n,r,s,o,a,l,c=this;c.isTracking&&(t=e.touches,i=c.lastAngle,n=t[0].point,r=t[1].point,s=n.getAngleTo(r),null!==i&&(l=Math.abs(i-s),o=s+360,a=s-360,Math.abs(o-i)<l?s=o:Math.abs(a-i)<l&&(s=a)),c.lastAngle=s,c.isStarted?c.fire("rotate",e,{touches:t,angle:s,rotation:s-c.startAngle}):(c.isStarted=!0,c.startAngle=s,c.fire("rotatestart",e,{touches:t,angle:s,rotation:0})),c.lastTouches=Ext.Array.clone(t))},onTouchEnd:function(e){return this.isStarted&&this.fire("rotateend",e),this.callParent([e])},onCancel:function(e){this.fire("rotatecancel",e,null,!0)},reset:function(){return this.lastTouches=this.lastAngle=this.startAngle=null,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.rotate)}),Ext.define("Ext.event.gesture.Tap",{extend:Ext.event.gesture.SingleTouch,priority:200,handledEvents:["tap","tapcancel"],config:{moveDistance:8},onTouchStart:function(e){var t=this.callParent([e]);return!1!==t&&(this.isStarted=!0,this.startPoint=e.changedTouches[0].point),t},onTouchMove:function(e){var t=e.changedTouches[0].point,i=Ext.Element.getViewportScale();if(Math.round(Math.abs(t.getDistanceTo(this.startPoint)*i))>=this.getMoveDistance())return this.cancel(e)},onTouchEnd:function(e){return this.fire("tap",e,{touch:e.changedTouches[0]}),this.callParent([e])},onCancel:function(e){this.fire("tapcancel",e,{touch:e.changedTouches[0]},!0)},reset:function(){return this.startPoint=null,this.callParent()}},function(e){var t=Ext.manifest.gestures;e.instance=new e(t&&t.tap)}),Ext.define("Ext.event.publisher.Focus",{extend:Ext.event.publisher.Dom,type:"focus",handledEvents:["focusenter","focusleave","focusmove"],handledDomEvents:["focusin","focusout"],publishDelegatedDomEvent:function(e){var t=e.relatedTarget;this.$suppressEvents||("focusout"===e.type?null==t&&this.processFocusIn(e,e.target,document.body):(null!=t&&t.tagName||(t=document.body),this.processFocusIn(e,t,e.target)))},processFocusIn:function(e,t,i){var n,r,s,o,a,l=this.focusFly,c=[];if(!(t&&l.attach(t).isFocusSuspended()||i&&l.attach(i).isFocusSuspended())){for(i.compareDocumentPosition&&(s=!!(4&i.compareDocumentPosition(t))),r=t,n=Ext.dom.Element.getCommonAncestor(i,t,!0);r&&r!==n;r=r.parentNode)c.push(r);if(!c.length||(o=this.createSyntheticEvent("focusleave",e,t,i,t,i,s),this.publish(o,c),!o.stopped)){for(c.length=0,r=i;r&&r!==n;r=r.parentNode)c.push(r);a=this.createSyntheticEvent("focusenter",e,i,t,t,i,s),c.length&&(this.publish(a,c),a.stopped)||(c=this.getPropagatingTargets(n)).length&&(o=this.createSyntheticEvent("focusmove",e,i,t,t,i,s),this.publish(o,c),o.stopped)||Ext.GlobalEvents.hasListeners.focus&&Ext.GlobalEvents.fireEvent("focus",{event:a,toElement:i,fromElement:t,backwards:s})}}},createSyntheticEvent:function(e,t,i,n,r,s,o){var a=new Ext.event.Event(t);return a.type=e,a.relatedTarget=n,a.target=i,a.fromElement=r,a.toElement=s,a.backwards=o,a}},function(n){var r;n.prototype.focusFly=new Ext.dom.Fly,n.instance=new n,Ext.supports.FocusinFocusoutEvents||(this.override({handledDomEvents:["focus","blur"],publishDelegatedDomEvent:function(e){var t,i=this;i.callSuper([e]),t=e.target!==window&&e.target!==document,"blur"===e.type?(t?(r=Ext.defer(function(){r=0,i.processFocusIn(e,e.target,document.body),n.previousActiveElement=null},1),t&&Ext.cache[e.target.id]&&(Ext.cache[e.target.id].focusinTimeout=r)):e.explicitOriginalTarget===n.previousActiveElement&&e.target===window&&(Ext.undefer(r),r=0,i.processFocusIn(e,n.previousActiveElement,document.body),n.previousActiveElement=null),n.previousActiveElement=t?e.target:null):(Ext.undefer(r),r=0,i.processFocusIn(e,n.previousActiveElement||document.body,t?e.target:document.body))}}),Ext.define(null,{override:"Ext.dom.Element",destroy:function(){this.focusinTimeout&&(Ext.undefer(this.focusinTimeout),this.focusinTimeout=null),this.callParent()}}))}),Ext.define("Ext.fx.runner.Css",{extend:Ext.Evented,prefixedProperties:{transform:!0,"transform-origin":!0,perspective:!0,"transform-style":!0,transition:!0,"transition-property":!0,"transition-duration":!0,"transition-timing-function":!0,"transition-delay":!0,animation:!0,"animation-name":!0,"animation-duration":!0,"animation-iteration-count":!0,"animation-direction":!0,"animation-timing-function":!0,"animation-delay":!0},lengthProperties:{top:!0,right:!0,bottom:!0,left:!0,width:!0,height:!0,"max-height":!0,"max-width":!0,"min-height":!0,"min-width":!0,"margin-bottom":!0,"margin-left":!0,"margin-right":!0,"margin-top":!0,"padding-bottom":!0,"padding-left":!0,"padding-right":!0,"padding-top":!0,"border-bottom-width":!0,"border-left-width":!0,"border-right-width":!0,"border-spacing":!0,"border-top-width":!0,"border-width":!0,"outline-width":!0,"letter-spacing":!0,"line-height":!0,"text-indent":!0,"word-spacing":!0,"font-size":!0,translate:!0,translateX:!0,translateY:!0,translateZ:!0,translate3d:!0,x:!0,y:!0},durationProperties:{"transition-duration":!0,"transition-delay":!0,"animation-duration":!0,"animation-delay":!0},angleProperties:{rotate:!0,rotateX:!0,rotateY:!0,rotateZ:!0,skew:!0,skewX:!0,skewY:!0},DEFAULT_UNIT_LENGTH:"px",DEFAULT_UNIT_ANGLE:"deg",DEFAULT_UNIT_DURATION:"ms",customProperties:{x:!0,y:!0},formattedNameCache:{x:"left",y:"top"},transformMethods3d:["translateX","translateY","translateZ","rotate","rotateX","rotateY","rotateZ","skewX","skewY","scaleX","scaleY","scaleZ"],transformMethodsNo3d:["translateX","translateY","rotate","skewX","skewY","scaleX","scaleY"],constructor:function(){this.transformMethods=Ext.feature.has.Css3dTransforms?this.transformMethods3d:this.transformMethodsNo3d,this.vendorPrefix=Ext.browser.getStyleDashPrefix(),this.ruleStylesCache={},this.callParent()},getStyleSheet:function(){var e,t,i=this.styleSheet;return i||((e=document.createElement("style")).type="text/css",(document.head||document.getElementsByTagName("head")[0]).appendChild(e),t=document.styleSheets,this.styleSheet=i=t[t.length-1]),i},applyRules:function(e){var t,i,n,r,s,o,a,l=this.getStyleSheet(),c=this.ruleStylesCache,u=l.cssRules;for(t in e)for(o in i=e[t],void 0===(n=c[t])&&(s=u.length,l.insertRule(t+"{}",s),n=c[t]=u.item(s).style),r=(r=n.$cache)||(n.$cache={}),i)a=this.formatValue(i[o],o),r[o=this.formatName(o)]!==a&&(null===(r[o]=a)?n.removeProperty(o):n.setProperty(o,a));return this},applyStyles:function(e){var t,i,n,r,s,o;for(t in e)if(e.hasOwnProperty(t)){if(this.activeElement=i=document.getElementById(t),!i)continue;for(s in n=i.style,r=e[t])r.hasOwnProperty(s)&&(o=this.formatValue(r[s],s),s=this.formatName(s),null===o?n.removeProperty(s):n.setProperty(s,o))}return this.activeElement=null,this},formatName:function(e){var t=this.formattedNameCache,i=t[e];return i||(i=!Ext.os.is.Tizen&&Ext.feature.has.CssTransformNoPrefix||!this.prefixedProperties[e]?e:this.vendorPrefix+e,t[e]=i),i},formatValue:function(e,t){var i,n,r,s,o,a,l=typeof e,c=this.DEFAULT_UNIT_LENGTH,u=this.customProperties[t];if(null===e)return"";if("string"==l)return this.lengthProperties[t]&&(Ext.dom.Element.hasUnit(e)||(e+=c,u&&(e=this.getCustomValue(e,t)))),e;if("number"==l){if(0===e)return"0";if(this.lengthProperties[t])return e+=c,u&&(e=this.getCustomValue(e,t)),e;if(this.angleProperties[t])return e+this.DEFAULT_UNIT_ANGLE;if(this.durationProperties[t])return e+this.DEFAULT_UNIT_DURATION}else{if("transform"===t){for(o=[],r=0,s=(i=this.transformMethods).length;r<s;r++)n=i[r],o.push(n+"("+this.formatValue(e[n],n)+")");return o.join(" ")}if(Ext.isArray(e)){for(a=[],r=0,s=e.length;r<s;r++)a.push(this.formatValue(e[r],t));return 0<a.length?a.join(", "):"none"}}return e},getCustomValue:function(e,t){var i=Ext.fly(this.activeElement);return"x"===t?e=i.translateXY(parseInt(e,10)).x:"y"===t&&(e=i.translateXY(null,parseInt(e,10)).y),e+this.DEFAULT_UNIT_LENGTH}}),Ext.define("Ext.fx.runner.CssTransition",{extend:Ext.fx.runner.Css,alternateClassName:"Ext.Animator",singleton:!0,listenersAttached:!1,constructor:function(){return this.runningAnimationsData={},this.transitionQueue={toData:{},transitionData:{}},this.callParent(arguments)},attachListeners:function(){var e=top===window?Ext.getWin():Ext.getBody();this.listenersAttached=!0,e.on("transitionend","onTransitionEnd",this)},onTransitionEnd:function(e){var t=e.target,i=t.id;i&&this.runningAnimationsData.hasOwnProperty(i)&&this.refreshRunningAnimationsData(Ext.get(t),[e.browserEvent.propertyName])},getElementId:function(e){return e.getId?e.getId():e.id},onAnimationEnd:function(e,t,i,n,r){var s,o,a,l,c,u=this.getElementId(e),d=this.runningAnimationsData[u],h={},f={};if(i.un("stop","onAnimationStop",this),d&&(s=d.nameMap),h[u]=f,t.onBeforeEnd&&t.onBeforeEnd.call(t.scope||this,e,n),i.fireEvent("animationbeforeend",i,e,n),this.fireEvent("animationbeforeend",this,i,e,n),r||!n&&!t.preserveEndState)for(a=0,l=(o=t.toPropertyNames).length;a<l;a++)c=o[a],s&&!s.hasOwnProperty(c)&&(f[c]=null);t.after&&Ext.merge(f,t.after),this.applyStyles(h),t.onEnd&&t.onEnd.call(t.scope||this,e,n),i.fireEvent("animationend",i,e,n),this.fireEvent("animationend",this,i,e,n),Ext.AnimationQueue.stop(Ext.emptyFn,i)},onAllAnimationsEnd:function(e){var t=this.getElementId(e),i=this.transitionQueue,n={};delete this.runningAnimationsData[t],n[t]={"transition-property":null,"transition-duration":null,"transition-timing-function":null,"transition-delay":null},delete i.toData[t],delete i.transitionData[t],this.applyStyles(n),this.fireEvent("animationallend",this,e)},hasRunningAnimations:function(e){var t=this.getElementId(e),i=this.runningAnimationsData;return i.hasOwnProperty(t)&&0<i[t].sessions.length},refreshRunningAnimationsData:function(e,t,i,n){var r,s,o,a,l,c,u,d,h,f,g,p=this.getElementId(e),m=this.runningAnimationsData[p],x=!1;if(m){if(r=m.nameMap,s=m.nameList,o=m.sessions,i=Boolean(i),n=Boolean(n),!o)return this;if(0===(h=o.length))return this;if(n){for(m.nameMap={},d=s.length=0;d<h;d++)l=o[d],this.onAnimationEnd(e,l.data,l.animation,i,n);o.length=0}else for(d=0;d<h;d++){for(c=(l=o[d]).map,u=l.list,f=0,g=t.length;f<g;f++)c[a=t[f]]&&(delete c[a],Ext.Array.remove(u,a),l.length--,0==--r[a]&&(delete r[a],Ext.Array.remove(s,a)));0===l.length&&(o.splice(d,1),d--,h--,x=!0,this.onAnimationEnd(e,l.data,l.animation,i))}n||i||0!==o.length||!x||this.onAllAnimationsEnd(e)}},getRunningData:function(e){var t=this.runningAnimationsData;return t.hasOwnProperty(e)||(t[e]={nameMap:{},nameList:[],sessions:[]}),t[e]},getTestElement:function(){var e,t,i=this.testElement,n=this.iframe;return i?i.ownerDocument.defaultView!==n.contentWindow&&((e=n.contentDocument).body.appendChild(i),this.testElementComputedStyle=e.defaultView.getComputedStyle(i)):((n=this.iframe=document.createElement("iframe")).setAttribute("data-sticky",!0),n.setAttribute("tabIndex",-1),(t=n.style).setProperty("visibility","hidden","important"),t.setProperty("width","0px","important"),t.setProperty("height","0px","important"),t.setProperty("position","absolute","important"),t.setProperty("border","0px","important"),t.setProperty("zIndex","-1000","important"),document.body.appendChild(n),(e=n.contentDocument).open(),e.writeln("</body>"),e.close(),this.testElement=i=e.createElement("div"),i.style.setProperty("position","absolute","important"),e.body.appendChild(i),this.testElementComputedStyle=e.defaultView.getComputedStyle(i)),i},getCssStyleValue:function(e,t){var i=this.getTestElement(),n=this.testElementComputedStyle,r=i.style;return r.setProperty(e,t),Ext.browser.is.Firefox&&i.offsetHeight,t=n.getPropertyValue(e),r.removeProperty(e),t},run:function(e){var t,i,n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v,E,b,C,S,w,T,P,I,A,k,D=this,R=[],M=D.lengthProperties,F={},L=D.transitionQueue.toData,O={},B=D.transitionQueue.transitionData;for(D.listenersAttached||D.attachListeners(),h=0,g=(e=Ext.Array.from(e)).length;h<g;h++){for(E in p=e[h],p=Ext.factory(p,Ext.fx.Animation),R.push(p),D.activeElement=t=p.getElement(),Ext.AnimationQueue.start(Ext.emptyFn,p),y=window.getComputedStyle(t.dom),O[i=D.getElementId(t)]=O=Ext.merge({},p.getData()),(k=p.getOnBeforeStart())&&k.call(p.scope||D,t),p.fireEvent("animationstart",p,O),D.fireEvent("animationstart",D,p,O),s=O.before,n=O.from,r=O.to,O.fromPropertyNames=o=[],O.toPropertyNames=a=[],r)r.hasOwnProperty(E)&&(r[E]=b=D.formatValue(r[E],E),v=D.formatName(E),(S=M.hasOwnProperty(E))||(b=D.getCssStyleValue(v,b)),n.hasOwnProperty(E)?(n[E]=C=D.formatValue(n[E],E),S||(C=D.getCssStyleValue(v,C)),b!==C&&(o.push(v),a.push(v))):b!==y.getPropertyValue(v)&&a.push(v));if(0!==(m=a.length)){for(0<(P=(u=D.getRunningData(i)).sessions).length&&D.refreshRunningAnimationsData(t,Ext.Array.merge(o,a),!0,O.replacePrevious),w=u.nameMap,T=u.nameList,x={},f=0;f<m;f++)x[E=a[f]]=!0,w.hasOwnProperty(E)?w[E]++:(w[E]=1,T.push(E));I={element:t,map:x,list:a.slice(),length:m,data:O,animation:p},P.push(I),p.on("stop","onAnimationStop",D),d=Ext.apply({},s),Ext.apply(d,n),0<T.length&&(o=Ext.Array.difference(T,o),a=Ext.Array.merge(o,a),d["transition-property"]=o),F[i]=d,L[i]=Ext.apply({},r),B[i]={"transition-property":a,"transition-duration":O.duration,"transition-timing-function":O.easing,"transition-delay":O.delay},p.startTime=Date.now()}else D.onAnimationEnd(t,O,p)}return D.activeElement=null,c=D.$className,D.applyStyles(F),l=function(e){e.data===c&&e.source===window&&(window.removeEventListener("message",l,!1),D.applyStyles(D.transitionQueue.toData))},D.messageTimerId||((A=function(){var e;D.messageTimerId=null,Ext.isIE?(D.applyStyles(D.transitionQueue.transitionData),D.messageFollowupId||((e=function(){D.messageFollowupId=null,window.addEventListener("message",l,!1),window.postMessage(c,"*")}).$skipTimerCheck=!0,D.messageFollowupId=Ext.raf(e))):(Ext.merge(D.transitionQueue.toData,D.transitionQueue.transitionData),window.addEventListener("message",l,!1),window.postMessage(c,"*"))}).$skipTimerCheck=!0,D.messageTimerId=Ext.raf(A)),R},onAnimationStop:function(e){var t,i,n,r,s,o=this.runningAnimationsData,a=0,l=0;for(t in o)if(o.hasOwnProperty(t))for(a++,n=0,r=(i=o[t].sessions).length;n<r;n++)(s=i[n]).animation===e&&(this.refreshRunningAnimationsData(s.element,s.list.slice(),!1),e.destroying&&l++);a===l&&(this.messageFollowupId&&(Ext.unraf(this.messageFollowupId),this.messageFollowupId=null),this.messageTimerId&&(Ext.unraf(this.messageTimerId),this.messageTimerId=null),Ext.apply(this.transitionQueue,{toData:{},transitionData:{}}))}}),Ext.define("Ext.fx.easing.Bounce",{extend:Ext.fx.easing.Abstract,config:{springTension:.3,acceleration:30,startVelocity:0},getValue:function(){var e=(Ext.Date.now()-this.getStartTime())/this.getAcceleration(),t=e*Math.pow(Math.E,-this.getSpringTension()*e);return this.getStartValue()+this.getStartVelocity()*t}}),Ext.define("Ext.fx.easing.Momentum",{extend:Ext.fx.easing.Abstract,config:{acceleration:30,friction:0,startVelocity:0},alpha:0,updateFriction:function(e){var t=Math.log(1-e/10);this.theta=t,this.alpha=t/this.getAcceleration()},updateStartVelocity:function(e){this.velocity=e*this.getAcceleration()},updateAcceleration:function(e){this.velocity=this.getStartVelocity()*e,this.alpha=this.theta/e},getValue:function(){return this.getStartValue()-this.velocity*(1-this.getFrictionFactor())/this.theta},getFrictionFactor:function(){var e=Ext.Date.now()-this.getStartTime();return Math.exp(e*this.alpha)},getVelocity:function(){return this.getFrictionFactor()*this.velocity}}),Ext.define("Ext.fx.easing.BoundMomentum",{extend:Ext.fx.easing.Abstract,config:{momentum:null,bounce:null,minMomentumValue:0,maxMomentumValue:0,minVelocity:.01,startVelocity:0},applyMomentum:function(e,t){return Ext.factory(e,Ext.fx.easing.Momentum,t)},applyBounce:function(e,t){return Ext.factory(e,Ext.fx.easing.Bounce,t)},updateStartTime:function(e){this.getMomentum().setStartTime(e),this.callParent(arguments)},updateStartVelocity:function(e){this.getMomentum().setStartVelocity(e)},updateStartValue:function(e){this.getMomentum().setStartValue(e)},reset:function(){return this.lastValue=null,this.isBouncingBack=!1,this.isOutOfBound=!1,this.callParent(arguments)},getValue:function(){var e,t,i=this.getMomentum(),n=this.getBounce(),r=i.getStartVelocity(),s=0<r?1:-1,o=this.getMinMomentumValue(),a=this.getMaxMomentumValue(),l=1==s?a:o,c=this.lastValue;if(0===r)return this.getStartValue();if(!this.isOutOfBound){if(e=i.getValue(),t=i.getVelocity(),Math.abs(t)<this.getMinVelocity()&&(this.isEnded=!0),o<=e&&e<=a)return e;this.isOutOfBound=!0,n.setStartTime(Ext.Date.now()).setStartVelocity(t).setStartValue(l)}return e=n.getValue(),this.isEnded||(this.isBouncingBack?Math.round(e)===l&&(this.isEnded=!0):null!==c&&(1==s&&e<c||-1==s&&c<e)&&(this.isBouncingBack=!0)),this.lastValue=e}}),Ext.define("Ext.fx.easing.EaseOut",{extend:Ext.fx.easing.Linear,alias:"easing.ease-out",config:{exponent:4,duration:1500},getValue:function(){var e=Ext.Date.now()-this.getStartTime(),t=this.getDuration(),i=this.getStartValue(),n=this.getEndValue(),r=this.distance,s=1-e/t,o=i+(1-Math.pow(s,this.getExponent()))*r;return t<=e?(this.isEnded=!0,n):o}}),Ext.define("Ext.list.AbstractTreeItem",{extend:Ext.Widget,isTreeListItem:!0,cachedConfig:{expandable:!1,expanded:!1,iconCls:"",leaf:!0,loading:!1,selected:!1,selectedParent:!1},config:{iconClsProperty:"iconCls",indent:null,owner:null,node:null,over:null,parentItem:null,text:{lazy:!0,$value:""},textProperty:"text"},updateNode:function(e){if(e){var t,i,n,r,s,o,a=this.itemMap;if(this.element.dom.setAttribute("data-recordId",e.internalId),!a)for(t=e.childNodes,i=this.getOwner(),this.itemMap=a={},r=0,n=t.length;r<n;++r)(o=t[r]).data.visible&&(s=i.createItem(o,this),a[o.internalId]=s,this.insertItem(s,null));this.setExpanded(e.isExpanded()),this.doNodeUpdate(e)}},updateSelected:function(e){var t;if(!this.isConfiguring)for(t=this.getParentItem();t&&!t.isRootListItem;)t.setSelectedParent(e),t=t.getParentItem()},collapse:function(){this.getNode().collapse()},expand:function(){this.getNode().expand()},getToolElement:Ext.emptyFn,insertItem:Ext.emptyFn,isExpanded:function(){return this.getExpanded()},isSelectionEvent:Ext.emptyFn,isToggleEvent:Ext.emptyFn,nodeCollapse:function(e,t){var i=this.getOwner(),n=this.preventAnimation?null:i.getAnimation();this.nodeCollapseBegin(n,t),n||this.nodeCollapseEnd(t)},nodeCollapseBegin:function(e,t){var i=this.getOwner();this.setExpanded(!1),i.fireEvent("itemcollapse",i,this)},nodeCollapseEnd:function(e){e||this.destroying||this.getOwner().updateLayout()},nodeExpand:function(e){var t=this.getOwner(),i=!this.getFloated()&&t.getAnimation();this.nodeExpandBegin(i),i||this.nodeExpandEnd()},nodeExpandBegin:function(e){var t=this.getOwner();this.setExpanded(!0),t.fireEvent("itemexpand",t,this)},nodeExpandEnd:function(){this.destroying||this.getOwner().updateLayout()},nodeInsert:function(e,t){var i,n=this.getOwner(),r=this.itemMap,s=e.internalId,o=n.getItem(e),a=null;o?((i=o.getParentItem()).removeItem(o),i!==this&&(i.doUpdateExpandable(),o.setParentItem(this))):o=this.getOwner().createItem(e,this),r[s]=o,t&&(a=r[t.internalId]),this.insertItem(o,a),this.doUpdateExpandable(),n.fireEvent("iteminsert",n,this,o,a),n.updateLayout()},nodeRemove:function(e){var t=this.itemMap,i=this.getOwner(),n=e.internalId,r=t[n];r&&(delete t[n],this.removeItem(r),r.destroy(),this.doUpdateExpandable(),i.fireEvent("itemremove",i,this,r),i.updateLayout())},nodeUpdate:function(e,t){this.doNodeUpdate(e)},onClick:function(e){var t=this.getOwner(),i=this.getNode(),n={event:e,item:this,node:i,tree:t,select:!1!==i.get("selectable")&&this.isSelectionEvent(e),toggle:this.isToggleEvent(e)};!1!==t.fireEvent("itemclick",t,n)&&(n.toggle&&(this.toggleExpanded(),e.preventDefault()),n.select&&t.setSelection(this.getNode()))},removeItem:Ext.emptyFn,destroy:function(){var e,t=this.itemMap,i=this.getOwner();if(t){for(e in t)t[e].destroy();this.itemMap=null}i&&i.removeItem(this.getNode()),this.setNode(null),this.setParentItem(null),this.setOwner(null),this.callParent()},privates:{doNodeUpdate:function(e,t){var i=this.getTextProperty(),n=this.getIconClsProperty();i&&this.setText(e.data[i]),n&&this.setIconCls(e.data[n]),this.setLoading(e.isLoading()),this.setLeaf(e.isLeaf()),this.doUpdateExpandable()},doUpdateExpandable:function(){var e=this.getNode();this.setExpandable(e.isExpandable())},toggleExpanded:function(){this.isExpanded()?this.collapse():this.expand()},updateIndent:function(e){var t,i=this.itemMap;for(t in i)i[t].setIndent(e)},updateOwner:function(e){this.parent=e}}}),Ext.define("Ext.list.RootTreeItem",{extend:Ext.list.AbstractTreeItem,isRootListItem:!0,element:{reference:"element",tag:"ul",cls:Ext.baseCSSPrefix+"treelist-root-container"},insertItem:function(e,t){t?e.element.insertBefore(t.element):this.element.appendChild(e.element)},isToggleEvent:function(e){return!1}}),Ext.define("Ext.mixin.ItemRippler",{mixinId:"itemrippler",config:{itemRipple:null},shouldRippleItem:function(e,t){var i,n;return!t.getTarget(this.noItemRippleSelector,this.element)&&((i=e&&this.getItemRipple())&&e.isWidget&&(n=e.shouldRipple(t))&&(i=Ext.apply({},i,n)),i)},rippleItem:function(e,t){if(e){var i,n,r,s=t.type.match(this.rippleStateRe),o=this.shouldRippleItem(e,t),a=o&&o.release,l=!0===a,c=e.isWidget?e.el:e;o&&s&&l&&(this.$rippleStart=t.getXY()),o&&c&&(!s&&l||s&&!0!==a)&&(r=this.$rippledItems||(this.$rippledItems=[]),(n=this.$rippleStart)?(i=t.getXY(),Math.sqrt(Math.pow(i[0]-n[0],2)+Math.pow(i[1]-n[1],2))<=8&&(c.ripple(t,o),r.push(c))):(c.ripple(t,o),r.push(c)),this.$rippleStart=null)}},destroyAllRipples:function(){var e;for(e=this.$rippledItems;e&&e.length;)e.pop().destroyAllRipples()},privates:{noItemRippleSelector:"."+Ext.baseCSSPrefix+"item-no-ripple, ."+Ext.baseCSSPrefix+"item-no-tap",rippleStateRe:/start|down/}}),Ext.define("Ext.list.TreeItem",{extend:Ext.list.AbstractTreeItem,xtype:"treelistitem",collapsedCls:Ext.baseCSSPrefix+"treelist-item-collapsed",expandedCls:Ext.baseCSSPrefix+"treelist-item-expanded",floatedToolCls:Ext.baseCSSPrefix+"treelist-item-tool-floated",leafCls:Ext.baseCSSPrefix+"treelist-item-leaf",expandableCls:Ext.baseCSSPrefix+"treelist-item-expandable",hideIconCls:Ext.baseCSSPrefix+"treelist-item-hide-icon",loadingCls:Ext.baseCSSPrefix+"treelist-item-loading",selectedCls:Ext.baseCSSPrefix+"treelist-item-selected",selectedParentCls:Ext.baseCSSPrefix+"treelist-item-selected-parent",withIconCls:Ext.baseCSSPrefix+"treelist-item-with-icon",hoverCls:Ext.baseCSSPrefix+"treelist-item-over",rowHoverCls:Ext.baseCSSPrefix+"treelist-row-over",isTreeListItem:!0,config:{rowCls:null},rowClsProperty:"rowCls",element:{reference:"element",tag:"li",cls:Ext.baseCSSPrefix+"treelist-item",children:[{reference:"rowElement",cls:Ext.baseCSSPrefix+"treelist-row",children:[{reference:"wrapElement",cls:Ext.baseCSSPrefix+"treelist-item-wrap",children:[{reference:"iconElement",cls:Ext.baseCSSPrefix+"treelist-item-icon"},{reference:"textElement",cls:Ext.baseCSSPrefix+"treelist-item-text"},{reference:"expanderElement",cls:Ext.baseCSSPrefix+"treelist-item-expander"}]}]},{reference:"itemContainer",tag:"ul",cls:Ext.baseCSSPrefix+"treelist-container"},{reference:"toolElement",cls:Ext.baseCSSPrefix+"treelist-item-tool"}]},constructor:function(e){var t;this.callParent([e]),(t=this.toolElement.dom).parentNode.removeChild(t)},getToolElement:function(){return this.toolElement},insertItem:function(e,t){t?e.element.insertBefore(t.element):this.itemContainer.appendChild(e.element)},isSelectionEvent:function(e){var t=this.getOwner();return!this.isToggleEvent(e)||!t.getExpanderOnly()||t.getSelectOnExpander()},isToggleEvent:function(e){return this.getOwner().getExpanderOnly()?e.target===this.expanderElement.dom:!this.itemContainer.contains(e.target)},nodeCollapseBegin:function(e,t){var i,n=this.itemContainer;this.expanding&&this.stopAnimation(this.expanding),i=e&&n.getHeight(),this.callParent([e,t]),e&&(n.dom.style.display="block",this.collapsingForExpand=t,this.collapsing=this.runAnimation(Ext.merge({from:{height:i},to:{height:0},callback:this.nodeCollapseDone,scope:this},e)))},nodeCollapseDone:function(e){var t=this.itemContainer;this.destroying||this.destroyed||(this.collapsing=null,t.dom.style.display="",t.setHeight(null),this.nodeCollapseEnd(this.collapsingForExpand))},nodeExpandBegin:function(e){var t,i=this.itemContainer;this.collapsing&&this.stopAnimation(this.collapsing),this.callParent([e]),e&&(t=i.getHeight(),i.setHeight(0),this.expanding=this.runAnimation(Ext.merge({to:{height:t},callback:this.nodeExpandDone,scope:this},e)))},nodeExpandDone:function(){this.expanding=null,this.itemContainer.setHeight(null),this.nodeExpandEnd()},removeItem:function(e){this.itemContainer.removeChild(e.element)},updateNode:function(e,t){this.syncIndent(),this.callParent([e,t])},updateExpandable:function(e){this.updateExpandCls()},updateExpanded:function(e){var t=this.getNode();this.updateExpandCls(),t&&t.set("expanded",e)},updateIconCls:function(e,t){var i=this.element;this.doIconCls(this.iconElement,e,t),this.doIconCls(this.toolElement,e,t),i.toggleCls(this.withIconCls,!!e),i.toggleCls(this.hideIconCls,null===e)},updateLeaf:function(e){this.element.toggleCls(this.leafCls,e)},updateLoading:function(e){this.element.toggleCls(this.loadingCls,e)},updateOver:function(e){this.element.toggleCls(this.hoverCls,!!e),this.rowElement.toggleCls(this.rowHoverCls,1<e)},updateRowCls:function(e,t){this.rowElement.replaceCls(t,e)},updateSelected:function(e,t){var i=this.selectedCls,n=this.getToolElement();this.callParent([e,t]),this.element.toggleCls(i,e),n&&n.toggleCls(i,e)},updateSelectedParent:function(e){var t;this.element.toggleCls(this.selectedParentCls,e),(t=this.getToolElement())&&t.toggleCls(this.selectedCls,e)},updateText:function(e){this.textElement.update(e)},privates:{doNodeUpdate:function(e){this.callParent([e]),this.setRowCls(e&&e.data[this.rowClsProperty])},doIconCls:function(e,t,i){i&&e.removeCls(i),t&&e.addCls(t)},syncIndent:function(){var e,t=this.getIndent(),i=this.getNode();i&&(e=i.data.depth-1,this.wrapElement.dom.style.marginLeft=e*t+"px")},updateExpandCls:function(){if(!this.updatingExpandCls){var e=this.getExpandable(),t=this.element,i=this.getExpanded(),n=this.expandedCls,r=this.collapsedCls;this.updatingExpandCls=!0,t.toggleCls(this.expandableCls,e),e?(t.toggleCls(n,i),t.toggleCls(r,!i)):t.removeCls([n,r]),this.updatingExpandCls=!1}},updateIndent:function(e,t){this.syncIndent(),this.callParent([e,t])}}},function(e){e.prototype.floatedCls=[Ext.Widget.prototype.floatedCls,Ext.baseCSSPrefix+"treelist-item-floated"]}),Ext.define("Ext.overrides.list.TreeItem",{override:"Ext.list.TreeItem",runAnimation:function(e){return this.itemContainer.animate(e)},stopAnimation:function(e){e.end()},refreshInnerState:Ext.emptyFn,applyFloated:function(e,t){return this.initialized=!0,this.callParent([e,t]),e},updateFloated:function(e,t){var i,n,r,s=this,o=s.getToolElement();e?(s.wasExpanded=s.getExpanded(),s.nextElementSibling=s.el.dom.nextSibling,s.setExpanded(!0)):(r=s.wasExpanded,n=s.getNode(),s.setExpanded(s.wasExpanded),!r&&n.isExpanded()&&(s.preventAnimation=!0,n.collapse(),s.preventAnimation=!1)),s.callParent([e,t]),e?(i=s.getOwner(),s.floatWrap.addCls([Ext.baseCSSPrefix+"treelist",i.uiPrefix+i.getUi(),Ext.baseCSSPrefix+"treelist-float-wrap"]),s.floatWrap.alignTo(o,"tl-tr"),s.floatWrap.on({click:i.onClick,mouseover:i.onMouseOver,scope:i})):s.getOwner().rootItem.el.dom.insertBefore(s.el.dom,s.nextElementSibling),o.toggleCls(s.floatedToolCls,e)}}),Ext.define("Ext.list.Tree",{extend:Ext.Gadget,xtype:"treelist",mixins:[Ext.mixin.ItemRippler],expanderFirstCls:Ext.baseCSSPrefix+"treelist-expander-first",expanderOnlyCls:Ext.baseCSSPrefix+"treelist-expander-only",highlightPathCls:Ext.baseCSSPrefix+"treelist-highlight-path",microCls:Ext.baseCSSPrefix+"treelist-micro",uiPrefix:Ext.baseCSSPrefix+"treelist-",element:{reference:"element",cls:Ext.baseCSSPrefix+"treelist "+Ext.baseCSSPrefix+"unselectable",listeners:{click:"onClick",touchstart:"onTouchStart",touchend:"onTouchEnd",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",mouseover:"onMouseOver"},children:[{reference:"toolsElement",cls:Ext.baseCSSPrefix+"treelist-toolstrip",listeners:{click:"onToolStripClick",mouseover:"onToolStripMouseOver"}}]},cachedConfig:{animation:{duration:500,easing:"ease"},expanderFirst:!0,expanderOnly:!0},config:{floatLeafItems:!1,defaults:{xtype:"treelistitem"},highlightPath:null,iconSize:null,indent:null,micro:!1,overItem:null,selection:null,selectOnExpander:!1,singleExpand:null,store:null,ui:null},twoWayBindable:{selection:1},publishes:{selection:1},defaultBindProperty:"store",constructor:function(e){this.callParent([e]),this.publishState("selection",this.getSelection())},destroy:function(){this.unfloatAll(),this.activeFloater=null,this.setSelection(null),this.setStore(null),this.callParent()},updateOverItem:function(e,t){var i,n,r={},s=2;for(i=e;i;i=this.getItem(n.parentNode))r[(n=i.getNode()).internalId]=!0,i.setOver(s),s=1;if(t&&!t.destroyed)for(i=t;i&&!r[(n=i.getNode()).internalId];i=this.getItem(n.parentNode))i.setOver(0)},applyMicro:function(e){return Boolean(e)},applySelection:function(e,t){var i=this.getStore();return i||(e=null),!i||null===e||e instanceof Ext.data.Model||(e=i.getNodeById(e)),e&&!1===e.get("selectable")&&(e=t),e},updateSelection:function(e,t){var i,n;if(!this.destroying){if((i=this.getItem(t))&&i.setSelected(!1),i=this.getItem(e))for(i.setSelected(!0);n=i.getParentItem();)n.setExpanded(!0),i=n;this.fireEvent("selectionchange",this,e)}},applyStore:function(e){return e&&Ext.StoreManager.lookup(e,"tree")},updateStore:function(e,t){var i;t&&(t.destroyed||(t.getAutoDestroy()?t.destroy():this.storeListeners.destroy()),this.removeRoot(),this.storeListeners=null),e&&(this.storeListeners=e.on({destroyable:!0,scope:this,nodeappend:"onNodeAppend",nodecollapse:"onNodeCollapse",nodeexpand:"onNodeExpand",nodeinsert:"onNodeInsert",noderemove:"onNodeRemove",rootchange:"onRootChange",update:"onNodeUpdate",refresh:"onRefresh"}),(i=e.getRoot())&&this.createRootItem(i)),this.destroying||this.updateLayout()},updateExpanderFirst:function(e){this.element.toggleCls(this.expanderFirstCls,e)},updateExpanderOnly:function(e){this.element.toggleCls(this.expanderOnlyCls,!e)},updateHighlightPath:function(e){this.element.toggleCls(this.highlightPathCls,e)},updateMicro:function(e){e||(this.unfloatAll(),this.activeFloater=null),this.element.toggleCls(this.microCls,e)},updateUi:function(e,t){var i=this.element,n=this.uiPrefix;t&&i.removeCls(n+t),e&&i.addCls(n+e),delete this.iconSize,this.syncIconSize()},getItem:function(e){var t,i=this.itemMap;return e&&i&&(t=i[e.internalId]),t||null},getItemConfig:function(e,t){return Ext.apply({parentItem:t.isRootListItem?null:t,owner:this,node:e,indent:this.getIndent()},this.getDefaults())},privates:{checkForOutsideClick:function(e){this.activeFloater.element.contains(e.target)||this.unfloatAll()},collapsingForExpand:!1,createItem:function(e,t){var i,n,r=Ext.create(this.getItemConfig(e,t)),s=this.toolsElement;return t.isRootListItem&&(i=r.getToolElement())&&((n=this.findVisiblePreviousSibling(e))?(n=this.getItem(n),i.insertAfter(n.getToolElement())):s.insertFirst(i),i.dom.setAttribute("data-recordId",e.internalId),i.isTool=!0),this.itemMap[e.internalId]=r},createRootItem:function(e){var t;this.itemMap={},this.rootItem=t=new Ext.list.RootTreeItem({indent:this.getIndent(),node:e,owner:this}),this.element.appendChild(t.element),this.itemMap[e.internalId]=t},findVisiblePreviousSibling:function(e){for(var t=e.previousSibling;t;){if(t.data.visible)return t;t=t.previousSibling}return null},floatItem:function(e,t){var i,n=this;e.getFloated()||(n.toolMouseListeners&&(n.toolMouseListeners.destroy(),n.floaterMouseListeners.destroy(),n.floaterMouseListeners=n.toolMouseListeners=null),n.unfloatAll(),!t&&!n.getFloatLeafItems()&&e.getNode().isLeaf()||(n.activeFloater=i=e,n.floatedByHover=t,e.setFloated(!0),t?(n.toolMouseListeners=e.getToolElement().monitorMouseLeave(300,n.checkForMouseLeave,n),n.floaterMouseListeners=(e.floater||e).el.monitorMouseLeave(300,n.checkForMouseLeave,n),i.element.on("mouseover","onMouseOver",n)):Ext.on("mousedown","checkForOutsideClick",n)))},shouldRippleItem:function(e,t){return(!e||!e.getSelected())&&this.mixins.itemrippler.shouldRippleItem.call(this,e,t)},onTouchStart:function(e){this.doItemRipple(e)},onTouchEnd:function(e){this.doItemRipple(e)},doItemRipple:function(e){var t,i=e.getTarget("[data-recordId]");i&&(t=i.getAttribute("data-recordId"),(i=this.itemMap[t])&&this.shouldRippleItem(i,e)&&this.rippleItem(i,e))},onClick:function(e){var t,i=e.getTarget("[data-recordId]");i&&(t=i.getAttribute("data-recordId"),(i=this.itemMap[t])&&i.onClick(e))},onMouseEnter:function(e){this.onMouseOver(e)},onMouseLeave:function(){this.setOverItem(null)},onMouseOver:function(e){var t=Ext.Component.from(e);this.setOverItem(t&&t.isTreeListItem&&t)},checkForMouseLeave:function(e){var t=this.activeFloater,i=e.getRelatedTarget();t&&(i===t.getToolElement().dom||t.element.contains(i)||this.unfloatAll())},onNodeAppend:function(e,t){var i;e&&(i=this.itemMap[e.internalId])&&i.nodeInsert(t,null)},onNodeCollapse:function(e){var t=this.itemMap[e.internalId];t&&t.nodeCollapse(e,this.collapsingForExpand)},onNodeExpand:function(e){var t,i,n,r,s=this.itemMap[e.internalId];if(s){if(!s.isRootItem&&this.getSingleExpand()){for(this.collapsingForExpand=!0,n=0,i=(t=(s.getParentItem()||this.rootItem).getNode().childNodes).length;n<i;++n)(r=t[n])!==e&&r.collapse();this.collapsing=!1}s.nodeExpand(e)}},onNodeInsert:function(e,t,i){var n=this.itemMap[e.internalId];n&&n.nodeInsert(t,i)},onNodeRemove:function(e,t,i){var n;e&&!i&&(n=this.itemMap[e.internalId])&&n.nodeRemove(t)},onNodeUpdate:function(e,t,i,n){var r=this.itemMap[t.internalId];r&&r.nodeUpdate(t,n)},onRefresh:function(e){this.onRootChange(e.getRoot())},onRootChange:function(e){this.removeRoot(),e&&this.createRootItem(e),this.updateLayout(),this.fireEvent("refresh",this)},removeItem:function(e){var t,i,n=this.itemMap,r=e.internalId;n&&(null===(t=n[r]).getParentItem()&&(i=t.getToolElement())&&this.toolsElement.removeChild(i),delete n[r])},removeRoot:function(){var e=this.rootItem;e&&(this.element.removeChild(e.element),this.rootItem=this.itemMap=Ext.destroy(e))},onToolStripClick:function(e){var t,i=e.getTarget("[data-recordId]");i&&(t=i.getAttribute("data-recordId"),(i=this.itemMap[t])&&(i===this.activeFloater?this.unfloatAll():this.floatItem(i,!1)))},onToolStripMouseOver:function(e){var t,i=e.getTarget("[data-recordId]");i&&(t=i.getAttribute("data-recordId"),(i=this.itemMap[t])&&this.floatItem(i,!0))},syncIconSize:function(){var e=this.iconSize||(this.iconSize=parseInt(this.element.getStyle("background-position"),10));this.setIconSize(e)},unfloatAll:function(){var e=this,t=e.activeFloater;t&&(t.setFloated(!1),e.activeFloater=null,e.floatedByHover?(e.toolMouseListeners&&(e.toolMouseListeners.destroy(),e.floaterMouseListeners.destroy(),e.floaterMouseListeners=e.toolMouseListeners=null),t.element.un("mouseover","onMouseOver",e)):Ext.un("mousedown","checkForOutsideClick",e))},defaultIconSize:22,updateIconSize:function(e){this.setIndent(e||this.defaultIconSize)},updateIndent:function(e){var t=this.rootItem;t&&t.setIndent(e)}}}),Ext.define("Ext.overrides.list.Tree",{override:"Ext.list.Tree",constructor:function(e){var t;this.callParent([e]),(t=this.element).isPainted()?this.syncIconSize():t.on({scope:this,painted:this.syncIconSize,single:!0})}}),Ext.define("Ext.theme.material.list.Tree",{override:"Ext.list.Tree",config:{itemRipple:{release:!0,delegate:"."+Ext.baseCSSPrefix+"treelist-row",color:"default"}}}),Ext.define("Ext.mixin.ConfigProxy",function(m){return{extend:Ext.Mixin,mixinConfig:{id:"configproxy",extended:function(e,t,i){var n=i.proxyConfig;t.$configProxies=Ext.apply({},t.superclass.self.$configProxies),n&&(delete i.proxyConfig,m.processClass(t,n))}},onClassMixedIn:function(e){var t=e.prototype,i=t.proxyConfig,n=t.initConfig;t.$proxiedConfigs=null,e.$configProxies={},t.initConfig=function(e){return n.apply(this,arguments),this.$proxiedConfigs=null,this},i&&(delete t.proxyConfig,m.processClass(e,i))},getProxiedConfigs:function(e){var t,i,n,r,s,o=this.config,a=this.self.$configProxies[e],l=a&&a.length;if(l&&this.isConfiguring)for(i=this.$proxiedConfigs||(this.$proxiedConfigs={});0<l--;)i[r=(t=a[l]).name]=t,void 0!==(s=o[r])&&((n=n||{})[r]=s);return n},mergeProxiedConfigs:function(e,t,i){var n=t,r=this.getProxiedConfigs(e);return r&&(t?t.constructor===Object&&(n=this.self.getConfigurator().merge(this,Ext.clone(t),r)):n=r),i&&n===t&&(n=Ext.clone(n)),n},statics:{processClass:function(e,t){var i,n,r,s,o,a,l,c,u,d,h=Ext.Config,f=e.prototype,g={},p=e.$configProxies;for(o in t){for(r=h.get(o).names.get,n=t[o],Ext.isArray(n)?a=null:(a=n.methods,n=n.configs),(u=p[o])?p[o]=u=u.slice():p[o]=u=[],s=0,l=a&&a.length;s<l;++s)f[c=a[s]]?Ext.raise('Cannot proxy method "'+c+'"'):f[c]=m.wrapFn(r,c);for(s=0,l=n&&n.length;s<l;++s)i=h.get(d=n[s]),d in g&&Ext.raise('Duplicate proxy config definitions for "'+d+'"'),d in f.config&&Ext.raise('Config "'+d+'" already defined for class '+f.$className),g[d]=void 0,u.push(i),f[c=i.names.get]?Ext.raise('Cannot proxy "'+d+'" config getter'):f[c]=m.wrapGet(r,c),f[c=i.names.set]?Ext.raise('Cannot proxy "'+d+'" config setter'):f[c]=m.wrapSet(r,c,d)}e.addConfig(g)},wrapFn:function(t,i){return function(){var e=this[t]();return e&&e[i].apply(e,arguments)}},wrapGet:function(t,i){return function(){var e=this[t]();return e&&e[i]()}},wrapSet:function(n,r,s){return function(e){var t,i;return this.isConfiguring&&void 0===e||(t=this[n](),(i=this.$proxiedConfigs)&&i[s]&&(delete i[s],t=null),t&&t[r](e)),this}}}}}),Ext.define("Ext.mixin.ConfigState",{extend:Ext.Mixin,mixinConfig:{id:"configstate"},alternateStateConfig:"",toggleConfigState:function(e){var t,i=this.capturedConfigState,n=this.getConfig(this.alternateStateConfig);if(n)if(e){for(t in i={},n)i[t]=this.getConfig(t);this.capturedConfigState=i,this.setConfig(n)}else!this.isConfiguring&&i&&(this.setConfig(i),delete this.capturedConfigState)}}),Ext.define("Ext.mixin.StoreWatcher",{mixinId:"storewatcher",config:{dataSource:null,owner:null,ownerListeners:{destroyable:!0,storechange:"onOwnerStoreChange"},sourceListeners:null,store:null,storeListeners:null},afterClassMixedIn:function(e){var t,i=this.getConfigurator(),n=e.prototype,r={};for(t in i.configs)n.hasOwnProperty(t)&&(r[t]=n[t],delete n[t]);e.addConfig(r)},onOwnerStoreChange:function(e,t){this.setStore(t)},updateDataSource:function(e){this.syncListeners(e,"$sourceListeners","getSourceListeners")},updateOwner:function(e){var t=this.ownerProperty;t&&(this[t]=e),this.syncListeners(e,"$ownerListeners","getOwnerListeners"),this.setStore(e?e.getStore():null)},applyStore:function(e){return e&&!e.isEmptyStore?e:null},updateStore:function(e){this.syncListeners(e,"$storeListeners","getStoreListeners"),this.syncDataSource()},privates:{syncDataSource:function(){var e,t=this.getStore();e=t?t.getDataSource?t.getDataSource():t.getData():null,this.setDataSource(e)},syncListeners:function(e,t,i){var n=this[t];n&&(this[t]=null,n.destroy()),e&&(i=this[i](),i=Ext.applyIf({destroyable:!0,scope:this},i),this[t]=e.on(i))}}}),Ext.define("Ext.mixin.StyleCacher",{extend:Ext.Mixin,mixinConfig:{id:"stylecacher"},getCachedStyle:function(e,t){var i=this.$styleCache;return t in(i=i||(this.$styleCache={}))||(i[t]=Ext.fly(e).getStyle(t)),i[t]}}),Ext.define("Ext.plugin.AbstractClipboard",{extend:Ext.plugin.Abstract,cachedConfig:{formats:{text:{get:"getTextData",put:"putTextData"}}},config:{memory:null,source:"system",system:"text",gridListeners:null},destroy:function(){var e=this.keyMap,t=this.shared;Ext.destroy(this.destroyListener),e?(this.keyMap=Ext.destroy(e),--t.counter||(t.textArea=Ext.destroy(t.textArea))):this.renderListener=Ext.destroy(this.renderListener),this.callParent()},init:function(e){var t=this.getGridListeners();e.rendered?this.finishInit(e):t&&(this.renderListener=e.on(Ext.apply({scope:this,destroyable:!0,single:!0},t)))},onCmpReady:function(){this.renderListener=null,this.finishInit(this.getCmp())},getTarget:function(e){return e.el},privates:{shared:{counter:0,data:null,textArea:null},applyMemory:function(e){if(e=this.applySource(e))for(var t=e.length;0<t--;)"system"===e[t]&&Ext.raise('Invalid clipboard format "'+e[t]+'"');return e},applySource:function(e){if(e&&(Ext.isString(e)?e=[e]:0===e.length&&(e=null)),e){var t,i=this.getFormats();for(t=e.length;0<t--;)"system"===e[t]||i[e[t]]||Ext.raise('Invalid clipboard format "'+e[t]+'"')}return e||null},applySystem:function(e){return this.getFormats()[e]||Ext.raise('Invalid clipboard format "'+e+'"'),e},doCutCopy:function(e,t){var i,n=this.allFormats||this.syncFormats(),r=this.getData(t,n),s=this.getMemory(),o=this.getSystem();!1!==this.validateAction(e)&&(this.shared.data=s&&r,o&&(i=r[o],n[o]<3&&delete r[o],this.setClipboardData(i)))},doPaste:function(e,t){var i=this.getFormats();this[i[e].put](t,e)},finishInit:function(e){var t=this;t.keyMap=new Ext.util.KeyMap({target:t.getTarget(e),ignoreInputFields:!0,binding:[{ctrl:!0,key:"x",fn:t.onCut,scope:t},{ctrl:!0,key:"c",fn:t.onCopy,scope:t},{ctrl:!0,key:"v",fn:t.onPaste,scope:t}]}),++t.shared.counter,t.destroyListener=e.on({destroyable:!0,destroy:"destroy",scope:t})},getData:function(e,t){var i,n,r,s,o=this.getFormats();if(Ext.isString(t))o[t]||Ext.raise('Invalid clipboard format "'+t+'"'),i=this[o[t].get](t,e);else{if(i={},s=[],t)for(r in t)o[r]||Ext.raise('Invalid clipboard format "'+r+'"'),s.push(r);else s=Ext.Object.getAllKeys(o);for(n=s.length;0<n--;)i[r]=this[o[r].get](r,e&&!n)}return i},getHiddenTextArea:function(){var e,t=this.shared;return(e=t.textArea)||(e=t.textArea=Ext.getBody().createChild({tag:"textarea",tabIndex:-1,style:{position:"absolute",top:"-1000px",width:"1px",height:"1px"}})).suspendFocusEvents(),e},onCopy:function(e,t){this.doCutCopy(t,!1)},onCut:function(e,t){this.doCutCopy(t,!0)},onPaste:function(e,t){var i,n,r,s=this.shared.data,o=this.getSource();if(!1!==this.validateAction(t)&&o)for(i=0,n=o.length;i<n;++i){if("system"===(r=o[i])){r=this.getSystem(),this.pasteClipboardData(r);break}if(s&&r in s){this.doPaste(r,s[r]);break}}},pasteClipboardData:function(e){var t,i,n=this,r=window.clipboardData;r&&r.getData?n.doPaste(e,r.getData("text")):(i=Ext.Element.getActiveElement(!0),(t=n.getHiddenTextArea().dom).value="",i&&i.suspendFocusEvents(),t.focus(),Ext.defer(function(){i&&(i.focus(),i.resumeFocusEvents()),n.doPaste(e,t.value),t.value=""},100,n))},setClipboardData:function(e){var t,i,n=window.clipboardData;n&&n.setData?n.setData("text",e):(t=this.getHiddenTextArea().dom,i=Ext.Element.getActiveElement(!0),t.value=e,i&&i.suspendFocusEvents(),t.focus(),t.select(),Ext.defer(function(){t.value="",i&&(i.focus(),i.resumeFocusEvents())},50))},syncFormats:function(){var e,t,i={},n=this.getMemory(),r=this.getSystem();if(r&&(i[r]=1),n)for(e=n.length;0<e--;)i[t=n[e]]=i[t]?3:2;return this.allFormats=i},updateMemory:function(){this.allFormats=null},updateSystem:function(){this.allFormats=null},validateAction:Ext.privateFn}}),Ext.define("Ext.plugin.MouseEnter",{extend:Ext.plugin.Abstract,alias:"plugin.mouseenter",element:"el",init:function(e){this.delegate||Ext.raise("mouseenter plugin must be configured with a delegate selector"),this.handler||Ext.raise("mouseenter plugin must be configured with handler callback");var t=this,i={mouseover:"onMouseEvent",scope:t,destroyable:!0},n=t.element;(t.leaveHandler||t.delay)&&(i.mouseout="onMouseEvent"),"string"==typeof n&&(n=e[t.element]),n?t.mouseListener=Ext.get(n).on(i):e.on({render:function(){t.mouseListener=e[t.element].on(i)},single:!0})},onMouseEvent:function(e){var t=e.getTarget(this.delegate);t&&t!==e.getRelatedTarget(this.delegate)&&(this.delay?(Ext.undefer(this.mouseEventTimer),this.mouseEventTimer=Ext.defer(this.handleMouseEvent,this.delay,this,[e,t])):this.handleMouseEvent(e,t))},handleMouseEvent:function(e,t){"mouseover"===e.type?Ext.callback(this.handler,null,[e,t],0,this.cmp,this.scope):this.leaveHandler&&Ext.callback(this.leaveHandler,null,[e,t],0,this.cmp,this.scope)},destroy:function(){Ext.destroy(this.mouseListener),this.callParent()}}),Ext.define("Ext.util.Color",{alternateClassName:"Ext.draw.Color",statics:{colorToHexRe:/(.*?)rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/,rgbToHexRe:/\\s*rgb\\((\\d+),\\s*(\\d+),\\s*(\\d+)\\)/,rgbaToHexRe:/\\s*rgba\\((\\d+),\\s*(\\d+),\\s*(\\d+),\\s*([.\\d]+)\\)/,hexRe:/\\s*#([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)([0-9a-fA-F][0-9a-fA-F]?)\\s*/,NONE:"none",RGBA_NONE:"rgba(0, 0, 0, 0)"},isColor:!0,lightnessFactor:.2,constructor:function(e,t,i,n){this.setRGB(e,t,i,n)},clone:function(){return new this.self(this.r,this.g,this.b,this.a)},setRGB:function(e,t,i,n){this.r=Math.min(255,Math.max(0,e)),this.g=Math.min(255,Math.max(0,t)),this.b=Math.min(255,Math.max(0,i)),this.a=void 0===n?1:Math.min(1,Math.max(0,n))},getBrightness:function(){return(299*(this.r/255*100)+587*(this.g/255*100)+114*(this.b/255*100))/1e3},getGrayscale:function(){return.3*this.r+.59*this.g+.11*this.b},getHSL:function(){var e,t=this.r/255,i=this.g/255,n=this.b/255,r=Math.max(t,i,n),s=Math.min(t,i,n),o=r-s,a=0,l=.5*(r+s);return s!==r&&(a=l<=.5?o/(r+s):o/(2-r-s),(e=t===r?60*(i-n)/o:i===r?120+60*(n-t)/o:240+60*(t-i)/o)<0&&(e+=360),360<=e&&(e-=360)),[e,a,l]},getHSV:function(){var e,t=this.r/255,i=this.g/255,n=this.b/255,r=Math.max(t,i,n),s=Math.min(t,i,n),o=r-s,a=0;return s!=r&&(a=r?o/r:0,(e=t===r?60*(i-n)/o:i===r?60*(n-t)/o+120:60*(t-i)/o+240)<0&&(e+=360),360<=e&&(e-=360)),[e,a,r]},setHSL:function(e,t,i){var n,r,s,o=Math.abs;if(e=(e%360+360)%360,i=1<i?1:i<0?0:i,0===(t=1<t?1:t<0?0:t)||null===e)i*=255,this.setRGB(i,i,i);else switch(e/=60,r=(n=t*(1-o(2*i-1)))*(1-o(e%2-1)),s=i-n/2,s*=255,n*=255,r*=255,Math.floor(e)){case 0:this.setRGB(n+s,r+s,s);break;case 1:this.setRGB(r+s,n+s,s);break;case 2:this.setRGB(s,n+s,r+s);break;case 3:this.setRGB(s,r+s,n+s);break;case 4:this.setRGB(r+s,s,n+s);break;case 5:this.setRGB(n+s,s,r+s)}return this},setHSV:function(e,t,i){var n,r,s;if(e=(e%360+360)%360,i=1<i?1:i<0?0:i,0===(t=1<t?1:t<0?0:t)||null===e)i*=255,this.setRGB(i,i,i);else switch(e/=60,r=(n=i*t)*(1-Math.abs(e%2-1)),s=i-n,s*=255,n*=255,r*=255,Math.floor(e)){case 0:this.setRGB(n+s,r+s,s);break;case 1:this.setRGB(r+s,n+s,s);break;case 2:this.setRGB(s,n+s,r+s);break;case 3:this.setRGB(s,r+s,n+s);break;case 4:this.setRGB(r+s,s,n+s);break;case 5:this.setRGB(n+s,s,r+s)}return this},createLighter:function(e){var t=this.clone();return t.lighten(e),t},lighten:function(e){var t;e||0===e||(e=this.lightnessFactor),t=this.getHSL(),this.setHSL(t[0],t[1],Ext.Number.constrain(t[2]+e,0,1))},createDarker:function(e){var t=this.clone();return t.darken(e),t},darken:function(e){return e||0===e||(e=this.lightnessFactor),this.lighten(-e)},toString:function(){var e,t,i,n=Math.round;return 1===this.a?(e=n(this.r).toString(16),t=n(this.g).toString(16),i=n(this.b).toString(16),["#",e=1===e.length?"0"+e:e,t=1===t.length?"0"+t:t,i=1===i.length?"0"+i:i].join("")):"rgba("+[n(this.r),n(this.g),n(this.b),0===this.a?0:this.a.toFixed(15)].join(", ")+")"},toHex:function(e){var t=this.r,i=this.g;return"#"+("000000"+(this.b|i<<8|t<<16).toString(16)).slice(-6)},setFromString:function(e){var t,i,n,r,s=1,o=parseInt;if(e===Ext.util.Color.NONE)return this.r=this.g=this.b=this.a=0,this;if(4!==e.length&&7!==e.length||"#"!==e.substr(0,1)){if(t=e.match(Ext.util.Color.rgbToHexRe))i=+t[1],n=+t[2],r=+t[3];else if(t=e.match(Ext.util.Color.rgbaToHexRe))i=+t[1],n=+t[2],r=+t[3],s=+t[4];else if(Ext.util.Color.ColorList.hasOwnProperty(e.toLowerCase()))return this.setFromString(Ext.util.Color.ColorList[e.toLowerCase()])}else(t=e.match(Ext.util.Color.hexRe))&&(i=o(t[1],16)>>0,n=o(t[2],16)>>0,r=o(t[3],16)>>0,4===e.length&&(i+=16*i,n+=16*n,r+=16*r));return void 0===i||(this.r=i,this.g=n,this.b=r,this.a=s),this}},function(){var r=new this;this.addStatics({fly:function(e,t,i,n){switch(arguments.length){case 1:r.setFromString(e);break;case 3:case 4:r.setRGB(e,t,i,n);break;default:return null}return r},ColorList:{aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgrey:"#d3d3d3",lightgreen:"#90ee90",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370d8",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#d87093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},fromHSL:function(e,t,i){return new this(0,0,0,0).setHSL(e,t,i)},fromHSV:function(e,t,i){return new this(0,0,0,0).setHSL(e,t,i)},fromString:function(e){return new this(0,0,0,0).setFromString(e)},create:function(e){return e instanceof this?e:Ext.isArray(e)?new Ext.util.Color(e[0],e[1],e[2],e[3]):Ext.isString(e)?Ext.util.Color.fromString(e):2<arguments.length?new Ext.util.Color(e,arguments[1],arguments[2],arguments[3]):new Ext.util.Color(0,0,0,0)}})}),Ext.define("Ext.override.sparkline.Base",{override:"Ext.sparkline.Base",statics:{constructTip:function(){return new Ext.tip.ToolTip({id:"sparklines-tooltip",trackMouse:!0,showDelay:0,dismissDelay:0,hideDelay:400})}},onMouseMove:function(e){this.currentEvent=e,this.getSharedTooltip().currentTarget.attach(this.element),this.callParent([e])},privates:{hideTip:function(){this.getSharedTooltip().delayHide()},showTip:function(){this.getSharedTooltip().handleTargetOver(this.currentEvent,this.element)}}}),Ext.define("Ext.util.Base64",{singleton:!0,_str:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(e){var t,i,n,r,s,o,a,l,c="",u=0;for(l=(e=this._utf8_encode(e)).length;u<l;)r=(t=e.charCodeAt(u++))>>2,s=(3&t)<<4|(i=e.charCodeAt(u++))>>4,o=(15&i)<<2|(n=e.charCodeAt(u++))>>6,a=63&n,isNaN(i)?o=a=64:isNaN(n)&&(a=64),c=c+this._str.charAt(r)+this._str.charAt(s)+this._str.charAt(o)+this._str.charAt(a);return c},decode:function(e){var t,i,n,r,s,o,a,l="",c=0;for(a=(e=e.replace(/[^A-Za-z0-9+=\\/]/g,"")).length;c<a;)t=this._str.indexOf(e.charAt(c++))<<2|(r=this._str.indexOf(e.charAt(c++)))>>4,i=(15&r)<<4|(s=this._str.indexOf(e.charAt(c++)))>>2,n=(3&s)<<6|(o=this._str.indexOf(e.charAt(c++))),l+=String.fromCharCode(t),64!==s&&(l+=String.fromCharCode(i)),64!==o&&(l+=String.fromCharCode(n));return l=this._utf8_decode(l)},_utf8_encode:function(e){var t,i,n,r="";for(i=0,n=(e=e.replace(/\\r\\n/g,"\\n")).length;i<n;i++)(t=e.charCodeAt(i))<128?r+=String.fromCharCode(t):(127<t&&t<2048?r+=String.fromCharCode(t>>6|192):(r+=String.fromCharCode(t>>12|224),r+=String.fromCharCode(t>>6&63|128)),r+=String.fromCharCode(63&t|128));return r},_utf8_decode:function(e){for(var t="",i=0,n=0,r=0,s=0,o=e.length;i<o;)(n=e.charCodeAt(i))<128?(t+=String.fromCharCode(n),i++):191<n&&n<224?(s=e.charCodeAt(i+1),t+=String.fromCharCode((31&n)<<6|63&s),i+=2):(s=e.charCodeAt(i+1),r=e.charCodeAt(i+2),t+=String.fromCharCode((15&n)<<12|(63&s)<<6|63&r),i+=3);return t}}),Ext.define("Ext.util.CSS",function(){function o(e,t){return t.charAt(1).toUpperCase()}var a,l=null,s=document,c=/(-[a-z])/gi;return{singleton:!0,rules:l,initialized:!1,constructor:function(){a=this},createStyleSheet:function(e,t){var i,n=s.getElementsByTagName("head")[0],r=s.createElement("style");return r.setAttribute("type","text/css"),t&&r.setAttribute("id",t),(i=r.styleSheet)?(n.appendChild(r),i.cssText=e):(r.appendChild(s.createTextNode(e)),n.appendChild(r),i=r.sheet),a.cacheStyleSheet(i),i},removeStyleSheet:function(e){var t="string"==typeof e?s.getElementById(e):e.ownerNode;t&&t.parentNode.removeChild(t)},swapStyleSheet:function(e,t){var i;a.removeStyleSheet(e),(i=s.createElement("link")).setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("id",e),i.setAttribute("href",t),s.getElementsByTagName("head")[0].appendChild(i)},cacheStyleSheet:function(e){l=l||(a.rules={});try{var t,i,n=e.cssRules||e.rules,r=n.length-1,s=e.imports,o=s?s.length:0;for(i=0;i<o;++i)a.cacheStyleSheet(s[i]);for(;0<=r;--r)(t=n[r]).styleSheet&&a.cacheStyleSheet(t.styleSheet),a.cacheRule(t,e)}catch(e){}},cacheRule:function(e,t){var i,n,r;if(e.styleSheet)return a.cacheStyleSheet(e.styleSheet);if(i=e.selectorText)for(n=(i=i.split(",")).length,r=0;r<n;r++)l[Ext.String.trim(i[r]).toLowerCase()]={parentStyleSheet:t,cssRule:e}},getRules:function(e){var t,i={};for(t in null!==l&&!e||a.refreshCache(),l)i[t]=l[t].cssRule;return i},refreshCache:function(){var e=s.styleSheets,t=0,i=e.length;for(l=a.rules={};t<i;t++)try{e[t].disabled||a.cacheStyleSheet(e[t])}catch(e){}},getRule:function(e,t,i){var n,r;if(l&&!t||a.refreshCache(),!Ext.isArray(e))return(r=l[e.toLowerCase()])&&!i&&(r=r.cssRule),r||null;for(n=0;n<e.length;n++)if(l[e[n]])return i?l[e[n].toLowerCase()]:l[e[n].toLowerCase()].cssRule;return null},createRule:function(e,t,i){var n,r=e.cssRules||e.rules,s=r.length;return e.insertRule?e.insertRule(t+" {"+i+"}",s):e.addRule(t,i||" "),a.cacheRule(n=r[s],e),n},updateRule:function(e,t,i){var n,r,s;if(Ext.isArray(e)){for(r=0;r<e.length;r++)if(a.updateRule(e[r],t,i))return!0}else if(n=a.getRule(e)){if(2===arguments.length)for(t in s=Ext.Element.parseStyles(t))n.style[t.replace(c,o)]=s[t];else n.style[t.replace(c,o)]=i;return!0}return!1},deleteRule:function(e){var t,i,n=a.getRule(e,!1,!0);n&&(t=n.parentStyleSheet,i=Ext.Array.indexOf(t.cssRules||t.rules,n.cssRule),t.deleteRule?t.deleteRule(i):t.removeRule(i),delete l[e])}}}),Ext.define("Ext.util.DelimitedValue",{dateFormat:"C",delimiter:"\\t",lineBreak:"\\n",quote:'"',lineBreakRe:/\\r?\\n/g,lastLineBreakRe:/(\\r?\\n|\\r)$/,constructor:function(e){e&&Ext.apply(this,e),this.parseREs={},this.quoteREs={}},decode:function(e,t,i){if(!e)return[];var n,r,s,o,a,l=[],c=[l],u=void 0!==i?i:this.quote,d=this.quoteREs;for(n=this.parseREs[t=t||this.delimiter]||new RegExp("(\\\\"+t+"|\\\\r?\\\\n|\\\\r|^)(?:\\\\"+u+"([^\\\\"+u+"]*(?:\\\\"+u+"\\\\"+u+"[^\\\\"+u+"]*)*)\\\\"+u+"|([^\\\\"+t+"\\\\r\\\\n]*))","gi"),r=d[u]||(d[u]=new RegExp("\\\\"+u+"\\\\"+u,"g"));s=n.exec(e);)(o=s[1]).length&&o!==t&&c.push(l=[]),s.index||s[0].charAt(0)!==t||l.push(""),a=s[2]?s[2].replace(r,u):s[3],l.push(a);return c},encode:function(e,t,i){for(var n,r,s,o=t||this.delimiter,a=this.dateFormat,l=void 0!==i?i:this.quote,c=l+l,u=e.length,d=this.lineBreakRe,h=[],f=[];0<u--;){for(s=e[u],f.length=r=s.length;0<r--;)null==(n=s[r])?n="":"string"==typeof n?n&&null!==l&&(-1<n.indexOf(l)?n=l+n.split(l).join(c)+l:(-1<n.indexOf(o)||d.test(n))&&(n=l+n+l)):Ext.isDate(n)?n=Ext.Date.format(n,a):n&&(isNaN(n)||Ext.isArray(n))&&Ext.raise("Cannot serialize "+Ext.typeOf(n)+" into CSV"),f[r]=n;h[u]=f.join(o)}return h.join(this.lineBreak)}}),Ext.define("Ext.util.ClickRepeater",{alternateClassName:"Ext.util.TapRepeater",mixins:[Ext.mixin.Observable],config:{el:null,target:null,disabled:null},interval:20,delay:250,preventDefault:!0,stopDefault:!1,timer:0,handler:null,scope:null,constructor:function(e){2===arguments.length&&(this.setEl(e),e=arguments[1]),this.mixins.observable.constructor.call(this,e)},destroy:function(){this.setEl(null),this.callParent()},privates:{fireClick:function(e){this.fireEvent("click",this,e),Ext.callback(this.handler,this.scope,[this,e],0,this.getTarget())},updateDisabled:function(e){e?(this.savedEl=this.getEl(),this.setEl(null)):this.savedEl&&this.setEl(this.savedEl)},updateTarget:function(e){this.setEl(e.el)},updateEl:function(e,t){var i,n=this;t&&(t.selectable(),Ext.undefer(n.timer),n.pressedCls&&t.removeCls(n.pressedCls),Ext.getDoc().un("mouseup",n.handleMouseUp,n),n.elListeners=Ext.destroy(n.elListeners)),e&&(e.unselectable(),i={mousedown:n.handleMouseDown,scope:n,destroyable:!0},(n.preventDefault||n.stopDefault)&&(i.click=n.eventOptions),n.elListeners=e.on(i))},eventOptions:function(e){this.preventDefault&&e.preventDefault(),this.stopDefault&&e.stopEvent()},handleMouseDown:function(e){var t=this,i=t.getEl();Ext.undefer(t.timer),t.pressedCls&&i.addCls(t.pressedCls),t.mousedownTime=Ext.now(),"mouse"===e.pointerType&&i.on("mouseout",t.handleMouseOut,t),Ext.getDoc().on("mouseup",t.handleMouseUp,t),t.fireEvent("mousedown",t,e),t.fireClick(e),t.accelerate&&(t.delay=400),t.timer=Ext.defer(t.click,t.delay||t.interval,t,[e]),t.mousedownPreventDefault&&e.preventDefault(),t.mousedownStopEvent&&e.stopEvent()},click:function(e){this.fireClick(e),this.timer=Ext.defer(this.click,this.accelerate?this.easeOutExpo(Ext.now()-this.mousedownTime,400,-390,12e3):this.interval,this,[e])},easeOutExpo:function(e,t,i,n){return e===n?t+i:i*(1-Math.pow(2,-10*e/n))+t},handleMouseOut:function(){var e=this.getEl();Ext.undefer(this.timer),this.pressedCls&&e.removeCls(this.pressedCls),e.on("mouseover",this.handleMouseReturn,this)},handleMouseReturn:function(e){var t=this.getEl();t.un("mouseover",this.handleMouseReturn,this),this.pressedCls&&t.addCls(this.pressedCls),this.click(e)},handleMouseUp:function(e){var t=this,i=t.getEl();Ext.undefer(t.timer),i.un("mouseover",t.handleMouseReturn,t),i.un("mouseout",t.handleMouseOut,t),Ext.getDoc().un("mouseup",t.handleMouseUp,t),t.pressedCls&&i.removeCls(t.pressedCls),t.fireEvent("mouseup",t,e)}}}),Ext.define("Ext.util.Spans",{isSpans:!0,constructor:function(){this.spans=this.spans||[]},clear:function(){return this.spans.length=0,this},add:function(e,t){void 0===t&&("number"==typeof e?t=e+1:(t=e[1],e=e[0]));var i,n,r,s,o,a=this.spans;if((r=this.bisect(e))&&(i=(o=a[r-1])[0],e<=(n=o[1]))){if(t<=n)return!1;e=i,a.splice(--r,1)}return r<(s=this.bisect(t))&&(o=a[s-1],t=Math.max(t,o[1])),s<a.length&&t===(o=a[s])[0]&&(t=o[1],++s),a.splice(r,s-r,[e,t]),!0},contains:function(e,t){void 0===t&&("number"==typeof e?t=e+1:(t=e[1],e=e[0]));var i,n,r=this.spans,s=this.bisect(e),o=!1;return s&&e<(i=r[s-1][1])?o=t<=i:s<r.length&&(o=(n=r[s])[0]<=e&&t<=n[1]),o},each:function(e,t){var i,n,r,s=this.spans,o=s.length;for(i=0;i<o;i++)for(r=(n=s[i])[0];r<n[1];r++)if(!1===e.call(t||this,i))return},intersects:function(e,t){void 0===t&&("number"==typeof e?t=e+1:(t=e[1],e=e[0]));var i=this.spans,n=this.bisect(e),r=!1;return n&&e<i[n-1][1]?r=!0:n<i.length&&(r=i[n][0]<t),r},remove:function(e,t){void 0===t&&("number"==typeof e?t=e+1:(t=e[1],e=e[0]));var i,n,r,s=this.spans,o=this.bisect(e),a=!1;if(o&&e<(r=(n=s[o-1])[1])){if(n[1]=e,t<r)return s.splice(o,0,[t,r]),!0;a=!0}return o<(i=this.bisect(t))&&(a=!0,t<(n=s[i-1])[1]&&(n[0]=t,--i),(i-=o)&&s.splice(o,i)),a},stash:function(){return this.spans.slice()},unstash:function(e){return this.spans=e,this},getCount:function(){var e,t,i=this.spans,n=i.length,r=0;for(e=0;e<n;e++)r+=(t=i[e])[1]-t[0];return r},privates:{bisect:function(e){return Ext.Number.bisectTuples(this.spans,e,0)}}}),Ext.define("Ext.util.TsvDecoder",{extend:Ext.util.DelimitedValue,alternateClassName:"Ext.util.TSV",delimiter:"\\t"},function(e){Ext.util.TSV=new e}),Ext.define("Ext.util.TaskManager",{extend:Ext.util.TaskRunner,alternateClassName:["Ext.TaskManager"],singleton:!0}),Ext.define("Ext.util.TextMetrics",{statics:{shared:null,measure:function(e,t,i){var n=this.shared||(this.shared=new this(e,i));return n.bind(e),n.setFixedWidth(i||"auto"),n.getSize(t)},destroy:function(){this.shared=Ext.destroy(this.shared)}},constructor:function(e,t){var i=this.measure=Ext.getBody().createChild({"data-sticky":!0,role:"presentation",cls:Ext.baseCSSPrefix+"textmetrics",style:{position:"absolute",left:"-1000px",top:"-1000px",visibility:"hidden"}});e&&this.bind(e),t&&i.setWidth(t)},getSize:function(e){var t,i=this.measure;return i.setHtml(e),t=i.getSize(),i.setHtml(""),t},bind:function(e){this.measure.setStyle((this.el||(this.self.prototype.el=new Ext.dom.Fly)).attach(e).getStyle(["font-size","font-size-adjust","font-style","font-weight","font-family","font-kerning","font-stretch","line-height","text-transform","text-decoration","letter-spacing","word-break"]))},setFixedWidth:function(e){this.measure.setWidth(e)},getWidth:function(e){return this.measure.dom.style.width="auto",this.getSize(e).width},getHeight:function(e){return this.getSize(e).height},destroy:function(){this.el=this.measure=Ext.destroy(this.measure),this.callParent()}},function(){Ext.Element.override({getTextWidth:function(e,t,i){return Ext.Number.constrain(Ext.util.TextMetrics.measure(this.dom,Ext.valueFrom(e,this.dom.innerHTML,!0)).width,t||0,i||1e6)}})}),Ext.define("Ext.util.translatable.ScrollPosition",{extend:Ext.util.translatable.Dom,alias:"translatable.scrollposition",constructor:function(e){e&&e.element&&(this.x=e.element.getScrollLeft(),this.y=e.element.getScrollTop()),this.callParent([e])},translateAnimated:function(){var e=this.getElement();this.x=e.getScrollLeft(),this.y=e.getScrollTop(),this.callParent(arguments)},doTranslate:function(e,t){var i=this.getElement();i.setScrollLeft(Math.round(e)),i.setScrollTop(Math.round(t))},getPosition:function(){var e=this.position,t=this.getElement();return e.x=t.getScrollLeft(),e.y=t.getScrollTop(),e}}),Ext.define("Ext.Button",{extend:Ext.Component,xtype:"button",isButton:!0,cachedConfig:{buttonType:"button",iconCls:null,textAlign:null,menuAlign:"tl-bl?",destroyMenu:!0,stretchMenu:!1},config:{allowDepress:!0,badgeText:null,text:null,icon:!1,iconAlign:"left",pressedDelay:0,menu:{lazy:!0,$value:null},arrow:null,arrowAlign:"right",handler:null,toggleHandler:null,scope:null,autoEvent:null,ui:null,enableToggle:!1,value:null},eventedConfig:{pressed:!1},preventDefaultAction:!0,isMenuOwner:!0,baseCls:Ext.baseCSSPrefix+"button",hasMenuCls:Ext.baseCSSPrefix+"has-menu",hoveredCls:Ext.baseCSSPrefix+"hovered",pressedCls:Ext.baseCSSPrefix+"pressed",pressingCls:Ext.baseCSSPrefix+"pressing",hasBadgeCls:Ext.baseCSSPrefix+"has-badge",hasIconCls:Ext.baseCSSPrefix+"has-icon",hasTextCls:Ext.baseCSSPrefix+"has-text",hasArrowCls:Ext.baseCSSPrefix+"has-arrow",noArrowCls:Ext.baseCSSPrefix+"no-arrow",defaultBindProperty:"text",publishes:["pressed"],element:{reference:"element",listeners:{click:"onClick"}},focusable:!0,focusEl:"buttonElement",ariaEl:"buttonElement",backgroundColorEl:"innerElement",focusClsEl:"el",initialize:function(){var e=this.el;this.callParent(),this.getConfig("menu",!0)&&this.addCls(this.hasMenuCls),e.on({scope:this,touchstart:"onPress"}),e.addClsOnOver(this.hoveredCls,this.isEnabled,this)},getTemplate:function(){return[{reference:"innerElement",cls:Ext.baseCSSPrefix+"inner-el",children:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",children:[{cls:Ext.baseCSSPrefix+"icon-el "+Ext.baseCSSPrefix+"font-icon",reference:"iconElement"},{reference:"textElement",cls:Ext.baseCSSPrefix+"text-el"}]},{reference:"arrowElement",cls:Ext.baseCSSPrefix+"arrow-el "+Ext.baseCSSPrefix+"font-icon"}]},{reference:"badgeElement",cls:Ext.baseCSSPrefix+"badge-el"},this.getButtonTemplate()]},getButtonTemplate:function(){return{tag:"button",reference:"buttonElement",cls:Ext.baseCSSPrefix+"button-el",listeners:{focus:"handleFocusEvent",blur:"handleBlurEvent"}}},shouldRipple:function(){var e,t,i=this.getUi(),n=this.getRipple();return!(!!i&&0<=i.split(" ").indexOf("fab"))&&n&&void 0===n.bound&&(e=this.getText(),t=this.getIconCls(),e&&0!==e.length||!t||((n=Ext.clone(n)).bound=!1,n.measureSelector="x-icon-el")),n},isPressed:function(){return Boolean(this.getPressed())},toggle:function(){this.setPressed(!this.isPressed())},updateBadgeText:function(e){var t=this.el,i=this.badgeElement,n=this.hasBadgeCls;e?(i.setText(e),t.addCls(n)):t.removeCls(n)},updateButtonType:function(e){this.buttonElement.dom.setAttribute("type",e)},updateText:function(e){this.textElement.setHtml(e),this.toggleCls(this.hasTextCls,!!e)},updateHtml:function(e){this.setText(e)},applyPressed:function(e){return Boolean(e)},updatePressed:function(e){var t=this.getToggleHandler();t&&!this.isConfiguring&&Ext.callback(t,this.getScope(),[this,e],0,this),this.element.toggleCls(this.pressedCls,e)},updateIcon:function(e){var t=this.iconElement,i=this.hasIconCls;e?(this.addCls(i),t.setStyle("background-image","url("+e+")")):(t.setStyle("background-image",""),this.getIconCls()||this.removeCls(i))},updateIconCls:function(e,t){var i=this.iconElement,n=this.hasIconCls;e?(this.addCls(n),i.replaceCls(t,e)):(i.removeCls(t),this.getIcon()||this.removeCls(n))},updateIconAlign:function(e,t){var i=this.el,n=Ext.baseCSSPrefix+"icon-align-";i.removeCls(n+t),i.addCls(n+e)},_textAlignCls:{left:Ext.baseCSSPrefix+"text-align-left",right:Ext.baseCSSPrefix+"text-align-right",center:""},updateTextAlign:function(e,t){var i=this._textAlignCls,n=i[e||"center"],r=i[t||"center"];this.replaceCls(r,n)},updateArrowAlign:function(e,t){var i=this.element,n=Ext.baseCSSPrefix+"arrow-align-";t&&i.removeCls(n+t),i.addCls(n+e)},applyMenu:function(e){return e&&(e.isMenu||(Ext.isArray(e)&&(e={items:e}),e.xtype||(e.xtype="menu"),e.ownerCmp=this,e=Ext.widget(e)),this.menuMinWidth=e.getMinWidth()),e},updateMenu:function(e,t){var i={scope:this,hide:"onMenuHide"};t&&!t.destroyed&&(this.getDestroyMenu()?t.destroy():t.isMenu&&t.un(i)),this.toggleCls(this.hasMenuCls,!!e),e&&e.isMenu&&e.on(i)},updateArrow:function(e){this.toggleCls(this.noArrowCls,!e),this.toggleCls(this.hasArrowCls,!!e)},applyAutoEvent:function(e){return"string"==typeof e&&(e={name:e,scope:this.scope||this}),e},updateAutoEvent:function(e){var t=e.name,i=e.scope;this.setHandler(function(){i.fireEvent(t,i,this)}),this.setScope(i)},applyPressedDelay:function(e){return Ext.isNumber(e)?e:e?100:0},enableFocusable:function(){this.buttonElement.dom.disabled=!1,this.callParent()},disableFocusable:function(){this.callParent(),this.buttonElement.dom.disabled=!0},findEventTarget:function(){return this.element},onPress:function(e){var t=this,i=this.findEventTarget(e),n=t.getPressedDelay(),r=t.pressingCls;t.getDisabled()||e.button||(0<n?t.pressedTimeout=Ext.defer(function(){delete t.pressedTimeout,i&&i.addCls(r)},n):i.addCls(r),Ext.GlobalEvents.setPressedComponent(t,e))},onRelease:function(e){this.fireAction("release",[this,e],"doRelease")},doRelease:function(e,t){var i=e.findEventTarget(t);e.getDisabled()||(e.hasOwnProperty("pressedTimeout")?(Ext.undefer(e.pressedTimeout),delete e.pressedTimeout):i&&i.removeCls(e.pressingCls))},onClick:function(e){return this.onTap(e)},onTap:function(e){if(this.getDisabled())return!1;this.fireAction("tap",[this,e],"doTap")},doTap:function(e,t){var i=e.getMenu(),n=e.getHandler();t&&t.preventDefault&&e.preventDefaultAction&&t.preventDefault(),i?e.toggleMenu(t,i):(!e.getToggleHandler()&&!e.getEnableToggle()||!e.getAllowDepress()&&e.isPressed()||e.toggle(),n&&Ext.callback(n,e.getScope(),[e,t],0,e))},onEnterKey:function(e){return this.onTap(e),e.stopEvent(),!1},onDownKey:function(e){var t=this.getMenu();if(t&&!this.getDisabled())return this.showMenu(e,t),e.stopEvent(),!1},onEscKey:function(e){var t=this.getMenu();if(t&&!this.getDisabled()&&t.isVisible())return t.hide(),e.stopEvent(),!1},onFocus:function(e){this.keyHandlersAdded||(this.setKeyMap({scope:"this",SPACE:"onEnterKey",ENTER:"onEnterKey",DOWN:"onDownKey",ESC:"onEscKey"}),this.keyHandlersAdded=!0),this.callParent([e])},onMenuHide:function(e){e.isMenu&&!this.$buttonWasPressed&&this.setPressed(!1)},toggleMenu:function(e,t){(t=t||this.getMenu())&&(t.isVisible()?this.hideMenu(e,t):this.showMenu(e,t))},hideMenu:function(e,t){(t=t||this.getMenu())&&t.hide()},showMenu:function(e,t){var i,n=!e||e.pointerType;t=t||this.getMenu(),this.setupMenuStretch(t),t&&(t.isVisible()?n?t.hide():t.focus():(t.autoFocus=!n,t.isMenu?(this.$buttonWasPressed=i=this.getPressed(),t.showBy(this.element,this.getMenuAlign()),i||this.setPressed(!0)):t.isViewportMenu?t.setDisplayed(!t.getDisplayed()):t.show()))},doDestroy:function(){this.hasOwnProperty("pressedTimeout")&&Ext.undefer(this.pressedTimeout),this.setMenu(null),this.callParent()},getFocusClsEl:function(){return this.element},privates:{setupMenuStretch:function(e){this.menuMinWidth||(this.getStretchMenu()?e.setMinWidth(this.el.measure("w")):e.setMinWidth(null))}}}),Ext.define("Ext.theme.material.Button",{override:"Ext.Button",config:{ripple:{delegate:"."+Ext.baseCSSPrefix+"inner-el"}},materialIconRe:/^md-icon[-|_](.*)/,applyIconCls:function(e){var t,i,n,r;if(e){for(t=(e=Ext.dom.Element.splitCls(e)).length,i=0;i<t;i++)if((r=(n=e[i])&&n.match(this.materialIconRe))&&1<r.length){e.unshift("md-icon");break}return e.join(" ")}return e}}),Ext.define("Ext.Title",{extend:Ext.Component,xtype:"title",config:{title:""},baseCls:Ext.baseCSSPrefix+"title",updateTitle:function(e){this.setHtml(e)}}),Ext.define("Ext.Spacer",{extend:Ext.Component,xtype:"spacer",config:{},constructor:function(e){(e=e||{}).width||(e.flex=1),this.callParent([e])}}),Ext.define("Ext.layout.Box",{extend:Ext.layout.Auto,alias:"layout.box",isBox:!0,config:{orient:"horizontal",align:"stretch",constrainAlign:!1,pack:"start",vertical:!1,reverse:!1,overflow:null,wrap:null},cls:Ext.baseCSSPrefix+"layout-box",baseItemCls:Ext.baseCSSPrefix+"layout-box-item",constrainAlignCls:Ext.baseCSSPrefix+"constrain-align",flexedCls:Ext.baseCSSPrefix+"flexed",wrapClsMap:{true:Ext.baseCSSPrefix+"wrap",wrap:Ext.baseCSSPrefix+"wrap","wrap-reverse":Ext.baseCSSPrefix+"wrap-reverse"},boxRe:/^(?:box|hbox|vbox)$/,orientMap:{horizontal:{sizeProp:"width",containerCls:[Ext.baseCSSPrefix+"layout-hbox",Ext.baseCSSPrefix+"horizontal"],itemCls:Ext.baseCSSPrefix+"layout-hbox-item"},vertical:{sizeProp:"height",containerCls:[Ext.baseCSSPrefix+"layout-vbox",Ext.baseCSSPrefix+"vertical"],itemCls:Ext.baseCSSPrefix+"layout-vbox-item"}},constructor:function(e){this.callParent([e]),this.positionSortFn=this.positionSortFn.bind(this)},setConfig:function(e,t,i){var n,r=e;return e&&("string"==typeof e?(r={})[e]=t:(Ext.apply({},e),i=t),n=r.type,delete r.type,n&&!this.boxRe.test(n)&&Ext.raise("Cannot change layout from "+this.$className+' to "'+n+'"'),null==r.vertical&&("vbox"===n?r.vertical=!0:"hbox"===n&&(r.vertical=!1)),this.callParent([r,i])),this},destroy:function(){Ext.destroy(this.getOverflow()),this.positionSortFn=null,this.callParent()},updateContainer:function(e,t){var i={flexchange:"onItemFlexChange",scope:this,delegate:"> component"};this.callParent([e,t]),e&&e.on(i),t&&t.un(i)},updateVertical:function(e){this.setOrient(e?"vertical":"horizontal")},applyOrient:function(e){return"horizontal"!==e&&"vertical"!==e&&Ext.log.error("Invalid box orient of: '"+e+"', must be either 'horizontal' or 'vertical'"),e},updateOrient:function(e,t){var i,n,r=this.getContainer(),s=this.getOverflow(),o=r.getRenderTarget(),a=r.innerItems,l=a.length,c=this.orientMap,u=c[e],d=c[t],h="vertical"===e;if(this.sizePropertyName=u.sizeProp,t)for(o.removeCls(d.containerCls),i=0;i<l;++i)a[i].removeCls(d.itemCls);for(o.addCls(u.containerCls),this.itemCls=n=[this.baseItemCls,u.itemCls],i=0;i<l;++i)a[i].addCls(n);this.setVertical(h),this.positionFn=h?"getTop":"getLeft",s&&s.setVertical(h)},updateConstrainAlign:function(e){this.getContainer().getRenderTarget().toggleCls(this.constrainAlignCls,e)},onItemInnerStateChange:function(e,t){var i;this.callParent(arguments),t?(i=e.getFlex())&&this.setItemFlex(e,i):this.setItemFlex(e,null)},onItemFlexChange:function(e,t){e.isInnerItem()&&this.setItemFlex(e,t)},setItemFlex:function(e,t){var i,n,r=e.el,s=typeof t,o="number"==s,a="string"==s;!t||o||a?(o?t=(n=t)+" "+t:a&&(n=(i=Ext.String.splitWords(t))[0],1===i.length&&(t=n+" "+n)),r.setStyle("flex",t)):(n=t.grow,r.setStyle({flexGrow:n,flexShrink:t.shrink,flexBasis:t.basis})),e.toggleCls(this.flexedCls,!!n)},convertPosition:function(e){var t=this.positionMap;return t.hasOwnProperty(e)?t[e]:e},applyAlign:function(e){return this.convertPosition(e)},updateAlign:function(e,t){this.getContainer().getRenderTarget().swapCls(e,t,!0,Ext.baseCSSPrefix+"align")},applyPack:function(e){return this.convertPosition(e)},updatePack:function(e,t){this.getContainer().getRenderTarget().swapCls(e,t,!0,Ext.baseCSSPrefix+"pack")},updateReverse:function(e){this.getContainer().getRenderTarget().toggleCls(Ext.baseCSSPrefix+"reverse",e)},ensureVisible:function(e,t){var i,n,r,s,o,a,l,c,u,d,h;e.isWidget||(e=(t=e).item),t&&!isNaN(t.offset)&&(e=this.getItemByOffset(t.offset)),e&&(n=(i=this.getContainer().getScrollable()).getElement(),r=this.getVertical(),s=this.getItemInfo(n),a=(o=this.getItemInfo(e)).size>s.size,l=t&&t.scroll||"min",h=i.translatable,this._currentEnsureVisibleItem===e&&h&&h.isAnimating||("min"===l?!a&&o.start<s.start||a&&o.start>s.start?c=o.start-s.start:!a&&o.end>s.end||a&&o.end<s.end?c=o.end-s.end:a&&o.start<s.start&&o.end>s.end&&(c=o.start-s.start):c=o.start<s.start?o.end-s.end:o.start-s.start,c&&(u=r?null:c,d=r?c:null,this._currentEnsureVisibleItem=e,i.scrollBy(u,d,t.animation))))},getItemByOffset:function(e){var t,i,n,r,s,o,a=this.getContainer(),l=a.getScrollable().getElement(),c=this.getItemInfo(l),u=a.getInnerItems(),d=u.length,h=-1/0,f=-1/0,g=0,p=d-1;if(e){for(u.sort(this.positionSortFn),i=0;i<d;i++)if(s=u[i],n=(o=this.getItemInfo(s)).start-c.start,r=c.end-o.end,h<n&&n<0&&0<r&&(h=n,g=i),f<r&&r<0&&0<n){f=r,p=i;break}return 0<e?(t=p+=--e,d<=p&&(t=d-1)):(t=g+=++e,g<0&&(t=0)),u[t]}},getItemInfo:function(e){var t=this.getVertical(),i=e.el;return{start:i[t?"getTop":"getLeft"](),end:i[t?"getBottom":"getRight"](),size:i[t?"getHeight":"getWidth"]()}},createOverflow:function(e){return Ext.apply({owner:this,vertical:this.getVertical()},e)},applyOverflow:function(e,t){return Ext.Factory.layoutOverflow.update(t,e,this,"createOverflow")},updateWrap:function(e,t){var i,n=this.getContainer().getRenderTarget(),r=this.wrapClsMap;t&&(i=r[t])&&n.removeCls(i),e&&(i=r[e])&&n.addCls(i)},privates:{positionSortFn:function(e,t){var i=this.positionFn;return(e=e.el[i]())<(t=t.el[i]())?-1:t<e?1:0}}}),Ext.define("Ext.Toolbar",{extend:Ext.Container,xtype:"toolbar",isToolbar:!0,config:{title:null,defaultType:"button",defaultButtonUI:null,minHeight:null,layout:{type:"box",align:"center"}},statics:{shortcuts:{"->":!0}},autoSize:null,border:!1,classCls:Ext.baseCSSPrefix+"toolbar",constructor:function(e){"left"!==(e=e||{}).docked&&"right"!==e.docked||(e.layout=Ext.apply({type:"box",align:"stretch",vertical:!0},e.layout)),this.callParent([e])},applyTitle:function(e){return"string"==typeof e&&(e={title:e,centered:!0}),Ext.factory(e,Ext.Title,this.getTitle())},updateTitle:function(e,t){e&&this.add(e),t&&t.destroy()},showTitle:function(){var e=this.getTitle();e&&e.show()},hideTitle:function(){var e=this.getTitle();e&&e.hide()},onItemAdd:function(e,t){var i=this.getDefaultButtonUI();i&&(e.isSegmentedButton?null==e.getDefaultUI()&&e.setDefaultUI(i):e.isButton&&null==e.getUi()&&e.setUi(i)),this.callParent([e,t])},factoryItem:function(e){return"->"===e&&(e={xtype:"component",flex:1}),this.callParent([e])}}),Ext.define("Ext.panel.Buttons",function(){var e=Ext.platformTags,t=e.ios||e.mac||e.android;return{isOKFirst:!t,config:{buttonAlign:null,buttonDefaults:null,buttons:null,minButtonWidth:75,standardButtons:{ok:{text:"OK",weight:t?120:10},abort:{text:"Abort",weight:t?110:20},retry:{text:"Retry",weight:t?100:30},ignore:{text:"Ignore",weight:t?90:40},yes:{text:"Yes",weight:t?80:50},no:{text:"No",weight:t?70:60},cancel:{text:"Cancel",weight:t?60:70},apply:{text:"Apply",weight:t?50:80},save:{text:"Save",weight:t?40:90},submit:{text:"Submit",weight:t?30:100},help:{text:"Help",weight:t?10:110},close:{text:"Close",weight:t?20:120}}},_packButtonAlign:{left:"start",right:"end",center:"center"},updateButtonAlign:function(e){var t,i=this._buttons;e&&i&&(t=this._packButtonAlign[e])&&i.getLayout().setPack(t)},applyButtons:function(e,t){var i,n,r,s,o=Ext.convertKeyedItems(e,"xxx","xxx"),a=this.getButtonDefaults(),l=this.getStandardButtons(),c=o?o.length:0;if(e&&"object"==typeof e&&(e.xtype||e.itemId||e.items||e.reference))return this.adjustButtons(e,t);if(e)if(o===e)for(o=[],s=0;s<c;++s)"string"==typeof(i=e[s])?Ext.Toolbar.shortcuts[i]||(i=Ext.applyIf({itemId:i,text:i},a)):a&&(i=Ext.apply({},i,a)),o[s]=i;else for(s=0;s<c;++s)r=(i=o[s]).xxx,(n=l[i.itemId])?Ext.applyIf(i,n):r&&Ext.raise("Button handler short-hand is only valid for standardButtons"),r&&(delete i.xxx,i.handler=r),a&&Ext.applyIf(i,a);return this.adjustButtons(o,t)},onClassMixedIn:function(e){var t=e.prototype,i=t.buttons;i&&(delete t.buttons,e.addConfig({buttons:i}))},privates:{normalizeButtonBar:function(e,t,i,n,r){var s,o,a,l,c,u,d;return e?(s=e.isComponent,Ext.isArray(e)?e={xtype:"toolbar",items:e}:s||(e=Ext.clone(e)),s||(e.$initParent=this,e.parent=this,e.xtype||(e.xtype="toolbar")),s?e.setDocked(i):i&&(e.docked=i),r&&(s?e.setEnableFocusableContainer(!1):e.enableFocusableContainer=!1),n&&!s&&(n.xtype&&delete e.xtype,(e=Ext.merge(Ext.clone(n),e)).layout=Ext.merge(c={},e.layout),(o=this.getButtonAlign())&&(d=this._packButtonAlign[o])&&(c.pack=d),u=this.getMinButtonWidth(),a=e.defaults,e.defaults=function(e){var t,i=a||{},n=!e.xtype||e.isButton;return n||(t=Ext.ClassManager.getByAlias("widget."+e.xtype))&&(n=t.prototype.isButton),!n||!u||"minWidth"in i||(i=Ext.apply({minWidth:u},i)),i}),e=t?(l=this.indexOf(t),t.destroy(),this.insert(l,e)):this.add(e)):(t&&t.destroy(),e)}}}}),Ext.define("Ext.Tool",{extend:Ext.Component,alternateClassName:"Ext.panel.Tool",xtype:["tool","paneltool"],isPanelTool:!0,isTool:!0,focusable:!0,tabIndex:0,focusEl:"element",ariaEl:"element",inheritUi:!0,classCls:Ext.baseCSSPrefix+"tool",pressedCls:Ext.baseCSSPrefix+"pressed",hoveredCls:Ext.baseCSSPrefix+"hovered",passiveCls:Ext.baseCSSPrefix+"passive",element:{reference:"element",tabIndex:0,listeners:{click:"onClick",mousedown:"onMouseDown",mouseover:"onMouseOver",mouseout:"onMouseOut"},children:[{reference:"iconElement",cls:Ext.baseCSSPrefix+"icon-el "+Ext.baseCSSPrefix+"font-icon"}]},handler:null,scope:null,toolOwner:null,config:{iconCls:null,type:null,passive:null},stopEvent:!0,weight:10,updateIconCls:function(e,t){this.iconElement.replaceCls(t,e)},updateType:function(e,t){var i=Ext.Tool.prototype.classCls,n=this.iconElement;this.type=e,n.replaceCls(t&&i+"-type-"+t,e&&i+"-type-"+e)},updateDisabled:function(e,t){this.callParent([e,t]),this.el.removeCls([this.hoveredCls,this.pressedCls])},updatePassive:function(e){this.setDisabled(e),this.el.toggleCls(this.passiveCls,e),this.el.setTabIndex(e?null:this.getTabIndex()),this.focusable=!e},shouldRipple:function(e){return!this.getPassive()&&this.callParent()},privates:{_toolTypes:{close:1,collapse:1,disclosure:1,down:1,expand:1,gear:1,help:1,left:1,maximize:1,minimize:1,minus:1,menu:1,next:1,pin:1,plus:1,prev:1,print:1,refresh:1,restore:1,right:1,save:1,search:1,toggle:1,unpin:1,up:1},invokeToolHandler:function(e,t,i,n,r){return t&&Ext.callback(t,e.scope,n,0,e),e.fireEvent("click",e,r,e.toolOwner||e.ownerCt),!0},onClick:function(e){var t,i=this,n=i.handler||i.callback,r=i.toolOwner;return!i.getDisabled()&&(!1!==i.stopEvent&&e.stopEvent(),t=[i.parent,i,e],r&&(t[0]=r).augmentToolHandler&&r.augmentToolHandler(i,t),(r&&r.invokeToolHandler?r:i).invokeToolHandler(i,n,i.scope,t,e))},onMouseDown:function(e){if(this.focusable||e.preventDefault(),this.getDisabled())return!1;this.addCls(this.pressedCls),Ext.GlobalEvents.setPressedComponent(this,e)},onRelease:function(){this.removeCls(this.pressedCls)},onMouseOver:function(){if(this.getDisabled())return!1;this.addCls(this.hoveredCls)},onMouseOut:function(){this.removeCls(this.hoveredCls)}}}),Ext.define("Ext.theme.material.Tool",{override:"Ext.Tool",config:{ripple:{bound:!1,color:"default",centered:!0}}}),Ext.define("Ext.mixin.Toolable",{mixinId:"toolable",config:{defaultToolWeights:{cached:!0,$value:{toggle:10,gear:20,prev:30,next:40,left:50,right:60,down:70,up:80,refresh:90,disclosure:100,plus:100,minus:110,search:120,edit:125,save:130,print:140,expand:150,collapse:160,help:170,pin:180,unpin:190,minimize:200,maximize:210,restore:220,close:230,trash:240}},toolDefaults:{xtype:"tool",zone:"end"},tools:null},toolAnchorName:"bodyElement",afterClassMixedIn:function(e){var t=e.prototype,i=t.toolDefaults,n=t.getRefItems;i&&(delete t.toolDefaults,e.getConfigurator().add({toolDefaults:Ext.apply({xtype:"tool",weight:0,zone:"end"},i)})),(i=t.tools)&&(delete t.tools,e.getConfigurator().add({tools:i})),t.getRefItems=n?function(e){return Ext.Array.push(n.call(this,e),this.getTools()||Ext.emptyArray)}:function(){return this.getTools()||Ext.emptyArray}},lookupTool:function(e){var t,i,n=this.getTools(),r=n&&n.length;for(t=0;t<r;++t)if((i=n[t]).type===e||i.getItemId()===e)return i;return null},addTool:function(e){var t,i,n=this.getTools();return n&&n.length?(n.push(e=this.instantiateTool(e)),Ext.sortByWeight(n),t=n[n.indexOf(e)+1],i=e.zone,t=t&&t.zone===i?t.el.dom:null,this.getToolZone(i).el.insertBefore(e.el,t)):(this.setTools([e]),e=this.getTools()[0]),e},applyTools:function(e){if(e){var t,i,n=this.createTools(e),r=n.length;for(Ext.sortByWeight(n),t=0;t<r;++t)n[t]=i=this.instantiateTool(n[t]),this.getToolZone(i.zone).el.appendChild(i.el);e=n}return e},instantiateTool:function(e){return e.isTool||(e=Ext.clone(e)),e.ownerCmp=e.toolOwner=this,e.isTool||(e=Ext.create(e)),e.doInheritUi(),e.addCls(this._toolPositionClsMap[e.zone]),e},updateTools:function(e,t){Ext.destroy(t)},privates:{_toolZoneNames:{end:"_endZone",head:"_headZone",start:"_startZone",tail:"_tailZone"},_tailedCls:Ext.baseCSSPrefix+"tailed",_headedCls:Ext.baseCSSPrefix+"headed",_toolZoneCls:Ext.baseCSSPrefix+"tool-zone",_toolZoneClsMap:{end:Ext.baseCSSPrefix+"end",head:Ext.baseCSSPrefix+"head",tail:Ext.baseCSSPrefix+"tail",start:Ext.baseCSSPrefix+"start"},_toolPositionClsMap:{end:Ext.baseCSSPrefix+"end",head:Ext.baseCSSPrefix+"start",tail:Ext.baseCSSPrefix+"end",start:Ext.baseCSSPrefix+"start"},_toolDockAlignCls:{left:Ext.baseCSSPrefix+"align-left",center:Ext.baseCSSPrefix+"align-center",right:Ext.baseCSSPrefix+"align-right"},hasToolZones:!1,adjustToolDefaults:function(e,t,i){return t=t||this.getToolDefaults(),void 0===i&&(i=this.getDefaultToolWeights()),t&&(Ext.applyIf(e,t),e.instanceCls=this.toolCls),e.type||e.iconCls||(e.type=e.itemId),!i||"weight"in e||(e.weight=i[e.type]),e},createTools:function(e,t){var i,n,r=Ext.convertKeyedItems(e,"handler","handler"),s=r.length,o=this.getDefaultToolWeights(),a=this.getToolDefaults();if(t=t||this,r===e)for(r=[],i=0;i<s;++i)(n="string"==typeof(n=e[i])?this.adjustToolDefaults({type:n},a,null):Ext.apply(this.adjustToolDefaults({},a,null),n)).toolOwner=t,r[i]=n;else for(i=0;i<s;++i)this.adjustToolDefaults(n=r[i],a,o),n.toolOwner=t;return r},getToolZone:function(e){var t,i=this,n=i._toolZoneNames[e],r=i[n],s="_toolDockWrap";return n||Ext.raise('Invalid zone name: "'+e+'"'),r||(r=Ext.Element.create({classList:[i._toolZoneCls,i._toolZoneClsMap[e]]}),(t=i[i.toolAnchorName])||Ext.raise('Invalid tool anchor. No element named "'+i.toolAnchorName+'".'),i[s]||(i[s]=t.wrap({cls:Ext.baseCSSPrefix+"tool-dock"}),t.addCls(Ext.baseCSSPrefix+"tool-anchor"),i.initUiReference(s,"tool-dock"),i.syncToolableAlign()),"head"===e?(r.insertBefore(t),t.addCls(i._headedCls)):"tail"===e?(r.insertAfter(t),t.addCls(i._tailedCls)):"start"===e?r.insertBefore(i._headZone||t):"end"===e&&r.insertAfter(i._tailZone||t),i[n]=r,i.hasToolZones=!0),r},syncToolableAlign:function(){var e,t=this._toolDockWrap,i=this._toolDockAlignCls;t&&"function"==typeof this.getAlign&&(e=this.getAlign(),t.replaceCls(i[this._toolDockAlign],i[e]),this._toolDockAlign=e)},doDestroy:function(){this.setTools(null),Ext.destroy(this._startZone,this._endZone,this._headZone,this._tailZone,this._toolDockWrap)}}}),Ext.define("Ext.Panel",{extend:Ext.Container,xtype:"panel",alternateClassName:"Ext.panel.Panel",isPanel:!0,mixins:[Ext.panel.Buttons,Ext.mixin.Toolable],defaultBindProperty:"title",config:{headerPosition:"top",header:null,icon:null,iconCls:null,iconAlign:null,title:null,titleAlign:null,anchor:null,anchorPosition:null,closable:null,bbar:null,lbar:null,rbar:null,tbar:null},cachedConfig:{border:!1,bodyBorder:null,bodyPadding:null,bodyStyle:null,buttonToolbar:{xtype:"toolbar",itemId:"buttonToolbar",docked:"bottom",defaultType:"button",weighted:!0,ui:"footer",defaultButtonUI:"action",layout:{type:"box",vertical:!1,pack:"center"}},closeAction:"destroy",closeToolText:"Close panel"},classCls:Ext.baseCSSPrefix+"panel",headerCls:null,titleCls:null,toolCls:Ext.baseCSSPrefix+"paneltool",sideCls:{top:Ext.baseCSSPrefix+"top",right:Ext.baseCSSPrefix+"right",bottom:Ext.baseCSSPrefix+"bottom",left:Ext.baseCSSPrefix+"left"},manageBorders:!0,allowHeader:!0,template:[{reference:"bodyWrapElement",cls:Ext.baseCSSPrefix+"body-wrap-el",uiCls:"body-wrap-el",children:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",uiCls:"body-el"}]}],initialize:function(){var e;this.callParent(),(e=this.getScrollable())&&e.isVirtualScroller&&e.setAutoRefresh(!0)},addBodyCls:function(e){return this.bodyElement.addCls(e),this},removeBodyCls:function(e){return this.bodyElement.removeCls(e),this},applyBodyPadding:function(e){return!0===e&&(e=5),e=e&&Ext.dom.Element.unitizeBox(e)},applyBodyStyle:function(e,t){return t&&e===t&&Ext.isObject(t)&&(e=Ext.apply({},e)),this.bodyElement.applyStyles(e),null},getBodyStyle:function(){Ext.Error.raise("'bodyStyle' is a write-only config.  To query element styles use the Ext.dom.Element API.")},addTool:function(e){var t,i=this.ensureHeader();return i&&(t=this.createTools(Ext.Array.from(e)))&&t.length&&(t=i.add(t)),t},applyHeader:function(e,t){var i,n=t;return this.allowHeader=!1!==e,t&&!e&&(n=Ext.destroy(n)),e&&this.allowHeader&&(i=!0===e,n?i||n.setConfig(e):(i&&(e={}),e.$initParent=this,n=Ext.factory(this.createHeader(e)),delete(this.header=n).$initParent,delete e.$initParent,((n.ownerCmp=this).maxHeightElement||this.el).insertFirst(n.el),n.doInheritUi())),n||null},updateHeader:function(e){e?this.positionHeader(e):this.syncBorders()},applyTools:function(e){var t,i=this.ensureHeader();i&&(i.clearTools(),(t=this.createTools(e))&&t.length&&i.add(t))},close:function(){var e=this.getCloseAction(),t="destroy"===e;!1!==this.fireEvent("beforeclose",this)&&(e&&!t&&this[e](),this.fireEvent("close",this),t&&this.destroy())},createHeader:function(e){var t,i,n={xtype:"panelheader",instanceCls:this.headerCls,docked:"top"};return this._isCreatingHeader=!0,e&&!0!==e&&Ext.merge(n,e),this.initialized&&(null!=(i=this.getTitle())&&("string"==typeof i&&(i={text:i}),Ext.merge(n,{title:i})),null!=(t=this.getIconCls())?n.iconCls=t:null!=(t=this.getIcon())&&(n.icon=t)),this._isCreatingHeader=!1,n},applyAnchor:function(e,t){var i,n,r=this.el.dom;if(e){if(t)return;e=this.el.insertFirst({cls:Ext.baseCSSPrefix+"anchor-el"}),(i=document.createElementNS("http://www.w3.org/2000/svg","svg")).setAttribute("class",Ext.baseCSSPrefix+"pointer-el"),n=document.createElementNS("http://www.w3.org/2000/svg","path"),i.appendChild(n),e.dom.appendChild(i),r.style.overflow="visible"}else t&&(this.anchorSize=t.destroy(),r.style.overflow="");return e},initAnchor:function(){var e,t=this.getAnchor(),i=this.sideCls.top,n=t.dom.firstChild,r=n.firstChild;t.addCls(i),t.show(),e=t.measure(),this.anchorSize=e=new Ext.util.Offset(e.width,e.height),this.anchorMargin=parseFloat(t.getStyle("marginLeft"))||0,t.dom.style.margin="0",n.setAttribute("height",e.y),n.setAttribute("width",e.x),r.setAttribute("d","M0 "+e.y+" L"+e.x/2+" 0.5 L"+e.x+" "+e.y),e.y-=parseFloat(Ext.fly(r).getStyle("stroke-width")),t.removeCls(i),t.hide()},updateAnchorPosition:function(e,t){var i=this.getAnchor(),n=this.sideCls;i&&(t&&i.removeCls(n[t.side]),e?(i.addCls(n[e.side]),i.translate(e.x,e.y),i.show()):i.hide())},updateBorder:function(e,t){this.callParent([e,t]),null===this.getBodyBorder()&&this.setBodyBorderEnabled(!1!==e),this.syncBorders()},updateBodyPadding:function(e){this.bodyElement.setStyle("padding",e)},updateBodyBorder:function(e){e=null===e?this.getBorder():e,this.setBodyBorderEnabled(!1!==e),this.syncBorders()},updateClosable:function(e){var t;e?(t=this.addTool({type:"close",weight:1e3,scope:this,handler:"onCloseTool",tooltip:this.getCloseToolText(),$internal:!0}))&&t.length&&(this.closeTool=t[0]):Ext.destroy(this.closeTool)},updateHeaderPosition:function(e,t){this.moveHeaderPosition(e,t)},updateIcon:function(e){var t=this.ensureHeader();t&&t.setIcon(e)},updateIconCls:function(e){var t=this.ensureHeader();t&&t.setIconCls(e)},updateIconAlign:function(e){var t=this.ensureHeader();t&&t.setIconAlign(e)},applyBbar:function(e,t){return this.normalizeButtonBar(e,t,"bottom")},applyLbar:function(e,t){return this.normalizeButtonBar(e,t,"left")},applyRbar:function(e,t){return this.normalizeButtonBar(e,t,"right")},applyTbar:function(e,t){return this.normalizeButtonBar(e,t,"top")},updateTitle:function(e){var t=this.ensureHeader(),i=this.tab;t&&t.setTitle(e),i&&i.isTab&&!i.destroying&&!i.destroyed&&i.setText(e)},updateTitleAlign:function(e){var t=this.ensureHeader();t&&t.setTitleAlign(e)},updateUi:function(e,t){this.callParent([e,t]),this.hasResizable&&this.onResizableUiChange(e,t),this.anchorSize=null},alignTo:function(e,t,i){var n,r,s,o,a,l,c,u,d=this,h=d.getAnchor(),f=d.initialConfig,g=d.isPositioned(),p=g?d.setLeft:d.setX,m=g?d.setTop:d.setY;if(!h)return d.callParent([e,t,i]);d.anchorSize||d.initAnchor(),o=d.anchorMargin,(s=e.isRegion?e:(e.isWidget?e.el:Ext.fly(e)).getRegion()).adjust(-o,o,o,-o),(a=d.getAlignmentInfo(s,t)).isAligned||(u=d.getParent(),d.getFloated()||(u?d.positioned=!0:d.setFloated(!0)),"unconstrainedWidth"in d&&d.setWidth(d.unconstrainedWidth),"unconstrainedHeight"in d&&d.setHeight(d.unconstrainedHeight),d.alignToArgs=[e,t,i],(l=d.getAlignRegion(s,t,Ext.apply({anchorSize:d.anchorSize,axisLock:d.getAxisLock()},i)))?(p.call(d,l.x),m.call(d,l.y),l.constrainWidth&&(d.unconstrainedWidth=f.width||d.self.prototype.width,c=d.el.getHeight(),d.setWidth(a.stats.width=l.getWidth()),0===l.align.position&&m.call(d,l.y+(c-d.el.getHeight()))),l.constrainHeight&&(d.unconstrainedHeight=f.height||d.self.prototype.height,d.setHeight(a.stats.height=l.getHeight())),l.anchor?(r=n=0,1&l.anchor.align?r=l.anchor.y-l.y:n=l.anchor.x-l.x,d.setAnchorPosition({side:l.anchor.position,x:n,y:r})):d.setAnchorPosition(null),d.setCurrentAlignmentInfo(a)):h&&h.show(),d.viewportResizeListener||(d.viewportResizeListener=Ext.on({resize:"onViewportResize",scope:d,destroyable:!0})))},getRefItems:function(e){var t=this.callParent([e]),i=this.getConfig("header",!1,!0);return i&&(e&&i.getRefItems&&t.unshift.apply(t,i.getRefItems(e)),t.unshift(i)),t},onCloseTool:function(){this.close()},onRender:function(){var e;this.callParent(),(e=this.getHeader())&&e.setRendered(!0),this.hasCollapsible&&this.onCollapsibleRendered()},doDestroy:function(){Ext.destroy(this.header,this.anchor),this.callParent()},privates:{headerPositionMap:{top:{cls:Ext.baseCSSPrefix+"header-position-top",dom:0,horz:!0},right:{cls:Ext.baseCSSPrefix+"header-position-right",dom:1,vert:!0},bottom:{cls:Ext.baseCSSPrefix+"header-position-bottom",dom:1,horz:!0},left:{cls:Ext.baseCSSPrefix+"header-position-left",dom:0,vert:!0}},adjustButtons:function(e,t){return this.normalizeButtonBar(e,t,"bottom",this.getButtonToolbar())},ensureHeader:function(){var e;return this._isCreatingHeader||(this.getItems(),!(e=this.getHeader())&&this.allowHeader&&(this.setHeader(!0),e=this.getHeader())),e},moveHeaderPosition:function(e,t){var i,n,r=this.element,s=this.headerPositionMap,o=s[t],a=s[e],l=o?o.cls:"",c=a.cls;return l!==c&&(t&&r.removeCls(l),r.addCls(c)),(t||"top"!==e)&&(n=this.ensureHeader())&&(this.isConfiguring||(this.positionHeader(n,e),i=!0)),i||this.syncBorders(),n},positionHeader:function(e,t){var i=t||this.getHeaderPosition();e.setPosition(i),this.syncBorders()},setBodyBorderEnabled:function(e){this.bodyElement.setStyle("border-width",e?"":"0")},syncBorders:function(){this.isConfiguring||this.getLayout().handleDockedItemBorders(!0)}}}),Ext.define("Ext.theme.material.Panel",{override:"Ext.Panel",config:{buttonAlign:"right",buttonToolbar:{defaultButtonUI:null}}}),Ext.define("Ext.Mask",{extend:Ext.Component,xtype:"mask",config:{transparent:!1,top:0,left:0,right:0,bottom:0},baseCls:Ext.baseCSSPrefix+"mask",initialize:function(){this.callParent(),this.element.on("tap","onTap",this),this.on("hide","onHide",this),this.on("show","onShow",this)},onHide:function(e){var t;e.sender&&e.tabbingDisabled&&(e.sender.enableTabbing(),e.tabbingDisabled=!1),Ext.util.InputBlocker.unblockInputs(),Ext.browser.is.AndroidStock4&&0===Ext.os.version.getMinor()&&(t=this.element.getFirstChild())&&t.redraw()},onShow:function(e){e.sender&&!e.tabbingDisabled&&(e.sender.disableTabbing(),e.tabbingDisabled=!0)},onTap:function(e){this.fireEvent("tap",this,e)},updateTransparent:function(e){this.toggleCls(this.baseCls+"-transparent",e)}}),Ext.define("Ext.Sheet",{extend:Ext.Panel,xtype:"sheet",isViewportMenu:!1,hidden:!0,config:{reveal:null,cover:null,side:null,stretchX:null,stretchY:null,enter:"bottom",exit:"bottom"},translatable:{type:"csstransform"},showAnimation:{type:"slideIn",duration:250,easing:"ease-out"},hideAnimation:{type:"slideOut",duration:250,easing:"ease-in"},modal:!0,hideOnMaskTap:!0,centered:!0,classCls:Ext.baseCSSPrefix+"sheet",manageBorders:!1,autoSize:null,border:!0,bodyBorder:!1,floated:!0,isInputRegex:/^(input|textarea|select|a)$/i,destroy:function(){this.setSide(null),this.callParent()},applyHideAnimation:function(e){var t,i=this.getExit(),n=i;return null===i?null:(!0===e&&(e={type:"slideOut"}),(t=this.callParent([e]))&&("bottom"===i?n="down":"top"===i&&(n="up"),t.setDirection(n)),t)},applyShowAnimation:function(e){var t,i=this.getEnter(),n=i;return null===i?null:(!0===e&&(e={type:"slideIn"}),(t=this.callParent([e]))&&("bottom"===i&&(n="down"),"top"===i&&(n="up"),t.setBefore({display:null}),t.setReverse(!0),t.setDirection(n)),t)},hide:function(e){var t=this.getSide();t?Ext.Viewport.hideMenu(t,e):this.callParent([e])},show:function(e,t){var i=Ext.Viewport,n=t&&"side"in t?t.side:this.getSide();n?(i.setMenu(this),i.showMenu(n)):this.callParent([e,t])},updateSide:function(e,t){var i=!this.isConfiguring&&this.isVisible();this.isViewportMenu=!!e,t&&Ext.Viewport.removeMenu(t),e&&(Ext.Viewport.setMenu(this,{side:e}),i&&this.show())},updateStretchX:function(e){this.getLeft(),this.getRight(),e&&(this.setLeft(0),this.setRight(0))},updateStretchY:function(e){this.getTop(),this.getBottom(),e&&(this.setTop(0),this.setBottom(0))}}),Ext.define("Ext.menu.Item",{extend:Ext.Component,xtype:"menuitem",alternateClassName:"Ext.menu.TextItem",isMenuItem:!0,menuExpandDelay:200,menuHideDelay:200,scope:null,destroyMenu:!0,clickHideDelay:0,hideOnClick:!0,config:{href:null,target:null,handler:null,text:null,menu:{lazy:!0,$value:null},menuAlign:"tl-tr?",icon:null,iconCls:null,iconAlign:"left",indented:null,separator:null},inheritUi:!0,ariaRole:"menuitem",focusable:!0,classCls:Ext.baseCSSPrefix+"menuitem",activeCls:Ext.baseCSSPrefix+"active",hasLeftIconCls:Ext.baseCSSPrefix+"has-left-icon",hasRightIconCls:Ext.baseCSSPrefix+"has-right-icon",hasArrowCls:Ext.baseCSSPrefix+"has-arrow",hasHrefCls:Ext.baseCSSPrefix+"has-href",isMenuOwner:!0,template:[{reference:"bodyElement",tag:"a",href:"#",cls:Ext.baseCSSPrefix+"body-el "+Ext.baseCSSPrefix+"unselectable",children:[{reference:"leftIconWrapElement",cls:Ext.baseCSSPrefix+"left-icon-wrap-el "+Ext.baseCSSPrefix+"icon-wrap-el",children:[{reference:"leftIconElement",cls:Ext.baseCSSPrefix+"left-icon-el "+Ext.baseCSSPrefix+"icon-el "+Ext.baseCSSPrefix+"font-icon"}]},{html:"",reference:"textElement",cls:Ext.baseCSSPrefix+"text-el"},{reference:"rightIconWrapElement",cls:Ext.baseCSSPrefix+"right-icon-wrap-el "+Ext.baseCSSPrefix+"icon-wrap-el",children:[{reference:"rightIconElement",cls:Ext.baseCSSPrefix+"right-icon-el "+Ext.baseCSSPrefix+"icon-el "+Ext.baseCSSPrefix+"font-icon"}]},{reference:"arrowElement",cls:Ext.baseCSSPrefix+"arrow-el "+Ext.baseCSSPrefix+"font-icon"}]}],ariaEl:"bodyElement",focusEl:"bodyElement",initialize:function(){this.callParent(),this.syncHasIconCls(),Ext.supports.Touch&&this.handleTouch()},getFocusClsEl:function(){return this.el},expandMenu:function(e){var t=this.getMenu();!this.getDisabled()&&t&&(t.parentMenu=this.parentMenu,this.hideOnClick=!1,t.isVisible()?e&&"keydown"===e.type&&t.focus():(t.autoFocus=!e||!e.pointerType,t.showBy(this,this.getMenuAlign(),{axisLock:!0})))},getRefItems:function(e){var t,i=this.getMenu();return i&&(t=i.getRefItems(e)).unshift(i),t||[]},onFocusEnter:function(e){var t=this;t.callParent([e]),t.addCls(t.activeCls),t.activated=!0,t.hasListeners.activate&&t.fireEvent("activate",t),t.parentMenu&&t.parentMenu.setActiveItem(t)},onFocusLeave:function(e){var t=this,i=t.menu;t.callParent([e]),t.removeCls(t.activeCls),i&&i.hide(),t.activated=!1,t.hasListeners.deactivate&&t.fireEvent("deactivate",t),t.parentMenu&&t.parentMenu.setActiveItem(null)},onRemoved:function(e){this.callParent([e]),this.parentMenu=null},doDestroy:function(){this.separatorElement=Ext.destroy(this.separatorElement),this.setMenu(null),this.linkClickListener=Ext.destroy(this.linkClickListener),this.callParent()},updateText:function(e){null!=e&&""!==e||(e=""),this.textElement.dom.firstChild.data=e},applyMenu:function(e){var t=this.ariaEl.dom;return e?(e.isMenu?(e.setConstrainAlign(Ext.getBody()),e.ownerCmp=this):e=Ext.menu.Menu.create(e,{ownerCmp:this,$initParent:this,constrainAlign:Ext.getBody()}),t.setAttribute("aria-haspopup",!0),t.setAttribute("aria-owns",e.id)):(t.removeAttribute("aria-haspopup"),t.removeAttribute("aria-owns")),this.toggleCls(this.hasArrowCls,!!e),e},updateMenu:function(e,t){t&&(this.destroyMenu?Ext.destroy(t):t.parentMenu=null),this.menu=e},updateHref:function(e){this.bodyElement.dom.href=e,this.toggleCls(this.hasHrefCls,!!e)},updateTarget:function(e){this.bodyElement.dom.target=e},updateIcon:function(e){var t="left"===this.getIconAlign()?this.leftIconElement:this.rightIconElement;e?t.setStyle("background-image","url("+e+")"):t.setStyle("background-image",""),this.isConfiguring||this.syncHasIconCls()},updateIconCls:function(e,t){var i="left"===this.getIconAlign()?this.leftIconElement:this.rightIconElement;e?i.replaceCls(t,e):i.removeCls(t),this.isConfiguring||this.syncHasIconCls()},updateIconAlign:function(e){this.isConfiguring||this.syncHasIconCls()},updateSeparator:function(e){var t=this.separatorElement;e?t?t.show():(this.separatorElement=t=Ext.Element.create({cls:Ext.baseCSSPrefix+"menuseparator"}),this.el.dom.insertBefore(t.dom,this.el.dom.firstChild)):t&&t.hide()},privates:{handleTouch:function(){var e=this.bodyElement;this.linkClickListener=e.on({click:this.onClick,capture:!0,translate:!1,scope:this,destroyable:!0})},onSpace:function(e){return this.onClick(e)},onClick:function(e){var t,i=this,n=i.getHref(),r=i.clickHideDelay,s=e.browserEvent,o=i.getHandler(),a="touch"===e.pointerType;if(i.linkClickListener&&!a&&e.parentEvent)e.stopEvent();else{if((!n||i.getDisabled())&&i.bodyElement.dom===e.getTarget("a")&&(e.stopEvent(),i.getDisabled()))return!1;if(!(i.getDisabled()||i.handlingClick||(i.hideOnClick&&!i.getMenu()&&(r?i.hideParentMenusTimer=Ext.defer(i.hideParentMenus,r,i):i.hideParentMenus()),t=i.fireEvent("click",i,e),i.destroyed||(!1!==t&&o&&Ext.callback(o,i.scope,[i,e],0,i),i.destroyed))))return n&&"click"!==e.type&&!s.defaultPrevented&&(i.handlingClick=!0,i.bodyElement.dom.click(),i.handlingClick=!1),t}},hideParentMenus:function(){var e;for(e=this.getRefOwner();e&&(e.isMenu&&e.getFloated()||e.isMenuItem);e=e.getRefOwner())e.isMenu&&e.hide()},hasIcon:function(){return!(!this.getIconCls()&&!this.getIcon())},syncHasIconCls:function(){var e=this.hasRightIconCls,t=this.hasLeftIconCls,i=this.getIconAlign();this.hasIcon()?"left"===i?this.replaceCls(e,t):"right"===i&&this.replaceCls(t,e):this.removeCls([t,e])}}}),Ext.define("Ext.theme.material.menu.Item",{override:"Ext.menu.Item",config:{ripple:{delegate:"."+Ext.baseCSSPrefix+"body-el"}},shouldRipple:function(){var e=this.el.rippleShowTimeout;return this.clickHideDelay=this.clickHideDelay>e?this.clickHideDelay:e,this.getRipple()}}),Ext.define("Ext.menu.Manager",{singleton:!0,alternateClassName:"Ext.menu.MenuMgr",hideAll:function(){var e,t=this.visible,i=t.length,n=!1;if(i)for(t=t.slice(),e=0;e<i;e++)t[e].hide(),n=!0;return n},privates:{groups:{},visible:[],constructor:function(){var e=this;e.onShow=function(){return e.registerGlobalListeners(),e.onShow.apply(e,arguments)}},onGlobalScroll:function(e){var t,i,n=this.visible,r=n.length;if(r&&e!==Ext.scroll.Scroller.viewport)for(n=n.slice(),t=0;t<r;++t)i=n[t],e.contains(i)&&i.hide()},checkActiveMenus:function(e){var t,i,n=this.visible,r=n.length,s=Ext.Component.from(e);if(r)for(n=n.slice(),t=0;t<r;++t)(i=n[t]).owns(e)||s&&s.isMenuOwner&&s.getMenu()===i||i.hide()},onShow:function(e){e.getFloated()&&Ext.Array.include(this.visible,e)},onHide:function(e){e.getFloated()&&Ext.Array.remove(this.visible,e)},registerGlobalListeners:function(){delete this.onShow,Ext.on({mousedown:this.checkActiveMenus,scrollstart:this.onGlobalScroll,scope:this});var e=window.jasmine;e&&e.addAllowedListener&&(e.addAllowedListener("mousedown"),e.addAllowedListener("scrollstart"))}}}),Ext.define("Ext.layout.VBox",{extend:Ext.layout.Box,alias:"layout.vbox",config:{vertical:!0}}),Ext.define("Ext.menu.Menu",{extend:Ext.Panel,xtype:"menu",isMenu:!0,config:{align:"tl-bl?",indented:!0,separator:null,autoHide:null,groups:null},allowOtherMenus:!1,ignoreParentClicks:!1,mouseLeaveDelay:50,defaultType:"menuitem",autoSize:null,twoWayBindable:"groups",keyMap:{scope:"this",SPACE:"onSpaceKey",ESC:"onEscKey"},layout:{type:"vbox",align:"stretch"},classCls:Ext.baseCSSPrefix+"menu",indentedCls:Ext.baseCSSPrefix+"indented",hasSeparatorCls:Ext.baseCSSPrefix+"has-separator",nonMenuItemCls:Ext.baseCSSPrefix+"non-menuitem",allowFocusingDisabledChildren:!0,border:!0,defaultFocus:":focusable",floated:!0,focusable:!0,focusableContainer:!0,nameHolder:!0,weighted:!0,initialize:function(){var e=this,t={click:e.onClick,mouseover:e.onMouseOver,scope:e};e.callParent(),Ext.supports.Touch&&(t.pointerdown=e.onMouseOver),e.element.on(t),e.itemOverTask=new Ext.util.DelayedTask(e.handleItemOver,e),e.mouseMonitor=e.el.monitorMouseLeave(e.mouseLeaveDelay,e.onMouseLeave,e)},doDestroy:function(){this.itemOverTask.cancel(),Ext.menu.Manager.onHide(this),this.parentMenu=this.ownerCmp=null,this.rendered&&this.el.un(this.mouseMonitor),this.callParent()},showBy:function(e,t,i){this.callParent([e,t||this.getAlign(),i])},onFocusEnter:function(e){var t;this.callParent([e]),this.mixins.focusablecontainer.onFocusEnter.call(this,e),this.getFloated()&&((t=this.getInherited()).topmostFocusEvent||(t.topmostFocusEvent=e))},onFocusLeave:function(e){this.callParent([e]),!1!==this.getAutoHide()&&this.hide()},onItemAdd:function(e,t){this.callParent([e,t]),this.syncItemIndentedCls(e),e.isMenuItem||e.isMenuSeparator||e.addCls(this.nonMenuItemCls)},onItemRemove:function(e,t,i){this.callParent([e,t,i]),e.removeCls(this.indentedCls,this.nonMenuItemCls)},beforeShow:function(){this.getFloated()&&(this.hasFloatMenuParent()||this.allowOtherMenus||Ext.menu.Manager.hideAll()),this.callParent(arguments)},afterShow:function(){var e=this.ariaEl.dom;this.callParent(),Ext.menu.Manager.onShow(this),this.getFloated()&&e&&e.setAttribute("aria-expanded",!0),this.getFloated()&&(this.maxHeight=this.savedMaxHeight),this.autoFocus&&this.focus()},afterHide:function(){var e=this.ariaEl.dom;this.callParent(),this.lastHide=Ext.Date.now(),Ext.menu.Manager.onHide(this),this.getFloated()&&e&&e.setAttribute("aria-expanded",!1),delete this.getInherited().topmostFocusEvent},factoryItem:function(e){var t;return"string"==typeof e&&"@"!==e[0]&&(e="-"===e?{xtype:"menuseparator"}:{}),(t=this.callParent([e])).isMenuItem&&(t.parentMenu=this),t},updateIndented:function(e){this.isConfiguring||(this.bodyElement.toggleCls(this.hasSeparatorCls,!(!e||!this.getSeparator())),this.items.each(this.syncItemIndentedCls,this))},updateSeparator:function(e){this.bodyElement.toggleCls(this.hasSeparatorCls,!(!e||!this.getIndented()))},privates:{applyItemDefaults:function(e){return(e=this.callParent([e])).isComponent||e.xtype||e.xclass||(e.group||e.name?e.xtype="menuradioitem":"checked"in e&&(e.xtype="menucheckitem")),e},applyGroups:function(e,t){var i,n,r,s,o,a,l,c=Ext.apply({},t),u=this.isConfiguring;if(e){for(i in this.updatingGroups=!0,e)if(l=c[i],c[i]=a=e[i],!u){for(s=0,r=(n=this.lookupName(i)).length;s<r;s++)(o=n[s]).setChecked(o.getValue()===a);this.fireEvent("groupchange",this,i,a,l)}this.updatingGroups=!1}return c},processFocusableContainerKeyEvent:function(e){var t,i=e.keyCode;if(i===e.ESC||Ext.fly(e.target).is("input[type=checkbox]")&&(i===e.LEFT||i===e.RIGHT||i===e.UP||i===e.DOWN))e.preventDefault(),t=this.getItemFromEvent(e),e.target=t&&t.focusEl.dom;else{if(i!==e.TAB||!Ext.fly(e.target).is("input[type=text],textarea"))return this.callParent([e]);e.preventDefault(),t=this.getItemFromEvent(e),e.target=t&&t.focusEl.dom,e.shiftKey?(e.shiftKey=!1,e.keyCode=e.UP):e.keyCode=e.DOWN}return e},onEscKey:function(e){this.getFloated()&&this.hide()},onSpaceKey:function(e){var t=this.getItemFromEvent(e);t&&t.isMenuItem&&t.onSpace(e)},onFocusableContainerLeftKey:function(e){e.preventDefault(),this.parentMenu&&this.hide()},onFocusableContainerRightKey:function(e){var t=this.getItemFromEvent(e);e.preventDefault(),t&&t.expandMenu(e)},onClick:function(e){var t,i,n="keydown"===e.type,r="touch"===e.pointerType;if(this.getDisabled())return e.stopEvent();if((t=this.getItemFromEvent(e))&&t.isMenuItem){if(t.getMenu()&&this.ignoreParentClicks?e.stopEvent():i=t.onClick(e),this.destroyed)return;t.getMenu()&&!1!==i&&(n||r)&&t.expandMenu(e)}t&&!t.getDisabled()||(t=void 0),this.fireEvent("click",this,t,e)},onMouseLeave:function(e){this.itemOverTask&&this.itemOverTask.cancel(),this.getDisabled()||this.fireEvent("mouseleave",this,e)},onMouseOver:function(e){var t,i,n=this,r=n.getActiveItem(),s=r&&r.getMenu&&r.getMenu(),o=s&&s.isVisible(),a="touch"===e.pointerType;n.getDisabled()||(t=a?!n.el.contains(document.activeElement):!n.el.contains(e.getRelatedTarget()),(i=n.getItemFromEvent(e))&&(a?n.handleItemOver(e,i):(i.isMenuItem?i.bodyElement:i.el).contains(e.getRelatedTarget())||n.itemOverTask.delay(o?n.mouseLeaveDelay:0,null,null,[e,i])),t&&n.fireEvent("mouseenter",n,e),n.fireEvent("mouseover",n,i,e))},handleItemOver:function(e,t){var i="mouse"===e.pointerType;t.containsFocus||!i&&!t.isMenuItem||t.focus(),t.expandMenu&&i&&t.expandMenu(e)},getItemFromEvent:function(e){for(var t,i=this.bodyElement.dom,n=e.getTarget();n&&n.parentNode!==i;)n=n.parentNode;return(t=n&&Ext.getCmp(n.id))&&t.isMenuItem&&!e.within(t.bodyElement)&&(t=null),t},hasFloatMenuParent:function(){return this.parentMenu||this.up("menu[_floated=true]")},syncItemIndentedCls:function(e){var t=e.isMenuItem?e.getIndented():e.indented;e.toggleCls(this.indentedCls,!!(t||this.getIndented()&&!1!==t))}},statics:{create:function(e,t){return e=Ext.isArray(e)?Ext.apply({xtype:"menu",items:e},t):Ext.apply({xtype:"menu"},e,t),Ext.create(e)}},deprecated:{6.5:{configs:{plain:{message:'To achieve classic toolkit "plain" effect, use "indented".'},showSeparator:{message:'To achieve classic toolkit "showSeparator" effect, use "separator".'}}}}}),Ext.define("Ext.theme.material.menu.Menu",{override:"Ext.menu.Menu",config:{indented:!1}}),Ext.define("Ext.theme.material.SplitButton",{override:"Ext.SplitButton",config:{splitRipple:{delegate:".x-splitInner-el"},arrowRipple:{delegate:".x-splitArrow-el"}},menuShowDelay:0,doDestroy:function(){this.hasOwnProperty("menuShowTimeout")&&Ext.undefer(this.menuShowTimeout),this.callParent()}}),Ext.define("Ext.theme.material.layout.overflow.Scroller",{override:"Ext.layout.overflow.Scroller",config:{backwardTool:{ripple:{centered:!1,bound:!0,diameterLimit:!1}},forwardTool:{ripple:{centered:!1,bound:!0,diameterLimit:!1}}}}),Ext.define("Ext.Chip",{extend:Ext.Component,xtype:"chip",isChip:!0,focusable:!1,tabIndex:null,classCls:Ext.baseCSSPrefix+"chip",hasIconCls:Ext.baseCSSPrefix+"has-icon",closableCls:Ext.baseCSSPrefix+"closable",element:{reference:"element",children:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",children:[{reference:"iconElement",cls:Ext.baseCSSPrefix+"icon-el "+Ext.baseCSSPrefix+"font-icon"},{reference:"textElement",cls:Ext.baseCSSPrefix+"text-el"},{reference:"closeElement",cls:Ext.baseCSSPrefix+"close-el "+Ext.baseCSSPrefix+"font-icon",listeners:{click:"onClick"}}]}]},config:{icon:!1,iconCls:null,text:null,closable:null,closeHandler:null,scope:null},defaultBindProperty:"text",onClick:function(e){var t=this.getCloseHandler();Ext.callback(t,this.getScope(),[this,e],0,this)},applyIcon:function(e){return Ext.resolveResource(e)},updateClosable:function(e){this.el.toggleCls(this.closableCls,e)},updateIcon:function(e){var t=this.iconElement,i=this.hasIconCls;e?(t.setStyle("background-image","url("+e+")"),this.addCls(i)):(t.setStyle("background-image",""),this.getIconCls()||this.removeCls(i))},updateIconCls:function(e,t){this.iconElement.replaceCls(t,e),this.el.toggleCls(this.hasIconCls,!!e)},updateText:function(e){this.textElement.setHtml(Ext.htmlEncode(e))}}),Ext.define("Ext.Dialog",{extend:Ext.Panel,xtype:["dialog","window"],alternateClassName:["Ext.Window","Ext.window.Window"],isDialog:!0,isWindow:!0,ariaRole:"dialog",classCls:Ext.baseCSSPrefix+"dialog",cachedConfig:{dismissAction:["cancel","abort","no","close"],maximizeAnimation:{easing:"ease-in",from:{opacity:.6},to:{opacity:1}},maximizeProxy:{centered:!1,draggable:!1,modal:!1,showAnimation:null,hideAnimation:null},maximizeTool:{itemId:"maximize",tooltip:"Maximize to fullscreen"},restoreAnimation:{easing:"ease-in",from:{opacity:1},to:{opacity:.6}},restoreTool:{itemId:"restore",tooltip:"Restore to original size"}},config:{constrainDrag:!0,dismissHandler:null,maximizable:null,maximized:null,maskTapHandler:null,restorable:null},border:!0,bodyBorder:!1,centered:!0,floated:!0,focusable:!1,tabIndex:-1,draggable:{handle:"."+Ext.baseCSSPrefix+"draggable",listeners:{beforedragstart:"onBeforeDragDialog",scope:"this"}},keyMap:{ESC:"onEscape",scope:"this"},modal:!0,shadow:!0,headerCls:Ext.baseCSSPrefix+"dialogheader",titleCls:Ext.baseCSSPrefix+"dialogtitle",toolCls:[Ext.baseCSSPrefix+"paneltool",Ext.baseCSSPrefix+"dialogtool"],hideMode:"offsets",hideAnimation:{type:"popOut",duration:250,easing:"ease-out"},showAnimation:{type:"popIn",duration:150,easing:"ease-out"},initialize:function(){this.callParent(),this.tabGuard&&this.addPlugin({type:"tabguard",tabGuardBeforeIndex:this.tabGuardBeforeIndex,tabGuardAfterIndex:this.tabGuardAfterIndex})},doDestroy:function(){Ext.destroy(this.maximizeTool,this.restoreTool),this.callParent()},close:function(e){var t,i,n,r,s,o,a=this,l=a.getButtons(),c=a.getDismissAction(),u=a.getDismissHandler();if(e=e||null,!1!==a.fireEvent("beforeclose",a,e)){if(!0!==u)if(u)Ext.callback(u,null,[a,e],0,a),r=!0;else if(c&&l)for("string"==typeof c&&(c=[c]),s=0,o=c.length;s<o;++s)if((t=l.getComponent(c[s]))&&t.isButton){t.onTap(e),r=!0;break}r||(i=a.getCloseAction())&&((n="destroy"===i)||a[i]()),a.destroyed||(a.fireEvent("close",a,e),n&&a.destroy())}},createMaximizeProxy:function(e){return Ext.apply({title:this.getTitle(),cls:this.getCls(),userCls:this.getUserCls(),iconCls:this.getIconCls(),ui:this.getUi()},e)},maximize:function(e){var t=this.maximizing;return t||this.getMaximized()||(this._maximizeAnim=e,this.setMaximized(!0),t=this.maximizing)?t?t.promise:Ext.Promise.resolve(!0):Ext.Promise.resolve(!1)},restore:function(e){var t=this.restoring;return t||!this.getMaximized()||(this._maximizeAnim=e,this.setMaximized(!1),t=this.restoring)?t?t.promise:Ext.Promise.resolve(!0):Ext.Promise.resolve(!1)},shouldRecenter:function(){return!this.getMaximized()&&this.callParent()},updateConstrainDrag:function(e){var t=this.getDraggable();t&&(!0===e&&(e=Ext.getBody()),t.setConstrain(e))},updateDraggable:function(e,t){this.callParent([e,t]),this.isConfiguring||this.syncHeaderItems()},updateHeader:function(e,t){var i;this.callParent([e,t]),e&&(this.syncHeaderItems(),this.tabGuard&&this.getTabGuard&&(i=this.getTabGuard("before"))&&i.dom&&i.insertBefore(e.el))},applyMaximizable:function(e){return this.maximizeTool=Ext.updateWidget(this.maximizeTool,e,this,"createMaximizeTool","maximizeTool"),this.syncHeaderItems(),e},applyMaximized:function(e){var t;if(this.isConfiguring||(t=e?"beforemaximize":"beforerestore",!1!==this.fireEvent(t,this)))return!!e;this._maximizeAnim=void 0},updateMaximized:function(e){var t,i,n,r,s=this,o=s.el,a=s.maximizedCls,l=s.maximizeTool,c=e?"restoring":"maximizing",u=s[c];s.isConfiguring?s.needsCenter=e:(i=s._maximizeAnim,r=s.needsCenter&&!e,s.needsCenter=!1,void 0===i&&(i=s[e?"getMaximizeAnimation":"getRestoreAnimation"]())),s._maximizeAnim=void 0,u&&u.destroy(),s.getMaximizable()?s.setRestorable(e):s.syncHeaderItems(),l&&l.setHidden(e),i?(t=e?(c="maximizing",n=s.captureSize(),s.captureSize(!0)):(c="restoring",o.removeCls(a),r&&s.center(),n=s.captureSize(!0),s.captureSize()),s[c]=s.animateMaximizeRestore(n,t,i,function(){e&&o.addCls(a),s[c]=null,s.fireEvent(e?"maximize":"restore",s)})):(o.toggleCls(a,e),r&&s.center(),s.fireEvent(e?"maximize":"restore",s))},createMaximizeTool:function(e){var t=this.adjustToolDefaults(Ext.clone(e));return t.handler="onMaximize",t.scope=this,t},applyRestorable:function(e){return this.restoreTool=Ext.updateWidget(this.restoreTool,e,this,"createRestoreTool","restoreTool"),this.syncHeaderItems(),e},createRestoreTool:function(e){var t=this.adjustToolDefaults(Ext.clone(e));return t.handler="onRestore",t.scope=this,t},afterShow:function(){this.callParent(),this.getModal()&&this.focus()},onBeforeDragDialog:function(e,t,i){var n=this.getHeader();if(!n||!n.el.contains(i.target))return!1},onCloseTool:function(e,t,i){this.close(i)},onEscape:function(e){this.close(e)},onMaximize:function(){this.setMaximized(!0)},onRestore:function(){this.setMaximized(!1)},onModalMaskTap:function(e){var t,i=this.getMaskTapHandler();return i?Ext.callback(i,null,[this,e],0,this):t=this.callParent([e]),t},privates:{draggableCls:Ext.baseCSSPrefix+"draggable",needsCenter:!1,maximizedCls:Ext.baseCSSPrefix+"maximized",animateMaximizeRestore:function(e,t,i,n){var r=new Ext.Deferred,s=this.getMaximizeProxy(),o=Ext.merge({from:{width:e.w+"px",height:e.h+"px",transform:{translateX:e.x+"px",translateY:e.y+"px"}},to:{width:t.w+"px",height:t.h+"px",transform:{translateX:t.x+"px",translateY:t.y+"px"}}},i);return s=this.createMaximizeProxy(s),(s=new this.self(s)).show(),o.element=s.el,o.callback=function(){s.destroy(),n(),r.resolve(!0)},o=new Ext.fx.animation.Abstract(o),Ext.Animator.run(o),r.destroy=function(){r.destroy=Ext.emptyFn,o.destroy(),r.destroyed=!0},r},captureSize:function(e){var t;return e?{x:0,y:0,w:Ext.getViewportWidth(),h:Ext.getViewportHeight()}:(t=this.el.measure(),{x:this.getX(),y:this.getY(),w:t.width,h:t.height})},syncHeaderItems:function(){var e,t,i=this.maximizeTool,n=this.restoreTool,r=i||n?this.ensureHeader():this.getHeader(),s=this.draggableCls;r&&(e=this.getDraggable()&&!this.getMaximized(),r.toggleCls(s,e),(t=r.getTitle())&&t.toggleCls(s,e),i&&i.parent!==r&&r.add(i),n&&n.parent!==r&&r.add(n))},updateX:function(e,t){this.callParent([e,t]),!this._centering&&this.getCentered()&&this.setCentered(!1)}}}),Ext.define("Ext.field.Dirty",{extend:Ext.Mixin,mixinConfig:{id:"dirtyfield",after:{_fixReference:"fixDirtyState"}},config:{bubbleDirty:!0,dirty:{lazy:!0,$value:!1}},dirty:!1,_childDirtyState:null,adjustChildDirtyCount:function(e){var t=this._childDirtyState;t&&(t.ready?(t.counter+=e?1:-1,this.setDirty(!!t.counter)):e&&++t.counter)},beginSyncChildDirty:function(){this._childDirtyState={counter:0,ready:!1}},finishSyncChildDirty:function(){var e=this._childDirtyState,t=!!e.counter;t!==this.dirty?this.setDirty(t):t&&this.informParentDirty(t),e.ready=!0},fireDirtyChange:function(){this.fireEvent("dirtychange",this,this.dirty)},fixDirtyState:function(){!this._childDirtyState&&this.dirty&&this.informParentDirty(!0)},informParentDirty:function(e){var t=this.getBubbleDirty()&&this.lookupNameHolder(),i=this._childDirtyState,n=t&&t._childDirtyState;if(n){if(i&&!i.ready&&n.ready&&!e)return;t.adjustChildDirtyCount(e,this)}},invalidateChildDirty:function(){this._childDirtyState=null},isDirty:function(){return Ext.referencesDirty&&Ext.fixReferences(),this.getDirty()},updateDirty:function(e){this.dirty=e,this.isDirtyInitializing||(this.fireEvent&&this.fireDirtyChange(),this.informParentDirty(e))}}),Ext.define("Ext.field.Field",{extend:Ext.Component,alternateClassName:"Ext.form.Field",xtype:"field",mixins:[Ext.field.Dirty],isField:!0,isFormField:!0,cachedConfig:{bodyAlign:"start",labelAlign:"left",labelCls:null,labelTextAlign:"left",labelWidth:null,labelMinWidth:null,labelWrap:!1},config:{name:null,label:null,required:!1,requiredMessage:"This field is required",value:null,dataType:{cached:!0,$value:null},validators:null,validationMessage:"Is in the wrong format",validateDisabled:null,autoFitErrors:null,inline:null,error:null,errorMessage:null,errorTarget:"qtip",errorTpl:null,errorTip:null,sideError:null,tipError:null,titleError:null,underError:null},htmlErrorsTpl:['<tpl if="count == 1">','<tpl for="errors">{.:htmlEncode}</tpl>','<tpl elseif="count">','<ul class="{listCls}">','<tpl for="errors"><li>{.:htmlEncode}</li></tpl>',"</ul>","</tpl>"],plainErrorsTpl:['<tpl if="count">','<tpl for="errors" between="\\\\n">{.}</tpl>',"</tpl>"],_errorTplMap:{title:"plainErrorsTpl"},originalValue:null,focusable:!0,classCls:Ext.baseCSSPrefix+"field",requiredCls:Ext.baseCSSPrefix+"required",noLabelWrapCls:Ext.baseCSSPrefix+"no-label-wrap",invalidCls:Ext.baseCSSPrefix+"invalid",noAutoFitErrorsCls:Ext.baseCSSPrefix+"no-auto-fit-errors",inlineCls:Ext.baseCSSPrefix+"inline",labelAlignVerticalCls:Ext.baseCSSPrefix+"label-align-vertical",labelAlignHorizontalCls:Ext.baseCSSPrefix+"label-align-horizontal",labeledCls:Ext.baseCSSPrefix+"labeled",verticalLabelMap:{top:1,placeholder:1,bottom:1},horizontalLabelMap:{left:1,right:1},nameable:!0,validateOnInit:"auto",errorElement:null,errorIconElement:null,errorMessageElement:null,element:{reference:"element",classList:[Ext.supports.CSSMinContent?"":Ext.baseCSSPrefix+"no-min-content",Ext.supports.PercentageSizeFlexBug?Ext.baseCSSPrefix+"has-percentage-size-flex-bug":""]},initialize:function(){this.callParent(),""===this.getValue()&&"all"===this.validateOnInit&&this.validate(),this.handleFieldDefaults()},didValueChange:function(e,t){return!this.isEqual(e,t)},getTemplate:function(){return[{reference:"labelElement",cls:Ext.baseCSSPrefix+"label-el",tag:"label",children:[{reference:"labelTextElement",cls:Ext.baseCSSPrefix+"label-text-el",tag:"span"}]},{reference:"bodyWrapElement",cls:Ext.baseCSSPrefix+"body-wrap-el",children:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",children:this.getBodyTemplate()},{reference:"errorElement",cls:Ext.baseCSSPrefix+"error-el",children:[{reference:"errorIconElement",cls:Ext.baseCSSPrefix+"error-icon-el "+Ext.baseCSSPrefix+"font-icon"},{reference:"errorMessageElement",cls:Ext.baseCSSPrefix+"error-message-el"}]}]}]},getBodyTemplate:Ext.emptyFn,initElement:function(){this.callParent(),this.innerElement=this.innerElement||this.bodyElement},onFocusLeave:function(e){this.callParent([e]),this.completeEdit()},completeEdit:Ext.emptyFn,updateBodyAlign:function(e,t){var i=this.element;t&&i.removeCls(Ext.baseCSSPrefix+"body-align-"+t),e&&i.addCls(Ext.baseCSSPrefix+"body-align-"+e)},updateAutoFitErrors:function(e){this.toggleCls(this.noAutoFitErrorsCls,!1===e)},applyErrorTpl:function(e){return e&&!e.isTemplate&&(e=Ext.XTemplate.get(e)),e},applyDataType:function(e){return e&&Ext.Factory.dataField(e)},formatErrors:function(e){var t=this.getErrorTpl();return(t=t||this.lookupTpl(this._errorTplMap[this.getErrorTarget()]||"htmlErrorsTpl")).apply({count:e?e.length:0,label:this.getLabel(),errors:e})},updateError:function(e){var t=this.formatErrors(Ext.Array.from(e));this.setErrorMessage(t)},updateErrorMessage:function(e){var t,i=this;if(i.fireEvent("errorchange",i,e),!i.preventMark)switch(i.toggleInvalidCls(!!e),i.getErrorTarget()){case"side":i.setSideError(e);break;case"qtip":i.setTipError(e);break;case"title":i.setTitleError(e);break;case"under":i.setUnderError(e);break;case"parent":(t=i.up("[onFieldErrorChange]"))&&t.onFieldErrorChange(i,e)}},updateErrorTarget:function(e,t){var i,n,r=this;t&&(r.removeCls(Ext.baseCSSPrefix+"error-target-"+t),"qtip"===t?r.setTipError(null):"title"===t?r.setTitleError(null):"side"===t?r.setSideError(null):"under"===t?r.setUnderError(null):"parent"===t&&(n=r.up("[onFieldErrorChange]"))&&n.onFieldErrorChange(r)),e&&(r.addCls(Ext.baseCSSPrefix+"error-target-"+e),r.isConfiguring||(i=r.getError())&&("qtip"===e?r.setTipError(i):"title"===e?r.setTitleError(i):"side"===e?r.setSideError(i):"under"===e?r.setUnderError(i):"parent"===e&&(n=r.up("[onFieldErrorChange]"))&&n.onFieldErrorChange(r,i)))},updateInline:function(e){this.toggleCls(this.inlineCls,e)},updateSideError:function(e){e=e&&Ext.apply({html:e},this.getErrorTip()),this.errorElement.getData().qtip=e},updateTipError:function(e){e=e&&Ext.apply({html:e},this.getErrorTip()),this.bodyElement.getData().qtip=e},updateTitleError:function(e){var t=this.el.dom;e?t.setAttribute("title",e):t.removeAttribute("title")},updateUnderError:function(e){this.errorMessageElement.dom.innerHTML=e||""},updateLabel:function(e){this.labelTextElement.setHtml(e),this.el.toggleCls(this.labeledCls,!!e)},updateLabelAlign:function(e,t){var i=this.element;t&&i.removeCls(Ext.baseCSSPrefix+"label-align-"+t),e&&i.addCls(Ext.baseCSSPrefix+"label-align-"+e),i.toggleCls(this.labelAlignVerticalCls,e in this.verticalLabelMap),i.toggleCls(this.labelAlignHorizontalCls,e in this.horizontalLabelMap)},updateLabelTextAlign:function(e,t){var i=this.element;t&&i.removeCls(Ext.baseCSSPrefix+"label-text-align-"+t),e&&i.addCls(Ext.baseCSSPrefix+"label-text-align-"+e)},updateLabelCls:function(e,t){var i=this.labelElement;e&&i.addCls(e),t&&i.removeCls(t)},updateLabelWidth:function(e){this.labelElement.setWidth(e)},updateLabelMinWidth:function(e){this.labelElement.setStyle("min-width",Ext.Element.addUnits(e))},updateLabelWrap:function(e){this.element.toggleCls(this.noLabelWrapCls,!e)},updateName:function(e){this.name=e},updateRequired:function(e){this.element.toggleCls(this.requiredCls,e),this.isConfiguring||this.validate()},updateRequiredMessage:function(){this.isConfiguring||this.validate()},updateDisabled:function(e,t){this.callParent([e,t]),this.isConfiguring||this.validate()},updateValidateDisabled:function(){this.isConfiguring||this.validate()},applyValue:function(e){return this.isConfiguring&&(this.originalValue=e),e},updateValue:function(e,t){var i,n=this;Ext.isEmpty(e)&&Ext.isEmpty(t)||n.validate(),e!==t&&(i=n.rawToValue(n.processRawValue(n.getRawValue())),Ext.isEmpty(i,!0)||String(e)===String(i)||(n._value=e=i),n.isConfiguring||n.fireEvent("change",n,e,t)),n.setDirty(n.isDirty())},reset:function(){return this.setValue(this.originalValue),this},resetOriginalValue:function(){this.originalValue=this.getValue(),this.setDirty(!1)},isDirty:function(){return!this.isEqual(this.getValue(),this.originalValue)},toggleInvalidCls:function(e){this.el[e?"addCls":"removeCls"](this.invalidCls)},markInvalid:function(e){this.setError(e)},clearInvalid:function(){this.setError(null)},isValid:function(){return!this.getError()},isEqual:function(e,t){return String(e)===String(t)},applyValidators:function(e){var t,i,n;for(n=(i=(e=e&&!Ext.isArray(e)?[e]:e)&&e.length)?[]:null,t=0;t<i;++t)n.push(this.decodeValidator(e[t]));return n},wrapValidatorFn:function(t,e){var i=this,n=e&&e.scope;return new Ext.data.validator.Validator(function(e){return Ext.callback(t,n,[e],0,i)})},doValidate:function(e,t,i){var n,r,s,o=this.getValidators(),a=o&&o.length;for(n=0;n<a;++n)s=o[n],i&&s.lazy||!0!==(r=s.validate(e))&&(r&&"string"==typeof r||Ext.raise("Validator did not return a valid result."),t.push(r))},parseValue:Ext.identityFn,validate:function(e){var t,i,n,r,s,o,a=this;return!(!a.isConfiguring||"none"!==a.validateOnInit)||(a.getDisabled()&&!a.getValidateDisabled()||(i=[],a.isInputField&&!a.isSelectField?(s=(t=!(o=a.getInputValue()))&&a.inputElement.dom.validity)&&s.badInput&&(i.push(a.badFormatMessage),t=!1):t=""===(o=a.getValue())||null==o,t&&a.getRequired()?i.push(a.getRequiredMessage()):i.length||(t||(o=a.parseValue(o,i)),i.length||(n=a._validationField,r=a._validationRecord,n&&r&&n.validate(o,null,i,r),t||a.doValidate(o,i,e))),!i.length)?(a.setError(null),!0):(a.setError(i),!1))},getFocusClsEl:function(){return this.element},updateHeight:function(e,t){this.callParent([e,t]),this.syncFormLayoutHeight()},onAdded:function(e,t){this.callParent([e,t]),this.syncFormLayoutHeight(),this.validateLayout()},onRemoved:function(e){this.callParent([e]),this.syncFormLayoutHeight()},rawToValue:Ext.identityFn,processRawValue:Ext.identityFn,transformRawValue:Ext.identityFn,getRawValue:function(){var e=this.inputElement?this.inputElement.getValue():Ext.valueFrom(this.rawValue,"");return this.rawValue=e},handleFieldDefaults:function(){var e,t,i,n,r,s=this.getInherited();if(s&&(e=s.fieldDefaults))for(t in n=this.initialConfig,e)n[t]||(i=Ext.util.Format.capitalize(t),r=e[t],this["set"+i]?this["set"+i](r):this[t]=r)},serialize:function(){var e,t=this.getValue();return null!=t&&(e=this._validationField||this.getDataType())&&e.serialize&&(t=e.serialize(t)),t},privates:{syncFormLayoutHeight:function(){var e=this.parent,t=this.getHeight();t&&e&&e.getLayout().isFormLayout||(t=null),this.bodyElement.setHeight(t)},validateLayout:function(){var e=this.getErrorTarget(),t=this.parent;this.isInner&&t&&t.getLayout().isFormLayout&&(this.setLabelAlign("left"),"under"===e&&this.setErrorTarget("side"))},applyBind:function(e,t){var i,n,r=t&&t.value;return(i=this.callParent([e,t]))&&(n=i.value,this.hasBindingValue=!!n,n!==r&&this.getInherited().modelValidation&&this.updateValueBinding(i)),i},updateValueBinding:function(e){var t=e.value,i=e.$fieldBinding;i&&(i.destroy(),e.$fieldBinding=null),t&&t.bindValidationField&&(this.fieldBinding=t.bindValidationField("setValidationField",this))},setValidationField:function(e,t){this._validationField=e,this._validationRecord=t},decodeValidator:function(e){var t=Ext.typeOf(e),i=e.fn;return i="function"===t?this.wrapValidatorFn(e):"regexp"===t?Ext.Factory.validator({type:"format",matcher:e}):"object"===t&&i&&!e.isValidator?this.wrapValidatorFn(i,e):Ext.Factory.validator(e)}}}),Ext.define("Ext.theme.material.field.Field",{override:"Ext.field.Field",config:{labelAlign:"top"}}),Ext.define("Ext.field.Input",{extend:Ext.field.Field,xtype:"inputfield",isInputField:!0,tag:"input",config:{inputType:{cached:!0,$value:"text"},readOnly:!1,inputValue:null},focusEl:"inputElement",ariaEl:"inputElement",inputTabIndex:0,getBodyTemplate:function(){return[this.getInputTemplate()]},getInputTemplate:function(){return{tag:this.tag,reference:"inputElement",tabindex:this.inputTabIndex,cls:Ext.baseCSSPrefix+"input-el"}},initElement:function(){this.callParent(),this.labelElement.dom.setAttribute("for",this.inputElement.id)},updateDisabled:function(e,t){this.callParent([e,t]),this.inputElement.dom.disabled=!!e},updateInputType:function(e){this.setInputAttribute("type",e)},updateName:function(e,t){this.callParent([e,t]),this.setInputAttribute("name",e)},updateReadOnly:function(e){this.setInputAttribute("readonly",!!e||null)},updateValue:function(e,t){this.canSetInputValue()&&this.setInputValue(e),this.callParent([e,t])},applyInputValue:function(e){return null!=e?e+"":""},completeEdit:function(){var e=this.getInputValue();null!==this.parseValue(e)&&this.setInputValue(this.getValue())},updateInputValue:function(e){var t=this.inputElement.dom;t.value!==e&&(t.value=e)},reset:function(){var e=this.originalValue;return this.isEqual(e,this.getValue())?(this.setInputValue(e),this.isValid()||this.validate()):this.setValue(e),this},privates:{canSetInputValue:function(){return!0},setInputAttribute:function(e,t){var i=this.inputElement.dom;Ext.isEmpty(t,!0)?i.removeAttribute(e):i.setAttribute(e,t)}},deprecated:{6.5:{configs:{inputCls:null}}}}),Ext.define("Ext.field.trigger.Base",{extend:Ext.Widget,alias:"trigger.base",mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:"trigger",aliasPrefix:"trigger."},isTrigger:!0,config:{field:null,group:null,side:null,name:null,triggers:null},classCls:Ext.baseCSSPrefix+"trigger",groupedCls:Ext.baseCSSPrefix+"grouped",inheritUi:!0,statics:{sort:function(e){return Ext.sortByWeight(e),e}},doDestroy:function(){var e,t,i=this.getTriggers();if(i)for(e=0,t=i.length;e<t;e++)i[e].destroy();this.setTriggers(null),this.callParent()},updateField:function(e){this.field=this.ownerCmp=e,this.doInheritUi()},updateGroup:function(e){this.isConfiguring||this.getField().syncTriggers()},updateSide:function(){this.isConfiguring||this.getField().syncTriggers()},updateTriggers:function(e){var t,i,n=this.element.dom;if(this.toggleCls(this.groupedCls,!(!e||!e.length)),e)for(t=0,i=e.length;t<i;t++)n.appendChild(e[t].element.dom)}}),Ext.define("Ext.field.trigger.Trigger",{extend:Ext.field.trigger.Base,xtype:"trigger",alias:"trigger.trigger",config:{handler:null,iconCls:null,repeat:null,scope:null,focusOnTap:!0},interactiveCls:Ext.baseCSSPrefix+"interactive",template:[{reference:"iconElement",classList:[Ext.baseCSSPrefix+"icon-el",Ext.baseCSSPrefix+"font-icon"]}],constructor:function(e){var t;this.callParent([e]),(t=this.getRepeat())?this.repeater=new Ext.util.ClickRepeater(Ext.apply({target:this,preventDefault:!0,listeners:{mousedown:"onClickRepeaterTouchStart",mouseup:"onClickRepeaterTouchEnd",click:"onClickRepeaterClick",scope:this}},t)):this.element.on({click:"onClick",mousedown:"onMouseDown",scope:this})},doDestroy:function(){Ext.destroyMembers(this,"repeater"),this.callParent()},onClickRepeaterClick:function(e,t){this.onClick(t)},onClick:function(e){var t=!this.getDisabled()&&this.getHandler(),i=this.getField();!i||this.getDisabled()||i.getDisabled()||("mouse"!==e.pointerType&&(e.preventDefault(),this.getFocusOnTap()&&(i.getFocusTrap?i.getFocusTrap():i.getFocusEl()).dom!==document.activeElement&&(this.isExpandTrigger&&(i.focusingFromExpandTrigger=!0),i.focus())),t&&Ext.callback(t,this.getScope(),[i,this,e],null,i))},onMouseDown:function(e){var t;"mouse"===e.pointerType&&((t=this.getFocusOnTap()&&this.getField())&&!t.getDisabled()&&t.focus(),e.preventDefault())},onClickRepeaterTouchStart:function(e,t){this.onMouseDown(t)},onClickRepeaterTouchEnd:function(e,t){var i=this.field;Ext.callback(this.endHandler,this.scope,[i,this,t],0,i)},updateHandler:function(e){this.toggleCls(this.interactiveCls,!!e)},updateIconCls:function(e,t){this.iconElement.replaceCls(t,e)}}),Ext.define("Ext.field.trigger.Clear",{extend:Ext.field.trigger.Trigger,xtype:"cleartrigger",alias:"trigger.clear",classCls:Ext.baseCSSPrefix+"cleartrigger",weight:-1e3,hidden:!0,handler:"onClearIconTap",scope:"this"}),Ext.define("Ext.field.Text",{extend:Ext.field.Input,xtype:"textfield",alternateClassName:"Ext.form.Text",config:{clearable:!0,placeholder:null,maxLength:null,autoComplete:null,autoCapitalize:null,autoCorrect:null,autoHideInputMask:null,inputMask:null,pattern:null,triggers:{clear:{type:"clear"}},editable:!0,bodyAlign:"stretch",labelInPlaceholder:{lazy:!0,$value:!0},textAlign:null},cachedConfig:{animateUnderline:!1,parseValidator:null},bubbleEvents:["action"],badFormatMessage:"Value does not match the required format",defaultBindProperty:"value",twoWayBindable:{value:1},publishes:{value:1},inputType:"text",classCls:Ext.baseCSSPrefix+"textfield",focusedCls:Ext.baseCSSPrefix+"focused",emptyCls:Ext.baseCSSPrefix+"empty",webkitBorderBoxBugCls:Ext.baseCSSPrefix+"webkit-border-box-bug",requiredIndicator:"*",getBodyTemplate:function(){var e=[{reference:"beforeInputElement",cls:Ext.baseCSSPrefix+"before-input-el"}];return e.push(this.getInputTemplate()),e.push({reference:"afterInputElement",cls:Ext.baseCSSPrefix+"after-input-el"}),[{reference:"inputWrapElement",cls:Ext.baseCSSPrefix+"input-wrap-el"+(Ext.supports.WebKitInputTableBoxModelBug?" "+this.webkitBorderBoxBugCls:""),children:e},{reference:"underlineElement",cls:Ext.baseCSSPrefix+"underline-el"}]},initialize:function(){Ext.isRobot&&(this.focusedInputDelay=0),this.callParent(),this.inputElement.on({keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",paste:"onPaste",mousedown:"onMouseDown",input:{fn:"onInput",delegated:!1},scope:this}),this.syncEmptyState()},clearValue:function(){var e=this.getInputMask();e?e.showEmptyMask(this,!0):this.forceSetValue(""),this.syncEmptyState()},isEqual:function(e,t){return this.transformValue(e)===this.transformValue(t)},forceSetValue:function(e){this.forceInputChange=!0,this.setValue(e),this.forceInputChange=!1},transformValue:function(e){return null==e&&(e=""),e},applyInputMask:function(e,t){var i=Ext.field.InputMask;return e&&(i||Ext.raise("Missing Ext.field.InputMask (required to use inputMask)")),e?i.from(e,t):null},updateInputMask:function(e,t){this.hasMask=!1,t&&t.release(),e&&(this.hasMask=!0,e.syncPattern(this))},doValidate:function(e,t,i){if(this.callParent([e,t,i]),!i){var n=this.getInputMask();n&&!n.isFilled(e)&&e!==n._mask&&t.push(this.badFormatMessage)}},parseValue:function(e,t){var i,n,r,s,o,a,l=this.getParseValidator();if(l){for(i=this._validationField,r=2;0<r--;)for(s=(a=r?this.getValidators():i&&i.getValidators())&&a.length,n=0;n<s;++n)if((o=a[n]).parse&&null!==(o=o.parse(e)))return o;null===(e=l.parse(e))&&t&&t.push(this.badFormatMessage)}return e},applyValue:function(e,t){if(!e||"string"!=typeof e||null!==(e=this.parseValue(e)))return this.transformValue(this.callParent([e,t]))},updateInputValue:function(e,t){var i=this.getInputMask();this.callParent([e,t]),this.syncEmptyState(),this.syncLabelPlaceholder(!1),i&&i.onChange(this,e,t)},updateTextAlign:function(e,t){var i=this.element;t&&i.removeCls(Ext.baseCSSPrefix+"text-align-"+t),e&&i.addCls(Ext.baseCSSPrefix+"text-align-"+e)},updatePlaceholder:function(e){this.setInputAttribute("placeholder",e)},applyMaxLength:function(e){return null!==e&&"number"!=typeof e&&Ext.raise("Ext.field.Text: [applyMaxLength] value which is not a number"),e},updateMaxLength:function(e){this.setInputAttribute("maxlength",e)},applyAutoComplete:function(e){return!0===e||"on"===e},updateAutoComplete:function(e){this.setInputAttribute("autocomplete",e?"on":"off")},applyAutoCapitalize:function(e){return!0===e||"on"===e},updateAutoCapitalize:function(e){this.setInputAttribute("autocapitalize",e?"on":"off")},applyAutoCorrect:function(e){return!0===e||"on"===e},updateAutoCorrect:function(e){this.setInputAttribute("autocorrect",e?"on":"off")},updateReadOnly:function(e){var t,i,n=this.getTriggers(),r=this.getEditable();for(t in this.callParent([e||!r]),n)!1!==(i=n[t]).disableOnReadOnly&&i.setDisabled(e);this.syncEmptyState()},updateEditable:function(e){var t,i=this.getTriggers(),n=this.getReadOnly();for(t in this.updateReadOnly(!e),i)!1!==i[t].disableOnReadOnly&&i[t].setDisabled(n)},updatePattern:function(e){this.setInputAttribute("pattern",e)},updateDisabled:function(e,t){this.callParent([e,t]),this.syncEmptyState()},updateClearable:function(e,t){var i,n;this.isConfiguring||(n=(i=this.getTriggers())&&i.clear,e?n||this.addTrigger("clear","clear"):n&&this.removeTrigger("clear"))},applyTriggers:function(e,t){var i,n,r,s=t||{},o=this.getClearable();for(i in e)if(n=e[i],(r=s[i])&&r.destroy(),n){if(!o&&"clear"===i)continue;s[i]=this.createTrigger(i,n)}return s},updateTriggers:function(){this.syncTriggers()},addTrigger:function(e,t){var i,n=this.getTriggers();return n&&n[e]&&Ext.raise('Trigger with name "'+e+'" already exists.'),"string"!=typeof e&&Ext.raise("Cannot add trigger. Key must be a string."),"string"==typeof t||Ext.isObject(t)||Ext.raise('Cannot add trigger "'+e+'". A config or instance is required.'),t=this.createTrigger(e,t),n?(n[e]=t,this.syncTriggers()):((i={})[e]=t,this.setTriggers(i)),t},removeTrigger:function(e,t){var i,n=this.getTriggers(),r=e;return r.isTrigger?r=e.getName():e=n[r],r?n[r]||Ext.raise('Cannot remove trigger. Trigger with name "'+r+'" not found.'):Ext.raise("Trigger not found."),delete n[r],!1!==t?e.destroy():(i=e.el.dom).parentNode.removeChild(i),this.syncTriggers(),e},fireKey:function(e){e.isSpecialKey()&&this.fireEvent("specialkey",this,e)},onKeyPress:function(e){var t=this.getInputMask();t&&t.onKeyPress(this,this.getValue(),e),this.fireEvent("keypress",this,e),Ext.supports.SpecialKeyDownRepeat||this.fireKey(e)},onKeyDown:function(e){var t=this.getInputMask();this.lastKeyTime=Date.now(),t&&t.onKeyDown(this,this.getValue(),e),this.ignoreInput=!0,Ext.supports.SpecialKeyDownRepeat&&this.fireKey(e),this.fireAction("keydown",[this,e],"doKeyDown")},doKeyDown:Ext.emptyFn,onKeyUp:function(e){this.fireAction("keyup",[this,e],"doKeyUp")},doKeyUp:function(e,t){e.syncEmptyState(),13===t.browserEvent.keyCode&&e.fireAction("action",[e,t],"doAction")},onInput:function(e){var t,i,n=this,r=n.inputElement.dom,s=r.value,o=n.getInputMask();o&&(o.processAutocomplete(this,s),s=r.value),n._inputValue=s,n.hasFocus||"placeholder"!==n.getLabelAlign()||n.syncLabelPlaceholder(!0),s&&(t=[],s=n.parseValue(s,t)),t&&t.length?n.setError(t):(i=n.getValue(),n.setValue(s),n.getValue()===i&&n.validate()),n.syncEmptyState(),n.ignoreInput?n.ignoreInput=!1:Ext.defer(function(){n.ignoreInput||n.destroyed||(n.fireEvent("keyup",e),n.ignoreInput=!1)},10)},doAction:function(){document.documentElement.getBoundingClientRect().top<0&&this.blur()},onClearIconTap:function(e,t){this.fireAction("clearicontap",[this,e,t],"doClearIconTap")},doClearIconTap:function(){this.clearValue()},onFocusEnter:function(e){var t=this.getInputMask();this.callParent([e]),this.addCls(this.focusedCls),this.syncLabelPlaceholder(!0),t&&t.onFocus(this,this.getValue())},onFocusLeave:function(e){var t=this.getInputMask();this.callParent([e]),this.removeCls(this.focusedCls),this.syncLabelPlaceholder(!0),t&&t.onBlur(this,this.getValue())},onPaste:function(e){this.forceInputChange=!0,this.handlePaste(e),this.forceInputChange=!1},getCaretPos:function(){return this.inputElement.getCaretPos()},setCaretPos:function(e){this.inputElement.setCaretPos(e)},getTextSelection:function(){return this.inputElement.getTextSelection()},select:function(e,t,i){return this.containsFocus&&this.inputElement.selectText(e,t,i),this},reset:function(){this.callParent(),this.syncEmptyState()},onClick:function(e){this.fireEvent("click",e)},onMouseDown:function(e){this.fireEvent("mousedown",e)},trimValueToMaxLength:function(){var e=this.getMaxLength(),t=this.getValue();e&&t.length>e&&this.setValue(t.slice(0,e))},doDestroy:function(){var e,t,i=this.getTriggers(),n=this.triggerGroups;if((t=this.labelElement&&this.labelElement.getActiveAnimation())&&t.stop(),n){for(e in n)n[e].destroy();this.triggerGroups=null}for(e in i)i[e].destroy();this.setTriggers(null),this.setInputMask(null),this.callParent()},onRender:function(){this.callParent(),this.syncLabelPlaceholder()},getRefItems:function(e){var t,i,n=this.getTriggers(),r=[];for(t in n)i=n[t],r.push(i),e&&i.getRefItems&&r.push.apply(r,i.getRefItems(e));return r},privates:{focusedInputDelay:300,forceInputChange:!1,hasMask:!1,lastKeyTime:0,applyParseValidator:function(e){return this.decodeValidator(e)},updateLabelInPlaceholder:function(e){var t=this.getPlaceholder()||"",i=this._animPlaceholderLabel;if("placeholder"!==this.getLabelAlign()||!this.getLabel())return this.clearWhenVisible("doPositionPlaceholder"),void this.setInputAttribute("placeholder",t);this.whenVisible("doPositionPlaceholder",[e,i]),this.el.toggleCls(Ext.baseCSSPrefix+"label-inside",e)},updateAnimateUnderline:function(e){this.toggleCls(Ext.baseCSSPrefix+"animate-underline",e)},canSetInputValue:function(){return this.hasMask||this.forceInputChange||!this.hasFocus||Date.now()-this.lastKeyTime>this.focusedInputDelay},doPositionPlaceholder:function(e,t){var i,n,r,s,o,a=this.labelElement;(n=a.getActiveAnimation())&&n.stop(),(r=this.lastPlaceholderAnimInfo)||(this.lastPlaceholderAnimInfo=r=this.getPlaceholderAnimInfo()),s=r.inside,o=r.outside,i={from:e?o:s,to:e?s:o,preserveEndState:!0,duration:250,easing:"ease-out"},t?a.animate(i):a.setStyle(i.to)},getPlaceholderLabel:function(){var e=this.getLabel();return e&&this.getRequired()&&(e+=" "+this.requiredIndicator),e},getPlaceholderAnimInfo:function(){var e=this.element,t=this.labelElement,i=this.inputElement,n=t.getOffsetsTo(e),r=i.getOffsetsTo(e),s=t.getPadding("l"),o=i.getPadding("l"),a=t.getPadding("t"),l=i.getPadding("t");return{inside:{transform:{translateX:r[0]-n[0]+(o-s)+"px",translateY:r[1]-n[1]+(l-a)+"px"},"font-size":i.getStyle("font-size")},outside:{transform:{translateX:"0px",translateY:"0px"},"font-size":t.getStyle("font-size")}}},handlePaste:function(e){var t=this.getInputMask();t&&t.onPaste(this,this.getValue(),e),this.fireEvent("paste",this,e)},createTrigger:function(e,t){return t.isTrigger||(!0===t?t={type:e}:"string"==typeof t&&(t={type:t}),t=(t=Ext.apply({name:e,field:this},t)).xtype?Ext.create(t):Ext.Factory.trigger(t)),t},syncLabelPlaceholder:function(e){var t;this._animPlaceholderLabel=e,this.rendered&&(t=!this.hasValue()&&(!this.hasFocus||this.getDisabled()||this.getReadOnly()),this.setLabelInPlaceholder(t)),this._animPlaceholderLabel=!1},hasValue:function(){return this.inputElement&&this.inputElement.dom.value},processRawValue:function(e){var t,i,n=this.stripCharsRe;return n&&(n.global||(t="g",t+=n.ignoreCase?"i":"",t+=n.multiline?"m":"",n=new RegExp(n.source,t)),(i=e.replace(n,""))!==e&&(this.transformRawValue.$nullFn||(i=this.transformRawValue(i)),e=this.inputElement.dom.value=i)),e},syncTriggers:function(){var e,t,i,n,r,s,o=this.getTriggers(),a=this.beforeInputElement,l=this.afterInputElement,c=this.triggerGroups||(this.triggerGroups={}),u=[],d=[],h={},f=Ext.field.trigger.Base;for(e in o)(i=(t=o[e]).getGroup())?(h[i]||(h[i]=[])).push(t):"left"===t.getSide()?u.push(t):d.push(t);for(i in h)(n=c[i])||(n=(n=o[i])||new f,c[i]=n),n.setTriggers(f.sort(h[i])),"left"===n.getSide()?u.push(n):d.push(n);for(f.sort(u),f.sort(d),r=0,s=u.length;r<s;r++)a.appendChild(u[r].element);for(r=0,s=d.length;r<s;r++)l.appendChild(d[r].element);for(i in c)i in h||((n=c[i]).setTriggers(null),n.destroy(),delete c[i])},syncEmptyState:function(){var e,t=this.getTriggers(),i=this.getInputMask(),n=t&&t.clear,r=this.inputElement.dom.value;this.toggleCls(this.emptyCls,!r),n&&(this.getClearable()&&(!this.hasValue()||this.getDisabled()||this.getReadOnly()||(e=!0),i&&r===i._mask&&(e=!1)),e?n.show():n.hide())}},deprecated:{6.5:{configs:{placeHolder:"placeholder",clearIcon:"clearable"},methods:{getPlaceHolder:"getPlaceholder",setPlaceHolder:"setPlaceholder"}}}},function(){Ext.os.is.Android&&window.addEventListener("resize",function(){var e,t,i=document.activeElement,n=i&&i.tagName;"INPUT"!==n&&"TEXTAREA"!==n||(t=(e=Ext.Component.from(i))&&e.element&&e.element.dom)&&(t.scrollIntoViewIfNeeded?t.scrollIntoViewIfNeeded():t.scrollIntoView())})}),Ext.define("Ext.theme.material.field.Text",{override:"Ext.field.Text",config:{labelAlign:"placeholder",animateUnderline:!0}}),Ext.define("Ext.Editor",{extend:Ext.Container,xtype:"editor",isEditor:!0,config:{field:{xtype:"textfield"}},floated:!0,allowBlur:!0,revertInvalid:!0,hideEl:!0,value:"",alignment:"c-c?",offset:[0,0],shadow:"frame",constrain:!1,swallowKeys:!0,completeOnEnter:!0,cancelOnEsc:!0,cancelOnClear:!1,updateEl:!1,focusOnToFront:!1,baseCls:Ext.baseCSSPrefix+"editor",editing:!1,preventDefaultAlign:!0,useBoundValue:!0,specialKeyDelay:1,matchFont:!1,getLocation:Ext.emptyFn,beforeEdit:function(e,t){return this.fireEvent("beforestartedit",this,e,t,this.getLocation())},applyField:function(e){return Ext.widget(e)},updateField:function(e,t){var i;t&&(this.remove(t,!0),t.un({specialkey:"onSpecialKey",clearicontap:"onFieldClear",scope:this}),this._fieldSwallower=Ext.destroy(this._fieldSwallower)),e&&(i=e.inputElement,this.add(e),e.on({specialkey:"onSpecialKey",clearicontap:"onFieldClear",scope:this}),this.swallowKeys&&(this._fieldSwallower=i.swallowEvent(["keypress","keydown"])))},onAdded:function(e){this.ownerCmp=e,this.callParent(arguments)},onSpecialKey:function(e,t){var i=this,n=t.getKey(),r=i.completeOnEnter&&n===t.ENTER,s=i.cancelOnEsc&&n===t.ESC,o=i.specialKeyTask;t.fromBoundList||!r&&!s||(t.stopEvent(),o||(i.specialKeyTask=o=new Ext.util.DelayedTask),o.delay(i.specialKeyDelay,r?i.completeEdit:i.cancelEdit,i),0===i.specialKeyDelay&&(o.cancel(),r?i.completeEdit():i.cancelEdit())),i.fireEvent("specialkey",i,e,t)},startEdit:function(e,t,i){var n,r,s=this,o=s.getField();!s.allowBlur&&s.editing&&s.toggleBoundEl(!0),s.completeEdit(!0),s.boundEl=e=Ext.get(e),n=s.boundEl.dom,s.useBoundValue&&!Ext.isDefined(t)&&(t=Ext.String.trim(n.textContent||n.innerText||n.innerHTML)),!1!==s.beforeEdit(e,t)&&(s.context&&(t=s.context.value),s.matchFont&&(r=(r=e.getStyle("font"))||e.getStyle("fontWeight")+" "+e.getStyle("fontSize")+"/"+e.getStyle("lineHeight")+" "+e.getStyle("fontFamily"),o.inputElement.setStyle("font",r)),s.startValue=t,s.show(),s.getFloated()||s.setTop(0),s.realign(),o.suspendEvents(),o.setValue(t),o.resetOriginalValue(),o.resumeEvents(),!1!==i&&o.focus(!!o.selectOnFocus||[Number.MAX_VALUE]),s.toggleBoundEl(!1),s.editing=!0)},realign:function(){this.setConstrainAlign(Ext.getBody().getConstrainRegion()),this.alignTo(this.boundEl,this.alignment,{offset:this.offset})},completeEdit:function(e,t){var i,n=this,r=n.getField(),s=n.startValue,o=n.context&&n.context.cancel;n.editing&&(i=n.getValue(),r.isValid()&&r.validate()?!n.ignoreNoChange||r.didValueChange(i,s)?!1!==n.fireEvent("beforecomplete",n,i,s,n.getLocation())&&(i=n.getValue(),n.updateEl&&n.boundEl&&n.boundEl.setHtml(i),n.onEditComplete(e,o,t),n.fireEvent("complete",n,i,s,n.getLocation())):n.onEditComplete(e,!1,t):!1!==n.revertInvalid&&n.cancelEdit(e,t))},afterShow:function(){this.callParent(),this.fireEvent("startedit",this,this.boundEl,this.startValue,this.getLocation())},onFieldClear:function(){this.cancelOnClear&&this.cancelEdit()},cancelEdit:function(e,t){var i,n=this,r=n.startValue,s=n.getField();n.editing&&(s&&(i=n.editedValue=n.getValue(),s.suspendEvents(),n.setValue(r),s.resumeEvents()),n.onEditComplete(e,!0,t),n.fireEvent("canceledit",n,i,r),delete n.editedValue)},onEditComplete:function(e){var t=this.getField();this.editing=!1,e||(this.hide(),this.toggleBoundEl(!0)),t.inputElement.setStyle("font",null)},onFocusLeave:function(e){!0===this.allowBlur&&this.editing&&this.completeEdit(),this.callParent([e])},updateHidden:function(e,t){var i;e&&!this.destroying&&(i=this.getField(),this.editing?this.completeEdit():i.collapse&&i.collapse()),this.callParent([e,t])},getValue:function(){return this.getField().getValue()},setValue:function(e){this.getField().setValue(e)},toggleBoundEl:function(e){this.hideEl&&(this.boundEl.setVisibilityMode(Ext.Element.VISIBILITY),this.boundEl.setVisible(e))},doDestroy:function(){var e=this.specialKeyTask;e&&e.cancel(),this.callParent()}}),Ext.define("Ext.Img",{extend:Ext.Component,xtype:["image","img"],alternateClassName:"Ext.Image",config:{src:null,imageCls:Ext.baseCSSPrefix+"img-image",backgroundCls:Ext.baseCSSPrefix+"img-background",mode:"background"},baseCls:Ext.baseCSSPrefix+"img",beforeInitialize:function(){this.onLoad=this.onLoad.bind(this),this.onError=this.onError.bind(this)},initialize:function(){this.callParent(),this.relayEvents(this.renderElement,"*"),this.element.on({tap:"onTap",scope:this})},hide:function(){this.callParent(arguments),this.hiddenSrc=this.hiddenSrc||this.getSrc(),this.isDestroying||this.setSrc(null)},afterShow:function(){this.callParent(),this.hiddenSrc&&(this.setSrc(this.hiddenSrc),delete this.hiddenSrc)},updateMode:function(e){var t=this,i=t.getImageCls(),n=t.getBackgroundCls();"background"===e?(t.imageElement&&(t.imageElement.destroy(),delete t.imageElement,t.updateSrc(t.getSrc())),t.replaceCls(i,n)):(t.imageElement=t.element.createChild({tag:"img"}),t.replaceCls(n,i))},updateImageCls:function(e,t){this.replaceCls(t,e)},updateBackgroundCls:function(e,t){this.replaceCls(t,e)},onTap:function(e){this.fireEvent("tap",this,e)},applySrc:function(e){return e&&Ext.resolveResource(e)},updateSrc:function(e){var t;t="background"===this.getMode()?this.imageObject||new Image:this.imageElement.dom,(this.imageObject=t).setAttribute("src",Ext.isString(e)?e:""),t.addEventListener("load",this.onLoad,!1),t.addEventListener("error",this.onError,!1)},detachListeners:function(){var e=this.imageObject;e&&(e.removeEventListener("load",this.onLoad,!1),e.removeEventListener("error",this.onError,!1))},onLoad:function(e){this.detachListeners(),"background"===this.getMode()&&(this.element.dom.style.backgroundImage='url("'+this.imageObject.src+'")'),this.fireEvent("load",this,e)},onError:function(e){this.detachListeners(),"background"===this.getMode()&&(this.element.dom.style.backgroundImage='url("'+this.imageObject.src+'")'),this.fireEvent("error",this,e)},updateWidth:function(e){("background"===this.getMode()?this.element:this.imageElement).setWidth(e),this.callParent(arguments)},updateHeight:function(e){("background"===this.getMode()?this.element:this.imageElement).setHeight(e),this.callParent(arguments)},doDestroy:function(){this.detachListeners(),this.imageObject=this.imageElement=Ext.destroy(this.imageObject,this.imageElement),this.callParent()}}),Ext.define("Ext.LoadMask",{extend:Ext.Mask,xtype:"loadmask",config:{message:"Loading...",cls:Ext.baseCSSPrefix+"loading-mask",messageCls:Ext.baseCSSPrefix+"mask-message",indicator:!0},getTemplate:function(){var e=Ext.baseCSSPrefix;return[{reference:"innerElement",cls:e+"mask-inner",children:[{reference:"indicatorElement",cls:e+"loading-spinner-outer",children:[{cls:e+"loading-spinner",children:[{tag:"span",cls:e+"loading-top"},{tag:"span",cls:e+"loading-right"},{tag:"span",cls:e+"loading-bottom"},{tag:"span",cls:e+"loading-left"}]}]},{reference:"messageElement"}]}]},updateMessage:function(e){var t=Ext.baseCSSPrefix+"has-message";e?this.addCls(t):this.removeCls(t),this.messageElement.setHtml(e)},updateMessageCls:function(e,t){this.messageElement.replaceCls(t,e)},updateIndicator:function(e){this[e?"removeCls":"addCls"](Ext.baseCSSPrefix+"indicator-hidden")}}),Ext.define("Ext.field.TextArea",{extend:Ext.field.Text,xtype:"textareafield",alternateClassName:"Ext.form.TextArea",config:{autoCapitalize:!1,maxRows:null,clearable:!1},tag:"textarea",classCls:Ext.baseCSSPrefix+"textareafield",applyMaxRows:function(e){if(null!==e&&"number"!=typeof e)throw new Error("Ext.field.TextArea: [applyMaxRows] trying to pass a value which is not a number");return e},updateMaxRows:function(e){this.setInputAttribute("rows",e)},doKeyUp:function(e){this.syncEmptyState()}}),Ext.define("Ext.SegmentedButton",{extend:Ext.Container,xtype:"segmentedbutton",alternateClassName:"Ext.button.Segmented",isSegmentedButton:!0,classCls:Ext.baseCSSPrefix+"segmentedbutton",config:{allowMultiple:!1,allowDepress:!1,allowToggle:!0,forceSelection:!1,pressedButtons:null,defaultType:"button",defaultUI:"segmented",value:void 0,vertical:!1},defaults:{flex:"1 1 auto"},autoSize:null,layout:{type:"box",vertical:!1,align:"stretch"},defaultBindProperty:"value",twoWayBindable:"value",publishes:"value",constructor:function(e){this.valueMap={},this.callParent([e])},initialize:function(){this.callParent(),this.onAfter({delegate:"> button",scope:this,hide:"onButtonHiddenChange",show:"onButtonHiddenChange"})},applyPressedButtons:function(e){var t,i,n,r=e;if(e=[],r)for(t=(r=Ext.Array.from(r))&&r.length,i=0;i<t;++i)(n=this.getComponent(r[i]))&&e.push(n);return e},updatePressedButtons:function(e){this.setValue(e)},getPressedButtons:function(){var e,t,i=this.getItems().items,n=i.length,r=[];for(e=0;e<n;++e)(t=i[e]).getPressed()&&r.push(t);return r},applyValue:function(e,t){var i,n,r,s,o,a=this,l=a.getItems(),c=a.getAllowMultiple();if(a.isConfiguring)if(null==e){for(i=[],r=l.length,n=0;n<r;n++)(s=l.getAt(n)).isPressed()&&(o=a.getButtonValue(s),Ext.Array.contains(i,o)||i.push(o));e=i}else for(r=(i=e=Ext.Array.from(e)).length,n=0;n<r;n++)(s=a.lookupButtonByValue(i[n]))||Ext.raise('Invalid value "'+e+'" for segmented button: "'+a.id+'"');else for(r=(i=e=Ext.Array.from(e)).length,n=0;n<r;n++)(s=a.lookupButtonByValue(i[n]))||Ext.raise('Invalid value "'+e+'" for segmented button: "'+a.id+'"');return 1<e.length&&!c&&Ext.raise("Cannot set multiple values when allowMultiple is false"),e=c?a.sortValues(e):e[0],(c?!e.length:null==e)&&a.getForceSelection()&&(e=a.getButtonValue(l.getAt(0)),c&&(e=[e])),Ext.isDefined(e)?e:null},updateValue:function(e,t){var i,n,r,s=this,o=[],a=Ext.Array.from(e),l=Ext.Array.from(t);if(s.settingValue=!0,l.length)for(r=l.length,n=0;n<r;n++)i=s.lookupButtonByValue(l[n]),Ext.Array.contains(a,l[n])||(i.setPressed(!1),o.push(i));if(a.length)for(r=a.length,n=0;n<r;n++)i=s.lookupButtonByValue(a[n]),Ext.Array.contains(l,a[n])||(i.setPressed(!0),o.push(i));if(!s.isConfiguring){if(s.hasListeners.toggle)for(r=o.length,s.sortToggleItems(o),n=0;n<r;n++)i=o[n],s.fireEvent("toggle",s,i,i.getPressed());s.hasListeners.change&&(o=s.getAllowMultiple()?!Ext.Array.equals(e,t):e!==t)&&s.fireEvent("change",s,e,t)}s.settingValue=!1},updateAllowMultiple:function(e){this.initialized||this.getInitialConfig().hasOwnProperty("allowDepress")||!e||this.setAllowDepress(!0)},updateVertical:function(e){var t=Ext.baseCSSPrefix+"vertical",i=Ext.baseCSSPrefix+"horizontal";this.replaceCls(e?i:t,e?t:i),this.getLayout().setVertical(e)},onItemAdd:function(e,t){var i=this,n=i.getDefaultUI(),r=e.getValue();i.getAllowMultiple(),n&&null==e.getUi()&&e.setUi(n),null!==r&&(i.valueMap[r]=e,i.useValueMap=!0),e.$segmentedListeners=e.on({scope:i,beforepressedchange:"onBeforePressedChange",pressedchange:"onPressedChange",order:"before",destroyable:!0}),i.callParent([e,t]),i.updateFirstAndLastCls(i.getItems()),e.$enableToggle=e.getEnableToggle(),e.$allowDepress=e.getAllowDepress(),e.setEnableToggle(i.getAllowToggle()),e.setAllowDepress(i.getAllowDepress())},onItemRemove:function(e,t,i){var n,r,s,o=e.getValue(),a=this.useValueMap,l=e.$segmentedListeners;if(this.callParent([e,t,i]),!this.destroying){if(l&&l.destroy(),this.updateFirstAndLastCls(this.getItems()),a?delete this.valueMap[o]:o=t,e.getPressed()){if(n=this.getValue(),this.getAllowMultiple()){if(t=n.indexOf(o),r=n.slice(),!a)for(s=r.length-1;t<s;--s)--r[s];r.splice(t,1)}else r=null;this.setValue(r)}e.setEnableToggle(e.$enableToggle),e.setAllowDepress(e.$allowDepress)}e.$segmentedListeners=null},isPressed:function(e){return e.getPressed()},updateDisabled:function(t,e){this.items.each(function(e){e.setDisabled(t)},this),this.callParent([t,e])},updateDefaultUI:function(e){var t,i,n=this.items&&this.items.items,r=n.length;for(t=0;t<r;t++)null==(i=n[t]).getUi()&&i.setUi(e)},doDestroy:function(){this.valueMap=null,this.callParent()},privates:{getAllPressed:function(e){var t,i,n,r={},s=this.pressingItem;for(t=(e=e.items).length,i=0;i<t;++i)((n=e[i])===s?!n.getPressed():n.getPressed())&&(r[n.id]=n);return r},lookupButtonByValue:function(e){return this.useValueMap?this.valueMap[e]:this.getItems().getAt(e)},getButtonValue:function(e){var t;return this.useValueMap&&(t=e.getValue()),null==t&&(t=this.getItems().indexOf(e)),t},onBeforePressedChange:function(e,t){var i,n=this.getValue();return this.getForceSelection()&&!t&&(this.getAllowMultiple()?i=1===n.length:n===this.getButtonValue(e)&&(i=!1)),i},onPressedChange:function(e,t){var i,n,r,s,o;this.settingValue||(i=Ext.Array,n=this.getAllowMultiple(),r=this.getButtonValue(e),s=this.getValue(),n&&(o=i.indexOf(s,r)),t?n?-1===o&&(s=i.slice(s)).push(r):s=r:n?-1<o&&(s=i.slice(s)).splice(o,1):s===r&&(s=null),this.pressingItem=e,this.setValue(s),this.pressingItem=null)},onButtonHiddenChange:function(){this.updateFirstAndLastCls(this.getItems())},sortToggleItems:function(e){var n=this.getItems();Ext.Array.sort(e,function(e,t){var i=(e.getPressed()?1:0)-(t.getPressed()?1:0);return 0===i&&(i=n.indexOf(e)-n.indexOf(t)),i})},sortValues:function(e){var t=Ext.Array.numericSortFn,i=this.valueMap,n=this.getItems();return e=Ext.Array.clone(e),this.useValueMap&&(t=function(e,t){return(e=n.indexOf(i[e]))-(t=n.indexOf(i[t]))}),Ext.Array.sort(e,t),e},updateFirstAndLastCls:function(e){var t,i,n=e.length,r=Ext.baseCSSPrefix,s=r+"first",o=r+"last";for(i=0;i<n;i++)(t=e.items[i]).removeCls(s),t.removeCls(o);for(i=0;i<n;i++)if(!(t=e.items[i]).isHidden()){t.addCls(s);break}for(i=n-1;0<=i;i--)if(!(t=e.items[i]).isHidden()){t.addCls(o);break}}}}),Ext.define("Ext.TitleBar",{extend:Ext.Container,xtype:"titlebar",defaultBindProperty:"title",isToolbar:!0,classCls:Ext.baseCSSPrefix+"titlebar",inheritUi:!0,config:{cls:Ext.baseCSSPrefix+"navigation-bar",title:null,titleAlign:"center",defaultType:"button",defaultButtonUI:null,minHeight:null,layout:{type:"hbox",align:"center"},items:[],maxButtonWidth:"40%"},autoSize:null,border:!1,beforeInitialize:function(){this.applyItems=this.applyInitialItems},initialize:function(){this.callParent(),delete this.applyItems,this.add(this.initialItems),delete this.initialItems,this.on({scope:this,painted:"refreshTitlePosition",single:!0})},applyInitialItems:function(e){var t=this,i=t.getTitleAlign(),n=t.getDefaults()||{};switch(t.initialItems=e,t.leftBox=t.add({xtype:"container",style:"position: relative",cls:Ext.baseCSSPrefix+"titlebar-left",autoSize:null,layout:{type:"hbox",align:"center"},listeners:{resize:"refreshTitlePosition",scope:t}}),t.spacer=t.add({xtype:"component",style:"position: relative",cls:Ext.baseCSSPrefix+"titlebar-center",flex:1,listeners:{resize:"refreshTitlePosition",scope:t}}),t.rightBox=t.add({xtype:"container",style:"position: relative",cls:Ext.baseCSSPrefix+"titlebar-right",autoSize:null,layout:{type:"hbox",align:"center"},listeners:{resize:"refreshTitlePosition",scope:t}}),i){case"left":t.titleComponent=t.leftBox.add({xtype:"title",cls:Ext.baseCSSPrefix+"title-align-left",hidden:n.hidden}),t.refreshTitlePosition=Ext.emptyFn;break;case"right":t.titleComponent=t.rightBox.add({xtype:"title",cls:Ext.baseCSSPrefix+"title-align-right",hidden:n.hidden}),t.refreshTitlePosition=Ext.emptyFn;break;default:t.titleComponent=t.add({xtype:"title",hidden:n.hidden,centered:!0})}t.doAdd=t.doBoxAdd,t.remove=t.doBoxRemove,t.doInsert=t.doBoxInsert},doBoxAdd:function(e){var t=this.getTitleAlign();this.addDefaultButtonUI(e),"right"===e.config.align?this.rightBox.add(e):this.titleComponent&&"left"===t?this.leftBox.insertBefore(e,this.titleComponent):this.leftBox.add(e)},doBoxRemove:function(e,t){"right"===e.config.align?this.rightBox.remove(e,t):this.leftBox.remove(e,t)},doBoxInsert:function(e,t){this.addDefaultButtonUI(t),"right"===t.config.align?this.rightBox.insert(e,t):this.leftBox.insert(e,t)},addDefaultButtonUI:function(e){var t=this.getDefaultButtonUI();t&&(e.isSegmentedButton?null==e.getDefaultUI()&&e.setDefaultUI(t):e.isButton&&null==e.getUi()&&e.setUi(t))},calculateMaxButtonWidth:function(){var e=this.getMaxButtonWidth();return Ext.isString(e)&&(e=parseInt(e.replace("%",""),10)),e=Math.round(this.element.getWidth()/100*e)},refreshTitlePosition:function(){var e,t,i,n,r,s,o,a,l,c,u,d,h,f;this.destroyed||((e=this.titleComponent.renderElement).setWidth(null),e.setLeft(null),i=(t=this.leftBox).down("button"),n=1===t.getItems().getCount(),i&&n&&(null==i.getWidth()&&i.renderElement.setWidth("auto"),r=t.renderElement.getWidth(),(s=this.calculateMaxButtonWidth())<r&&i.renderElement.setWidth(s)),o=this.spacer.renderElement.getBox(),Ext.browser.is.IE&&e.setWidth(o.width),l=(a=e.getBox()).width-o.width,c=a.left,u=a.right,0<l&&(c+=d=l/2,u-=d,e.setWidth(o.width)),h=o.left-c,f=u-o.right,0<h?e.setLeft(h):0<f&&e.setLeft(-f),e.repaint())},updateTitle:function(e){this.getItems(),this.titleComponent.setTitle(e),this.isPainted()&&this.refreshTitlePosition()}}),Ext.define("Ext.theme.neptune.Titlebar",{override:"Ext.TitleBar",config:{defaultButtonUI:"alt"}}),Ext.define("Ext.theme.material.TitleBar",{override:"Ext.TitleBar",config:{titleAlign:"left",defaultButtonUI:"alt"}}),Ext.define("Ext.theme.material.Toast",{override:"Ext.Toast",config:{alignment:"b-b"}}),Ext.define("Ext.dataview.Location",{isDataViewLocation:!0,isLocation:!0,child:null,event:null,item:null,record:null,recordIndex:-1,sourceElement:null,view:null,viewIndex:-1,constructor:function(e,t){this.view=e,null!=t&&this.attach(t)},attach:function(e){var t,i,n,r=this,s=r.view,o=s.store;r.source&&Ext.raise("DataView Locations cannot be modified"),e.isEvent&&(n=(r.event=e).target),!e.isElement&&1!==e.nodeType||(n=e),(r.source=e).isWidget&&(n=e.getFocusEl(),e=e.element),"number"==typeof e?(i=s.itemFromRecord(e),r.recordIndex=e,t=o&&o.getAt(e)):(t=e.isModel?e:s.mapToRecord(e),i=s.mapToItem(e),r.recordIndex=o?o.indexOf(t):-1),i&&!n&&(n=i.isWidget?i.getFocusEl():i),r.child=i,(r.record=t)&&i&&(r.item=i),i&&(r.viewIndex=s.mapToViewIndex(i)),r.sourceElement=Ext.getDom(n)},clone:function(){var e=new this.self(this.view);return e.event=this.event,e.sourceElement=this.sourceElement,e.item=this.item,e.record=this.record,e.recordIndex=this.recordIndex,e.viewIndex=this.viewIndex,e},equals:function(e){return e&&e.view===this.view&&e.isDataViewLocation&&e.sourceElement===this.sourceElement},getFocusEl:function(e){var t=this.get(),i=null;return t&&t.isWidget&&(t=t.element),t&&(i="dom"===e||!0===e?Ext.getDom(t):Ext.get(t)),i},get:function(){return this.child},isFirstDataItem:function(){return 0===this.recordIndex},isFirstViewItem:function(){var e=this.view;return e.infinite?e.previous(null==this.child):0===this.viewIndex},isLastDataItem:function(){return this.recordIndex===this.view.store.getCount()-1},isLastViewItem:function(){var e=this.view;return e.infinite?e.next(null==this.child):this.viewIndex===e.innerItems.length-1},refresh:function(){var e=this.view,t=this.child,i=e.mapToItem(this.record)||(e.items.contains(t)?t:e.mapToItem(Math.min(this.viewIndex,e.dataItems.length-1)));return new this.self(e,i)},isFirst:function(){return this.view.isFirstItem(this.child)},isLast:function(){return this.view.isLastItem(this.child)},next:function(e){for(var t=this.nextItem(e),i=t&&t.get();t&&(!i||!i.el.isFocusable());){if(t.equals(this))return this;i=(t=t.nextItem(e))&&t.get()}return t||this},previous:function(e){for(var t=this.previousItem(e),i=t&&t.get();t&&(!i||!i.el.isFocusable());){if(t.equals(this))return this;i=(t=t.previousItem(e))&&t.get()}return t||this},nextItem:function(e){var t,i=this.view,n=this.child,r="boolean"==typeof e?e:!(!e||!e.wrap);if(i.isLastItem(n)){if(!r)return null;t=i.getFirstItem()}else t=i.nextItem(n);return new this.self(i,t)},previousItem:function(e){var t,i=this.view,n=this.child,r="boolean"==typeof e?e:!(!e||!e.wrap);if(i.isFirstItem(n)){if(!r)return null;t=i.getLastItem()}else t=i.previousItem(n);return new this.self(i,t)},privates:{as:function(e,t){if(e){if(e.isWidget){if("cmp"===t)return e;e=e.el}"dom"===t?e=e.dom||e:"el"===t?e.dom||(e=Ext.get(e)):Ext.raise('Expected "as" to be "dom" or "el"')}return e||null}}}),Ext.define("Ext.dataview.NavigationModel",{extend:Ext.Evented,alias:"navmodel.dataview",mixins:[Ext.mixin.Factoryable,Ext.mixin.Bufferable],factoryConfig:{type:"navmodel",defaultType:"dataview",instanceProp:"isNavigationModel"},isNavigationModel:!0,config:{view:null,disabled:!1},bufferableMethods:{handleChildTrigger:1},locationClass:"Ext.dataview.Location",setLocation:function(e,t){var i,n,r,s,o,a,l=this,c=l.getView(),u=l.location,d=t&&t.animation;if(null==e)return l.clearLocation();if(e.isDataViewLocation||(e=this.createLocation(e)),a=e.view,!e.equals(u)){if(r=e.record,n=e.child,r&&!n)return a.ensureVisible(r,{animation:d}).then(function(){l.destroyed||a.getNavigationModel().setLocation({record:r,column:e.column},t)});n&&null==l.floatingItems&&(s=(n=n.isComponent?n.el:Ext.fly(n)).up(),o=n.getStyleValue("float"),l.floatingItems=c.getInline&&c.getInline()||n.isStyle("display","inline-block")||"left"===o||"right"===o||s.isStyle("display","flex")&&s.isStyle("flex-direction","row")),(i=a.getScrollable())&&i.ensureVisible(e.sourceElement,{animation:t&&t.animation}),l.handleLocationChange(e,t),l.destroyed||l.doFocus()}},clearLocation:function(){var e;this.location&&(this.lastLocation=this.location,(e=this.location.getFocusEl())&&!e.destroyed?(Ext.fly(e).removeCls(this.focusedCls),this.previousLocation=this.location):this.previousLocation=null,this.location=null)},getLocation:function(){return this.location},getPreviousLocation:function(){var e=this.previousLocation;return!e||e.sourceElement&&e.sourceElement.destroyed||e.refresh(),e},disable:function(){this.setDisabled(!0)},enable:function(){this.setDisabled(!1)},privates:{createLocation:function(e,t){return Ext.create(this.locationClass,this.getView(),e,t)},getKeyNavCfg:function(e){var t=this;return{target:e.getFocusEl(),processEvent:t.processViewEvent,processEventScope:t,eventName:"keydown",defaultEventAction:"stopEvent",esc:t.onKeyEsc,f2:t.onKeyF2,up:t.onKeyUp,down:t.onKeyDown,right:t.onKeyRight,left:t.onKeyLeft,pageDown:t.onKeyPageDown,pageUp:t.onKeyPageUp,home:t.onKeyHome,end:t.onKeyEnd,space:t.onKeySpace,enter:t.onKeyEnter,tab:t.onKeyTab,A:{ctrl:!0,handler:t.onSelectAllKeyPress},scope:t}},updateView:function(e){var t=this.getKeyNavCfg(e);this.focusedCls=e.focusedCls,t&&(this.keyNav=new Ext.util.KeyNav(t)),this.viewListeners=e.on(this.getViewListeners(e))},getViewListeners:function(e){var t={scope:this};return t[e.getTriggerEvent()]="onChildTrigger",t},processViewEvent:function(e){var t,i=this.getLocation();if(i&&e.keyCode&&(t=Ext.fly(e.target).component,e.navigationMode=t&&t.parent===this.getView(),e.setCurrentTarget(i.sourceElement),!Ext.fly(e.target).isInputField()))return e},doFocus:function(e){(e=e||this.location)&&e.getFocusEl()&&e.getFocusEl().focus()},onFocusMove:function(e){var t=this.createLocation(e);t.equals(this.location)||this.handleLocationChange(t,{event:e,navigate:!1})},handleLocationChange:function(e,t){var i,n,r=this.location,s=this.getView();(this.previousLocation=r)&&(i=(this.lastLocation=r).getFocusEl())&&!i.destroyed&&Ext.fly(i).removeCls(this.focusedCls),(i=(this.location=e)&&e.getFocusEl("dom"))&&(n=e.get())&&((n=n.isWidget?n.el:Ext.get(n))&&i===n.dom&&n.addCls(this.focusedCls),t&&(t.event||t.select)&&!1!==t.navigate&&this.onNavigate(t.event)),s.destroyed||s.fireEvent("navigate",s,e,r)},onKeyUp:function(e){e.preventDefault(),this.location?this.floatingItems?this.moveUp(e):this.movePrevious({event:e}):this.setLocation(0)},onKeyDown:function(e){e.preventDefault(),this.location?this.floatingItems?this.moveDown(e):this.moveNext({event:e}):this.setLocation(0)},onKeyLeft:function(e){e.preventDefault(),this.movePrevious({event:e})},onKeyRight:function(e){e.preventDefault(),this.moveNext({event:e})},onKeyF2:function(e){return!1},onKeyEsc:function(e){return!1},onKeyTab:function(e){return!this.location.actionable},onKeyPageDown:function(e){var t,i,n;e.preventDefault(),this.location.actionable||this.floatingItems||(n=((i=this.getView()).infinite?i.getItemTop(this.location.child):this.location.child.el.dom.offsetTop)+i.el.getClientRegion().height,(t=this.createLocation(i.getItemFromPoint(0,n))).child&&t.child.el.isFocusable()||(t=t.previous()),this.setLocation(t,{event:e}))},onKeyPageUp:function(e){var t,i,n;e.preventDefault(),this.location.actionable||this.floatingItems||(n=((i=this.getView()).infinite?i.getItemTop(this.location.child):this.location.child.el.dom.offsetTop)-i.el.getClientRegion().height,(t=this.createLocation(i.getItemFromPoint(0,n))).child&&t.child.el.isFocusable()||(t=t.next()),this.setLocation(t,{event:e}))},onKeyHome:function(e){this.setLocation(0,{event:e})},onKeyEnd:function(e){this.setLocation(this.getView().getStore().last(),{event:e})},onKeySpace:function(e){this.onNavigate(e)},onKeyEnter:function(e){e.stopEvent(),this.getView()._onChildTap(e)},onSelectAllKeyPress:function(e){var t=this.getView(),i=t.getSelectable();if(i&&t.getStore().getCount())return i[i.allSelected?"deselectAll":"selectAll"](),e.preventDefault(),!1},moveUp:function(e){var t,i=this.getView(),n=this.location,r=this.location.sourceElement,s=Ext.fly(r).getAnchorXY("t");s[1]-=Ext.fly(r).getMargin("tb")+10,(t=i.getItemFromPagePoint(s[0],s[1],!0))&&t.isFocusable()||(t=n.isFirst()?i.getLastItem():i.getFirstItem()),t&&this.setLocation(t,{event:e})},moveDown:function(e){var t,i=this.getView(),n=this.location,r=n.sourceElement,s=Ext.fly(r).getAnchorXY("b");s[1]+=Ext.fly(r).getMargin("tb")+10,(t=i.getItemFromPagePoint(s[0],s[1]))&&t.isFocusable()||(t=n.isLast()?i.getFirstItem():i.getLastItem()),t&&this.setLocation(t,{event:e})},moveNext:function(e){var t=this.getLocation();(t=t&&t.next(e))&&this.setLocation(t,e)},movePrevious:function(e){var t=this.getLocation();(t=t&&t.previous(e))&&this.setLocation(t,e)},onChildTrigger:function(e,t){var i=t.event;i.type===("touch"===i.pointerType?"tap":"touchstart")?this.handleChildTrigger(e,t):this.doHandleChildTrigger(e,t)},doHandleChildTrigger:function(e,t){var i=this.location,n=t.event,r=t.isGridLocation?"equalCell":"equals";i&&i[r](t)?this.onNavigate(n):this.setLocation(t,{event:n})},onNavigate:function(e){var t=this.location;e=e||new Ext.event.Event({target:t.sourceElement}),Ext.apply(e,{navigationModel:this,from:this.previousLocation,to:t}),this.getView().onNavigate(e)},updateDisabled:function(e){this.keyNav&&(e?this.keyNav.disable():this.keyNav.enable())}}}),Ext.define("Ext.dataview.selection.Selection",{mixins:[Ext.mixin.Factoryable],factoryConfig:{type:"selection",defaultType:"records",instanceProp:"isSelection"},isSelection:!0,config:{selectionModel:null},constructor:function(e){e.isDataView&&(e={selectionModel:e.getSelectionModel()}),this.initConfig(e),this.getSelectionModel()||Ext.raise("Selection must be configured with a SelectionModel")},destroy:function(){this.clear(),this.callParent()},privates:{applySelectionModel:function(e){var t=e.getView();return this.view=t.isGrid?t.ownerGrid:t,e}}}),Ext.define("Ext.dataview.selection.Rows",{extend:Ext.dataview.selection.Selection,alias:"selection.rows",isRows:!0,config:{selected:!0},clone:function(){return new this.self({selectionModel:this.getSelectionModel(),selected:(new Ext.util.Spans).unstash(this.getSelected().stash())})},add:function(e,t,i){var n,r,s,o=this.view;for(1===e.length&&(e=e[0]),e.isEntity&&(s=e,e=o.mapToRecordIndex(e)),"number"==typeof e&&(e=[e,e+1]),2===e.length&&"number"==typeof e[0]&&"number"==typeof e[1]||Ext.raise("add must be called with a [start, end] row index *EXCLUSIVE* range"),e[0]>e[1]&&(r=e[1],e[1]=e[0],e[0]=r),this.lastSelected=e[1],t||this.clear(),this.getSelected().add(e),n=e[0];n<e[1];n++)o.onItemSelect(n);this.manageSelection(s),i||this.getSelectionModel().fireSelectionChange()},remove:function(e,t){var i,n=this.getSelectionModel(),r=this.view;if(n.getDeselectable()||1!==this.getCount()){for(1===e.length&&(e=e[0]),e.isEntity&&(e=r.mapToRecordIndex(e)),"number"==typeof e&&(e=[e,e+1]),2===!e.length&&"number"==typeof e[0]&&"number"==typeof e[1]&&Ext.raise("remove must be called with a [start, end] record *EXCLUSIVE* range"),e[0]>e[1]&&Ext.raise("Range must be [startIndex, endIndex] (exclusive end)"),this.getSelected().remove(e),i=e[0];i<e[1];i++)r.onItemDeselect(i);t||n.fireSelectionChange()}},isSelected:function(e){var t,i,n,r=this.getSelected().spans,s=r.length;for(t=e.isEntity?this.view.getStore().indexOf(e):e,n=0;n<s;n++)if(t>=(i=r[n])[0]&&t<i[1])return!0;return!1},getCount:function(){return this.getSelected().getCount()},selectAll:function(){var e,t=this.view,i=t.dataItems.length;for(e=0;e<i;e++)t.onItemSelect(e);this.getSelected().add(0,t.store.getTotalCount()||t.store.getCount()),this.getSelectionModel().fireSelectionChange()},getFirstRowIndex:function(){return this.getSelected().spans.length?this.getSelected().spans[0][0]:0},getLastRowIndex:function(){var e=this.getSelected().spans;return e.length?e[e.length-1][1]-1:0},eachRow:function(e,t){var i,n,r,s,o=this.getSelected().spans,a=o&&o.length;for(r=0;r<a;r++)for(s=(n=o[r])[0];!1!==i&&s<n[1];s++)i=e.call(this||t,s)},eachColumn:function(e,t){var i,n=this.view.getHeaderContainer().getVisibleColumns(),r=n.length;if(this.getCount())for(i=0;i<r;i++)if(!1===e.call(this||t,n[i],i))return},eachCell:function(t,i){var n,r,s,o,a,l=this,e=l.getSelected(),c=l.view,u=c.ownerGrid.getVisibleColumnManager().getColumns(),d=l.dragRange,h=!1;u&&(n=u.length,o=new Ext.grid.Location(c),e&&l.eachRow(function(e){for(o.setItem(e),r=0;r<n;r++)if(o.setColumn(u[r]),!1===t.call(i||l,o,o.columnIndex,o.recordIndex))return!(h=!0)}),h||null==d||l.view.getStore().getRange(d[0],d[1],{forRender:!1,callback:function(e){for(a=e.length,r=0;!h&&r<a;r++)for(o.setItem(e[r]),s=0;!h&&s<n;s++)o.setColumn(u[s]),!1===t.call(i||l,o,o.columnIndex,o.recordIndex)&&(h=!0)}}))},privates:{applySelected:function(e){return e.isSpans||(e=new Ext.util.Spans),e},compareRanges:function(e,t){return e[0]-t[0]},clear:function(e){var t,i=this.getSelectionModel(),n=this.view,r=n.dataItems.length,s=n.renderInfo.indexTop;for(t=0;t<r;t++)n.onItemDeselect(t+s);this.getSelected().clear(),!i.getDeselectable()&&this.lastSelected&&this.add(this.lastSelected,!0,!0),this.manageSelection(null),e||i.fireSelectionChange()},addRecordRange:function(e,t){return this.add([e,t+1],!0)},removeRecordRange:function(e,t){return this.remove([e,t+1])},isAllSelected:function(){var e=this.view.store;return this.getCount()===(e.getTotalCount()||e.getCount())},setRangeStart:function(e){null==e?this.dragRange=null:(this.dragRange=[e,e],this.view.onItemSelect(e,!0))},setRangeEnd:function(e){var t,i,n=this.dragRange||(this.dragRange=[0,e]),r=n[1],s=n[0],o=this.view,a=o.renderInfo,l=n[1]=e,c=[],u=!1;for(e<s&&(e=s,s=l),t=Math.max(Math.min(n[0],s,r,e),a.indexTop),i=Math.min(Math.max(n[1],s,r,e),a.indexBottom-1);t<=i;t++)t<s||e<t?(o.onItemDeselect(t),c[c.length?1:0]=t):(o.onItemSelect(t,!0),u=!0);u&&this.addRange(!0),c.length&&this.removeRecordRange(c[0],c[1]),this.lastSelectedIndex=e},addRange:function(e){var t=this.dragRange;t&&(this.addRecordRange(t[0],t[1]),e||(this.dragRange=null))},extendRange:function(e){this.addRecordRange(e.start,e.end)},reduceRange:function(e){this.removeRecordRange(e.start,e.end)},getRange:function(){var e=this.dragRange;return null==e?[0,-1]:e[0]<=e[1]?e:[e[1],e[0]]},getRangeSize:function(){var e=this.getRange();return e[1]-e[0]+1},onSelectionFinish:function(){var e=this.getContiguousSelection();e?this.getSelectionModel().onSelectionFinish(this,new Ext.grid.Location(this.view,{record:e[0],column:0}),new Ext.grid.Location(this.view,{record:e[1],column:this.view.getHeaderContainer().getVisibleColumns().length-1})):this.getSelectionModel().onSelectionFinish(this)},getContiguousSelection:function(){var e=this.getSelected(),t=this.view.store,i=e.spans;if(1===i&&t.getAt(i[0][0])&&t.getAt(i[0][1]))return e.spans[0]},manageSelection:function(e){var t,i=this.view.getStore(),n=this.getSelectionModel();i.isVirtualStore&&"single"===n.getMode()&&((t=n.getSelected()).length&&this.adjustPageLock(i,t.getAt(0),-1),e?(t.splice.apply(t,[0,0,e]),this.adjustPageLock(i,e,1)):t.remove(t.getAt(0)))},adjustPageLock:function(e,t,i){var n;e.isVirtualStore&&t&&(n=e.pageMap.getPageOf(e.indexOf(t)))&&n.adjustLock("active",i)}}}),Ext.define("Ext.dataview.selection.Records",{extend:Ext.dataview.selection.Rows,alias:"selection.records",isRecords:!0,config:{selected:null},constructor:function(e){this.callParent([e]);var t=this.getSelected();t&&t.isCollection||Ext.raise("Ext.dataview.selection.Records must be given a selected Collection")},clone:function(){return new this.self({selectionModel:this.getSelectionModel(),selected:this.getSelected()})},addRowRange:function(e,t,i,n){if("number"==typeof e&&"number"==typeof t||Ext.raise("addRange must be called with a [start, end] row index *EXCLUSIVE* range"),t<e){var r=t;t=e,e=r}this.add(this.getSelectionModel().getStore().getRange(e,t-1),i,n)},removeRowRange:function(e,t,i){if("number"==typeof e&&"number"==typeof t||Ext.raise("addRange must be called with a [start, end] row index *EXCLUSIVE* range"),t<e){var n=t;t=e,e=n}this.remove(this.getSelectionModel().getStore().getRange(e,t-1),i)},add:function(e,t,i){for(var n=0,r=(e=Ext.Array.from(e)).length;n<r;n++)e[n].isEntity||Ext.raise("add must be called with records or an array of records");var s=this.getSelected(),o=s.getCount(),a=[t?o:0,t?0:o,e];s.suppressEvent=i,s.splice.apply(s,a),s.suppressEvent=!1},remove:function(e,t){for(var i=0,n=(e=Ext.Array.from(e)).length;i<n;i++)e[i].isEntity||Ext.raise("add must be called with records or an array of records");var r=this.getSelected();this.getSelectionModel().getDeselectable()||1!==r.getCount()||Ext.Array.remove(e,r.first()),e.length&&(r.suppressEvent=t,r.remove(e),r.suppressEvent=!1)},isSelected:function(e){return!(!e||!e.isModel)&&!!this.getSelected().byInternalId.get(e.internalId)},getRecords:function(){return this.getSelected().getRange()},selectAll:function(e){var t=this.getSelected();t.suppressEvent=e,t.add(this.getSelectionModel().getStore().getRange()),t.suppressEvent=!1},getFirstRowIndex:function(){return this.getCount()?this.view.getStore().indexOf(this.getSelected().first()):0},getLastRowIndex:function(){return this.getCount()?this.view.getStore().indexOf(this.getSelected().last()):-1},eachRow:function(e,t){var i=this.getSelected();i&&i.each(e,t||this)},eachColumn:function(e,t){var i,n=this.view.getHeaderContainer().getVisibleColumns(),r=n.length;if(this.getSelected().getCount())for(i=0;i<r;i++)if(!1===e.call(this||t,n[i],i))return},eachCell:function(t,i){var n,r,s,o,a=this,e=a.getSelected(),l=a.view,c=l.getHeaderContainer().getVisibleColumns();c&&(n=c.length,s=new Ext.grid.Location(l),e&&e.each(function(e){for(o=s.clone({record:e}),r=0;r<n;r++)if(o=o.cloneForColumn(c[r]),!1===t.call(i||a,o,o.columnIndex,o.recordIndex))return!1}))},beginUpdate:function(){this.getSelected().beginUpdate()},endUpdate:function(){this.getSelected().endUpdate()},privates:{clear:function(e){var t,i=this.getSelected();i&&(t=[0,i.getCount()],this.getSelectionModel().getDeselectable()||(t[2]=i.last()),i.suppressEvent=e,i.splice.apply(i,t),i.suppressEvent=!1)},addRecordRange:function(e,t){var i,n=this.view.getStore(),r=t;e&&e.isGridLocation&&(e=e.recordIndex),t&&t.isGridLocation&&(t=r=t.recordIndex),t<e&&(t=e,e=r),i=n.getRange(e,t||e),this.getSelected().add(i)},removeRecordRange:function(e,t){var i,n=this.view.getStore(),r=t;e&&e.isGridLocation&&(e=e.recordIndex),t&&t.isGridLocation&&(r=t=r=t.recordIndex),t<e&&(t=e,e=r),i=n.getRange(e,t||e),this.getSelected().remove(i)},onSelectionFinish:function(){var e=this.getContiguousSelection();e?this.getSelectionModel().onSelectionFinish(this,new Ext.grid.Location(this.view,{record:e[0],column:0}),new Ext.grid.Location(this.view,{record:e[1],column:this.view.getHeaderContainer().getVisibleColumns().length-1})):this.getSelectionModel().onSelectionFinish(this)},getContiguousSelection:function(){var e,t,i,n=this.view.getStore();if(t=(e=Ext.Array.sort(this.getSelected().getRange(),function(e,t){return n.indexOf(e)-n.indexOf(t)})).length){if(1===t&&-1===n.indexOf(e[0]))return!1;for(i=1;i<t;i++)if(n.indexOf(e[i])!==n.indexOf(e[i-1])+1)return!1;return[n.indexOf(e[0]),n.indexOf(e[t-1])]}},applySelected:function(e){return e||Ext.raise("Must pass the selected Collection to the Records Selection"),e},refresh:function(){var e,t=this.view,i=this.getSelectionModel(),n=this.getSelected(),r=i.getLastSelected();Ext.dataview.selection.Model.refreshCollection(n,i.getStore().getData(),i.ignoredFilters,t.beforeSelectionRefresh&&t.beforeSelectionRefresh.bind(t)),-1===(e=n.indexOf(r))?i.setLastSelected(n.last()):i.setLastSelected(n.getAt(e))}}}),Ext.define("Ext.dataview.selection.Model",{extend:Ext.Evented,alias:"selmodel.dataview",mixins:[Ext.mixin.Factoryable],factoryConfig:{type:"selmodel",defaultType:"dataview",aliasPrefix:"selmodel."},isSelectionModel:!0,config:{view:null,store:null,disabled:null,mode:"single",deselectable:!0,toggleOnClick:!0,lastSelected:null,selected:!0,selectedRecord:void 0,selection:{type:"records"}},modes:{single:!0,simple:!0,multi:!0},onNavigate:function(e){this.getDisabled()||this.selectWithEvent(e.to.record,e)},getSelectedRecords:function(){var e=this.getSelection();return e&&e.isRecords?e.getRecords():Ext.emptyArray},getStoreListeners:function(){return{add:"onSelectionStoreAdd",remove:"onSelectionStoreRemove",update:"onSelectionStoreUpdate",clear:{fn:"onSelectionStoreClear",priority:1e3},load:"onSelectionStoreLoad",refresh:"refreshSelection",idchanged:"onIdChanged"}},applySelected:function(e,t){var i=this.getStore(),n={rootProperty:"data",extraKeys:{byInternalId:{rootProperty:!1,property:"internalId"}},sorters:[function(e,t){return i.indexOf(e)-i.indexOf(t)}],autoSort:!1};return t&&(t.removeObserver(this),this.destroySelected&&(t.destroy(),this.destroySelected=!1)),e&&e.isCollection?(this.destroySelected=!1,e.setConfig(n)):(this.destroySelected=!0,e=new Ext.util.Collection(Ext.apply(n,e))),this.observerPriority=1e3,e.addObserver(this),e},updateSelected:function(e){this.setSelectedRecord(e.last()||null)},applyMode:function(e){var t=this.getView(),i=t.getRenderTarget();return e=e?e.toLowerCase():"single",i.toggleCls(t.multiSelectCls,"multi"===e),this.modes[e]?e:"single"},updateMode:function(e){var t=this.getSelection();"multi"!==e&&1<t.getCount()&&t.add(this.getLastSelected(),!1)},updateView:function(e){this.setStore(e?e.getStore():null)},applyStore:function(e){return e?Ext.data.StoreManager.lookup(e):null},updateStore:function(e,t){var i=Ext.apply({scope:this},this.getStoreListeners());t&&Ext.isObject(t)&&t.isStore&&t.un(i),e&&(e.on(i),t&&this.refreshSelection())},selectByLocation:function(e){e.isDataViewLocation||Ext.raise("selectByLocation MUST be passed an Ext.dataview.Location"),this.select(e.record)},selectAll:function(e){this.select(this.getStore().getRange(),!0,e)},deselectAll:function(e){var t=this.getSelected();t.suppressEvent=e,t.removeAll(),t.suppressEvent=!1},applySelectedRecord:function(e){return!1===e&&(e=null),e},updateSelectedRecord:function(e){var t=this.getSelected(),i=t.getCount();e?(t.last()!==e&&("single"===this.getMode()?t.splice(0,i,e):t.add(e)),this.setLastSelected(e)):!this.isConfiguring&&i&&this.deselectAll(),this.getView().publishState("selection",e)},selectWithEvent:function(e,t){var i=this.getMode(),n=this.isSelected(e);"multi"===i?this.selectWithEventMulti(e,t,n):n?(this.getDeselectable()&&"single"===i&&this.getToggleOnClick()||"simple"===i||t.ctrlKey)&&this.deselect(e):this.select(e,"simple"===i),!t.shiftKey&&this.isSelected(e)&&(this.selectionStart=e)},selectWithEventMulti:function(e,t,i){var n=t.shiftKey,r=t.ctrlKey,s=n?this.selectionStart:null;n&&s?this.selectRange(s,e,r):i?this.deselect(e):this.select(e,!0)},selectRange:function(e,t,i){var n,r=this.getStore();e="number"==typeof e?e:r.indexOf(e),(t="number"==typeof t?t:r.indexOf(t))<e&&(n=e,e=t,t=n),this.getSelection().addRowRange(e,t+1,i)},select:function(e,t,i){var n;this.getDisabled()||("number"==typeof e&&(e=[this.getStore().getAt(e)]),e&&("single"===this.getMode()&&e?(n=e.length?e[0]:e,this.doSingleSelect(n,i)):this.doMultiSelect(e,t,i)))},doSingleSelect:function(e,t){this.doMultiSelect([e],!1,t)},doMultiSelect:function(e,t,i){null===e||this.getDisabled()||this.getSelection().add(e,t,i)},deselect:function(e,t){var i,n,r,s,o;if(!this.getDisabled()){for(e=Ext.isArray(e)?e:[e],i=this.getSelection(),n=this.getStore(),r=e.length,s=0;s<r;s++)"number"==typeof(o=e[s])&&(e[s]=n.getAt(o));i.remove(e,t)}},onCollectionRemove:function(e,t){var i=this.getView(),n=t.items;this.getSelection().allSelected=this.allSelected=!1,t.next||t.replacement||this.setSelectedRecord(e.last()||null),i.onItemDeselect(n,e.suppressEvent),e.suppressEvent||this.fireSelectionChange(n,!1)},onCollectionAdd:function(e,t){var i=this.getView(),n=this.getSelection(),r=t.items;i.destroyed||(n.allSelected=this.allSelected=n.getCount()===i.getStore().getCount(),this.setSelectedRecord(e.last()||null),i.onItemSelect("single"===this.getMode()?r[0]:r,e.suppressEvent),e.suppressEvent||this.fireSelectionChange(r,!0))},fireSelectionChange:function(e,t){this.fireEvent("selectionchange",this.getView(),e,t)},getSelections:function(){if(this.getSelection().isRecords)return this.getSelected().getRange()},isRowSelected:function(e){var t=this.getSelection();return!(!t||!t.isRows&&!t.isRecords)&&(e=Ext.isNumber(e)?this.getStore().getAt(e):e,t.isSelected(e))},isSelected:function(e){return this.getSelection().isSelected(e)},hasSelection:function(){return 0<this.getSelection().getCount()},refreshSelection:function(){this.getSelection().isRecords&&this.getSelection().refresh()},onSelectionStoreRemove:function(e,t){var i=this.getSelection();i.isRecords&&i.remove(t)},onSelectionStoreClear:function(e){this.getSelection().clear()},getSelectionCount:function(){return this.getSelection().getCount()},destroy:function(){this.setView(null),Ext.destroy(this.selection,this.destroySelected?this.selected:null)},onIdChanged:function(e,t,i,n){var r=this.getSelected();r&&r.updateKey(t,i)},onSelectionStoreAdd:Ext.emptyFn,onSelectionStoreLoad:Ext.emptyFn,onSelectionStoreUpdate:Ext.emptyFn,onItemSelect:Ext.emptyFn,onItemDeselect:Ext.emptyFn,onEditorKey:Ext.emptyFn,privates:{addIgnoredFilter:function(e){e&&Ext.Array.include(this.ignoredFilters||(this.ignoredFilters=[]),e)},removeIgnoredFilter:function(e){var t=this.ignoredFilters;t&&(Ext.Array.remove(t,e),t.length||(this.ignoredFilters=null))},onSelectionFinish:Ext.privateFn,applySelection:function(e,t){if(t){if(t.type===e.type)return t.setConfig(e),t;Ext.destroy(t)}if(e){var i=this.getStore();e=Ext.Factory.selection(Ext.apply({selectionModel:this,type:i&&i.isVirtualStore?"rows":"records",selected:this.getSelected()},e))}return e}},statics:{refreshCollection:function(e,t,i,n){var r,s,o,a,l,c,u,d=t.getFilters().getFilterFn(),h=[],f=[];if(i){for(u=[],s=i.length,a=0;a<s;a++)i[a].getDisabled()||(u.push(i[a]),i[a].setDisabled(!0));u.length?t=t.getSource()||t:i=null}if(e.getCount()){for(o=(r=e.getRange()).length,a=0;a<o;a++)l=r[a],(c=t.get(t.getKey(l)))&&i&&!d(c)&&(c=null),c?c!==l&&(h.push(l),f.push(c)):h.push(l);n&&n(h,f),e.suppressEvent=!0,e.splice(e.getCount(),h,f),e.suppressEvent=!1}if(u)for(s=u.length,a=0;a<s;a++)u[a].setDisabled(!1)}}}),Ext.define("Ext.dataview.EmptyText",{extend:Ext.Component,xtype:"emptytext",classCls:Ext.baseCSSPrefix+"emptytext",inheritUi:!0,html:"No data to display",top:0,right:0,bottom:0,left:0}),Ext.define("Ext.dataview.Abstract",{extend:Ext.Container,mixins:[Ext.mixin.ConfigProxy,Ext.mixin.ItemRippler],isDataView:!0,cachedConfig:{associatedData:null,deferEmptyText:!0,deselectOnContainerClick:!0,disableSelection:!1,emptyTextDefaults:{xtype:"emptytext"},emptyItemText:"",itemsFocusable:!0,itemTpl:"<div>{text:htmlEncode}</div>",loadingText:"Loading...",pressedDelay:100,scrollToTopOnRefresh:!0,storeEventListeners:{add:"onStoreAdd",beforeload:"onStoreBeforeLoad",clear:"onStoreClear",load:"onStoreLoad",refresh:"onStoreRefresh",remove:"onStoreRemove",update:"onStoreUpdate"},triggerEvent:"childtap",triggerCtEvent:"tap"},config:{itemButtonMode:!1,data:null,emptyState:null,emptyText:null,enableTextSelection:null,inline:null,itemCls:null,loadingHeight:null,markDirty:null,navigationModel:{type:"dataview"},selectable:!0},autoSize:null,publishes:{selection:1},twoWayBindable:{selection:1},eventedConfig:{store:void 0},proxyConfig:{selectable:{configs:["mode","deselectable","lastSelected","selected"],methods:["isSelected","select","selectAll","deselectAll","getSelections","hasSelection","getSelectionCount"]}},emptyTextProperty:"html",restoreFocus:!0,refreshCounter:0,selectionModel:"dataview",defaultBindProperty:"store",focusable:!0,scrollable:!0,tabIndex:0,classCls:Ext.baseCSSPrefix+"dataview",focusedCls:Ext.baseCSSPrefix+"focused",hoveredCls:Ext.baseCSSPrefix+"hovered",inlineCls:Ext.baseCSSPrefix+"inline",noWrapCls:Ext.baseCSSPrefix+"nowrap",pressedCls:Ext.baseCSSPrefix+"pressed",scrollDockCls:Ext.baseCSSPrefix+"scrolldock",selectedCls:Ext.baseCSSPrefix+"selected",hasLoadedStore:!1,scrollDockedItems:null,storeListeners:null,_trueStore:null,beforeInitialize:function(e){this.dataItems=[],this.callParent([e])},initialize:function(){var e=this;e.generateSelectorFunctions(),e.callParent(),e.bodyElement.on({touchstart:"_onChildTouchStart",touchend:"_onChildTouchEnd",touchcancel:"_onChildTouchCancel",tap:"_onChildTap",tapcancel:"_onChildTapCancel",longpress:"_onChildLongPress",taphold:"_onChildTapHold",singletap:"_onChildSingleTap",doubletap:"_onChildDoubleTap",swipe:"_onChildSwipe",mouseover:"_onChildMouseOver",mouseout:"_onChildMouseOut",contextmenu:"_onChildContextMenu",delegate:e.eventDelegate,scope:e}),Ext.scrollbar.width()&&e.bodyElement.on("touchstart","_onContainerTouchStart",e),e.on(e.getTriggerCtEvent(),"onContainerTrigger",e)},onRender:function(){this.callParent(),this.forceRefreshOnRender?this.runRefresh():this.refresh()},doDestroy:function(){this.destroyAllRipples(),this.clearPressedTimer(),this.setStore(null),this.setNavigationModel(null),this.setSelectable(null),this.lastPressedLocation=null,this.callParent()},createEmptyText:function(e){var t=Ext.apply({},this.getEmptyTextDefaults());return"string"==typeof e?t[this.emptyTextProperty]=e:e&&Ext.apply(t,e),t.isEmptyText=t.hidden=!0,t.showInEmptyState=null,t},ensureVisible:function(e,t){for(var i,n=this.ensureVisiblePlan(e,t);i=n.steps.pop();)this[i](n);return n.promise},gatherData:function(e,t){var i=e&&e.getData(this.associatedData);return i&&(void 0===t&&(t=this.store.indexOf(e)),i=this.prepareData(i,t,e)),i||null},getFirstDataItem:function(){return this.dataItems[0]||null},getFirstItem:function(){return this.getFastItems()[0]||null},getItemAt:function(e){var t=this.getFastItems();return e<0&&(e+=t.length),t[e]||null},getItemIndex:function(e){return this.mapToRecordIndex(e)},getItem:function(e){var t,i=null;return e&&-1<(t=e.isEntity?this.store.indexOf(e):e)&&(i=this.getItemAt(t)),i},getLastDataItem:function(){var e=this.dataItems;return e[e.length-1]||null},getLastItem:function(){var e=this.getFastItems();return e[e.length-1]},getScrollDockedItems:function(e){var t=this.scrollDockedItems;return(t=t&&(e?t[e=this.scrollDockAliases[e]||e].slice():t.start.items.concat(t.end.items)))||[]},isItemSelected:function(e){var t=this.mapToRecord(e);return!!t&&this.isSelected(t)},isFirstItem:function(e){return Ext.getDom(e)===this.getFirstItem()},isFirstDataItem:function(e){return Ext.getDom(e)===this.getFirstDataItem()},isLastItem:function(e){return Ext.getDom(e)===this.getLastItem()},isLastDataItem:function(e){return Ext.getDom(e)===this.getLastDataItem()},mapToItem:function(e,t){var i,n,r=this.element;return(i=(i=e&&e.isEvent?e.getTarget(this.itemSelector,r):e&&(e.isElement||1===e.nodeType)?Ext.fly(e).findParent(this.itemSelector,r):e&&e.isEntity?this.itemFromRecord(e):e&&e.isComponent&&this.items.contains(e)?e:(n=this.getFastItems(),e<0&&(e+=n.length),n[e||0]))&&this.itemAs(i,t||(this.isElementDataView?"el":"cmp")))||null},mapToRecord:function(e){var t,i,n=e,r=this.element,s=this.store;return n&&n.isEntity?(s&&s.getById(n.id)===n&&(i=n),n=null):n&&n.isEvent?n=n.getTarget(this.itemSelector,r):n&&(n.isElement||1===n.nodeType)?n=Ext.fly(n).findParent(this.itemSelector,r):"number"==typeof n&&(n=this.mapToItem(n)),n&&(t=(t=n.isWidget?n.el:n).dom||t,this.itemSelector(t)&&(i=(i=t.getAttribute("data-recordid"))&&s.getByInternalId(+i))),i||null},mapToRecordIndex:function(e,t){var i=this.mapToRecord(e),n=-1,r=this.store;return i&&(t&&r.isGroupStore&&(r=r.getSource()),n=r.indexOf(i)),n},mapToViewIndex:function(e,t){var i,n=-1,r=e,s=this.element,o=this.getFastItems();if("number"==typeof r){for(t=t||0;r<o.length;++r)if((i=o[r]).isWidget&&(i=i.el.dom),+i.getAttribute("data-recordindex")===r+t){n=r;break}}else r&&(r.isEntity?r=this.itemFromRecord(r):r.isEvent?r=r.getTarget(this.itemSelector,s):!r.isElement&&1!==r.nodeType||(r=Ext.fly(r).findParent(this.itemSelector,s)),r&&o.length&&(o[0].isWidget?r.isWidget||(r=Ext.Component.from(r)):r=r.nodeType?r:r.el.dom,n=Array.prototype.indexOf.call(o,r)));return n},nextItem:function(e,t){var i=this.traverseItem(e,1);return t?this.itemAs(i,t):i},previousItem:function(e,t){var i=this.traverseItem(e,-1);return t?this.itemAs(i,t):i},prepareData:function(e,t,i){return e},refresh:function(){this.whenVisible("runRefresh")},setLocation:function(e,t){return this.getNavigationModel().setLocation(e,t)},onFocusEnter:function(e){if(this.callParent([e]),e.within(this.getRenderTarget())||e.target===this.getFocusEl().dom)return this.onInnerFocusEnter(e)},onInnerFocusEnter:function(e){var t,i=this.getNavigationModel();"scrollbar"!==i.lastLocation?(t=e.target===this.getFocusEl().dom?(t=this.restoreFocus&&i.getPreviousLocation())?t.refresh():e.backwards?this.getLastDataItem():this.getFirstDataItem():e,this.toggleChildrenTabbability(!1),this.getFastItems().length&&(t&&t.isWidget&&(t=t.getFocusEl()||t.el),i.setLocation(t,{event:e,navigate:!1})),i.getLocation()&&this.el.dom.setAttribute("tabIndex",-1)):e.relatedTarget&&e.relatedTarget.focus()},onFocusLeave:function(e){var t=this.getNavigationModel();t.getLocation()&&(t.setLocation(null,{event:e}),this.el.dom.setAttribute("tabIndex",0)),this.callParent([e])},onInnerFocusLeave:function(e){this.getNavigationModel().setLocation(null,{event:e})},onFocusMove:function(e){var t=this,i=t.el,n=t.getRenderTarget(),r=e.event.toComponent,s=e.event.fromComponent;return i.contains(e.toElement)?i.contains(e.toElement)&&!n.contains(e.toElement)&&n.contains(e.fromElement)?t.onInnerFocusLeave(e.event):i.contains(e.fromElement)&&!n.contains(e.fromElement)&&n.contains(e.toElement)?t.onInnerFocusEnter(e.event):((n.contains(e.fromElement)||n.contains(e.toElement))&&(r!==t&&r.up("dataview,componentdataview")!==t||s!==t&&s.up("dataview,componentdataview")!==t||t.getNavigationModel().onFocusMove(e.event)),t.callParent([e])):t.callParent([e])},onItemAdd:function(e,t){var i,n=this,r=e.scrollDock,s=n.scrollDockCls;!e.$dataItem&&e.isInner&&(null!==r&&(r=r||"end"),r&&((i=n.scrollDockedItems)||(n.scrollDockedItems=i={start:{items:[],height:0,filter:n.filterScrollDockStart,name:r},end:{items:[],height:0,filter:n.filterScrollDockEnd,name:r}}),i[r=n.scrollDockAliases[r]||r]||Ext.raise("Invalid value for scrollDock: "+e.scrollDock),(r=i[e.scrollDock=r]).items=n.innerItems.filter(r.filter),void 0===e.showInEmptyState&&(e.showInEmptyState=!1),e.addCls(s+" "+s+"-"+r.name),n.getItemsFocusable()&&e.el.set({tabIndex:-1}),n.addScrollDockedItem&&n.addScrollDockedItem(e))),n.callParent([e,t])},onItemDeselect:function(e,t){this.isConfiguring||this.destroyed||(t?this.setItemSelection(e,!1):this.fireEventedAction("deselect",[this,e],"setItemSelection",this,[e,!1]))},onItemSelect:function(e,t){t?this.setItemSelection(e,!0):this.fireEventedAction("select",[this,e],"setItemSelection",this,[e,!0])},onChildTouchStart:function(e){var t,i=e.item,n=e.event,r=this.hasListeners,s=this.getNavigationModel().getLocation(),o=s&&s.actionable;e.actionable||(e.equalCell||e.equals)(s)||this.rippleItem(i,n),r[t="beforechildtouchstart"]&&!1===this.fireEvent(t,this,e)||r[t="beforeitemtouchstart"]&&!1===this.fireEvent(t,this,e.viewIndex,i,e.record,n)||(o||this.doChildTouchStart(e),this.fireChildEvent("touchstart",e))},onChildTouchEnd:function(e){var t=e.item,i=this.getNavigationModel().getLocation(),n=e.event;i&&i.actionable||this.rippleItem(t,n),this.clearPressedCls("touchend",e)},onChildTouchCancel:function(e){this.clearPressedCls("touchcancel",e)},onChildTouchMove:function(e){this.fireChildEvent("touchmove",e)},onChildTap:function(e){this.fireChildEvent("tap",e)},onChildTapCancel:function(e){this.getItemButtonMode()||this.clearPressedCls("tapcancel",e)},onChildContextMenu:function(e){this.fireChildEvent("contextmenu",e)},onChildLongPress:function(e){this.fireChildEvent("longpress",e)},onChildTapHold:function(e){this.fireChildEvent("taphold",e)},onChildSingleTap:function(e){this.fireChildEvent("singletap",e)},onChildDoubleTap:function(e){this.fireChildEvent("doubletap",e)},onChildSwipe:function(e){this.fireChildEvent("swipe",e)},onChildMouseOver:function(e){var t=e.item;this.mouseOverItem!==t&&(this.mouseOverItem=t,this.doHover&&this.toggleHoverCls(!0),this.fireChildEvent("mouseenter",e))},onChildMouseOut:function(e){var t=this.getItemButtonMode(),i=e.item,n=e.event.getRelatedTarget(this.itemSelector);i&&i.dom!==n&&(this.doHover&&this.toggleHoverCls(!1),t?this.fireChildEvent("mouseleave",e):this.clearPressedCls("mouseleave",e),this.mouseOverItem=null)},onNavigate:function(e){var t=!this.destroyed&&this.getSelectable();t&&this.shouldSelectItem(e)&&t.onNavigate(e)},shouldSelectItem:function(e){var t=this.getSelectable(),i=e.stopSelection||!t||t.getDisabled()||e.isNavKeyPress()&&e.ctrlKey,n=!i&&e.getTarget("."+Ext.baseCSSPrefix+"item-no-select,."+Ext.baseCSSPrefix+"item-no-tap",this.element);return n&&(i=this.el.contains(n)),!i},onStoreAdd:function(){this.syncEmptyState()},onStoreBeforeLoad:function(){this.handleBeforeLoad()},onStoreClear:function(){this.doClear()},onStoreLoad:function(){this.hasLoadedStore=!0,this.clearMask(),this.syncEmptyState()},onStoreRefresh:function(){this.refresh()},onStoreRemove:function(){this.syncEmptyState()},onStoreUpdate:function(e,t,i,n,r){var s;r&&(r.indexChanged||r.filtered)||(s=this.itemFromRecord(t))&&this.syncItemRecord({item:s,modified:this.indexModifiedFields(n),record:t}),this.isSelected(t)&&this.setItemSelection(t,!0)},updateAssociatedData:function(e){this.associatedData={associated:e}},updateData:function(e){var t=this.store;t?t.loadData(e):(this.settingStoreFromData=!0,this.setStore({data:e,autoDestroy:!0}),this.settingStoreFromData=!1)},updateDisableSelection:function(e){this.getRenderTarget().toggleCls(this.showSelectionCls,!e)},updateEmptyText:function(e){var t=e,i=this.emptyTextCmp;i&&(e&&"string"!=typeof e||((t={})[this.emptyTextProperty]=e||""),i.setConfig(t)),this.isConfiguring||this.syncEmptyState()},updateEnableTextSelection:function(e){this.setUserSelectable({bodyElement:!!e})},updateInline:function(e){var t=e&&!1===e.wrap;this.toggleCls(this.inlineCls,!!e),Ext.isEdge&&t&&this.el.measure("w"),this.toggleCls(this.noWrapCls,t)},updateItemCls:function(e,t){if(!this.isConfiguring){var i,n,r=this.dataItems,s=r.length;for(i=0;i<s;i++)(n=(n=r[i]).isWidget?n.el:Ext.fly(n)).replaceCls(t,e)}},applyItemTpl:function(e){return Ext.XTemplate.get(e)},updateItemTpl:function(){this.isConfiguring||this.refresh()},updateMarkDirty:function(e){var t,i,n,r=this.dataItems;for(e=!!e,t=0,i=r.length;t<i;t++)((n=r[t]).el||Ext.fly(n)).toggleCls(this.markDirtyCls,e)},updateMasked:function(e){var t=this,i=t.getLoadingHeight();e?i&&i>t.el.getHeight()&&(t.hasLoadingHeight=!0,t.oldMinHeight=t.getMinHeight(),t.setMinHeight(i)):!t.destroying&&t.hasLoadingHeight&&(t.setMinHeight(t.oldMinHeight),delete t.hasLoadingHeight)},applySelectable:function(e,t){var i={type:this.selectionModel,view:this},n=this.selection;if(!1===e&&(e={disabled:!0}),e){if("string"==typeof e)e={type:this.selectionModel,mode:e.toLowerCase(),view:this};else{if(e.isSelectionModel)return e.setConfig(i);e=Ext.apply(i,e)}e=t?(!e.isSelectionModel&&e.type===t.type||Ext.raise("Switching out selectables dynamically is not supported"),t.setConfig(e)):Ext.Factory.selmodel(this.mergeProxiedConfigs("selectable",e)),n&&(delete this.selection,n.isEntity||Ext.raise("DataView selection config must be single record"),e.getRecords&&!e.getRecords()&&Ext.raise("DataView selection model is configured to not accept records"),e.select(n))}return e},applyStore:function(e){var t=e?Ext.data.StoreManager.lookup(e):null;return this.store=this._trueStore=t,t},updateStore:function(e,t){var i,n=this,r=n.autoMask;if(t&&(t.destroyed||(t.getAutoDestroy()?t.destroy():Ext.destroy(n.storeListeners)),n.dataRange=n.storeListeners=Ext.destroy(n.dataRange),n.destroying||n.destroyed||e||n.doClear()),e){if(n.destroying)return;n.attachStoreEvents(e,Ext.apply({scope:n,destroyable:!0},n.getStoreEventListeners())),e.isLoaded()&&(n.hasLoadedStore=!0),i=!e.isTreeStore&&e.hasPendingLoad(),n.bindStore(e),n.initialized&&n.refresh()}n.isConfiguring&&!n.settingStoreFromData||n.getSelectable().setStore(e),r&&!i?(n.setMasked(!1),n.autoMask=!1):!r&&i&&n.handleBeforeLoad()},updateHidden:function(e,t){this.callParent([e,t]),this.destroyAllRipples()},privates:{associatedData:!0,doHover:!0,showSelectionCls:Ext.baseCSSPrefix+"show-selection",multiSelectCls:Ext.baseCSSPrefix+"multi-select",markDirtyCls:Ext.baseCSSPrefix+"mark-dirty",scrollbarSelector:"."+Ext.baseCSSPrefix+"scrollbar",scrollDockAliases:{top:"start",bottom:"end"},attachStoreEvents:function(e,t){this.storeListeners=e.on(t)},createLocation:function(){var e=this.getNavigationModel();return e.createLocation.apply(e,arguments)},getSelection:function(){return this.getSelectable().getSelectedRecord()},setSelection:function(e){return this.getSelectable().setSelectedRecord(e)},generateSelectorFunctions:function(){var t=this.getRenderTarget(),i=this.bodyElement;this.eventDelegate=this.itemSelector=function(e){return e&&(e.parentNode===i.dom||e.parentNode===t.dom)}},bindStore:function(e){this._trueStore=e,this.dataRange=e.createActiveRange()},clearMask:function(){this.setMasked(!1),this.autoMask=!1},clearPressedCls:function(e,t){var i=t.record,n=t.child;this.clearPressedTimer(),i&&n&&(n.isWidget?n.element:Ext.fly(n)).removeCls(this.pressedCls),this.fireChildEvent(e,t)},clearPressedTimer:function(){var e=this.pressedTimeout;e&&(Ext.undefer(e),delete this.pressedTimeout)},doAddPressedCls:function(e){var t=this.itemFromRecord(e);t&&(t=t.isWidget?t.element:Ext.fly(t)).addCls(this.pressedCls)},doClear:function(){this.syncEmptyState()},doChildTouchStart:function(e){var t=e.record,i=this.getItemButtonMode(),n=this.getPressedDelay();this.clearPressedTimer(),t&&(0<n?this.pressedTimeout=Ext.defer(this.doAddPressedCls,n,this,[t]):this.doAddPressedCls(t),i&&(this.lastPressedLocation=e,Ext.GlobalEvents.setPressedComponent(this,e)))},onRelease:function(){this.lastPressedLocation&&this.clearPressedCls("release",this.lastPressedLocation),this.lastPressedLocation=null},ensureVisiblePlan:function(e,t){var i,n=this.store;return e.record?(e=(t=Ext.apply({},e)).record,delete t.record):t=Ext.apply({},t),e.isEntity?i=n.indexOf(e):"number"==typeof e?(i=e,e=n.getAt(e)):Ext.raise("ensureVisible first parameter must be record or recordIndex or an options object with a record property"),t.record=e,t.recordIndex=i,t.animation=t.animation||t.animate,t.async=!!t.animation,t.steps=[],i<0||i>=n.getCount()?(Ext.raise("Invalid record passed to ensureVisible"),t.promise=Ext.Deferred.getCachedRejected()):(!this.dataRange.isVirtualRange||e||!i&&0!==i||(t.async=!0),t.steps.push("ensureVisibleFocus","ensureVisibleSelect","ensureVisiblePrep")),t},ensureVisibleFocus:function(t){if(t.focus){var i=this,n=i.isGrid;!n||"column"in t||(t.column=0),t.async?t.promise=t.promise.then(function(e){return i.getNavigationModel().setLocation(n?t:t.record),e}):i.getNavigationModel().setLocation(n?t:t.record)}},ensureVisiblePrep:function(e){function t(){return delete s.goto,i?s.goto(i[0],i[1]).then(function(){if(e.record=r.store.getAt(e.recordIndex),!e.record)throw new Error("Unable to get record")}):Ext.Promise.resolve()}var i,n,r=this,s=r.dataRange;n=e.async?(s.goto=function(e,t){i?(i[0]=e,i[1]=t):i=[e,t]},(n=r.ensureVisibleScroll(e)).then(function(e){return t().then(function(){return e})},function(e){throw t(),e})):r.ensureVisibleScroll(e),e.promise=n},ensureVisibleScroll:function(e){var t=e.item||(e.item=this.itemFromRecord(e.recIndex));return this.getScrollable().ensureVisible(t.el,{animation:e.animation})},ensureVisibleSelect:function(t){if(t.select){var i,n=this,r=n.getSelectable();t.async?t.promise=t.promise.then(function(e){return t.column?(i=n.createLocation(t),r.selectCells(i,i)):r.select(t.record),e}):t.column?(i=n.createLocation(t),r.selectCells(i,i)):r.select(t.record)}},filterScrollDockStart:function(e){var t=e.scrollDock;return"start"===t||"top"===t},filterScrollDockEnd:function(e){var t=e.scrollDock;return"end"===t||"bottom"===t},findTailItem:function(e){var t,i=e?this.innerItems:this.items.items,n=-1,r=null;for(t=i.length;0<t--&&"end"===i[t].scrollDock;)r=i[n=t];return e?r:n},fireChildEvent:function(e,t){var i="item"+e,n="child"+e,r=this.hasListeners;r[n]&&this.fireEvent(n,this,t),r[i]&&t.record&&this.fireEvent(i,this,t.viewIndex,t.item,t.record,t.event)},getEmptyTextCmp:function(){var e=this.emptyTextCmp;return e||(this.emptyTextCmp=e=this.add(this.createEmptyText(this.getEmptyText()))),e},getRecordIndexFromPoint:function(e,t){var i=this.getItemFromPoint(e,t);return i?this.mapToRecordIndex(i):-1},getItemFromPoint:function(e,t){var i=this.getScrollable(),n=i.getPosition(),r=i.getSize(),s=this.getScrollerTarget().getXY();return this.getItemFromPagePoint(Math.max(Math.min(e,r.x),0)+s[0]-n.x,Math.max(Math.min(t,r.y),0)+s[1]-n.y)},getItemFromPagePoint:function(e,t){var i,n,r,s=this.getFastItems(),o=s.length,a=new Ext.util.Point(e,t),l=null;for(i=0;i<o;i++)if((r=(n=s[i]).isWidget?n.element:Ext.fly(n)).getRegion().contains(a)){l=n.isWidget?n:Ext.get(r);break}return l},handleBeforeLoad:function(){var e=this.getLoadingText();e&&(this.autoMask=!0,this.setMasked({xtype:"loadmask",message:e})),this.hideEmptyText()},hideEmptyText:function(){var e=this.emptyTextCmp;e&&e.hide()},indexModifiedFields:function(e){return e},itemAs:function(e,t){var i=e;return"cmp"!==t&&"dom"!==t&&"el"!==t&&Ext.raise('Invalid "as" value "'+t+'" to mapToItem()'),"number"==typeof i?i=null:i&&("cmp"===t?i.isWidget||(i=Ext.getCmp(i.id)):(i.isWidget&&(i=i.el),i&&(i.isElement?"dom"===t&&(i=i.dom):"el"===t&&(i=Ext.fly(i))))),i},itemFromRecord:function(e){var t=e.isEntity?this.store.indexOf(e):e;return-1<t&&this.dataItems[t]||null},onContainerTrigger:function(e){e.target===this.element.dom&&this.getDeselectOnContainerClick()&&this.store&&this.getSelectable().deselectAll()},runRefresh:function(){var e=this.store,t=this.getScrollToTopOnRefresh(),i=!t&&this.getScrollable(),n=i&&i.getMaxPosition().y;this.syncEmptyState(),!e||this.isConfiguring||!e.isTreeStore&&e.hasPendingLoad()||(this.fireEventedAction("refresh",[this],"doRefresh",this,[t]),i&&i.getMaxPosition().y<n&&i.refresh())},saveFocusState:function(){var e,t,i,n,r=this,s=r.getNavigationModel(),o=s.location;return o?(t=o.record,e=o.viewIndex,function(){(i=r.getFastItems().length)&&(t&&(n=r.mapToItem(t)),n=n||r.mapToItem(Math.min(e||0,i-1)),s.setLocation(null),s.setLocation(n))}):Ext.emptyFn},setItemHidden:function(e,t){t?e.$hidden||(e.hide(),e.$hidden=!0):e.$hidden&&(e.$hidden=!1,e.show())},setItemSelection:function(e,t){var i,n,r,s,o=(e=Ext.Array.from(e)).length,a=this.pressedCls,l=this.selectedCls,c=a;if(t?s=l:c=[a,l],!this.isConfiguring&&!this.destroyed)for(i=0;i<o;i++)n=e[i],(r=this.itemFromRecord(n))&&((r=r.isWidget?r.element:Ext.fly(r)).removeCls(c),s&&r.addCls(s))},shouldRippleItem:function(e,t){return!(!this.getDisableSelection()&&this.isItemSelected(e))&&this.mixins.itemrippler.shouldRippleItem.call(this,e,t)},syncEmptyState:function(){var e=this.store,t=!e||!e.getCount()&&this.getEmptyText(),i=this.emptyTextCmp;return t?!this.hasLoadedStore&&this.getDeferEmptyText()||e&&e.hasPendingLoad()||(i=i||this.getEmptyTextCmp()).show():i&&i.hide(),this.setEmptyState(t),t},toggleChildrenTabbability:function(e){var t=this.getRenderTarget();e?t.restoreTabbableState({skipSelf:!0}):t.saveTabbableState({skipSelf:!0,includeSaved:!1})},toggleHoverCls:function(e){var t=this.mouseOverItem;t&&!t.destroyed&&t.toggleCls(this.hoveredCls,e)},_onChildEvent:function(e,t){var i=this.lastPressedLocation,n=this.createLocation(t);return n.child&&(n.pressing=!(!i||i.child!==n.child),this[e](n)),n},_onChildTouchStart:function(e){var t=this._onChildEvent("onChildTouchStart",e).child,i=t&&(t.element||Ext.get(t));i&&i.on("touchmove","_onChildTouchMove",this)},_onChildTouchMove:function(e){this._onChildEvent("onChildTouchMove",e)},_onChildTouchEnd:function(e){var t=this._onChildEvent("onChildTouchEnd",e).child,i=t&&(t.element||Ext.get(t));i&&i.un("touchmove","_onChildTouchMove",this)},_onChildTouchCancel:function(e){var t=this._onChildEvent("onChildTouchCancel",e).child,i=t&&(t.element||Ext.get(t));i&&i.un("touchmove","_onChildTouchMove",this)},_onChildTap:function(e){e.getTarget("."+Ext.baseCSSPrefix+"item-no-tap",this.element)||this._onChildEvent("onChildTap",e)},_onChildTapCancel:function(e){this._onChildEvent("onChildTapCancel",e)},_onChildContextMenu:function(e){this._onChildEvent("onChildContextMenu",e)},_onChildLongPress:function(e){this._onChildEvent("onChildLongPress",e)},_onChildTapHold:function(e){this._onChildEvent("onChildTapHold",e)},_onChildSingleTap:function(e){this._onChildEvent("onChildSingleTap",e)},_onChildDoubleTap:function(e){this._onChildEvent("onChildDoubleTap",e)},_onChildSwipe:function(e){this._onChildEvent("onChildSwipe",e)},_onChildMouseOver:function(e){var t=e.getRelatedTarget(this.itemSelector);e.getTarget(this.itemSelector)!==t&&this._onChildEvent("onChildMouseOver",e)},_onChildMouseOut:function(e){e.getRelatedTarget(this.itemSelector)===e.getTarget(this.itemSelector)&&e.getRelatedTarget(this.eventDelegate)||this._onChildEvent("onChildMouseOut",e)},_onContainerTouchStart:function(e){var t;e.getTarget(this.scrollbarSelector)?(e.preventDefault(),t=!0):e.getTarget(this.itemSelector)||(e.preventDefault(),this.bodyElement.getClientRegion().contains(e.getPoint())||(t=!0)),t&&(this.getNavigationModel().lastLocation="scrollbar")},setupChildEvent:Ext.privateFn,updateEmptyState:function(e){var t,i,n,r,s,o=this.items.items;for(n=0;n<o.length;++n){if(i=s=!1,!1===(t=(r=o[n]).showInEmptyState))i=!(s=!e);else if(t)if("function"==typeof t){if(i=!(s=r.showInEmptyState(e)),null==s)continue}else i=!(s=e);i?r.isInner?this.setItemHidden(r,!0):r.hide():s&&(r.isInner?this.setItemHidden(r,!1):r.show())}},applyNavigationModel:function(e){return e&&("string"==typeof e&&(e={type:e}),e=Ext.Factory.navmodel(Ext.apply({view:this},e))),e},updateNavigationModel:function(e,t){Ext.destroy(t)},getUseComponents:function(){return this.isComponentDataView}}}),Ext.define("Ext.theme.material.dataview.Abstract",{override:"Ext.dataview.Abstract",config:{itemRipple:{release:!0,color:"default"}}}),Ext.define("Ext.dataview.GenericItem",{mixinId:"dataviewitem",isDataViewItem:!0,config:{innerCls:null,contentCls:null,recordIndex:null},updateRecordIndex:function(e){this.el.dom.setAttribute("data-recordindex",e)},getDataview:function(){return this.parent},updateInnerCls:function(e,t){this.innerElement.replaceCls(t,e)},updateContentCls:function(e,t){this.getInnerHtmlElement().replaceCls(t,e)},privates:{$dirty:!1,dirtyCls:Ext.baseCSSPrefix+"dirty",augmentToolHandler:function(e,t){t[1]={event:t.pop(),item:this,list:this.parent,record:this.getRecord(),tool:t[1]}},handleEmptyText:function(e){var t;return e||(t=this.parent)&&t.getEmptyItemText&&(e=t.getEmptyItemText()),e},syncDirty:function(e){var t=!!e&&e.dirty;t!==this.$dirty&&(this.toggleCls(this.dirtyCls,t),this.$dirty=t)}}}),Ext.define("Ext.dataview.DataItem",function(a){return{extend:Ext.Container,alternateClassName:"Ext.dataview.component.DataItem",xtype:"dataitem",mixins:[Ext.dataview.GenericItem],config:{itemCls:null,dataMap:{cached:!0,$value:null}},html:"",classCls:Ext.baseCSSPrefix+"dataitem",inheritUi:!0,autoSize:null,defaultType:"component",referenceHolder:!0,template:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",uiCls:"body-el",children:[{reference:"innerElement",cls:Ext.baseCSSPrefix+"inner-el",uiCls:"inner-el"}]}],updateItemCls:function(e,t){this.el.replaceCls(t,e)},updateRecord:function(e){var t,i,n,r,s=this;s.destroying||((r=s.getViewModel())&&r.setData({record:e}),t=s.getDataMap(),i=s.getTpl(),t&&a.executeDataMap(e,s,t),s.syncDirty(e),!i&&t&&!s.hasListeners.updatedata||(n=s.parent.gatherData(e),i&&s.updateData(n),s.hasListeners.updatedata&&s.fireEvent("updatedata",s,n)))},updateHtml:function(e,t){this.callParent([this.handleEmptyText(e),t])},privates:{applyDataMap:function(e){return a.parseDataMap(e)},getRenderTarget:function(){return this.innerElement},statics:{assignDataToItem:function(e,t,i,n){var r,s,o,a,l,c,u,d=Ext.Config.map;for(l in i)if(t[c=n?l:(r=d[l])&&r.names.set]){for(u=e,o=0,a=(s=i[l]).length;u&&o<a;++o)u=u.interpret(s[o]);t[c](o<a?null:u)}else n?Ext.raise('No method "'+l+'" on '+t.$className):Ext.raise('No config "'+l+'" on '+t.$className)},executeDataMap:function(e,t,i){var n,r,s,o;for(n in i)(o=i[n])&&(r=!1,((s="#"===n?t:t.lookup(n))||("function"==typeof t[n]&&(s=t[n](),r=!0,t.$dataMapWarning||(t.$dataMapWarning=!0,Ext.log.warn("Using getters in dataMaps is deprecated (for "+t.getId()+"); support will be removed in 7.0"))),s))&&a.assignDataToItem(e,s,o,r))},parseDataMap:function(e){var t,i,n,r,s={};for(n in e)for(r in s[n]=t={},i=e[n])t[r]=i[r].split(".");return s}}}}}),Ext.define("Ext.dataview.Component",{extend:Ext.dataview.Abstract,xtype:"componentdataview",isComponentDataView:!0,config:{itemInnerCls:null,itemConfig:{xtype:"dataitem"},itemContentCls:null,itemDataMap:null,maxItemCache:20,striped:null,itemCount:0},firstCls:Ext.baseCSSPrefix+"first",lastCls:Ext.baseCSSPrefix+"last",oddCls:Ext.baseCSSPrefix+"odd",beforeInitialize:function(e){this.itemCache={max:0,unused:[]},this.callParent([e])},isFirstItem:function(e){return e===this.getFirstItem()},isFirstDataItem:function(e){return e===this.getFirstDataItem()},isLastItem:function(e){return e===this.getLastItem()},isLastDataItem:function(e){return e===this.getLastDataItem()},doDestroy:function(){Ext.destroy(this.itemCache.unused,this.dataRange),this.callParent()},onRender:function(){var e=this.getItemConfig(),t=e.viewModel;t&&(this.hasItemVm=!0,e.viewModel=Ext.applyIf({scheduler:null},t),this.lookupViewModel()||this.setViewModel(!0)),this.callParent()},getViewItems:function(){return this.getInnerItems().slice()},onStoreAdd:function(e,t,i){this.callParent(arguments),this.setItemCount(e.getCount()),this.syncItemRange(this.getStoreChangeSyncIndex(i))},onStoreRemove:function(e,t,i){var n,r=t.length,s=this.dataItems.splice(i,r),o=this.getItemCount();if(this.callParent(arguments),s.length){for(n=r;0<n--;)this.removeDataItem(s[n]);this.setItemCount(o-r),this.syncItemRange(this.getStoreChangeSyncIndex(i))}},updateItemInnerCls:function(e){if(!this.isConfiguring){var t,i,n=this.dataItems,r=n.length;for(t=0;t<r;t++)(i=n[t]).setInnerCls&&i.setInnerCls(e)}},applyItemConfig:function(e,t){if(e=e||{},t&&!e.xtype&&!e.xclass){var i=t.xtype,n=t.xclass;(i||n)&&((e=Ext.apply({},e))[n?"xclass":"xtype"]=n||i)}return e},updateItemConfig:function(){this.isConfiguring||(this.clearItems(),this.refresh())},updateItemContentCls:function(e){if(!this.isConfiguring){var t,i,n=this.dataItems,r=n.length;for(t=0;t<r;t++)(i=n[t]).setContentCls&&i.setContentCls(e)}},applyItemDataMap:function(e){return Ext.dataview.DataItem.parseDataMap(e)},updateMaxItemCache:function(e){this.itemCache.max=e},updateStriped:function(e){var t,i,n,r=this.dataItems,s=this.oddCls;if(this.striped=!!e,!this.isConfiguring)for(t=0;t<r.length;++t)i=r[t].el,n=e?+i.dom.getAttribute("data-recordindex"):0,i.toggleCls(s,n%2)},privates:{dataRange:null,infinite:!1,striped:!1,_itemChangeHandlers:["changeItemRecordIndex","changeItemRecord","changeItemIsFirst","changeItemIsLast"],acquireItem:function(e,t){var i,n,r=null;return"number"==typeof e&&(r=e,e=null),e||(e=this.getItemConfig(),t=this.getItemsFocusable()),(n=this.itemCache.unused.pop())?(n.removeCls(this._cachedRemoveClasses),this.addDataItem(n,r)):(n=this.createDataItem(e),i=(n=this.addDataItem(n,r)).element,t&&(n.getFocusEl()||i).setTabIndex(-1),i.dom.setAttribute("data-viewid",this.id)),n},addDataItem:function(e,t){return null===t&&(t=this.findTailItem(!1)),e=t<0?this.add(e):this.insert(t,e),this.dataItems.push(e),e},changeItem:function(e,t){var i,n,r=this.store,s=r.currentPage,o=t+(s?(s-1)*r.pageSize:0),a=this.dataItems,l=e<0?a.length+e:e,c=this.dataRange.records[t],u=this.getItemForRecord(l,c,t),d=r.getCount(),h=this._itemChangeHandlers,f={isFirst:!t,isLast:t===d-1,item:u,itemIndex:l,record:c,recordIndex:t,datasetIndex:o};for(f.afterEl=f.beforeEl=f.itemEl=n=u.renderElement,f.itemClasses=n.getClassMap(!1),f.isFirstChanged=u.isFirst!==f.isFirst,f.isLastChanged=u.isLast!==f.isLast,i=0;i<h.length;++i)this[h[i]](f);return n.setClassMap(f.itemClasses,!0),f},changeItemIsFirst:function(e){if(e.isFirstChanged){var t,i,n=this.firstCls,r=e.item,s=e.itemClasses,o=this.scrollDockedItems;if(r.isFirst=e.isFirst){if(s[n]=1,o&&!this.infinite)for(i=(o=o.start.items).length,t=0;t<i;++t)o[t].renderElement.insertBefore(e.beforeEl)}else delete s[n]}},changeItemIsLast:function(e){if(e.isLastChanged){var t,i,n=e.item,r=e.itemClasses,s=this.lastCls,o=this.scrollDockedItems;if(n.isLast=e.isLast){if(r[s]=1,o&&!this.infinite)for(i=(o=o.end.items).length,t=0;t<i;++t)o[t].renderElement.insertAfter(e.afterEl)}else delete r[s]}},changeItemRecord:function(e){this.syncItemRecord(e)},changeItemRecordIndex:function(e){var t=e.item,i=e.recordIndex,n=e.itemClasses,r=this.oddCls;t.$datasetIndex=e.datasetIndex,t.isDataViewItem?t.getRecordIndex()!==i&&t.setRecordIndex(i):t.el.dom.setAttribute("data-recordindex",i),this.striped&&e.recordIndex%2?n[r]=1:delete n[r]},clearItemCaches:function(){var e=this.itemCache.unused;Ext.destroy(e),e.length=0},clearItems:function(){var e,t=this.dataItems,i=t.length,n=this.itemCache.unused;for(e=0;e<i;++e)this.removeDataItem(t[e],!0);Ext.destroy(n),t.length=n.length=0,this.setItemCount(0)},createDataItem:function(e){var t,i;return i={xtype:this.getDefaultType(),tpl:this.getItemTpl(),$dataItem:"record"},(t=this.getItemInnerCls())&&(i.innerCls=t),(t=this.getItemContentCls())&&(i.contentCls=t),(i=Ext.apply(i,e||this.getItemConfig())).cls=[i.cls,this.getMarkDirty()?this.markDirtyCls:"",this.getItemCls()].join(" "),i},doClear:function(){this.setItemCount(0),this.callParent()},doRefresh:function(e){var t,i=this,n=i.dataRange.records.length,r=i.getScrollable();++i.refreshCounter,r&&e&&r.scrollTo(0,0),n?(t=i.saveFocusState(),i.hideEmptyText(),i.setItemCount(n),i.syncItemRange(),i.hasSelection()&&i.setItemSelection(i.getSelections(),!0),t()):i.doClear()},getCacheForItem:function(){return this.itemCache},getFastItems:function(){return this.getInnerItems()},getItemForRecord:function(e){return this.dataItems[e]},getStoreChangeSyncIndex:function(e){return e},removeCachedItem:function(e,t,i,n){var r=!1,s=!t&&i&&i.unused;return s&&s.length<i.max?(n?this.setItemHidden(e,!0):this.remove(e,!1),s.push(e)):(e.destroy(),r=!0),r},removeDataItem:function(e,t){return this.removeCachedItem(e,t,!t&&this.getCacheForItem(e))},syncItemRange:function(e,t){var i,n=this.store.getCount();for(null==t&&(t=n),i=e||0;i<t;++i)this.changeItem(i,i)},syncItemRecord:function(e,t){var i=e.item,n=e&&e.itemClasses,r=i.getRecord(),s=t||e.record,o=this.getItemDataMap(),a=i.el,l=i.getViewModel(),c=this.selectedCls;r===s?t||(i.isRecordRefreshable?i.refresh(e):i.updateRecord(s,r)):(this.getSelectable().isRowSelected(s)?n?n[c]=!0:a.addCls(c):n?delete n[c]:a.removeCls(c),i.setRecord(s),i.el.dom.setAttribute("data-recordid",s.internalId),i.isDragging&&(i.draggingRecordId===s.id?n[i.dragMarkerCls]=!0:delete n[i.dragMarkerCls])),o&&Ext.dataview.DataItem.executeDataMap(s,i,o),l&&l.setData({record:e.record})},traverseItem:function(e,t){var i,n=this.innerItems,r=null,s=e;return e&&(e.isElement&&(s=Ext.getCmp(e.id)),-1<(i=n.indexOf(s))&&(r=n[i+t]||null)),r},updateItemCount:function(e){var t,i,n=this.dataItems;if(n.length<e)for(t=this.getItemConfig(),i=this.getItemsFocusable();n.length<e;)this.acquireItem(t,i);for(;n.length>e;)this.removeDataItem(n.pop())}}},function(e){var t=e.prototype;t._cachedRemoveClasses=[t.pressedCls,t.selectedCls]}),Ext.define("Ext.dataview.GroupStore",{extend:Ext.data.ChainedStore,isGroupStore:!0,syncSourceGrouping:!0,applyGrouper:function(e,t){var i,n=this.getSource();return n&&e!==n.getGrouper()&&(n.setGrouper(e),e=n.getGrouper()),i=this.callParent([e,t]),this.refreshFromSource(),i},constructDataCollection:function(){var t=this,i=t.callParent();return i.transformItems=function(e){return t.transformItems(i,e)},i},createFiltersCollection:function(){return this.getSource().getFilters()},refreshFromSource:function(){var e=this.getData(),t=this.list,i=t.getScrollToTopOnRefresh();t.setScrollToTopOnRefresh(!1),e.onCollectionRefresh(e.getSource()),t.setScrollToTopOnRefresh(i)},transformItems:function(e,t){var i,n,r,s,o,a,l,c,u,d=t.length,h=this.list,f=h.isGrouping()&&h.getCollapsible(),g=t,p={},m=this.getSource(),x=m.getModel(),y=f&&m.getGrouper().getProperty();if(f)for(l=e.getSource().getGroups(),u=f.getCollapsed(),s=0;s<d;++s)a=t[s],c=l.getItemGroup(a),((n=h.groupFrom(r=c.getGroupKey()))?n.collapsed:u)?(i=i||(g=t.slice(0,s)),p[r]||((o=c.placeholderRec)||(c.placeholderRec=o=new x,o.data[y]=o.$groupKey=r,o.$groupValue=c.getGroupValue(),o.$collapsedGroupPlaceholder=!0,o.$srcGroup=c),p[r]=o,i.push(o))):i&&i.push(a);return g},updateSource:function(e,t){e&&(this.list.store=this),t&&!t.destroyed&&t.getAutoDestroy()&&t.destroy(),this.callParent([e,t]),e&&!this.destroying&&this.getSorters().setSource(e.getSorters())}}),Ext.define("Ext.dataview.Pinnable",{mixinId:"dataviewpinnable",isDataViewPinnable:!0,config:{pinned:null},pinnedCls:Ext.baseCSSPrefix+"pinned",updatePinned:function(e){var t=this.el,i=this.pinnedCls,n=this._pinnedClsMap,r=t.getClassMap(!1);delete r[n.top],delete r[n.bottom],e?(r[i]=!0,(i=n[e])&&(r[i]=!0)):delete r[i],t.setClassMap(r,!0)},_pinnedClsMap:{top:Ext.baseCSSPrefix+"pinned-top",bottom:Ext.baseCSSPrefix+"pinned-bottom"}}),Ext.define("Ext.dataview.ItemHeader",{extend:Ext.Component,xtype:"itemheader",mixins:[Ext.mixin.Toolable,Ext.dataview.Pinnable],isItemHeader:!0,config:{group:null,contentWidth:null},html:"",classCls:Ext.baseCSSPrefix+"itemheader",inheritUi:!0,toolDefaults:{ui:"itemheader"},template:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",uiCls:"body-el"}],setGroup:function(e){var t=this._group;return this._group=e,this.updateGroup(e,t),this},updateGroup:function(e,t){var i,n,r,s,o;t&&e!==t&&t.getHeader()===this&&t.setHeader(null),e&&(e.setHeader(this),(o=(n=(s=this.parent).getStore().getGrouper())&&n.owner===s&&n.headerTpl||this.getTpl())&&(i=this.getGroupHeaderTplData(),r=o.apply(i))),this.setHtml(r||"")},getScrollerTarget:function(){return this.el},doDestroy:function(){this.mixins.toolable.doDestroy.call(this),this.callParent()},privates:{augmentToolHandler:function(e,t){var i=t[1]={event:t.pop(),group:this.getGroup(),itemHeader:t[0],tool:t[1]};t[0]=i.list=this.parent},getGroupHeaderTplData:function(e){var t=this.getGroup(),i=this.parent,n=t&&t.data,r=n&&{name:n.getGroupKey(),group:t,groupField:i.getStore().getGrouper().getProperty(),children:n.items,count:n.length};return r&&(r.value=n.items[0].data[r.groupField]),e||(r.html=Ext.htmlEncode(r.name)),r.groupValue=r.value,r},getList:function(){return this.parent},onToggleCollapse:function(){this.getGroup().toggleCollapsed()},updateContentWidth:function(e){var t=this._toolDockWrap||this.bodyElement;t&&t.setWidth(e||null)}}}),Ext.define("Ext.dataview.ListCollapser",{isListCollapser:!0,config:{collapsed:null,collapseToolText:"Collapse this group",expandToolText:"Expand this group",footer:!1,tool:{xtype:"tool",type:"collapse",handler:"up.onToggleCollapse",itemId:"groupCollapser",weight:900,zone:"end"}},collapsedCls:Ext.baseCSSPrefix+"group-collapsed",list:null,constructor:function(e){this.initConfig(e)},privates:{isRecordRendered:function(e){var t=this.list,i=t.groupFrom(e);return!(i&&i.collapsed)&&t.isRecordRendered(e)}}}),Ext.define("Ext.dataview.ListGroup",{$configPrefixed:!1,config:{collapsed:null,collapsible:null,header:null},data:null,list:null,beginIndex:-1,endIndex:-1,nextGroup:null,previousGroup:null,constructor:function(e){this.initConfig(e)},collapse:function(){this.toggleCollapsed(!0)},expand:function(){this.toggleCollapsed(!1)},getCollapseTool:function(){var e=this.peekHeader();return e&&e.lookupTool("groupCollapser")},isAttached:function(){var e=this.data,t=this.list,i=t.store.getGroups();return i=i.get(e.getGroupKey()),Ext.getExpando(i,t.expandoKey)===this},toggleCollapsed:function(e){var t,i=this.list;!1!==this.getCollapsible()&&this.isAttached()&&(null==e&&(e=!this.getCollapsed()),t="beforegroup"+(e?"collapse":"expand"),!1!==i.fireEvent(t,i,this)&&this.setCollapsed(e))},applyCollapsed:function(e){return!!e},updateCollapsed:function(e,t){var i=this.list,n=i.getCollapsible(),r=this.getCollapseTool(),s=this.peekHeader();this.isAttached()&&(r&&(r.setType(e?"expand":"collapse"),r.setTooltip(e?n.getExpandToolText():n.getCollapseToolText())),s&&s.el.toggleCls(n.collapsedCls,e),e!==!!t&&i.syncGroupCollapse(this,e))},updateHeader:function(e){if(e){var t=this.list.getCollapsible(),i=this.getCollapsed();t&&(this.getCollapseTool()||e.addTool(t.getTool()),i===!!i?this.updateCollapsed(i,i):this.setCollapsed(!!i))}},peekHeader:function(){var e=this.getHeader();return!e||!e.destroying&&this.isAttached()||this.setHeader(e=null),e}},function(e){var i=e.prototype;Ext.each(["contains","containsAll","containsKey","each","eachKey","find","findBy","findIndex","findIndexBy","first","last","get","getAt","getByKey","getCount","getRange","getValues","indexOf","indexOfKey","getSummaryRecord"],function(t){i[t]=function(){var e=this.data;return e&&e[t].apply(e,arguments)}})}),Ext.define("Ext.dataview.Disclosable",{mixinId:"disclosable",isListItem:!0,toolDefaults:{ui:"listitem"},toolAnchorName:"innerElement",getDisclosure:function(){return this.lookupTool("disclosure")},privates:{invokeDisclosure:function(e,t,i){var n=this.parent;if("disclosure"===e.type&&!t&&n&&n.onItemDisclosureTap)return n.onItemDisclosureTap(this,i),!0},syncDisclosure:function(e){var t=this.getDisclosure(),i=this.parent;t&&t.setHidden(i.shouldHideDisclosure(e))}}}),Ext.define("Ext.dataview.SimpleListItem",{extend:Ext.Component,alternateClassName:"Ext.dataview.component.SimpleListItem",xtype:"simplelistitem",mixins:[Ext.dataview.Disclosable,Ext.mixin.Toolable,Ext.dataview.GenericItem,Ext.dataview.Pinnable],classCls:Ext.baseCSSPrefix+"listitem",inheritUi:!0,html:"",template:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",uiCls:"body-el",children:[{reference:"innerElement",cls:Ext.baseCSSPrefix+"inner-el",uiCls:"inner-el"}]}],doDestroy:function(){this.mixins.toolable.doDestroy.call(this),this.callParent()},handleFocusEvent:Ext.emptyFn,updateRecord:function(e){var t,i;this.destroying||this.destroyed||(i=(t=this.parent)&&t.gatherData(e),this.updateData(i),this.syncDisclosure(e))},updateHtml:function(e,t){this.callParent([this.handleEmptyText(e),t])},privates:{getRenderTarget:function(){return this.innerElement},invokeToolHandler:function(e,t,i,n,r){return!this.invokeDisclosure(e,t,r)&&e.invokeToolHandler(e,t,i,n,r)}}}),Ext.define("Ext.dataview.ListItemPlaceholder",{extend:Ext.dataview.SimpleListItem,xtype:"listitemplaceholder",isListItemPlaceholder:!0,config:{group:null},html:"",cls:Ext.baseCSSPrefix+"listitem-placeholder"}),Ext.define("Ext.dataview.List",{extend:Ext.dataview.Component,alternateClassName:"Ext.List",xtype:"list",isList:!0,mixins:[Ext.mixin.Bufferable],config:{bufferSize:20,collapseDefaults:{cached:!0,$value:{xclass:"Ext.dataview.ListCollapser"}},collapsible:{lazy:!0,$value:!0},disclosureProperty:"disclosure",grouped:!0,groupFooter:{cached:!0,$value:null},groupHeader:{cached:!0,$value:{xtype:"itemheader",tpl:"{html} ({count})"}},groupPlaceholder:{cached:!0,$value:{xtype:"listitemplaceholder"}},indexBar:null,infinite:null,minimumBufferDistance:5,onItemDisclosure:{$value:null,merge:function(e,t,i){var n=e&&i&&i.$isClass&&typeof e;return"string"===n||"function"===n?{handler:e,scope:"self"}:e}},pinFooters:!1,pinHeaders:!0,pinnedFooter:{lazy:!0,$value:null},pinnedHeader:{lazy:!0,$value:{xtype:"itemheader"}},preventSelectionOnDisclose:!0,preventSelectionOnTool:!0,rowLines:null,useSimpleItems:null,variableHeights:null,grouping:null,horizontalOverflow:{evented:!0,$value:null},innerCtHeight:null,innerWidth:null,pinnedFooterHeight:null,pinnedHeaderHeight:null,topRenderedIndex:null,verticalOverflow:null,visibleHeight:null,visibleLeft:null,visibleTop:null,visibleWidth:null},bufferableMethods:{syncVerticalOverflow:1},classCls:Ext.baseCSSPrefix+"list",itemConfig:{xtype:"simplelistitem"},maintainChildNodes:!1,placeholderHeight:null,rowHeight:0,scrollable:{x:!1,y:!0},storeEventListeners:{groupchange:"onStoreGroupChange",totalcountchange:"onStoreTotalCountChange"},template:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",uiCls:"body-el",children:[{reference:"outerCt",className:Ext.baseCSSPrefix+"list-outer-ct",children:[{reference:"innerCt",className:Ext.baseCSSPrefix+"list-inner-ct"}]}]}],beforeInitialize:function(e){var t=this;t.getInfinite()||t.innerCt.on("resize","onInnerCtResize",t),t.expandoKey="list-"+t.$iid,t.gapMap={},t.itemTranslationMethod||(t.itemTranslationMethod=Ext.supports.TranslateYCausesHorizontalScroll?"cssposition":"csstransform"),t.groupingInfo={header:{config:t.getGroupHeader(),creator:"createGroupHeader",name:"$header",offset:0,max:0,unused:[]},footer:{config:t.getGroupFooter(),creator:"createGroupFooter",name:"$footer",offset:1,max:0,unused:[]},placeholder:{max:0,unused:[]}},t.bodyElement.on({resize:"onBodyResize",scope:t}),t.selfPartner=[t],t.stickyItems=[],t.stickyItemsByRecordId={},t.callParent([e])},doDestroy:function(){var e=this.groupingInfo;Ext.destroy(this.resyncListener,e.header.unused,e.footer.unused,e.placeholder.unused),this.callParent()},createIndexBar:function(e){return Ext.apply({xtype:"indexbar",$initParent:this,parent:this,hidden:!0},e)},createPinnedFooter:function(e){var t=this.createPinnedHeaderFooter(e);return t.bottom=0,t.pinned="bottom",t},createPinnedHeader:function(e){var t,i=this.getGroupHeader(),n=this.createPinnedHeaderFooter(e);return n.top=0,n.pinned="top",!n.tpl&&i.tpl&&(n.tpl=i.tpl),"tools"in n||(t=i&&i.tools)&&(n.tools=t),n},groupFrom:function(e){var t,i,n=this.isGrouping()&&this.store,r=null,s=this.expandoKey,o=null;return n&&(i=n.getGroups(),e.isGroup?e=e.getGroupKey():e.isModel&&(e=i.getGrouper().getGroupString(e)),(r=i.get(e))&&((o=Ext.getExpando(r,s))||(n.isGroupStore&&(i=n.getSource().getGroups()),o={data:i.get(e),list:this},(t=this.getCollapsible())&&(o.collapsed=t.getCollapsed()),o=new Ext.dataview.ListGroup(o),Ext.setExpando(r,s,o)))),o},isGrouping:function(){var e=this.getGrouped()&&this.store,t=!!(e&&e.getGrouper());return this.setGrouping(t),t},isRecordRendered:function(e){var t=this.renderInfo;return!this.infinite||(e.isEntity&&(e=this.store.indexOf(e)),e>=t.indexTop&&e<t.indexBottom)},mapToViewIndex:function(e){var t;return this.infinite&&"number"==typeof e&&(e-=t=this.renderInfo.indexTop),this.callParent([e,t])},scrollToRecord:function(e,t){return this.ensureVisible({record:e,animation:t})},shouldSelectItem:function(e){var t,i=!this.callParent([e]);return i||(t=(t=e.getTarget(this.toolSelector))&&this.el.contains(t)&&Ext.Component.from(t))&&null==(i=t.preventSelection)&&(i="disclosure"===t.type?this.getPreventSelectionOnDisclose():this.getPreventSelectionOnTool()),!i},onBodyResize:function(e,t){var i=t.height,n=t.width;n===this.getVisibleWidth()?this.setVisibleHeight(i):(this.suspendSync=!0,this.setVisibleHeight(this.outerCt.measure("h")),this.suspendSync=!1,this.setVisibleWidth(n),this.refreshScrollerSize())},onItemAdd:function(e,t){return this.infinite&&(e.$dataItem&&this.variableHeights&&e.on("resize","onDataItemResize",this),e.isInner&&e.setTranslatable({type:this.itemTranslationMethod})),this.callParent([e,t])},onItemRemove:function(e,t,i){var n=e.$height,r=e.scrollDock;this.callParent([e,t,i]),r&&n&&(Ext.Array.remove(this.scrollDockedItems[r].items,e),this.adjustScrollDockHeight(r,-n))},onStoreAdd:function(e,t,i){this.syncEmptyState(),this.infinite?this.getVisibleHeight()&&(this.refreshGrouping(),this.resyncOnPaint()):(this.refreshGrouping(),this.setItemCount(e.getCount()),this.syncItemRange(Math.max(0,i-1)))},onStoreRemove:function(e,t,i){var n,r=this.getNavigationModel();this.infinite?(this.getVisibleHeight()&&(this.refreshGrouping(),this.resyncOnPaint()),this.syncEmptyState()):(this.refreshGrouping(),this.callParent([e,t,i])),r.location&&(n=r.location.refresh(),r.setLocation(n))},onStoreUpdate:function(e,t,i,n,r){var s,o,a,l,c,u=this.allPartners;if(r&&r.groupChanged&&this.isGrouping())this.refreshGrouping(),this.syncRows();else if(this.callParent([e,t,i,n,r]),this.partnerManager&&this.isActivePartner()&&null!==(a=this.measurePartners(t)))for(o=0,s=u.length;o<s;++o)c=(l=u[o]).itemFromRecord(t),l.handleItemResize(c,a,!0)},applyCollapsible:function(e){var t=null,i=this.store;return!e||i&&i.isVirtualStore||(t=Ext.clone(this.getCollapseDefaults()),!0!==e&&(t=Ext.merge(t,e)),t.list=this,t=Ext.create(t)),t},updateCollapsible:function(e){},updateGrouped:function(){this.initialized&&(this.refreshGrouping(),this.syncRows())},updateGroupFooter:function(e){var t=this.groupingInfo;t&&(t.footer.config=e)},applyGroupHeader:function(e){var t=e&&e.tpl;return null!=t&&((e=Ext.apply({},e)).tpl=Ext.XTemplate.get(t)),e},updateGroupHeader:function(e){var t=this.groupingInfo;t&&(t.header.config=e)},updateGrouping:function(e){this.toggleCls(this.groupedCls,e)},applyIndexBar:function(e,t){return Ext.updateWidget(t,e,this,"createIndexBar")},updateIndexBar:function(e){e&&this.add(e)},applyItemConfig:function(e,t){var i,n,r=this.callParent([e,t]);return this.getOnItemDisclosure()&&(i={disclosure:!0},n=r.tools,r.tools=n?Ext.merge(i,n):i),r},updateInfinite:function(e){var t=this;t.infinite=e,t.freezeConfig("infinite"),e&&(t.setItemHidden=t.setItemHiddenInfinite,t.el.addCls(t.infiniteCls),t.innerCt.addCls(t.infiniteCls),t.renderInfo={atBegin:!1,atEnd:!1,bottom:0,height:0,top:0,indexBottom:0,indexTop:0},t.getScrollable().on({scope:t,offsetychange:"onOffsetChange",offsetxchange:"onOffsetChange",scroll:"onContainerScroll",scrollstart:"onContainerScrollStart",scrollend:"onContainerScrollEnd"}))},updateMaxItemCache:function(e,t){var i=this.groupingInfo;this.callParent([e,t]),i.header.max=i.footer.max=i.placeholder.max=e},updatePinFooters:function(e){var t=this.pinnedFooter;this.pinFooters=e,this.isConfiguring||(this.setupFooterPinning()?this.infinite&&this.syncPinnedFooter():t&&this.setItemHidden(t,!0))},applyPinnedFooter:function(e,t){var i,n=Ext.updateWidget(t,e,this,"createPinnedFooter");return t||((i=this.getIndexBar())?(i=this.indexOf(i),this.insert(i,n)):this.add(n),this.setItemHidden(n,!0)),n},updatePinnedFooter:function(e){this.pinnedFooter=e,this.setupFooterPinning(),e&&(e.$pinnedFooter=!0)},updatePinHeaders:function(e){var t=this.pinnedHeader;this.pinHeaders=e,this.isConfiguring||(this.setupHeaderPinning()?this.infinite&&this.syncPinnedHeader():t&&this.setItemHidden(t,!0))},applyPinnedHeader:function(e,t){var i=Ext.updateWidget(t,e,this,"createPinnedHeader");return!t&&i&&(this.insert(0,i),this.setItemHidden(i,!0)),i},updatePinnedHeader:function(e){this.pinnedHeader=e,this.setupHeaderPinning(),e&&(e.$pinnedHeader=!0)},updateRowLines:function(e){this.innerCt.toggleCls(this.noRowLinesCls,!1===e)},createScrollable:function(e){var t=this.callParent([e]);return this.infinite&&(t=Ext.apply({type:"virtual",innerElement:this.innerCt},t)),t},applyStore:function(e,t){var i=this.callParent([e,t]);return i&&(i.isVirtualStore?this.setCollapsible(null):this.isGrouping()&&this.getCollapsible()&&(this.store=i=new Ext.dataview.GroupStore({autoDestroy:!0,list:this,source:i}))),i},updateUseSimpleItems:function(e){this.self._updateUseSimpleItemsWarning||(this.self._updateUseSimpleItemsWarning=!0,Ext.log.warn("The Ext.List#useSimpleItems config is deprecated; use itemConfig.xtype instead"));var t=this.getItemConfig();t=Ext.applyIf({xtype:e?"simplelistitem":"listitem"},t),this.setItemConfig(t)},updateVariableHeights:function(e){this.variableHeights=e},privates:{toolSelector:"."+Ext.baseCSSPrefix+"tool:not(."+Ext.baseCSSPrefix+"passive)",infiniteCls:Ext.baseCSSPrefix+"infinite",groupFirstCls:Ext.baseCSSPrefix+"group-first",groupLastCls:Ext.baseCSSPrefix+"group-last",groupedCls:Ext.baseCSSPrefix+"grouped",hasPinnedFooterCls:Ext.baseCSSPrefix+"has-pinned-footer",hasPinnedHeaderCls:Ext.baseCSSPrefix+"has-pinned-header",noRowLinesCls:Ext.baseCSSPrefix+"no-row-lines",stickyCls:Ext.baseCSSPrefix+"sticky",tombstoneCls:Ext.baseCSSPrefix+"tombstone",blockingScroll:0,gapAfter:0,groupingInfo:null,heightSyncs:0,manageHorizontalOverflow:!0,pinnedFooter:null,pinnedHeader:null,lastAdjustedPosition:null,measuredHeight:null,renderInfo:null,suspendSync:!1,onContainerScroll:function(e,t,i){var n,r;this.blockingScroll||(n=this._visibleLeft,r=this.infinite?this.lastAdjustedPosition:this._visibleTop,this.setVisibleLeft(t),this.setVisibleTop(i),this.fireEvent("scroll",this,{x:t,y:i,oldX:n,oldY:r}))},onContainerScrollStart:function(){var e=this.partnerManager;this.variableHeights&&e&&e.claimActivePartner(this),this.toggleHoverCls(!1),this.doHover=!1},onContainerScrollEnd:function(){var e=this.partnerManager;this.doHover=!0,this.toggleHoverCls(!0),this.variableHeights&&e&&e.releaseActivePartner(this)},onDataItemResize:function(e,t,i,n,r){null===n&&null===r||this.handleItemResize(e,i)},onItemDisclosureTap:function(e,t){var i=e.getRecord(),n=this.store.indexOf(i);this.fireAction("disclose",[this,i,e,n,t],"doDisclose")},_onChildTouchCancel:function(e){e.getTarget(this.toolSelector)||this.callParent([e])},_onChildTouchEnd:function(e){e.getTarget(this.toolSelector)||this.callParent([e])},_onChildTouchStart:function(e){e.getTarget(this.toolSelector)||this.callParent([e])},onOffsetChange:function(e){var t,i=this.dataItems,n=i.length;for(t=0;t<n;t++)e.syncOffsets(i[t].getTranslatable())},onRangeAvailable:function(e,t,i){this.syncRows()},onScrollDockItemHide:function(e){var t=e.$height;t&&(this.adjustScrollDockHeight(e.scrollDock,-t),e.$height=null)},onScrollDockItemResize:function(e,t,i){var n=e.$height;n!==i&&(e.$height=i,this.adjustScrollDockHeight(e.scrollDock,i-n))},onScrollDockItemShow:function(e){var t=e.$height;null==t&&(t=this.measureItem(e)),this.adjustScrollDockHeight(e.scrollDock,t)},onStoreGroupChange:function(e){var t;this.initialized&&(e.isGroupStore||(t=e.getAutoDestroy(),e.setAutoDestroy(!1),this.setStore(e),e.setAutoDestroy(t)),this.refreshGrouping(),this.syncRows())},onStoreTotalCountChange:function(){this.getVisibleHeight()&&this.syncRowsToHeight(),this.syncEmptyState()},addDataItem:function(e,t){var i;return i=this.callParent([e,t]),this.infinite&&this.getScrollable().syncOffsets(i.getTranslatable()),i.$height=this.variableHeights?null:this.rowHeight,i},addScrollDockedItem:function(e){this.infinite&&(e.on({hide:"onScrollDockItemHide",resize:"onScrollDockItemResize",show:"onScrollDockItemShow",scope:this}),e.$height=null,this.setItemHidden(e,!0))},adjustContentTop:function(e){var t,i,n,r,s,o=this.dataItems,a=o.length,l=this.renderInfo,c=this.scrollDockedItems;for(t=0;t<a;++t)i=o[t],this.setItemPosition(i,i.$position+e),(n=i.$header)&&this.setItemPosition(n,n.$position+e),(n=i.$footer)&&this.setItemPosition(n,n.$position+e),i.$y0+=e,i.$y1+=e;if(c){if(l.atBegin)for(a=(s=c.start.items).length,t=0;t<a;++t)(r=s[t]).getHidden()||this.setItemPosition(r,r.$position+e);if(l.atEnd)for(a=(s=c.end.items).length,t=0;t<a;++t)(r=s[t]).getHidden()||this.setItemPosition(r,r.$position+e)}},adjustScrollDockHeight:function(e,t){var i=this.scrollDockedItems;(i=i&&i[e])&&(i.height+=t,this.resyncOnPaint())},_doActivePartnerCheck:function(){this.isActivePartner()||Ext.raise("Should not be called by non-active partner")},adjustRenderedRows:function(e,t){this._doActivePartnerCheck();var i,n,r=this,s=r.getBufferSize(),o=r.getMinimumBufferDistance(),a=r.renderInfo,l=a.indexTop,c=a.indexBottom,u=r.dataItems.length,d=r.getVisibleHeight(),h=r.store.getCount(),f=r.recordIndexByPosition(e),g=r.recordIndexByPosition(e+d);if(t<e){if(o<=c-g)return}else if(o<=f-l)return;i=f-(s>>>1),0<(n=(i=Math.max(0,Math.min(i,h-u)))-l)&&n<u?r.rollDown(n):n<0&&-n<u?r.rollUp(-n):(n||r.refreshing)&&r.teleport(e)},bindStore:function(e){var t=new(e.getModel());e.isBufferedStore&&Ext.raise("Did you mean to use Ext.data.virtual.Store? (Ext.data.BufferedStore is not supported)"),e.isVirtualStore&&!this.infinite&&Ext.raise("Virtual stores require infinite:true"),this.dataRange=this.store.createActiveRange({prefetch:!0,callback:"onRangeAvailable",scope:this}),(this.tombstoneRec=t).tombstone=!0,this.getVisibleHeight()&&this.syncRowsToHeight()},bisectPosition:function(e){var t,i,n=this.dataItems,r=0,s=n.length-1;if((e=e||0)<n[0].$y0)return-1;for(;r<=s;){if(e===(i=n[t=r+s>>>1].$y0))return t;i<e?r=1+t:s=t-1}return r&&e<n[r-1].$y1&&--r,r},blockAndScrollTo:function(e,t){var i=this,n=i.getScrollable();return n.getPosition().y!==e&&(n.on({single:!0,priority:-1e3,scroll:function(){--i.blockingScroll}}),++i.blockingScroll),n.scrollTo(null,e,t)},changeHeaderFooter:function(e,t,i,n){var r,s=i.name,o=e[s]||null,a=this.infinite;(r=(n=n&&i.config)&&i.map[t])?(o||((o=i.unused.pop())||(o=this[i.creator]()),o=this.reorderItem(o,e,i.offset)),o.$dataRow=e,o.setGroup(r)):o&&(!this.removeGroupItem(o,i,!n)&&a&&(this.setItemHidden(o,!0),this.reorderItem(o)),o=null),e[s]=o},changeItem:function(e,t){var i=this.callParent([e,t]),n=i.item;return this.infinite&&this.variableHeights&&(n.$height=null),i},changeItemGrouping:function(e){var t,i=this.isGrouping(),n=this.groupingInfo,r=e.item,s=e.recordIndex;this.changeHeaderFooter(r,s,n.header,i),i&&r.isListItemPlaceholder&&(t=this.getCollapsible())&&(i=t.getFooter()),this.changeHeaderFooter(r,s,n.footer,i)},changeItemIsFirst:function(e){if(e.isFirstChanged){var t,i,n=this.scrollDockedItems;if(this.callParent([e]),n&&!e.isFirst&&this.infinite)for(i=(n=n.start.items).length,t=0;t<i;++t)this.setItemHidden(n[t],!0)}},changeItemIsLast:function(e){if(e.isLastChanged){var t,i,n=this.scrollDockedItems;if(this.callParent([e]),n&&!e.isLast&&this.infinite)for(i=(n=n.end.items).length,t=0;t<i;++t)this.setItemHidden(n[t],!0)}},changeItemRecord:function(e){var t=e.itemClasses,i=this.tombstoneCls;e.record?(delete t[i],this.syncItemRecord(e)):(t[i]=1,this.syncItemRecord(e,this.tombstoneRec))},changeItemStuck:function(e){var t=e.item,i=e.record,n=i&&this.stickyItemsByRecordId[i.internalId]||null;t.$sticky?i!==t.getRecord()&&this.dislodgeItem(t,e,n):n&&(this.dislodgeItem(t,e,n),this.removeDataItem(t))},clearItemCaches:function(){var e=this.groupingInfo,t=e.header.unused,i=e.footer.unused,n=e.placeholder.unused;this.callParent(),Ext.destroy(t,i,n),t.length=i.length=n.length=0},constrainStickyItem:function(e){var t,i=this,n=i.pinnedFooter,r=i.pinnedHeader,s=!1,o=i.renderInfo,a=e.$recordIndex,l=i.measureItem(e,i),c=e.$sticky,u=c.pos,d=i.getVisibleTop(),h=d+i.getVisibleHeight()-l,f=u;return c.floated?(i.setItemHidden(e,!1),null):(r&&(d+=i.measureItem(r)),n&&(h-=i.measureItem(n)),a<o.indexTop?(t=!0,u=d,s="top"):a>=o.indexBottom?(t=!0,u=h,s="bottom"):u<d?(u=d,s="top"):h<u&&(u=h,s="bottom"),c.autoPin?(f=u,e.isDataViewPinnable&&e.setPinned(s)):t&&i.setItemHidden(e,!0),f)},createGroupFooter:function(){var e=this.getGroupFooter();return"string"==typeof e&&(e={xtype:e}),(e=Ext.apply({$dataItem:"footer"},e)).$initParent=e.ownerCmp=e.list=this,e},createGroupHeader:function(){var e,t=this.getGroupHeader(),i=this.getCollapsible(),n=i&&i.getTool();return"string"==typeof t&&(t={xtype:t}),(t=Ext.apply({$dataItem:"header"},t)).$initParent=t.ownerCmp=t.list=this,n&&(n=Ext.clone(n),!(e=t.tools)||Ext.isArray(e)?(t.tools=e=e?e.slice():[],e.push(n)):(t.tools=e=Ext.apply({},e),e[n.itemId]=n)),t},createGroupPlaceholder:function(){var e=this.getGroupPlaceholder();return"string"==typeof e&&(e={xtype:e}),(e=Ext.apply({$dataItem:"placeholder"},e)).$initParent=e.ownerCmp=e.list=this,this.variableHeights||(e.$height=this.placeholderHeight),e},createPinnedHeaderFooter:function(e){return Ext.merge({translatable:{type:"csstransform"},isPinnedItem:!0,list:this},e)},dislodgeItem:function(e,t,i){var n=this.dataItems,r=e.$sticky;return i?i.$sticky&&!i.$sticky.dislodged&&this.dislodgeItem(i,{itemIndex:n.indexOf(i)}):(i=this.acquireItem(this.indexOf(e)),n.pop()),this.dataItems[t.itemIndex]=t.item=i,i.$footer=e.$footer,i.$header=e.$header,i.$position=null,e.$footer=e.$header=null,r&&(r.dislodged=!0),(r=i.$sticky)&&(r.dislodged=!1),i},doClear:function(){var e=this.groupingInfo,t=e.header.unused,i=e.footer.unused,n=e.placeholder.unused;Ext.destroy(t,i,n),i.length=t.length=n.length=0,this.infinite?(this.setItemCount(0),this.lastAdjustedPosition=null,this.setVisibleTop(0),this.getScrollable().scrollTo(null,0),this.refreshScrollerSize(),this.syncEmptyState()):this.callParent()},doDisclose:function(e,t,i,n,r){var s,o=e.getOnItemDisclosure();o&&!0!==o&&(o.handler&&(s=o.scope,o=o.handler),Ext.callback(o,s,[t,i,n,r],0,e))},doRefresh:function(e){var t,i,n,r,s=this,o=s.getScrollable(),a=s.store;s.infinite?(i=++s.refreshCounter,s.refreshGrouping(),a.getCount()?(s.hideEmptyText(),1<i&&o&&(e?(n=s.saveFocusState(),s.blockAndScrollTo(0,!1),s.lastAdjustedPosition=null,s.refreshing=!0,s.syncRowsToHeight(!1),s.resetVisibleTop(),s.setVisibleTop(0),t=!0,s.refreshing=!1,n()):r=o.getPosition().y)):s.dataItems.length&&!a.hasPendingLoad()&&s.doClear(),t||(s.resync(!0),null!=r&&r!==o.getPosition().y&&o.scrollTo(null,r))):(s.refreshGrouping(),s.callParent([e]))},ensureVisibleScroll:function(e){var t,i,n,r=this,s=e.recordIndex,o=e.item||(e.item=r.itemFromRecord(s)),a=r.getScrollable();return o?a.ensureVisible(o.el,{align:e.align,animation:e.animation,highlight:e.highlight,x:!1}):(i=a.getSize(),n=Math.floor((i?i.y:0)*(s/r.store.getCount())),e.animation=!1,r.nextTeleportTopIndex=s,r.setVisibleTop(n),delete r.nextTeleportTopIndex,t=r.blockAndScrollTo(n,!1),e.item=r.itemFromRecord(s),t.then(function(){return r.destroyed||(e.item=r.itemFromRecord(s)),e}))},getCacheForItem:function(e){var t=e.$dataItem;return"record"===t?this.itemCache:this.groupingInfo[t]},getItemForRecord:function(e,t){var i,n,r=this.dataItems[e],s=t&&!!t.$collapsedGroupPlaceholder,o=this.groupingInfo.placeholder,a=r.el.dom;return s!==!!r.isListItemPlaceholder&&(i={itemIndex:e},s?((n=o.unused.pop())||(n=this.createGroupPlaceholder()),(n=this.insert(e,n)).setGroup(this.groupFrom(t)),a.parentNode.insertBefore(n.el.dom,a),this.dislodgeItem(r,i,n),this.removeDataItem(r),r=n):(n=r,r=this.dislodgeItem(n,i),a.parentNode.insertBefore(r.el.dom,a),this.removeGroupItem(n,o))),r},getItemFromPoint:function(e,t){var i,n;return this.infinite?(n=Math.max(0,Math.min(t,this.getScrollable().getSize().y)),i=this.recordIndexByPosition(n),this.dataItems[i-this.renderInfo.indexTop]):this.callParent([e,t])},getItemTop:function(e){return e=e.$header||e,this.infinite?e.$y0:this.getScrollable().getEnsureVisibleXY(e.element,{align:{y:"start?"}}).y},getPositionedItemTarget:function(e){return e&&"inner"===e.layer?this.callParent([e]):this.bodyElement},getRecordIndexFromPoint:function(e,t){return this.infinite?this.recordIndexByPosition(Math.max(0,Math.min(t,this.getScrollable().getSize().y))):this.callParent([e,t])},getRenderPartners:function(){var e=this.allPartners;return e&&this.variableHeights||(e=this.selfPartner),e},getRenderTarget:function(){return this.innerCt},getScrollableClientRegion:function(){return this.callParent().adjust(this.getPinnedHeaderHeight()||0,0,-(this.getPinnedFooterHeight()||0),0)},getScrollerTarget:function(){return this.outerCt},getStoreChangeSyncIndex:function(e){return this.isGrouping()?Math.max(0,e-1):e},handleItemResize:function(e,t,i){var n,r,s,o,a=this.dataItems,l=this.renderInfo,c=e.$dataRow||e;t+=e.el.getMargin("tb"),!i&&e.$height===t||(e.$height=t,-1<(s=a.indexOf(c))&&(o=l.indexTop&&l.indexBottom>=this.store.getCount()?(n=!0,r=s+1,c.$y1):(r=a.length-s,c.$y0),this.positionItems(o,n,r)))},isActivePartner:function(){return!this.variableHeights||!this.partnerManager||this.partnerManager.isActivePartner(this)},itemFromRecord:function(e){var t,i,n=this.store;return n&&(i=this.infinite?(t=e.isEntity?n.indexOf(e):e,this.dataItems[t-this.renderInfo.indexTop]):this.callParent([e])),i||null},measureItem:function(e,t){var i,n=e.$height;return null==n&&(!this.variableHeights&&t&&(n=t.rowHeight)||(n=(i=e.el.measure("h"))+e.el.getMargin("tb"),t&&(t.rowHeight=n)),this.setItemHeight(e,n),e.$measured=i),n},measureItems:function(){var e,t,i,n,r,s,o,a=this,l=a.scrollDockedItems,c=a.dataItems,u=c.length,d=a.partnerManager&&a.isActivePartner(),h=a.hasItemVm,f=a.placeholderHeight;if(a.variableHeights)for(h&&a.lookupViewModel().notify();0<u--;)s=c[u],d?a.measurePartners(s):(null==s.$height&&(s.$height=a.measureItem(s)),(e=s.$header)&&null==e.$height&&(e.$height=a.measureItem(e)),(e=s.$footer)&&(e.$height=a.measureItem(e)));else if(u&&(!(o=a.rowHeight)||null===f))for(h&&a.lookupViewModel().notify(),i=0;i<u;++i)(s=c[i]).isListItemPlaceholder?(null===f&&(s.$height=null,a.placeholderHeight=f=a.measureItem(s)),s.$height=f):(o||(s.$height=null,a.rowHeight=o=a.measureItem(s)),s.$height=o);if(l){for(t=0,u=(r=l.start.items).length;0<u--;)(n=r[u]).getHidden()||(t+=n.$height||a.measureItem(n));for(l.start.height=t,t=0,u=(r=l.end.items).length;0<u--;)(n=r[u]).getHidden()||(t+=n.$height||a.measureItem(n));l.end.height=t}},measurePartners:function(e,t){var i,n,r,s,o,a,l=this.allPartners,c=l.length,u=new Array(c),d=0,h=0,f=!0;for(e.isDataViewItem&&(e=e.getRecord()),this.hasItemVm&&!t&&this.lookupViewModel().notify(),o=0;o<c;++o)i=l[o].itemFromRecord(e),(u[o]=i).setMinHeight(null);for(o=0;o<c;++o)s=(i=u[o]).$height,delete i.$height,n=l[o].measureItem(i),r=i.$measured,a=a||s!==n,0===o&&(d=n,h=r),n!==d&&(f=!1,d<n&&(d=n,h=r));if(!f)for(o=0;o<c;++o)(i=u[o]).setMinHeight(h),l[o].setItemHeight(i,d);return a?h:null},onInnerCtResize:function(){this.syncVerticalOverflow()},positionItems:function(e,t,i){var n,r,s,o,a,l,c=this.renderInfo,u=this.dataItems,d=u.length,h=this.scrollDockedItems,f=this.getRenderPartners(),g=f.length;for(n=0;n<g;++n)l=f[n],t?l.positionItemsBottomUp(e,i):l.positionItemsTopDown(e,i);for(d?(c.top=u[0].$y0,c.bottom=u[d-1].$y1):c.top=c.bottom=h&&h.start.height||0,c.height=c.bottom-c.top,n=0;n<g;++n){if(l=f[n],c.atEnd&&(a=c.bottom,a+=l.gapAfter,h=l.scrollDockedItems))for(d=(o=h.end.items).length,r=0;r<d;++r)(s=o[r]).getHidden()||(a+=l.setItemPosition(s,a));l.refreshScrollerSize()}},positionItemsBottomUp:function(e,t){var i,n,r,s,o,a,l,c=this,u=c.groupingInfo,d=u.footer,h=u.header,f=c.renderInfo,g=c.dataItems,p=c.scrollDockedItems,m=e,x=f.indexTop;for(r=t;0<r--;)a=m,(i=(o=g[r]).$footer)&&(null==(n=i.$height)&&(n=c.measureItem(i,d)),m-=n,c.setItemPosition(i,m)),m-=o.$height,o.$sticky?(o.$sticky.pos=m,null!==(l=c.constrainStickyItem(o))&&c.setItemPosition(o,l)):c.setItemPosition(o,m),(i=o.$header)&&(null==(n=i.$height)&&(n=c.measureItem(i,h)),m-=n,c.setItemPosition(i,m)),m-=c.gapMap[r+x]||0,o.$y0=m,o.$y1=a;if(f.atBegin&&p)for(r=(p=p.start.items).length;0<r--;)(s=p[r]).getHidden()||(m-=s.$height,c.setItemPosition(s,m));(m<0||0<m&&0===f.indexTop)&&c.adjustContentTop(-m)},positionItemsTopDown:function(e,t){var i,n,r,s,o,a,l=this,c=l.groupingInfo,u=c.footer,d=c.header,h=l.dataItems,f=h.length,g=l.scrollDockedItems,p=l.renderInfo.indexTop,m=e;if(t=t||f,l.renderInfo.atBegin&&t===f)if(g)for(g=g.start.items,n=m=0;n<g.length;++n)(r=g[n]).getHidden()||(m+=l.setItemPosition(r,m));else m&&!Object.keys(l.gapMap).length&&Ext.raise("Top-most item should be positioned at 0 not "+m);for(n=f-t;n<f;++n)s=h[n],o=m,m+=l.gapMap[p+n]||0,(i=s.$header)&&(null==i.$height&&l.measureItem(i,d),m+=l.setItemPosition(i,m)),s.$sticky?(s.$sticky.pos=m,null!==(a=l.constrainStickyItem(s))&&(m+=l.setItemPosition(s,a))):m+=l.setItemPosition(s,m),(i=s.$footer)&&(null==i.$height&&l.measureItem(i,u),m+=l.setItemPosition(i,m)),s.$y0=o,s.$y1=m},refreshGrouping:function(){var e,t=this,i=t.isGrouping();t.infinite&&((e=i&&t.getPinFooters()?t.getPinnedFooter():t.pinnedFooter)&&t.setItemHidden(e,!0),(e=i&&t.getPinHeaders()?t.getPinnedHeader():t.pinnedHeader)&&t.setItemHidden(e,!0)),t.refreshGroupIndices(),t.syncIndexBar()},refreshGroupIndices:function(){var e,t,i,n,r,s,o,a,l=this.store,c=this.isGrouping()?l.getGroups():null,u=this.groupingInfo,d=u.footer,h=u.header,f=c&&c.length,g=null;if(f){for(h.map=o={},h.indices=r=[],d.map=i={},d.indices=t=[],a=0;a<f;++a)n=this.groupFrom(s=c.getAt(a)),e=l.indexOf(s.first()),n.previousGroup=g,r.push(e),o[n.beginIndex=e]=n,g&&(g.nextGroup=n,t.push(e-1),i[(g.endIndex=e)-1]=g),g=n;n.nextGroup=null,n.endIndex=a=l.getCount(),t.push(--a),i[a]=n}else h.map=h.indices=d.map=d.indices=null},refreshScrollerSize:function(){var e,t,i,n,r=this;r.store&&r.infinite&&(r.syncContentTop(),t=r.renderInfo,i=r.scrollDockedItems,n=r.store.getCount(),e=t.bottom+(n-t.indexBottom)*r.rowHeight,(i=i&&i.end)&&(e+=i.height),r.getScrollable().setSize({x:null,y:e}),r.setVerticalOverflow(e>r.getVisibleHeight()),r.refreshPinnedAreas())},reorderItem:function(e,t,i){i=i||0;var n=this.innerItems,r=n.length,s=null==t?r:t.isWidget?n.indexOf(t)+i:t,o=this.items,a=s<r?o.indexOf(n[s]):o.length;return e.isWidget&&this.infinite&&!this.maintainChildNodes&&e.parent===this?(o.insert(a,e),-1<(a=n.indexOf(e))&&(n.splice(a,1),a<s&&--s),s<r?n.splice(s,0,e):n.push(e)):e=this.insert(a,e),e},recordIndexByPosition:function(e){var t=this.renderInfo,i=t.top,n=t.bottom,r=t.indexTop;return e<i?Math.floor(e/i*r):e<n?r+this.bisectPosition(e):(e-=n,Math.min(t.indexBottom+Math.floor(e/this.rowHeight),this.store.getCount()-1))},removeDataItem:function(e,t){var i=e.$header,n=e.$footer,r=this.groupingInfo;return i&&this.removeGroupItem(i,r.header,t),n&&this.removeGroupItem(n,r.footer,t),e.$header=e.$footer=null,this.callParent([e,t])},removeGroupItem:function(e,t,i){var n=this.removeCachedItem(e,i,t,this.infinite);return n||(e.$dataRow=null,e.setGroup&&e.setGroup(null)),n},resync:function(e){var t=this.outerCt.measure("h");this.resyncListener=null,t&&(t===this.getVisibleHeight()?this.syncRowsToHeight(e):this.setVisibleHeight(t))},resyncOnPaint:function(){this.whenVisible("resync",[!0])},rollDown:function(e){this._doActivePartnerCheck();var t,i,n,r,s,o,a,l=this.dataItems,c=this.renderInfo,u=c.indexBottom,d=l[l.length-1],h=this.innerItems.indexOf(d)+1,f=this.getRenderPartners(),g=f.length;for(d.$footer&&++h,this.setTopRenderedIndex(c.indexTop+e),r=0;r<g;++r)for(l=(o=f[r]).dataItems,n=h,s=0;s<e;s++)a=l.shift(),l.push(a),t=(a.$header?1:0)+(a.$footer?1:0),n-=t-=((a=o.changeItem(-1,u+s).item).$header?1:0)+(a.$footer?1:0),(i=a.$header)&&o.reorderItem(i,n),o.reorderItem(a,n),(i=a.$footer)&&o.reorderItem(i,n);this.measureItems(),this.positionItems(c.bottom,!1,e)},rollUp:function(e){this._doActivePartnerCheck();var t,i,n,r,s,o,a=this.dataItems,l=this.renderInfo,c=l.indexTop,u=a[0],d=this.innerItems.indexOf(u),h=this.getRenderPartners(),f=h.length;for(u.$header&&--d,this.setTopRenderedIndex(c-e),--c,n=0;n<f;++n)for(a=(s=h[n]).dataItems,i=d,r=0;r<e;r++)o=a.pop(),a.unshift(o),(t=(o=s.changeItem(0,c-r).item).$footer)&&s.reorderItem(t,i),s.reorderItem(o,i),(t=o.$header)&&s.reorderItem(t,i);this.measureItems(),this.positionItems(l.top,!0,e)},setGaps:function(e){e=e||{},Ext.Object.equals(this.gapMap,e)||(this.gapMap=e,this.gapAfter=this.gapMap[this.store.getCount()]||0,this.syncRowsToHeight(!0))},setItemHiddenInfinite:function(e,t){t?e.$hidden||(e.$hidden=!0,e.$position=null,e.translate(0,-1e4)):e.$hidden=!1},setItemPosition:function(e,t){return e.$hidden&&this.setItemHidden(e,!1),e.$position!==t&&(e.$position=t,e.translate(null,t)),e.$height},setupFooterPinning:function(){return this.setupGroupPinning(this.getPinFooters(),this.pinnedFooter,this.hasPinnedFooterCls,"setPinnedFooterHeight")},setupGroupPinning:function(e,t,i,n){var r=e&&!!t;return r?t.setScrollable({x:!1,y:!1}):this[n](0),this.el.toggleCls(i,r),r},setupHeaderPinning:function(){return this.setupGroupPinning(this.getPinHeaders(),this.pinnedHeader,this.hasPinnedHeaderCls,"setPinnedHeaderHeight")},shouldHideDisclosure:function(e){var t,i;return this.getOnItemDisclosure()&&(i=!(t=this.getDisclosureProperty())||!1!==e.data[t]),!i},stickItem:function(e,t){var i,n=e.$sticky,r=e.getRecord(),s=this.stickyCls,o=this.stickyItems,a=this.stickyItemsByRecordId;this.infinite||Ext.raise("Only infinite lists support sticky items"),t?(n||(o.push(e),(a[r.internalId]=e).addCls(s),e.$sticky=n={pos:e.$position}),Ext.apply(n,t),null!==(i=this.constrainStickyItem(e))&&this.setItemPosition(e,i)):n&&(Ext.Array.remove(o,e),delete a[r.internalId],e.removeCls(s),e.$sticky=null,n.autoPin&&e.isDataViewPinnable&&e.setPinned(!1),n.floated&&delete e.$position,n.dislodged?this.removeDataItem(e):this.setItemPosition(e,n.pos))},syncContentTop:function(){var e,t=this.renderInfo,i=this.getVisibleTop(),n=this.getVisibleHeight(),r=this.getMinimumBufferDistance()*this.rowHeight;t.atEnd||0<=(e=i+n-(t.bottom-r))&&this.getScrollable().scrollBy(null,-e,!1)},syncGroupCollapse:function(e,t){this.store.refreshFromSource(),this.fireEvent(t?"groupcollapse":"groupexpand",this,e)},syncIndexBar:function(){var e=this.getIndexBar(),t=this.store;e&&e.setHidden(this.getEmptyState()||!t||!t.getGrouper())},syncPinnedFooter:function(e){var t,i,n,r,s,o,a,l,c,u=this,d=u.dataItems,h=d.length,f=u.pinnedFooter,g=u.renderInfo,p=u.pinFooters&&f&&h&&u.isGrouping(),m=f,x=g.indexTop,y=u.scrollDockedItems;e=e||u.getVisibleTop(),p&&(o=u.getScrollable().getSize().y,(m=(t=e+u.getVisibleHeight())<=u.renderInfo.top||t>=o-(y?y.end.height:0)-u.gapAfter)||(a=u.bisectPosition(t-1)+x,i=(n=u.groupingInfo.footer).indices,s=Ext.Number.binarySearch(i,a),f.setGroup(n.map[i[s]]),a===i[s]&&d[a-x].$y1===t?m=!0:s?(s=i[s-1])<x?l=0:(l=d[s-x].$y1,(c=u.gapMap[s+1]||0)&&((m=t-l<c)||(l+=c))):l=y?y.start.height:0,m||(l=(l=t-l)<(r=u.measureItem(f))?r-l:0,u.setItemPosition(f,l)))),m?u.setItemHidden(f,!0):f&&u.syncPinnedHorz(f)},syncPinnedHeader:function(e){var t,i,n,r,s,o,a,l,c,u=this,d=u.dataItems,h=d.length,f=u.pinnedHeader,g=u.renderInfo,p=u.pinHeaders&&f&&h&&u.isGrouping(),m=f,x=g.indexTop,y=u.scrollDockedItems;e=e||u.getVisibleTop()||0,p&&((m=y&&e<=y.start.height||(s=u.bisectPosition(e))<0||h<=s)||(s+=x,(t=(i=u.groupingInfo.header).indices)[r=Ext.Number.binarySearch(t,s)]!==s&&--r,a=t[r],f.setGroup(i.map[a]),x<=a&&(c=d[a-x],m=(l=u.gapMap[a]||0)?e-c.$y0<l:c.$y0===e),m||(++r<t.length?o=(r=t[r]-x)<h?d[r].$y0-e:0:m=(o=g.bottom-e)<=0,m||(n=u.measureItem(f),o=o&&o<n?o-n:0,u.setItemPosition(f,o||0))))),m?u.setItemHidden(f,!0):f&&u.syncPinnedHorz(f)},syncPinnedHorz:function(e){var t=e.getScrollable();e.el.setWidth(this.getScrollable().getClientSize().x),e.isItemHeader&&this.getHorizontalOverflow()&&e.setContentWidth(this.getInnerWidth()),this.getHorizontalOverflow()&&!1!==this.getScrollable().isPrimary&&t.scrollTo(this.getVisibleLeft(),null)},syncRows:function(e){var t,i,n,r,s,o,a,l,c,u,d,h=this,f=h.renderInfo,g=h.scrollDockedItems,p=h.getRenderPartners();if(h.infinite){if(h.isActivePartner()){if(o=h.getMaxHeight(),r=h.dataItems.length,n=f.indexTop,c=p.length,r)for(e?i=f.bottom:(i=f.top,!n&&g&&(i=g.start.height)),t=0;t<c;++t)for(u=0;u<r;++u)p[t].changeItem(u,n+u);for(h.measureItems(),h.positionItems(i,e,r),t=0;t<c;++t)(d=p[t]).pinnedHeader&&d.syncPinnedHeader(),d.pinnedFooter&&d.syncPinnedFooter(),d.stickyItems.length&&d.syncStickyItems(),o&&(s=d.innerCt,a=f.bottom+d.gapAfter,(g=d.scrollDockedItems)&&(a+=g.end.height),l=s.measure("h"),l=d.el.measure("h")-l+d.el.getBorderWidth("tb"),l=Math.min(o-l,a),d.setInnerCtHeight(l))}}else h.syncItemRange()},syncRowsToHeight:function(e){var t,i,n,r,s,o,a,l=this,c=l.getBufferSize(),u=l.infinite,d=l.getItemCount(),h=l.rowHeight||24,f=!l.heightSyncs++,g=l.renderInfo,p=g&&g.indexBottom,m=l.store&&l.store.getCount(),x=l.getMaxHeight()||l.getVisibleHeight();if(l.isActivePartner()&&(n||l.store)){for(n=u?(n=Math.ceil(x/h)+c,Math.min(n,m)):m,s=(t=l.getRenderPartners()).length,r=0;r<s;++r)a=(o=t[r]).isActivePartner(),o.setItemCount(n),(f&&l.store.isVirtualStore||d!==n||m<p)&&(u&&a&&(i=Math.min(m-n,g.indexTop),(i=Math.max(0,i))===o.getTopRenderedIndex()?o.updateTopRenderedIndex(i):o.setTopRenderedIndex(i)),d||o.refreshGrouping(),(e=!1!==e)&&m<p&&a&&(g.top=g.indexTop*l.rowHeight));(e||f)&&l.syncRows()}},syncStickyItems:function(){var e,t,i,n=this.stickyItems,r=n.length;for(e=0;e<r;++e)null!==(i=this.constrainStickyItem(t=n[e]))&&this.setItemPosition(t,i)},doSyncVerticalOverflow:function(){var e=this.getScrollable();this.setVerticalOverflow(e.getSize().y>e.getClientSize().y)},resetVisibleTop:function(){this.lastAdjustedPosition=this._visibleTop=null},setItemHeight:function(e,t){e.$height=t,e.$pinnedFooter?this.setPinnedFooterHeight(t):e.$pinnedHeader&&this.setPinnedHeaderHeight(t)},teleport:function(e){var t,i,n=this,r=n.getScrollable().getSize(),s=n.renderInfo,o=n.dataItems.length,a=n.store.getCount(),l=a-o,c=n.getBufferSize(),u=n.scrollDockedItems,d=n.nextTeleportTopIndex;n._doActivePartnerCheck(),(i=void 0!==d?d:Math.floor(e/r.y*a))<l?(i-=c=Math.min(i,c>>>1),s.top=i?Math.max(0,e-n.rowHeight*c):u?u.start.height:0):(t=!0,i=l,s.bottom=r.y-n.gapAfter,u&&(s.bottom-=u.end.height)),n.setTopRenderedIndex(i),n.syncRows(t)},toggleHoverCls:function(e){var t,i,n,r,s=this.mouseOverItem,o=this.hoveredCls,a=this.partners;if(this.callParent([e]),a&&s)for(r=s.getRecord(),i=0,t=a.length;i<t;++i)(n=a[i].itemFromRecord(r))&&n.toggleCls(o,e)},setItemSelection:function(e,t){var i,n,r,s,o,a=this.partners||[];if(this.callParent([e,t]),this.isActivePartner())for(n=0,i=e.length;n<i;n++)for(r=0,o=a.length;r<o;++r)s=a[r].getSelectable(),t?s.setSelectedRecord(e[n]):s.deselect(e[n],!0)},syncItemRecord:function(e,t){var i,n,r,s=this.partners||[],o=e.item.getRecord();for(i=this.callParent([e,t]),n=0,r=s.length;n<r;++n)if(s[n].getSelectable().isRowSelected(o)){this.getSelectable().setSelectedRecord(o);break}return i},traverseItem:function(e,t){var i,n=this.dataItems,r=this.renderInfo;return e&&this.infinite&&(t<0?e!==n[0]||e.isFirst||(i=r.indexTop):e!==n[n.length-1]||e.isLast||(i=r.indexBottom+1)),i?i-1:this.callParent([e,t])},updateEmptyState:function(e,t){this.callParent([e,t]),this.syncIndexBar()},updateHorizontalOverflow:function(e){var t=this.getScrollable();this.manageHorizontalOverflow&&(t.setX(e),e||t.scrollTo(0,null))},updateInnerCtHeight:function(e){this.innerCt.setHeight(e)},updateInnerWidth:function(e){var t,i=this,n=i.innerCt,r=i.pinnedHeader,s=i.pinnedFooter,o=0;null==e?(n.setStyle("width",""),i.setHorizontalOverflow(!1)):(n.setStyle("width",e+"px"),null!=(t=i.getVisibleWidth())&&(i.getVerticalOverflow()&&(o=i.getScrollable().getScrollbarSize().width),i.setHorizontalOverflow(t<e+o))),i.refreshScrollerSize(),r&&i.syncPinnedHorz(r),s&&i.syncPinnedHorz(s)},updateItemCount:function(e,t){var i=this.infinite&&this.renderInfo;this.callParent([e,t]),!e&&i&&(i.atBegin=i.atEnd=!0)},updatePinnedFooterHeight:function(e){this.destroyed||this.destroying||this.fireEvent("pinnedfooterheightchange",this,e)},updatePinnedHeaderHeight:function(e){this.destroyed||this.destroying||this.fireEvent("pinnedheaderheightchange",this,e)},updateTopRenderedIndex:function(e){var t,i=this.store,n=this.renderInfo,r=e+this.dataItems.length;(i.isLoaded()||i.getAutoLoad())&&(n.atBegin=!e,n.atEnd=r===i.getCount(),(n.indexTop=e)===(n.indexBottom=r)&&i.isVirtualStore&&(r=e+i.getPageSize(),null!==(t=i.getTotalCount())&&(r=Math.min(t,r))),this.dataRange.goto(e,r))},updateVerticalOverflow:function(e,t){var i,n,r,s=this.items.items,o=s.length;if(this.infinite){for(r=this.getScrollable().getScrollbarSize().reservedWidth,i=0;i<o;++i)(n=s[i]).isPinnedItem&&n.el.setStyle("width",r);this.syncPinnedHeader(),this.syncPinnedFooter(),null!=t&&e!==t&&this.updateVisibleWidth(this.bodyElement.getWidth())}this.fireEvent("verticaloverflowchange",this,e)},updateVisibleHeight:function(e,t){this.infinite?this.store&&this.syncRowsToHeight():this.syncVerticalOverflow(),this.fireEvent("visibleheightchange",this,e,t)},updateVisibleLeft:function(){this.infinite&&!this.suspendSync&&this.refreshPinnedAreas()},updateVisibleTop:function(e,t){var i,n,r,s,o;if(this.isActivePartner()&&this.infinite)for(t=this.lastAdjustedPosition,(i=this.dataItems.length&&(null==t||Math.abs(e-t)>this.rowHeight))&&(this.lastAdjustedPosition=e,this.adjustRenderedRows(e,t)),r=0,n=(o=this.getRenderPartners()).length;r<n;++r)s=o[r],i&&(s.lastAdjustedPosition=e),s.refreshPinnedAreas(e)},updateVisibleWidth:function(e){var t=this.getInnerWidth(),i=0;null!=t&&(this.getVerticalOverflow()&&(i=this.getScrollable().getScrollbarSize().width),this.setHorizontalOverflow(e<t+i))},refreshPinnedAreas:function(e){this.syncPinnedHeader(e),this.syncPinnedFooter(e),this.stickyItems.length&&this.syncStickyItems()}}},function(e){var t=e.prototype,i=t._itemChangeHandlers=t._itemChangeHandlers.slice();i.unshift("changeItemStuck"),i.push("changeItemGrouping")}),Ext.define("Ext.theme.material.dataview.List",{override:"Ext.dataview.List",config:{rowLines:!1}}),Ext.define("Ext.dataview.BoundListLocation",{extend:Ext.dataview.Location,next:function(e){for(var t=this.nextItem(e),i=t&&t.get();t&&(!i||!t.record);){if(t.equals(this))return;i=(t=t.nextItem(e))&&t.get()}return t},previous:function(e){for(var t=this.previousItem(e),i=t&&t.get();t&&(!i||!t.record);){if(t.equals(this))return;i=(t=t.previousItem(e))&&t.get()}return t}}),Ext.define("Ext.dataview.BoundListNavigationModel",{extend:Ext.dataview.NavigationModel,alias:"navmodel.boundlist",config:{navigateOnSpace:!0},locationClass:"Ext.dataview.BoundListLocation",privates:{getKeyNavCfg:function(e){var t,i=this;if(!1!==i.keyboard&&(t=(e.ownerField||e).getFocusEl()))return{target:t,eventName:"keydown",defaultEventAction:"stopEvent",esc:i.onKeyEsc,up:i.onKeyUp,down:i.onKeyDown,right:i.onKeyRight,left:i.onKeyLeft,pageDown:i.onKeyPageDown,pageUp:i.onKeyPageUp,home:i.onKeyHome,end:i.onKeyEnd,tab:i.onKeyTab,space:i.onKeySpace,enter:i.onKeyEnter,A:{ctrl:!0,handler:i.onSelectAllKeyPress},priority:1001,scope:i}},getViewListeners:function(e){var t=this.callParent([e]);return t.childtouchstart="onChildTouchStart",t.childTap="onChildTap",t},doFocus:Ext.privateFn,handleLocationChange:function(e,t){var i=e.sourceElement,n=this.getView().ownerField;i&&n&&n.inputElement.dom.setAttribute("aria-activedescendant",i.id),this.callParent([e,t])},onChildTouchStart:function(e,t){var i=t.event;"touch"!==i.pointerType&&i.preventDefault()},onChildTap:function(e,t){var i,n=t.event;e.destroyed||("touch"===n.pointerType&&n.preventDefault(),i=this.createLocation(t.item),this.location&&this.location.equals(i)?this.onNavigate(n):this.setLocation(i,{event:t.event,animation:!0})),"touch"===n.pointerType&&n.stopEvent()},onChildTrigger:Ext.privateFn,onKeyLeft:function(){return!0},onKeyRight:function(){return!0},onKeySpace:function(e){return this.getNavigateOnSpace()&&(e.preventDefault(),this.onNavigate(e)),!0},onKeyEsc:function(){var e=this.getView(),t=e.ownerField;if(!t||!e.isVisible())return!0;t.collapse()},onKeyTab:function(e){var t=this.getView(),i=t.ownerField;return t.isVisible()&&(i.getSelectOnTab()&&this.selectHighlighted(e),i.collapse&&i.collapse()),!0},onKeyEnter:function(e){var t=this.getView(),i=t.getSelectable(),n=t.ownerField;return e.stopEvent(),n.getMultiSelect&&n.getMultiSelect()||!i.isSelected(this.location.record)||!n.collapse?this.selectHighlighted(e):n.collapse(),e.fromBoundList=!0,n.fireEvent("specialkey",n,e),!1},onNavigate:function(e){var t=e&&(e.pointerType||this.getNavigateOnSpace()&&e.keyCode===e.SPACE),i=this.getView().getRefOwner();t&&(this.callParent([e]),i&&i.maybeCollapse&&i.maybeCollapse(e))},selectHighlighted:function(e){var t,i,n=this.getView(),r=n.getStore(),s=n.getSelectable(),o=this.location;o&&n.getViewItems().length&&(t=o.record)&&(e.getKey()!==e.ENTER&&s.isSelected(t)||(s.selectWithEvent(t,e),n.getStore().contains(t)||(i=Math.min(o.recordIndex,r.getCount()-1),this.setLocation(r.getAt(i)))))}}}),Ext.define("Ext.dataview.BoundList",{extend:Ext.dataview.List,xtype:"boundlist",tabIndex:null,focusEl:null,focusable:!1,itemsFocusable:!1,navigationModel:{type:"boundlist"},itemConfig:{cls:Ext.baseCSSPrefix+"boundlistitem",tools:{selected:{zone:"start",passive:!0,cls:Ext.baseCSSPrefix+"selected-icon",iconCls:Ext.baseCSSPrefix+"fa fa-check"}}},onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,afterShow:function(){this.callParent(),this.getNavigationModel().enable()},afterHide:function(e){var t=e.getNavigationModel();e.callParent([e]),t.setLocation(null),t.disable()},privates:{beforeSelectionRefresh:function(e,t){var i,n=e.length;for(i=0;i<n;)e[i].isEntered?(e.splice(i,1),n--):i++}}}),Ext.define("Ext.dataview.DataView",{extend:Ext.dataview.Abstract,alternateClassName:"Ext.DataView",xtype:"dataview",isElementDataView:!0,constructor:function(e){if(e&&e.useComponents)return this.self!==Ext.dataview.DataView&&Ext.raise("The useComponents config has been replaced by Ext.dataview.Component"),Ext.log.warn("The useComponents config has been replaced by Ext.dataview.Component"),new Ext.dataview.Component(e);this.useComponents&&Ext.raise("The useComponents config has been replaced by Ext.dataview.Component"),this.callParent([e])},getViewItems:function(){return Array.prototype.slice.call(this.getFastItems())},onStoreAdd:function(e,t,i){this.callParent(arguments),this.renderItems(i,i+t.length)},onStoreRemove:function(e,t,i){this.removeItems(i,i+t.length)},getItemClass:function(e){return this.getItemCls()},privates:{dirtyCls:Ext.baseCSSPrefix+"dirty",changeItem:function(e){var t=this.dataItems[e],i=this.dataRange.records[e],n={isFirst:!e,isLast:e===this.store.getCount()-1,item:t,record:i,recordIndex:e};this.syncItemRecord(n)},clearItems:function(){for(var e,t=this.dataItems;t.length;)e=t.pop(),Ext.fly(e).destroy()},createDataItem:function(e,t){var i,n,r=this.store,s=this.gatherData(t,e),o=this.getMarkDirty();return i=(n=Ext.Element.create(this.getItemElementConfig(e,s,r))).dom,o&&n.addCls(this.markDirtyCls),i.setAttribute("data-viewid",this.id),i.setAttribute("data-recordid",t.internalId),i.setAttribute("data-recordindex",e),n},doClear:function(){this.clearItems(),this.callParent()},resetSelection:function(e){this.setItemSelection(e,!1)},doRefresh:function(e){var t,i,n=this,r=n.dataRange.records,s=r.length,o=n.dataItems.length,a=n.getScrollable();if(a&&e&&a.scrollTo(0,0),++n.refreshCounter,s){for(t=n.saveFocusState(),n.hideEmptyText(),n.resetSelection(r),s<o?(n.removeItems(s,o),o=s):o<s&&n.renderItems(o,s),i=0;i<o;++i)n.changeItem(i);n.hasSelection()&&n.setItemSelection(n.getSelections(),!0),t()}else n.doClear()},getFastItems:function(){return this.getRenderTarget().dom.childNodes},getItemElementConfig:function(e,t,i){var n={cls:this.baseCls+"-item "+(this.getItemClass(t)||""),html:this.renderItemTpl(e,t,i)};return this.getItemsFocusable()&&(n.tabIndex=-1),n},removeItems:function(e,t){var i,n=this.dataItems.splice(e,t-e);for(i=0;i<n.length;++i)Ext.fly(n[i]).destroy()},renderItems:function(e,t){var i,n,r=this.dataItems,s=this.dataRange.records,o=this.getRenderTarget().dom,a=[e,0],l=this.dataItems[e]||null;for(s.length&&this.hideEmptyText(),l=l||(l=this.findTailItem(!0))&&l.el.dom,n=e;n<t;++n)a.push(i=this.createDataItem(n,s[n]).dom),o.insertBefore(i,l);r.splice.apply(r,a)},renderItemTpl:function(e,t,i){var n,r=this.getItemTpl(),s=i.getData().items;return t.xcount="number"==typeof t.xcount?t.xcount:i.getCount(),t.xindex="number"==typeof t.xindex?t.xindex:e,(n=null==(n=r.apply(t,s,e+1,s.length))?"":String(n))||this.getEmptyItemText()},syncItemRecord:function(e){var t=e.item,i=Ext.fly(t),n=e.record,r=this.store,s=e?e.recordIndex:r.indexOf(n),o=this.gatherData(n,s);t.innerHTML=this.renderItemTpl(s,o,r),t.setAttribute("data-recordid",n.internalId),t.setAttribute("data-recordindex",s),i.toggleCls(this.dirtyCls,n.dirty),i.toggleCls(this.selectedCls,this.getSelectable().isRowSelected(n))},traverseItem:function(e,t){var i,n,r=this.getRenderTarget().dom.childNodes,s=null;return e&&(e.isElement?i=e.dom:e.isWidget&&(i=e.el.dom),-1<(n=Array.prototype.indexOf.call(r,i))&&(s=(s=r[n+t]||null)&&(Ext.getCmp(s.id)||s))),s}}}),Ext.define("Ext.dataview.ChipView",{extend:Ext.dataview.DataView,xtype:"chipview",classCls:Ext.baseCSSPrefix+"chipview",hasIconCls:Ext.baseCSSPrefix+"has-icon",closableCls:Ext.baseCSSPrefix+"closable",iconElCls:Ext.baseCSSPrefix+"icon-el "+Ext.baseCSSPrefix+"font-icon",itemTpl:'<div class="'+Ext.baseCSSPrefix+'body-el"><div class="{_chipIconCls}" style="{_chipIconStyle}"></div><div class="'+Ext.baseCSSPrefix+'text-el">{_chipText}</div><div class="'+Ext.baseCSSPrefix+"close-el "+Ext.baseCSSPrefix+'font-icon"></div></div>',config:{iconField:null,iconClsField:null,displayField:"text",closableField:null,closable:!0,closeHandler:null,scope:null,itemUi:null,displayTpl:null},listeners:{childtap:"onChipTap",scope:"this",priority:3e3},getItemClass:function(e){var t,i,n,r=[this.callParent([e])],s=Ext.Chip.prototype.getClassCls(),o=s.length,a=this.getItemUi(),l=a&&a.length;for(t=0;t<o;t++)for(n=s[t],r.push(n),i=0;i<l;i++)r.push(n+"-"+a[i]);return this.hasIcon(e)&&r.push(this.hasIconCls),this.getChipClosable(e)&&r.push(this.closableCls),r.join(" ")},onChipTap:function(e,t){var i=this.getCloseHandler();if(i&&t.event.getTarget("."+Ext.baseCSSPrefix+"close-el"))return Ext.callback(i,this.getScope(),[this,t],0,this)},prepareData:function(e,t,i){var n=this.getDisplayTpl();return e._chipIconCls=this.getChipIconCls(e),e._chipIconStyle=this.getChipIconStyle(e),e._chipText=n?n.apply(e):e[this.getDisplayField()],e},privates:{applyItemUi:function(e){return"string"==typeof e?e.split(" "):Ext.Array.from(e)},updateItemUi:function(){this.doRefresh()},applyDisplayTpl:function(e){return Ext.XTemplate.get(e)},updateDisplayTpl:function(){this.isConfiguring||this.refresh()},getChipIconUrl:function(e){return Ext.resolveResource(e[this.getIconField()])},getChipIconStyle:function(e){var t=this.getChipIconUrl(e);return t?"background-image: url("+t+")":""},hasIcon:function(e){var t=this.getIconClsField();return!!this.getChipIconUrl(e)||!!t&&!!e[t]},getChipIconCls:function(e){var t=this.getIconClsField(),i=t?e[t]:"";return this.iconElCls+" "+i},getChipClosable:function(e){var t=this.getClosableField();return t?!!e[t]:this.getClosable()},_onChildEvent:function(e,t){return this.ownerField&&t.target===this.ownerField.inputElement.dom?{}:this.callParent([e,t])},syncEmptyState:function(){var e=this.ownerField;e&&(e.syncEmptyState(),e.syncLabelPlaceholder(!1))},syncItemRecord:function(e){var t=e.record,i=e?e.recordIndex:this.store.indexOf(t),n=this.gatherData(t,i);e.item.className=this.getItemClass(n),this.callParent([e])}}}),Ext.define("Ext.dataview.IndexBar",{extend:Ext.Component,alternateClassName:"Ext.IndexBar",xtype:"indexbar",cachedConfig:{letters:"ABCDEFGHIJKLMNOPQRSTUVWXYZ"},config:{animation:!0,autoHide:!1,dynamic:!1,listPrefix:null,indicator:!0},eventedConfig:{direction:"vertical"},top:0,bottom:0,left:0,right:0,inheritUi:!0,autoHideCls:Ext.baseCSSPrefix+"autohide",classCls:Ext.baseCSSPrefix+"indexbar",horizontalCls:Ext.baseCSSPrefix+"horizontal",indexedCls:Ext.baseCSSPrefix+"indexed",indexedHorizontalCls:Ext.baseCSSPrefix+"indexed-horizontal",indexedVerticalCls:Ext.baseCSSPrefix+"indexed-vertical",indexedNoAutoHideCls:Ext.baseCSSPrefix+"indexed-no-autohide",indicatorCls:Ext.baseCSSPrefix+"indexbar-indicator",pressedCls:Ext.baseCSSPrefix+"pressed",verticalCls:Ext.baseCSSPrefix+"vertical",element:{reference:"element",cls:Ext.baseCSSPrefix+"unselectable",children:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el"}]},initialize:function(){var e=this.bodyElement;this.callParent(),e.addClsOnClick(this.pressedCls),e.on({tap:"onTap",touchstart:"onTouchStart",touchend:"onTouchEnd",mouseover:"onMouseOver",mouseout:"onMouseOut",drag:"onDrag",dragEnd:"onDragEnd",scope:this})},getVertical:function(){return"vertical"===this.getDirection()},setVertical:function(e){return this.setDirection(e?"vertical":"horizontal")},onAdded:function(e,t){e.el.addCls(this.indexedCls),this.parentListeners=e.on({pinnedfooterheightchange:"onPinnedFooterHeightChange",pinnedheaderheightchange:"onPinnedHeaderHeightChange",verticaloverflowchange:"onVerticalOverflowChange",destroyable:!0,scope:this}),this.callParent([e,t])},onRemoved:function(e){var t=this.parent;Ext.destroy(this.parentListeners),!t||t.destroying||t.destroyed||t.el.removeCls(this.indexedCls),this.callParent([e])},privates:{parentListeners:null,onDrag:function(e){this.trackMove(e,!1)},onDragEnd:function(e){var t=this.getIndicator();this.trackMove(e,!0),t&&this.indicator&&this.indicator.hide()},onMouseOver:function(){this.$isMouseOver=!0,this.shouldAutoHide("over")&&this.bodyElement.show()},onMouseOut:function(){this.$isMouseOver=!1,this.shouldAutoHide("out")&&this.bodyElement.hide()},onPinnedFooterHeightChange:function(e,t){this.setBottom(t)},onPinnedHeaderHeightChange:function(e,t){this.setTop(t)},onTap:function(e){e.stopPropagation()},onTouchStart:function(e){this.$isPressing=!0,this.pageBox=this.bodyElement.getBox(),this.onDrag(e),this.shouldAutoHide("press")&&this.bodyElement.show()},onTouchEnd:function(e){this.$isPressing=!1,this.shouldAutoHide("release")&&this.bodyElement.hide(),this.onDragEnd(e)},onVerticalOverflowChange:function(e){this.setRight(e.getScrollable().getScrollbarSize().width)},scrollToClosestByIndex:function(e){var t,i,n,r,s,o=this.parent,a=e.toLowerCase(),l=o.getStore().getGroups(),c=l.length;for(i=0;i<c;i++){if(a<=(t=l.getAt(i)).getGroupKey().toLowerCase()){n=t;break}n=t}n&&(s=n.first(),o.getInfinite()||(r=o.itemFromRecord(s).$header),o.ensureVisible(s,{animation:this.getAnimation(),item:r,align:{y:"start"}}))},shouldAutoHide:function(e){var t=this.getAutoHide(),i=!1;return t&&(i="pressed"!==t&&Ext.os.is.Desktop?"over"===e||"release"===e&&!this.$isMouseOver||"out"===e&&!this.$isPressing:"press"===e||"release"===e),i},syncIndicatorPosition:function(e,t,i){var n,r,s,o,a,l,c=this.getIndicator(),u=this.getDirection(),d=this.renderElement,h=this.bodyElement,f=this.indicator,g=this.indicatorInner,p=h.getFirstChild(),m=h.getLastChild();c&&f&&(f.show(),"vertical"===u?(l=f.getHeight(),n=h.getWidth(),s=h.getMargin("lr"),o=p.getY(),a=m.getY(),e.y<o?t=p:e.y>a&&(t=m),i&&g.setHtml(t.getHtml().toUpperCase()),f.setTop(t.getY()-d.getY()-l/2+t.getHeight()/2),f.setRight(s+n)):(l=f.getWidth(),s=h.getMargin("tb"),r=h.getHeight(),o=p.getX(),a=m.getX(),e.x<o?t=p:e.x>a&&(t=m),f.setLeft(t.getX()-d.getX()-l/2+t.getWidth()/2),f.setBottom(s+r)),g.setHtml(t.getHtml().toUpperCase()))},trackMove:function(e,t){var i,n,r=this.bodyElement,s=this.pageBox||(this.pageBox=this.el.getBox()),o=Ext.util.Point.fromEvent(e);if("vertical"===this.getDirection()){if(o.y>s.bottom||o.y<s.top)return;n=(i=Ext.Element.fromPoint(s.left+s.width/2,o.y))&&i.getParent()===r}else{if(o.x>s.right||o.x<s.left)return;n=(i=Ext.Element.fromPoint(o.x,s.top+s.height/2))&&i.getParent()===r}i&&n&&(this.getIndicator()&&this.syncIndicatorPosition(o,i,n),(t||this.getDynamic())&&this.scrollToClosestByIndex(i.dom.innerHTML))},updateAutoHide:function(e){var t=this.parent.el,i=this.autoHideCls,n=this.indexedNoAutoHideCls;this.bodyElement.setVisibilityMode(Ext.Element.OPACITY),e?(this.addCls(i),this.bodyElement.hide(),t.removeCls(n)):(this.removeCls(i),this.bodyElement.show(),t.addCls(n))},updateDirection:function(e){var t,i,n,r,s=this.verticalCls,o=this.horizontalCls,a=this.indexedVerticalCls,l=this.indexedHorizontalCls;r="vertical"===e?(t=o,i=s,n=l,a):(t=s,i=o,n=a,l),this.element.replaceCls(t,i),this.bodyElement.replaceCls(t,i),this.parent.element.replaceCls(n,r)},updateIndicator:function(e){var t=this,i={cls:t.indicatorCls};e&&!0!==e&&(i=Ext.apply(i,e)),e?(t.indicator=t.el.appendChild(i),t.indicatorInner=t.indicator.appendChild({cls:t.indicatorCls+"-inner"}),t.indicator.hide(!1)):t.indicator&&(t.indicator.destroy(),t.indicatorInner.destroy(),t.indicator=t.indicatorInner=null)},updateLetters:function(e){var t,i=this.bodyElement,n=e.length;if(i.setHtml(""),e)for(t=0;t<n;t++)i.createChild({cls:Ext.baseCSSPrefix+"indexbar-item",html:e[t]})},updateListPrefix:function(e){e&&e.length&&this.bodyElement.createChild({html:e},0)},updateUi:function(e,t){var i=this.parent.element,n=this.indexedCls;t&&i.removeCls(t,n),e&&i.addCls(e,n),this.callParent([e,t])}}}),Ext.define("Ext.theme.material.dataview.IndexBar",{override:"Ext.dataview.IndexBar",config:{autoHide:!0,letters:["*","#","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"]}}),Ext.define("Ext.dataview.ListItem",{extend:Ext.dataview.DataItem,alternateClassName:"Ext.dataview.component.ListItem",xtype:"listitem",mixins:[Ext.dataview.Disclosable,Ext.mixin.Toolable,Ext.dataview.Pinnable],classCls:[Ext.baseCSSPrefix+"listitem",Ext.baseCSSPrefix+"container",Ext.baseCSSPrefix+"component"],classClsRoot:!0,inheritUi:!0,items:null,updateRecord:function(e){this.destroying||this.destroyed||(this.callParent([e]),this.syncDisclosure(e))},doDestroy:function(){this.mixins.toolable.doDestroy.call(this),this.callParent()},privates:{invokeToolHandler:function(e,t,i,n,r){return!this.invokeDisclosure(e,t,r)&&e.invokeToolHandler(e,t,i,n,r)}}}),Ext.define("Ext.layout.HBox",{extend:Ext.layout.Box,alias:"layout.hbox",config:{vertical:!1}}),Ext.define("Ext.dataview.NestedList",{alternateClassName:"Ext.NestedList",extend:Ext.Container,xtype:"nestedlist",config:{backText:"Back",useTitleAsBackText:!0,updateTitleText:!0,displayField:"text",loadingText:"Loading...",emptyText:"No items available.",onItemDisclosure:!1,allowDeselect:!1,useToolbar:null,toolbar:{docked:"top",xtype:"titlebar",ui:"light",inline:!0},title:"",layout:{type:"card",animation:{type:"slide",duration:250,direction:"left"}},store:null,detailContainer:void 0,detailCard:null,backButton:{hidden:!0},listConfig:null,variableHeights:!1,lastNode:null,lastActiveList:null,ui:null,clearSelectionOnListChange:!0},baseCls:Ext.baseCSSPrefix+"nested-list",listMode:"title",constructor:function(e){Ext.isObject(e)&&(e.getTitleTextTpl&&(this.getTitleTextTpl=e.getTitleTextTpl),e.getItemTextTpl&&(this.getItemTextTpl=e.getItemTextTpl)),this.callParent([e])},changeListMode:function(e){var t=this.getStore(),i=t&&t.getRoot();e===i?this.listMode="title":e.parentNode===i?this.listMode="node":this.listMode="deep"},onChildInteraction:function(){if(this.isGoingTo)return!1},applyDetailContainer:function(e){return e=e||this},updateDetailContainer:function(e,t){e&&(e.on("beforeactiveitemchange","onBeforeDetailContainerChange",this),e.on("activeitemchange","onDetailContainerChange",this))},onBeforeDetailContainerChange:function(){this.isGoingTo=!0},onDetailContainerChange:function(){this.isGoingTo=!1},onChildTap:function(e,t){var i=this,n=i.hasListeners,r=t.record;if(!1===i.onChildInteraction(e,t))return!1;n.childtap&&(t.list=e,i.fireEvent("childtap",i,t)),n.itemtap&&i.fireEvent("itemtap",i,e,t.viewIndex,t.child,r,t.event),r.isLeaf()?(n.leafchildtap&&(t.list=e,i.fireEvent("leafchildtap",i,t)),n.leafitemtap&&i.fireEvent("leafitemtap",i,e,t.viewIndex,t.child,r,t.event),i.goToLeaf(r)):this.goToNode(r)},onBeforeSelect:function(){this.fireEvent.apply(this,[].concat("beforeselect",this,Array.prototype.slice.call(arguments)))},onContainerTap:function(){this.fireEvent.apply(this,[].concat("containertap",this,Array.prototype.slice.call(arguments)))},onSelect:function(){var e=Array.prototype.slice.call(arguments);this.fireEvent.apply(this,[].concat("select",this,e)),this.onSelectionChange(e)},onDeselect:function(){var e=Array.prototype.slice.call(arguments);this.fireEvent.apply(this,[].concat("deselect",this,e)),this.onSelectionChange(e)},onSelectionChange:function(e){this.fireEvent.apply(this,[].concat("selectionchange",this,e))},onChildDoubleTap:function(e,t){var i=this.hasListeners;i.childdoubletap&&(t.list=e,this.fireEvent("childdoubletap",this,t)),i.itemdoubletap&&this.fireEvent("itemdoubletap",this,e,t.viewIndex,t.child,t.record,t.event)},onStoreBeforeLoad:function(){var e=this.getLoadingText();e&&this.setMasked({xtype:"loadmask",message:e}),this.fireEvent.apply(this,[].concat("beforeload",this,Array.prototype.slice.call(arguments)))},onStoreLoad:function(e,t,i,n,r){this.setMasked(!1),this.fireEvent.apply(this,[].concat("load",this,Array.prototype.slice.call(arguments))),-1===e.indexOf(this.getLastNode())&&this.goToNode(e.getRoot())},onBackTap:function(){var e=this.getLastNode(),t=this.getDetailCard(),i=t&&this.getActiveItem()===t,n=this.getLayout(),r=n?n.getAnimation():null,s=this.getLastActiveList();r&&r&&r.isAnimating||this.fireAction("back",[this,e,s,i],"doBack",null,null,"after")},doBack:function(e,t,i,n){var r=e.getLayout(),s=r?r.getAnimation():null;n&&i?(s&&s.setReverse(!0),e.setActiveItem(i),e.setLastNode(t.parentNode),e.syncToolbar()):e.goToNode(t.parentNode)},updateData:function(e){this.getStore()||this.setStore(new Ext.data.TreeStore({root:e}))},applyStore:function(e){return e&&(Ext.isString(e)?e=Ext.data.StoreManager.get(e):e instanceof Ext.data.TreeStore||(e=Ext.factory(e,Ext.data.TreeStore,null)),e||Ext.Logger.warn("The specified Store cannot be found",this)),e},storeListeners:{rootchange:"onStoreRootChange",load:"onStoreLoad",beforeload:"onStoreBeforeLoad"},updateStore:function(e,t){var i=this.storeListeners;i.scope=this,t&&Ext.isObject(t)&&t.isStore&&(t.autoDestroy&&t.destroy(),t.un(i)),e&&(e.on(i),this.goToNode(e.getRoot()))},onStoreRootChange:function(e,t){this.goToNode(t)},applyDetailCard:function(e,t){return Ext.factory(e,Ext.Component,null===e?t:void 0)},applyBackButton:function(e){return!!this.getToolbar()&&Ext.factory(e,Ext.Button,this.getBackButton())},updateBackButton:function(e,t){e?(e.on("tap",this.onBackTap,this),e.setText(this.getBackText()),this.$backButtonContainer?this.$backButtonContainer.insert(0,e):this.getToolbar().insert(0,e)):t&&t.destroy()},applyToolbar:function(e){var t;return e&&e.splitNavigation&&(Ext.apply(e,{docked:"top",xtype:"titlebar",ui:"light"}),t=!0===e.splitNavigation?{}:e.splitNavigation,this.$backButtonContainer=this.add(Ext.apply({xtype:"toolbar",docked:"bottom",hidden:!0,ui:"dark"},t))),Ext.factory(e,Ext.TitleBar,this.getToolbar())},updateToolbar:function(e,t){e?(e.setTitle(this.getTitle()),e.getParent()||this.add(e)):t&&t.destroy()},updateUseToolbar:function(e,t){e||this.setToolbar(!1)},updateTitle:function(e){var t=this.getBackButton();!this.getUpdateTitleText()||"title"===this.listMode?this.setToolbarTitle(e):t&&this.getUseTitleAsBackText()&&"node"===this.listMode&&t.setText(e)},getItemTextTpl:function(e){return"{"+this.getDisplayField()+"}"},getTitleTextTpl:function(e){return"{"+this.getDisplayField()+"}"},renderTitleText:function(e,t){var i;return e.titleTpl||(e.titleTpl=Ext.create("Ext.XTemplate",this.getTitleTextTpl(e))),e.isRoot()?(i=this.getTitle(),t&&""===i?this.getInitialConfig("backText"):i):e.titleTpl.applyTemplate(e.data)},goToNode:function(e){var t,i,n,r,s,o,a,l,c,u=this;if(e){if(t=u.getActiveItem(),n=(i=u.getDetailCard())&&u.getActiveItem()===i,r=u.goToNodeReverseAnimation(e),s=u.firstList,o=u.secondList,l=(a=u.getLayout())?a.getAnimation():null,e.isLeaf())throw new Error("goToNode: passed a node which is a leaf.");e===u.getLastNode()&&!n||(n?(l&&l.setReverse(!0),(c=u.getLastActiveList()).getStore().setNode(e),e.expand(),u.setActiveItem(c)):(l&&l.setReverse(r),s&&o?(t=u.getActiveItem(),u.setLastActiveList(t),(c=t===s?o:s).getStore().setNode(e),e.expand(),u.setActiveItem(c),u.getClearSelectionOnListChange()&&c.deselectAll()):s?(u.setLastActiveList(u.getActiveItem()),u.setActiveItem(u.getList(e)),u.secondList=u.getActiveItem()):(u.setActiveItem(u.getList(e)),u.firstList=u.getActiveItem())),u.fireEvent("listchange",u,u.getActiveItem()),u.setLastNode(e),u.changeListMode(e),u.syncToolbar())}},goToLeaf:function(e){var t,i,n,r,s,o;if(!e.isLeaf())throw new Error("goToLeaf: passed a node which is not a leaf.");t=this.getDetailCard(),n=(i=this.getDetailContainer())===this,s=!!(r=this.getLayout())&&r.getAnimation(),t&&(-1===i.getItems().indexOf(t)&&i.add(t),n&&((o=this.getActiveItem())instanceof Ext.dataview.List&&this.setLastActiveList(o),this.setLastNode(e)),s&&s.setReverse(!1),i.setActiveItem(t),this.syncToolbar())},syncToolbar:function(e){var t=this,i=t.getDetailCard(),n=t.getLastNode(),r=e||i&&t.getActiveItem()===i?n:n.parentNode,s=t.getBackButton(),o=t.getToolbar();o&&(s&&(o.getInitialConfig("splitNavigation")&&t.$backButtonContainer[r?"show":"hide"](),s[r?"show":"hide"](),r&&t.getUseTitleAsBackText()&&s.setText(t.renderTitleText(n.parentNode,!0))),n&&t.setToolbarTitle(t.renderTitleText(n)))},updateBackText:function(e){var t=this.getBackButton();t&&t.setText(e)},goToNodeReverseAnimation:function(e){var t=this.getLastNode();return!!t&&!(t.contains(e)||!t.isAncestor(e))},getList:function(e){var t,i=new Ext.data.NodeStore({recursive:!1,node:e,rootVisible:!1,model:this.getStore().getModel(),proxy:"memory"});return e.expand(),t=Ext.create(Ext.Object.merge({xtype:"list",pressedDelay:250,autoDestroy:!0,store:i,onItemDisclosure:this.getOnItemDisclosure(),variableHeights:this.getVariableHeights(),emptyText:this.getEmptyText(),selectable:{deselectable:this.getAllowDeselect()},listeners:{scope:this,childdoubletap:"onChildDoubleTap",beforeselectionchange:"onBeforeSelect",containertap:"onContainerTap",select:"onSelect",deselect:"onDeselect",childtap:{fn:"onChildTap",priority:1e3},childtouchstart:{fn:"onChildInteraction",priority:1e3}},itemTpl:'<span<tpl if="leaf == true"> class="x-list-item-leaf"</tpl>>'+this.getItemTextTpl(e)+"</span>"},this.getListConfig())),this.relayEvents(t,["activate"]),t},privates:{setToolbarTitle:function(e){var t=this.getToolbar();t&&t.setTitle(e)}}}),Ext.define("Ext.theme.material.dataview.NestedList",{override:"Ext.dataview.NestedList",config:{backText:"",useTitleAsBackText:!1,backButton:{iconCls:"md-icon-arrow-back",hidden:!0}}}),Ext.define("Ext.tip.ToolTip",{extend:Ext.Panel,xtype:"tooltip",floated:!0,hidden:!0,shadow:!0,border:!0,bodyBorder:!1,anchor:!1,closeAction:"hide",config:{align:"l-r?",alignDelegate:null,allowOver:null,anchorToTarget:!0,autoHide:!0,delegate:null,dismissDelay:5e3,hideDelay:300,mouseOffset:[15,18],quickShowInterval:250,showDelay:500,showOnTap:null,target:null,trackMouse:!1},classCls:Ext.baseCSSPrefix+"tooltip",headerCls:Ext.baseCSSPrefix+"tooltipheader",titleCls:Ext.baseCSSPrefix+"tooltiptitle",toolCls:[Ext.baseCSSPrefix+"paneltool",Ext.baseCSSPrefix+"tooltiptool"],closeToolText:null,constructor:function(e){this.currentTarget=new Ext.dom.Fly,this.callParent([e])},getRefOwner:function(){var e=this.getTarget();return e&&e.isComponent?e:this.callParent()},updateAnchor:function(){this.doRealignToTarget()},applyAlign:function(e){var t=e[e.length-1];return"?"!==t&&"!"!==t&&(e+="?"),e},updateAlign:function(){this.doRealignToTarget()},updateAllowOver:function(e){this.overListeners=Ext.destroy(this.overListeners),e&&(this.overListeners=this.el.on({mouseenter:"onTipOver",mouseleave:"onTipOut",scope:this,destroyable:!0}))},applyTarget:function(e){return e&&(e.isComponent||(e=Ext.get(e.el||e))),e},updateTarget:function(e,t){t&&t.un("destroy",this.destroy,this),e?e.isComponent?(this.targetElement=e.element,e.on("destroy",this.destroy,this)):this.targetElement=Ext.get(e):this.targetElement=null,this.attachTargetListeners()},updateTrackMouse:function(e){e&&this.setAllowOver(e)},updateDisabled:function(e,t){var i;this.callParent([e,t]),e&&(this.clearTimers(),this.hide(),i=null),this.attachTargetListeners(i)},updateShowOnTap:function(e){this.isConfiguring||this.attachTargetListeners()},realignToTarget:function(){this.doRealignToTarget()},showBy:function(e,t,i){var n=e,r=this.getAlignDelegate();e.isEvent?this.alignToEvent(e):(e.isWidget?this.updateCurrentTarget(e.element.dom):e.isElement?this.updateCurrentTarget(e.dom):e.nodeType&&this.updateCurrentTarget(e),r&&(n=(e=Ext.fly(e)).down(r,!0)||e.up(r,this.targetElement,!0)),this.callParent([n,t||this.getAlign(),i]))},beforeShow:function(e){!1!==this.callParent(arguments)&&(e.alignment||!this.pointerEvent&&!this.getTarget()||(e.alignment={component:this.targetElement,alignment:this.getAlign(),options:{overlap:this.getTrackMouse()&&!this.getAnchor()}}),this.clearTimer("dismiss"))},afterShow:function(){this.callParent(),this.postprocessShow(),this.mousedownListener=Ext.on({mousedown:"onDocMouseDown",scope:this,destroyable:!0})},hide:function(){this.clearTimer("hide"),this.clearTimer("dismiss"),this.callParent(),this.lastHidden=new Date,this.updateCurrentTarget(null),Ext.destroy(this.mousedownListener)},doDestroy:function(){this.clearTimers(),this.setTarget(null),this.destroyMembers("mousedownListener","overListeners"),this.callParent()},privates:{allowRealign:!0,onDocMouseDown:function(e){var t=this,i=t.getDelegate();e.within(t.el.dom)?"mouse"!==e.pointerType&&t.getAllowOver()&&t.clearTimer("dismiss"):t.getClosable()||(!e.within(t.targetElement)||i&&!e.getTarget(i,t.targetElement)?(t.disable(),t.enableTimer=Ext.defer(t.enable,100,t)):t.delayHide())},onTargetOver:function(e){var t,i=this.targetElement,n=this.getDelegate(),r=this.currentTarget;if(!(this.getDisabled()||this.getAllowOver()&&this.el.contains(e.target))){if(n){if(r.contains(e.target))return;if((t=e.getTarget(n,i))&&e.getRelatedTarget(n)===t)return}else{if(i.contains(e.relatedTarget))return;t=i.dom}t?this.handleTargetOver(e,t):r.dom&&this.handleTargetOut()}},handleTargetOver:function(e,t){var i=this,n=i.hasListeners;if(i.pointerEvent=e,i.updateCurrentTarget(t),i.isVisible()){if(n.beforeshow&&!1===i.fireEvent("beforeshow",i))return i.hide();i.clearTimer("hide"),i.clearTimer("dismiss"),i.showByTarget(t),n.show&&i.fireEvent("show",i),i.postprocessShow()}else i.delayShow(t)},postprocessShow:function(){var e=this.getDismissDelay();this.clearTimer("show"),e&&this.getAutoHide()&&(this.dismissTimer=Ext.defer(this.hide,e,this)),this.toFront()},onTargetTap:function(e){"mouse"!==e.pointerType&&Ext.fly(e.target).isVisible(!0)&&this.onTargetOver(e)},onTargetOut:function(e){this.currentTarget.dom&&!this.currentTarget.contains(e.relatedTarget)&&!this.getAllowOver()&&e.within(this.el,!0)&&this.handleTargetOut()},handleTargetOut:function(){this.showTimer&&this.clearTimer("show"),this.isVisible()&&this.getAutoHide()&&this.delayHide()},onTipOver:function(){this.clearTimer("hide"),this.clearTimer("dismiss")},onTipOut:function(e){this.currentTarget.dom&&e.getPoint().isContainedBy(this.currentTarget.getRegion())||this.handleTargetOut()},onMouseMove:function(e){var t=this,i=t.getDismissDelay();t.el.contains(e.target)||(t.pointerEvent=e),t.isVisible()&&t.currentTarget.contains(e.target)&&(i&&!1!==t.getAutoHide()&&(t.clearTimer("dismiss"),t.dismissTimer=Ext.defer(t.hide,i,t)),t.getTrackMouse()&&t.alignToEvent(e))},delayShow:function(e){var t=this;t.clearTimer("hide"),t.getHidden()&&!t.showTimer?t.getDelegate()&&Ext.Date.getElapsed(t.lastHidden)<t.getQuickShowInterval()?t.showByTarget(e):t.showTimer=Ext.defer(t.showByTarget,t.pointerEvent&&"mouse"!==t.pointerEvent.pointerType?0:t.getShowDelay(),t,[e]):t.getHidden()||!1===t.getAutoHide()||t.showByTarget(e)},showByTarget:function(e){var t=this.getAnchorToTarget()&&!this.getTrackMouse();this.lastShowWasPointer=!t,this.showBy(t?e:this.pointerEvent,this.getAlign(),{overlap:this.getTrackMouse()&&!this.getAnchor()})},delayHide:function(){this.isHidden()||this.hideTimer||(this.clearTimer("dismiss"),this.hideTimer=Ext.defer(this.hide,this.getHideDelay(),this))},alignToEvent:function(e){var t={overlap:this.getTrackMouse()&&!this.getAnchor()},i=this.getMouseOffset(),n=e.getPoint().adjust(-Math.abs(i[1]),Math.abs(i[0]),Math.abs(i[1]),-Math.abs(i[0])),r=this.getAnchor()?this.getAlign():null;!r&&i&&(r=0<i[0]?0<i[1]?"tl-br?":"bl-tr?":0<i[1]?"tr-bl?":"br-tl?"),this.isVisible()?(this.clearTimer("hide"),this.alignTo(n,r,t)):this.showBy(n,r,t)},_timerNames:{},clearTimer:function(e){var t=this._timerNames,i=t[e]||(t[e]=e+"Timer"),n=this[i];n&&(Ext.undefer(n),this[i]=null,"show"===e&&this.isHidden()&&this.updateCurrentTarget(null))},clearTimers:function(){this.clearTimer("show"),this.clearTimer("dismiss"),this.clearTimer("hide"),this.clearTimer("enable")},clipTo:function(e,t){var i;i=e.isRegion?e:(e.isComponent?e.el:Ext.fly(e)).getConstrainRegion(),this.callParent([i,t]),this.tipElement.clipTo(i,t)},doRealignToTarget:function(){var e=this.currentTarget,t=e&&e.dom;this.clearTimers(),this.allowRealign&&this.isVisible()&&t&&this.realign(null,this.getAlign())},updateCurrentTarget:function(e){var t=this.currentTarget,i=t.dom;t.attach(e),this.isConfiguring||this.fireEvent("hovertarget",this,t,i)},attachTargetListeners:function(e){var t;this.targetListeners=Ext.destroy(this.targetListeners),null!==e&&(e=this.targetElement)&&(t={mouseover:"onTargetOver",mouseout:"onTargetOut",mousemove:"onMouseMove",scope:this,destroyable:!0},this.getShowOnTap()&&(t.tap="onTargetTap"),this.targetListeners=e.on(t))}}}),Ext.define("Ext.dataview.plugin.SortableList",{extend:Ext.plugin.Abstract,alias:"plugin.sortablelist",alternateClassName:"Ext.plugin.SortableList",config:{list:null,source:{xclass:"Ext.drag.Source",handle:"."+Ext.baseCSSPrefix+"list-sortablehandle",constrain:{vertical:!0},proxy:{getElement:function(e){return this.getSource().list.mapToItem(e.initialEvent).el}}}},init:function(e){this.setList(e)},updateList:function(e){var t;e&&(t=this.getSource())&&(t.list=e,t.setElement(e.getRenderTarget()))},applySource:function(e){return e=e&&Ext.create(e)},updateSource:function(e,t){var i=this.getList();Ext.destroy(t),e&&(e.on({scope:this,dragstart:"onDragStart",dragmove:"onDrag",dragend:"onDragEnd"}),i&&(e.list=i,e.setElement(i.getRenderTarget())))},onDragStart:function(e,t){var i=this.getList(),n=i.mapToItem(t.initialEvent);n.addCls(Ext.baseCSSPrefix+"item-no-ripple"),n.translate(0,0),t.item=n,t.startIndex=n.getRecordIndex(),t.listTop=i.element.getY(),t.itemHeight=n.el.measure("h"),t.halfHeight=t.itemHeight/2,i.stickItem(n,{floated:!0})},onDrag:function(e,t){var i=this.getList(),n={},r=Math.max(0,t.cursor.current.y-t.listTop),s=i.bisectPosition(r+i.getVisibleTop()+t.halfHeight);t.index=s+=i.renderInfo.indexTop,n[s]=t.itemHeight,i.setGaps(n)},onDragEnd:function(e,t,i){var n,r,s,o,a=this,l=a.getList(),c=t.item,u=c.el.dom.style,d=l.getStore(),h=t.index,f=l.mapToItem(d.getAt(h));c.getTranslatable().on("animationend",function(){a.destroyed||(s=t.startIndex,o=c.getRecord(),l.stickItem(c),l.setGaps(null),c.removeCls(Ext.baseCSSPrefix+"item-no-ripple"),s!==h&&(d.insert(h,o),h=d.indexOf(o),l.fireEvent("dragsort",l,l.mapToItem(o),h)))},a,{single:!0}),i.stopPropagation(),r=f?f.$y0:l.mapToItem(d.getAt(h-1)).$y1,n=c.element.getTop(!0),u.left=u.top="",c.translate(0,n),c.translate(null,r,{duration:100})}}),Ext.define("Ext.dataview.pullrefresh.Item",{extend:Ext.Component,config:{lastUpdated:null,state:null,pull:null},privates:{clsMap:{loaded:Ext.baseCSSPrefix+"pullrefresh-loaded",loading:Ext.baseCSSPrefix+"pullrefresh-loading",pulling:Ext.baseCSSPrefix+"pullrefresh-pulling",holding:Ext.baseCSSPrefix+"pullrefresh-holding"},isLoading:function(e){return"loading"===(e=e||this.getState())||"loaded"===e},updateState:function(e){var t,i=this.el,n=this.clsMap;i&&(delete(t=i.getClassMap(!1))[n.loaded],delete t[n.loading],delete t[n.pulling],delete t[n.holding],t[n[e]]=1,i.setClassMap(t,!0))}}}),Ext.define("Ext.dataview.pullrefresh.Spinner",{extend:Ext.dataview.pullrefresh.Item,xtype:"pullrefreshspinner",hideAnimation:{type:"popOut"},baseCls:Ext.baseCSSPrefix+"pullrefreshspinner",template:[{cls:Ext.baseCSSPrefix+"pullrefreshspinner-loading-wrap",children:[{cls:Ext.baseCSSPrefix+"pullrefreshspinner-main "+Ext.baseCSSPrefix+"shadow",reference:"bodyEl",children:[{cls:Ext.baseCSSPrefix+"pullrefreshspinner-loader-wrapper",children:[{cls:Ext.baseCSSPrefix+"pullrefreshspinner-arrow-wrapper",children:[{cls:Ext.baseCSSPrefix+"pullrefreshspinner-arrow-main",reference:"arrowEl"}]},{cls:Ext.baseCSSPrefix+"pullrefreshspinner-spinner-wrapper",reference:"spinnerEl",children:[{cls:Ext.baseCSSPrefix+"pullrefreshspinner-spinner-main",children:[{cls:Ext.baseCSSPrefix+"pullrefreshspinner-spinner-left",children:[{cls:Ext.baseCSSPrefix+"pullrefreshspinner-half-circle"}]},{cls:Ext.baseCSSPrefix+"pullrefreshspinner-spinner-right",children:[{cls:Ext.baseCSSPrefix+"pullrefreshspinner-half-circle"}]}]}]}]}]}]}],privates:{toggleDisplay:function(e){this.arrowEl.setVisible(!e),this.spinnerEl.setVisible(e)},updatePull:function(e){var t=Math.floor(100*Math.min(e,3))-110;this.bodyEl.setOpacity(Math.min(1,e)),this.arrowEl.dom.style.transform="rotate("+t+"deg)"},updateState:function(e){this.toggleDisplay(this.isLoading(e))}}}),Ext.define("Ext.theme.material.dataview.pullrefresh.PullRefresh",{override:"Ext.dataview.pullrefresh.PullRefresh",config:{overlay:!0,widget:{xtype:"pullrefreshspinner"}}}),Ext.define("Ext.field.BoxLabelable",{extend:Ext.Mixin,mixinConfig:{id:"boxLabelable",after:{initElement:"afterInitElement"}},config:{boxLabel:null,boxLabelAlign:null},boxLabeledCls:Ext.baseCSSPrefix+"box-labeled",getBodyTemplate:function(){return[{reference:"boxWrapElement",cls:Ext.baseCSSPrefix+"box-wrap-el",children:[{reference:"boxElement",cls:Ext.baseCSSPrefix+"box-el",children:this.getBoxTemplate()},{tag:"label",reference:"boxLabelElement",cls:Ext.baseCSSPrefix+"box-label-el"}]}]},getBoxTemplate:Ext.emptyFn,updateBoxLabel:function(e){this.boxLabelElement.setHtml(e),this.el.toggleCls(this.boxLabeledCls,!!e)},updateBoxLabelAlign:function(e,t){var i=this.el;t&&i.removeCls(Ext.baseCSSPrefix+"box-label-align-"+t),e&&i.addCls(Ext.baseCSSPrefix+"box-label-align-"+e)},afterInitElement:function(){var e=this.inputElement;e&&this.boxLabelElement.dom.setAttribute("for",e.id)}}),Ext.define("Ext.field.Checkbox",{extend:Ext.field.Input,alternateClassName:"Ext.form.Checkbox",xtype:["checkbox","checkboxfield"],mixins:[Ext.field.BoxLabelable],qsaLeftRe:/[[]/g,qsaRightRe:/[\\]]/g,shareableName:!0,isCheckbox:!0,defaultBindProperty:"checked",twoWayBindable:{checked:1},publishes:{checked:1},config:{value:"",checked:!1},inputType:"checkbox",classCls:Ext.baseCSSPrefix+"checkboxfield",checkedCls:Ext.baseCSSPrefix+"checked",getBodyTemplate:function(){return this.mixins.boxLabelable.getBodyTemplate.call(this)},getBoxTemplate:function(){return[{reference:"iconElement",cls:Ext.baseCSSPrefix+"font-icon "+Ext.baseCSSPrefix+"icon-el",children:[this.getInputTemplate()]}]},getInputTemplate:function(){var e=this.callParent();return e.listeners=e.listeners||{},e.listeners.change={fn:"onChange",delegated:!1},e},getSubmitValue:function(){return this.getChecked()?!!Ext.isEmpty(this._value)||this._value:null},serialize:function(){return this.getSubmitValue()},checkedRe:/^(true|1|on)/i,getChecked:function(){return!!this.inputElement.dom.checked},applyChecked:function(e){return this.isConfiguring&&(this.originalState=e),!!this.checkedRe.test(String(e))},updateChecked:function(e,t){var i,n=this;n.$onChange||(n.inputElement.dom.checked=e),n.toggleCls(n.checkedCls,e),n.initialized&&(i=e?"check":"uncheck",n.fireEvent(i,n),n.fireEvent("change",n,e,t)),n.setDirty(n.isDirty())},isChecked:function(){return this.getChecked()},isDirty:function(){return this.getChecked()!==this.originalState},check:function(){return this.setChecked(!0)},uncheck:function(){return this.setChecked(!1)},onChange:function(e){this.$onChange=!0,this.setChecked(!!e.target.checked),delete this.$onChange},getSameGroupFields:function(){var e=this.lookupNameHolder(),t=this.name;return e?e.lookupName(t):(Ext.Logger.warn(this.self.$className+" components must always be descendants of an Ext.field.Panel."),t=t.replace(this.qsaLeftRe,"\\\\[").replace(this.qsaRightRe,"\\\\]"),Ext.Viewport.query("checkboxfield[name="+t+"]"))},getGroupValues:function(){var t=[];return this.getSameGroupFields().forEach(function(e){e.getChecked()&&t.push(e.getValue())}),t},setGroupValues:function(t){return this.getSameGroupFields().forEach(function(e){e.setChecked(-1!==t.indexOf(e.getValue()))}),this},resetGroupValues:function(){return this.getSameGroupFields().forEach(function(e){e.setChecked(e.originalState)}),this},reset:function(){return this.setChecked(this.originalState),this},resetOriginalValue:function(){this.originalState=this.getChecked(),this.setDirty(!1)},getRawValue:function(){return this.getChecked()},rawToValue:Ext.emptyFn}),Ext.define("Ext.theme.material.field.Checkbox",{override:"Ext.field.Checkbox",config:{labelAlign:"left",bodyAlign:"end",ripple:{delegate:"."+Ext.baseCSSPrefix+"icon-el",bound:!1,color:"default"}}}),Ext.define("Ext.field.Manager",{mixinId:"fieldmanager",fillRecord:function(e){var t,i;if(e)for(i in t=this.getValues())t.hasOwnProperty(i)&&e.getField(i)&&e.set(i,t[i]);return this},consumeRecord:function(e){var t=e&&e.data;t&&this.setValues(t)},setValues:function(e){var t,i,n,r,s,o,a=this.getFields();for(t in e=e||{})if(e.hasOwnProperty(t)&&(i=a[t],n=e[t],i)){if(Ext.isArray(i))for(r=i.length,s=0;s<r;s++){if((o=i[s]).isRadio){o.setGroupValue(n);break}o.isCheckbox?Ext.isArray(n)?o.setChecked(-1!==n.indexOf(o._value)):o.setChecked(n===o._value):Ext.isArray(n)&&o.setValue(n[s])}else i.isRadio||i.isCheckbox?i.setChecked(n):i.setValue(n);this.getTrackResetOnLoad&&this.getTrackResetOnLoad()&&i.resetOriginalValue()}return this},getValues:function(e,i){var t,n,r,s,o,a,l,c,u=this.getFields(),d={},h=Ext.isArray,f=e;for(o in Ext.isObject(e)&&(f=e.enabled,i=e.nameless,c=e.serialize),r=function(e,t){(i||t&&"null"!==t)&&!e.isFile&&(n=c||e.isCheckbox?e.serialize():e.getValue(),f&&e.getDisabled()||(e.isRadio?e.isChecked()&&(d[t]=n):(s=d[t],Ext.isEmpty(s)?d[t]=n:e.isCheckbox&&!e.isChecked()||(h(s)||(s=d[t]=[s]),h(n)?s=d[t]=s.concat(n):s.push(n)))))},u)if(u.hasOwnProperty(o))if(t=u[o],h(t))for(a=t.length,l=0;l<a;l++)r(t[l],o);else r(t,o);return d},getSubmitValues:function(e){return this.getValues(Ext.applyIf({serialize:!0},e))},reset:function(t){return this.getFields(!1).forEach(function(e){e.reset(),t&&e.setError(null)}),this},updateDisabled:function(t){return this.getFields(!1).forEach(function(e){e.setDisabled(t)}),this},setErrors:function(i){function e(e,t){e&&(null===(r=i[t])||Ext.isArray(r)&&0===r.length?e.setError(null):e.setError(r))}var t,n,r,s,o;for(t in Ext.isObject(i)||Ext.raise("setErrors requires an Object parameter"),i)if(n=this.lookupName(t)||this.lookup(t),Ext.isArray(n))for(s=0,o=n.length;s<o;s++)e(n[s],t);else e(n,t);return this},clearErrors:function(){var e,t,i,n=this.getFields(!1);for(e=0,t=n.length;e<t;e++)(i=n[e]).getName()&&i.setError&&i.setError(null);return this},getErrors:function(){var e,t,i,n,r,s={};for(t=0,i=(e=this.getFields(!1).filter(function(e){return e.getName()})).length;t<i;t++)(r=(n=e[t]).getError())&&r.length||(r=null),s[n.getName()]=r;return s},isValid:function(){var e,t,i=this.getFields(!1);for(e=0,t=i.length;e<t;e++)if(!i[e].isValid())return!1;return!0},validate:function(e){var t,i,n=this.getFields(!1),r=!0;for(t=0,i=n.length;t<i;t++)n[t].validate(e)||(r=!1);return r},getFields:function(e,t){var i,n,r,s,o,a,l=(!1===t?">":"")+"field"+(e?"[name="+e+"]":""),c=this.query(l),u=!1===e;if(!c&&u)return[];if(c&&!u){if(!e){for(i={},n=0,r=c.length;n<r;n++)(a=i[o=(s=c[n]).getName()])?Ext.isArray(a)?a.push(s):i[o]=[a,s]:i[o]=s;return i}if(c.length<2)return c[0]}return c},getFocusedField:function(){var e,t,i=this.getFields(!1),n=i.length;for(t=0;t<n;t++)if((e=i[t]).hasFocus)return e;return null},getNextField:function(){var e,t=this.getFields(!1),i=this.getFocusedField();return!(!i||(e=t.indexOf(i))===t.length-1)&&t[++e]},focusNextField:function(){var e=this.getNextField();return!!e&&(e.focus(),e)},getPreviousField:function(){var e,t=this.getFields(!1),i=this.getFocusedField();return!(!i||0===(e=t.indexOf(i)))&&t[--e]},focusPreviousField:function(){var e=this.getPreviousField();return!!e&&(e.focus(),e)}}),Ext.define("Ext.mixin.FieldDefaults",{extend:Ext.Mixin,mixinConfig:{id:"fieldDefaults",before:{initInheritedState:"initInheritedState"}},initInheritedState:function(e){var t=this.fieldDefaults;t&&(e.fieldDefaults=t)}}),Ext.define("Ext.field.ChipViewNavigationModel",{extend:Ext.dataview.BoundListNavigationModel,alias:"navmodel.fieldchipview",privates:{getKeyNavCfg:function(e){var t;if(!1!==this.keyboard&&(t=(e.ownerField||e).getFocusEl()))return{target:t,eventName:"keydown",processEvent:e.ownerField?this.processViewEvent:void 0,processEventScope:this,defaultEventAction:"stopEvent",delete:this.onKeyDelete,backspace:this.onKeyDelete,right:this.onKeyRight,left:this.onKeyLeft,A:{ctrl:!0,handler:this.onSelectAllKeyPress},priority:1002,scope:this}},processViewEvent:function(e){var t=this.getView().ownerField;if(!t||!t.inputElement.dom.value.length&&t.getValueCollection().getCount())return e;this.clearLocation()},onKeyLeft:function(e){var t=this.getView(),i=this.location,n={event:e};return e.preventDefault(),i?i.isFirstDataItem()||(e.shiftKey||t.getSelectable().deselectAll(),this.movePrevious(n)):this.setLocation(t.getLastDataItem(),n),!0},onKeyRight:function(e){var t=this.getView(),i=this.location;return e.preventDefault(),i&&(i.isLastDataItem()?(t.getSelectable().deselectAll(),this.clearLocation()):(e.shiftKey||t.getSelectable().deselectAll(),this.moveNext({event:e}))),!0},onKeyDelete:function(e){var t,i,n,r=this.getView(),s=r.ownerField;s&&((i=(t=r.getSelectable()).getSelectedRecords()).length?(t.deselect(i),s.getValueCollection().remove(i),(n=this.getLocation())&&(n.isLast()&&e.keyCode===e.DELETE?this.clearLocation():r.dataItems.length&&t.select(n.refresh().record))):e.keyCode===e.BACKSPACE&&this.onKeyLeft(e))},onNavigate:function(e){var t=this.getView(),i=t.ownerField,n=this.getLocation;i?n&&t.getSelectable().isSelected(n.record)||Ext.dataview.NavigationModel.prototype.onNavigate.call(this,e):this.callParent([e])}}}),Ext.define("Ext.field.trigger.Expand",{extend:Ext.field.trigger.Trigger,xtype:"expandtrigger",alias:"trigger.expand",classCls:Ext.baseCSSPrefix+"expandtrigger",isExpandTrigger:!0,handler:"onExpandTap",scope:"this"}),Ext.define("Ext.field.Picker",{extend:Ext.field.Text,xtype:"pickerfield",config:{picker:{lazy:!0,$value:"auto"},floatedPicker:{lazy:!0,$value:null},edgePicker:{lazy:!0,$value:null},clearable:!1,matchFieldWidth:!0,floatedPickerAlign:"tl-bl?",pickerSlotAlign:"center",hideTrigger:!1,focusTrap:{lazy:!0,$value:{tabIndex:-1,cls:"x-hidden-clip"}}},triggers:{expand:{type:"expand"}},alignTarget:"bodyElement",keyMap:{scope:"this",DOWN:"onDownArrow",ESC:"onEsc"},keyMapTarget:"inputElement",autoComplete:!1,classCls:Ext.baseCSSPrefix+"pickerfield",initialize:function(){this.callParent(),Ext.on("hide","onGlobalHide",this),this.inputElement.on("click","onInputElementClick",this)},onFocusEnter:function(e){this.callParent([e]),Ext.isTouchMode()&&e.event.toElement===this.inputElement.dom&&(this.getFocusTrap().focus(),this.expand())},onFocusMove:function(e){var t;this.callParent([e]),Ext.isTouchMode()&&(t=this.getFocusTrap(),e.fromElement===t.dom&&e.toElement===this.getFocusEl().dom&&(this.getEditable()?this.collapse():(t.focus(),this.expand())))},onFocusLeave:function(e){this.callParent([e]),this.collapse()},onEsc:function(e){Ext.isIE&&e.preventDefault(),this.expanded&&(this.collapse(),e.stopEvent())},onDownArrow:function(e){150<e.time-this.lastDownArrow&&delete this.lastDownArrow,this.expanded?!e.stopped&&e.time-this.lastDownArrow<150&&delete this.lastDownArrow:(e.stopEvent(),this.onExpandTap(),this.setPickerLocation(!0),this.lastDownArrow=e.time)},setPickerLocation:Ext.emptyFn,updateHideTrigger:function(e){var t=this.getTriggers(),i=t&&t.expand;i&&i.setHidden(e)},applyPicker:function(e){var t,i=this,n={show:"onPickerShow",hide:"onPickerHide",scope:i},r=e;return r?Ext.isObject(e)&&(r=null,e.isWidget||e.xtype||(t=e,r="auto")):r="auto",r&&("auto"===r&&(r=i.getAutoPickerType()),"edge"===r?e=i.createEdgePicker(t):"floated"!==r?Ext.raise('Picker type must be "edge" or "floated" not "'+r+'"'):(e=i.createFloatedPicker(t),n.resize=n.hiddenchange="realignFloatedPicker")),e.isWidget?e.ownerField=i:(e=Ext.apply({ownerField:i},e),i.fireEvent("beforepickercreate",i,e),e=Ext.create(e)),i.pickerType=r||(e.isViewportMenu?"edge":"floated"),i.fireEvent("pickercreate",i,e),e.on(n),e},getAutoPickerType:function(){return Ext.platformTags.phone?"edge":"floated"},getRefItems:function(e){var t=this.callParent([e]),i=this.getConfig("picker",!1,!0);return i&&(t.push(i),e&&Ext.Array.push(t,i.getRefItems(e))),t},updatePicker:function(e){var t=this.getValue();e&&e.setValue&&null!=t&&("floated"!==this.pickerType&&!e.isPicker||e.setValue(t))},applyFocusTrap:function(e){var t=this.el.appendChild(Ext.dom.Element.create(e));return t.$isFocusTrap=!0,t},onResize:function(){var e,t=this.getConfig("picker",!1,!0),i=Ext.GlobalEvents;t&&"floated"===this.pickerType&&t.isVisible()&&((e=this.up("[scrollable]"))&&(e=e.getScrollable(),i.suspendEvent("scroll"),e.ensureVisible(this.el)),this.realignFloatedPicker(),e&&Ext.defer(i.resumeEvent,100,i,["scroll"]))},realignFloatedPicker:function(e){(e=e||this.getConfig("picker",!1,!0))&&e.isVisible()&&(this.getMatchFieldWidth()&&e.setWidth(this[this.alignTarget].getWidth()),e.realign(this[this.alignTarget],this.getFloatedPickerAlign(),{minHeight:100}),Ext.keyboardMode||this.setPickerLocation())},onInputElementClick:function(e){"mouse"!==e.pointerType||this.getEditable()||this.getReadOnly()||this[this.expanded?"collapse":"expand"]()},onExpandTap:function(){return this.expanded?100<Ext.now()-this.expanded&&this.collapse():this.expand(),!1},expand:function(){this.expanded||this.getDisabled()||this.showPicker()},collapse:function(){var e,t=Ext;this.expanded&&(e=this.getPicker(),"edge"===this.pickerType?t.Viewport.removeMenu(e.getSide(),!0):e.hide())},collapseIf:function(e){this.destroyed||e.within(this.bodyElement,!1,!0)||this.owns(e.target)||this.collapse()},showPicker:function(){var e=this,t=e[e.alignTarget],i=e.getPicker();"floated"===e.pickerType?(e.getMatchFieldWidth()&&i.setWidth(t.getWidth()),i.showBy(t,e.getFloatedPickerAlign(),{minHeight:100}),e.touchListeners=Ext.getDoc().on({translate:!1,touchstart:e.collapseIf,scope:e,delegated:!1,destroyable:!0})):(e.setShowPickerValue(i),i.show())},updatePickerValue:function(e,t){var i=e.getSlots()[0],n={};n[i.name||i.getName()]=t,e.setValue(n)},onPickerShow:function(){this.expanded=Ext.now(),"edge"===this.pickerType&&this.el.dom.scrollIntoView(),"edge"===this.pickerType&&this.el.dom.scrollIntoView(),this.hideEventListeners=Ext.on({mousedown:"collapseIf",scroll:"onGlobalScroll",scope:this,destroyable:!0}),this.fireEvent("expand",this)},onPickerHide:function(){this.expanded=!1,Ext.destroy(this.hideEventListeners,this.touchListeners),this.fireEvent("collapse",this)},doDestroy:function(){this.destroyMembers("picker","hideEventListeners","touchListeners","focusTrap"),this.callParent()},privates:{isFocusing:function(e){return e.event.toElement===this.getFocusTrap().dom||this.callParent([e])},isBlurring:function(e){return e.event.fromElement===this.getFocusTrap().dom||this.callParent([e])},onGlobalHide:function(e){this!==e&&!e.isAncestor(this)||this.collapse()},onGlobalScroll:function(e,t,i){var n=e.getElement();if(this.expanded){if("edge"===this.pickerType)return;this.getPicker().owns(n)||n.dom===document.body||this.collapse()}},revertFocusTo:function(e){Ext.isTouchMode()?this.getFocusTrap().focus():e.focus()},setShowPickerValue:function(e){var t=this.getValue();null!=t&&this.updatePickerValue(e,t)}}}),Ext.define("Ext.picker.Slot",{extend:Ext.dataview.DataView,xtype:"pickerslot",isSlot:!0,config:{title:null,showTitle:!0,cls:Ext.baseCSSPrefix+"picker-slot",name:null,value:null,flex:1,align:"left",displayField:"text",valueField:"value",itemTpl:null,scrollable:{x:!1,y:!0,scrollbars:!1},verticallyCenterItems:!0},focusable:!1,tabIndex:null,focusEl:null,itemsFocusable:!1,scrollToTopOnRefresh:!1,snapSelector:"."+Ext.baseCSSPrefix+"dataview-item",deselectable:!1,navigationModel:{type:"boundlist",keyboard:!1},onFocusEnter:Ext.emptyFn,onFocusLeave:Ext.emptyFn,applyTitle:function(e){return e=e&&Ext.create("Ext.Component",{cls:Ext.baseCSSPrefix+"picker-slot-title",docked:"top",html:e})},updateTitle:function(e,t){e&&(this.add(e),this.setupBar()),t&&this.remove(t)},updateShowTitle:function(e){var t=this.getTitle(),i=e?"show":"hide";t&&(t.on(i,this.setupBar,this,{single:!0,delay:50}),t[e?"show":"hide"]())},updateDisplayField:function(e){this.config.itemTpl||this.setItemTpl('<div class="'+Ext.baseCSSPrefix+'picker-item {cls}<tpl if="extra"> '+Ext.baseCSSPrefix+'picker-invalid</tpl>">{'+e+"}</div>")},updateAlign:function(e,t){this.element.swapCls(Ext.baseCSSPrefix+"picker-"+t,Ext.baseCSSPrefix+"picker-"+e)},applyData:function(e){var t,i,n,r=[],s=e&&e.length,o=this.getDisplayField(),a=this.getDisplayField();if(e&&Ext.isArray(e)&&s)for(t=0;t<s;t++)i=e[t],n={},Ext.isArray(i)?(n[a]=i[0],n[o]=i[1]):Ext.isPrimitive(i)?(n[a]=i,n[o]=i):Ext.isObject(i)&&(n=i),r.push(n);return e},initialize:function(){this.callParent(),this.on({scope:this,painted:"onPainted",single:!0})},onPainted:function(){this.setupBar()},onResize:function(){var e=this.getValue();e&&this.setValue(e)},getPicker:function(){return this.picker||(this.picker=this.getParent()),this.picker},setupBar:function(){if(this.isPainted()){var e,t=this,i=t.getTitle(),n=t.getShowTitle()&&i?i.el.measure("h"):0,r=t.getPicker().bar.measure("h");t.getVerticallyCenterItems()&&(e=Math.ceil((t.el.measure("h")-n-r)/2),t.bodyElement.setStyle({"padding-top":e+"px"}),t.bottomSpacer?t.bottomSpacer.setHeight(e):t.bottomSpacer=t.add({xtype:"component",scrollDock:"end",height:e,style:"pointer-events: none"})),t.setValue(t.getValue())}},getScrollableClientRegion:function(){return this.picker.bar.getClientRegion()},navigateToItem:function(e,t){var i=this.getNavigationModel(),n=i.getLocation(),r=i.createLocation(e);!n||n.equals(r)?this.getScrollable().scrollIntoView(e,!1,t):i.setLocation(r,{animation:t})},onScrollEnd:function(e,t){var i,n,r=this.picker,s=r.ownerField,o=s&&s.getMultiSelect&&s.getMultiSelect(),a=this.getViewItems();r.isVisible()&&(n=a[i=Ext.Number.constrain(Math.round(t/Ext.fly(a[0]).measure("h")),0,a.length-1)])&&(o?this.navigateToItem(n):this.setValue(this.getStore().getAt(i).get(this.getValueField()),!0),this.fireEvent("slotpick",this,this.getValue(),n))},getValue:function(e){if(!1===this._value)return null;if(!e)return this._value;var t=this.getValueField(),i=this.picker.ownerField,n=i&&i.getMultiSelect&&i.getMultiSelect(),r=this.getSelected();return r.getCount()?n?r.collect(t,"data"):r.first().get(t):null},setValue:function(e,t){var i,n=this.getStore(),r=!Ext.isEmpty(e)&&n?n.findExact(this.getValueField(),e):-1;-1===r?e=null:i=n.getAt(r),i&&(this.select(i),this.refreshCounter&&this.getNavigationModel().setLocation(i,{animation:t})),this._value=e}}),Ext.define("Ext.picker.Picker",{extend:Ext.Sheet,xtype:"picker",alternateClassName:"Ext.Picker",isPicker:!0,config:{doneButton:!0,cancelButton:!0,useTitles:!1,slots:null,value:null,height:220,layout:{type:"hbox",align:"stretch"},centered:!1,left:0,right:0,bottom:0,defaultType:"pickerslot",toolbarPosition:"top",toolbar:{xtype:"titlebar"},side:"bottom"},baseCls:Ext.baseCSSPrefix+"picker",floated:!0,focusable:!0,tabIndex:-1,constructor:function(e){this.callParent([e]),e&&"value"in e&&this.setValue(e.value)},initialize:function(){this.callParent(),this.on({scope:this,delegate:"pickerslot",slotpick:"onSlotPick"})},getTemplate:function(){var e=Ext.baseCSSPrefix,t=this.callParent();return t[0].children[0].children=[{reference:"mask",cls:e+"picker-mask",children:[{reference:"bar",cls:e+"picker-bar"}]}],t},applyToolbar:function(e,t){return e&&(!0===e&&(e={}),Ext.applyIf(e,{docked:this.getToolbarPosition()})),Ext.factory(e,"Ext.TitleBar",t)},updateToolbar:function(e){e&&this.add(e)},applyDoneButton:function(e,t){return e&&(!0===e&&(e={}),"string"==typeof e&&(e={text:e}),Ext.applyIf(e,{align:"right",text:"Done"})),Ext.factory(e,"Ext.Button",t)},updateDoneButton:function(e){var t=this.getToolbar();e&&(t.add(e),e.on("tap",this.onDoneButtonTap,this))},applyCancelButton:function(e,t){return e&&(Ext.isBoolean(e)&&(e={}),"string"==typeof e&&(e={text:e}),Ext.applyIf(e,{align:"left",text:"Cancel"})),Ext.factory(e,"Ext.Button",t)},updateCancelButton:function(e){var t=this.getToolbar();e&&(t.add(e),e.on("tap",this.onCancelButtonTap,this))},updateUseTitles:function(e){var t,i,n=this.getInnerItems(),r=n.length,s=Ext.baseCSSPrefix+"use-titles";for(this.toggleCls(s,e),t=0;t<r;t++)(i=n[t]).isSlot&&i.setShowTitle(e)},applySlots:function(e){if(e){var t,i=e.length;for(t=0;t<i;t++)e[t].picker=this}return e},updateSlots:function(e){var t,i=Ext.baseCSSPrefix;this.removeAll(),e&&this.add(e),0<(t=this.getInnerItems()).length&&(t[0].addCls(i+"first"),t[t.length-1].addCls(i+"last")),this.updateUseTitles(this.getUseTitles()),this.setValue(this.getValue())},onDoneButtonTap:function(){var e=this._value,t=this.getValue(!0);t!==e&&(this._values=this._value=t,this.fireEvent("change",this,t)),this.hide(),Ext.util.InputBlocker.unblockInputs()},onCancelButtonTap:function(){this.fireEvent("cancel",this),this.hide(),Ext.util.InputBlocker.unblockInputs()},onSlotPick:function(e){this.fireEvent("pick",this,this.getValue(!0),e)},afterShow:function(){this.callParent(),this.scrollSlotsIntoView(),Ext.util.InputBlocker.blockInputs()},updateDisplayed:function(e,t){this.callParent([e,t]),Ext.util.InputBlocker.blockInputs()},scrollSlotsIntoView:function(){var e,t,i,n=this.getInnerItems();for(e=0;e<n.length;e++)i=(t=n[e]).getNavigationModel().location,t.navigateToItem(i?i.item:t.itemFromRecord(0))},setValue:function(e,t){var i,n,r,s,o=this.getInnerItems(),a=o.length;if(!e)for(e={},r=0;r<a;r++)e[o[r].getName()]=null;for(i in e)for(s=e[i],r=0;r<o.length;r++)if((n=o[r]).getName()===i){t?n.setValueAnimated(s):n.setValue(s);break}return this._values=this._value=e,this},setValueAnimated:function(e){this.setValue(e,!0)},getValue:function(e){var t,i,n={},r=this.getItems().items,s=r.length;if(e){for(i=0;i<s;i++)(t=r[i])&&t.isSlot&&(n[t.getName()]=t.getValue(e));this._values=n}return this._values},getValues:function(){return this.getValue()}}),Ext.define("Ext.picker.Tablet",{extend:Ext.Panel,xtype:"tabletpicker",isPicker:!0,focusable:!0,tabIndex:-1}),Ext.define("Ext.picker.SelectPicker",{extend:Ext.picker.Picker,xtype:"selectpicker",constructor:function(e){var t=e.ownerCmp,i=t.getId()+"-picker",n=Ext.apply({ownerField:t,id:i,slots:[{id:i+"-slot",ownerField:t,selectable:e.selectable||!0,align:t.getPickerSlotAlign(),name:t.getValueField(),valueField:t.getValueField(),displayField:t.getDisplayField(),value:t.getValue(),store:t._pickerStore||t.getStore(),itemTpl:t.getItemTpl(),itemCls:t.getItemCls()}]},e);t.getMultiSelect()?(n.cancelButton=!1,n.slots[0].selectable={selected:t.getValueCollection(),selectedRecord:t.getSelection(),deselectable:!0,mode:"multi"}):n.listeners={change:"onPickerChange",scope:this},this.callParent([n]),this.slot=Ext.getCmp(i+"-slot")},onPickerChange:function(e,t){var i=this.ownerField;i.setValue(i.findRecordByValue(t[i.getValueField()]))},refresh:function(){this.slots.refresh()},setDisableSelection:function(e){return this.slot.setDisableSelection(e)},setValue:function(e){return this.slot&&this.slot.setValue(e),this},getEmptyText:function(){return this.slot.getEmptyText()},getItemCount:function(){return this.slot.getItemCount()},getNavigationModel:function(){return this.slot.getNavigationModel()},getSelectable:function(){return this.slot.getSelectable()},getViewItems:function(){return this.slot.getViewItems()},getStore:function(){return this.slot.getStore()},setStore:function(e){this.slot.setStore(e)},deselectAll:function(){this.slot.deselectAll()}}),Ext.define("Ext.field.Select",{extend:Ext.field.Picker,xtype:"selectfield",alternateClassName:"Ext.form.Select",isSelectField:!0,config:{valueCollection:{rootProperty:"data"},valueField:"value",itemTpl:!1,itemCls:null,displayTpl:null,displayField:"text",store:null,options:null,hiddenName:null,autoSelect:!1,autoFocus:!0,autoFocusLast:!0,selection:null,autoLoadOnValue:!1,forceSelection:!0,valueNotFoundText:null,selectOnTab:!0,multiSelect:null,delimiter:",",filterPickList:!1,collapseOnSelect:null,chipView:{$value:{xtype:"chipview",tabIndex:null,focusable:!1,itemsFocusable:!1,focusedCls:"",navigationModel:"fieldchipview",selectable:{mode:"multi"},closable:!0,closeHandler:"up.onChipCloseTap"},lazy:!0},recordCreator:null,recordCreatorScope:null},editable:!1,floatedPicker:{xtype:"boundlist",infinite:!1,navigationModel:{disabled:!0},scrollToTopOnRefresh:!1,loadingHeight:70,maxHeight:300,floated:!0,axisLock:!0,hideAnimation:null},edgePicker:{xtype:"selectpicker",cover:!0},classCls:Ext.baseCSSPrefix+"selectfield",multiSelectCls:Ext.baseCSSPrefix+"multiselect",twoWayBindable:{selection:1},publishes:{selection:1},applyValueCollection:function(e){return e.isCollection||(e=new Ext.util.Collection(e)),e.addObserver(this),e},createSelectionRecord:function(e){return new(this.getStore().getModel())(e)},completeEdit:Ext.emptyFn,expand:function(){this.getStore()&&this.callParent()},getRefItems:function(e){var t=this.callParent([e]),i=this.chipView;return i&&(t.push(i),e&&Ext.Array.push(t,i.getRefItems(e))),t},maybeCollapse:function(e){var t=e.to&&e.to.record,i=this.getMultiSelect(),n=this.getSelection();i||t!==n||this.collapse()},onCollectionRemove:function(e,t){var i=e.getRange();t.replacement||(this.processingCollectionMutation=!0,this.setSelection(i.length?this.getMultiSelect()?i:i[0]:null),this.processingCollectionMutation=!1)},onCollectionAdd:function(e,t){var i=e.getRange();this.processingCollectionMutation=!0,this.setSelection(this.getMultiSelect()?i:i[0]),this.processingCollectionMutation=!1},onCollectionEndUpdate:function(){var e,t,i=this._pickerStore;this.getMultiSelect()?((t=(e=this.chipView).getNavigationModel()).location&&!this.getValueCollection().contains(t.location.record)&&t.clearLocation(),e.getSelectable().refreshSelection()):this.setFieldDisplay(),i&&this.getFilterPickList()&&i.getData().onFilterChange()},clearValue:function(){this.forceSetValue(null),this.syncEmptyState()},applyValue:function(e,t){var i;return this.getOptions(),i=this.getStore(),this.syncMode="value",e&&e.isEntity?(i&&i.getDataSource().contains(e)||(e.isEntered=!0),void this.setSelection(e)):(this.isConfiguring&&(this.originalValue=e),i&&e&&(!this.getAutoLoadOnValue()||i.isLoaded()||i.hasPendingLoad()||i.load()),this.transformValue(e))},updateValue:function(e,t){this.syncValue(),(this.getMultiSelect()?e&&t&&Ext.Array.equals(e,t):e===t)||Ext.field.Field.prototype.updateValue.call(this,e,t)},transformValue:function(e){return null==e||""===e?e=this.getForceSelection()?null:"":this.getMultiSelect()?e=Ext.Array.from(e):Ext.isIterable(e)&&(e=e[0]),e},findRecordByValue:function(t){var e,i=this.getStore(),n=this.getValueField(),r=null;return i&&(e=i.byValue.get(t))&&(r=e[0]||e),r=r||this.getValueCollection().findBy(function(e){return e.get(n)===t})},findRecordByDisplay:function(e){var t,i=this.getStore(),n=!1;return i&&(t=i.byText.get(e))&&(n=t[0]||t),n},applyChipView:function(e,t){return Ext.updateWidget(t,e,this,"createChipView")},updateChipView:function(e){e&&e.on({element:"bodyElement",touchstart:"onChipBodyTouchStart",tap:"onChipBodyTap",scope:this,priority:1e3}),this.chipView=e},applySelection:function(e,t){var i=e&&this.getMultiSelect();if(e=i?Ext.Array.from(e):e,i?!t||!Ext.Array.equals(e,t):e!==t)return e||null},updateMultiSelect:function(e){var t=this,i=t.getConfig("picker",!1,!0),n=t.chipView,r=t.getValueCollection(),s=r.last();e?(n?n.show():(t.getChipView(),t.chipView.render(t.inputWrapElement.dom,t.inputElement.dom)),t.chipView.bodyElement.dom.appendChild(t.inputElement.dom),t.setInputValue(""),s&&t.setSelection([s])):(n&&(t.inputWrapElement.dom.insertBefore(t.inputElement.dom,t.afterInputElement.dom),n.hide()),s&&r.splice(0,1e99,[s])),i&&i.getSelectable().setConfig({deselectable:e,mode:e?"multi":"single"}),t.el.toggleCls(t.multiSelectCls,e)},updateSelection:function(e,t){var i,n,r=this,s=null==e,o=r.getMultiSelect(),a=r.getValueCollection(),l=r.getValueField(),c=r._value,u=null;r._ignoreSelection||r.destroyed||r.destroying||!r.processingCollectionMutation&&(s||t&&e.length<t.length||!a.containsAll(e))&&(n=[0,a.getCount()],s||n.push(e),a.splice.apply(a,n),r.destroyed)||(e?(l&&(o?(u=a.collect(l,"data")).length!==a.length&&Ext.raise("The valueField of a combobox must be unique"):u=e.get(l),r.setValue(u)),!1===r.fireEvent("select",r,e)&&(r.setValue(c),r._selection=t)):r.clearValue(),r.destroyed||(i=r.getConfig("picker",!1,!0))&&i.isVisible()&&(o&&!r.getCollapseOnSelect()&&r.getStore().getCount()||(!o&&e&&t&&e.id===t.id?i.refresh():e&&e.isEntered||r.collapse())))},getRecordDisplayData:function(e){return e.getData()},createFloatedPicker:function(){var e=this,t=e.getMultiSelect(),i=Ext.merge({ownerCmp:e,store:e._pickerStore||e.getStore(),selectable:{selected:e.getValueCollection(),selectedRecord:e.getSelection(),deselectable:!!t,mode:t?"multi":"single"},itemTpl:e.getItemTpl(),itemCls:e.getItemCls()},e.getFloatedPicker());return i.navigationModel.navigateOnSpace=!e.getEditable(),i},createEdgePicker:function(){return Ext.merge({ownerCmp:this},this.getEdgePicker())},realignFloatedPicker:function(e){(e=e||this.getConfig("picker",!1,!0))&&e.isVisible()&&(e.getItemCount()||e.getStore().hasPendingLoad()||this.collapse(),this.callParent([e]))},setPickerLocation:function(e){var t,i,n=this.getConfig("picker",!1,!0);n&&this.expanded&&(t=n.getStore(),n.getItemCount()&&((i=n.getSelectable().getLastSelected())&&t.contains(i)||((e||this.getAutoFocusLast())&&(i=(i=n.getNavigationModel().lastLocation)&&i.refresh()),i||!e&&!this.getAutoFocus()||(i=t.getAt(0))),n.getNavigationModel().setLocation(i),e||Ext.setKeyboardMode(!0)))},updatePicker:function(e,t){var i=this.getFilterPickList();e&&i&&e.getSelectable().addIgnoredFilter(i),this.callParent([e,t])},updatePickerValue:function(e,t){var i=this.getValueField(),n={};t=t||this.getValue(),n[i]=t,e.setValue(n)},applyItemTpl:function(e){return!1===e&&(e='<span class="x-list-label">{'+this.getDisplayField()+":htmlEncode}</span>"),e},applyDisplayTpl:function(e){return e&&!e.isTemplate&&(e=new Ext.XTemplate(e)),e},applyOptions:function(e){if(e){var t,i,n,r=e.length,s=this.getValueField(),o=this.getDisplayField();for(e=Ext.Array.slice(e),t=0;t<r;t++)i=e[t],Ext.isPrimitive(i)&&(e[t]=n={},n.id=i,n[s]=i,o&&o!==s&&(n[o]=i));e=Ext.data.StoreManager.lookup({fields:[s,o],data:e})}return e},updateOptions:function(e,t){e?this.setStore(e):t===this.getStore()&&this.setStore(null)},applyStore:function(e){return e=e&&Ext.data.StoreManager.lookup(e)},updateStore:function(e,t){var i,n=this.getValueField(),r=this.getDisplayField();t&&(t.getAutoDestroy()?t.destroy():t.byValue=t.byText=Ext.destroy(t.byValue,t.byText)),e&&(i={byValue:{rootProperty:"data",unique:!1,property:n}},r!==n&&(i.byText={rootProperty:"data",unique:!1,property:r}),e.setExtraKeys(i),r===n&&(e.byText=e.byValue),e.on({scope:this,add:"onStoreDataChanged",remove:"onStoreDataChanged",update:"onStoreRecordUpdated",load:{fn:"onStoreLoad",priority:-1},refresh:"onStoreRefresh"}),e.isLoaded()&&!e.hasPendingLoad()?this.syncValue():null==this.getValue()||!this.getAutoLoadOnValue()||e.isLoaded()||e.hasPendingLoad()||e.load()),this.updatePickerStore()},applyValueField:function(e){return null==e&&(e=this.getDisplayField()),e},updateValueField:function(e){var t=this.getStore();t&&!this.isConfiguring&&(t.byValue.setCollection(null),t.setExtraKeys({byValue:{rootProperty:"data",unique:!1,property:e}}))},applyDisplayField:function(e){return null==e&&(e=this.getValueField()),e},updateDisplayField:function(e){var t=this.getStore();t&&!this.isConfiguring&&(t.byText.setCollection(null),t.setExtraKeys({byText:{rootProperty:"data",unique:!1,property:e}}))},onStoreLoad:function(e,t,i){var n=this.isFiltering;this.isFiltering=!1,i&&(this.syncMode=n?"filter":"store",this.syncValue())},syncValue:function(){var e,t,i,n,r,s=this,o=s.getStore(),a=s.getForceSelection(),l=s.getValueNotFoundText();if(!s.reconcilingValue&&o&&o.isLoaded()&&!o.hasPendingLoad()){if(s.reconcilingValue=!0,s.getSelection(),(e={})[s.syncMode]=!0,!(t=null==(n=(i=e.input||e.filter)?s.getInputValue():s.getValue())||""===n)){if(s.getMultiSelect())return s.syncMultiValues(Ext.Array.from(n));(r=(i?o.byText:o.byValue).get(n))?r.isEntity||(r=r[0]):a||(r=s.findRecordByValue(n))}t||r||a?i||e.store?!r&&a&&(s.setValue(null),s.setSelection(null),e.filter||s.setFieldDisplay()):t?s.mustAutoSelect()?(r=o.first(),"initial"===s.getAutoSelect()&&s.setAutoSelect(!1)):s.setSelection(null):!r&&l&&s.setError(l):r=s.createEnteredRecord(n),r&&s.setSelection(r),s.reconcilingValue=!1}},syncMultiValues:function(e){var t,i,n,r,s,o=this,a=[],l=[],c=o.getForceSelection(),u=o.getValueField(),d=o.getValueCollection();for(r=0,n=e.length;r<n;r++)(i=t=e[r])&&i.isEntity||(i=(i=o.findRecordByValue(s=i))||d.find(u,s)),i||c||!i&&t&&(i=o.createEnteredRecord(t)),i&&(a.push(i),l.push(i.get(u)));a.length?(o._value=l,o.setSelection(a)):(o._value=null,o.setSelection()),o.reconcilingValue=!1},onStoreDataChanged:function(){var e;this.getForceSelection()&&null!=(e=this.getValue())&&this.setValue(e)},onStoreRecordUpdated:function(e,t){this.getValueCollection().contains(t)&&this.updateSelection(this.getSelection()),this.getMultiSelect()||this.setFieldDisplay()},onStoreRefresh:function(e){var t,i,n,r,s,o=this.getConfig("picker",!1,!0),a=this.getValueCollection();o&&(t=o.getSelectable().getSelected(),(s=(r=o.getNavigationModel()).getLocation())&&!o.getStore().contains(s.record)&&r.clearLocation()),t!==a&&(i=[],this.getPrimaryFilter&&i.push(this.getPrimaryFilter()),(n=this.getFilterPickList())&&i.push(n),Ext.dataview.selection.Model.refreshCollection(a,e.getData(),i,Ext.dataview.BoundList.prototype.beforeSelectionRefresh))},reset:function(){var e,t=this.getConfig("picker",!1,!0),i=this.originalValue||null;return this.getAutoSelect()?(e=this.getStore(),i=null!=i?i:e&&e.getAt(0)):t&&t.deselectAll(),this.setValue(i),this},doDestroy:function(){var e=this.getStore();e&&!e.destroyed&&e.getAutoDestroy()&&e.destroy(),this.destroyMembers("options","chipView"),this.callParent()},privates:{syncMode:null,createChipView:function(e){var t=Ext.merge({ownerField:this,ownerCmp:this,store:{data:this.getValueCollection()}},e);return t.displayField||t.displayTpl||(t.displayField=this.getDisplayField()),t},createEnteredRecord:function(e){var t,i,n=this.getRecordCreator(),r=this.getDisplayField(),s=this.getValueField();return(i=n?Ext.callback(n,this.getRecordCreatorScope(),[e,this.getStore().getModel(),this],0,this):((t={})[r]=e,s&&r!==s&&(t[s]=e),this.createSelectionRecord(t)))&&(i.isEntered=!0),i},hasValue:function(){return this.callParent()||this.getValueCollection().getCount()},onChipCloseTap:function(e,t){var i=t.record;return e.getNavigationModel().clearLocation(),e.getSelectable().deselect(i),this.getValueCollection().remove(i),t.event.stopEvent(),!1},onChipBodyTouchStart:function(e){"touch"===e.pointerType||this.containsFocus||(this.inputElement.focus(),e.preventDefault())},onChipBodyTap:function(e){"touch"!==e.pointerType||this.containsFocus||(this.inputElement.focus(),e.preventDefault()),e.getTarget("."+Ext.Chip.prototype.classCls)||this.onInputElementClick(e)},mustAutoSelect:function(){var e=this.getAutoSelect();return e&&!this.isConfiguring&&"initial"!==e&&(e=!this.getClearable()&&this.getRequired()),!!e},applyFilterPickList:function(e,t){var i=this._pickerStore;return t&&t.isFilter&&i&&i.removeFilter(t),e=e&&new Ext.util.Filter({scope:this,filterFn:this.filterPicked})},updateFilterPickList:function(e,t){var i=this.getConfig("picker",!1,!0);i&&(e?i.getSelectable().addIgnoredFilter(e):t&&i.getSelectable().removeIgnoredFilter(t)),this.updatePickerStore(),i&&i.setDisableSelection(e)},filterPicked:function(e){return!this.getValueCollection().contains(e)},updatePickerStore:function(){var e,t=this,i=t.getConfig("picker",!1,!0),n=t.getStore(),r=t.getFilterPickList()||void 0,s=n;t.getQueryMode&&"local"===t.getQueryMode()||r?(e=[],t.getPrimaryFilter&&e.push(t.getPrimaryFilter()),r&&e.push(r),t._pickerStore&&t._pickerStore.isChainedStore?s=t._pickerStore.setConfig({source:n,filters:e}):t._pickerStore=s=Ext.Factory.store({type:"chained",source:n,filters:e})):t._pickerStore=s=n,i&&i.setStore(s)},setFieldDisplay:function(){var e,t,i="";this.getMultiSelect()||((e=this.getValueCollection().first())&&(i=(t=this.getDisplayTpl())?t.apply(this.getRecordDisplayData(e)):e.get(this.getDisplayField())),this.setInputValue(i),this.syncEmptyState())}},rawToValue:Ext.emptyFn}),Ext.define("Ext.field.trigger.Date",{extend:Ext.field.trigger.Expand,xtype:"datetrigger",alias:"trigger.date",classCls:Ext.baseCSSPrefix+"datetrigger"}),Ext.define("Ext.picker.Date",{extend:Ext.picker.Picker,xtype:"datepicker",alternateClassName:"Ext.DatePicker",config:{yearFrom:1980,yearTo:(new Date).getFullYear(),monthText:"Month",dayText:"Day",yearText:"Year",slotOrder:["month","day","year"],doneButton:!0},initialize:function(){this.callParent(),this.on({scope:this,delegate:"> slot",slotpick:this.onSlotPick})},setValue:function(e,t){return Ext.isDate(e)&&(e={day:e.getDate(),month:e.getMonth()+1,year:e.getFullYear()}),this.callParent([e,t]),this.rendered&&this.onSlotPick(),this},getValue:function(e){var t,i,n,r,s,o,a={},l=this.getItems().items,c=l.length;for(o=0;o<c;o++)(s=l[o]).isSlot&&(a[s.getName()]=s.getValue(e));return null===a.year&&null===a.month&&null===a.day?null:(r=Ext.isNumber(a.year)?a.year:1,n=Ext.isNumber(a.month)?a.month:1,i=Ext.isNumber(a.day)?a.day:1,n&&r&&n&&i&&(t=this.getDaysInMonth(n,r)),i=t?Math.min(i,t):i,new Date(r,n-1,i))},updateYearFrom:function(){this.initialized&&this.createSlots()},updateYearTo:function(){this.initialized&&this.createSlots()},updateMonthText:function(e,t){var i,n,r=this.getInnerItems,s=r.length;if(this.initialized)for(n=0;n<s;n++)("string"==typeof(i=r[n]).title&&i.title===t||i.title.html===t)&&i.setTitle(e)},updateDayText:function(e,t){var i,n,r=this.getInnerItems,s=r.length;if(this.initialized)for(n=0;n<s;n++)("string"==typeof(i=r[n]).title&&i.title===t||i.title.html===t)&&i.setTitle(e)},updateYearText:function(e){var t,i,n=this.getInnerItems,r=n.length;if(this.initialized)for(i=0;i<r;i++)(t=n[i]).title===this.yearText&&t.setTitle(e)},constructor:function(){this.callParent(arguments),this.createSlots()},createSlots:function(){for(var e,t,i,n=this,r=n.getSlotOrder(),s=n.getYearFrom(),o=n.getYearTo(),a=[],l=[],c=[],u=[],d=o<s;s&&(a.push({text:s,value:s}),s!==o);)d?s--:s++;for(i=n.getDaysInMonth(1,(new Date).getFullYear()),t=0;t<i;t++)l.push({text:t+1,value:t+1});for(t=0,e=Ext.Date.monthNames.length;t<e;t++)c.push({text:Ext.Date.monthNames[t],value:t+1});r.forEach(function(e){u.push(n.createSlot(e,l,c,a))}),n.setSlots(u)},createSlot:function(e,t,i,n){var r;switch(e){case"year":r={name:"year",align:"center",data:n,title:this.getYearText(),flex:3};break;case"month":r={name:e,align:"right",data:i,title:this.getMonthText(),flex:4};break;case"day":r={name:"day",align:"center",data:t,title:this.getDayText(),flex:2}}return this._value&&(r.value=this._value[e]),r},onSlotPick:function(){var e,t,i,n,r,s,o,a,l,c,u,d=[];if(!this.isConfiguring&&(e=this.getValue(!0),t=this.getDaySlot(),this.callParent(arguments),t&&(i=t.getValueField(),r=(n=t.getStore()).getData(),o=n.getCount(),a=e.getFullYear(),l=e.getMonth(),o!==(s=this.getDaysInMonth(l+1,a))))){if(o<s){for(c=o;c<s;c++)d.push(n.createModel({text:c+1,value:c+1}));u=[o,0,d]}else u=[s,5];r.splice.apply(r,u),-1<(c=n.find(i,e.getDate()))&&(t.navigateToItem(t.mapToItem(c)),t.setValue(t.getValue(!0)))}},getDaySlot:function(){var e,t,i=this.getInnerItems(),n=i.length;if(this.daySlot)return this.daySlot;for(e=0;e<n;e++)if((t=i[e]).isSlot&&"day"===t.getName())return this.daySlot=t;return null},getDaysInMonth:function(e,t){return 2===e&&this.isLeapYear(t)?29:[31,28,31,30,31,30,31,31,30,31,30,31][e-1]},isLeapYear:function(e){return!(0!=(3&e)||!(e%100||e%400==0&&e))},onDoneButtonTap:function(){var e=this._value,t=this.getValue(!0),i=this.ownerField,n=t;Ext.isDate(t)&&(n=t.toDateString()),Ext.isDate(e)&&(e=e.toDateString()),n!==e&&(i&&i.onPickerChange(this,t),this.fireEvent("change",this,t)),this.hide(),Ext.util.InputBlocker.unblockInputs()}}),Ext.define("Ext.layout.Carousel",{extend:Ext.layout.Auto,alias:"layout.carousel",config:{visibleChildren:1,frontIndex:{$value:!0,lazy:!0},animation:!0},vertical:!1,targetCls:Ext.baseCSSPrefix+"layout-carousel",wrapCls:Ext.baseCSSPrefix+"layout-carousel-wrap",itemCls:Ext.baseCSSPrefix+"layout-carousel-item",singularCls:Ext.baseCSSPrefix+"layout-carousel-singular",destroy:function(){var e=this.getContainer();Ext.destroy(e.carouselElement,this.activeAnim),this.callParent()},updateContainer:function(e,t){this.callParent([e,t]),e.bodyElement.addCls(this.wrapCls),e.carouselElement=e.getRenderTarget().appendChild({cls:this.targetCls}),Ext.override(e,{privates:{getRenderTarget:function(){return this.carouselElement}}})},onContainerInitialized:function(e){this.callParent([e]),this.frontItem||this.setFrontItem(this.getFrontIndex(),!1)},updateVisibleChildren:function(e){var t,i,n,r,s=this.getContainer().getRenderTarget();for(i=this.getLayoutItems(),t=this.calcItemBasis(e)+"%",i.length>e&&(s.setStyle("left","-"+t),s.setStyle("transform","translateX("+t+")")),n=0,r=i.length;n<r;n++)i[n].el.setStyle("flex-basis",t);s.toggleCls(this.singularCls,1===e)},applyFrontIndex:function(e){var t;return"number"!=typeof e&&(e=(t=this.getVisibleChildren()-1)?t%2?Math.floor(t/2)+1:t/2:t),e},applyDuration:function(e){return"number"!=typeof e&&(e=parseInt(e,10)||500),e},calcItemBasis:function(e){return 1===(e=null!=e?e:this.getVisibleChildren())?100:e%2?(100/e).toFixed(5):100/e},insertInnerItem:function(e,t){this.callParent([e,t]),0===t&&(this.frontItem=e),e.el.setStyle("order",t+1),e.el.setStyle("flex-basis",this.calcItemBasis()+"%")},getLayoutItemCount:function(){return this.getLayoutItems().length},getLayoutItems:function(){return this.getContainer().getInnerItems()},getItemIndex:function(e){return this.getContainer().innerIndexOf(e)},shiftIndex:function(e,t){var i=this.getLayoutItemCount();return e+=t,t<0?e=e<0?i-1:e:0<t&&(e=i<=e?0:e),e},getVisibleItems:function(){return this.visibleItems},getEdgeItem:function(e){var t=this.getOrderedLayoutItems();return e<0?t[0]:t[t.length-1]},getFirstVisibleItem:function(){return this.getVisibleItems()[0]},getLastVisibleItem:function(){var e=this.getVisibleItems();return e[e.length-1]},getFrontItem:function(){return this.frontItem},getFrontItemIndex:function(){return this.getItemIndex(this.getFrontItem())},getOrderedLayoutItems:function(){return Ext.Array.clone(this.getLayoutItems()).sort(this.sortByOrder)},setFrontItem:function(e,t){var i,n,r,s,o,a,l,c,u,d,h,f=this,g=f.getContainer().getRenderTarget(),p=f.getFrontIndex(),m=f.getVisibleChildren();if((i=f.getLayoutItems()).length<m)return Ext.Deferred.getCachedResolved();for("number"!=typeof e&&(e=i.indexOf(e)),l=f.calcItemBasis(),g.setStyle("left","-"+l+"%"),r=f.getFrontItem(),f.frontItem=i[e],p++,s=(i=i.slice(e).concat(i.slice(0,e))).indexOf(r),i=i.slice(-p).concat(i.slice(0,i.length-p)),null==t&&(t=f.getAnimation()),t&&("boolean"==typeof t&&(t={}),a=-1<s&&s<=Math.floor(i.length/2)?1:-1,Ext.destroy(f.activeAnim),d=(h=new Ext.Deferred).promise,f.activeAnim=Ext.Animator.run(Ext.apply({element:g,to:{transform:{translateX:l*a+"%"}},callback:function(){f.orderItems(i),h.resolve(),f.activeAnim=null}},t))),f.visibleItems=o=[],c=0,u=i.length;c<u;c++)n=i[c],0<c&&c<=m&&o.push(n),n.$carouselOrder=c+1;return t||(f.orderItems(i),d=Ext.Deferred.getCachedResolved()),o.sort(f.sortByOrder),d},getMoveItem:function(e){var t=this.getFrontItemIndex();return t=this.shiftIndex(t,e),this.getLayoutItems()[t]},cancelAnimation:function(){Ext.destroy(this.activeAnim)},move:function(e,t){return this.setFrontItem(this.getMoveItem(e),t)},prev:function(e){return this.move(-1,e)},next:function(e){return this.move(1,e)},privates:{orderItems:function(e){var t,i,n=e.length;for(t=0;t<n;++t)(i=e[t]).el.setStyle("order",i.$carouselOrder+1)},sortByOrder:function(e,t){return e.$carouselOrder-t.$carouselOrder}}}),Ext.define("Ext.panel.DateView",{extend:Ext.Widget,xtype:"dateview",config:{specialDates:null,specialDays:null,monthOffset:0},cachedConfig:{captionFormat:null,dateCellFormat:null,format:null,headerLength:null,hideCaption:!0,hideOutside:!0,startDay:null,weekendDays:null},element:{reference:"element"},tableTpl:{reference:"tableElement",tag:"table",cellspacing:"0",cellpadding:"0",children:[]},captionTpl:{reference:"captionElement",tag:"caption"},headTpl:{tag:"thead",reference:"headElement"},headRowTpl:{tag:"tr"},headCellTpl:{tag:"th",cls:Ext.baseCSSPrefix+"cell",children:[{tag:"div",cls:Ext.baseCSSPrefix+"inner "+Ext.dom.Element.unselectableCls}]},bodyTpl:{tag:"tbody",reference:"bodyElement"},bodyRowTpl:{tag:"tr"},bodyCellTpl:{tag:"td",cls:Ext.baseCSSPrefix+"cell",tabIndex:-1,children:[{tag:"div",cls:Ext.baseCSSPrefix+"inner "+Ext.dom.Element.unselectableCls}]},rows:6,columns:7,cellCls:Ext.baseCSSPrefix+"cell",emptyCls:Ext.baseCSSPrefix+"empty",weekendDayCls:Ext.baseCSSPrefix+"weekend",disabledDayCls:Ext.baseCSSPrefix+"disabled",specialDateCls:Ext.baseCSSPrefix+"special",todayCls:Ext.baseCSSPrefix+"today",outsideCls:Ext.baseCSSPrefix+"outside",prevMonthCls:Ext.baseCSSPrefix+"prev-month",nextMonthCls:Ext.baseCSSPrefix+"next-month",currentMonthCls:Ext.baseCSSPrefix+"current-month",constructor:function(e){this.firstOfMonth=Ext.Date.getFirstDateOfMonth(new Date),this.callParent([e])},initElement:function(){this.callParent(),this.headCells=this.headElement.query("th"),this.bodyCells=this.bodyElement.query("td"),this.cellMap={}},getMonth:function(){return Ext.Date.add(this.firstOfMonth,Ext.Date.MONTH,this.getMonthOffset())},getTemplate:function(){var e,t,i,n,r=this,s=r.tableTpl,o=r.headRowTpl,a=r.headCellTpl,l=r.bodyRowTpl,c=r.bodyCellTpl,u=r.rows,d=r.columns;for(o=Ext.apply({children:[]},o),l=Ext.apply({children:[]},l),i=0,n=d;i<n;i++)o.children.push(a),l.children.push(c);for((e=Ext.apply({children:[]},r.headTpl)).children.push(o),t=Ext.apply({children:[]},r.bodyTpl),i=0,n=u;i<n;i++)t.children.push(l);return s.children=[r.captionTpl,e,t],[s]},getCellByDate:function(e){return e?this.cellMap[e.getTime()]:null},updateWeekendDays:function(){this.isConfiguring||this.refresh()},updateStartDay:function(e){var t,i,n,r,s=this.headCells,o=this.getWeekendDays(),a=this.weekendDayCls,l=this.getHeaderLength();for(i=0,n=s.length;i<n;i++)r=(i+e)%7,(t=s[i]).firstChild.innerHTML=Ext.Date.getShortDayName(r).substr(0,l),Ext.fly(t).toggleCls(a,!!o[r])},updateSpecialDates:function(){this.isConfiguring||this.refresh()},updateSpecialDays:function(){this.isConfiguring||this.refresh()},applyMonthOffset:function(e){return isNaN(e)?0:e},updateMonthOffset:function(){this.refresh()},updateCaptionFormat:function(e){var t=this.getMonth();t&&this.captionElement.setHtml(Ext.Date.format(t,e))},updateHideCaption:function(e){this.toggleCls(Ext.baseCSSPrefix+"hide-caption",e)},refresh:function(){var e,t,i,n,r,s,o,a,l,c,u,d,h,f=this,g=Ext.Date,p=f.bodyCells;if(!f.refreshing){for(f.refreshing=!0,e=f.getMonth(),0<(t=f.getStartDay()-e.getDay())&&(t-=7),i=g.add(e,g.DAY,t),r=f.cellMap={},d=e.getMonth(),o={today:Ext.Date.clearTime(new Date),weekendDays:f.getWeekendDays(),specialDates:f.getSpecialDates(),specialDays:f.getSpecialDays(),format:f.getFormat(),dateCellFormat:f.getDateCellFormat(),hideOutside:f.getHideOutside()},a=0,l=p.length;a<l;a++)s=p[a],c=(h=(n=g.add(i,g.DAY,a)).getMonth())<d,u=d<h,r[n.getTime()]=s,o.cell=s,o.date=n,o.outside=c||u,o.outsidePrevious=c,o.outsideNext=u,f.refreshCell(o);f.captionElement.setHtml(Ext.Date.format(e,f.getCaptionFormat())),f.refreshing=!1}},refreshCell:function(e){var t,i,n,r=this,s=e.cell,o=e.date,a=o.getDay(),l=o.getTime(),c=e.specialDates,u=e.specialDays,d=[r.cellCls],h=Ext.Date.format(o,e.format),f=e.outside&&e.hideOutside;f?d.push(r.emptyCls):(e.outsidePrevious?d.push(r.outsideCls,r.prevMonthCls):e.outsideNext?d.push(r.outsideCls,r.nextMonthCls):(d.push(r.currentMonthCls),Ext.Date.isEqual(o,e.today)&&d.push(r.todayCls)),e.weekendDays[a]&&d.push(r.weekendDayCls),!i&&u&&(i=u[a]),c&&(i=c.dates[l]||c.re&&c.re.test(h)),i&&d.push(r.specialDateCls)),n=r.getParent().isDateDisabled(o),!f&&n&&d.push(r.disabledDayCls),s.tabIndex=-1,t=f?"&#160;":Ext.Date.format(o,e.dateCellFormat),s.firstChild.innerHTML=t,r.transformCellCls&&r.transformCellCls(o,d),s.className=d.join(" "),s.date=o,s.disabled=n},ownsDate:function(e){var t=this.getMonth();return e.getFullYear()===t.getFullYear()&&e.getMonth()===t.getMonth()},privates:{measurePaneSize:function(){var e=this.element.first();return e.measure("w")+e.getMargin("lr")}}}),Ext.define("Ext.panel.Title",{extend:Ext.Component,xtype:"paneltitle",isPanelTitle:!0,cachedConfig:{textAlign:"left",iconAlign:"left",rotation:0,rotateIcon:null},config:{text:"",icon:null,iconCls:null},weight:-10,inheritUi:!0,element:{reference:"element",cls:Ext.baseCSSPrefix+"unselectable"},template:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",children:[{reference:"iconElement",cls:Ext.baseCSSPrefix+"icon-el "+Ext.baseCSSPrefix+"font-icon"},{reference:"textElement",cls:Ext.baseCSSPrefix+"text-el"}]}],verticalCls:Ext.baseCSSPrefix+"vertical",horizontalCls:Ext.baseCSSPrefix+"horizontal",rotateIconCls:Ext.baseCSSPrefix+"rotate-icon",iconAlignVerticalCls:Ext.baseCSSPrefix+"icon-align-vertical",hasIconCls:Ext.baseCSSPrefix+"has-icon",_textAlignClasses:{left:Ext.baseCSSPrefix+"text-align-left",center:Ext.baseCSSPrefix+"text-align-center",right:Ext.baseCSSPrefix+"text-align-right"},_iconAlignClasses:{top:Ext.baseCSSPrefix+"icon-align-top",right:Ext.baseCSSPrefix+"icon-align-right",bottom:Ext.baseCSSPrefix+"icon-align-bottom",left:Ext.baseCSSPrefix+"icon-align-left"},_rotationClasses:{90:Ext.baseCSSPrefix+"rotate-90",270:Ext.baseCSSPrefix+"rotate-270"},classCls:Ext.baseCSSPrefix+"paneltitle",_titleSuffix:"-title",afterRender:function(){Ext.isSafari&&this.repaintBodyElement(),this.callParent()},updateIcon:function(e,t){this.syncIconVisibility(),this.iconElement.setStyle("background-image",e?"url("+e+")":"")},updateIconAlign:function(e,t){var i=this._iconAlignClasses,n=this.el;t&&n.removeCls(i[t]),e&&n.addCls(i[e]),n.toggleCls(this.iconAlignVerticalCls,"top"===e||"bottom"===e)},updateIconCls:function(e,t){var i=this.iconElement;this.syncIconVisibility(),t&&i.removeCls(t),e&&i.addCls(e)},updateRotation:function(e,t){var i=this.verticalCls,n=this.horizontalCls,r=this.el;t=parseInt(t,10),e=parseInt(e,10),0!==t&&r.removeCls(this._rotationClasses[t]),0===e?r.replaceCls(i,n):r.replaceCls(n,[i,this._rotationClasses[e]]),Ext.isSafari&&this.rendered&&this.repaintBodyElement()},updateRotateIcon:function(e){this.el.toggleCls(this.rotateIconCls,!!e)},updateText:function(e){var t=this.textElement.dom;t.innerHTML=e||"&#160;",t.setAttribute("data-title",e)},updateTextAlign:function(e,t){var i=this._textAlignClasses;t&&this.removeCls(i[t]),e&&this.addCls(i[e])},privates:{repaintBodyElement:function(){var e=this.bodyElement.dom,t=e.style;t.width="-webkit-min-content",e.offsetWidth,t.width=""},syncIconVisibility:function(){this.el.toggleCls(this.hasIconCls,!(!this.getIcon()&&!this.getIconCls()))}},deprecated:{6.5:{configs:{glyph:null}}}}),Ext.define("Ext.panel.DateTitle",{extend:Ext.panel.Title,xtype:"datetitle",classCls:Ext.baseCSSPrefix+"datetitle",template:[{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",children:[{reference:"iconElement",cls:Ext.baseCSSPrefix+"icon-el "+Ext.baseCSSPrefix+"font-icon"},{cls:Ext.baseCSSPrefix+"text-container-el",children:[{reference:"yearElement",cls:Ext.baseCSSPrefix+"year-el"},{reference:"textElement",cls:Ext.baseCSSPrefix+"text-el"}]}]}],config:{split:{cached:!0,$value:!1},titleActive:{cached:!0,$value:!0},year:null},initialize:function(){this.callParent(),this.yearElement.on("tap","onYearTap",this),this.textElement.on("tap","onTextTap",this)},updateSplit:function(e){this.yearElement.setDisplayed(e),this.toggleCls(Ext.baseCSSPrefix+"split",e)},updateTitleActive:function(e){var t=Ext.baseCSSPrefix+"inactive";this.textElement.toggleCls(t,!e),this.yearElement.toggleCls(t,e)},updateYear:function(e){this.yearElement.dom.textContent=e},privates:{onTextTap:function(e){this.fireEvent("titletap",this,e)},onYearTap:function(e){this.fireEvent("yeartap",this,e)}}}),Ext.define("Ext.panel.YearPicker",{extend:Ext.dataview.BoundList,xtype:"yearpicker",classCls:Ext.baseCSSPrefix+"yearpicker",config:{defaultOffset:100,end:void 0,start:void 0},itemConfig:{ui:"yearpicker",tools:null},itemTpl:"{year}",pinFooters:!1,pinHeaders:!1,scrollToTopOnRefresh:!1,initialize:function(){this.callParent(),this.rebuildStore()},focusYear:function(e){var t=this.getStore().getById(e),i=this.mapToItem(t),n=this.getScrollable(),r=n.getEnsureVisibleXY(i.element,{align:{y:"center?"}}).y;n.scrollTo(null,r,!1),this.getNavigationModel().setLocation(t),this.select(t)},onChildTap:function(e){var t=e.record;t&&(e.event.stopEvent(),this.fireEvent("yeartap",this,t.id))},applyEnd:function(e){return e=e||(new Date).getFullYear()+this.getDefaultOffset()},updateEnd:function(){this.rebuildStore()},applyStart:function(e){return e=e||(new Date).getFullYear()-this.getDefaultOffset()},updateStart:function(){this.rebuildStore()},privates:{forceRefreshOnRender:!0,rebuildStore:function(){var e,t,i=this.getStart(),n=this.getEnd(),r=this.getStore();if(!this.isConfiguring){for(r||(r=new Ext.data.Store({autoDestroy:!0}),this.setStore(r)),e=[],t=i;t<=n;++t)e.push({id:t,year:t});r.loadData(e)}}}}),Ext.define("Ext.panel.Date",{extend:Ext.Panel,xtype:"datepanel",config:{animation:!0,autoConfirm:!1,captionFormat:{$value:"F Y",cached:!0},dateCellFormat:{$value:"j",cached:!0},disabledDates:null,disabledDays:null,focusableDate:null,format:{$value:Ext.Date.defaultFormat,cached:!0},handler:null,headerFormat:{$value:"D, M j Y",cached:!0},headerLength:1,hideCaptions:!0,hideOutside:!1,maxDate:null,minDate:null,navigationPosition:"header",nextText:"Next Month (Control+Right)",panes:1,prevText:"Previous Month (Control+Left)",selectOnNavigate:!0,showAfterMaxDate:!1,showBeforeMinDate:!1,showFooter:null,showTodayButton:null,specialDates:null,specialDays:null,splitTitle:!1,startDay:{$value:Ext.Date.firstDayOfWeek,cached:!0},titleAnimation:null,value:void 0,weekendDays:{$value:Ext.Date.weekendDays,cached:!0},yearPicker:{lazy:!0,$value:{}},yearPickerDefaults:null},focusable:!0,tabIndex:0,border:!1,mouseWheelBuffer:500,autoSize:null,headerCls:Ext.baseCSSPrefix+"datepanelheader",titleCls:Ext.baseCSSPrefix+"datetitle",toolCls:[Ext.baseCSSPrefix+"paneltool",Ext.baseCSSPrefix+"datepaneltool"],header:{title:{xtype:"datetitle"}},tools:{previousMonth:{reference:"navigatePrevMonth",iconCls:"x-fa fa-angle-left",cls:Ext.baseCSSPrefix+"left-year-tool ",weight:-100,increment:-1,focusable:!1,tabIndex:null,forceTabIndex:!0,listeners:{click:"onMonthToolClick"}},previousYear:{reference:"navigatePrevYear",iconCls:"x-fa fa-angle-double-left",cls:Ext.baseCSSPrefix+"left-month-tool",weight:-90,increment:-12,focusable:!1,tabIndex:null,forceTabIndex:!0,listeners:{click:"onMonthToolClick"}},nextYear:{reference:"navigateNextYear",iconCls:"x-fa fa-angle-double-right",cls:Ext.baseCSSPrefix+"right-month-tool",weight:90,increment:12,focusable:!1,tabIndex:null,forceTabIndex:!0,listeners:{click:"onMonthToolClick"}},nextMonth:{reference:"navigateNextMonth",iconCls:"x-fa fa-angle-right",cls:Ext.baseCSSPrefix+"right-year-tool",weight:100,increment:1,focusable:!1,tabIndex:null,forceTabIndex:!0,listeners:{click:"onMonthToolClick"}}},keyMapTarget:"bodyElement",keyMap:{"*+LEFT":"onLeftArrowKey","*+RIGHT":"onRightArrowKey",UP:"onUpArrowKey",DOWN:"onDownArrowKey","*+PAGE_UP":"onPageUpKey","*+PAGE_DOWN":"onPageDownKey",HOME:"onHomeKey",END:"onEndKey",ENTER:"onEnterKey",SPACE:"onSpaceKey",BACKSPACE:"onBackspaceKey","*+TAB":"onTabKey",scope:"this"},paneXtype:"dateview",classCls:Ext.baseCSSPrefix+"datepanel",layout:{type:"carousel",animation:{duration:100}},defaultListenerScope:!0,referenceHolder:!0,buttonToolbar:{enableFocusableContainer:!1,cls:Ext.baseCSSPrefix+"datepanel-footer",reference:"footer"},buttons:{footerTodayButton:{text:"Today",tabIndex:-1,hidden:!0,weight:-20,handler:"onTodayButtonClick",reference:"footerTodayButton"},spacer:{xtype:"component",weight:-10,flex:1},ok:{tabIndex:-1,handler:"onOkButtonClick"},cancel:{tabIndex:-1,handler:"onCancelButtonClick"}},sidePaneOffset:2,initialize:function(){var e=this,t=e.getValue();e.callParent(),e.setToolText("navigatePrevMonth",e.getPrevText()),e.setToolText("navigateNextMonth",e.getNextText()),e.bodyElement.on({click:{delegate:e.cellSelector,fn:"onDateClick"},focus:"onBodyFocus",wheel:Ext.Function.createThrottled(e.onMouseWheel,e.mouseWheelBuffer),scope:e}),e.getShowFooter(),e.preventAnim=!0,e.setFocusableDate(t),e.preventAnim=!1,e.setTitleByDate(t),Ext.fly(e.getCellByDate(t)).addCls(e.selectedCls)},onRender:function(){this.callParent(),this.measurePaneSize()},doDestroy:function(){Ext.destroy(this.animTitle,this.animBody),this.callParent()},focusDate:function(e){this.doFocus=!0,this.setFocusableDate(e),this.doFocus=!1},updateAnimation:function(e){this.getLayout().setAnimation(e)},updateAutoConfirm:function(e){this.getButtons(),e?this.setShowFooter(this.initialConfig.showFooter):this.setShowFooter(!0)},updateCaptionFormat:function(e){this.broadcastConfig("captionFormat",e)},updateDateCellFormat:function(e){this.broadcastConfig("dateCellFormat",e)},applyDisabledDates:function(e){if(!e)return e;var t,i,n,r={dates:{}},s=[];if(e instanceof RegExp)r.re=e;else{for(Ext.isArray(e)||(e=[e]),i=0,n=e.length;i<n;i++)(t=e[i])instanceof Date?(t=Ext.Date.clearTime(t),r.dates[t.getTime()]=!0):t instanceof RegExp?s.push(t.source):s.push(Ext.String.escapeRegex(t));s.length&&(r.re=new RegExp("(?:"+s.join("|")+")"))}return r},updateDisabledDates:function(){this.refreshPanes()},applyDisabledDays:function(e){return e?Ext.Array.toMap(e):e},updateDisabledDays:function(){this.refreshPanes()},updateFormat:function(e){this.broadcastConfig("format",e)},updateHeader:function(e,t){this.callParent([e,t]),e.getTitle().on({scope:this,yeartap:"onYearTitleTap",titletap:"onTitleTap"})},applyMaxDate:function(e){return"string"==typeof e&&(e=Ext.Date.parse(e,this.getFormat())),e},updateMaxDate:function(){this.refreshPanes()},applyMinDate:function(e){return"string"==typeof e&&(e=Ext.Date.parse(e,this.getFormat())),e},updateMinDate:function(){this.refreshPanes()},updateNavigationPosition:function(e){var t,i,n,r=this,s=r.toolList,o=s.length,a="header"===e,l=a?r.toolCt:r.getHeader();if(!a||!r.isConfiguring){for(r.getTools(),t=[],i=0;i<o;++i)(n=r.lookup(s[i]))&&(t.push(n),l.remove(n,!1),n.toggleCls(r.toolCls,a));r.toolCt=Ext.destroy(r.toolCt),"header"===e?r.getHeader().add(t):(t.push({xtype:"component",flex:1,weight:0}),r.toolCt=r.add({xtype:"container",cls:Ext.baseCSSPrefix+"navigation-tools",defaultType:"tool",weighted:!0,layout:"hbox",bottom:"auto",items:t}))}},updateNextText:function(e){this.setToolText("navigateNextMonth",e)},updatePrevText:function(e){this.setToolText("navigatePrevMonth",e)},applyPanes:function(e){return e<1&&Ext.raise("Cannot configure less than 1 pane for Calendar picker"),e},updatePanes:function(e){this.getLayout().setVisibleChildren(e),this.initPanes(),this.singlePane=1===e,this.toggleCls(Ext.baseCSSPrefix+"single",this.singlePane)},updateShowFooter:function(e){this.lookup("footer").setHidden(!e),this.getShowTodayButton()},updateShowTodayButton:function(e){var t;this.getButtons(),(t=this.lookup("footerTodayButton"))&&t.setHidden(!e)},applySpecialDates:function(e){return this.applyDisabledDates(e)},updateSpecialDates:function(e){this.broadcastConfig("specialDates",e)},applySpecialDays:function(e){return e?Ext.Array.toMap(e):e},updateSpecialDays:function(e){this.broadcastConfig("specialDays",e)},updateSplitTitle:function(e){this.getHeader().getTitle().setSplit(e)},updateStartDay:function(e){this.broadcastConfig("startDay",e)},applyValue:function(e){return e="string"==typeof e?Ext.Date.parse(e,this.getFormat()):e||new Date,Ext.isDate(e)?Ext.Date.clearTime(e,!0):null},updateValue:function(e,t){var i,n=this,r=n.getHandler(),s=n.selectedCls;t&&(i=n.getCellByDate(t))&&Ext.fly(i).removeCls(s),n.isConfiguring||(n.hasFocus?n.focusDate(e):n.setFocusableDate(e),(i=n.getCellByDate(e))&&Ext.fly(i).addCls(s),n.setTitleByDate(e),n.fireEvent("change",n,e,t),r&&Ext.callback(r,n.scope,[n,e,t]))},applyWeekendDays:function(e){return Ext.Array.toMap(e)},updateWeekendDays:function(e){this.broadcastConfig("weekendDays",e)},applyYearPicker:function(e,t){return Ext.updateWidget(t,e,this,"createYearPicker","yearPickerDefaults")},updateYearPicker:function(e){e&&this.add(e)},replacePanes:function(r,e){var s,t,i;if(!this.destroying&&!this.destroyed)return s=this.getLayout().getVisibleItems(),t=function(){var e,t,i,n;for(i=0,n=s.length;i<n;i++)t=(e=s[i]).getMonthOffset(),e.setMonthOffset(t+r)},null==e&&(e=this.getAnimation()),e?(i=r<0?"up":"down",this.animateVertical(this.carouselElement,i,0,t,"animBody")):(t(),Ext.Deferred.getCachedResolved())},initPanes:function(){var e,t,i,n,r=this.getPanes()+this.sidePaneOffset,s=[];for(i=(t=r-1)?t%2?Math.floor(t/2)+1:Math.floor(t/2):t,n=0;n<r;n++)s.push(this.getPaneTemplate(n-i));for(e=this.getInnerItems(),n=0;n<e.length;n++)this.remove(e[n],!0);this.add(s),this.getLayout().setFrontItem(i,!1)},getPaneByDate:function(e){var t,i,n,r,s=this.getInnerItems();for(t=Ext.Date.getFirstDateOfMonth(e),n=0,r=s.length;n<r;n++)if(i=s[n],Ext.Date.isEqual(i.getMonth(),t))return i;return null},getCellByDate:function(e){var t=this.getPaneByDate(e);return t?t.getCellByDate(e):null},updateCellTabIndex:function(e,t){var i=e&&this.getCellByDate(e);return i&&Ext.fly(i).setTabIndex(t),i},canSwitchTo:function(e,t){var i,n;if(t<0){if(i=this.getMinDate(),n=!this.getShowBeforeMinDate(),i&&n&&e.getTime()<Ext.Date.getFirstDateOfMonth(i).getTime())return!1}else if(0<t&&(i=this.getMaxDate(),n=!this.getShowAfterMaxDate(),i&&n&&e.getTime()>Ext.Date.getLastDateOfMonth(i).getTime()))return!1;return!0},setValueWithoutAnim:function(e){this.preventAnim=!0,this.setValue(e),this.preventAnim=!1},navigateTo:function(e,t){var i,n,r,s,o=this.getLayout();return r=e.getTime()<(i=o.getFirstVisibleItem().getMonth()).getTime()||e.getTime()>(i=o.getLastVisibleItem().getMonth()).getTime()?i:e,(n=12*e.getFullYear()+e.getMonth()-(12*r.getFullYear()+r.getMonth()))<0?(r=this.getMinDate(),s=!this.getShowBeforeMinDate(),r&&s&&e.getTime()<Ext.Date.getFirstDateOfMonth(r).getTime()&&(n=0)):0<n&&(r=this.getMaxDate(),s=!this.getShowAfterMaxDate(),r&&s&&e.getTime()>Ext.Date.getLastDateOfMonth(r).getTime()&&(n=0)),this.navigateByIncrement(n,t,0)},switchPanes:function(e,t){var i,n=this.getLayout();return i=e<0?n.getFirstVisibleItem():n.getLastVisibleItem(),n.getEdgeItem(e).setMonthOffset(i.getMonthOffset()+e),n.move(e,t)},onMonthToolClick:function(e){var t=this,i=Ext.Date,n=e.increment,r=i.add(t.getFocusableDate(),i.MONTH,n),s=t.hasFocus,o=o=this.getLayout().getFrontItem(),a=i.add(o.getMonth(),i.MONTH,n);t.canSwitchTo(a,n)&&(t.navIncrement=t.singlePane?0:n,s||t.getSelectOnNavigate()?t.setValue(r):(t.doFocus=s,t.setFocusableDate(r),t.doFocus=!1),t.navIncrement=0)},onDateClick:function(e){var t=e.getTarget(this.cellSelector,this.bodyElement),i=t&&t.date,n=!0,r=t&&t.disabled;i&&!this.getDisabled()&&(r||(this.setValue(i),this.getAutoConfirm()&&("touch"===e.pointerType&&e.preventDefault(),n=!1,this.fireEvent("select",this,i))),n&&this.focusDate(i))},onMouseWheel:function(e){var t=e.browserEvent.deltaY;t&&!this.pickerVisible&&this.onMonthToolClick({increment:Ext.Number.sign(t)})},onOkButtonClick:function(){this.setValue(this.getFocusableDate())},onCancelButtonClick:function(){this.fireEventArgs("tabout",[this])},onTodayButtonClick:function(){var e;0!==(e=this.getLayout().getFrontItem().getMonthOffset())&&(1===Math.abs(e)?this.switchPanes(-e):this.replacePanes(-e)),this.setValue(Ext.Date.clearTime(new Date))},getFocusEl:function(){return this.initialized?this.getCellByDate(this.getFocusableDate()):null},onLeftArrowKey:function(e){this.walkCells(e.target.date,e.ctrlKey?Ext.Date.MONTH:Ext.Date.DAY,-1),e.preventDefault()},onRightArrowKey:function(e){this.walkCells(e.target.date,e.ctrlKey?Ext.Date.MONTH:Ext.Date.DAY,1),e.preventDefault()},onUpArrowKey:function(e){this.walkCells(e.target.date,Ext.Date.DAY,-7),e.preventDefault()},onDownArrowKey:function(e){this.walkCells(e.target.date,Ext.Date.DAY,7),e.preventDefault()},onPageUpKey:function(e){var t=e.ctrlKey||e.shiftKey?Ext.Date.YEAR:Ext.Date.MONTH;this.walkCells(e.target.date,t,-1),e.preventDefault()},onPageDownKey:function(e){var t=e.ctrlKey||e.shiftKey?Ext.Date.YEAR:Ext.Date.MONTH;this.walkCells(e.target.date,t,1),e.preventDefault()},onHomeKey:function(e){this.walkCells(Ext.Date.getFirstDateOfMonth(e.target.date)),e.preventDefault()},onEndKey:function(e){this.walkCells(Ext.Date.getLastDateOfMonth(e.target.date)),e.preventDefault()},onBackspaceKey:function(e){this.walkCells(new Date),e.preventDefault()},onEnterKey:function(e){var t=e.target,i=t&&t.date;i&&!t.disabled&&(this.setValue(i),this.fireEvent("select",this,t.date))},onSpaceKey:function(e){this.onEnterKey(e),e.preventDefault()},onTabKey:function(e){return this.handleTabKey(e),!0},handleTabKey:function(e){var t=e.target,i=this.pickerField;!this.getDisabled()&&this.getAutoConfirm()&&t&&t.date&&!t.disabled?(this.setValue(t.date),i&&i.isEditorComponent&&e.preventDefault()):this.fireEventArgs("tabout",[this])},walkCells:function(e,t,i){var n;this.getDisabled()||(e=this.getFocusableDate(),n=t?Ext.Date.add(e,t,i):e,this.isDateDisabled(n)?this.focusDate(n):this.setValue(n))},onBodyFocus:function(e){var t=this.getFocusableDate(),i=this.getCellByDate(t);i||this.navigateTo(t,!1),(i=this.updateCellTabIndex(t,this.getTabIndex())).focus()},getTabIndex:function(){return this.getConfig("tabIndex",!0)},getFocusClsEl:function(){return this.bodyElement},onFocusEnter:function(e){this.bodyElement.contains(e.target)&&this.onFocus(e),this.callParent([e])},onFocusLeave:function(e){this.onBlur(e),this.callParent([e])},privates:{cellSelector:"."+Ext.baseCSSPrefix+"cell",clonedCls:Ext.baseCSSPrefix+"cloned",lastNavigate:0,hideFocusCls:Ext.baseCSSPrefix+"hide-focus",selectedCls:Ext.baseCSSPrefix+"selected",toolList:["navigatePrevMonth","navigatePrevYear","navigateNextYear","navigateNextMonth"],paneWidthMap:{},pickerVisible:!1,applyFocusableDate:function(e){var t,i=Ext.Date;return e&&(e=i.clearTime(e||new Date),((t=this.getMinDate())&&!this.getShowBeforeMinDate()&&e.getTime()<t.getTime()||(t=this.getMaxDate())&&!this.getShowAfterMaxDate()&&e.getTime()>t.getTime())&&(e=t)),e},updateFocusableDate:function(e,t){var i,n,r,s,o,a=this,l=a.doFocus,c=a.getLayout(),u=a.hideFocusCls,d=a.navIncrement;a.destroying||a.destroyed||(t&&(o=a.getCellByDate(t),a.updateCellTabIndex(t,-1)),e&&(n=a.getPaneByDate(e),a.preventAnim||(r=a.getAnimation()),i=c.getVisibleItems(),a.lastNavigate=s=Date.now(),d||r&&!(-1<i.indexOf(n))?(o&&Ext.fly(o).addCls(u),(d?a.navigateByIncrement(d):a.navigateTo(e)).then(function(){(o=a.getCellByDate(t))&&Ext.fly(o).removeCls(u),l&&a.lastNavigate===s&&a.getCellByDate(e).focus()})):(a.navigateTo(e,!1),l&&a.getCellByDate(e).focus()),a.updateCellTabIndex(e,a.getTabIndex())))},animateVertical:function(e,t,i,n,r){var s=this,o=e.dom.cloneNode(!0),a=new Ext.Deferred;return o.id="",Ext.fly(o).addCls(s.clonedCls),e.parent().appendChild(o),n&&n(),Ext.destroy(s[r]),s[r]=Ext.Animator.run([{offset:i,type:"slide",direction:t,element:e},{offset:i,type:"slideOut",direction:t,element:o,callback:function(){Ext.fly(o).destroy(),s[r]=null,a.resolve()}}]),a.promise},broadcastConfig:function(e,t){if(!this.isConfiguring){var i,n,r,s,o=this.getInnerItems();for(i=Ext.Config.get(e).names.set,r=0,s=o.length;r<s;r++)(n=o[r])[i]&&n[i](t)}},createYearPicker:function(e){return Ext.apply({xtype:"yearpicker",hidden:!0,top:0,right:0,bottom:0,left:0,listeners:{yeartap:"onYearPickerTap"}},e)},getPaneTemplate:function(e){var t=this;return{xtype:t.paneXtype,monthOffset:e,hideOutside:t.getHideOutside(),hideCaption:t.getHideCaptions(),startDay:t.getStartDay(),weekendDays:t.getWeekendDays(),specialDates:t.getSpecialDates(),specialDays:t.getSpecialDays(),format:t.getFormat(),captionFormat:t.getCaptionFormat(),dateCellFormat:t.getDateCellFormat(),headerLength:t.getHeaderLength(),transformCellCls:t.transformCellCls}},getPositionedItemTarget:function(){return this.bodyElement},isDateDisabled:function(e){var t,i,n,r,s,o=e.getTime(),a=this.getMinDate(),l=this.getMaxDate();return(t=a&&o<a.getTime()||l&&o>l.getTime())||(i=this.getDisabledDays())&&(t=i[e.getDay()]),t||(n=this.getDisabledDates())&&(t=n.dates[o],s=n.re,!t&&s&&(r=Ext.Date.format(e,this.getFormat()),t=s.test(r))),!!t},measurePaneSize:function(){var e,t=this.getPanes(),i=this.getUi()||"default",n=this.paneWidthMap;n.hasOwnProperty(i)||(n[i]=this.getLayout().getFrontItem().measurePaneSize()),e=this.el.getBorderWidth("lr"),this.setWidth(e+t*n[i])},navigateByIncrement:function(e,t){var i;return 1===Math.abs(e)?i=this.switchPanes(e,t):0!==e?i=this.replacePanes(e,t):t||(this.getLayout().cancelAnimation(),i=Ext.Deferred.getCachedResolved()),i},onTitleTap:function(){var e;e=!this.getSplitTitle()&&!this.pickerVisible,this.toggleYearPicker(e)},onYearPickerTap:function(e,t){this.toggleYearPicker(!1);var i=Ext.Date.clone(this.getFocusableDate());i.setFullYear(t),this.setValue(i)},onYearTitleTap:function(){this.toggleYearPicker(!this.pickerVisible)},refreshPanes:function(){if(!this.isConfiguring){var e,t=this.getInnerItems(),i=t.length;for(e=0;e<i;++e)t[e].refresh()}},setTitleByDate:function(e){var t,i=this.lastTitleDate;t=(!i||i.getTime()!==e.getTime())&&(!this.preventAnim&&t),this.setTitleText(Ext.Date.format(e,this.getHeaderFormat()),e,i,t),this.lastTitleDate=e},setTitleText:function(e,t,i,n){var r,s,o;this.destroying||this.destroyed||(void 0===n&&(n=null!==(o=this.getTitleAnimation())?o:this.getAnimation()),n=!!this.rendered&&n,r=this.getHeader().getTitle(),n?(this.getSplitTitle()&&Ext.raise("Animation is not supported with title split"),s=(i||t).getTime()<t.getTime()?"bottom":"top",this.animateVertical(r.textElement,s,"150%",function(){r.setText(e)},"animTitle")):(this.getSplitTitle()&&r.setYear(t.getFullYear()),r.setText(e)))},setToolText:function(e,t){var i=this.lookup(e);i&&i.setTooltip(t)},toggleYearPicker:function(e){var t=this.getYearPicker();t&&(this.getSplitTitle()&&this.getHeader().getTitle().setTitleActive(!e),t.setHidden(!e),e&&t.focusYear(this.getFocusableDate().getFullYear()),this.pickerVisible=e)}}}),Ext.define("Ext.theme.neptune.panel.Date",{override:"Ext.panel.Date",border:!0}),Ext.define("Ext.theme.material.panel.Date",{override:"Ext.panel.Date",config:{headerFormat:"D, M j",hideCaptions:!1,hideOutside:!0,navigationPosition:"caption",selectOnNavigate:!1,showTodayButton:!1,splitTitle:!0,titleAnimation:!1,tools:{previousYear:null,nextYear:null}}}),Ext.define("Ext.field.Date",{extend:Ext.field.Picker,alternateClassName:["Ext.form.DatePicker","Ext.field.DatePicker"],xtype:["datefield","datepickerfield"],config:{destroyPickerOnHide:!1,dataType:{type:"date"},dateFormat:"",altFormats:"m/d/Y|n/j/Y|n/j/y|m/j/y|n/d/y|m/j/Y|n/d/Y|m-d-y|m-d-Y|m/d|m-d|md|mdy|mdY|d|Y-m-d|n-j|n/j",minDate:null,maxDate:null,triggers:{expand:{type:"date"}}},classCls:Ext.baseCSSPrefix+"datepickerfield",matchFieldWidth:!1,isDateField:!0,minDateMessage:"The date in this field must be equal to or after {0}",maxDateMessage:"The date in this field must be equal to or before {0}",initTime:"12",initTimeFormat:"H",floatedPicker:{xtype:"datepanel",autoConfirm:!0,floated:!0,listeners:{tabout:"onTabOut",select:"onPickerChange",scope:"owner"},keyMap:{ESC:"onTabOut",scope:"owner"}},edgePicker:{xtype:"datepicker",cover:!0},parseValidator:"date",applyValue:function(e,t){if(e||0===e||(e=null),!((e=this.callParent([e,t]))&&(this.isConfiguring&&(this.originalValue=e),Ext.isDate(e)&&Ext.isDate(t)&&e.getTime()===t.getTime())))return e},updateValue:function(e,t){var i=this._picker;i&&i.isPicker&&Ext.isDate(e)&&this.updatePickerValue(i,e),this.callParent([e,t])},updatePickerValue:function(e,t){e.setValue(t)},applyInputValue:function(e,t){return Ext.isDate(e)&&(e=Ext.Date.format(e,this.getDateFormat())),this.callParent([e,t])},applyAltFormats:function(e){return e&&!Ext.isArray(e)&&(e=e.split("|")),e},applyDateFormat:function(e){return e||Ext.util.Format.defaultDateFormat},updateDateFormat:function(){var e;this.isConfiguring||this.hasFocus||(e=this.getValue(),Ext.isDate(e)&&this.setInputValue(e))},applyMinDate:function(e){return"string"==typeof e&&(e=Ext.Date.parse(e,this.getDateFormat())),null===e||Ext.isDate(e)||Ext.raise("Date object or string in dateFormat required"),e?Ext.Date.clearTime(e,!0):null},applyMaxDate:function(e){return"string"==typeof e&&(e=Ext.Date.parse(e,this.getDateFormat())),null===e||Ext.isDate(e)||Ext.raise("Date object or string in dateFormat required"),e?Ext.Date.clearTime(e,!0):null},getFormattedValue:function(e){var t=this.getValue();return Ext.isDate(t)?Ext.Date.format(t,e||this.getDateFormat()):""},applyPicker:function(e,t){return(e=this.callParent([e,t]))&&(this.pickerType="datepicker"===e.xtype?"edge":"floated",e.ownerCmp=this),e},createFloatedPicker:function(){return this.getFloatedPicker()},createEdgePicker:function(){var e=this.getMinDate(),t=this.getMaxDate();return Ext.merge({yearFrom:e?e.getFullYear():(new Date).getFullYear()-20,yearTo:t?t.getFullYear():(new Date).getFullYear()+20},this.getEdgePicker())},setPickerLocation:function(e){var t,i=this.pickerType,n=this.getPicker(),r=this.getValue();this.$ignorePickerChange=!0,null!=r?n.setValue(r):"edge"===i&&n.setValue(new Date),delete this.$ignorePickerChange,"floated"===i&&(n.el.dom.tabIndex=-1,(t=this.getMinDate())&&n.setMinDate(t),(t=this.getMaxDate())&&n.setMaxDate(t),r=r||new Date,n.setValueWithoutAnim(r),e&&n.focusDate(r))},doValidate:function(e,t,i){var n,r,s=this.getDateFormat();this.callParent([e,t,i]),r=+e,(n=this.getMinDate())&&r<+n&&(n=Ext.Date.format(n,s),t.push(Ext.String.format(this.minDateMessage,n))),(n=this.getMaxDate())&&+n<r&&(n=Ext.Date.format(n,s),t.push(Ext.String.format(this.maxDateMessage,n)))},onPickerChange:function(e,t){this.$ignorePickerChange||(this.forceSetValue(t),this.fireEvent("select",this,t),this.onTabOut(e))},onTabOut:function(){this.collapse()},parseValue:function(e,t){var i,n,r=e,s=this.getDateFormat(),o=this.getAltFormats(),a=o?[s].concat(o):[s],l=a.length;if(r){if(!Ext.isDate(r))for(i=0;i<l;i++)if(n=a[i],r=Ext.Date.parse(e+" "+this.initTime,n+" "+this.initTimeFormat))return Ext.Date.clearTime(r);if(null!==r)return r}return this.callParent([e,t])},isEqual:function(e,t){return+this.transformValue(e)==+this.transformValue(t)},transformValue:function(e){return Ext.isObject(e)&&(e=new Date(e.year,e.month,e.day),isNaN(e.getTime())&&(e=null)),e},doDestroy:function(){var e=this._picker;e&&e.isPicker&&e.destroy(),this.callParent()},rawToValue:function(e){return this.parseValue(e)||e||null},privates:{setShowPickerValue:function(e){this.updatePickerValue(e,this.getValue()||new Date)}},deprecated:{6.5:{configs:{format:"dateFormat"}}}}),Ext.define("Ext.theme.material.field.Date",{override:"Ext.field.Date",config:{floatedPicker:{selectOnNavigate:!0,header:{hidden:!0}}}}),Ext.define("Ext.field.Hidden",{extend:Ext.field.Input,alternateClassName:"Ext.form.Hidden",xtype:"hiddenfield",inputType:"hidden",hidden:!0,classCls:Ext.baseCSSPrefix+"hiddenfield"}),Ext.define("Ext.field.Number",{extend:Ext.field.Text,xtype:"numberfield",alternateClassName:"Ext.form.Number",config:{minValue:null,maxValue:null,decimals:2,trim:!0,decimalSeparator:null},inputType:Ext.os.is.Desktop?"text":"number",minValueText:"The minimum value for this field is {0}",maxValueText:"The maximum value for this field is {0}",decimalsText:"The maximum decimal places is {0}",badFormatMessage:"Value is not a valid number",classCls:Ext.baseCSSPrefix+"numberfield",parseValidator:"number",initialize:function(){this.getDecimals(),null===this.getDecimalSeparator()&&this.setDecimalSeparator(Ext.util.Format.decimalSeparator),this.callParent(),this.inputElement.dom.setAttribute("inputmode","numeric"),this.getInputMask()&&Ext.raise("NumberFields cannot use input masks")},updateDecimals:function(e){var t,i="0",n=this.getTrim()?"#":"0";this.syncDecimalValidator(),e&&(i+="."+Ext.String.repeat(n,e)),this.numberFormat=i,this.isConfiguring||(t=this.getValue(),Ext.isDate(t)&&this.setInputValue(t))},applyInputValue:function(e){var t=this.getDecimalSeparator();return this.getDecimals(),"number"==typeof e&&(e=Ext.util.Format.number(e,this.numberFormat)),e&&Ext.isString(e)&&t&&(e=e.replace(Ext.util.Format.decimalSeparator,t)),e},doValidate:function(e,t,i){var n=Ext.String,r=this.getMinValue(),s=this.getMaxValue();this.callParent([e,t,i]),null!=r&&e<r?t.push(n.format(this.minValueText,r)):null!=s&&s<e&&t.push(n.format(this.maxValueText,s))},onKeyDown:function(e){var t;if("number"!==this.getInputType()&&!(e.ctrlKey||e.altKey||(t=this.calculateNewValue(e.key()),this.specialKeys[e.getCharCode()]||this.isAllowableValue(t))))return e.preventDefault(),!1;this.callParent([e])},transformValue:function(e){return e||0===e||(e=null),e},rawToValue:Ext.emptyFn,updateDecimalSeparator:function(){this.syncDecimalValidator()},privates:{calculateNewValue:function(e){var t=this.getTextSelection(),i=this.getInputValue();return i=t[1]?i.substr(0,t[0])+e+i.substr(t[1]):Ext.String.insert(i,e,this.getCaretPos())},handlePaste:function(e){var t;if("number"!==this.getInputType()&&(t=e.getClipboardData("text/plain")))return t=this.calculateNewValue(t),this.isAllowableValue(t)&&this.setValue(t),e.preventDefault(),!1;this.callParent([e]),this.validate()},isAllowableValue:function(e){var t=this.getMinValue();return(null==t||t<0||!Ext.String.startsWith(e,"-"))&&(this.isPartialValue(e)||null!==this.parseValue(e))},isPartialValue:function(e){var t=this.getMinValue(),i=null==t||t<0;return i&&"-"===e||!(!this.getDecimals()||!("."===e||i&&"-."===e))},syncDecimalValidator:function(){var e=0===this.getDecimals()?null:this.getDecimalSeparator();this.setParseValidator(Ext.create("Ext.data.validator.Number",{decimalSeparator:e})),this.validate()}}},function(e){var t=Ext.event.Event;e.prototype.specialKeys=Ext.Array.toMap([t.BACKSPACE,t.TAB,t.RETURN,t.CTRL,t.DELETE,t.LEFT,t.RIGHT,t.UP,t.DOWN,t.HOME,t.END,t.META])}),Ext.define("Ext.form.Borders",{mixinId:"formborders",config:{fieldSeparators:null,inputBorders:null},fieldSeparatorsCls:Ext.baseCSSPrefix+"form-field-separators",noInputBordersCls:Ext.baseCSSPrefix+"form-no-input-borders",updateFieldSeparators:function(e,t){var i=this.bodyElement,n=this.fieldSeparatorsCls;e?i.addCls(n):t&&i.removeCls(n)},updateInputBorders:function(e,t){var i=this.bodyElement,n=this.noInputBordersCls;!1===e?i.addCls(n):!1===t&&i.removeCls(n)}}),Ext.define("Ext.theme.material.form.Borders",{override:"Ext.form.Borders",config:{fieldSeparators:!1,inputBorders:!0}}),Ext.define("Ext.field.Panel",{extend:Ext.Panel,xtype:"fieldpanel",isFieldPanel:!0,mixins:[Ext.field.Dirty,Ext.field.Manager,Ext.form.Borders],scrollable:!0,nameable:!0,shareableName:!0,nameHolder:!0,publishes:{dirty:1},config:{api:null,baseParams:null,paramOrder:null,paramsAsHash:null,timeout:30,url:null},load:function(i){var e,t,n,s,o,r,a,l=this;if(i=i||{},e=l.getApi(),t=i.url||l.getUrl(),n=i.waitMsg,s=function(e,t){l.setValues(t.data),Ext.isFunction(i.success)&&i.success.call(i.scope||l,l,e,t),l.fireEvent("load",l,e)},o=function(e,t){Ext.isFunction(i.failure)&&i.failure.call(i.scope,l,e,t),l.fireEvent("exception",l,e)},i.waitMsg&&("string"==typeof n&&(n={xtype:"loadmask",message:n}),l.setMasked(n)),e)e=Ext.direct.Manager.resolveApi(e,l),l.setApi(e),(r=e.load)||Ext.raise("Cannot find Ext Direct API method for load action"),a=r.$directCfg.method.getArgs({params:l.getParams(i.params),paramOrder:l.getParamOrder(),paramsAsHash:l.getParamsAsHash(),scope:l,callback:function(e,t,i){l.setMasked(!1),(i?s:o)(t,e)}}),r.apply(window,a);else if(t)return Ext.Ajax.request({url:t,timeout:1e3*(i.timeout||l.getTimeout()),method:i.method||"GET",autoAbort:i.autoAbort,headers:Ext.apply({"Content-Type":"application/x-www-form-urlencoded; charset=UTF-8"},i.headers||{}),callback:function(e,t,i){var n=i.responseText,r=Ext.data.request.Ajax.parseStatus(i.status,i);l.setMasked(!1),((t=t&&(!(!r||0!==n.length)||!!(i=Ext.decode(n)).success))?s:o)(i,n)}})},getParams:function(e){return Ext.apply({},e,this.getBaseParams())},updateDisabled:function(e,t){this.mixins.fieldmanager.updateDisabled.call(this,e,t),this.callParent([e,t])},updateRecord:function(e){this.consumeRecord(e)}}),Ext.define("Ext.field.Radio",{extend:Ext.field.Checkbox,xtype:["radio","radiofield"],alternateClassName:"Ext.form.Radio",isRadio:!0,inputType:"radio",classCls:Ext.baseCSSPrefix+"radiofield",getValue:function(){return void 0===this._value?null:this._value},setValue:function(e){return this._value=e,this},getSubmitValue:function(){var e=this._value;return null==e&&(e=!0),this.getChecked()?e:null},updateChecked:function(e,t){this.callParent([e,t]),this.initialized&&e&&this.refreshGroupValues(this)},getGroupValue:function(){for(var e,t=this.getSameGroupFields(),i=t.length,n=0;n<i;n++)if((e=t[n]).getChecked())return e.getValue();return null},getSameGroupFields:function(){var e=this.lookupNameHolder(),t=this.name.replace(this.qsaLeftRe,"\\\\[").replace(this.qsaRightRe,"\\\\]");return e.query("radiofield[name="+t+"]")},setGroupValue:function(e){for(var t,i=this.getSameGroupFields(),n=i.length,r=0;r<n;r++)if((t=i[r]).getValue()===e)return t.setChecked(!0),t},refreshGroupValues:function(e){for(var t,i=this.getSameGroupFields(),n=i.length,r=0;r<n;r++)(t=i[r])!==e&&t.setChecked(!1)}}),Ext.define("Ext.slider.Thumb",{extend:Ext.Component,xtype:"thumb",baseCls:Ext.baseCSSPrefix+"thumb",isSliderThumb:!0,config:{fillCls:null,fillTrack:null,dragMax:null,dragMin:null,slider:null},template:[{reference:"iconElement",classList:[Ext.baseCSSPrefix+"icon-el",Ext.baseCSSPrefix+"font-icon"]}],draggable:{local:!0,constrain:{horizontal:!0},listeners:{beforedragstart:"onBeforeDragStart",dragstart:"onDragStart",dragmove:"onDragMove",dragend:"onDragEnd",scope:"this"}},touchAction:{panX:!1},translatable:{type:"cssposition",listeners:{animationstart:"onAnimationStart",animationend:"onAnimationEnd",translate:"onTranslate",scope:"this"}},elementWidth:0,pressingCls:Ext.baseCSSPrefix+"pressing",fillCls:Ext.baseCSSPrefix+"fill-el",sizerCls:Ext.baseCSSPrefix+"thumb-sizer",constructor:function(e){this.sizerElement=Ext.Element.create({cls:this.sizerCls}),this.callParent([e])},initialize:function(){this.callParent(),this.el.addClsOnClick(this.pressingCls,this.shouldAddPressingCls,this),(this.fillElement=Ext.Element.create({cls:this.fillCls})).setVisibilityMode(1)},updateFillTrack:function(e){var t=this.fillElement;!1===e?t.hide():(t.show(),t.setStyle("background-color","string"==typeof e?e:""))},updateFillCls:function(e,t){this.fillElement.replaceCls(t,e)},shouldAddPressingCls:function(){return!this.isDisabled()},initDragConstraints:function(){if(this.isDisabled())return!1;this.getSlider().refreshAllThumbConstraints()},onAnimationStart:function(e,t,i){this.getSlider().onThumbAnimationStart(this,t,i)},onAnimationEnd:function(e,t,i){this.destroyed||this.getSlider().onThumbAnimationEnd(this,t,i)},onBeforeDragStart:function(e,t,i){var n;if(this.isDisabled())return!1;n=t.proxy.current,this.getSlider().onThumbBeforeDragStart(this,i,n.x,n.y)},onDragStart:function(e,t,i){var n=t.proxy.current;this.getSlider().onThumbDragStart(this,i,n.x,n.y)},onDragMove:function(e,t,i){var n;if(this.isDisabled())return!1;n=t.proxy.current,this.getSlider().onThumbDragMove(this,i,n.x,n.y)},onDragEnd:function(e,t,i){var n;if(this.isDisabled())return!1;n=t.proxy.current,this.getSlider().onThumbDragEnd(this,i,n.x,n.y)},onTranslate:function(e,t,i){this.initialized&&this.getSlider().syncFill(this,t)},onResize:function(e){var t=this.ownerCmp;this.elementWidth=e,t&&t.thumbs&&t.thumbs[0]===this&&t.onThumbResize(this,e)},getElementWidth:function(){return this.elementWidth},updateUi:function(e,t){var i=this.sizerCls,n=this.sizerElement;t&&n.removeCls(t,i),e&&n.addCls(e,i),this.callParent([e,t])},updateDragMax:function(e){var t=this.getDraggable().getConstrain(),i=t.getX();t.setX([i&&i[0],e])},updateDragMin:function(e){var t=this.getDraggable().getConstrain(),i=t.getX();t.setX([e,i&&i[1]])},destroy:function(){Ext.destroyMembers(this,"fillElement","sizerElement"),this.callParent()}}),Ext.define("Ext.slider.Slider",{extend:Ext.Component,xtype:"slider",config:{thumbDefaults:{xtype:"thumb",inheritUi:!0,translatable:{easingX:{duration:300,type:"ease-out"}}},increment:1,value:0,valueIsArray:!1,minValue:0,maxValue:100,allowThumbsOverlapping:!1,animation:!0,readOnly:!1},defaultBindProperty:"value",twoWayBindable:{value:1},classCls:Ext.baseCSSPrefix+"slider",elementWidth:0,offsetValueRatio:0,activeThumb:null,isThumbAnimating:0,template:[{reference:"trackElement",cls:Ext.baseCSSPrefix+"track-el"},{reference:"thumbWrapElement",cls:Ext.baseCSSPrefix+"thumb-wrap-el"}],fillSelector:"."+Ext.baseCSSPrefix+"fill-el",constructor:function(e){e&&e.hasOwnProperty("values")&&delete(e=Ext.apply({value:e.values},e)).values,this.thumbs=[],this.callParent([e])},initialize:function(){this.callParent(),this.element.on("tap","onTap",this)},onRender:function(){this.callParent(),this.whenVisible("refreshSizes")},applyThumbDefaults:function(e){return Ext.apply({slider:this,ownerCmp:this},e)},factoryThumb:function(){var e=Ext.create(this.getThumbDefaults());return e.doInheritUi(),e},getThumbs:function(){return this.thumbs},getThumb:function(e){return"number"!=typeof e&&(e=0),this.thumbs[e]},refreshOffsetValueRatio:function(){var e=this.getMaxValue()-this.getMinValue(),t=this.elementWidth-this.thumbWidth;this.offsetValueRatio=0==e?0:t/e},onThumbResize:function(e,t){this.thumbWidth=t,this.refresh()},onResize:function(e){this.elementWidth=e,this.refresh()},refresh:function(){this.refreshing=!0,this.refreshValue(),this.refreshing=!1},setActiveThumb:function(e){var t=this.activeThumb;return t&&t!==e&&t.setZIndex(null),(this.activeThumb=e).setZIndex(2),this},onThumbBeforeDragStart:function(e,t){if(0===this.offsetValueRatio||t.absDeltaX<=t.absDeltaY||this.getReadOnly())return!1},onThumbDragStart:function(e,t){this.getAllowThumbsOverlapping()&&this.setActiveThumb(e),this.dragStartValue=this.getArrayValues()[this.getThumbIndex(e)],this.fireEvent("dragstart",this,e,this.dragStartValue,t)},onThumbDragMove:function(e,t,i){var n=this.getThumbIndex(e),r=this.offsetValueRatio,s=this.constrainValue(this.getMinValue()+i/r);return t.stopPropagation(),this.setIndexValue(n,s),this.fireEvent("drag",this,e,this.getArrayValues(),t),!1},setIndexValue:function(e,t,i){var n=this.thumbs[e],r=this.getArrayValues(),s=this.getMinValue(),o=this.offsetValueRatio,a=this.getIncrement(),l=(t-s)*o;n.setXY(l,null,i),r[e]=s+Math.round(l/o/a)*a,this.setValue(r),this.refreshAdjacentThumbConstraints(n)},onChange:function(e,t,i){this.hasListeners.change&&this.fireEvent("change",this,e,t,i)},onThumbDragEnd:function(e,t){var i=this.getThumbIndex(e),n=this.getArrayValues()[i],r=this.dragStartValue;this.snapThumbPosition(e,n),this.fireEvent("dragend",this,e,this.getArrayValues(),t),r!==n&&this.onChange(e,n,r)},getThumbIndex:function(e){return this.thumbs.indexOf(e)},refreshAdjacentThumbConstraints:function(e){var t=e.getLeft(),i=this.thumbs,n=this.getThumbIndex(e),r=i[n-1],s=i[n+1],o=this.getAllowThumbsOverlapping()?0:this.thumbWidth;r&&r.setDragMax(t-o),s&&s.setDragMin(t+o)},onTap:function(e){var t,i,n,r,s,o,a,l,c,u,d,h=this,f=h.element,g=1/0;if(0!==h.offsetValueRatio&&!h.isDisabled()&&!h.getReadOnly()&&(d=Ext.get(e.target))&&("WebKit"!==Ext.browser.engineName||!d.hasCls("x-thumb"))){if(u=e.touch.point.x-f.getX()-h.thumbWidth/2,c=h.constrainValue(h.getMinValue()+u/h.offsetValueRatio),1===(a=(l=h.getArrayValues()).length))r=0;else for(t=0;t<a;t++)n=l[t],(i=Math.abs(n-c))<g&&(g=i,r=t);s=l[r],o=h.thumbs[r],h.setIndexValue(r,c,h.getAnimation()),s!==c&&h.onChange(o,c,s)}},updateThumbs:function(e){this.add(e)},applyValue:function(e,t){var i,n,r,s=Ext.Array.from(e||0),o=this.getValueIsArray(),a=[],l=this.getMinValue();for(n=0,r=s.length;n<r;n++)(i=this.constrainValue(s[n]))<l&&(Ext.log.warn("Invalid values of '"+Ext.encode(s)+"', values at smaller indexes must be smaller than or equal to values at greater indexes"),i=l),a.push(i),l=i;return!this.refreshing&&t&&Ext.Array.equals(s,t)?a=void 0:(this.values=a,o||1!==a.length||(a=a[0])),a},updateValue:function(){var e,t=this.thumbs,i=this.getArrayValues(),n=i.length;if(this.setThumbsCount(n),!this.isThumbAnimating)for(e=0;e<n;e++)this.snapThumbPosition(t[e],i[e])},refreshValue:function(){this.refreshOffsetValueRatio(),this.updateValue()},constrainValue:function(e){var t,i=this.getMinValue(),n=this.getMaxValue(),r=this.getIncrement();return e=parseFloat(e),isNaN(e)&&(e=i),e-=t=(e-i)%r,Math.abs(t)>=r/2&&(e+=0<t?r:-r),e=Math.max(i,e),e=Math.min(n,e)},setThumbsCount:function(e){for(var t,i,n=this.thumbs,r=n.length;e<n.length;)(i=n.pop()).destroy();for(;e>n.length;)i=this.factoryThumb(),n.push(i),this.trackElement.appendChild(i.fillElement),this.thumbWrapElement.appendChild(i.element),this.element.appendChild(i.sizerElement);if(r!==e)for(t=0;t<e;t++)i=n[t],2<e?i.setFillTrack(!1):2===e?i.setFillTrack(1===t):i.setFillTrack(!0);return this},setValues:function(e){this.setValue(e)},getValues:function(){return this.getValue()},getArrayValues:function(){return this.values},applyIncrement:function(e){return 0===e&&(e=1),Math.abs(e)},updateAllowThumbsOverlapping:function(e,t){void 0!==t&&this.refreshValue()},updateMinValue:function(e,t){void 0!==t&&this.refreshValue()},updateMaxValue:function(e,t){void 0!==t&&this.refreshValue()},updateIncrement:function(e,t){void 0!==t&&this.refreshValue()},updateDisabled:function(e){var t,i,n;for(this.callParent(arguments),i=(t=this.thumbs).length,n=0;n<i;n++)t[n].setDisabled(e)},doDestroy:function(){this.thumbs=Ext.destroy(this.thumbs),this.callParent()},getRefItems:function(e){return this.thumbs},privates:{refreshAllThumbConstraints:function(){var e,t=this.thumbs,i=t.length,n=this.getAllowThumbsOverlapping()?0:this.thumbWidth;for(e=0;e<i;e++)this.refreshAdjacentThumbConstraints(t[e]);t[0].setDragMin(0),t[i-1].setDragMax(this.elementWidth-n)},refreshSizes:function(){var e=this.thumbs[0];this.elementWidth=this.element.measure("w"),e&&(this.thumbWidth=e.element.measure("w")),this.refresh()},snapThumbPosition:function(e,t){var i,n=this.offsetValueRatio;isFinite(n)&&(i=Ext.Number.correctFloat((t-this.getMinValue())*n),e.setXY(i,null))},syncFill:function(e,t){var i,n,r,s=this.thumbs,o=this.getArrayValues().length,a=0,l=this.trackElement.query(this.fillSelector,!1),c=s.indexOf(e);for(t+=Math.ceil(e.element.getWidth()/2),r=0;r<o;r++)e=s[r],n=l[r],i=r===c?t:e.getLeft()+e.element.getWidth()/2,n.setWidth(i-a),n.setLocalX(a),a=i},onThumbAnimationStart:function(){this.isThumbAnimating++},onThumbAnimationEnd:function(){this.isThumbAnimating--}}}),Ext.define("Ext.field.Slider",{extend:Ext.field.Field,xtype:"sliderfield",alternateClassName:"Ext.form.Slider",mixins:[Ext.mixin.ConfigProxy,Ext.field.BoxLabelable],config:{slider:{xtype:"slider",inheritUi:!0},liveUpdate:!1,tabIndex:-1,readOnly:!1,value:0},classCls:Ext.baseCSSPrefix+"sliderfield",proxyConfig:{slider:["increment","minValue","maxValue"]},bodyAlign:"stretch",defaultBindProperty:"value",twoWayBindable:{values:1,value:1},constructor:function(e){(e=e||{}).hasOwnProperty("values")&&(e.value=e.values),this.callParent([e]),this.updateMultipleState()},initialize:function(){this.callParent(),this.getSlider().on({scope:this,change:"onSliderChange",dragstart:"onSliderDragStart",drag:"onSliderDrag",dragend:"onSliderDragEnd"})},getBodyTemplate:function(){return this.mixins.boxLabelable.getBodyTemplate.call(this)},applySlider:function(e){return e&&!e.isInstance&&((e=this.mergeProxiedConfigs("slider",e)).$initParent=this,delete(e=Ext.create(e)).$initParent),this.boxElement.appendChild(e.el),e.ownerCmp=this,e},updateSlider:function(e){e.doInheritUi()},getValue:function(){return this._value},applyValue:function(e,t){return e=this.callParent([e,t])||0,this.dragging&&this.isSyncing("value")?e=void 0:Ext.isArray(e)?(e=e.slice(0),t&&Ext.Array.equals(e,t)&&(e=void 0)):e=[e],e},updateValue:function(e,t){this.dragging||(e=this.setSliderValue(e)),this.callParent([e,t])},setSliderValue:function(e){return this.getSlider().setValue(e).getValue()},onSliderChange:function(e,t,i,n){this.setValue(e.getValue()),this.fireEvent("dragchange",this,e,t,i,n)},onSliderDragStart:function(e,t,i,n){this.dragging=!0,this.fireEvent("dragstart",this,e,t,i,n)},onSliderDrag:function(e,t,i,n){this.getLiveUpdate()&&this.setValue(e.getValue()),this.fireEvent("drag",this,e,t,i,n)},onSliderDragEnd:function(e,t,i,n){this.dragging=!1,this.fireEvent("dragend",this,e,t,i,n)},setValues:function(e){this.setValue(e),this.updateMultipleState()},getValues:function(){return this.getValue()},reset:function(){var e=this.config,t=this.config.hasOwnProperty("values")?e.values:e.value;this.setValue(t)},updateReadOnly:function(e){this.getSlider().setReadOnly(e)},updateMultipleState:function(){var e=this.getValue();e&&1<e.length&&this.addCls(Ext.baseCSSPrefix+"slider-multiple")},updateDisabled:function(e,t){this.callParent([e,t]),this.getSlider().setDisabled(e)},doDestroy:function(){this.getSlider().destroy(),this.callParent()},getRefItems:function(e){var t=[],i=this.getSlider();return i&&(t.push(i),e&&i.getRefItems&&t.push.apply(t,i.getRefItems(e))),t},rawToValue:Ext.emptyFn}),Ext.define("Ext.field.SingleSlider",{extend:Ext.field.Slider,xtype:"singlesliderfield",twoWayBindable:{value:1},defaultBindProperty:"value",publishes:{value:1},applyValue:function(e,t){return(e=this.callParent([e,t]))&&Ext.isArray(e)&&(e=e[0]),e},getValue:function(){var e=this.callParent();return e&&Ext.isArray(e)&&(e=e[0]),e},onSliderChange:function(e,t,i,n){this.setValue(i),this.fireEvent("dragchange",this,e,i,n)},onSliderDragStart:function(e,t,i,n){this.fireEvent("dragstart",this,e,i,n)},onSliderDrag:function(e,t,i,n){this.getLiveUpdate()&&this.setValue(i),this.fireEvent("drag",this,e,i,n)},onSliderDragEnd:function(e,t,i,n){this.fireEvent("dragend",this,e,i,n)}}),Ext.define("Ext.slider.Toggle",{extend:Ext.slider.Slider,xtype:"toggleslider",config:{onThumbUi:"toggle-on",offThumbUi:"toggle-off"},value:0,classCls:Ext.baseCSSPrefix+"toggleslider",minValueCls:Ext.baseCSSPrefix+"off",maxValueCls:Ext.baseCSSPrefix+"on",applyMinValue:function(){return 0},applyMaxValue:function(){return 1},applyIncrement:function(){return 1},updateMinValueCls:function(e,t){var i=this.element;t&&i.hasCls(t)&&i.replaceCls(t,e)},updateMaxValueCls:function(e,t){var i=this.element;t&&i.hasCls(t)&&i.replaceCls(t,e)},setIndexValue:function(e,t,i){var n,r,s=this.getValue()[e];this.callParent(arguments),n=this.thumbs[e],s!==(r=this.getValue())&&this.fireEvent("change",this,n,r,s)},onChange:function(e,t,i){var n=0<t,r=this.maxValueCls,s=this.minValueCls,o=this.element;o.addCls(n?r:s),o.removeCls(n?s:r),this.thumbs[0].setUi(n?this.getOnThumbUi():this.getOffThumbUi()),this.callParent([e,t,i])},toggle:function(){var e=this.getValue();return this.setValue(1===e?0:1),this},onTap:function(){var e,t;this.isDisabled()||this.getReadOnly()||(e=1===this.getValue()?0:1,t=this.thumbs[0],this.setIndexValue(0,e,this.getAnimation()),this.refreshAdjacentThumbConstraints(t))},privates:{syncFill:function(){var e=this.trackElement.down(this.fillSelector),t=this.getArrayValues();t&&1===t[0]?e.show():e.hide()}}}),Ext.define("Ext.field.Toggle",{extend:Ext.field.SingleSlider,xtype:"togglefield",alternateClassName:"Ext.form.Toggle",twoWayBindable:{value:1},publishes:{value:1},config:{slider:{xtype:"toggleslider"},activeLabel:null,inactiveLabel:null,value:!1},bodyAlign:"start",classCls:Ext.baseCSSPrefix+"togglefield",updateActiveLabel:function(e,t){this.getSlider().element.dom.setAttribute("data-activelabel",e)},updateInactiveLabel:function(e,t){this.getSlider().element.dom.setAttribute("data-inactivelabel",e)},applyValue:function(e,t){return"boolean"!=typeof(e=this.callParent([e,t]))&&(e=0!==e),e},updateValue:function(e,t){var i=this.getActiveLabel(),n=this.getInactiveLabel();(i||n)&&this.setLabel(e?i:n),this.callParent([e,t])},setSliderValue:function(e){return this.getSlider().setValue(e?1:0),!!e},toggle:function(){return this.setValue(!this.getValue()),this},getRawValue:function(){return this.getValue()},rawToValue:Ext.emptyFn}),Ext.define("Ext.theme.material.field.Toggle",{override:"Ext.field.Toggle",config:{ripple:{delegate:"."+Ext.baseCSSPrefix+"thumb",bound:!1,fit:!1,color:"default"}}}),Ext.define("Ext.form.FieldSet",{extend:Ext.Container,xtype:"fieldset",mixins:[Ext.form.Borders,Ext.mixin.FieldDefaults],config:{title:null,instructions:null},autoSize:null,baseCls:Ext.baseCSSPrefix+"form-fieldset",applyTitle:function(e){return"string"==typeof e&&(e={title:e}),Ext.applyIf(e,{docked:"top",cls:this.baseCls+"-title"}),Ext.factory(e,Ext.Title,this._title)},updateTitle:function(e,t){e&&this.add(e),t&&this.remove(t)},getTitle:function(){var e=this._title;return e&&e instanceof Ext.Title?e.getTitle():e},applyInstructions:function(e){return"string"==typeof e&&(e={title:e}),Ext.applyIf(e,{docked:"bottom",cls:this.baseCls+"-instructions"}),Ext.factory(e,Ext.Title,this._instructions)},updateInstructions:function(e,t){e&&this.add(e),t&&this.remove(t)},getInstructions:function(){var e=this._instructions;return e&&e instanceof Ext.Title?e.getTitle():e},updateDisabled:function(t){return this.query("field").forEach(function(e){e.setDisabled(t)}),this}}),Ext.define("Ext.form.Panel",{extend:Ext.field.Panel,xtype:"formpanel",isFormPanel:!0,mixins:[Ext.mixin.FieldDefaults],alternateClassName:"Ext.form.FormPanel",classCls:Ext.baseCSSPrefix+"formpanel",element:{reference:"element",tag:"form",novalidate:"novalidate"},config:{enableSubmissionForm:!0,enctype:null,method:"post",multipartDetection:!0,standardSubmit:!1,submitOnAction:!1,trackResetOnLoad:!1},getTemplate:function(){var e=this.callParent();return e.push({tag:"input",type:"submit",cls:Ext.baseCSSPrefix+"hidden-submit"}),e},initialize:function(){this.callParent(),this.element.on("submit","onSubmit",this)},applyEnctype:function(e){var t=this.element.dom||null;t&&(e?t.setAttribute("enctype",e):t.setAttribute("enctype"))},onSubmit:function(e){e&&!this.getStandardSubmit()?e.stopEvent():this.submit(null,e)},updateSubmitOnAction:function(e){this[e?"on":"un"]({action:"onFieldAction",scope:this})},onFieldAction:function(e){this.getSubmitOnAction()&&(e.blur(),this.submit())},submit:function(e,t){var i,n;return e=e||{},i=this.getSubmitValues({enabled:this.getStandardSubmit()||!e.submitDisabled}),n=this.element.dom||{},this.getEnableSubmissionForm()&&(n=this.createSubmissionForm(n,i)),e=Ext.apply({url:this.getUrl()||n.action,submit:!1,form:n,method:this.getMethod()||n.method||"post",autoAbort:!1,params:null,waitMsg:null,headers:null,success:null,failure:null},e||{}),this.fireAction("beforesubmit",[this,i,e,t],"doBeforeSubmit",null,null,"after")},privates:{applyExtraParams:function(e){var t,i,n=e.form,r=Ext.merge(this.getBaseParams()||{},e.params);for(t in r)(i=document.createElement("input")).setAttribute("type","text"),i.setAttribute("name",t),i.setAttribute("value",r[t]),n.appendChild(i)},beforeAjaxSubmit:function(o,e,a,l){var c,u,i,d=this,t=e.url||d.getUrl(),n=Ext.merge({},{url:t,timeout:1e3*d.getTimeout(),form:o,scope:d},e),r={},s=d.jsonSubmit,h="params",f="x-www-form-urlencoded; charset=UTF-8";return delete n.success,delete n.failure,s&&(h="jsonData",f="json",r=d.getSubmitValues({enabled:d.getStandardSubmit()||!e.submitDisabled}),delete n.params,delete n.form),n[h]=Ext.merge({},d.getBaseParams(),e.params,r),n.header=Ext.apply({"Content-Type":"application/"+f},e.headers||{}),n.callback=function(e,t,i){var n=i.responseText,r=i.responseXML,s=Ext.data.request.Ajax.parseStatus(i.status,i);if(o.$fileswap&&(Ext.each(o.$fileswap,function(e){c=e.original,(u=e.placeholder).parentNode.insertBefore(c,u.nextSibling),u.parentNode.removeChild(u)}),o.$fileswap=null,delete o.$fileswap),d.setMasked(!1),!1===i.success&&(t=!1),t){if(s&&n&&0===n.length)t=!0;else if(Ext.isEmpty(i.responseBytes)){if(Ext.isString(n)&&"text"===i.request.options.responseType)i.success=!0;else if(Ext.isString(n))try{i=Ext.decode(n)}catch(e){i.success=!1,i.error=e,i.message=e.message}else Ext.isSimpleObject(n)&&(i=n,Ext.applyIf(i,{success:!0}));Ext.isEmpty(r)||(i.success=!0),t=!!i.success}else t=s.success;(t?a:l)(i,n)}else l(i,n)},Ext.feature.has.XHR2&&n.xhr2&&(delete n.form,i=n.data=new FormData(o),n.params&&(Ext.iterate(n.params,function(t,e){Ext.isArray(e)?Ext.each(e,function(e){i.append(t,e)}):i.append(t,e)}),delete n.params)),Ext.Ajax.request(n)},beforeDirectSubmit:function(e,t,i,n,r){var s,o=this;return o.applyExtraParams(i),e=Ext.direct.Manager.resolveApi(e,o),o.setApi(e),(s=e.submit)||Ext.raise("Cannot find Ext Direct API method for submit action"),s(t,function(e,t,i){o.setMasked(!1),(i&&e.success?n:r)(t,e)},o)},beforeStandardSubmit:function(e,t){var i,n,r,s,o;for(t.url&&Ext.isEmpty(e.action)&&(e.action=t.url),r=(n=this.query("spinnerfield")).length,s=document.body,o=0;o<r;o++)(i=n[o]).getDisabled()||i.setDisabled(!1);s.appendChild(e),e.method=(t.method||e.method).toLowerCase(),e.submit(),s.removeChild(e)},createSubmissionForm:function(e,t){var i,n,r,s,o,a=this.getFields();if(1===e.nodeType)for(i in e=e.cloneNode(!1),t)(n=document.createElement("input")).setAttribute("type","text"),n.setAttribute("name",i),n.setAttribute("value",t[i]),e.appendChild(n);for(i in a)a.hasOwnProperty(i)&&((r=a[i]).isFile?(o=(s=r.getTriggers().file)&&s.getComponent().buttonElement.dom)&&(e.$fileswap||(e.$fileswap=[]),n=o.cloneNode(!0),o.parentNode.insertBefore(n,o.nextSibling),e.appendChild(o),e.$fileswap.push({original:o,placeholder:n})):r.isPassword&&"password"!==r.getInputType()&&r.setRevealed(!1));return e},doBeforeSubmit:function(i,e,n){var t,r,s,o,a,l=n.form||{},c=!1;return!0===this.getMultipartDetection()&&(this.getFields(!1).forEach(function(e){if(!0===e.isFile)return!(c=!0)}),c&&l.setAttribute("enctype","multipart/form-data")),n.enctype&&l.setAttribute("enctype",n.enctype),i.getStandardSubmit()?i.beforeStandardSubmit(l,n):(t=i.getApi(),r=n.scope||i,o=function(e,t){Ext.isFunction(n.failure)&&n.failure.call(r,i,e,t),i.fireEvent("exception",i,e)},s=function(e,t){Ext.isFunction(n.success)&&n.success.call(n.scope||i,i,e,t),i.fireEvent("submit",i,e)},a=n.waitMsg,n.waitMsg&&("string"==typeof a&&(a={xtype:"loadmask",message:a}),i.setMasked(a)),t?i.beforeDirectSubmit(t,l,n,s,o):i.beforeAjaxSubmit(l,n,s,o))}}}),Ext.define("Ext.grid.CellEditor",{extend:Ext.Editor,xtype:"celleditor",isCellEditor:!0,floated:!1,classCls:Ext.baseCSSPrefix+"celleditor",config:{autoPin:!0},relayedEvents:["beforestartedit","startedit","beforecomplete","complete","canceledit","specialkey"],swallowKeys:!1,layout:"fit",shadow:!1,allowBlur:!0,alignment:"tl-tl",zIndex:10,useBoundValue:!1,inheritUi:!0,field:{inheritUi:!0},constructor:function(e){var t;this.callParent([e]),e.plugin&&(t=e.plugin.getGrid()),t&&t.relayEvents(this,this.relayedEvents)},beforeEdit:function(e,t){var i;return!1!==(i=this.callParent([e,t]))&&(i=this.$activeLocation.beforeEdit(this)),i},startEdit:function(e,t,i){var n,r,s,o,a,l=this;return e&&(r=(n=e.cell).el,t=null!=t?t:e.record.get(n.dataIndex),l.$activeLocation=e,l.ownerCmp=n,l.render(r),l.callParent([r,t,i]),l.editing?(l.$activeRow=s=e.row,l.$activeGrid=o=s.grid,l.editingPlugin.editing=!0,l.editingPlugin.location=l.$activeLocation=a=new Ext.grid.Location(o,l.getField().getFocusEl()),l.editingPlugin.activeEditor=l,o.stickItem(s,{autoPin:l.getAutoPin()})):l.$activeLocation=null),a},onFocusLeave:function(e){var t=this.$activeLocation,i=t&&t.row;this.editingPlugin.getGrid().destroying||(this.isCancelling?this.cancelEdit():this.completeEdit(!1,i&&e&&i.isAncestor(e.fromComponent)&&i.isAncestor(e.toComponent))),this.isCancelling=!1},onFocusEnter:function(e){this.$activeLocation&&(e.relatedTarget=e.fromElement=this.$activeLocation.getFocusEl("dom")),this.callParent([e])},getLocation:function(){return this.$activeLocation},onSpecialKey:function(e,t){t.getKey()===t.ESC?this.isCancelling=!0:this.callParent([e,t])},onEditComplete:function(e,t,i){var n,r,s,o,a=this,l=a.$activeLocation,c=a.getValue();a.callParent([e,t,i]),l&&(i=i||e,o=l.row.grid,t||c===a.startValue||(n=l.record,r=l.cell.dataIndex,n&&(n.set(r,c),i&&o.ensureVisible(l.record),l.refresh())),i||((s=l.row).$sticky&&o.stickItem(s,null),a.$stickyVisibility=a.$activeLocation=a.$activeRow=a.$activeGrid=null,a.editingPlugin.editing=!1,a.editingPlugin.location=a.editingPlugin.activeEditor=null))},realign:Ext.emptyFn,toggleBoundEl:function(e){var t,i=this.$activeLocation;i&&this.hideEl&&(t=i.cell)&&t.bodyElement.setVisibility(e)}}),Ext.define("Ext.grid.Location",{extend:Ext.dataview.Location,isGridLocation:!0,actionable:!1,cell:null,column:null,columnIndex:-1,summary:!1,row:null,rowBody:null,isTreeLocation:!1,inheritableStatics:{defineProtoProperty:function(t,i){Object.defineProperty(this.prototype,t,{get:function(){var e=this[i]();return Object.defineProperty(this,t,{value:e,configurable:!0}),e}})}},attach:function(e){var t,i,n,r,s,o,a,l=this,c=l.view,u=c.store;e.constructor===Object&&("number"==typeof(s=e.record)&&(s=u.getAt(Math.max(Math.min(s,u.getCount()-1),0))),"number"==typeof(o=e.column)&&(o=(r=c.getVisibleColumns())[Math.max(Math.min(o,r.length-1),0)]),s&&o||(s?o=c.getFirstVisibleColumn():s=u.getAt(0)),e=(i=c.mapToCell(s,o))?i.element:(l._setColumn(o),s)),l.callParent([e]),(t=l.item)&&t.isGridRow&&(l.row=t,l.summary=t.isSummaryRow,(i=i||c.mapToCell(e))||(a=(r=c.getVisibleColumns())[0])&&(i=t.getCellByColumn(a)),(l.cell=i)?(l.column=n=i.getColumn(),r=r||c.getVisibleColumns(),l.columnIndex=r.indexOf(n),l.isTreeLocation=!!i.isTreeCell):l.rowBody=c.mapToRowBody(e))},beforeEdit:function(e){return this.fireEditEvent("beforeedit",e)},fireEditEvent:function(e,t){var i=this.view;return t&&(this.editor=t),i.fireEvent(e,i,this)},clone:function(e){var t,i,n,r=this,s=r.callParent();return e&&(void 0!==e.record&&(t=e.record),void 0!==e.column&&(i=e.column),delete s.sourceElement),null!=t?(delete r.source,r.superclass.attach.call(s,t),s.row=s.item):(s.row=s.child=r.row,s.summary=r.summary,s.rowBody=r.rowBody),null!=i?s._setColumn(i):(s.cell=n=r.cell,s.column=r.column,s.columnIndex=r.columnIndex,r.isTreeLocation=!(!n||!n.isTreeCell)),s},cloneForColumn:function(e){return this.clone({column:e})},equals:function(e){return!(!e||e.view!==this.view||!e.isGridLocation)&&(this.actionable===e.actionable&&(this.sourceElement&&this.actionable?e.sourceElement===this.sourceElement:this.recordIndex===e.recordIndex&&this.record===e.record&&this.column===e.column))},equalCell:function(e){return e&&e.view===this.view&&e.isGridLocation&&this.recordIndex===e.recordIndex&&this.column===e.column},getFocusEl:function(e){var t;return t=this.actionable?this.sourceElement:(t=this.get())&&!t.destroyed&&t.el.dom,Ext.getBody().contains(t)?this.as(t,e||"el"):null},getCell:function(e){var t=this.cell,i=null;return t&&(i="dom"===e||!0===e?t.el.dom:"cmp"===e?t:t.el),i},get:function(){return this.cell},isFirstColumn:function(){var e=this.column,t=!1;return e&&(t=this.view.isFirstVisibleColumn(e)),t},isLastColumn:function(){var e=this.column,t=!1;return e&&(t=this.view.isLastVisibleColumn(e)),t},refresh:function(){var e=this.column,t=this.columnIndex,i=this.view.getHeaderContainer().indexOfLeaf(e);return-1===i&&(i=-1===t?0:t),this.callParent()._setColumn(i)},next:function(e){var t;if(this.actionable)return this.navigate();for(t=this.nextCell(e);t&&!t.get().el.isFocusable();t=t.nextCell(e));return t||this},previous:function(e){var t;if(this.actionable)return this.navigate(!0);for(t=this.previousCell(e);t&&!t.get().el.isFocusable();t=t.previousCell(e));return t||this},down:function(e){var t,i=e&&e.column||this.column,n=this.nextItem(e);if(n){for(n._setColumn(i),t=n.get();n&&(!t||!t.el.isFocusable());)(n=n.nextItem(e))&&(n._setColumn(i),t=n.get());if(n&&!n.equals(this))return n}return this},up:function(e){var t,i=e&&e.column||this.column,n=this.previousItem(e);if(n)for(n._setColumn(i),t=n.get();n&&(!t||!t.el.isFocusable());)(n=n.previousItem(e))&&(n._setColumn(i),t=n.get());return n&&!n.equals(this)?n:this},privates:{determineActionable:function(){var e=this.sourceElement,t=this.cell,i=!1;return!e||t&&!t.destroyed&&t.element.dom===e||(i=Ext.fly(e).isFocusable(!0)),i},navigate:function(e){for(var t,i,n,r,s=this.sourceElement,o=this.view,a=o.getScrollable(),l=o.getNavigationModel().actionables,c=l&&l.length,u=this.clone(),d=this.clone(),h={callback:function(e){!(t=Ext.fly(e)).$isFocusTrap&&t.isFocusable()&&((r=Ext.Component.from(e))&&r.getDisabled()||f.push(e))},reverse:e,skipSelf:!0},f=[];u&&!n&&u.get();){if(f.length=0,u.get().el.visit(h),s=f[s?Ext.Array.indexOf(f,s)+1:0])(n=u).source=n.sourceElement=s,delete n.actionable,u.child&&a.ensureVisible(u.child.el),a.ensureVisible(s),s.focus();else{if((u=u[e?"previousCell":"nextCell"]()).equals(d))return this;if(u&&c)for(i=0;!n&&i<c;i++)o.ensureVisible(u.record,{column:u.columnIndex,focus:!0}),n=l[i].activateCell(u)}d=u}return n||this},activate:function(){var t,e,i,n=this.view,r=n.getScrollable(),s=n.getNavigationModel().actionables,o=s&&s.length,a=this.clone();if(a.get().el.visit({callback:function(e){if(Ext.fly(e).isFocusable())return t=e,!1},skipSelf:!0}),t)(i=a).source=i.sourceElement=t,delete i.actionable,a.child&&r.ensureVisible(a.child.el),r.ensureVisible(t),t.focus();else for(e=0;!i&&e<o;e++)i=s[e].activateCell(a);return i},getFocusables:function(){var t=[],e=this.sourceElement;return e&&Ext.fly(e).visit({callback:function(e){Ext.fly(e).isFocusable()&&t.push(e)},skipSelf:!0}),t},nextCell:function(e){var t,i=this,n=i.clone(),r=i.clone(),s=i.getVisibleColumns(),o=i.view.store.indexOf(i.row.getRecord()),a=!1;e&&(a="boolean"==typeof e?e:e.wrap);do{if((t=s.indexOf(r.column)+1)!==s.length&&i.child.isGridRow?r=i.getUpdatedLocation(s[t],o):o<i.view.store.getData().count()-1?r=i.getUpdatedLocation(s[0],o+1):a&&(r=i.getUpdatedLocation(s[0],0)),r&&r.equals(n))break;if(!r){r=n;break}}while(r&&!r.sourceElement);return r},getVisibleColumns:function(){var e,t=this.view,i=t.allPartners||[t],n=i.length,r=[];for(e=0;e<n;e++)r=r.concat(i[e].getVisibleColumns());return r},previousCell:function(e){var t,i=this,n=i.clone(),r=i.clone(),s=i.getVisibleColumns(),o=i.view.store.indexOf(i.row.getRecord()),a=!1;e&&(a="boolean"==typeof e?e:e.wrap);do{if(-1!=(t=s.indexOf(r.column)-1)&&i.child.isGridRow?r=i.getUpdatedLocation(s[t],o):0<o?r=i.getUpdatedLocation(s[s.length-1],o-1):a&&(r=i.getUpdatedLocation(s[s.length-1],i.view.store.getData().count()-1)),r&&r.equals(n))break;if(!r){r=n;break}}while(r&&!r.sourceElement);return r},getUpdatedLocation:function(e,t){var i=e.getGrid(),n=this.view.store.getData().getAt(t),r=i.createLocation(n);return r.column=e,r.columnIndex=i.getVisibleColumns().indexOf(e),r.cell=r.row&&r.row.getCellByColumn(e),r.cell?(delete this.event,delete this.actionable,r.isTreeLocation=!!r.cell.isTreeCell,r.sourceElement=r.cell.el.dom,r):null},_setColumn:function(e){var t,i=this,n=i.view.getVisibleColumns();return"number"==typeof e?e=n[t=e]:t=n.indexOf(e),delete i.event,delete i.actionable,i.column=e,i.columnIndex=t,i.cell=i.row&&i.row.getCellByColumn(e),i.cell&&(i.isTreeLocation=!!i.cell.isTreeCell,i.sourceElement=i.cell.el.dom),i}}},function(e){e.defineProtoProperty("actionable","determineActionable")}),Ext.define("Ext.grid.NavigationModel",{extend:Ext.dataview.NavigationModel,alias:"navmodel.grid",locationClass:"Ext.grid.Location",statics:{ignoreInputFieldKeys:{PAGE_UP:!0,PAGE_DOWN:!0,END:!0,HOME:!0,LEFT:!0,UP:!0,RIGHT:!0,DOWN:!0}},setLocation:function(e,t){var i=this.getView(),n=t&&t.event;return this.columnIndex=-1,null==e||e.isGridLocation||(Ext.isArray(e)?e={column:e[0],record:e[1]}:"number"==typeof e&&(e=i.store.getAt(e)),e=this.createLocation(e),n&&(e.event=n)),this.callParent([e,t])},clearLocation:function(){var e;this.location&&(this.previousLocation=this.location,(e=this.location.sourceElement)&&Ext.fly(e).removeCls(this.focusedCls),this.location=null)},registerActionable:function(e){var t,i,n=this.getView(),r=this.actionables||(this.actionables=[]);Ext.Array.contains(r,e)||(r.push(e),(t=e.getTriggerEvent())&&((i={scope:this,args:[e]})[t]="triggerActionable",e.triggerEventListener=n.bodyElement.on(i)))},unregisterActionable:function(e){var t=this.actionables;t&&Ext.Array.remove(t,e)},privates:{onFocusMove:function(e){var t=this.getView(),i=this.getLocation();if(e.toElement===t.el.dom&&i)return this.clearLocation(),this.setLocation(i);(i=this.createLocation(e)).equals(this.location)||this.handleLocationChange(i,{event:e,navigate:!1})},processViewEvent:function(e){var t=this.getView(),i=t.mapToCell(e);return(!Ext.fly(e.target).isInputField()||!this.self.ignoreInputFieldKeys[e.getKeyName()])&&(i&&i.row.grid===t?e:void 0)},activateCell:function(e){e.clone().activate()},triggerActionable:function(e,t){var i=this.createLocation(t);(i=i.cell&&e.activateCell(i))&&this.setLocation(i)},onChildTouchStart:function(e,t){var i=t.event;t.header||t.footer?i.preventDefault():this.location&&!this.location.equalCell(t)&&this.setLocation(t,{event:t.event,navigate:"childtouchstart"===this.getView().getTriggerEvent()})},onKeyUp:function(e){e.preventDefault(),this.location.actionable||(this.location?this.moveUp(e):this.setLocation(0))},onKeyDown:function(e){e.preventDefault(),this.location.actionable||(this.location?this.moveDown(e):this.setLocation(0))},onKeyLeft:function(e){var t=this.location,i=t.isLastColumn()&&t.isFirstColumn();if(t.actionable){if(Ext.fly(e.target).isInputField())return!0}else{if(e.preventDefault(),t.isTreeLocation&&!t.record.isLeaf()&&t.record.isExpanded()&&i===!e.ctrlKey)return t.cell.collapse();e.shiftKey&&t.isFirstColumn()||this.movePrevious({event:e})}},onKeyRight:function(e){var t=this.location,i=t.isLastColumn()&&t.isFirstColumn();if(t.actionable){if(Ext.fly(e.target).isInputField())return!0}else{if(e.preventDefault(),t.isTreeLocation&&!t.record.isLeaf()&&!t.record.isExpanded()&&i===!e.ctrlKey)return t.cell.expand();e.shiftKey&&t.isLastColumn()||this.moveNext({event:e})}},onKeyF2:function(e){this.location.actionable?this.onKeyEsc():this.activateCell(this.location)},onKeyEsc:function(e){this.location.actionable&&this.location.get().el.focus()},onKeyTab:function(e){var t=this,i=t.location;if(!i.actionable)return!0;(function(){t.location=e.shiftKey?i.previous():i.next()})()},onKeyPageDown:function(e){var t,i,n,r=this;e.preventDefault(),r.location.actionable||(i=((t=r.getView()).infinite?t.getItemTop(r.location.child):r.location.child.el.dom.offsetTop)+t.getVisibleHeight(),n=t.getRecordIndexFromPoint(0,i),t.ensureVisible(n).then(function(){(n=new Ext.grid.Location(t,{record:n,column:r.location.column})).sourceElement&&Ext.fly(n.sourceElement).isFocusable()||(n=n.up()),r.setLocation(n,{event:e})}))},onKeyPageUp:function(e){var t,i,n,r=this;e.preventDefault(),r.location.actionable||(i=((t=r.getView()).infinite?t.getItemTop(r.location.child):r.location.child.el.dom.offsetTop)-t.getVisibleHeight(),n=t.getRecordIndexFromPoint(0,i),t.ensureVisible(n).then(function(){(n=new Ext.grid.Location(t,{record:n,column:r.location.column})).sourceElement&&Ext.fly(n.sourceElement).isFocusable()||(n=n.down()),r.setLocation(n,{event:e})}))},onKeyHome:function(e){e.preventDefault(),this.location.actionable||(e.ctrlKey?this.setLocation({record:this.getView().getStore().first(),column:this.location.column},{event:e}):this.setLocation({record:this.location.record,column:this.getView().getFirstVisibleColumn()},{event:e}))},onKeyEnd:function(e){e.preventDefault(),this.location.actionable||(e.ctrlKey?this.setLocation({record:this.getView().getStore().last(),column:this.location.column},{event:e}):this.setLocation({record:this.location.record,column:this.getView().getLastVisibleColumn()},{event:e}))},onKeySpace:function(e){var t,i,n,r=Ext.fly(e.target);return this.onNavigate(e),this.location.actionable?r.isInputField()?n=!0:t=r.events:(i=this.location.getFocusables()).length&&(t=Ext.get(i[0]).events),t&&(t.tap&&t.tap.fire(e),t.click&&t.click.fire(e)),n},onKeyEnter:function(e){var t=this.location;e.stopEvent(),t.actionable?this.onKeySpace(e):t.isTreeLocation&&null!=t.record.data.checked?t.record.set("checked",!t.record.data.checked):this.activateCell(t)},onSelectAllKeyPress:function(e){return!!Ext.fly(e.target).isInputField()||this.callParent([e])},moveUp:function(e){var t=this.getLocation();(t=t&&t.up())&&this.setLocation(t,{event:e})},moveDown:function(e){var t=this.getLocation();(t=t&&t.down())&&this.setLocation(t,{event:e})}}}),Ext.define("Ext.grid.cell.Base",{extend:Ext.Widget,xtype:"gridcellbase",isGridCell:!0,mixins:[Ext.mixin.Toolable],cachedConfig:{align:null,cls:null,bodyCls:null,bodyStyle:null,cellCls:null,selectable:null},config:{column:null,hidden:!1,record:null,value:null},classCls:Ext.baseCSSPrefix+"gridcell",dirtyCls:Ext.baseCSSPrefix+"dirty",alignCls:{left:Ext.baseCSSPrefix+"align-left",center:Ext.baseCSSPrefix+"align-center",right:Ext.baseCSSPrefix+"align-right"},inheritUi:!0,cellSelector:"."+Ext.baseCSSPrefix+"gridcell",defaultBindProperty:"value",toolDefaults:{zone:"head",ui:"gridcell"},getTemplate:function(){var e={reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",uiCls:"body-el"};return(e.children=this.innerTemplate)||(e.html=""),[e]},doDestroy:function(){this.setColumn(null),this.setRecord(null),this.mixins.toolable.doDestroy.call(this),this.callParent()},getComputedWidth:function(){return this.getHidden()?0:this.getWidth()},updateAlign:function(e,t){var i=this.alignCls;t&&this.removeCls(i[t]),e&&(i[e]||Ext.raise("Invalid value for align: '"+e+"'"),this.addCls(i[e])),this.syncToolableAlign()},updateBodyCls:function(e,t){(e||t)&&this.bodyElement.replaceCls(t,e)},updateBodyStyle:function(e){this.bodyElement.applyStyles(e)},updateCellCls:function(e,t){this.element.replaceCls(t,e)},updateCls:function(e,t){this.element.replaceCls(t,e)},updateColumn:function(e){var t=null,i=this.row;e&&(t=i&&i.isSummaryRow&&e.getSummaryDataIndex()||e.getDataIndex()),this.dataIndex=t},updateRecord:function(){this.destroyed||this.destroying||this.refresh()},updateSelectable:function(e){this.toggleCls(Ext.baseCSSPrefix+"item-no-select",!1===e)},refresh:function(e){var t,i,n,r=this,s=r.refreshContext;r.isBound("value")||(i=(e=e||s)&&e.modified)&&!r.bound(i)||(r.refreshContext=t=r.beginRefresh(e),(n=r.refreshValue(t))!==r.getValue()?r.setValue(n):r.writeValue&&r.writeValue(),r.refreshContext=s)},refreshValue:function(e){var t,i,n,r=e.record,s=e.dataIndex;return e.summary?t=this.summarize(e):r&&s&&(t=r.get(s),(i=!(!(n=r.modified)||!n.hasOwnProperty(s)))!==this.$dirty&&(this.toggleCls(this.dirtyCls,i),this.$dirty=i)),t},privates:{refreshCounter:0,$dirty:!1,refreshContext:null,storeMethodRe:/^(?:average|max|min|sum)$/,augmentToolHandler:function(e,t){var i=t[1]={event:t.pop(),record:this.getRecord(),column:this.getColumn(),cell:t[0],tool:t[1]};t[0]=i.grid=i.column.getGrid()},beginRefresh:function(e){var t=this.getColumn(),i=this.row;return e=e||(i?i.beginRefresh():{record:this.getRecord()}),++this.refreshCounter,e.from=e.from||"cell",e.cell=this,e.column=t,e.dataIndex=this.dataIndex,e.scope=t.getScope(),e},bound:function(e){return!!e[this.dataIndex]},summarize:function(e){var t,i=e.column,n=i.getSummaryType(),r=e.dataIndex,s=e.group,o=e.store,a=e.records;return n?(i.$warnSummaryType||(i.$warnSummaryType=!0,Ext.log.warn("[column] summaryType is deprecated; use summaryRenderer ("+i.getId()+")")),t=Ext.isFunction(n)?n.call(o,o.data.items.slice(),r):"count"===n?o.getCount():this.storeMethodRe.test(n)?o[n](r):Ext.callback(n,null,[o.data.items.slice(),r,o],0,this)):(n=i.getSummary())?r?(s?s.isVirtualGroup&&Ext.raise("Cannot calculate a group summary on a virtual store ("+e.grid.getId()+")"):o.getRemoteSort()&&Ext.raise("Cannot calculate a summary on a remoteSort store ("+e.grid.getId()+")"),t=n.calculate(a,r,"data",0,a.length)):Ext.raise("Cannot use summary config w/o summaryDataIndex or dataIndex ("+e.grid.getId()+")"):r&&(t=e.record.get(r)),t}},deprecated:{6.5:{configs:{innerStyle:"bodyStyle",innerCls:"bodyCls"}}}}),Ext.define("Ext.grid.cell.Text",{extend:Ext.grid.cell.Base,xtype:"textcell",config:{encodeHtml:!0,rawValue:null,zeroValue:null},getTemplate:function(){var e=this.callParent();return e[0]["data-qoverflow"]=!0,e},formatValue:function(e){var t,i,n=this.refreshContext,r=n.column,s=this.getZeroValue(),o=r.getFormatter();return n.summary?((t=r.getSummaryRenderer())&&(o=null,i=n.scope,e="string"==typeof t?Ext.callback(t,i,[e,n],0,r):t.call(i||this,e,n)),o=r.getSummaryFormatter()||o):0===e&&null!==s&&(e=s,o=null),o&&(e=o(e)),e=null!=e?String(e):""},printValue:function(e){var t,i=this.refreshContext;return this.refreshContext=this.beginRefresh(i),t=this.formatValue(e),this.getEncodeHtml()&&(t=Ext.htmlEncode(t)),this.refreshContext=i,t},updateRawValue:function(e){var t=this.bodyElement.dom,i=null==e?"":e;this.getEncodeHtml()?t.textContent=i:t.innerHTML=i},updateValue:function(){var e=this.refreshContext,t=this.row;t&&t.parent&&(e||(this.refreshContext=this.beginRefresh()),this.writeValue(),this.refreshContext=e)},updateZeroValue:function(){this.isConfiguring||this.refresh()},writeValue:function(){var e=this.getValue();(e=this.formatValue(e))||(e=this.getColumn().getEmptyText()),this.setRawValue(e)}}),Ext.define("Ext.grid.cell.Cell",{extend:Ext.grid.cell.Text,xtype:"gridcell",config:{tpl:null,renderer:null,formatter:null,scope:null},friendly:null,updateColumn:function(e,t){var i,n,r,s=!0;this.callParent([e,t]),e&&(i=e.getTpl(),n=e.getRenderer(),r=e.getFormatter(),null!==n&&(this.setRenderer(n),s="function"==typeof n&&1===n.length),null!==i&&(this.setTpl(i),s=!1),null!==r&&this.setFormatter(r),this.friendly=s)},applyTpl:function(e){return Ext.XTemplate.get(e)},applyFormatter:function(e){var t,i=this,n=e;return"string"==typeof n?(t=Ext.app.bind.Parser.fly(n),n=t.compileFormat(),t.release(),function(e){return n(e,i.getScope()||i.resolveListenerScope())}):("function"!=typeof n&&Ext.raise("Invalid formatter"),n)},updateTpl:function(){this.isConfiguring||this.refresh()},updateRenderer:function(){this.isConfiguring||this.refresh()},updateFormatter:function(){this.isConfiguring||this.refresh()},formatValue:function(e){var t,i,n,r,s,o,a=this,l=a.refreshContext,c=l.dataIndex,u=l.column,d=l.record,h=a.getZeroValue(),f=e,g=l.summary;return l.summary||0!==e||null===h?(o=a.getTpl(l))?((i=l.data)||(l.data=i=l.summary?l.record.getData():l.grid.gatherData(l.record)),f=o.apply(i)):(n=a.getFormatter(),g?((r=u.getSummaryRenderer())&&(n=null,s=l.scope,"string"==typeof r?(f=Ext.callback(r,s,[e,l],0,u),a.friendly=!1):(f=r.call(s||a,e,l),1<r.length&&(a.friendly=!1))),n=u.getSummaryFormatter()||n):(r=a.getRenderer())&&(t=[e,d,c,a,u],s=a.getScope()||l.scope,f="function"==typeof r?r.apply(s||u,t):Ext.callback(r,s,t,0,a)),n&&(f=n(f))):f=h,f=null!=f?String(f):""},privates:{bound:function(e){var t,i,n,r=!!e[this.dataIndex];if(!r)if(i=(t=this.getColumn())&&t.getDepends())for(n=i.length;!r&&0<n--;)r=!!e[i[n]];else this.friendly||(r=!0);return r}}}),Ext.define("Ext.grid.RowBody",{extend:Ext.Component,xtype:"rowbody",config:{widget:null},classCls:Ext.baseCSSPrefix+"rowbody",inheritUi:!0,template:[{reference:"spacerElement",cls:Ext.baseCSSPrefix+"spacer-el"},{reference:"contentElement",cls:Ext.baseCSSPrefix+"content-el"}],initialize:function(){var e,t;this.callParent(),(e=this.row.getGrid())&&e.hasRowExpander&&(t=e.findPlugin("rowexpander"))&&this.spacerElement.setWidth(t.getColumn().getWidth())},applyWidget:function(e){var t=this.row;return e&&(e=Ext.apply({ownerCmp:t},e),e=Ext.widget(e)),e},updateWidget:function(e,t){t&&t.destroy(),e&&this.contentElement.appendChild(e.element)},updateRecord:function(e,t){this.getTpl()&&this.callParent([e,t])},getInnerHtmlElement:function(){return this.contentElement},doDestroy:function(){this.setWidget(null),this.callParent()}}),Ext.define("Ext.grid.Row",{extend:Ext.Component,xtype:"gridrow",mixins:[Ext.mixin.Queryable,Ext.dataview.GenericItem,Ext.dataview.Pinnable],isGridRow:!0,isRecordRefreshable:!0,hasGridCells:!0,cachedConfig:{collapsed:!0},config:{body:null,expandedField:null,defaultCellUI:null,stickyVisibility:null},classCls:[Ext.baseCSSPrefix+"listitem",Ext.baseCSSPrefix+"gridrow"],inheritUi:!0,expandedCls:Ext.baseCSSPrefix+"expanded",element:{reference:"element",children:[{reference:"cellsElement",className:Ext.baseCSSPrefix+"cells-el"}]},constructor:function(e){this.cells=[],this.columnMap={},this.callParent([e])},doDestroy:function(){this.setRecord(null),this.setBody(null),this.cells=Ext.destroy(this.cells),this.callParent()},collapse:function(){this.setCollapsed(!0)},expand:function(){this.setCollapsed(!1)},toggleCollapsed:function(){this.setCollapsed(!this.getCollapsed())},updateCollapsed:function(e){var t,i=this.getBody(),n=this.getParent(),r=this.getRecord(),s=this.getExpandedField(),o=this.expandedCls,a=this.expanderCell;r&&(s?r.set(s,!e):(t=n.$recordsExpanded||(n.$recordsExpanded={}),e?delete t[r.internalId]:t[r.internalId]=!0)),a&&a.setCollapsed(e),i&&(e?(i.hide(),this.removeCls(o)):(i.show(),this.addCls(o)))},applyBody:function(e,t){return Ext.updateWidget(t,e,this,"createBody")},createBody:function(e){return Ext.merge({xtype:"rowbody",ownerCmp:this,row:this,hidden:!0},e)},updateBody:function(e){var t=this.getParent();e&&(this.bodyElement.appendChild(e.element),this.rendered&&!e.rendered&&e.setRendered(!0)),t&&(t.setVariableHeights(!0),t.hasRowExpander||this.expand())},onAdded:function(e){var t,i,n,r,s,o,a=this.cells;if(this.callParent(arguments),e)for(r=0,o=(n=e.getColumns()).length;r<o;r++){if(t=a[r],i=n[r],t){if(t.getColumn()===i)continue;for(s=a.length;s-- >r;)t=a[s],this.removeColumn(t.getColumn())}this.addColumn(n[r])}},addColumn:function(e){this.insertColumn(this.cells.length,e)},getCells:function(e){return e?Ext.ComponentQuery.query(e,this.cells):this.cells},getRefItems:function(e){var t,i,n=[],r=this.getConfig("body",!1,!0),s=this.cells,o=s&&s.length;for(t=0;t<o;t++)i=s[t],n.push(i),e&&i.getRefItems&&n.push.apply(n,i.getRefItems());return r&&(n.push(r),e&&r.getRefItems&&n.push.apply(n,r.getRefItems())),n},insertColumn:function(e,t){var i,n=this.cells;t.isHeaderGroup||(i=this.createCell(t),e>=n.length?(this.cellsElement.appendChild(i.element),n.push(i)):(i.element.insertBefore(n[e].element),n.splice(e,0,i)),(this.columnMap[t.getId()]=i).isExpanderCell&&(this.expanderCell=i),this.rendered&&i.setRendered(!0))},insertColumnBefore:function(e,t){var i,n,r,s=this.columnMap[e.getId()],o=this.cells;n=t?(i=this.getCellByColumn(t),o.indexOf(i)):o.length-(s?1:0),s?(r=o.indexOf(s),Ext.Array.move(o,r,n),i?s.element.insertBefore(i.element):this.cellsElement.appendChild(s.element)):this.insertColumn(n,e)},removeColumn:function(e){var t=this.columnMap,i=e.getId(),n=t[i];n&&(Ext.Array.remove(this.cells,n),delete t[i],n.destroy())},updateRecord:function(e){this.destroyed||this.destroying||this.refresh()},setColumnWidth:function(e){var t=this.getCellByColumn(e);t&&t.setWidth(e.getComputedWidth())},showColumn:function(e){this.setCellHidden(e,!1)},hideColumn:function(e){this.setCellHidden(e,!0)},getCellByColumn:function(e){return this.columnMap[e.getId()]},getColumnByCell:function(e){return e.getColumn()},updateStickyVisibility:function(e){this.fireEvent("stickyvisiblitychange",e)},refresh:function(e){var t,i,n,r,s,o=this,a=o.cells,l=o.getBody(),c=a.length,u=o.getExpandedField(),d=o.getParent(),h=d.getSelectable(),f=h.getSelection(),g=f.isCells||f.isColumns;for(o.refreshContext=e=o.beginRefresh(e),r=e.record,o.syncDirty(r),i=t=0;t<c;++t)n=a[t],e.summary&&n.getColumn().getIgnore()||(n.getRecord()===r?n.refresh(e):(n.refreshContext=e,n.setRecord(r),n.refreshContext=null),g&&n.toggleCls(d.selectedCls,h.isCellSelected(o._recordIndex,i))),n.isHidden()||i++;e.cell=e.column=e.dataIndex=e.scope=null,l&&(l.refreshContext=e,l.getRecord()===r?l.updateRecord(r):l.setRecord(r),l.refreshContext=null,u?o.setCollapsed(!r.get(u)):(s=d.$recordsExpanded||(d.$recordsExpanded={}),d.hasRowExpander&&o.setCollapsed(!s[r.internalId]))),o.refreshContext=null},privates:{refreshContext:null,beginRefresh:function(e){var t=this.getParent();return(e=e||{}).from=e.from||"row",e.grid=t,e.record=this.getRecord(),e.row=this,e.store=t.store,e},createCell:function(e){var t=e.createCell(this);return delete(t=Ext.create(t)).$initParent,t.inheritUi&&t.doInheritUi(),t.el.setTabIndex(-1),t},setCellHidden:function(e,t){var i=this.getCellByColumn(e);i&&i.setHidden(t)},getGrid:function(){return this.grid||this.getParent()}}}),Ext.define("Ext.grid.HeaderContainer",{extend:Ext.Container,xtype:"headercontainer",isHeaderContainer:!0,config:{columns:null,defaultColumnUI:null,sortable:!0,verticalOverflow:null,reserveScrollbar:null,grid:null},docked:"top",defaultType:"column",layout:{type:"hbox",align:"stretch"},inheritUi:!0,scrollable:{x:!1,y:!1},weighted:!0,autoSize:null,constructor:function(e){var t=!this.isGridColumn;(this.isRootHeader=t)&&(e.grid._headerContainer=this),this.columns=[],this.callParent([e]),t&&(e.grid._headerContainer=null)},initialize:function(){this.callParent(),this.isRootHeader&&(this.setInstanceCls(Ext.baseCSSPrefix+"headercontainer"),this.on({tap:"onHeaderTap",triggertap:"onHeaderTriggerTap",columnresize:"onColumnResize",show:"onColumnShow",hide:"onColumnHide",sort:"onColumnSort",scope:this,delegate:"[isLeafHeader]"}),this.on({tap:"onGroupTap",triggertap:"onGroupTriggerTap",show:"onGroupShow",hide:"onGroupHide",add:"onColumnAdd",move:"onColumnMove",remove:"onColumnRemove",scope:this,delegate:"[isHeaderGroup]"}),this.on({add:"onColumnAdd",move:"onColumnMove",remove:"onColumnRemove",scope:this}))},getRootHeaderCt:function(){var e=this.getGrid();return e&&e.getHeaderContainer()},getColumnForField:function(e){var t,i,n=this.columns,r=n.length;for(i=0;i<r;++i)if(t=n[i].getColumnForField(e))return t;return null},getColumns:function(e){var t=this.columns;if(e)if("string"==typeof e)t=Ext.ComponentQuery.query(e,t);else if(Ext.isFunction(e))return t.filter(e);return t},getVisibleColumns:function(){var e=this.visibleColumns;return e=e||(this.visibleColumns=this.columns.filter(this.visibleLeafFilter))},getClosestVisibleHeader:function(e){var t="number"==typeof e?this.getVisibleColumns()[e]:e;return t&&t.hidden&&(t=t.next(":visible")||t.prev(":visible")),t},indexOfLeaf:function(e){return this.getVisibleColumns().indexOf(e)},factoryItem:function(e){var t=this.getGrid();return e.isComponent?e.isGridColumn&&e.setGrid(t):e=Ext.apply({grid:t},e),this.callParent([e])},updateColumns:function(e){this.isRootHeader&&(this.columns=[],this.visibleColumns=null,this.add(e))},beginColumnUpdate:function(){this.isRootHeader&&(this.hasBulkUpdate=this.hasBulkUpdate||0,this.hasBulkUpdate++,1===this.hasBulkUpdate&&(this.bulkAdd=[],this.updateMenuDisabledState=Ext.emptyFn))},endColumnUpdate:function(){var e,t,i,n,r=this;if(r.isRootHeader&&r.hasBulkUpdate&&(r.hasBulkUpdate--,0===r.hasBulkUpdate)){if(e=(i=r.bulkAdd)&&i.length){for(r.visibleColumns=null,r.columns=r.getLeaves(),t=0;t<e;t++)(n=i[t]).columnIndex=r.columns.indexOf(n.column);for(Ext.Array.sort(i,r.sortByColumnIndex),t=0;t<e;t++)n=i[t],r.fireEvent("columnadd",r,n.column,n.columnIndex)}r.getGrid().refreshInnerWidth(),r.bulkAdd=null,delete r.updateMenuDisabledState,r.updateMenuDisabledState(),this.isRootHeader&&this.onColumnComputedWidthChange()}},sortByColumnIndex:function(e,t){return e.columnIndex-t.columnIndex},add:function(e){var t,i=this.getRootHeaderCt();return i&&i.beginColumnUpdate(),t=this.callParent([e]),i&&i.endColumnUpdate(),t},insert:function(e,t){var i,n=this.getRootHeaderCt();return n&&n.beginColumnUpdate(),i=this.callParent([e,t]),n&&n.endColumnUpdate(),i},remove:function(e,t){var i,n=this.getRootHeaderCt();return n&&n.beginColumnUpdate(),i=this.callParent([e,t]),n&&n.endColumnUpdate(),i},onColumnAdd:function(e,t){var i,n,r,s=this.getGrid();if(t.isHeaderGroup)for(r=0,n=(i=t.getItems().items).length;r<n;r++)this.onColumnAdd(t,i[r]);else null==t.getUi()&&t.setUi(this.getDefaultColumnUI()),t.setGrid(s),this.bulkAdd.push({column:t});this.updateMenuDisabledState()},onColumnMove:function(e,t,i,n){var r,s=this.columns,o=null;this.visibleColumns=null,t.isHeaderGroup?(r=t.getItems().items,o=t):r=[t],n=s.indexOf(r[0]),this.columns=this.getLeaves(),this.fireEvent("columnmove",this,r,o,n)},onColumnRemove:function(e,t){var i,n,r;if(this.visibleColumns=null,t.isHeaderGroup){if(!t.destroying)for(r=(i=t.getItems().items).length,n=0;n<r;n++)this.onColumnRemove(t,i[n])}else Ext.Array.remove(this.columns,t),this.fireEvent("columnremove",this,t);this.updateMenuDisabledState()},onHeaderTap:function(e,t){var i=this.getGrid().getSelectable();!1!==this.fireEvent("columntap",this,e,t)&&i.onHeaderTap&&i.onHeaderTap(this,e,t)},onGroupTriggerTap:function(e){e.showMenu()},onHeaderTriggerTap:function(e){e.showMenu()},onColumnShow:function(e){this.visibleColumns=null,this.fireEvent("columnshow",this,e),this.updateMenuDisabledState(),this.isRootHeader&&this.onColumnComputedWidthChange()},onColumnHide:function(e){this.visibleColumns=null,this.fireEvent("columnhide",this,e),this.updateMenuDisabledState(),this.isRootHeader&&this.onColumnComputedWidthChange()},onGroupShow:function(e){var t,i,n=e.getInnerItems(),r=n.length;for(this.visibleColumns=null,t=0;t<r;t++)(i=n[t]).isHidden()||this.fireEvent("columnshow",this,i);this.updateMenuDisabledState()},onGroupHide:function(e){var t,i,n=e.getInnerItems(),r=n.length;for(this.visibleColumns=null,t=0;t<r;t++)i=n[t],this.fireEvent("columnhide",this,i);this.updateMenuDisabledState()},onGroupTap:function(e,t){return this.fireEvent("headergrouptap",this,e,t)},onColumnResize:function(e,t,i){this.fireEvent("columnresize",this,e,t,i)},onColumnSort:function(e,t,i){null!==t&&this.fireEvent("columnsort",this,e,t,i)},scrollTo:function(e){this.getScrollable().scrollTo(e)},updateGrid:function(e){this.isRootHeader&&(this.parent=e)},doDestroy:function(){this.setGrid(null),this.callParent()},afterRender:function(){this.callParent(),this.isRootHeader&&this.onColumnComputedWidthChange()},privates:{columnsResizing:null,updateVerticalOverflow:function(){this.syncReserveSpace()},updateReserveScrollbar:function(){this.syncReserveSpace()},updateMenuDisabledState:function(){if(this.rendered){var e,t,i,n,r,s=this.isRootHeader?this:this.getRootHeaderCt(),o=[],a=[];for(s.visitPreOrder("gridcolumn:not([hidden])",function(e){o.push(e),e.isHidden(!0)||e.getMenuDisabled()||!e.getConfig("menu",!0)||a.push(e)}),e=o.length,t=0;t<e;++t)(r=(i=o[t]).getHideShowMenuItem(!1))&&(n=1<a.length||a[0]!==i,r["set"+(r.getMenu()?"CheckChange":"")+"Disabled"](!n))}},getLeaves:function(){return this.query("[isLeafHeader]")},onColumnComputedWidthChange:function(e,t){var i,n,r,s,o=0,a=this.columnsResizing;if(!this.destroying)if(a)a.push(e);else{for(this.columnsResizing=a=[],n=(i=this.getColumns()).length,r=0;r<n;r++)o+=(s=i[r])===e?(a.push(s),t):s.isHidden(!0)?0:s.measureWidth();o=Math.floor(o),this.getGrid().onColumnComputedWidthChange(a,o),this.columnsResizing=null}},setRendered:function(e){this.visibleColumns=null,this.callParent([e])},setSortState:function(){var e,t,i,n,r=this.getGrid(),s=r.getStore(),o=r.getColumns(),a=s.isGrouped(),l=o&&o.length,c=s.getSorters(),u=s.getGrouper();for(e=0;e<l;e++)n=(t=o[e]).sorter,i=s.getGroupField()===t.getDataIndex(),n&&(a&&!i?n=null:a&&i?n=u:c.contains(n)||u===n||(n=null)),t.setSortState(n)},syncReserveSpace:function(){var e,t,i=0;(this.getVerticalOverflow()||this.getReserveScrollbar())&&(e=this.getGrid())&&(t=e.getScrollable())&&(i=t.getScrollbarSize().width+"px"),this.el.setStyle("padding-right",i)},visibleLeafFilter:function(e){return e.isLeafHeader&&!e.isHidden()}}}),Ext.define("Ext.menu.CheckItem",{extend:Ext.menu.Item,xtype:"menucheckitem",isMenuCheckItem:!0,hideOnClick:!1,config:{checked:!1,checkHandler:null,checkChangeDisabled:!1,value:null,showCheckbox:null},classCls:Ext.baseCSSPrefix+"menucheckitem",checkedCls:Ext.baseCSSPrefix+"checked",checkboxIconElCls:Ext.baseCSSPrefix+"checkbox-icon-el",ariaRole:"menuitemcheckbox",defaultBindProperty:"checked",submenuText:"{0} submenu",href:null,target:null,element:{reference:"element",tabindex:Ext.is.iOS?-1:null,cls:Ext.baseCSSPrefix+"unselectable "+Ext.baseCSSPrefix+"has-left-icon"},focusEl:"checkboxElement",ariaEl:"checkboxElement",getTemplate:function(){var e=this.callParent(),t=e[0];return t.tag="div",t.href=null,t.children.push({tag:"input",type:"checkbox",reference:"checkboxElement",cls:Ext.baseCSSPrefix+"checkbox-el"}),e},initialize:function(){this.callParent(),this.element.on({mousedown:"onCheckboxMousedown",translate:!1,scope:this}),this.checkboxElement.on({change:"onCheckboxChange",delegated:!1,scope:this}),this.syncCheckboxCls()},enableFocusable:function(){this.mixins.focusable.enableFocusable(),this.checkboxElement.dom.readOnly=""},disableFocusable:function(){this.mixins.focusable.disableFocusable(),this.checkboxElement.dom.readOnly="readonly"},setChecked:function(e,t){var i=this.isConfiguring;t&&(this.isConfiguring=!0),this.callParent([e]),t&&(this.isConfiguring=i)},updateChecked:function(e){this.checkboxElement.dom.checked=e,this.onCheckChange()},updateCheckChangeDisabled:function(e){this.checkboxElement.dom.readOnly=e},updateValue:function(e){this.checkboxElement.dom.value=e},updateText:function(e){var t=this.ariaEl.dom;this.callParent([e]),null===this.getValue()&&this.setValue(e),t&&this.getMenu()&&t.setAttribute("aria-label",Ext.String.formatEncode(this.submenuText,e))},applyShowCheckbox:function(e){return!!e},updateShowCheckbox:function(e){this.checkboxElement.setDisplayed(e)},updateIcon:function(e,t){this.callParent([e,t]),this.isConfiguring||this.syncCheckboxCls()},updateIconCls:function(e,t){this.callParent([e,t]),this.isConfiguring||this.syncCheckboxCls()},updateIconAlign:function(e,t){this.callParent([e,t]),this.isConfiguring||this.syncCheckboxCls()},privates:{onSpace:function(e){this.getDisabled()&&e.preventDefault()},onClick:function(e){var t,i,n,r=this.arrowElement;return this.getDisabled()&&e.preventDefault(),"mouse"!==e.pointerType&&(n=this.bodyElement.getRegion(),this.getMenu()&&n.setWidth(n.getWidth()-r.getWidth()-r.getMargin("lr")),n.contains(e.getPoint())?t=!1:e.preventDefault()),i=this.callParent([e]),!1===t?t:i},onCheckboxMousedown:function(e){(!Ext.isApple||Ext.isChrome)&&this.checkboxElement.contains(e.target)||e.preventDefault()},onCheckboxChange:function(){var e=this.checkboxElement.dom,t=this.getChecked(),i=e.checked;if(this.getCheckChangeDisabled())return e.checked=t,!1;i===t||this.getDisabled()||(!1===this.fireEvent("beforecheckchange",this,i)?e.checked=!i:this.setChecked(i))},onCheckChange:function(){var e=this,t=e.checkboxElement.dom.checked,i=e.el,n=e.ariaEl.dom;i.toggleCls(e.checkedCls,!!t),n&&n.setAttribute("aria-checked",e.getMenu()?"mixed":t),e.publishState("checked",t),e.isConfiguring||(Ext.callback(e.getCheckHandler(),e.scope,[e,t],0,e),e.fireEvent("checkchange",e,t))},syncHasIconCls:function(){this.toggleCls(this.hasRightIconCls,this.hasIcon())},syncCheckboxCls:function(){var e,t,i=this.leftIconElement,n=this.rightIconElement,r=this.checkboxIconElCls;t=this.hasIcon()&&"left"===this.getIconAlign()?(e=n,i):(e=i,n),e.addCls(r),t.removeCls(r)}}}),Ext.define("Ext.grid.column.Column",{extend:Ext.grid.HeaderContainer,alternateClassName:"Ext.grid.column.Template",xtype:["gridcolumn","column","templatecolumn"],isGridColumn:!0,mixins:[Ext.mixin.StyleCacher,Ext.mixin.Toolable],config:{align:void 0,cell:{xtype:"gridcell"},dataIndex:null,locked:null,defaultWidth:100,depends:null,emptyText:{cached:!0,$value:""},text:"",sortable:!0,groupable:!0,resizable:!0,hideable:!0,renderer:null,formatter:null,scope:null,editable:null,editor:null,defaultEditor:{lazy:!0,$value:{}},editorDefaults:{cached:!0,$value:{default:{xtype:"textfield",autoComplete:!1,textAlign:void 0},"bool,boolean":{xtype:"checkboxfield",bodyAign:void 0},date:{xtype:"datefield",textAlign:void 0},"float,number":{xtype:"numberfield",textAlign:void 0},"int,integer":{xtype:"numberfield",decimals:0,textAlign:void 0}}},ignore:!1,ignoreExport:!1,exportStyle:null,exportRenderer:!1,summary:null,summaryCell:null,summaryDataIndex:null,summaryFormatter:null,summaryRenderer:null,summaryType:null,exportSummaryRenderer:!1,minWidth:40,tpl:null,computedWidth:null,grouper:{lazy:!0,$value:null},groupHeaderTpl:null,sorter:{lazy:!0,$value:!0},scratchCell:{lazy:!0,$value:!0},menu:{lazy:!0,$value:{}},menuDisabled:null,hideShowMenuItem:{lazy:!0,$value:{xtype:"menucheckitem"}}},updateLocked:function(e){var t,i,n,r=this.getGrid(),s=r&&r.region;return s&&(i=(t=s.lockedGrid).getRegionKey(e),(n=t.getRegion(i))&&n!==s&&t.handleChangeRegion(n,this)),e},toolDefaults:{ui:"gridcolumn",zone:"tail"},toolAnchorName:"titleWrapElement",dockTools:!1,scrollable:!1,docked:null,sortState:null,ariaSortStates:{ASC:"ascending",DESC:"descending"},inheritUi:!0,classCls:Ext.baseCSSPrefix+"gridcolumn",sortedCls:Ext.baseCSSPrefix+"sorted",secondarySortCls:Ext.baseCSSPrefix+"secondary-sort",auxSortCls:Ext.baseCSSPrefix+"aux-sort",resizableCls:Ext.baseCSSPrefix+"resizable",groupCls:Ext.baseCSSPrefix+"group",leafCls:Ext.baseCSSPrefix+"leaf",menuOpenCls:Ext.baseCSSPrefix+"menu-open",alignCls:{left:Ext.baseCSSPrefix+"align-left",center:Ext.baseCSSPrefix+"align-center",right:Ext.baseCSSPrefix+"align-right"},constructor:function(e){var t,i=this;e.columns||i.columns?t=i.isHeaderGroup=!0:i.isLeafHeader=!0,i.callParent([e]),i.addCls(t?i.groupCls:i.leafCls),i.getConfig("menu",!0)||null!==i.getMenuDisabled()||i.setMenuDisabled(!0)},getTemplate:function(){var e=this.beforeTitleTemplate,t=this.afterTitleTemplate,i=[];return e&&i.push.apply(i,e),i.push({reference:"titleElement",className:Ext.baseCSSPrefix+"title-el",children:[{reference:"textElement",className:Ext.baseCSSPrefix+"text-el","data-qoverflow":!0},{reference:"sortIconElement",cls:Ext.baseCSSPrefix+"sort-icon-el "+Ext.baseCSSPrefix+"font-icon"}]}),t&&i.push.apply(i,t),[{reference:"headerElement",cls:Ext.baseCSSPrefix+"header-el",children:[{reference:"titleWrapElement",cls:Ext.baseCSSPrefix+"title-wrap-el",uiCls:"title-wrap-el",children:i},{reference:"resizerElement",cls:Ext.baseCSSPrefix+"resizer-el "+Ext.baseCSSPrefix+"item-no-tap"},{reference:"triggerElement",cls:Ext.baseCSSPrefix+"trigger-el "+Ext.baseCSSPrefix+"font-icon "+Ext.baseCSSPrefix+"item-no-tap"}]},{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",uiCls:"body-el"}]},initialize:function(){var e=this;e.isLeafHeader&&!e.getWidth()&&null==e.getFlex()&&e.setWidth(e.getDefaultWidth()),e.callParent(),e.element.on({tap:"onColumnTap",longpress:"onColumnLongPress",scope:this}),e.triggerElement.on({tap:"onTriggerTap",scope:this}),e.resizerElement.on({tap:"onResizerTap",doubletap:"onResizerDoubleTap",scope:this}),e.isHeaderGroup&&(e.on({add:"doVisibilityCheck",remove:"doVisibilityCheck",show:"onColumnShow",hide:"onColumnHide",move:"onColumnMove",delegate:"> column",scope:e}),e.on({show:"onShow",scope:e}))},doDestroy:function(){this.destroyMembers("editor","resizeListener","menu","hideShowMenuItem","childColumnsMenu"),this.setScratchCell(null),this.mixins.toolable.doDestroy.call(this),this.callParent()},onAdded:function(e,t){this.visibleIndex=null,this.callParent([e,t])},ensureEditor:function(){var e,t=this.getEditable(),i=!1!==t&&this.getEditor();return!i&&t&&(e=this.getDefaultEditor(),i=Ext.create(e),this.setEditor(i)),i},getVisibleIndex:function(){var e,t=this.visibleIndex;return null==t&&(this.isHeaderGroup?t=!1:(e=this.getRootHeaderCt())&&(t=e.indexOfLeaf(this)),this.visibleIndex=t),t},_columnScopeRe:/^column\\./,_gridScopeRe:/^grid\\./,applyMenu:function(e){var t,i,n,r,s,o,a=this,l=a.getGrid(),c=a._columnScopeRe,u=a._gridScopeRe;if(Ext.destroy(a.sortChangeListener),e&&!e.isMenu){for(Ext.isArray(e)?(t=e,e=null):e.items||(e={items:e}),(e=(i=l.getColumnMenu())?(i=Ext.clone(i),e?Ext.merge(i,e):i):e?Ext.clone(e):{}).ownerCmp=a,e=Ext.create(e),a.sortChangeListener=e.on({groupchange:"onColumnMenuGroupChange",scope:a}),n=(s=e.getItems().items)&&s.length;0<n--;)r=s[n],c.test(o=r.getHandler()||"")?(r.setHandler(o.substr(7)),r.scope=a):u.test(o)?(r.setHandler(o.substr(5)),r.scope=l):r.isMenuCheckItem&&(c.test(o=r.getCheckHandler()||"")?(r.setCheckHandler(o.substr(7)),r.scope=a):u.test(o)&&(r.setCheckHandler(o.substr(5)),r.scope=l));t&&e.add(t),l.fireEvent("columnmenucreated",l,a,e)}return e},updateMenu:function(e,t){t&&t.destroy()},beforeShowMenu:function(e){var t=this.getGrid().getStore(),i=t&&!!t.getGrouper(),n=e.getComponent("groupByThis"),r=e.getComponent("showInGroups"),s=e.getComponent("sortAsc"),o=e.getComponent("sortDesc");if(s.setDisabled(!t),o.setDisabled(!t),!t)return n.setHidden(!0),void r.setHidden(!0);e.suspendEvent("groupchange"),s&&this.syncMenuItemState(s),o&&this.syncMenuItemState(o),n&&n.setHidden(!(this.canGroup()&&!t.isTreeStore)),e.resumeEvent("groupchange"),r&&(r.setHidden(t.isTreeStore),r.setChecked(i),r.setDisabled(!i))},showMenu:function(){var e,t=this,i=!t.getMenuDisabled()&&t.getMenu(),n=t.menuOpenCls;i&&(e=t.getGrid(),!1!==t.beforeShowMenu(i)&&!1!==e.beforeShowColumnMenu(t,i)&&(i.showBy(t.triggerElement),t.addCls(n),i.on({single:!0,hide:function(){t.destroyed||t.destroying||t.removeCls(n),e.destroyed||e.destroying||e.onColumnMenuHide(t,i)}})))},getCells:function(){var e,t,i=[],n=this.getGrid().items.items,r=n.length;for(e=0;e<r;++e)(t=n[e]).isGridRow&&i.push(t.getCellByColumn(this));return i},getColumnForField:function(e){return e===this.getDataIndex()?this:this.callParent([e])},isHideable:function(){var t=[];return this.getRootHeaderCt().visitPreOrder("gridcolumn:not([hidden])",function(e){!e.getMenuDisabled()&&e.getConfig("menu",!0)&&t.push(e)}),1<t.length||t[0]!==this},applyTpl:function(e){return Ext.XTemplate.get(e)},applyAlign:function(e,t){return null==e&&(e=this.isHeaderGroup?"center":"left"),e},updateAlign:function(e,t){var i=this.alignCls;t&&this.removeCls(i[t]),e&&(i[e]||Ext.raise("Invalid value for align: '"+e+"'"),this.addCls(i[e])),this.syncToolableAlign()},updateMenuDisabled:function(e){this.triggerElement&&this.triggerElement.setVisible(!e)},onColumnTap:function(e){var t=this.getGrid(),i=t.getSelectable(),n=t.getStore(),r=n&&n.getSorters(!0),s=n&&this.pickSorter(),o=s?r.indexOf(s):-1,a=s&&(-1!==o||s===n.getGrouper());if(Ext.Component.from(e)===this&&!e.getTarget("."+Ext.baseCSSPrefix+"item-no-tap",this))return!n||!this.isSortable()||i&&i.getColumns()||(s.isGrouper?(s.toggle(),n.group(s)):0===o?this.toggleSortState():a?n.sort(s,"prepend"):this.sort("ASC")),this.fireEvent("tap",this,e)},onTriggerTap:function(e){this.fireEvent("triggertap",this,e)},onResizerTap:function(e){e.getPoint().isContainedBy(this.triggerElement.getRegion())&&this.fireEvent("triggertap",this,e)},onResizerDoubleTap:function(e){e.claimGesture(),Ext.asap(this.autoSize,this)},onColumnLongPress:function(e){this.fireEvent("longpress",this,e)},onGroupByThis:function(){var e,t=this.getGrid(),i=this.getGrouper(),n=t.getStore();i||null!=(e=this.getDataIndex())&&(this.setGrouper({property:e}),i=this.getGrouper()),i&&n.setGrouper(i)},onColumnMenuGroupChange:function(e,t,i){"sortDir"===t&&this.setSortDirection(i)},getSortDirection:function(){var e=this.pickSorter();return e&&e.getDirection()},setSortDirection:function(e){var t=this.getGrid().getStore(),i=this.pickSorter(),n=t.getSorters(!0),r=i&&(n.contains(i)||i.isGrouper);if(e){if(!r)return this.sort(e);i.getDirection()!==e&&(i.setDirection(e),i.isGrouper?t.group(i):(n.beginUpdate(),n.endUpdate()))}else i&&n.remove(i);t.getRemoteSort()||this.getRootHeaderCt().setSortState()},syncMenuItemState:function(e){if(e){var t=this.isSortable(),i=this.getGrid().getStore(),n=this.pickSorter(),r=n&&(i.getSorters().contains(n)||n.isGrouper);e.setDisabled(!t),e.setChecked(t&&r&&n.getDirection()===e.getValue())}},onToggleShowInGroups:function(){this.getGrid().getStore().setGrouper(null)},updateResizable:function(){var e=null!=this.getWidth(),t=null!=this.getFlex();this.toggleCls(this.resizableCls,!(!this.getResizable()||!(e||t||this.isLeafHeader)))},updateText:function(e){this.setHtml(e||"")},onResize:function(){this.isHidden(!0)||(this.updateResizable(this.getResizable()),this.measureWidth(),this.syncRowHeight())},syncRowHeight:function(){var e,t=this.getGrid().allPartners||[this.getGrid()],i=t.length;for(e=0;e<i;++e)t[e].syncRowsToHeight(!0)},getComputedWidth:function(){return this.isVisible(!0)?this._computedWidth:0},updateColumns:function(e){this.getItems(),this.add(e)},measureWidth:function(){var e=this.el.measure("w");return this.setComputedWidth(e),e},updateComputedWidth:function(e,t){var i=!this.isConfiguring&&this.getRootHeaderCt();i&&(i.onColumnComputedWidthChange(this,e),this.fireEvent("columnresize",this,e,t))},updateDataIndex:function(e){this.isConfiguring||this.pickSorter()&&this.setSorter(null)},applyGroupHeaderTpl:function(e){return Ext.XTemplate.get(e)},updateGroupHeaderTpl:function(e){var t=this.grouper;t&&(t.headerTpl=e)},isSortable:function(){return this.isLeafHeader&&this.getSortable()&&(this.pickSorter()||this.getDataIndex())&&this.getRootHeaderCt().getSortable()&&!1!==this.getGrid().sortableColumns},applyEditor:function(e){return e&&!e.isInstance?("string"==typeof e&&(e={xtype:e}),e.xtype||(e=Ext.apply({xtype:e.field?"celleditor":"textfield"},e)),Ext.create(e)):e},applyEditorDefaults:function(e){var t,i,n,r={};if(e)for(i in e)for(n=i.split(","),t=0;t<n.length;++t)r[n[t]]=e[i];return r},applyDefaultEditor:function(e){var t,i,n=this.getDataIndex(),r="bodyAlign",s="textAlign";return n&&(i=this.getGrid().store.getModel().getField(n),e.isInstance||(e=Ext.clone(e)).xtype||(t=this.getEditorDefaults(),s in(t=Ext.clone(i&&t[i.type]||t.default))&&void 0===t[s]?t[s]=this.getAlign():r in t&&void 0===t[r]&&(t[r]=this.getAlign()),Ext.applyIf(e,t)),e._validationField=i),e},updateEditor:function(e,t){t&&(!e||e.isCellEditor&&e.getField()!==t)&&t.destroy(),e&&(e.$column=this)},applyFormatter:function(e){var t,i=this,n=e;return n?(t=Ext.app.bind.Parser.fly(n),n=t.compileFormat(),t.release(),function(e){return n(e,i.getScope()||i.resolveListenerScope())}):n},applySummaryFormatter:function(e){var t,i=this,n=e;return n?(t=Ext.app.bind.Parser.fly(n),n=t.compileFormat(),t.release(),function(e){return n(e,i.getScope()||i.resolveListenerScope())}):n},applyGrouper:function(e){var t=e;return t&&!t.isInstance&&("string"==typeof(t="string"==typeof t?{groupFn:t}:Ext.apply({},t)).groupFn&&(t=this.scopeReplacer(t,e,"groupFn","setGroupFn")),"string"==typeof t.sorterFn&&(t=this.scopeReplacer(t,e,"sorterFn","setSorterFn")),e=new Ext.util.Grouper(t)),e&&(e.owner=this.getGrid(),e.headerTpl=this.getGroupHeaderTpl()),e},updateGrouper:function(e,t){var i=this.getGrid().getStore();i&&t&&t===i.getGrouper()&&i.setGrouper(e),this.grouper=e},applySorter:function(e){var t,i=e;if(i&&!i.isInstance){if(!0===i){if(!(t=this.getSortParam()))return null;i={property:t,direction:"ASC"}}else"string"==typeof i&&(i={sorterFn:i}),"string"==typeof i.sorterFn&&(i=this.scopeReplacer(i,e,"sorterFn","setSorterFn"));e=new Ext.util.Sorter(i)}return e&&(e.owner=this.getGrid()),e},updateSorter:function(e,t){var i,n=this.getGrid().getStore(),r=n?n.getSorters():null;r&&t&&-1<(i=r.indexOf(t))&&(e?r.splice(i,1,e):r.remove(t)),this.sorter=e},pickSorter:function(){var e,t=this.getGrid().getStore();return t.isGrouped()&&t.getGroupField()===this.getDataIndex()?(e=this.getGrouper()||t.getGrouper(),this.sortState=e.getDirection()):e=this.getSorter(),e},applyHideShowMenuItem:function(e,t){return Ext.updateWidget(t,e,this,"createHideShowMenuItem")},createHideShowMenuItem:function(e){return Ext.apply({text:this.getText(),checked:!this.getHidden(),column:this},e)},getHideShowMenuItem:function(e){var t,i=this.callParent(),n=this.items.items,r=n.length,s=[],o=this.childColumnsMenu;if(this.isHeaderGroup&&!1!==e&&(o||(i.setMenu({}),this.childColumnsMenu=o=i.getMenu()),!o.items.length||this.rebuildChildColumnsMenu)){for(t=0;t<r;t++)n[t].getHideable()&&s.push(n[t].getHideShowMenuItem());o.removeAll(!1),o.add(s)}return i["set"+(i.getMenu()?"CheckChange":"")+"Disabled"](!this.isHideable()),i},getInnerHtmlElement:function(){return this.textElement},getSortParam:function(){return this.getDataIndex()},applyCell:function(e,t){return t&&(e=Ext.apply(t,e)),e},createCell:function(e){var t,i=this,n={row:e,ownerCmp:e||i,column:i,width:i.rendered?i.getComputedWidth()||i.measureWidth():i.getWidth(),minWidth:i.getMinWidth()},r=i.getAlign();return e&&e.isSummaryRow?(t=i.getSummaryCell())||"widgetcell"===(t=i.getCell()).xtype&&((t=Ext.apply({},t)).xtype="gridcell",delete t.widget):t=i.getCell(),r&&(n.align=r),e&&(n.hidden=i.isHidden(e.getGrid().getHeaderContainer()),n.record=e.getRecord(),(n.ui=e.getDefaultCellUI())||delete n.ui),"string"==typeof t?n.xtype=t:Ext.apply(n,t),n},applyScratchCell:function(e,t){return e&&((e=Ext.create(this.createCell())).printValue||(Ext.destroy(e),(e=this.createCell()).xtype="gridcell",e=Ext.create(e)),e.addCls(this.floatingCls)),t&&t.destroy(),e},printValue:function(e){var t,i=this.getGrid().dataItems[0];return i&&i.isGridRow&&(t=i.getCellByColumn(this)),(t=t&&t.printValue?t:this.getScratchCell()).printValue(e)},autoSize:function(){var e,t,i,n,r,s,o,a,l=Math.max,c=new Ext.util.TextMetrics,u=0,d=0,h=this.getCells(),f=this.getGrid();if(this.getResizable()){if(i=f.getStore(),e=this.getDataIndex(),i&&e)if(s=i.isVirtualStore?i.pageMap.pages:i.getData()&&i.getData().items,e&&Ext.isArray(s))for(n=s.length,r=0;r<n;r++)d=l(d,c.getWidth(s[r].get(e)));else if(Ext.isObject(s))for(o in s)for(n=(t=s[o].records)&&t.length,r=0;r<n;r++)d=l(d,c.getWidth(t[r].get(e)));if(d=l(d,this.textElement.dom.offsetWidth+this.titleElement.getPadding("lr")),h.length){for(n=h.length,a=h[0].element,r=0;r<n;r++)d=l(d,h[r].element.getTextWidth());Ext.supports.ScrollWidthInlinePaddingBug&&(u+=a.getPadding("r")),f.getColumnLines()&&(u+=a.getBorderWidth("lr")),d+=u}d=l(d+1,this.getMinWidth()),this.setWidth(d),c.destroy()}},privates:{directionSequence:{null:"ASC",ASC:"DESC",DESC:null},applySummary:function(e){return e=e&&Ext.Factory.dataSummary(e)},beginRefresh:function(e){var t=this.getGrid();return(e=e||{}).column=this,e.grid=t,e.store=t.store,e},canGroup:function(){return this.getGroupable()&&(this.getDataIndex()||this.getGrouper())},sort:function(e,t){var i=this.pickSorter(),n=this.getGrid(),r=n.getStore(),s=r.getSorters();this.isSortable()&&(i.isGrouper?i.getDirection()!==e&&(i.toggle(),r.group(i)):e?(i?0!==s.indexOf(i)&&i.setDirection(e):(this.setSorter({property:this.getSortParam(),direction:"ASC"}),i=this.getSorter()),r.sort(i,t||n.getMultiColumnSort()?"multi":"replace")):i&&(s.remove(i),r.getRemoteSort()||this.getRootHeaderCt().setSortState()))},toggleSortState:function(){this.sort(this.directionSequence[this.sortState])},setSortState:function(e){var t,i,n,r=this,s=r.getGrid().getStore(),o=s.isGrouped()&&s.getGrouper(),a=r.sortState,l=null,c=r.sortedCls,u=r.secondarySortCls,d=r.auxSortCls,h=c+"-asc",f=c+"-desc",g=r.ariaEl.dom,p="",m=[u,d];switch(e&&("string"==typeof e?l=e:(e.isSorter||Ext.raise("Must pass a sorter instance into HeaderContainer#saveState"),-1===(i=e===o?0:s.getSorters().indexOf(e))&&Ext.raise("Sorter passed to HeaderContainer#saveState not in grid's store"),l=e.getDirection(),p=1===i?u:1<i?d:"")),t=l!==a,r.sortState=l){case"DESC":n=[c,f,p],m.push(h);break;case"ASC":n=[c,h,p],m.push(f);break;default:m.push(c,h,f)}r.replaceCls(m,n),g&&(l?g.setAttribute("aria-sort",r.ariaSortStates[l]):g.removeAttribute("aria-sort")),t&&r.fireEvent("sort",r,l,a)},getVisibleCount:function(){var e,t=this.getInnerItems(),i=t.length,n=0;for(e=0;e<i;++e)t[e].isHeaderGroup?n+=t[e].getVisibleCount():n+=t[e].isHidden()?0:1;return n},onShow:function(){var e;this.getVisibleCount()||(e=this.getComponent(0))&&e.show()},doVisibilityCheck:function(){var e,t=this.getInnerItems(),i=t.length;for(e=0;e<i;e++)if(!t[e].isHidden())return void(this.isHidden()&&(this.initialized?this.show():this.setHidden(!1)));this.hide(),this.rebuildChildColumnsMenu=!0,this.updateMenuDisabledState()},onColumnShow:function(){var e;0<this.getVisibleCount()&&(this.show(),(e=this.getHideShowMenuItem(!1)).setChecked(!0),e.setCheckChangeDisabled(!1)),this.rebuildChildColumnsMenu=!0,this.updateMenuDisabledState()},onColumnHide:function(e){var t;0===this.getVisibleCount()&&(this.hide(),(t=this.getHideShowMenuItem(!1)).setChecked(!1),t.setCheckChangeDisabled(!0)),this.rebuildChildColumnsMenu=!0,this.updateMenuDisabledState()},onColumnMove:function(e){this.rebuildChildColumnsMenu=!0},scopeReplacer:function(e,t,i,n){var r=this,s=e[i];return"string"==typeof s&&(i=i||"sorterFn",n=n||"setSorterFn",t===e&&(e=Ext.apply({},e)),e[i]=function(){var e=r.resolveListenerScope(),t=e&&e[s],i=0;return t?(this[n](t.bind(e)),i=t.apply(e,arguments)):e?Ext.raise('No such method "'+s+'" on '+e.$className):Ext.raise("Cannot resolve scope for column "+r.id),i}),e}}}),Ext.define("Ext.grid.filters.Column",{override:"Ext.grid.column.Column",config:{filter:null},createFilter:function(e){var t,i,n,r=this.getFilter();return!1!==r&&(r&&!0!==r?"string"==typeof r&&(t=!0,r={type:r}):(t=!0,r={}),r.type||(t||(t=!0,r=Ext.clone(r)),(r.type=this.defaultFilterType||this.columnFilterTypes[this.xtype])||(n=(n=this.getGrid().getStore())&&n.getModel(),(i=this.getDataIndex())&&n&&(i=n.getField(i),r.type=this.fieldFilterTypes[i&&i.type])),r.type||(r=!1)),e&&r&&(t||(r=Ext.clone(r)),r=Ext.apply(r,e))),r},privates:{columnFilterTypes:{booleancolumn:"boolean",datecolumn:"date",numbercolumn:"number"},fieldFilterTypes:{auto:"string",bool:"boolean",date:"date",float:"number",number:"number",int:"number",integer:"number",string:"string"}}},function(){Ext.Factory.define("gridFilters",{defaultType:"string"})}),Ext.define("Ext.grid.cell.Date",{extend:Ext.grid.cell.Text,xtype:"datecell",isDateCell:!0,config:{format:""},updateColumn:function(e,t){var i;this.callParent([e,t]),e&&e.isDateColumn&&null!==(i=e.getFormat())&&this.setFormat(i)},applyFormat:function(e){return e||Ext.Date.defaultFormat},updateFormat:function(e){this.isConfiguring||this.writeValue()},formatValue:function(e){return e?Ext.Date.format(e,this.getFormat()):""}}),Ext.define("Ext.grid.column.Date",{extend:Ext.grid.column.Column,xtype:"datecolumn",isDateColumn:!0,config:{format:null,defaultEditor:{xtype:"datepickerfield"},cell:{xtype:"datecell"}}}),Ext.define("Ext.grid.menu.Shared",{extend:Ext.menu.Item,config:{grid:null},doDestroy:function(){this.setGrid(null),this.callParent()},updateGrid:function(e,t){t&&t.removeSharedMenuItem(this),(this.grid=e)&&e.addSharedMenuItem(this)},onBeforeShowColumnMenu:function(e){e.add(this)},onColumnMenuHide:function(e){this.destroyed||e.remove(this,!1)}}),Ext.define("Ext.grid.menu.Columns",{extend:Ext.grid.menu.Shared,xtype:"gridcolumnsmenu",iconCls:Ext.baseCSSPrefix+"headermenu-columns-icon",text:"Columns",menu:{},updateMenu:function(e,t){this.callParent([e,t]),Ext.destroy(this.menuListeners),e&&(this.menuListeners=e.on({checkchange:"onCheckItem",delegate:"menucheckitem",scope:this,destroyable:!0}))},onBeforeShowColumnMenu:function(e,t,i){var n,r,s=i.getHeaderContainer().items.items,o=[],a=s.length,l=this.getMenu();for(this.callParent([e,t,i]),n=0;n<a;++n)(r=s[n]).getHideable()&&o.push(r.getHideShowMenuItem());l.removeAll(!1),l.add(o)},onCheckItem:function(e,t){e.column.setHidden(!t)}}),Ext.define("Ext.grid.menu.GroupByThis",{extend:Ext.menu.Item,xtype:"gridgroupbythismenuitem",iconCls:Ext.baseCSSPrefix+"headermenu-group-by-this",text:"Group by this field"}),Ext.define("Ext.grid.menu.ShowInGroups",{extend:Ext.menu.CheckItem,xtype:"gridshowingroupsmenuitem",hideOnClick:!0,text:"Show in groups"}),Ext.define("Ext.menu.RadioItem",{extend:Ext.menu.CheckItem,xtype:"menuradioitem",classCls:Ext.baseCSSPrefix+"menuradioitem",nameable:!0,shareableName:!0,ariaRole:"menuitemradio",config:{group:null,allowUncheck:null},initialize:function(){this.getGroup()||Ext.raise("Menu RadioItems must be configured with a group"),this.callParent()},privates:{onSpace:function(e){this.checkboxElement.dom.checked&&e.preventDefault()},updateGroup:function(e){this.name=e},onCheckboxChange:function(){var e=this.checkboxElement.dom,t=e.checked;t===this.getChecked()||this.getDisabled()||(t||this.getAllowUncheck()?this.callParent():e.checked=!0)},onCheckChange:function(){var e,t,i,n,r,s=this.checkboxElement.dom,o=this.getParent();if(this.getGroup(),(e=this.name)&&o&&!o.updatingGroups)if(t={},s.checked)t[e]=this.getValue(),o.setGroups(t);else{for(n=(i=o.lookupName(e))&&i.length,r=0;r<n&&!i[r].checkboxElement.dom.checked;r++);r===n&&(t[e]=null,o.setGroups(t))}this.callParent()}}}),Ext.define("Ext.grid.menu.SortAsc",{extend:Ext.menu.RadioItem,xtype:"gridsortascmenuitem",iconCls:Ext.baseCSSPrefix+"headermenu-sort-asc",text:"Sort Ascending",value:"ASC",allowUncheck:!0,group:"grid-sorters"}),Ext.define("Ext.grid.menu.SortDesc",{extend:Ext.menu.RadioItem,xtype:"gridsortdescmenuitem",iconCls:Ext.baseCSSPrefix+"headermenu-sort-desc",text:"Sort Descending",value:"DESC",allowUncheck:!0,group:"grid-sorters"}),Ext.define("Ext.grid.selection.Cells",{extend:Ext.dataview.selection.Selection,alias:"selection.cells",isCells:!0,clone:function(){var e=new this.self(this.view);return this.startCell&&(e.startCell=this.startCell.clone(),e.endCell=this.endCell.clone()),e},isSelected:function(e,t){var i;return!!(this.startCell&&(e.isGridLocation&&(t=e.columnIndex,e=e.recordIndex),Ext.isNumber(e)&&Ext.isNumber(t)||Ext.raise("Cells#isSelected must be passed either a GridLocation of a row and column index"),e>=(i=this.getRowRange())[0]&&e<=i[1]))&&(t>=(i=this.getColumnRange())[0]&&t<=i[1])},eachRow:function(e,t){var i,n=this.getRowRange(),r=this.view.store;for(i=n[0];i<=n[1];i++)if(!1===e.call(t||this,r.getAt(i)))return},eachColumn:function(e,t){var i,n=this.getColumnRange(),r=this.view.getVisibleColumns();for(i=n[0];i<=n[1];i++)if(!1===e.call(t||this,r[i],i))return},eachCell:function(e,t){var i,n,r,s,o=this.view,a=o.store,l=this.getRowRange(),c=this.getColumnRange();for(r=l[0];r<=l[1];r++)for(i=new Ext.grid.Location(o,a.getAt(r)),s=c[0];s<=c[1];s++)if(n=i.cloneForColumn(s),!1===e.call(t||this,n,s,r))return},getFirstRowIndex:function(){return this.startCell?Math.min(this.startCell.recordIndex,this.endCell.recordIndex):0},getLastRowIndex:function(){return this.startCell?Math.max(this.startCell.recordIndex,this.endCell.recordIndex):-1},getFirstColumnIndex:function(){return this.startCell?Math.min(this.startCell.columnIndex,this.endCell.columnIndex):0},getLastColumnIndex:function(){return this.startCell?Math.max(this.startCell.columnIndex,this.endCell.columnIndex):-1},privates:{clear:function(e){var t,i=this.view;i.getVisibleColumns().length&&this.eachCell(function(e){i.onCellDeselect(e),t=!0}),this.startCell=this.endCell=null,t&&!e&&this.getSelectionModel().fireSelectionChange()},setRangeStart:function(e){this.startCell=(this.endCell=e.clone()).clone(),this.view.onCellSelect(e),this.fireCellSelection()},setRangeEnd:function(e){var t,i,n,r,s,o,a,l,c,u,d=this.view,h=d.store,f=d.renderInfo,g=d.getVisibleColumns().length-1;for(this.endCell=e.clone(),t=this.getRange(),i=this.lastRange||t,n=Math.max(Math.min(t[0][1],i[0][1]),f.indexTop),r=Math.min(Math.max(t[1][1],i[1][1]),f.indexBottom-1),s=Math.min(t[0][0],i[0][0]),o=Math.min(Math.max(t[1][0],i[1][0]),g),a=n;a<=r;a++)for(u=new Ext.grid.Location(d,h.getAt(a)),l=s;l<=o;l++)c=u.cloneForColumn(l),a<t[0][1]||a>t[1][1]||l<t[0][0]||l>t[1][0]?d.onCellDeselect(c):d.onCellSelect(c);this.lastRange=t,this.fireCellSelection()},extendRange:function(e){var t,i=this.view;e[e.type]<0?(t=new Ext.grid.Location(i,{record:this.getLastRowIndex(),column:this.getLastColumnIndex()}),this.startCell=e.start.clone(),this.setRangeEnd(t),i.getNavigationModel().setLocation({column:e.start.columnIndex,record:e.start.record})):(this.startCell=new Ext.grid.Location(i,{record:this.getFirstRowIndex(),column:this.getFirstColumnIndex()}),this.setRangeEnd(e.end),i.getNavigationModel().setLocation({column:e.end.columnIndex,record:e.end.record}))},reduceRange:function(e){var t,i=this.view;"rows"===e.type?(t=new Ext.grid.Location(i,{record:e.end.recordIndex-1,column:e.end.columnIndex}),this.setRangeEnd(t),i.getNavigationModel().setLocation({column:e.end.columnIndex,record:this.view.getStore().getAt(e.end.recordIndex-1)})):(t=new Ext.grid.Location(i,{record:e.end.recordIndex,column:e.end.columnIndex}),this.setRangeEnd(t),i.getNavigationModel().setLocation({column:e.end.columnIndex,record:this.view.getStore().getAt(e.end.recordIndex)}))},getRange:function(){return[[this.getFirstColumnIndex(),this.getFirstRowIndex()],[this.getLastColumnIndex(),this.getLastRowIndex()]]},getRangeSize:function(){return this.getCount()},getRecords:function(){var e=this.getRowRange();return this.getSelectionModel().getStore().getRange(e[0],e[1])},getCount:function(){var e=this.getRange();return(e[1][0]-e[0][0]+1)*(e[1][1]-e[0][1]+1)},fireCellSelection:function(){var e=this.getSelectionModel().getView();e.fireEvent("cellselection",e,this.getRange())},selectAll:function(){var e=this.view,t=e.getVisibleColumns();this.clear(),this.setRangeStart(new Ext.grid.Location(e,{record:0,column:0})),this.setRangeEnd(new Ext.grid.Location(e,{record:e.store.last(),column:t[t.length-1]}))},isAllSelected:function(){var e=this.startCell,t=this.endCell;return!(!e||e.columnIndex||e.recordIndex)&&(t.columnIndex===t.view.getVisibleColumns().length-1&&t.recordIndex===t.view.store.getCount()-1)},getColumnRange:function(){return[this.getFirstColumnIndex(),this.getLastColumnIndex()]},getLastSelected:function(){return this.view.getStore().getAt(this.endCell.recordIndex)},getRowRange:function(){return[this.getFirstRowIndex(),this.getLastRowIndex()]},onSelectionFinish:function(){var e=this,t=e.view;e.getCount()?e.getSelectionModel().onSelectionFinish(e,new Ext.grid.Location(t,{record:e.getFirstRowIndex(),column:e.getFirstColumnIndex()}),new Ext.grid.Location(t,{record:e.getLastRowIndex(),column:e.getLastColumnIndex()})):e.getSelectionModel().onSelectionFinish(e)}}}),Ext.define("Ext.grid.selection.Columns",{extend:Ext.dataview.selection.Selection,alias:"selection.columns",isColumns:!0,clone:function(){var e=new this.self(this.view),t=this.selectedColumns;return t&&(e.selectedColumns=Ext.Array.slice(t)),e},eachRow:function(e,t){var i=this.selectedColumns;i&&i.length&&this.view.getStore().each(e,t||this)},eachColumn:function(e,t){var i,n,r=this.selectedColumns;if(r)for(i=r.length,n=0;n<i;n++)if(!1===e.call(t||this,r[n],n))return!1},eachCell:function(t,i){var n,r,s=this,e=s.view,o=s.selectedColumns,a=new Ext.grid.Location(e);o&&(n=o.length,e.getStore().each(function(e){for(a=a.clone({record:e}),r=0;r<n;r++)if(a=a.clone({column:o[r]}),!1===t.call(i||s,a,a.columnIndex,a.recordIndex))return!1}))},isSelected:function(e){var t=this.selectedColumns;return!!(e&&e.isGridColumn&&t&&t.length)&&Ext.Array.contains(t,e)},getCount:function(){var e=this.selectedColumns;return e?e.length:0},getColumns:function(){return this.selectedColumns||[]},privates:{add:function(e,t){var i;e.isGridColumn||Ext.raise("Column selection must be passed a grid Column header object"),i=this.getSelectionModel(),Ext.Array.include(this.selectedColumns||(this.selectedColumns=[]),e),this.refreshColumns(e),i.updateHeaderState(),t||(i.fireSelectionChange(),this.fireColumnSelection())},clear:function(e){var t=this.getSelectionModel(),i=this.selectedColumns;i&&i.length&&(this.selectedColumns=[],this.refreshColumns.apply(this,i),t.updateHeaderState(),e||(t.fireSelectionChange(),this.fireColumnSelection()))},setRangeStart:function(e){this.getColumns().push(e),this.clear(!0),this.startColumn=e,this.add(e)},setRangeEnd:function(e){var t,i=this.getColumns(),n=this.view.ownerGrid.getHeaderContainer(),r=n.getVisibleColumns(),s=n.indexOfLeaf(this.startColumn),o=n.indexOfLeaf(e);for(o<s&&(t=s,s=o,o=t),this.selectedColumns=[],t=s;t<=o;t++)this.selectedColumns.push(r[t]),i.push(r[t]);this.refreshColumns.apply(this,i),this.fireColumnSelection()},isAllSelected:function(){var e,t=this.selectedColumns;return!!t&&(e=this.view.getHeaderContainer(),t.length===e.getVisibleColumns().length)},refreshColumns:function(e){var t,i,n,r=this.view,s=r.store,o=r.renderInfo,a=arguments,l=a.length,c=[];if(r.rendered){for(n=0;n<l;n++)c[n]=this.isSelected(a[n]);for(i=o.indexTop;i<o.indexBottom;i++)for(t=new Ext.grid.Location(r,s.getAt(i)),n=0;n<l;n++)t=t.cloneForColumn(a[n]),c[n]?r.onCellSelect(t):r.onCellDeselect(t)}},remove:function(e,t){var i=this.getSelectionModel();e.isGridColumn||Ext.raise("Column selection must be passed a grid Column header object"),this.selectedColumns&&(Ext.Array.remove(this.selectedColumns,e),e.getGrid()&&e.isVisible()&&(this.refreshColumns(e),i.updateHeaderState(),t||(i.fireSelectionChange(),this.fireColumnSelection())))},fireColumnSelection:function(){var e=this.getSelectionModel().getView();e.fireEvent("columnselection",e,this.selectedColumns)},selectAll:function(){this.clear(),this.selectedColumns=this.getSelectionModel().lastContiguousColumnRange=this.view.getHeaderContainer().getVisibleColumns(),this.refreshColumns.apply(this,this.selectedColumns)},extendRange:function(e){var t,i=this.view.getHeaderContainer().getVisibleColumns();for(t=e.start.columnIndex;t<=e.end.columnIndex;t++)this.add(i[t])},reduceRange:function(e){var t,i=this.view.getHeaderContainer().getVisibleColumns(),n=e.start.columnIndex,r=e.end.columnIndex,s=Math.abs(n-r)+1;for(t=this.selectedColumns.length-s;0<t;t--)this.remove(i[r+t])},onSelectionFinish:function(){var e,t,i=this.getContiguousSelection();i?(e=new Ext.grid.Location(this.view,{record:0,column:i[0]}),t=new Ext.grid.Location(this.view,{record:this.view.getStore().getCount()-1,column:i[1]}),this.getSelectionModel().onSelectionFinish(this,e,t)):this.getSelectionModel().onSelectionFinish(this)},getContiguousSelection:function(){var e,t=Ext.Array.sort(this.getColumns(),function(e,t){return e.getGrid().ownerGrid.getHeaderContainer().indexOfLeaf(e)-t.getGrid().ownerGrid.getHeaderContainer().indexOfLeaf(t)}),i=t.length;if(i){for(e=1;e<i;e++)if(t[e].getVisibleIndex()!==t[e-1].getVisibleIndex()+1)return!1;return[t[0],t[i-1]]}}}}),Ext.define("Ext.grid.selection.Replicator",{extend:Ext.plugin.Abstract,alias:"plugin.selectionreplicator",init:function(e){this.gridListeners=e.on({beforeselectionextend:this.onBeforeSelectionExtend,scope:this,destroyable:!0})},onBeforeSelectionExtend:function(e,t,i){var n=this.columns=[];return t.eachColumn(function(e){n.push(e)}),this.replicateSelection(e,t,i)},replicateSelection:function(e,t,i){var n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v,E,b;if(!i.columns&&!t.isColumns){if(n=this.columns,u=t.getFirstRowIndex(),y=(d=t.getLastRowIndex())-u+1,v=[],r=n.length,g=n[0].getGrid().getStore(),1==y)a=this.getColumnValues(t.view.getStore().getAt(u));else for(a=new Array(r),(v=i.rows<0?[g.getAt(u+1),g.getAt(u)]:[g.getAt(d-1),g.getAt(d)])[0]=this.getColumnValues(v[0]),v[1]=this.getColumnValues(v[1]),s=0;s<r;s++)E=v[1][s],b=v[0][s],isNaN(E)||isNaN(b)||(a[s]=Number(E)-Number(b));if(f=i.rows<0?(l=i.end.recordIndex,c=i.start.recordIndex-1,-1):(l=i.start.recordIndex,c=i.end.recordIndex+1,1),1==y)for(h=l;h!==c;h+=f)for(p=g.getAt(h),s=0;s<r;s++)(o=n[s]).getDataIndex()&&p.set(o.getDataIndex(),a[s]);else for(h=l;h!==c;h+=f)for(p=g.getAt(h),m=this.getColumnValues(g.getAt(h-f)),s=0;s<r;s++)(o=n[s]).getDataIndex()&&(x=m[s],isNaN(x)||p.set(o.getDataIndex(),Ext.coerce(Number(x)+a[s],x)))}},getColumnValues:function(e){var t,i,n=this.columns,r=n.length,s=new Array(n.length);for(t=0;t<r;t++)(i=n[t]).getDataIndex()&&(s[t]=e.get(i.getDataIndex()));return s},destroy:function(){this.gridListeners=Ext.destroy(this.gridListeners),this.callParent()}}),Ext.define("Ext.grid.selection.SelectionExtender",{maskBox:{},constructor:function(e){var t=this,i=e.view,n={dragstart:"onDragStart",dragend:"onDragEnd",scope:t};Ext.apply(t,e),t.el=i.outerCt,t.handle=i.bodyElement.createChild({cls:Ext.baseCSSPrefix+"selmodel-extender-drag-handle"}).hide(),Ext.supports.Touch&&(n.longpress="onHandleLongpress"),t.handle.on(n),t.mask=i.outerCt.createChild({cls:Ext.baseCSSPrefix+"selmodel-extender-mask"}).hide(),t.scrollListener=i.getScrollable().on({scroll:t.onViewScroll,scope:t,destroyable:!0}),t.viewListener=i.on({columnresize:"alignHandle",columnhide:"alignHandle",columnshow:"alignHandle",columnmove:"alignHandle",scope:t,destroyable:!0}),e&&e.axes&&t.setAxes(e.axes)},setAxes:function(e){this.axes=e,this.extendX=!!(1&e),this.extendY=!!(2&e)},setHandle:function(e,t){this.firstPos=e,this.endPos=t,e&&t&&t.getCell(!0)?(this.curPos=t,this.alignHandle()):this.disable()},alignHandle:function(){var e=this.endPos;this.firstPos&&e&&this.view.isRecordRendered(e.recordIndex)?((e=e.clone({record:e.record,column:e.column}).getCell())&&e.isVisible()?this.enable():this.disable(),this.handle.alignTo(e,"c-br")):this.disable()},enable:function(){this.handle.show()},disable:function(){this.handle.hide(),this.mask.hide()},onHandleLongpress:function(e){e.startDrag()},onDragStart:function(e){"touch"===e.pointerType&&!e.longpress||(e.claimGesture(),this.handle.on("drag",this.onDrag,this))},onDrag:function(e){var t,i,n,r,s,o,a,l,c,u,d=this;if(e.changedTouches&&(r=e.changedTouches[0])&&!Ext.fly(r.target).getRegion().contains(r.point)&&(s=Ext.event.Event.resolveTextNode(Ext.Element.fromPagePoint(r.pageX,r.pageY,!0)))&&(e.target=s),t=e.target,n=(i=d.view).getScrollable().getElement().getClientRegion(),o=new Ext.grid.Location(i,t),a=d.scrollTask||(d.scrollTask=Ext.util.TaskManager.newTask({run:d.doAutoScroll,scope:d,interval:10})),l=25*(window.devicePixelRatio||1),c=3*(window.devicePixelRatio||1),u=d.scrollBy||(d.scrollBy=[]),e.claimGesture(),d.lastXY=[e.pageX,e.pageY],!d.el.contains(t))return u[0]=u[1]=0,a.stop();d.lastXY[1]>n.bottom-l?d.extendY&&(u[1]=c,a.start()):d.lastXY[1]<n.top+l?d.extendY&&(u[1]=-c,a.start()):d.lastXY[0]>n.right-l?d.extendX&&(u[0]=c,a.start()):d.lastXY[0]<n.left+l?d.extendX&&(u[0]=-c,a.start()):(u[0]=u[1]=0,a.stop()),o&&o.getCell()&&!o.equals(d.lastOverCell)&&(d.lastOverCell=o,d.syncMaskOnCell(o))},doAutoScroll:function(){var e,t=this.view.getScrollable();t.scrollBy.apply(t,this.scrollBy),(e=(e=document.elementFromPoint.apply(document,this.lastXY))&&new Ext.grid.Location(this.view,e))&&e.getCell()&&!e.equals(this.lastOverCell)&&(this.lastOverCell=e,this.syncMaskOnCell(e))},onDragEnd:function(e){var t=this,i=t.view.getSelectable(),n=i&&i.getSelection();if(t.handle.un("drag",t.onDrag,t),t.scrollTask&&t.scrollTask.stop(),t.extensionDescriptor){if(t.disable(),n.isColumns&&e.direction.y<0||n.isRows&&e.direction.x<0)return void t.alignHandle();i.extendSelection(t.extensionDescriptor)}},onViewScroll:function(){(this.active&&this.lastOverCell||this.firstPos)&&(this.endPos=this.endPos.clone({record:this.endPos.recordIndex}),this.alignHandle())},stopEvent:function(e){e.stopEvent()},syncMaskOnCell:function(e){var t,i,n,r,s,o,a=this,l=a.view,c=l.renderInfo,u=a.maskBox,d=a.firstPos.recordIndex,h=a.endPos.recordIndex,f=a.firstPos.clone({record:d}),g=a.endPos.clone({record:h}),p=!a.allowReduceSelection;i=a.firstPos.clone({record:Ext.Number.constrain(Math.min(d,h),c.indexTop,c.indexBottom-1),column:a.firstPos.column}),r=a.endPos.clone({record:Ext.Number.constrain(Math.max(i.recordIndex,h),c.indexTop,c.indexBottom-1)}),n=i.getCell(),s=r.getCell(),a.selectionRegion=t=n.getRegion().union(s.getRegion()),a.curPos=o=e,e=e.getCell("el"),a.mask.dom.style.borderTopWidth=a.mask.dom.style.borderRightWidth=a.mask.dom.style.borderBottomWidth=a.mask.dom.style.borderLeftWidth="",o.recordIndex<a.firstPos.recordIndex&&a.extendY?(a.extensionDescriptor={type:"rows",start:f.clone({record:o.recordIndex}),end:g.clone({record:a.firstPos.recordIndex-1}),rows:o.recordIndex-a.firstPos.recordIndex,mousePosition:a.lastXY},a.mask.dom.style.borderBottomWidth="0",u.x=t.x,u.y=e.getY(),u.width=t.right-t.left,u.height=t.top-e.getY()):o.recordIndex>a.endPos.recordIndex&&a.extendY?(a.extensionDescriptor={type:"rows",start:f.clone({record:a.endPos.recordIndex+1}),end:g.clone({record:o.recordIndex}),rows:o.recordIndex-a.endPos.recordIndex,mousePosition:a.lastXY},a.mask.dom.style.borderTopWidth="0",u.x=t.x,u.y=t.bottom,u.width=t.right-t.left,u.height=e.getRegion().bottom-t.bottom):!p&&o.recordIndex<a.endPos.recordIndex&&a.extendY&&o.columnIndex===a.endPos.columnIndex?(a.extensionDescriptor={type:"rows",start:f.clone({record:a.endPos.recordIndex}),end:g.clone({record:o.recordIndex+1}),rows:-1,mousePosition:a.lastXY,reduce:!0},a.mask.dom.style.borderTopWidth="0",u.x=t.x,u.y=t.top,u.width=t.right-t.left,u.height=e.getRegion().bottom-t.top):o.columnIndex<a.firstPos.columnIndex&&a.extendX?(a.extensionDescriptor={type:"columns",start:f.clone({column:o.columnIndex}),end:g.clone({column:a.firstPos.columnIndex-1}),columns:o.columnIndex-a.firstPos.columnIndex,mousePosition:a.lastXY},a.mask.dom.style.borderRightWidth="0",u.x=e.getX(),u.y=t.top,u.width=t.left-e.getX(),u.height=t.bottom-t.top):o.columnIndex>a.endPos.columnIndex&&a.extendX?(a.extensionDescriptor={type:"columns",start:f.clone({column:a.endPos.columnIndex+1}),end:g.clone({column:o.columnIndex}),columns:o.columnIndex-a.endPos.columnIndex,mousePosition:a.lastXY},a.mask.dom.style.borderLeftWidth="0",u.x=t.right,u.y=t.top,u.width=e.getRegion().right-t.right,u.height=t.bottom-t.top):!p&&o.columnIndex<a.endPos.columnIndex&&a.extendX?(a.extensionDescriptor={type:"columns",start:f.clone({column:a.firstPos.columnIndex}),end:g.clone({column:o.columnIndex}),columns:-1,mousePosition:a.lastXY,reduce:!0},a.mask.dom.style.borderLeftWidth="0",u.x=t.left,u.y=t.top,u.width=e.getRegion().right-t.left,u.height=t.bottom-t.top):a.extensionDescriptor=null,l.hasListeners.selectionextenderdrag&&l.fireEvent("selectionextenderdrag",l,l.getSelectable().getSelection(),a.extensionDescriptor),a.extensionDescriptor?(a.mask.show(),a.mask.setBox(u)):a.mask.hide()},destroy:function(){this.destroyMembers("viewListener","scrollListener","mask","handle")}}),Ext.define("Ext.grid.cell.Number",{extend:Ext.grid.cell.Text,xtype:"numbercell",isNumberCell:!0,config:{format:"0,000.00"},classCls:Ext.baseCSSPrefix+"numbercell",zeroValue:null,updateColumn:function(e,t){var i;this.callParent([e,t]),e&&e.isNumberColumn&&null!==(i=e.getFormat())&&this.setFormat(i)},updateFormat:function(e){this.isConfiguring||this.writeValue()},formatValue:function(e){var t,i=e||0===e;return e=0===e&&null!==(t=this.getZeroValue())?t||"":i?Ext.util.Format.number(e,this.getFormat()):""}}),Ext.define("Ext.grid.cell.Check",{extend:Ext.grid.cell.Base,xtype:"checkcell",config:{disabled:null},innerTemplate:[{reference:"checkboxElement",tabIndex:-1,cls:Ext.baseCSSPrefix+"checkbox-el "+Ext.baseCSSPrefix+"font-icon"}],classCls:Ext.baseCSSPrefix+"checkcell",disabledCls:Ext.baseCSSPrefix+"disabled",checkedCls:Ext.baseCSSPrefix+"checked",constructor:function(e){this.callParent([e]),this.checkboxElement.on("tap","onTap",this)},applyValue:function(e){return!!e},updateValue:function(e,t){var i=this.getColumn();this.el.toggleCls(this.checkedCls,!!e),e?i.updateHeaderState():i.setHeaderStatus(e)},updateColumn:function(e,t){this.callParent([e,t]),e&&this.setDisabled(e.getDisabled())},applyDisabled:function(e){return Boolean(e)},updateDisabled:function(e){this.element.toggleCls(this.disabledCls,e)},disable:function(){this.setDisabled(!0)},enable:function(){this.setDisabled(!1)},onTap:function(e){var t,i=this.getRecord(),n=this.getColumn(),r=n.up("grid").getStore().indexOf(i);if(i){if(t=!n.isRecordChecked(i),this.getDisabled())return;!1!==n.fireEvent("beforecheckchange",this,r,t,i,e)&&(this.getColumn().getStopSelection()&&(e.stopSelection=!0),i&&n.setRecordChecked(i,t,e),n.hasListeners.checkchange&&n.fireEvent("checkchange",this,r,t,i,e))}}}),Ext.define("Ext.theme.material.grid.cell.Check",{override:"Ext.grid.cell.Check",config:{ripple:{delegate:"."+Ext.baseCSSPrefix+"checkbox-el",bound:!1,color:"default",centered:!0}}}),Ext.define("Ext.grid.column.Check",{extend:Ext.grid.column.Column,isCheckColumn:!0,xtype:"checkcolumn",cachedConfig:{headerCheckboxAlign:"bottom"},config:{stopSelection:!0,headerCheckbox:!1},align:"center",classCls:Ext.baseCSSPrefix+"checkcolumn",noHeaderCheckboxCls:Ext.baseCSSPrefix+"no-header-checkbox",checkedCls:Ext.baseCSSPrefix+"checked",hasTextCls:Ext.baseCSSPrefix+"has-text",checkboxAlignCls:{top:Ext.baseCSSPrefix+"checkbox-align-top",right:Ext.baseCSSPrefix+"checkbox-align-right",bottom:Ext.baseCSSPrefix+"checkbox-align-bottom",left:Ext.baseCSSPrefix+"checkbox-align-left"},text:"",ignoreExport:!0,cell:{xtype:"checkcell"},afterTitleTemplate:[{reference:"checkboxElement",classList:[Ext.baseCSSPrefix+"checkbox-el",Ext.baseCSSPrefix+"font-icon"]}],onColumnTap:function(e){e.target!==this.checkboxElement.dom||this.getDisabled()||this.toggleAll(e),this.callParent([e])},toggleAll:function(e){var t=!this.allChecked;!1!==this.fireEvent("beforeheadercheckchange",this,t,e)&&(this.doToggleAll(t),this.setHeaderStatus(t),this.fireEvent("headercheckchange",this,t,e))},doToggleAll:function(t){var i=this;i.getGrid().getStore().each(function(e){i.setRecordChecked(e,t)})},setRecordChecked:function(e,t,i){t=!!t,this.doSetRecordChecked(e,t),t?this.updateHeaderState():this.setHeaderStatus(t)},doSetRecordChecked:function(e,t){var i=this.getDataIndex();e.get(i)!==t&&e.set(i,t)},areAllChecked:function(){var e,t,i,n=this.getGrid().getStore();if(n&&!n.isVirtualStore&&0<n.getCount()){for(t=(e=n.getData().items).length,i=0;i<t;++i)if(!this.isRecordChecked(e[i]))return!1;return!0}},isRecordChecked:function(e){return e.get(this.getDataIndex())},updateHeaderState:function(){this.destroyed||!1===this.getHeaderCheckbox()||this.setHeaderStatus(this.areAllChecked())},setHeaderStatus:function(e){this.allChecked!==e&&(this.allChecked=e,this.el.toggleCls(this.checkedCls,e))},updateDisabled:function(e,t){var i,n,r,s=this.getGrid();if(this.callParent([e,t]),s)for(n=(i=s.getViewItems()).length,r=0;r<n;r++)i[r].getCellByColumn(this).setDisabled(e)},updateHeaderCheckboxAlign:function(e,t){var i=this.checkboxAlignCls;t&&this.removeCls(i[t]),e&&(i[e]||Ext.raise("Invalid value for checkboxAlign: '"+e+"'"),this.addCls(i[e]))},updateHeaderCheckbox:function(e){var t=this.getGrid();this.el.toggleCls(this.noHeaderCheckboxCls,!e),this.setSortable(this.getSortable()&&!e),t&&this.updateHeaderState()},updateText:function(e){this.setHtml(e),this.toggleCls(this.hasTextCls,!!e)}}),Ext.define("Ext.grid.column.Selection",{extend:Ext.grid.column.Check,xtype:"selectioncolumn",classCls:Ext.baseCSSPrefix+"selectioncolumn",cell:{cls:Ext.baseCSSPrefix+"selection-cell"},weight:-900,menu:null,sortable:!1,draggable:!1,resizable:!1,hideable:!1,ignore:!0,stopSelection:!1,updateHeaderState:function(){this.isConfiguring||this.getGrid().getSelectable().updateHeaderState()},toggleAll:function(e){this.getGrid().getSelectable().toggleAll(this,e)},setRecordChecked:function(e,t,i){var n=this.getGrid().getSelectable();t?n.select(e,"single"!==n.getMode()):n.deselect(e)},isRecordChecked:function(e){return this.getGrid().getSelectable().isRowSelected(e)}}),Ext.define("Ext.grid.column.Number",{extend:Ext.grid.column.Column,xtype:"numbercolumn",isNumberColumn:!0,config:{format:null},cell:{xtype:"numbercell"},defaultEditor:{xtype:"numberfield"}}),Ext.define("Ext.grid.cell.RowNumberer",{extend:Ext.grid.cell.Number,xtype:"rownumberercell",classCls:Ext.baseCSSPrefix+"rownumberercell",format:"0,000",refreshValue:function(e){var t=e.row;return e.summary?"":t?t.$datasetIndex+1:null}}),Ext.define("Ext.grid.column.RowNumberer",{extend:Ext.grid.column.Number,xtype:"rownumberer",isRowNumberer:!0,cell:{xtype:"rownumberercell"},menu:null,align:"right",hideable:!1,ignore:!0,ignoreExport:!0,sortable:!1,text:"",width:"auto",minWidth:null,onAdded:function(e,t){var i;this.callParent([e,t]),this.checkWidth(),i=this.getGrid(),this.gridListeners=i.on({storechange:"attachStoreListeners",scope:this,destroyable:!0}),this.attachStoreListeners(i.getStore())},onRemoved:function(e){Ext.destroy(this.gridListeners,this.storeListeners),this.callParent([e])},privates:{attachStoreListeners:function(e){Ext.destroy(this.storeListeners),e&&(this.storeListeners=e.on({datachanged:"checkWidth",totalcountchange:"checkWidth",scope:this,destroyable:!0}))},getCharWidth:function(){var e,t,i,n,r,s=this._charWidth;return s||(e="0000000000",t=this.getScratchCell(),(i=this.getCell().ui)&&t.addUi(i),(n=this.getGrid().getUi())&&t.addUi(n),document.body.appendChild(t.el.dom),r=Ext.util.TextMetrics.measure(t.bodyElement,e).width,document.body.removeChild(t.el.dom),this._charWidth=s=r/e.length),s},checkWidth:function(){var e=this;document.fonts?document.fonts.ready.then(function(){e.destroyed||e.doCheckWidth()}):e.doCheckWidth()},doCheckWidth:function(){var e=this.getGrid().getStore(),t=1,i=this.getCharWidth();e&&e.getTotalCount()&&(t=this.getScratchCell().printValue(e.getTotalCount()).length),this.textElement.setStyle("min-width",Math.ceil(t*i)+"px")}}}),Ext.define("Ext.grid.selection.Model",{extend:Ext.dataview.selection.Model,alias:"selmodel.grid",isGridSelectionModel:!0,config:{columns:{$value:!1,lazy:!0},cells:{$value:!1,lazy:!0},rows:{$value:!0,lazy:!0},drag:!1,extensible:{$value:!1,lazy:!0},reducible:!0,checkbox:!1,headerCheckbox:!0,checkboxDefaults:{xtype:"selectioncolumn",text:null,width:30},showNumbererColumn:!1},checkboxSelect:!1,checkboxColumnIndex:0,mode:"multi",columnSelectCls:Ext.baseCSSPrefix+"selmodel-column-select",rowNumbererHeaderCls:Ext.baseCSSPrefix+"selmodel-row-numberer-hd",updateView:function(e,t){var i=this.numbererColumn=e.getRowNumbers(),n=this.getCheckbox();this.callParent([e,t]),t&&(this.navigationModel=null,Ext.destroy(this.viewListeners)),e&&(i&&(i.setCell({cls:this.rowNumbererCellCls}),i.setCls(this.rowNumbererHeaderCls)),n&&e.registerColumn(n),this.viewListeners=e.on(this.getViewListeners()))},onViewCreated:function(e){this.getColumns()&&e.addCls(this.columnSelectCls),this.updateHeaderState()},updateDrag:function(e){var t=this.getView(),i={dragstart:"onViewDragStart",delegate:t.eventDelegate,scope:this};Ext.supports.Touch&&(i.longpress="onViewLongpress"),t.innerCt[e?"on":"un"](i)},getSelection:function(e,t){var i,n;return"rows"!==e&&"records"!==e||(e=this.getStore().isVirtualStore?"rows":"records"),n=this.callParent(),e&&(e=e.toLowerCase(),n&&n.type===e?t&&n.clear(!0):(i={type:e},"records"===e&&(i.selected=this.getSelected()),this.setSelection(i),n=this.callParent())),n},createCheckboxColumn:function(e){return Ext.apply({headerCheckbox:!1!==this.getHeaderCheckbox()},e)},onHeaderTap:function(e,t,i){var n,r,s,o=this,a=o.getSelection(),l=!1;if(t===this.numbererColumn)o.toggleAll(t,i);else if(o.getColumns()&&t!==o.getCheckbox())if(i.shiftKey&&a&&a.lastColumnSelected)for(i.ctrlKey||a.clear(),r=(e=o.getView().getHeaderContainer()).getColumns(),s=(n=Ext.Array.sort([e.indexOfLeaf(a.lastColumnSelected),e.indexOf(t)],Ext.Array.numericSortFn))[0];s<=n[1];s++)o.selectColumn(r[s],!0);else l=o.isColumnSelected(t),i.ctrlKey?l&&(o.deselectColumn(t),o.getSelection().lastColumnSelected=null):a.clear(),l&&(i.ctrlKey||"touch"===i.pointerType)||(o.selectColumn(t,i.ctrlKey),o.getSelection().lastColumnSelected=t),o.updateSelectionExtender()},toggleAll:function(e,t){var i=this.getSelection();t.stopEvent(),i&&i.isAllSelected()?this.deselectAll():this.selectAll(),this.updateHeaderState(),this.lastColumnSelected=null},selectByLocation:function(e){e.isGridLocation||Ext.raise("selectByLocation MUST be passed an Ext.grid.Location");var t=e.record,i=e.column;this.getCells()?this.selectCells(e,e):this.getRows()&&t?this.select(t):this.getColumns()&&i&&this.selectColumn(i)},updateHeaderState:function(){var e,t=this.getStore(),i=this.getSelection(),n=!1,r=this.getCheckbox();t&&i&&i.isRows&&(e=t.getCount(),n=t.isBufferedStore?i.allSelected:0<e&&e===i.getCount()),r&&r.setHeaderStatus(n)},onColumnUpdate:function(e,t){var i=this.getCheckbox();i&&(e&&e.remove(i,!1),t.push(i))},select:function(e,t,i){var n,r,s,o=this.getSelection("records"),a=this.getStore();for(Ext.isArray(e)||(e=[e]),n=e.length,r=0;r<n;r++)"number"==typeof(s=e[r])&&(e[r]=s=a.getAt(s));o.add(e,t,i)},deselect:function(e,t){var i,n,r,s=this.getSelection("records"),o=this.getView().getStore();if(s&&s.isRecords)for(Ext.isArray(e)||(e=[e]),i=e.length,n=0;n<i;n++)"number"==typeof(r=e[n])&&(e[n]=r=o.getAt(r));s.remove(e,t)},onCollectionRemove:function(e,t){this.updateHeaderState(),this.callParent([e,t])},onCollectionAdd:function(e,t){this.updateHeaderState(),this.callParent([e,t])},selectCells:function(e,t,i){var n,r=this.getView();e=e.isGridLocation?e.clone():new Ext.grid.Location(r,{record:e[0],column:e[1]}),t=t.isGridLocation?t.clone():new Ext.grid.Location(r,{record:t[0],column:t[1]}),this.resetSelection(!0),(n=this.getSelection("cells")).setRangeStart(e),n.setRangeEnd(t),i||this.fireSelectionChange()},selectAll:function(e){var t,i=this.getSelection();this.getRows()?(i=this.getSelection("records"),t=!0):this.getCells()?(i=this.getSelection("cells"),t=!0):this.getColumns()&&(i=this.getSelection("columns"),t=!0),t&&i.selectAll(e)},deselectAll:function(e){var t=this.getSelection();t&&t.getCount()&&t.clear(e)},selectRows:function(e,t,i){var n=this.getSelection("records");t||this.resetSelection(!0),n.add(e,t,i)},isSelected:function(e){return this.isRowSelected(e)},selectColumn:function(e,t,i){var n=this.getSelection("columns");n.isSelected(e)||(t?n.add(e):(n.clear(i),n.setRangeStart(e)))},deselectColumn:function(e,t){var i=this.getSelection();i&&i.isColumns&&i.isSelected(e)&&i.remove(e,t)},destroy:function(){var e=this.getView(),t=this.checkbox;e&&!e.destroying&&t&&e.unregisterColumn(t,!0),Ext.destroy(this.viewListeners,this.getConfig("extensible",null,!0)),this.callParent()},privates:{axesConfigs:{x:1,y:2,xy:3,both:3,true:3},getViewListeners:function(){return{columnschanged:"onColumnsChanged",columnmove:"onColumnMove",scope:this,destroyable:!0}},refreshSelection:function(){this.getSelection().isRecords?this.callParent():this.resetSelection()},onColumnsChanged:function(){var t,i,n=this,e=n.getSelection();e&&(t=e.view,e.isCells?t.visibleColumns().length?e.eachCell(function(e){t.onCellDeselect(e)}):n.clearSelections():e.isColumns&&(i=!1,e.eachColumn(function(e){e.isVisible()&&t.isAncestor(e)||(n.remove(e),i=!0)}))),Ext.on("idle",i?n.fireSelectionChange:n.updateSelectionExtender,n,{single:!0})},onColumnMove:function(){this.updateSelectionExtender()},resetSelection:function(e){var t=this.getSelection();t&&t.clear(e)},onViewLongpress:function(e){"touch"===e.pointerType&&e.startDrag()},onViewDragStart:function(e){if("touch"!==e.pointerType||e.longpress){var t,i=this,n=i.getView(),r=new Ext.grid.Location(n,e),s=r.column,o=n.getNavigationModel().getLocation(),a=s===i.getCheckbox(),l=!1;if(r.cell&&!(e.claimed||0<e.button||e.altKey||o&&o.actionable)&&n.shouldSelectItem(e)&&s){if(e.claimGesture(),i.mousedownPosition=r.clone(),a&&(i.checkCellClicked=r.cell.element.dom),s===i.numbererColumn||a||!i.getCells())if(i.getRows()){if(e.shiftKey&&i.isSelected(r.record))l=!0;else if(!e.shiftKey&&!a&&i.checkboxOnly)return;t=i.getSelection("records"),e.shiftKey||e.ctrlKey||a||t.clear()}else{if(!i.getColumns())return!1;t=i.getSelection("columns"),e.shiftKey&&i.isColumnSelected(r.column)?l=!0:e.shiftKey||e.ctrlKey||a||t.clear()}else t=i.getSelection("cells"),e.shiftKey&&i.isCellSelected(r.recordIndex,r.columnIndex)?l=!0:e.shiftKey||t.clear();l||(i.lastDragLocation=null),e.longpress&&(r.row.removeCls(n.pressedCls),i.onViewSelectionDrag(e)),t&&(n.innerCt.on("dragend",i.onViewDragEnd,i,{single:!0}),i.mousemoveListener=n.innerCt.on({drag:"onViewSelectionDrag",scope:i,delegate:n.eventDelegate,destroyable:!0}))}}},onViewSelectionDrag:function(e){var t,i,n,r=this.getView();e.changedTouches&&(i=e.changedTouches[0])&&!Ext.fly(i.target).getRegion().contains(i.point)&&(n=Ext.event.Event.resolveTextNode(Ext.Element.fromPagePoint(i.pageX,i.pageY,!0)))&&(e.target=n),this.stopAutoScroller(),Ext.fly(e.target).up(r.eventDelegate)?(t=this.dragLocation=new Ext.grid.Location(r,e),this.changeSelectionRange(r,t,e)):this.scrollTowardsPointer(e,r)},changeSelectionRange:function(e,t,i){var n,r,s,o,a,l=t.column,c=t.record,u=t.recordIndex,d=this.lastDragLocation;if(i.claimGesture(),d&&(r=d.record,s=d.column),this.checkCellClicked)return(n=this.getSelection("rows")).setRangeStart(this.getStore().indexOf(c)),void(this.checkCellClicked=null);n=this.getSelection(),this.getExtensible()&&this.getExtensible().disable(),l&&(o=c!==r,a=l!==s,n.isRows||n.isRecords?o&&(r?n.setRangeEnd(u):n.setRangeStart(u)):n.isCells?(o||a)&&(r?n.setRangeEnd(t):n.setRangeStart(t)):n.isColumns&&a&&(s?n.setRangeEnd(t.column):n.setRangeStart(t.column)),(o||a)&&e.getNavigationModel().setLocation(t),this.lastDragLocation=t)},scrollTowardsPointer:function(e,t){var i=t.getScrollable().getElement().getClientRegion(),n=e.getXY(),r=this.scrollTask||(this.scrollTask=Ext.util.TaskManager.newTask({run:this.doAutoScroll,args:[e,t],scope:this,interval:10})),s=25*(window.devicePixelRatio||1),o=3*(window.devicePixelRatio||1),a=this.scrollBy||(this.scrollBy=[]);e.claimGesture(),n[1]>i.bottom-s?(a[0]=0,a[1]=o,r.start()):n[1]<i.top+s?(a[0]=0,a[1]=-o,r.start()):n[0]>i.right-s?(a[0]=o,a[1]=0,r.start()):n[0]<i.left+s&&(a[0]=-o,a[1]=0,r.start())},doAutoScroll:function(e,t){var i,n,r=t.getScrollable().getElement().getClientRegion(),s=t.getScrollable(),o=[];if(s.scrollBy.apply(s,this.scrollBy),this.scrollBy[0]?o[0]=0<this.scrollBy[0]?r.right-5:r.left+5:o[0]=e.getX(),this.scrollBy[1]?o[1]=0<this.scrollBy[1]?r.bottom-5:r.top+5:o[1]=e.getY(),i=document.elementFromPoint.apply(document,o)){if(!(i=Ext.fly(i).up(t.cellSelector)))return void this.stopAutoScroller();n=new Ext.grid.Location(t,i),i&&!n.equals(this.lastDragLocation)&&this.changeSelectionRange(t,n,e)}},stopAutoScroller:function(){this.scrollTask&&(this.scrollBy[0]=this.scrollBy[1]=0,this.scrollTask.stop(),this.scrollTask=null)},onViewDragEnd:function(e){var t,i=this,n=i.getView(),r=i.dragLocation,s=!r||!r.equals(i.mousedownPosition),o=e.location;i.checkCellClicked=null,i.stopAutoScroller(),n&&!n.destroyed&&(o||(e.location=new Ext.grid.Location(n,e)),i.getExtensible()&&s&&i.getExtensible().disable(),i.mousemoveListener.destroy(),(t=i.getSelection())&&t.isRows?t.addRange(!0):s&&i.fireSelectionChange())},onNavigate:function(e){var t,i,n,r,s=this,o=s.getView(),a=s.getStore(),l=s.getRows(),c=s.getCells(),u=s.getColumns(),d=s.getCheckbox(),h=s.checkboxOnly,f=s.getMode(),g=e.to,p=g.column,m=g.record,x=s.getSelection(),y=e.ctrlKey,v=e.shiftKey,E=!0,b=e.getKey()===e.SPACE;if(!e.stopSelection&&p!==s.checkboxColumn){if(!e.pointerType&&!b){if(y)return;if(!(!e.from||g.recordIndex!==e.from.recordIndex)&&!c&&!u)return}if((!(x&&(x.isCells||x.isColumns&&l&&!y&&!v)&&1<x.getCount())||v||"click"!==e.type)&&(c||u||l)&&m&&"mousedown"!==e.type){if(y&&e.keyCode===e.A&&"multi"===f)return!x||x.getCount()<2?s.selectAll():s.deselectAll(),void s.updateHeaderState();if(v&&"multi"===f)if(p===s.numbererColumn||p===s.checkColumn||!c&&!u||x&&(x.isRows||x.isRecords)){if(l){if(p!==d&&h)return;(x=s.getSelection("records")).getRangeSize()?(r=new Ext.grid.Location(o,s.getLastSelected()),x.setRangeStart(r.recordIndex)):(null==s.selectionStart&&(s.selectionStart=g.recordIndex),x.setRangeStart(s.selectionStart)),x.setRangeEnd(g.recordIndex),i=!0}}else c?(t=(x=s.getSelection("cells")).getCount(),x.getRangeSize()||x.setRangeStart(e.from||new Ext.grid.Location(s.getView(),{record:0,column:0})),x.setRangeEnd(g),E=t<x.getCount(),i=!0):u&&((x=s.getSelection("columns")).getCount()||x.setRangeStart(p),x.setRangeEnd(p),i=!0);else if(s.selectionStart=null,!x||"multi"===f&&y||b||x.clear(!0),!l||p!==s.numbererColumn&&p!==d&&c)c?((x=s.getSelection("cells",!0)).setRangeStart(g),i=!0):u&&(x=s.getSelection("columns"),y?x.isSelected(p)?x.remove(p):x.add(p):x.setRangeStart(p),i=!0);else{if(p!==d&&h||e.keyCode&&e.from&&m===e.from.record)return;(x=s.getSelection("records")).isSelected(m)?(y||p===d||s.getDeselectable())&&(x.remove(m),i=!0):(x.add(m,y||p===d),i=!0),i&&(n=x.getSelected())&&n.length&&(s.selectionStart=a.indexOf(n.first()),x.setRangeStart(s.selectionStart))}i&&(x.isRecords||s.fireSelectionChange(null,E)),s.lastDragLocation=g}}},isColumnSelected:function(e){var t=this.getSelection(),i=!1;return t&&t.isColumns&&(i=t.isSelected(e)),i},isCellSelected:function(e,t){var i=this.getSelection();return!!i&&(i.isColumns?("number"==typeof t&&(t=this.getView().getVisibleColumns()[t]),i.isSelected(t)):i.isCells?i.isSelected(e,t):i.isSelected(e))},updateSelection:function(e,t){var i=this.getView();Ext.destroy(t),e&&e.getCount()&&(i=e.view,e.isRows?e.eachRow(i.onRowSelect,i):(e.isColumns||e.isCells)&&e.eachCell(i.onCellSelect,i))},updateRows:function(e){var t;e||(this.setCheckbox(!1),(t=this.getSelection())&&t.isRows&&t.clear())},updateColumns:function(e){var t=this.getView(),i=this.getSelection();!e&&i&&i.isColumns&&(i.clear(),this.fireSelectionChange()),t.toggleCls(this.columnSelectCls,!!e)},updateCells:function(e){var t=this.getSelection();!e&&t&&t.isCells&&(t.clear(),this.fireSelectionChange())},updateMode:function(e){"multi"===e?this.setDrag(this.getInitialConfig().drag):this.isConfiguring||this.setDrag(!1)},fireSelectionChange:function(e,t){var i=this.getView(),n=this.getSelection();this.updateSelectionExtender(),this.fireEvent("selectionchange",i,this.getSelection()),n.isCells?i.fireEvent("selectionchange",i,n.getRange(),t,n):i.fireEvent("selectionchange",i,n.isRecords?e:n.isCells?n.getRecords():null,t,this.getSelection())},updateSelectionExtender:function(){var e=this.getSelection();e&&e.onSelectionFinish()},onSelectionFinish:function(e,t,i){var n=this.getExtensible();n&&n.setHandle(t,i)},applyExtensible:function(e,t){var i;if(e){if(!0===e||"string"==typeof e){if(i=this.axesConfigs[e],t)return t.setAxes(i),t;e={axes:i}}else e=Ext.Object.chain(e);return e.allowReduceSelection=this.getReducible(),e.view=this.getView(),t&&t.destroy(),new Ext.grid.selection.SelectionExtender(e)}},applyReducible:function(e){return!!e},updateReducible:function(e){var t;(t=this.getConfig("extensible",null,!0))&&(t.allowReduceSelection=e)},applyCheckbox:function(e){return e&&(this.checkboxOnly="only"===e,this.checkboxColumn=e=Ext.create(this.createCheckboxColumn(this.getCheckboxDefaults()))),e},updateCheckbox:function(e,t){var i;this.isConfiguring||(i=this.getView(),t&&i.unregisterColumn(t,!0),e&&(i.registerColumn(e),this.setRows(!0)))},applyView:function(e){return e.ownerGrid},extendSelection:function(e){var t=this.getView(),i=this.getSelection(),n=e.reduce?"reduce":"extend";!1!==t.fireEvent("beforeselectionextend",t,i,e)&&(i[n+"Range"](e),i.isRows||this.fireSelectionChange())},onIdChanged:function(e,t,i,n){var r=this.getSelection();r&&r.isRecords&&r.getSelected().updateKey(t,i)},onSelectionStoreAdd:function(){this.callParent(arguments),this.updateHeaderState()},onSelectionStoreClear:function(){this.callParent(arguments),this.updateHeaderState()},onSelectionStoreLoad:function(){this.callParent(arguments),this.updateHeaderState()}}},function(e){var t;Ext.ClassManager.get("Ext.grid.column.RowNumberer")&&(t=Ext.grid.column.RowNumberer.prototype.cellCls,e.prototype.rowNumbererCellCls=(t?t+" ":"")+Ext.baseCSSPrefix+"selmodel-row-numberer-cell")}),Ext.define("Ext.grid.plugin.ColumnResizing",{extend:Ext.Component,alias:["plugin.columnresizing","plugin.gridcolumnresizing"],config:{grid:null,realtime:!1},hasResizingCls:Ext.baseCSSPrefix+"has-columnresizing",resizingCls:Ext.baseCSSPrefix+"resizing",columnSelector:"."+Ext.baseCSSPrefix+"gridcolumn",resizerSelector:"."+Ext.baseCSSPrefix+"gridcolumn ."+Ext.baseCSSPrefix+"resizer-el",init:function(e){this.setGrid(e),e.getHeaderContainer().setTouchAction({panX:!1})},updateGrid:function(e,t){var i,n=this.hasResizingCls;t&&(t.getHeaderContainer().renderElement.un({touchstart:"onContainerTouchStart",scope:this,priority:100}),t.removeCls(n)),e&&(this._resizeMarker=i=e.resizeMarkerElement,this._resizeMarkerParent=i.parent(),e.getHeaderContainer().renderElement.on({touchstart:"onContainerTouchStart",scope:this}),e.addCls(n))},onContainerTouchStart:function(e){var t,i=this,n=i.getGrid().getHeaderContainer(),r=e.getTarget(i.columnSelector);e.getTarget(i.resizerSelector)&&!e.multitouch&&r&&!i._resizeColumn?(t=Ext.Component.from(r))&&t.getResizable()&&(i._startColumnWidth=t.getComputedWidth(),i._minColumnWidth=t.getMinWidth(),i._maxColumnWidth=t.getMaxWidth(),i._resizeColumn=t,i._startX=e.getX(),t.addCls(i.resizingCls),n.renderElement.suspendEvent("drag","longpress"),this.getRealtime()?t.setWidth(i._startColumnWidth):(i._resizeMarker.show(),i._resizeMarker.setLeft(t.el.getOffsetsTo(i._resizeMarkerParent)[0]+i._startColumnWidth)),i.touchListeners=Ext.getBody().on({touchEnd:"onTouchEnd",touchMove:"onTouchMove",scope:i,destroyable:!0})):e.multitouch&&i._resizeColumn&&i.endResize()},onTouchMove:function(e){var t,i=this,n=i._resizeColumn;e.isMultitouch?i.endResize():n&&(t=e.getX()-i._startX,i.currentColumnWidth=Math.max(Math.ceil(i._startColumnWidth+t),i._minColumnWidth),i._maxColumnWidth&&(i.currentColumnWidth=Math.min(i.currentColumnWidth,i._maxColumnWidth)),i.getRealtime()?(n.setWidth(i.currentColumnWidth),n.renderElement.setWidth(i.currentColumnWidth)):i._resizeMarker.setLeft(n.el.getOffsetsTo(i._resizeMarkerParent)[0]+i.currentColumnWidth),n.resizing=!0,e.claimGesture())},onTouchEnd:function(e){var t=this._resizeColumn,i=e.getX()!==this._startX;Ext.destroy(this.touchListeners),t&&(this.endResize(),i||t.onResizerTap(e))},endResize:function(){var e=this,t=e._resizeColumn,i=e.getGrid();t&&(e.getRealtime()||i.resizeMarkerElement.hide(),e.currentColumnWidth&&(t.setFlex(null),t.resizing?(t.setWidth(e.currentColumnWidth),t.resizing=!1):e._resizeColumn.getWidth()===e._startColumnWidth&&t.setWidth(e._startColumnWidth)),t.removeCls(e.resizingCls),e._resizeColumn=null)}}),Ext.define("Ext.dd.ScrollManager",{singleton:!0,scrollTowardsPointer:function(e){(this.scrollTask||(this.scrollTask=Ext.util.TaskManager.newTask({run:Ext.dd.ScrollManager.doAutoScroll,args:[e],scope:this,interval:100}))).start()},stopAutoScroller:function(){this.scrollTask&&(this.scrollTask.stop(),this.scrollTask=null)},doAutoScroll:function(e){var t,i,n,r,s,o,a=!0;this.info?(s=Ext.dd.ScrollManager.getScrollDirection(e,this.info),o=(o=e.getScrollable())||this.getViewScrollable(),s&&o&&(t=this.scrollAmount,r=o.position.y,e.isLockedGrid&&(a=!1),-1===s?t<=r?o.scrollBy(0,-t,a):0<r&&o.scrollBy(0,-r,a):0<(n=(i=o.getMaxPosition()).y-r)&&i.y>=r&&(n<t&&(t=n),o.scrollBy(0,t,a)))):Ext.dd.ScrollManager.stopAutoScroller.apply(this)},getScrollDirection:function(e,t){var i,n=e.bodyElement.getBox(),r=t.cursor.current;return r.x>n.right||r.x<n.left?0:(i=(r.y-n.y)/n.height*100)<15?-1:85<i?1:0}}),Ext.define("Ext.dd.Manager",{singleton:!0,getTargetEl:function(e){var t=e.source,i=e.cursor.current;return t.manager.elementFromPoint(i.x,i.y)},getPosition:function(e,t,i){var n=e.cursor.current,r=t.element.getBox();return(n[i=i||"y"]-r[i])/t.element["y"===i?"getHeight":"getWidth"]()*100<50?"before":"after"},toggleTargetNodeCls:function(e,t,i){var n,r;if(Ext.isArray(t))for(r=t.length,n=0;n<r;n++)e.toggleCls(t[n],i);else e.toggleCls(t,i)},getTargetComp:function(e){var t,i=this.getTargetEl(e);return i&&(t=Ext.Component.from(i)).isGridCell&&(t=t.row),t},getSourceComp:function(e){return Ext.Component.from(e.eventTarget)},toggleMarkerCls:function(e,t,i,n){var r,s,o,a,l,c,u;if(e.isLockedGrid){if(s=e.getStore(),r=t.getRecord(),-1!==(l=s.indexOf(r)))for(c=(o=e.visibleGrids).length,u=0;u<c;u++)(a=o[u].getItemAt(l))&&this.toggleTargetNodeCls(a,i,n)}else this.toggleTargetNodeCls(t,i,n)},toggleProxyCls:function(e,t,i){var n=e.proxy;n&&n.element&&n.element.toggleCls(t,i)}}),Ext.define("Ext.plugin.dd.DragDrop",{extend:Ext.plugin.Abstract,alias:"plugin.viewdragdrop",dragText:void 0,enableDrag:!0,containerScroll:!0,dropIndicator:null,enableDrop:!0,handle:null,groups:null,overCls:"",scrollAmount:80,activateOnLongPress:!(!Ext.supports.Touch||!Ext.supports.TouchEvents),enable:function(){this.dragZone&&this.dragZone.unlock(),this.dropZone&&this.dropZone.unlock()},disable:function(){this.dragZone&&this.dragZone.lock(),this.dropZone&&this.dropZone.lock()},destroy:function(){this.dragZone=this.dropZone=Ext.destroy(this.dragZone,this.dropZone),this.callParent()}}),Ext.define("Ext.grid.plugin.HeaderReorder",{extend:Ext.plugin.dd.DragDrop,alias:"plugin.headerreorder",config:{grid:null},handle:"."+Ext.baseCSSPrefix+"gridcolumn",groups:"gridHeaderGroup",dropIndicator:Ext.baseCSSPrefix+"grid-column-drop-indicator",updateGrid:function(e,t){t&&(this.dragZone=this.dropZone=Ext.destroy(this.dragZone,this.dropZone)),e&&this.initializeDrag(e)},initializeDrag:function(e){var t=this,i=e.getHeaderContainer(),n={};t.enableDrag&&(t.proxy&&(n.proxy=t.proxy),t.activateOnLongPress&&(n.activateOnLongPress=t.activateOnLongPress),t.dragZone=new Ext.grid.HeaderDragZone(Ext.apply({element:i.bodyElement,handle:t.handle,groups:t.groups,view:e,constrain:Ext.getBody()},n))),t.enableDrop&&(t.dropZone=new Ext.grid.HeaderDropZone({element:i.el,groups:t.groups,view:e,dropIndicator:t.dropIndicator}))}}),Ext.define("Ext.grid.RowHeader",{extend:Ext.dataview.ItemHeader,xtype:"rowheader",classCls:Ext.baseCSSPrefix+"rowheader",isRowHeader:!0,toolDefaults:{ui:"itemheader rowheader"},privates:{augmentToolHandler:function(e,t){this.callParent([e,t]),t[1].grid=t[1].list},getGroupHeaderTplData:function(){var e,t,i=this.callParent([!0]),n=this.parent,r=n.allPartners||[n],s=r.length;if(i)for(e=0;e<s&&!(t=r[e].getColumnForField(i.groupField));++e);return t?(i.columnName=t.getText(),t.printValue&&(i.html=t.printValue(i.value))):i&&(i.html=Ext.htmlEncode(i.name)),i}}}),Ext.define("Ext.grid.Grid",{extend:Ext.dataview.List,xtype:"grid",isGrid:!0,mixins:[Ext.mixin.ConfigProxy],storeEventListeners:{sort:"onStoreSort"},config:{columns:null,columnMenu:{cached:!0,$value:{xtype:"menu",weighted:!0,align:"tl-bl?",hideOnParentHide:!1,items:{sortAsc:{xtype:"gridsortascmenuitem",group:"sortDir",weight:-100},sortDesc:{xtype:"gridsortdescmenuitem",group:"sortDir",weight:-90},groupByThis:{xtype:"gridgroupbythismenuitem",handler:"column.onGroupByThis",separator:!0,weight:-50},showInGroups:{xtype:"gridshowingroupsmenuitem",handler:"column.onToggleShowInGroups",weight:-40}}}},columnResize:!0,headerContainer:{xtype:"headercontainer"},hideHeaders:!1,enableColumnMove:!0,hideScrollbar:null,itemsFocusable:!1,title:"",titleBar:{xtype:"titlebar",docked:"top"},sortable:!0,multiColumnSort:!1,columnsMenuItem:{lazy:!0,$value:{xtype:"gridcolumnsmenu",weight:-80,separator:!0}},columnLines:null,rowNumbers:null},itemConfig:{xtype:"gridrow"},groupHeader:{xtype:"rowheader"},infinite:!0,navigationModel:"grid",pinnedHeader:{xtype:"rowheader"},scrollable:!0,scrollToTopOnRefresh:!1,striped:!0,proxyConfig:{headerContainer:["reserveScrollbar"]},selectionModel:"grid",classCls:Ext.baseCSSPrefix+"grid",columnLinesCls:Ext.baseCSSPrefix+"column-lines",getTemplate:function(){var e=this.callParent();return e.push({reference:"resizeMarkerElement",className:Ext.baseCSSPrefix+"resize-marker-el",hidden:!0}),e},beforeInitialize:function(){(this.ownerGrid=this).callParent()},initialize:function(){var e=this,t=e.getColumns(),i=e.registeredColumns,n=e.getTitleBar(),r=e.getHeaderContainer(),s=e.getScrollable(),o=e.getSelectable();e.callParent(),s&&r.getScrollable().addPartner(s,"x"),n&&e.insert(0,n),e.add(r),o&&o.onViewCreated(e),!t.length&&i&&i.length&&r.add(i)},doDestroy:function(){this.destroyMembers("columnsMenu","columnsMenuItem","rowNumbererColumn"),this.callParent()},addColumn:function(e){return this.getHeaderContainer().add(e)},addSharedMenuItem:function(e){(this.sharedMenuItems||(this.sharedMenuItems=[])).push(e)},removeSharedMenuItem:function(e){var t=this.sharedMenuItems;t&&Ext.Array.remove(t,e)},beforeShowColumnMenu:function(e,t){var i,n,r;for(this.getColumnsMenuItem(),i=0,n=(r=this.sharedMenuItems)&&r.length;i<n;++i)r[i].onBeforeShowColumnMenu(t,e,this);return this.fireEvent("beforeshowcolumnmenu",this,e,t)},onColumnMenuHide:function(e,t){var i,n,r=this.sharedMenuItems,s=r&&r.length;for(i=0;i<s;++i)(n=r[i]).destroyed||n.destroying||t.isHidden()||n.onColumnMenuHide(t,e,this)},getColumnForField:function(e){return this.getHeaderContainer().getColumnForField(e)},getColumns:function(e){return this.getHeaderContainer().getColumns(e)},getVisibleColumns:function(){return this.getHeaderContainer().getVisibleColumns()},insertColumn:function(e,t){return this.getHeaderContainer().insert(e,t)},insertColumnBefore:function(e,t){return t?t.getParent().insertBefore(e,t):this.getHeaderContainer().add(e)},mapToCell:function(e,t){var i;return e&&(e.isGridCell&&e.row.getGrid()===this?i=e:(e.isEntity&&(e=this.mapToItem(e)),e&&(e.isGridRow?(t=t||this.getFirstVisibleColumn())&&(i=e.getCellByColumn(t)):i=Ext.Component.from(e,this.innerCt,"gridcellbase")))),i||null},mapToItem:function(e,t){return e&&e.isGridCell&&(e=e.row),this.callParent([e,t])},mapToRowBody:function(e){return e&&(e.isGridRow||(e=this.mapToItem(e)),e&&e.isGridRow&&(e=e.getBody())),e||null},removeColumn:function(e){return this.getHeaderContainer().remove(e)},registerActionable:function(e){this.getNavigationModel().registerActionable(e)},unregisterActionable:function(e){this.getNavigationModel().unregisterActionable(e)},onColumnAdd:function(e,t,i){var n,r,s,o;if(!this.initializingColumns&&!this.destroying){for(r=(n=this.items.items).length,s=0;s<r;s++)(o=n[s]).hasGridCells&&o.insertColumn(i,t);this.onColumnChange("columnadd",[this,t,i])}},onColumnHide:function(e,t){var i,n,r,s;if(this.initialized&&!this.destroying){for(n=(i=this.items.items).length,r=0;r<n;r++)(s=i[r]).hasGridCells&&s.hideColumn(t);this.onColumnChange("columnhide",[this,t])}},onColumnMove:function(e,t,i,n){var r,s,o,a,l,c,u,d,h=null,f=t.length;if(this.initialized&&!this.destroying)for(s=(r=this.items.items).length,u=(d=this.getHeaderContainer().getColumns()).indexOf(t[f-1]),h=d[u+1]||null,o=f-1;0<=o;--o){for(c=t[o],a=0;a<s;a++)(l=r[a]).hasGridCells&&l.insertColumnBefore(c,h);this.onColumnChange("columnmove",[this,c,n+o,d.indexOf(c)]),h=c}},onColumnRemove:function(e,t){var i,n,r,s;if(this.initialized&&!this.destroying){for(t===this.sortedColumn&&(this.sortedColumn=null),n=(i=this.items.items).length,r=0;r<n;r++)(s=i[r]).hasGridCells&&s.removeColumn(t);this.onColumnChange("columnremove",[this,t])}},onColumnResize:function(e,t,i,n){this.destroying||n&&!t.getHidden()&&(this.infinite&&this.refreshScrollerSize(),this.fireEvent("columnresize",this,t,i))},onColumnShow:function(e,t){var i,n,r,s;if(this.initialized&&!this.destroying){for(n=(i=this.items.items).length,r=0;r<n;r++)(s=i[r]).hasGridCells&&s.showColumn(t);this.onColumnChange("columnshow",[this,t])}},onColumnSort:function(e,t,i){this.fireEvent("columnsort",this,t,i)},onRender:function(){var e=this._hideHeaders;this.callParent(),e&&this.updateHideHeaders(e)},privates:{dataItemMap:{header:1,footer:1},handleStoreSort:function(){this.rendered&&this.getHeaderContainer().setSortState()},onStoreGroupChange:function(e,t){this.callParent([e,t]),this.handleStoreSort()},onStoreSort:function(){this.handleStoreSort()},registerColumn:function(e){var t=this.registeredColumns,i=this.getHeaderContainer();return e.isGridColumn||(e=Ext.create(e)),t||(this.registeredColumns=t=[]),t.push(e),(!this.isConfiguring||i&&i.items.getCount())&&i.add(e),e},unregisterColumn:function(e,t){var i=this.registeredColumns,n=this.getHeaderContainer();return this.destroying||(i&&Ext.Array.remove(i,e),n&&n.remove(e,!0===t)),e},generateSelectorFunctions:function(){var n=this;n.callParent(),n.eventDelegate=function(e){var t,i=Ext.Component.from(e);return!(!i||i===n)&&(i.getRefOwner()===n?i.isGridRow||n.dataItemMap[i.$dataItem]:(t=i.row)&&t.isGridRow&&(t.grid||t.list)===n)}},getFirstVisibleColumn:function(){var e=this.getVisibleColumns();return e.length?e[0]:null},getLastVisibleColumn:function(){var e=this.getVisibleColumns(),t=e.length;return t?e[t-1]:null},isFirstVisibleColumn:function(e){return this.getFirstVisibleColumn()===e},isLastVisibleColumn:function(e){return this.getLastVisibleColumn()===e},createDataItem:function(e){var t=this.callParent([e]);return t.grid=this,t},onColumnChange:function(e,t){"columnmove"!==e&&"columnadd"!==e&&"columnremove"!==e&&this.refreshInnerWidth(),this.isConfiguring||this.fireEventArgs(e,t),this.clearItemCaches()},refreshInnerWidth:function(){var e=this.getHeaderContainer().bodyElement.dom;this.setInnerWidth(Math.max(e.scrollWidth,e.clientWidth))},onColumnComputedWidthChange:function(e,t){var i=this,n=i.groupingInfo;i.destroying||(i.setInnerWidth(t),i.setCellSizes(e,i.items.items),i.setCellSizes(e,i.itemCache),i.isGrouping()&&(i.setCellSizes(e,n.header.unused),i.setCellSizes(e,n.footer.unused)),i.hasListeners.columnlayout&&i.fireEvent("columnlayout",i,e,t))},onCellSelect:function(e){var t=e.getCell();t&&t.addCls(this.selectedCls)},onCellDeselect:function(e){var t=e.getCell();t&&t.removeCls(this.selectedCls)},setCellSizes:function(e,t){var i,n,r,s=t.length,o=e.length;for(n=0;n<s;n++)if((i=t[n]).hasGridCells)for(r=0;r<o;r++)i.setColumnWidth(e[r])},updateColumnLines:function(e){this.el.toggleCls(this.columnLinesCls,e)},updateColumnResize:function(e){var t=this.findPlugin("columnresizing");t?t.setGrid(e?this:null):e&&this.addPlugin("columnresizing")},updateColumns:function(e){var t=this.getHeaderContainer(),i=e&&e.length,n=this.registeredColumns;t&&(this.rowHeight=null,t&&(t.beginColumnUpdate(),t.getItems().getCount()&&(n&&t.remove(n,!1),i&&t.remove(e.filter(function(e){return e.isInstance}),!1),t.removeAll(!0,!0)),i&&(this.initializingColumns=this.isConfiguring,t.setColumns(e),n&&t.add(n),delete this.initializingColumns),t.endColumnUpdate()))},applyRowNumbers:function(e){return e=e&&(this.rowNumbererColumn=Ext.create(Ext.apply({xtype:"rownumberer",weight:-1e3,editRenderer:this.renderEmpty},e)))},updateRowNumbers:function(e,t){t&&this.unregisterColumn(t,!0),e&&this.registerColumn(e)},renderEmpty:function(){return""},applyColumnsMenuItem:function(e,t){return Ext.updateWidget(t,e,this,"createColumnsMenuItem")},createColumnsMenuItem:function(e){return Ext.apply({grid:this},e)},applyHeaderContainer:function(e,t){return Ext.updateWidget(t,e,this,"createHeaderContainer")},createHeaderContainer:function(e){return(e=this.mergeProxiedConfigs("headerContainer",e,!0)).sortable=this.getSortable(),e.grid=this,e},updateHeaderContainer:function(e){e&&e.on({columnresize:"onColumnResize",columnshow:"onColumnShow",columnhide:"onColumnHide",columnadd:"onColumnAdd",columnmove:"onColumnMove",columnremove:"onColumnRemove",columnsort:"onColumnSort",scope:this})},updateHideHeaders:function(e){if(this.rendered){var t=this.getHeaderContainer();e?t.el.setStyle({marginBottom:"-"+t.el.measure("h")+"px"}):t.el.setStyle({marginBottom:""})}},updateHideScrollbar:function(e){var t=Ext.scrollbar.width();this.element.setStyle("margin-right",e?-t+"px":"")},updateTitle:function(e){var t=this.getTitleBar();t&&(e?(t.setTitle(e),t.isHidden()&&t.show()):t.hide())},applyTitleBar:function(e,t){return Ext.updateWidget(t,e)},updateTitleBar:function(e){e&&!e.getTitle()&&e.setTitle(this.getTitle())},applyTotalColumnWidth:function(e){return 0===this.dataItems.length?void 0:e},updateVerticalOverflow:function(e,t){var i,n=this.getHeaderContainer(),r=this.findPlugin("summaryrow")||this.findPlugin("gridsummaryrow"),s=this.getScrollable(),o=s&&s.getScrollbarSize().width,a=!(!s||!s.getY())&&0<o&&e;this.callParent([e,t]),n.setVerticalOverflow(a),r&&((i=r.getRow()).destroyed||i.rightSpacer.setStyle({width:(a?o-1:0)+"px"}))},updateEnableColumnMove:function(e){var t=this.findPlugin("headerreorder");!t&&e&&(t=this.addPlugin("headerreorder")),t&&t.setGrid(e?this:null)},getSelection:function(){var e=this.getSelectable().getSelection(),t=e.type;return"columns"===t?e.lastColumnSelected:"cells"===t?e.endCell&&e.endCell.record:this.callParent()}}},function(e){e.prototype.indexModifiedFields=Ext.Array.toMap}),Ext.define("Ext.theme.material.grid.Grid",{override:"Ext.grid.Grid",config:{rowLines:!0,striped:!1}}),Ext.define("Ext.plugin.dd.DragZone",{extend:Ext.drag.Source,dragMarkerCls:Ext.baseCSSPrefix+"drag-indicator",describe:function(e){var t=this.getDragData(e.eventTarget);e.setData("dragData",t)},proxy:{type:"placeholder",cls:Ext.baseCSSPrefix+"proxy-drag-el",cursorOffset:Ext.supports.Touch&&Ext.supports.TouchEvents?[44,-75]:[12,20]},beforeDragStart:function(e){var t=this.getProxy();t&&t.setHtml&&t.setHtml(this.getDragText(e))},getDragText:function(e){return""},getDragData:Ext.emptyFn}),Ext.define("Ext.grid.GridDragZone",{extend:Ext.plugin.dd.DragZone,getViewScrollable:function(){var e,t,i=this.view,n=i.getScrollable();return n||i.isLockedGrid&&((e=this.ddRow?this.ddRow:Ext.dd.Manager.getTargetComp(this.info))&&e.getGrid&&(t=e.getGrid()),t&&(n=t.getScrollable())),n},toggleDragMarker:function(e,t){var i,n,r=Ext.dd.Manager,s=this.view;for(n=0;n<e.length;n++)(i=e[n]).isDestroyed||(t||(delete i.isDragging,delete i.draggingRecordId,delete i.dragMarkerCls),r.toggleMarkerCls(s,i,this.dragMarkerCls,t))},getDraggingRows:function(e){var t,i,n=e.data.dragData.records||[],r=this.view,s=[];for(t=0;t<n.length;t++)i=null,(i=r.isLockedGrid&&r.visibleGrids.length?r.visibleGrids[0].itemFromRecord(n[t]):r.itemFromRecord(n[t]))&&(i.isDragging=!0,i.draggingRecordId=n[t].id,i.dragMarkerCls=this.dragMarkerCls,s.push(i));return s},onDragStart:function(e){var t=this.getViewScrollable();t&&t.isVirtualScroller&&t.setDisabled(!0),this.containerScroll&&Ext.dd.ScrollManager.scrollTowardsPointer.apply(this,[this.view]),this.rows=this.getDraggingRows(e),this.toggleDragMarker(this.rows,!0)},onDragEnd:function(){var e=this.getViewScrollable();e&&e.isVirtualScroller&&e.setDisabled(!1),this.containerScroll&&Ext.dd.ScrollManager.stopAutoScroller.apply(this),this.onDragCancel()},onDragCancel:function(){this.toggleDragMarker(this.rows,!1),this.rows=null},getDragData:function(e){var t,i,n=this.view,r=Ext.Component.from(e,n);if(r)return i=r.getRecord(),(t=n.getSelections())&&(i=-1!==t.indexOf(i)?t:i),{eventTarget:e,view:n,item:r,records:Ext.Array.from(i)}},getDragText:function(e){var t=e.data.dragData.records.length;return Ext.isFunction(this.dragText)?this.dragText(t,e):Ext.String.format(this.dragText,t,1===t?"":Ext.util.Inflector.pluralize(""))}}),Ext.define("Ext.plugin.dd.DropZone",{extend:Ext.drag.Target,dropMarkerCls:Ext.baseCSSPrefix+"drop-indicator",validDropCls:Ext.baseCSSPrefix+"valid-drop",onDragMove:Ext.emptyFn,onDrop:Ext.emptyFn,onDragLeave:function(e){this.removeDropMarker(),Ext.dd.Manager.toggleProxyCls(e,this.validDropCls,!1)},getViewScrollable:Ext.emptyFn,removeDropMarker:Ext.emptyFn}),Ext.define("Ext.grid.GridDropZone",{extend:Ext.plugin.dd.DropZone,onDragMove:function(e){var t,i,n,r,s,o,a=Ext.dd.Manager,l=a.getTargetComp(e);i=a.getPosition(e,l),o=this.dropMarkerCls+"-"+i,l&&!l.hasCls(o)&&(l.getRecord&&(r=l.getRecord()),t=Ext.Array.intersect(this.getGroups(),e.source.getGroups()).length,(r&&t||(l.getStore&&(n=l.getStore()),n&&!(n&&0<n.getCount())))&&(s=-1===e.data.dragData.records.indexOf(r),this.ddEl&&this.removeDropMarker(),s&&(this.addDropMarker(l,[this.dropIndicator,o]),this.ddEl=l)))},onDrop:function(e){var t,i,n,r,s,o;this.ddEl&&(t=e.data.dragData,i=this.ddEl.hasCls(this.dropMarkerCls+"-before")?"before":"after",(n=Ext.dd.Manager.getTargetComp(e)).isGridRow&&(r=n.parent),s=n.getRecord(),!1!==(o=this.view).fireEvent("beforedrop",n,t,s,i)&&(this.onNodeDrop(t,s,i,r||o),o.fireEvent("drop",n,t,s,i)),this.removeDropMarker())},onNodeDrop:function(e,t,i,n){var r,s,o,a=e.view,l=n.getStore(),c=n!==a,u=e.records,d=c||1<u.length;if(this.copy)for(o=u.length,s=0;s<o;s++)u[s]=u[s].copy();else d&&a.getStore().remove(u);t&&i?(r=l.indexOf(t),"before"!==i&&r++,l.insert(r,u)):l.add(u),d&&n.getSelectable().getSelection().getSelectionModel().select(u)},addDropMarker:function(e,t){var i=Ext.dd.Manager;i.toggleProxyCls(this.info,this.validDropCls,!0),i.toggleMarkerCls(this.view,e,t,!0),this.overCls&&i.toggleTargetNodeCls(e,this.overCls,!0)},removeDropMarker:function(){var e,t=this,i=t.dropMarkerCls+"-",n=Ext.dd.Manager;t.info&&n.toggleProxyCls(t.info,t.validDropCls,!1),t.ddEl&&(e=[t.dropIndicator,i+"before",i+"after"],n.toggleMarkerCls(t.view,t.ddEl,e,!1),t.overCls&&n.toggleTargetNodeCls(t.ddEl,t.overCls,!1),t.ddEl=null)}}),Ext.define("Ext.grid.HeaderDragZone",{extend:Ext.plugin.dd.DragZone,autoDestroy:!1,resizerCls:Ext.baseCSSPrefix+"resizer-el",maskCls:Ext.baseCSSPrefix+"mask",beforeDragStart:function(e){var t=Ext.dd.Manager.getSourceComp(e),i=t.renderElement,n=Ext.dd.Manager.getTargetEl(e);if(i.isSuspended("drag")||i.isSuspended("longpress")||t.isDragColumn||!1===t.getDraggable()||Ext.fly(e.eventTarget).hasCls(this.resizerCls)||Ext.fly(n).hasCls(this.maskCls))return!1;this.callParent([e])},getDragText:function(e){return Ext.dd.Manager.getTargetComp(e).getText()}}),Ext.define("Ext.grid.HeaderDropZone",{extend:Ext.grid.GridDropZone,dropMarkerCls:Ext.baseCSSPrefix+"header-drop-indicator",autoDestroy:!1,isValidDrag:function(e,t){var i,n,r,s,o=this.info;if(e.up(t))return!1;if(i=o.cursor.current,n=t.previousSibling(),r=t.nextSibling(),e===n){if(s=n.element.getBox(),.5<(i.x-s.left)/s.width)return!1}else if(e===r&&(s=r.element.getBox(),(i.x-s.left)/s.width<=.5))return!1;return!0},onDragMove:function(e){var t,i,n=Ext.dd.Manager,r=n.getTargetComp(e),s=r.isDragColumn,o=n.getSourceComp(e);r.isHeaderContainer&&o.isHeaderContainer&&r!==o&&!s&&r.getParent()!==this.view?(t=n.getPosition(e,r,"x"),i=this.dropMarkerCls+"-"+t,r.hasCls(i)||(this.ddEl&&this.removeDropMarker(),this.isValidDrag(r,o)&&(this.ddEl=r,this.addDropMarker(r,[this.dropIndicator,i])))):this.ddEl&&this.removeDropMarker()},trackHeaderMove:function(e,t){var i;e&&e!==t&&!e.innerItems.length&&((i=e.getParent()).remove(e),this.trackHeaderMove(i,t))},onDrop:function(e){var t,i,n,r,s,o,a,l,c,u,d="insertBefore";this.ddEl&&(n=(i=(t=Ext.dd.Manager).getTargetComp(e)).getParent()||i.getRootHeaderCt(),c=(l=(r=t.getSourceComp(e)).getRootHeaderCt()).indexOf(r),s=n.indexOf(i),o=t.getPosition(e,i,"x"),u=r.getParent(),this.removeDropMarker(),-1!==s&&("after"===o?(a=n.getAt(s+1))||(d="insertAfter",a=i):a=n.getAt(s),n[d](r,a||null),this.trackHeaderMove(u,l),l.fireEvent("move",l,r,s,c)))}}),Ext.define("Ext.grid.PagingToolbar",{extend:Ext.Toolbar,xtype:"pagingtoolbar",classCls:Ext.baseCSSPrefix+"pagingtoolbar",config:{prevButton:{xtype:"button",iconCls:Ext.baseCSSPrefix+"pagingtoolbar-prev"},nextButton:{xtype:"button",iconCls:Ext.baseCSSPrefix+"pagingtoolbar-next"},sliderField:{xtype:"singlesliderfield",liveUpdate:!0,value:1,flex:1,minValue:1},summaryComponent:{xtype:"component",cls:Ext.baseCSSPrefix+"pagingtoolbar-summary"}},inheritUi:!0,initialize:function(){this.callParent(),this.add([this.getPrevButton(),this.getSummaryComponent(),this.getSliderField(),this.getNextButton()])},applyPrevButton:function(e,t){return Ext.factory(e,Ext.Button,t)},applyNextButton:function(e,t){return Ext.factory(e,Ext.Button,t)},applySliderField:function(e,t){return Ext.factory(e,Ext.field.SingleSlider,t)},applySummaryComponent:function(e,t){return Ext.factory(e,Ext.Component,t)}}),Ext.define("Ext.grid.SummaryRow",{extend:Ext.grid.Row,xtype:"gridsummaryrow",isSummaryRow:!0,config:{group:null},defaultCellUI:"summary",classCls:Ext.baseCSSPrefix+"summaryrow",element:{reference:"element",children:[{reference:"cellsElement",className:Ext.baseCSSPrefix+"cells-el"},{reference:"rightSpacer",className:Ext.baseCSSPrefix+"cells-el-right-spacer"}]},updateGroup:function(){this.syncSummary()},privates:{beginRefresh:function(e){var t=this.getGroup();return(e=this.callParent([e])).group=t,e.records=(t?t.data:e.store.data).items,e.summary=!0,e},syncSummary:function(){var e=(this.getGroup()||this.parent.store).getSummaryRecord(),t=this.getViewModel();e===this.getRecord()?this.refresh():(this.setRecord(e),t&&t.setData({record:e}))}}}),Ext.define("Ext.grid.cell.Boolean",{extend:Ext.grid.cell.Text,xtype:"booleancell",isBooleanCell:!0,config:{falseText:"False",trueText:"True",undefinedText:""},updateColumn:function(e,t){var i;this.callParent([e,t]),e&&e.isBooleanColumn&&(null!==(i=e.getFalseText())&&this.setFalseText(i),null!==(i=e.getTrueText())&&this.setTrueText(i),null!==(i=e.getUndefinedText())&&this.setUndefinedText(i))},updateFalseText:function(){this.isConfiguring||this.writeValue()},updateTrueText:function(){this.isConfiguring||this.writeValue()},updateUndefinedText:function(){this.isConfiguring||this.writeValue()},formatValue:function(e){return e=void 0===e?this.getUndefinedText():e&&"false"!==e?this.getTrueText():this.getFalseText()}}),Ext.define("Ext.grid.cell.Expander",{extend:Ext.grid.cell.Base,xtype:"expandercell",isExpanderCell:!0,config:{collapsed:!0},align:"center",classCls:Ext.baseCSSPrefix+"expandercell",expandedCls:Ext.baseCSSPrefix+"expanded",innerTemplate:[{reference:"iconElement",cls:Ext.baseCSSPrefix+"icon-el "+Ext.baseCSSPrefix+"font-icon"}],updateCollapsed:function(e){this.element.toggleCls(this.expandedCls,!e)}}),Ext.define("Ext.grid.cell.Widget",{extend:Ext.grid.cell.Base,xtype:"widgetcell",isWidgetCell:!0,config:{forceWidth:!1,widget:null},align:"center",classCls:Ext.baseCSSPrefix+"widgetcell",selectable:!1,getRefItems:function(e){var t=[],i=this.getWidget();return i&&(t.push(i),e&&i.getRefItems&&t.push.apply(t,i.getRefItems(e))),t},setValue:function(e){return e&&"object"==typeof e?(this._value=e,this.updateValue(e)):(void 0===e&&(e=null),this.callParent([e])),this},updateValue:function(e){var t=this.getWidget(),i=this.defaultBindCfg;i&&t&&t[i.names.set](e)},applyWidget:function(e){return e&&(e=Ext.apply({ownerCmp:this},e),e=Ext.create(e)),e},updateWidget:function(e,t){var i,n=this;t&&(n.widgetChangeListener=Ext.destroy(n.widgetChangeListener),t.measurer=null,t.destroy()),e&&(n.bodyElement.setHtml(""),n.bodyElement.appendChild(e.element),n.getForceWidth()&&n.setWidgetWidth(n.getWidth()),i=e.defaultBindProperty,i=e.self.getConfigurator().configs[i],n.defaultBindCfg=i||null,i&&e[i.names.get]&&e[i.names.set]||Ext.raise('Invalid config "'+e.defaultBindProperty+'" for '+e.$className),n.dataIndex&&(n.widgetChangeListener=e.on({change:"onWidgetChange",scope:n})))},onWidgetChange:function(e){var t,i,n,r;this.refreshContext||(t=this.getRecord(),i=this.defaultBindCfg,n=this.dataIndex,i&&(r=e[i.names.get](),this.setValue(r),t&&!t.isSummaryRecord&&n&&t.set(n,r)))},updateWidth:function(e,t){this.callParent([e,t]),this.getForceWidth()&&this.setWidgetWidth(e)},onRender:function(){this.getForceWidth()&&this.setWidgetWidth(this.getWidth())},doDestroy:function(){this.setWidget(null),this.callParent()},privates:{setWidgetWidth:function(e){var t,i,n,r,s=this.bodyElement;this.rendered&&(t=this.getWidget())&&(i=this.getColumn(),n=parseInt(i.getCachedStyle(s,"padding-left"),10)||0,r=parseInt(i.getCachedStyle(s,"padding-right"),10)||0,t.measurer=i,t.setWidth(e-n-r))}}}),Ext.define("Ext.grid.column.Boolean",{extend:Ext.grid.column.Column,xtype:"booleancolumn",isBooleanColumn:!0,config:{trueText:null,falseText:null,undefinedText:null,defaultEditor:{xtype:"checkboxfield"},cell:{xtype:"booleancell"}}}),Ext.define("Ext.grid.column.Drag",{extend:Ext.grid.column.Column,xtype:"dragcolumn",classCls:Ext.baseCSSPrefix+"drag-column",cell:{bodyCls:Ext.baseCSSPrefix+"row-drag-indicator"},menu:null,sortable:!1,draggable:!1,resizable:!1,hideable:!1,ignore:!0,width:"auto",minWidth:30,ignoreExport:!0,text:"",isDragColumn:!0,onViewColumnAdd:function(e,t,i){i||t.isDragColumn||e.insertColumn(0,this)},onColumnMoved:function(e,t,i,n){this.onViewColumnAdd(e,t,n)},updateGrid:function(e,t){var i={scope:this,columnadd:"onViewColumnAdd",columnmove:"onColumnMoved"};this.isDestructing()||(t&&t.un(i),e&&e.on(i))}}),Ext.define("Ext.grid.column.Text",{extend:Ext.grid.column.Column,xtype:"textcolumn",cell:{xtype:"textcell"}}),Ext.define("Ext.grid.filters.menu.Base",{extend:Ext.menu.CheckItem,isFilterMenuItem:!0,mixins:[Ext.mixin.Bufferable],text:"Filter",menu:{indented:!1},weight:-70,bufferableMethods:{onInputChange:300},syncFilter:function(){var e,t,i,n,r,s=this.column.getDataIndex(),o=this.plugin.getQuery().getFilters(),a=this.getMenu().getItems().items;for(t=a.length;0<t--;)if((n=a[t]).operator){for(r=null,i=s&&o&&o.length;0<i--;)if((e=o[i]).property===s&&e.operator===n.operator){r=e.value;break}n.setValue(r)}},syncQuery:function(){var e,t,i,n,r,s=this.column.getDataIndex(),o=this.plugin,a=o.getQuery(),l=0,c=0;if(s){for(e=Ext.clone(a.getFilters()),n=this.getMenu().getItems().items,t=e&&e.length;0<t--;)e[t].property===s&&(e.splice(t,1),++c);if(this.getChecked())for(t=n.length;0<t--;)(i=n[t]).operator&&null!==(r=i.getValue())&&""!==r&&(++l,Ext.isDate(r)&&(r=Ext.Date.format(r,"C")),(e=e||[]).push({property:s,operator:i.operator,value:r}));l||this.setChecked(!1),(l||c)&&o.setActiveFilter(e)}},privates:{doOnInputChange:function(){this.setChecked(!0),this.syncQuery()}}}),Ext.define("Ext.grid.filters.menu.Boolean",{extend:Ext.grid.filters.menu.Base,alias:"gridFilters.boolean",menu:{defaults:{name:"boolfilter",group:"value",xtype:"menuradioitem",operator:"==",checkHandler:"up.onInputChange"},items:{yes:{value:!0,text:"True",weight:10},no:{value:!1,text:"False",weight:20}}},syncFilter:function(){var e,t,i,n,r,s=this.column.getDataIndex(),o=this.plugin.getQuery().getFilters(),a=this.getMenu().getItems().items;for(t=a.length;0<t--;)if((n=a[t]).operator){for(r=null,i=s&&o&&o.length;0<i--;)if((e=o[i]).property===s&&e.operator===n.operator){if(!n.getChecked){r=e.value;break}if(e.value===n.getValue()){r=e.value;break}}"=="===n.operator&&n.getChecked?n.getValue()===r?n.setChecked(!0):n.setChecked(!1):n.setValue(r)}},syncQuery:function(){var e,t,i,n,r,s=this.column.getDataIndex(),o=this.plugin,a=o.getQuery(),l=0,c=0;if(s){for(e=Ext.clone(a.getFilters()),n=this.getMenu().getItems().items,t=e&&e.length;0<t--;)e[t].property===s&&(e.splice(t,1),++c);if(this.getChecked())for(t=n.length;0<t--;)(i=n[t]).operator&&(i&&i.getChecked?r=!i.getChecked()||!0!==i.getValue()&&!1!==i.getValue()?null:i.getValue():(r=i.getValue(),this.setChecked(!0)),null!==r&&""!==r&&(++l,(e=e||[]).push({property:s,operator:i.operator,value:r})));l||this.setChecked(!1),(l||c)&&o.setActiveFilter(e)}}}),Ext.define("Ext.grid.filters.menu.Date",{extend:Ext.grid.filters.menu.Base,alias:"gridFilters.date",menu:{items:{lt:{xtype:"datefield",label:"Before",placeholder:"Before...",operator:"<",weight:10,listeners:{change:"up.onInputChange"}},gt:{xtype:"datefield",label:"After",placeholder:"After...",operator:">",weight:20,listeners:{change:"up.onInputChange"}},eq:{xtype:"datefield",label:"On",placeholder:"On...",operator:"=",separator:!0,weight:30,listeners:{change:"up.onInputChange"}}}},syncFilter:function(){var e,t,i,n,r,s=this.column,o=s.getDataIndex(),a=this.plugin.getQuery().getFilters(),l=this.getMenu().getItems().items;for(t=l.length;0<t--;)if((n=l[t]).operator){for(r=null,i=o&&a&&a.length;0<i--;)if("=="!==(e=a[i]).operator||n.getChecked||"boolean"==typeof e.value||(e.operator="="),e.property===o&&e.operator===n.operator){r=e.value;break}"date"===s.columnFilterTypes[s.xtype]&&(r=r&&Ext.Date.parse(r)),n.setValue(r)}}}),Ext.define("Ext.grid.filters.menu.Number",{extend:Ext.grid.filters.menu.Base,alias:"gridFilters.number",menu:{items:{lt:{xtype:"numberfield",label:"Less than",placeholder:"Less than...",floatedPickerAlign:"tl-tr?",operator:"<",weight:10,listeners:{change:"up.onInputChange"}},gt:{xtype:"numberfield",label:"Greater than",placeholder:"Greater than...",floatedPickerAlign:"tl-tr?",operator:">",weight:20,listeners:{change:"up.onInputChange"}},eq:{xtype:"numberfield",label:"Equal to",placeholder:"Equal to...",floatedPickerAlign:"tl-tr?",operator:"=",separator:!0,weight:30,listeners:{change:"up.onInputChange"}}}},syncFilter:function(){var e,t,i,n,r,s=this.column.getDataIndex(),o=this.plugin.getQuery().getFilters(),a=this.getMenu().getItems().items;for(t=a.length;0<t--;)if((n=a[t]).operator){for(r=null,i=s&&o&&o.length;0<i--;)if("=="!==(e=o[i]).operator||n.getChecked||"boolean"==typeof e.value||(e.operator="="),e.property===s&&e.operator===n.operator){r=e.value;break}n.setValue(r)}}}),Ext.define("Ext.grid.filters.menu.String",{extend:Ext.grid.filters.menu.Base,alias:"gridFilters.string",menu:{items:{like:{xtype:"textfield",placeholder:"Like...",operator:"like",listeners:{change:"up.onInputChange"}}}}}),Ext.define("Ext.grid.filters.Plugin",{extend:Ext.plugin.Abstract,alias:"plugin.gridfilters",mixins:[Ext.state.Stateful,Ext.mixin.StoreWatcher],config:{activeFilter:null,query:{type:"default",format:"filters"}},stateful:["activeFilter"],init:function(e){this.setOwner(e),e.on({beforeshowcolumnmenu:"onBeforeShowColumnMenu",scope:this})},destroy:function(){this.setOwner(null),this.callParent()},updateActiveFilter:function(e){var t=this.getQuery();Ext.isString(e)?t.setSource(e):t.setFilters(e)},applyQuery:function(e,t){return Ext.Factory.query.update(t,e)},updateQuery:function(e){if(e){var t=this,i=e.compile;e.compile=function(){i.call(e),t.queryModified(e)}}},updateStore:function(e,t){var i=this.getQuery();this.mixins.storewatcher.updateStore.call(this,e,t),!t||t.destroying||t.destroyed||t.getFilters().remove(i),e&&e.getFilters().add(i)},onSetFilter:function(e){this.setActiveFilter(e.rec.data.query)},privates:{onBeforeShowColumnMenu:function(e,t,i){var n,r=i.getComponent("filter");r||(r=(n=t.createFilter({itemId:"filter",plugin:this,column:t}))&&i.add(Ext.Factory.gridFilters(n)))&&r.setCheckHandler(this.onFilterItemCheckChange.bind(this)),r&&r.syncFilter()},onFilterItemCheckChange:function(e){e.syncQuery()},queryModified:function(){var e=this.cmp.getStore();(e=e&&e.getFilters())&&(e.beginUpdate(),++e.generation,e.endUpdate())}}}),Ext.define("Ext.layout.Fit",{extend:Ext.layout.Auto,alias:"layout.fit",isFit:!0,cls:Ext.baseCSSPrefix+"layout-fit",itemCls:Ext.baseCSSPrefix+"layout-fit-item"}),Ext.define("Ext.grid.locked.Grid",{extend:Ext.Panel,xtype:"lockedgrid",alternateClassName:"Ext.grid.LockedGrid",isLockedGrid:!0,classCls:Ext.baseCSSPrefix+"lockedgrid",config:{columnMenu:{items:{region:{text:"Locked",iconCls:"fi-lock",menu:{}}}},columns:null,defaultLockedRegion:"left",gridDefaults:null,hideHeaders:!1,itemConfig:{},leftRegionDefaults:{locked:!0,menuItem:{iconCls:"fi-chevron-left"}},regions:{left:{menuItem:{text:"Locked (Left)"},weight:-10},center:{flex:1,menuItem:{text:"Unlocked",iconCls:"fi-unlock"},weight:0},right:{menuItem:{text:"Locked (Right)"},weight:10}},rightRegionDefaults:{locked:!0,menuItem:{iconCls:"fi-chevron-right"}},store:null,variableHeights:!1,enableColumnMove:!0,grouped:!0},weighted:!0,layout:{type:"hbox",align:"stretch"},onRender:function(){this.callParent(),this.setupHeaderSync(),this.reconfigure()},doDestroy:function(){Ext.undefer(this.partnerTimer),this.callParent()},addColumn:function(e){var t,i,n,r,s=this.processColumns(e),o=Array.isArray(e),a=o?[]:null,l=this.gridItems,c=l.length;for(i=0;i<c;++i)(r=s[(n=l[i]).regionKey])&&(t=n.addColumn(r),o?Ext.Array.push(a,t):a=t[0]);return this.getVariableHeights()&&this.doRefresh(),a},getHorizontalOverflow:function(){var e,t=this.visibleGrids,i=t&&t.length;for(e=0;e<i;++e)if(t[e].getHorizontalOverflow())return!0;return!1},getRegion:function(e){return this.regionMap[e]||null},getVerticalOverflow:function(){var e=this.visibleGrids,t=e&&e.length;return t&&e[t-1].getVerticalOverflow()},insertColumnBefore:function(e,t){var i;return i=null===t?this.gridMap.center.addColumn(e):t.getParent().insertBefore(e,t),this.getVariableHeights()&&this.doRefresh(),i},removeColumn:function(e){var t=e.getGrid().removeColumn(e);return this.getVariableHeights()&&this.doRefresh(),t},createLocation:function(e){var t;return e.isGridLocation&&e.column&&(t=e.column.getGrid()).getHidden()&&(t=null,e=e.record),(t=t||this.regionMap.center.getGrid()).createLocation(e)},setLocation:function(e,t){var i;e.isGridLocation&&e.column&&(i=e.column.getGrid()).getHidden()&&(i=null,e=e.record),(i=i||this.regionMap.center.getGrid()).setLocation(e,t)},updateColumns:function(e){var t,i,n,r,s=this.gridItems;if(!this.isConfiguring){for(t=this.processColumns(e),++this.bulkColumnChange,n=0,i=s.length;n<i;++n)(r=s[n]).setColumns(t[r.regionKey]||[]);this.doRefresh(),--this.bulkColumnChange}},updateGrouped:function(e){this.relayConfig("grouped",e)},updateHideHeaders:function(e){this.headerSync=Ext.destroy(this.headerSync),this.relayConfig("hideHeaders",e),this.setupHeaderSync()},updateEnableColumnMove:function(e){var t,i;if(!this.isConfiguring)for(t=this.gridItems,i=0;i<t.length;i++)t[i].setEnableColumnMove(e)},updateItemConfig:function(e){this.relayConfig("itemConfig",e)},updateMaxHeight:function(e){this.relayConfig("maxHeight",e)},updateRegions:function(e){var t,i,n,r,s,o,a,l,c,u,d,h,f=this,g=f.regionMap,p=f.getGridDefaults(),m=f.getVariableHeights(),x=f.getEnableColumnMove();if(g)for(t in g)f.remove(g[t]);for(t in f.regionMap=g={},f.gridMap=s={},n=f.processColumns(f.getColumns()),e)(i=e[t])&&(i=f.createRegion(t,e[t],n[t],p),(r=(i=f.add(i)).getGrid()).isDefaultPartner=t===f.unlockedKey,r.setEnableColumnMove(x),m&&(r.partnerManager=f,r.isDefaultPartner&&(f.defaultPartner=u=r)),i.on({scope:f,collapse:"onRegionCollapse",expand:"onRegionExpand",hide:"onRegionHide",show:"onRegionShow"}),g[t]=i,(a=(s[t]=r).getScrollable())&&(o&&o.addPartner(a,"y"),o=a),f.setupGrid(r));for(f.regionItems=d=f.query(">[isLockedGridRegion]"),f.gridItems=h=[],c=0,l=d.length;c<l;++c)r=d[c].getGrid(),h.push(r),u&&r!==u&&(r.renderInfo=u.renderInfo);f.setupHeaderSync()},applyStore:function(e){return e?Ext.data.StoreManager.lookup(e):null},updateStore:function(e){this.store=e,this.relayConfig("store",e)},updateVariableHeights:function(e){this.relayConfig("variableHeights",e)},registerActionable:function(e){var t,i=this.actionables||(this.actionables=[]),n=this.gridItems;if(!Ext.Array.contains(i,e)&&(i.push(e),n))for(t=n.length;0<t--;)n[t].registerActionable(e)},unregisterActionable:function(e){var t,i=this.actionables,n=this.gridItems;if(i&&(Ext.Array.remove(i,e),n))for(t=n.length;0<t--;)n[t].registerActionable(e)},statics:{relayGridMethod:function(i,n,r,s){n=n||"visibleGrids",r=r||0,null==s&&(s=null),this.prototype[i]=function(){var e=this[n],t=s;return(e=e&&e[r])&&(e.isLockedGridRegion&&(e=e.getGrid()),t=e[i].apply(e,arguments)),t}},relayGridMethods:function(e){var t,i,n=[];for(t in e)!0===(i=e[t])?(i=n)[0]=t:(i=i.slice()).unshift(t),this.relayGridMethod.apply(this,i)}},privates:{bulkColumnChange:0,partnerOffset:200,itemConfiguring:!1,lastPartnerRequest:0,unlockedKey:"center",claimActivePartner:function(e){var t=Date.now(),i=this.activePartner;this.partnerTimer=Ext.undefer(this.partnerTimer),(!i||t-this.lastPartnerRequest>this.partnerOffset)&&(this.activePartner=e,this.lastPartnerRequest=t,this.setActivePartner(e))},configureHeaderHeights:function(){var e=this.headerSync;e&&e.sync()},configureItems:function(){var e,t,i,n,r,s=this.gridItems,o=this.regionItems;for(this.itemConfiguring=!0,e=s.length-1;0<=e;--e)i=s[e],r=o[e],this.setRegionVisibility(r),n=!0,t&&i.getVerticalOverflow()||(n=!1,t=this.isRegionVisible(r)),i.setHideScrollbar(n);this.itemConfiguring=!1},configurePartners:function(){var e,t,i,n=this,r=this.gridItems,s=r.length;for(e=r.filter(function(e){return n.isRegionVisible(e.region)}),n.visibleGrids=e,t=0;t<s;++t)(i=r[t]).allPartners=e,i.partners=e.filter(function(e){return e!==i})},createRegion:function(e,t,i,n){var r,s=this,o=t.weight;return s.fireEvent("createregion",s,i),0!==o&&(r=o<0?s.getLeftRegionDefaults():s.getRightRegionDefaults()),Ext.merge({xtype:"lockedgridregion",regionKey:e,lockedGrid:s,grid:Ext.apply({regionKey:e,columnMenu:s.getColumnMenu(),columns:i,hideHeaders:s.getHideHeaders(),grouped:s.getGrouped(),itemConfig:s.getItemConfig(),store:s.getStore(),variableHeights:s.getVariableHeights()},n)},r,t)},doHorizontalScrollCheck:function(){var e,t,i,n=this.gridItems,r=n.length;for(i=0;i<r;++i)t=(e=n[i]).getScrollable(),this.isRegionVisible(e.region)&&t&&t.setX(!e.getHorizontalOverflow()||"scroll")},doRefresh:function(){this.reconfigure(),this.refreshGrids(),this.doHorizontalScrollCheck(),this.doVerticalScrollCheck()},doReleaseActivePartner:function(){this.destroyed||(this.lastPartnerRequest=0,this.activePartner=null,this.setActivePartner(this.defaultPartner))},doVerticalScrollCheck:function(){var e,t,i,n,r=this.gridItems,s=r.length;for(n=0;n<s;++n)t=(e=r[n]).getScrollable(),(i=e.region)&&this.isRegionVisible(i)&&t&&(e.getVerticalOverflow()?this.setGridScrollers(i,i.isHidden()):this.setGridScrollers(!1))},handleChangeRegion:function(e,t){var i=e.getGrid(),n=this.gridItems,r=n.indexOf(i),s=n.indexOf(t.getGrid());++this.bulkColumnChange,r<s?i.addColumn(t):i.insertColumn(0,t),i.syncRowsToHeight(!0),--this.bulkColumnChange,this.doHorizontalScrollCheck(),this.doVerticalScrollCheck()},handleRegionVisibilityChange:function(e,t){this.itemConfiguring||(this.configurePartners(),this.refreshGrids(),this.setGridScrollers(e,t),this.configureHeaderHeights())},isActivePartner:function(e){var t=this.activePartner;return t?e===t:e.isDefaultPartner},isHeaderVisible:function(e){return this.isRegionVisible(e.getGrid().region)},isRegionVisible:function(e){return!e.hasHiddenContent()},isLastVisibleRegion:function(e){var t,i=this.regionItems,n=i.indexOf(e);for(t=i.length-1;n<t;--t)if(!i[t].hasHiddenContent())return!1;return!0},onBeforeShowColumnMenu:function(e,t,i){var n,r,s,o=this.regionItems,a=o.length,l=e.region,c=!1;if(i=i.getComponent("region")){for((i=i.getMenu()).removeAll(),n=[],c=!(!e.isDefaultPartner||1!==e.getVisibleColumns().length),s=0;s<a;++s)r=o[s],n.push(Ext.applyIf({disabled:c||r===l,handler:this.handleChangeRegion.bind(this,r,t)},r.getMenuItem()));i.add(n)}},onColumnAdd:function(e){this.setRegionVisibility(e.region)||this.refreshGrids(),this.configureHeaderHeights()},onColumnHide:function(e){this.setRegionVisibility(e.region)||this.refreshGrids(),this.configureHeaderHeights()},onColumnRemove:function(e,t){this.fireEvent("columnremove",e,t),this.setRegionVisibility(e.region)||this.refreshGrids(),this.configureHeaderHeights()},onColumnShow:function(e){this.setRegionVisibility(e.region)||this.refreshGrids(),this.configureHeaderHeights()},onGridHorizontalOverflowChange:function(){this.bulkColumnChange||this.doHorizontalScrollCheck()},onGridResize:function(e){e.syncRowsToHeight(!0)},onGridVerticalOverflowChange:function(e,t){var i=e.region;t?this.setGridScrollers(i,i.isHidden()):e.setHideScrollbar(!1)},onRegionCollapse:function(e){this.handleRegionVisibilityChange(e,!0)},onRegionExpand:function(e){this.handleRegionVisibilityChange(e,!1)},onRegionHide:function(e){this.handleRegionVisibilityChange(e,!0)},onRegionShow:function(e){this.handleRegionVisibilityChange(e,!1)},getRegionKey:function(e){var t=this.getDefaultLockedRegion();return e?!0===e?t:e:this.unlockedKey},processColumns:function(e){var t,i,n,r,s,o,a={};if(e)for(Array.isArray(e)||(e=[e]),i=0,t=e.length;i<t;++i)r=(n=e[i]).locked||n.getLocked&&n.getLocked(),(o=a[s=this.getRegionKey(r)])||(a[s]=o=[]),o.push(n);return a},reconfigure:function(){this.configureItems(),this.configurePartners(),this.configureHeaderHeights()},refreshGrids:function(){var e,t=this.visibleGrids,i=t.length;if(this.rendered)for(e=0;e<i;++e)t[e].syncRowsToHeight(!0)},relayConfig:function(e,t){var i,n,r,s=this.gridItems;if(s&&!this.isConfiguring)for(r=Ext.Config.get(e).names.set,i=0,n=s.length;i<n;++i)s[i][r](t)},releaseActivePartner:function(e){this.activePartner===e&&(Ext.undefer(this.partnerTimer),this.partnerTimer=Ext.defer(this.doReleaseActivePartner,this.partnerOffset,this))},setActivePartner:function(e){var t=this.visibleGrids;Ext.Array.remove(t,e),t.unshift(e)},setGridScrollers:function(e,t){var i,n,r,s=this.gridItems,o=s.length;if(this.isLastVisibleRegion(e))for(r=e.getGrid(),i=s.indexOf(r)-(t?1:0),n=0;n<o;++n)s[n].setHideScrollbar(!!r.getVerticalOverflow()&&n<i)},setRegionVisibility:function(e){var t=e.getGrid(),i=!!e.getHidden();return e.setHidden(0===t.getVisibleColumns().length),i!==e.getHidden()},setupGrid:function(e){var t,i=this.actionables;if(i)for(t=0;t<i.length;++t)e.registerActionable(i[t]);e.on({scope:this,beforeshowcolumnmenu:"onBeforeShowColumnMenu",columnadd:"onColumnAdd",columnhide:"onColumnHide",columnremove:"onColumnRemove",columnshow:"onColumnShow",horizontaloverflowchange:"onGridHorizontalOverflowChange",resize:"onGridResize",verticaloverflowchange:"onGridVerticalOverflowChange"})},setupHeaderSync:function(){var e,t,i=this.gridItems;if(!this.getHideHeaders()&&!this.isConfiguring){for(e=[],t=0;t<i.length;++t)e.push(i[t].getHeaderContainer());Ext.destroy(this.headerSync),this.headerSync=new Ext.util.HeightSynchronizer(e,this.isHeaderVisible.bind(this))}}}},function(e){e.relayGridMethods({ensureVisible:!0,gatherData:!0,getSelections:!0,mapToItem:!0,mapToRecord:!0,mapToRecordIndex:!0})}),Ext.define("Ext.grid.locked.Region",{extend:Ext.Panel,xtype:"lockedgridregion",isLockedGridRegion:!0,alternateClassName:"Ext.grid.LockedGridRegion",classCls:Ext.baseCSSPrefix+"lockedgridregion",autoSize:null,lockedGrid:null,config:{grid:{xtype:"grid",manageHorizontalOverflow:!1,reserveScrollbar:!0,scrollable:{x:!0,y:!0}},locked:!1,menuItem:{},menuLabel:"",regionKey:""},border:!0,layout:"fit",onResize:function(){},applyMenuItem:function(e){var t=this.getMenuLabel();return e&&t&&(e=Ext.applyIf({text:t},e)),e},updateHidden:function(e,t){var i,n=this.lockedGrid.headerSync;this.callParent([e,t]),e&&(i=this.getGrid().getNavigationModel())&&i.getLocation()&&i.setLocation(null),n&&n.invalidateItems()},applyGrid:function(e){return e&&((e=this.add(e)).region=this),e},updateWeight:function(e,t){var i=this.sideClsMap;this.callParent([e,t]),t&&this.removeCls(i[Ext.Number.sign(t)]),e&&this.addCls(i[Ext.Number.sign(e)])},privates:{sideClsMap:{"-1":Ext.baseCSSPrefix+"lock-start",1:Ext.baseCSSPrefix+"lock-end"}}}),Ext.define("Ext.grid.plugin.CellEditing",{extend:Ext.plugin.Abstract,alias:["plugin.gridcellediting","plugin.cellediting"],config:{grid:null,triggerEvent:"doubletap",selectOnEdit:null},init:function(e){this.setGrid(e),e.setTouchAction({doubleTapZoom:!1}),e.$cellEditing=!0},getEditor:function(e){var t,i,n=e.column,r=n.getDataIndex(),s=e.record,o=n.getEditable();return!(t=!1!==o&&n.getEditor(e.record))&&o&&(t=Ext.create(n.getDefaultEditor())),t&&(t.isCellEditor||(t=Ext.create({xtype:"celleditor",field:t,plugin:this})),n.setEditor(t),t.editingPlugin=this,(i=t.getField()).addUi("celleditor"),i.setValidationField(s.getField(r),s)),t},getActiveEditor:function(){return this.activeEditor},updateGrid:function(e,t){t&&t.unregisterActionable(this),e&&e.registerActionable(this)},activateCell:function(e){var t,i,n,r=this.activeEditor,s=this.$previousEditor;if(e||Ext.raise("A grid Location must be passed into CellEditing#activateCell"),r&&r.$activeLocation.cell===e.cell)return r.$activeLocation;if(t=this.getEditor(e)){if(s&&(s.isCancelling?s.cancelEdit():s.completeEdit()),n=t.startEdit(e),t.editing)return this.getSelectOnEdit()&&((i=this.getGrid().getSelectable()).getCells()?i.selectCells(e,e):i.getRows()&&i.select(e.record)),this.$previousEditor=t,n;t.onEditComplete(!1,!0)}},startEdit:function(e,t){this.activateCell(new Ext.grid.Location(this.getGrid(),{record:e,column:t}))},destroy:function(){var e=this.getGrid();e&&(e.$cellEditing=!1),this.$previousEditor=null,this.callParent()}}),Ext.define("Ext.grid.plugin.Clipboard",{extend:Ext.plugin.AbstractClipboard,alias:"plugin.clipboard",formats:{cell:{get:"getCells"},html:{get:"getCellData"},raw:{get:"getCellData",put:"putCellData"}},gridListeners:{initialize:"onCmpReady"},getCellData:function(e,n){var r,s,o,a,l,c,t=this.getCmp().getSelectable(),i=t&&t.getSelection(),u=[],d="raw"===e,h="text"===e;return i&&i.eachCell(function(e,t,i){a=e.column,l=e.record,a.getIgnoreExport()||(o!==l&&(o=l,u.push(c=[])),s=a.getDataIndex(),r=l.data[s],d||(r=a.printValue(r),h&&(r=Ext.util.Format.stripTags(r))),c.push(r),n&&s&&l.set(s,null))}),Ext.util.TSV.encode(u)},getCells:function(e,t){var i,n,r,s,o=this.getCmp().getSelectable(),a=o&&o.getSelection(),l=[];return a&&a.eachCell(function(e){r=e.record,n!==r&&(n=r,l.push(s={model:r.self,fields:[]})),i=e.column.getDataIndex(),s.fields.push({name:i,value:r.data[i]}),t&&i&&r.set(i,null)}),l},getTextData:function(e,t){return this.getCellData(e,t)},putCellData:function(e,t){var i,n,r,s,o,a,l,c,u,d,h,f,g=this.getCmp(),p=Ext.util.TSV.decode(e,void 0,null),m=p.length,x=m?p[0].length:0,y=g.getHeaderContainer().getVisibleColumns(),v=g.getStore(),E=v?v.getCount()-1:0,b=y.length-1,C=g.getSelectable(),S=C&&C.getSelection();if(!(E<=0||b<=0))for(S&&S.eachCell(function(e){return u=e,!1}),h=u?u.columnIndex:0,f=u?u.recordIndex:0,n=0;n<m&&(i=p[n],!(E<(l=f+n)));n++){for(o=v.getAt(l),c={},a=h,r=0;r<x&&a<=b;)d=(s=y[a]).getDataIndex(),s.getIgnoreExport()||(!d||"raw"!==t&&"text"!==t||(c[d]=i[r]),r++),a++;o.set(c)}},putTextData:function(e,t){this.putCellData(e,t)},getTarget:function(e){return e.element},privates:{validateAction:function(e){var t=this.getCmp(),i=t.getNavigationModel().getLocation(),n=t.getSelectable(),r=n&&n.getCheckbox();if(i&&i.actionable&&r!==i.column)return!1}}}),Ext.define("Ext.grid.plugin.Editable",{extend:Ext.plugin.Abstract,alias:"plugin.grideditable",config:{grid:null,triggerEvent:"childdoubletap",formConfig:null,defaultFormConfig:{xtype:"formpanel",scrollable:!0,items:[{xtype:"fieldset"}]},toolbarConfig:{xtype:"titlebar",docked:"top",items:[{xtype:"button",ui:"alt",text:"Cancel",align:"left",action:"cancel"},{xtype:"button",ui:"alt",text:"Submit",align:"right",action:"submit"}]},enableDeleteButton:!0},init:function(e){this.setGrid(e),e.setTouchAction({doubleTapZoom:!1})},destroy:function(){this.cleanup(),this.callParent()},updateGrid:function(e,t){var i=this.getTriggerEvent();t&&t.un(i,"onTrigger",this),e&&e.on(i,"onTrigger",this)},onCancelTap:function(){this.sheet.hide()},onSubmitTap:function(){this.form.getRecord().set(this.form.getValues()),this.sheet.hide()},onSheetHide:function(){this.cleanup()},getEditorFields:function(e){var t,i,n,r=[],s=e.length,o={};for(t=0;t<s;t++)(n=(i=e[t]).ensureEditor())&&(o[i.getDataIndex()]&&Ext.raise('An editable column with the same dataIndex "'+i.getDataIndex()+'" already exists.'),o[i.getDataIndex()]=!0,n.isEditor&&(n=n.getField()),n.setLabel(i.getText()),n.setName(i.getDataIndex()),r.push(n));return r},onTrigger:function(e,t){var i,n,r,s,o=this,a=t.record,l=o.getFormConfig(),c=o.getToolbarConfig();a&&t.row&&(l?o.form=n=Ext.factory(l,Ext.form.Panel):(o.form=n=Ext.factory(o.getDefaultFormConfig()),i=o.getEditorFields(e.getColumns()),n.down("fieldset").setItems(i),n.clearFields=!0),s=Ext.factory(c,Ext.form.TitleBar),o.submitButton=s.down("button[action=submit]"),s.down("button[action=cancel]").on("tap","onCancelTap",o),o.submitButton.on("tap","onSubmitTap",o),n.on({change:"onFieldChange",delegate:"field",scope:o}),n.setRecord(a),o.sheet=r=e.add({xtype:"sheet",items:[s,n],hideOnMaskTap:!0,enter:"right",exit:"right",right:0,width:320,layout:"fit",stretchY:!0,hidden:!0}),o.getEnableDeleteButton()&&n.add({xtype:"button",text:"Delete",ui:"decline",margin:10,handler:function(){e.getStore().remove(a),r.hide()}}),r.on("hide","onSheetHide",o),r.show())},privates:{onFieldChange:function(){this.submitButton.setDisabled(!this.form.isValid())},cleanup:function(){var e=this.form;e&&!e.destroyed&&e.clearFields&&e.removeAll(!1),this.form=this.sheet=Ext.destroy(this.sheet)}}}),Ext.define("Ext.grid.plugin.PagingToolbar",{extend:Ext.plugin.Abstract,alias:["plugin.pagingtoolbar","plugin.gridpagingtoolbar"],mixins:[Ext.mixin.Hookable],config:{grid:null,currentPage:1,pageSize:0,totalCount:0,totalPages:0,loadPages:null,buffer:250,toolbar:{xtype:"pagingtoolbar",docked:"bottom"}},init:function(e){this.setGrid(e),e.add(this.getToolbar())},destroy:function(){this.setBuffer(null),this.setGrid(null),this.callParent()},updateGrid:function(e,t){var i=this;i.gridListeners=i.storeListeners=i.scrollListeners=Ext.destroy(i.gridListeners,i.storeListeners,i.scrollListeners),e&&(i.gridListeners=e.on({updatevisiblecount:"onUpdateVisibleCount",storechange:"onStoreChanged",destroyable:!0,scope:i}),i.scrollListeners=e.getScrollable().on({scrollend:"checkPageChange",buffer:100,scope:i}),i.bindStore(e.getStore()))},bindStore:function(e){Ext.destroy(this.storeListeners),this.getToolbar().setDisabled(!!e),e&&(this.storeListeners=e.on({add:"onTotalCountChange",remove:"onTotalCountChange",refresh:"onTotalCountChange",clear:"onTotalCountChange",destroyable:!0,scope:this}),this.setLoadPages(0<e.pageSize),this.cancelBufferTask(),e.isLoaded()&&this.onTotalCountChange(e))},onStoreChanged:function(e,t){this.bindStore(t)},getPageData:function(){var e=this.getGrid(),t=e.getStore(),i=t.getTotalCount()||t.getCount(),n=this.getLoadPages()?t.pageSize:e.visibleCount,r=Math.ceil(i/n);return{totalCount:i,totalPages:Ext.Number.isFinite(r)?r:1,currentPage:t.currentPage,pageSize:n}},checkPageChange:function(){var e=this.getGrid(),t=this.getPageSize(),i=this.getCurrentPage(),n=e.topVisibleIndex,r=Math.ceil((n+t)/t);e.getStore()&&!this.getLoadPages()&&0<r&&r!==i&&(this.preventGridScroll=!0,this.setCurrentPage(r),this.preventGridScroll=!1)},updateBuffer:function(e){var t=this.bufferTask;Ext.isNumber(e)?(this.bufferTask=t||new Ext.util.DelayedTask(this.bufferTaskRun,this),this.cancelBufferTask()):t&&(t.cancel(),this.bufferTask=null)},cancelBufferTask:function(){this.bufferTask&&this.bufferTask.cancel()},loadCurrentPage:function(){this.getGrid().getStore().loadPage(this.getCurrentPage())},bufferTaskRun:function(){this.loadCurrentPage()},applyToolbar:function(e,t){return Ext.factory(e,Ext.Toolbar,t)},updateToolbar:function(e){e&&(e.getSliderField().on({change:"onPageChange",dragstart:"onPageSliderDrag",drag:"onPageSliderDrag",dragend:"onPageSliderDragEnd",scope:this}),e.getNextButton().on({tap:"onNextPageTap",scope:this}),e.getPrevButton().on({tap:"onPreviousPageTap",scope:this}))},onPageChange:function(e,t){this.setCurrentPage(t)},onPageSliderDrag:function(e,t,i){this.isDragging=!0,this.setCurrentPage(Ext.isArray(i)?i[0]:i)},onPageSliderDragEnd:function(){this.isDragging=!1,"dragend"!==this.getBuffer()&&!this.bufferTask.Id||(this.cancelBufferTask(),this.loadCurrentPage())},onNextPageTap:function(){var e=this.getCurrentPage()+1;e<=this.getTotalPages()&&this.setCurrentPage(e)},onPreviousPageTap:function(){var e=this.getCurrentPage()-1;0<e&&this.setCurrentPage(e)},onTotalCountChange:function(e){var t=this.getPageData();this.bulkConfigs=!0,this.setConfig(t),this.bulkConfigs=!1,this.syncSummary()},onUpdateVisibleCount:function(e,t){var i,n=e.getStore();n&&!this.getLoadPages()&&(--t,this.setPageSize(t),i=n.getTotalCount()||n.getCount(),this.setTotalPages(Math.ceil(i/t)))},updateTotalPages:function(){this.isConfiguring||this.syncSummary()},updateCurrentPage:function(e){var t=this.isDragging,i=this.bufferTask,n=this.getBuffer();this.isConfiguring||(this.getLoadPages()?i&&Ext.isNumber(n)&&t?i.delay(n):"dragend"===n&&t||this.getGrid().getStore().loadPage(e):this.syncSummary())},updateTotalCount:function(e){this.isConfiguring||this.syncSummary()},getPageTopRecord:function(e){var t=this.getGrid(),i=t&&t.getStore(),n=(e-1)*this.getPageSize();return i&&i.getAt(n)},privates:{syncSummary:function(){var e,t=this.getGrid(),i=this.getToolbar(),n=i.getSliderField(),r=this.getCurrentPage(),s=this.getTotalPages();this.bulkConfigs||(i.getSummaryComponent().element.dom.innerHTML=r+" / "+s,n.setMaxValue(s||1),n.setValue(r),n.setDisabled(s<=1),e=this.getPageTopRecord(r),t&&!this.preventGridScroll&&e&&t.scrollToRecord(e),i.getNextButton().setDisabled(r===s),i.getPrevButton().setDisabled(1===r))}}}),Ext.define("Ext.grid.plugin.RowDragDrop",{extend:Ext.plugin.dd.DragDrop,alias:"plugin.gridrowdragdrop",handle:"."+Ext.baseCSSPrefix+"gridrow",groups:"gridRowGroup",dropIndicator:Ext.baseCSSPrefix+"grid-drop-indicator",dragText:"{0} selected row{1}",dragIcon:!(!Ext.supports.Touch||!Ext.supports.TouchEvents),init:function(e){e.isLockedGrid&&this.addDragIndicator(e),e.on("initialize",this.onViewInitialize,this)},onViewInitialize:function(e){var t=this,i={};t.enableDrag&&(t.proxy&&(i.proxy=t.proxy),t.activateOnLongPress&&(i.activateOnLongPress=t.activateOnLongPress),t.dragZone=new Ext.grid.GridDragZone(Ext.apply({element:e.bodyElement,view:e,dragText:t.dragText,handle:t.handle,groups:t.groups,scrollAmount:t.scrollAmount,containerScroll:t.containerScroll,constrain:Ext.getBody()},i))),t.enableDrop&&(t.dropZone=new Ext.grid.GridDropZone({view:e,element:e.bodyElement,groups:t.groups,dropIndicator:t.dropIndicator,overCls:t.overCls,copy:t.copy})),e.isLockedGrid||t.addDragIndicator(e)},addDragIndicator:function(e){this.dragIcon&&(e.isLockedGrid?e.on({columnremove:"onColumnRemove",createregion:"onCreateRegion",scope:this}):e.insertColumn&&e.insertColumn(0,{xtype:"dragcolumn"}))},onCreateRegion:function(e,t){return(t=Ext.Array.from(t)).length&&!e.hasDragColumn&&(t=Ext.Array.insert(t,0,[{xtype:"dragcolumn"}]),e.hasDragColumn=!0),t},onColumnRemove:function(e,t){this.cmp.hasDragColumn&&!t.isDragColumn&&Ext.asap(this.handleColumnMove,this)},handleColumnMove:function(){var e,t,i=this.cmp,n=i.query("dragcolumn")[0];n&&(-1!==(t=(e=i.getRegion("left").getGrid()).getColumns()).indexOf(n)&&1===t.length?i.getRegion("center").getGrid().insertColumn(0,n):t.length&&-1===t.indexOf(n)&&e.insertColumn(0,n))}}),Ext.define("Ext.grid.plugin.RowExpander",{extend:Ext.plugin.Abstract,alias:"plugin.rowexpander",config:{grid:null,column:{weight:-1100,xtype:"gridcolumn",align:"center",text:"",width:50,resizable:!1,hideable:!1,sortable:!1,editable:!1,ignore:!0,ignoreExport:!0,cell:{xtype:"expandercell"},menuDisabled:!0}},expanderSelector:"."+Ext.baseCSSPrefix+"expandercell ."+Ext.baseCSSPrefix+"icon-el",init:function(e){e.setVariableHeights(!0),this.setGrid(e)},destroy:function(){var e=this.getGrid(),t=this.colInstance;t&&!e.destroying&&e.unregisterColumn(t,!0),this.callParent()},applyColumn:function(e,t){return Ext.factory(Ext.apply({},e),null,t)},updateGrid:function(e){e&&(e.hasRowExpander=!0,e.addCls(Ext.baseCSSPrefix+"has-rowexpander"),this.colInstance=e.registerColumn(this.getColumn()),e.refreshScrollerSize(),e.element.on({tap:"onGridTap",delegate:this.expanderSelector,scope:this}))},onGridTap:function(e){var t=Ext.Component.from(e).row;t.getGrid()===this.getGrid()&&t.toggleCollapsed()}}),Ext.define("Ext.grid.plugin.RowOperations",{extend:Ext.plugin.Abstract,alias:["plugin.rowoperations","plugin.multiselection","plugin.gridmultiselection"],alternateClassName:"Ext.grid.plugin.MultiSelection",config:{operation:{lazy:!0,$value:{xtype:"button",ui:"alt decline",align:"right",handler:"me.onOperationTap",margin:"0 0 0 10"}},selectButton:{lazy:!0,$value:{xtype:"button",ui:"alt",align:"right",margin:"0 0 0 10"}},selectionColumn:{sortable:!1},useTriggerButton:!0,triggerText:"Select",cancelText:"Done",deleteText:"Delete",disableSelection:!0,selecting:null},init:function(e){this.useSelectButton()||this.setSelecting(!0),this.getDisableSelection()&&e.setDisableSelection(!0)},destroy:function(){this.setOperation(null),this.setSelectButton(null),this.callParent()},getRecords:function(){return this.cmp.getSelections()},onOperationTap:function(){this.deleteSelectedRecords()},onTriggerTap:function(){this.setSelecting(!this.getSelecting())},applyOperation:function(e,t){return Ext.updateWidget(t,e,this,"createOperation")},createOperation:function(e){var t=Ext.apply({text:this.getDeleteText()},e);return t.plugin=this,"me.onOperationTap"===t.handler&&(t.handler="onOperationTap",t.scope=this),t},updateOperation:function(e){var t,i,n;e&&(t=this.useSelectButton(),(i=this.cmp.getTitleBar())&&(t?(n=t.getParent(),i.insert(n.indexOf(t),e)):i.add(e)))},applySelectButton:function(e,t){return Ext.updateWidget(t,e,this,"createSelectButton")},createSelectButton:function(e){var t=Ext.apply({text:this.getTriggerText()},e);return t.handler="onTriggerTap",t.scope=this,t},updateSelectButton:function(e){e&&this.cmp.getTitleBar().add(e)},updateSelecting:function(e){var t=this.cmp,i=this.getDisableSelection(),n=this.getOperation(),r=this.useSelectButton(),s=t.getSelectable();n&&n.setHidden(!e),r&&r.setText(e?this.getCancelText():this.getTriggerText()),i&&t.setDisableSelection(!e),s.setCheckbox(e&&this.getSelectionColumn()),s.setMode(e?"multi":"single"),!i&&e||s.deselectAll()},privates:{deleteSelectedRecords:function(){var e=this.getRecords();this.cmp.getStore().remove(e)},useSelectButton:function(){var e=this.cmp.getTitleBar();return this.getUseTriggerButton()&&e&&e.getTitle()&&this.getSelectButton()}}}),Ext.define("Ext.grid.plugin.Summary",{extend:Ext.plugin.Abstract,alias:["plugin.gridsummary","plugin.summaryrow","plugin.gridsummaryrow"],alternateClassName:"Ext.grid.plugin.SummaryRow",mixins:[Ext.mixin.Bufferable,Ext.mixin.StoreWatcher],config:{row:{lazy:!0,$value:{xtype:"gridsummaryrow",docked:"bottom"}}},inheritUi:!0,storeListeners:{add:"syncSummary",clear:"syncSummary",remove:"syncSummary",refresh:"syncSummary",update:"syncSummary"},bufferableMethods:{syncSummary:5},init:function(e){var t,i,n=e.getScrollable();this.setOwner(e),t=this.getRow(),e.addCls(Ext.baseCSSPrefix+"grid-has-summaryrow"),n&&((i=t.getScrollable())||(t.setScrollable({x:!1,y:!1}),i=t.getScrollable()),i.addPartner(n,"x"))},destroy:function(){this.setOwner(null),this.callParent()},createRow:function(e){return Ext.apply({viewModel:this.getOwner().getItemConfig().viewModel},e)},applyRow:function(e){return e&&(e=this.createRow(e),e=this.cmp.add(e)),e},updateStore:function(e,t){this.mixins.storewatcher.updateStore.call(this,e,t),e&&e.isLoaded()&&this.syncSummary()},privates:{doSyncSummary:function(){var e=this.getRow();e&&e.syncSummary()},onContainerScroll:function(e,t){var i,n=this.getRow();(i=n.getScrollable())||(n.setScrollable({x:!1,y:!1}),i=n.getScrollable()),i.scrollTo(t,null)}}}),Ext.define("Ext.grid.plugin.ViewOptionsListItem",{extend:Ext.dataview.SimpleListItem,xtype:"viewoptionslistitem",toolDefaults:{hideMode:"visibility"},tools:{handle:{zone:"start",cls:Ext.baseCSSPrefix+"no-ripple",iconCls:Ext.baseCSSPrefix+"column-options-sortablehandle"},icon:{zone:"start",iconCls:""},group:{zone:"end",iconCls:Ext.baseCSSPrefix+"column-options-groupindicator",stopEvent:!1},hide:{zone:"end",iconCls:Ext.baseCSSPrefix+"column-options-visibleindicator",stopEvent:!1}},cls:Ext.baseCSSPrefix+"column-options-item",updateRecord:function(e,t){var i=this;e&&(i.callParent([e,t]),i.toggleCls(i.hiddenColumnCls,e.get("hidden")),i.toggleCls(i.groupedColumnCls,e.get("grouped")),i.lookupTool("icon").setIconCls(e.get("header")?i.headerCls:i.leafCls),i.lookupTool("group").setHidden(!e.get("groupable")),i.lookupTool("hide").setHidden(!e.get("hideable")))},privates:{groupedColumnCls:Ext.baseCSSPrefix+"column-options-grouped",headerCls:Ext.baseCSSPrefix+"column-options-folder",hiddenColumnCls:Ext.baseCSSPrefix+"column-options-hidden",leafCls:Ext.baseCSSPrefix+"column-options-leaf"}}),Ext.define("Ext.grid.plugin.ViewOptions",{extend:Ext.plugin.Abstract,alias:"plugin.gridviewoptions",config:{grid:null,sheetWidth:320,sheet:{lazy:!0,$value:{xtype:"sheet",cls:Ext.baseCSSPrefix+"gridviewoptions",items:[{docked:"top",xtype:"titlebar",title:"Customize",items:[{xtype:"button",text:"Done",ui:"action",align:"right",role:"donebutton"}]}],hidden:!0,hideOnMaskTap:!0,enter:"right",exit:"right",modal:!0,right:0,layout:"fit",stretchY:!0}},columnList:{lazy:!0,$value:{xtype:"nestedlist",title:"Columns",clearSelectionOnListChange:!1,listConfig:{triggerEvent:null,infinite:!0,mode:"MULTI",variableHeights:!0,scrollToTopOnRefresh:!1,plugins:{sortablelist:{source:{handle:"."+Ext.baseCSSPrefix+"column-options-sortablehandle"}}},itemConfig:{xtype:"viewoptionslistitem"},itemTpl:"{text}"},store:{type:"tree",fields:["id","text","dataIndex","header","hidden","hideable","grouped","groupable"],root:{text:"Columns"}}}},visibleIndicatorSelector:"."+Ext.baseCSSPrefix+"column-options-visibleindicator",groupIndicatorSelector:"."+Ext.baseCSSPrefix+"column-options-groupindicator"},init:function(e){this.setGrid(e)},destroy:function(){this.destroyMembers("sheet","columnList"),this.callParent()},updateGrid:function(e,t){t&&(t.getHeaderContainer().renderElement.un({contextmenu:"onHeaderContextMenu",longpress:"onHeaderLongPress",scope:this}),t.un({columnadd:"onColumnAdd",columnmove:"onColumnMove",columnremove:"onColumnRemove",columnhide:"onColumnHide",columnshow:"onColumnShow",scope:this})),e&&e.getHeaderContainer().renderElement.on({contextmenu:"onHeaderContextMenu",longpress:"onHeaderLongPress",scope:this})},applySheet:function(e){return e&&!e.isComponent&&(e=Ext.factory(e,Ext.Sheet)),e},applyColumnList:function(e){return e&&!e.isComponent&&(e=Ext.factory(e,Ext.Container)),e},updateColumnList:function(e){e&&(e.on({listchange:"onListChange",scope:this}),e.on("dragsort","onColumnDrag",this,{delegate:"> list"}),this.attachTapListeners())},updateSheet:function(e){e.setWidth(this.getSheetWidth()),e.add(this.getColumnList()),e.on("hide","onSheetHide",this)},onDoneButtonTap:function(){this.getSheet().hide()},onColumnDrag:function(e,t,i){var n,r,s,o=Ext.getCmp(t.getRecord().get("id")),a=o.getParent(),l=a.getInnerItems();for(n=0,r=i;n<r;n++)!(s=l[n]).isHeaderGroup&&s.getIgnore()&&(i+=1);this.isMoving=!0,a.insert(i,o),this.isMoving=!1},attachTapListeners:function(){var e=this.getColumnList().getActiveItem();e.hasAttachedTapListeners||(e.onBefore({childtap:"onListChildTap",scope:this}),e.hasAttachedTapListeners=!0)},onListChange:function(e,t){var i,n,r,s=t.getStore().getNode().childNodes,o=s.length;for(i=0;i<o;i++)r=s[i],n=Ext.getCmp(r.getId()),r.set("hidden",n.isHidden());this.attachTapListeners()},onListChildTap:function(e,t){var i=!1,n=t.event;return Ext.fly(n.target).is(this.getVisibleIndicatorSelector())?(this.onVisibleIndicatorTap(t.row,t.record),i=!0):Ext.fly(n.target).is(this.getGroupIndicatorSelector())&&(this.onGroupIndicatorTap(t.row,t.record),i=!0),!i},onVisibleIndicatorTap:function(e,t){var i=!t.get("hidden"),n=Ext.getCmp(t.get("id")),r=this.getGrid().getVisibleColumns().length;(1<r||r&&n.isHidden())&&(n.setHidden(i),t.set("hidden",i))},onGroupIndicatorTap:function(e,t){var i=!t.get("grouped"),n=this.getGrid().getStore();this.getListRoot().cascade(function(e){e.set("grouped",!1)}),i?(n.setGrouper({property:t.get("dataIndex")}),t.set("grouped",!0)):n.setGrouper(null)},onColumnHide:function(e,t){var i=this.getColumnList().getActiveItem().getStore().getById(t.getId());i&&i.set("hidden",!0)},onColumnShow:function(e,t){var i=this.getColumnList().getActiveItem().getStore().getById(t.getId());i&&i.set("hidden",!1)},onColumnAdd:function(e,t){var i,n,r,s,o,a,l,c,u,d;t.getIgnore()||this.isMoving||(i=this.getColumnList(),n=e.getHeaderContainer(),r=t.getParent(),s=i.getStore().getRoot(),o=e.getGrouped(),a=e.getStore().getGrouper(),l=t.getDataIndex(),c={id:t.getId(),text:t.getText()||"",groupable:o&&t.canGroup(),hidden:t.isHidden(),hideable:t.getHideable(),grouped:!(!o||!a||a.getProperty()!==l),dataIndex:t.getDataIndex(),leaf:!0},r!==n?((d=s.findChild("id",r.getId()))||(u=r.getParent().indexOf(r),d=s.insertChild(u,{groupable:!1,header:!0,hidden:r.isHidden(),id:r.getId(),text:r.getText()})),u=r.indexOf(t),s=d):u=n.indexOf(t),s.insertChild(u,c))},onColumnMove:function(e,t,i){this.onColumnRemove(e,t),this.onColumnAdd(e,t,i)},onColumnRemove:function(e,t){var i;t.getIgnore()||this.isMoving||(i=this.getListRoot().findChild("id",t.getId(),!0))&&i.parentNode.removeChild(i,!0)},onHeaderContextMenu:function(e){e.preventDefault()},onHeaderLongPress:function(e){this.getSheet().isVisible()||this.showViewOptions()},hideViewOptions:function(){var e=this.getSheet();this.getGrid().getHeaderContainer().setSortable(this.cachedSortable),delete this.cachedSortable,e.hide()},onSheetHide:function(){this.hideViewOptions()},showViewOptions:function(){var e,t=this.getSheet();this.setup(),t.isVisible()||(e=this.getGrid().getHeaderContainer(),this.cachedSortable=e.getSortable(),e.setSortable(!1),this.updateListInfo(),t.show())},privates:{getListRoot:function(){return this.getColumnList().getStore().getRoot()},setup:function(){var t=this,i=t.getGrid();t.doneSetup||(t.doneSetup=!0,this.getListRoot().removeAll(),i.getColumns().forEach(function(e){t.onColumnAdd(i,e)}),i.on({columnadd:"onColumnAdd",columnmove:"onColumnMove",columnremove:"onColumnRemove",columnhide:"onColumnHide",columnshow:"onColumnShow",scope:t}),t.getSheet().down("button[role=donebutton]").on({tap:"onDoneButtonTap",scope:t}))},updateListInfo:function(){var e=this.getGrid(),t=e.getStore().getGrouper(),n=e.getGrouped(),r=t&&t.getProperty();this.getColumnList().getStore().getRoot().cascade(function(e){var t,i=!1;n&&(i=(t=e.get("dataIndex"))&&t===r),e.set("grouped",t&&i)})}}}),Ext.define("Ext.grid.rowedit.Bar",{extend:Ext.Panel,xtype:"roweditorbar",isRowEditorBar:!0,mixins:[Ext.mixin.Bufferable],config:{active:null,defaultCellUI:null,grid:null},layout:{type:"hbox"},autoSize:!0,scrollable:{monitorScroll:!0,x:!1,y:!1},ui:"roweditor",bufferableMethods:{syncColumns:50},gridHeaderListeners:null,gridListeners:null,doDestroy:function(){this.setActive(!1),this.callParent()},commit:function(){this.eachEditor(function(e,t){t.commit(e)})},eachEditor:function(e){var t,i,n,r,s=this.items.items;for(i=0;i<s.length&&(!(n=s[i]).$hasValue||!(t=n.$driver)||!1!==(r=e(n,t)));++i);return r},getEditorValues:function(i,n){return this.eachEditor(function(e,t){(n||e.$hasValue&&e.isDirty())&&((i=i||{})[e.$column.getDataIndex()]=t.get(e))}),i},getDriver:function(e){var t,i=this.plugin.getDrivers(),n=i[e.xtype],r=i.default,s=e.xtypes;if(e.driver&&(n=Ext.apply({},i[e.driver],n)),s)for(t=0;!n&&t<s.length;++t)n=i[s[t]];return n&&n!==r&&(n=Ext.apply({},n,r)),n||r},hasVerticalScroller:function(){var e=this.grid,t=e.region,i=t&&t.lockedGrid;return!i||e===(i=i.visibleGrids)[i.length-1]},isClean:function(){return!this.isDirty()},isDirty:function(){var t=!1;return this.eachEditor(function(e){return!(t=e.isDirty())}),t},isValid:function(){var t=!1;return this.eachEditor(function(e){return t=e.validate()}),t},onHorizontalOverflowChange:function(){this.syncTop()},onScroll:function(e,t){t.y!==t.oldY&&this.syncTop()},onVerticalOverflowChange:function(){this.hasVerticalScroller()&&this.parent.syncWidth()},onVisibleHeightChange:function(){this.syncTop()},resetChanges:function(){this.eachEditor(function(e,t){t.reset(e)})},setFieldValues:function(n){this.eachEditor(function(e,t){var i=e.$column.getDataIndex();i in n&&t.set(e,n[i])})},updateActive:function(e){var t,i,n,r,s=this,o=s.grid;!o||o.destroying?e=!1:(t=o.getScrollable(),r=s.getScrollable()),s.gridListeners=s.gridHeaderListeners=s.gridRegionListeners=Ext.destroy(s.gridListeners,s.gridHeaderListeners,s.gridRegionListeners),e?(s.syncColumns(),r.scrollTo(t.getPosition().x,null),t.addPartner(r,"x"),s.gridListeners=o.on({scope:s,destroyable:!0,horizontaloverflowchange:"onHorizontalOverflowChange",scroll:"onScroll",verticaloverflowchange:"onVerticalOverflowChange",visibleheightchange:"onVisibleHeightChange"}),(n=o.region)&&n.isLockedGridRegion&&(s.gridRegionListeners=n.el.on({scope:s,destroyable:!0,resize:"syncColumns"})),s.gridHeaderListeners=o.getHeaderContainer().on({scope:s,destroyable:!0,columnadd:"syncColumns",columnhide:"syncColumns",columnmove:"syncColumns",columnremove:"syncColumns",columnresize:"syncColumns",columnshow:"syncColumns"})):((i=s.query("> [isRowEditorItem!=true]")).length&&s.remove(i,!1),t&&t.removePartner(r))},updateGrid:function(e,t){this.grid=e,this.getActive()&&this.updateActive(!0)},updateRecord:function(){this.syncColumns()},doSyncColumns:function(){var e,t,i,n,r,s,o,a=this,l=a.grid,c=a.getRecord(),u=a.items.items;if(l&&!l.destroying&&((s=l.region)&&s.lockedGrid&&(o=s.measure("w"),l.getVerticalOverflow()&&a.hasVerticalScroller()&&(o-=Ext.scrollbar.width()),a.setWidth(Math.floor(o))),c)){for(e=l.getHeaderContainer().getVisibleColumns(),t={editors:[],gap:0,gaps:a.query("> roweditorgap"),index:0,record:c,total:0},i=0,r=e.length;i<r;++i)a.syncColumn(e[i],t);for(i=t.index;i<u.length;)(n=u[i]).isRowEditorItem?n.destroy():a.remove(n,!1);a.lastSyncRecord=c,a.getScrollable().setSize(t.total,0)}},syncColumn:function(e,t){var i,n,r,s,o=this.plugin.getAdapters(),a=o.default,l=o[e.getCell().xtype],c=e.$editorItemId,u=e.getDataIndex(),d=t.record,h=e.getComputedWidth(),f=t.gap;t.total+=h,s=d.data[u],c&&(i=this.getComponent(c))?this.lastSyncRecord!==d&&((n=i.$driver).read&&(s=n.read(d,e,this)),i._validationRecord=d,n.set(i,s),n.commit(i)):((i=e.ensureEditor())?(n=this.getDriver(i),c=i.getId(),i._validationRecord=d,i.$hasValue=!0,i.addUi("celleditor"),n.set(i,s),n.commit(i)):(null!==l&&(i=Ext.apply({itemId:c=e.getId(),align:e.getAlign(),column:e,width:h},l,a),n=this.getDriver(i)),n&&n.read?s=n.read(d,e,this):u||(l=null),null!==l?i[n.prop]=n.convert(s,e):(i=null,t.gap+=h)),i&&(e.$editorItemId=c,i.$driver=n)),i&&(f&&((r=t.gaps.pop())?r.setWidth(f):r=Ext.apply({xtype:"roweditorgap",width:f},a),this.insert(t.index++,r),t.gap=0),(i=this.insert(t.index++,i)).setWidth(h),i.isRowEditorCell&&(i.$column=e))},syncTop:function(){this.parent.unanimated().syncTop()}}),Ext.define("Ext.grid.rowedit.Cell",{extend:Ext.Component,xtype:"roweditorcell",isRowEditorCell:!0,isRowEditorItem:!0,config:{align:null,column:null},cls:Ext.baseCSSPrefix+"roweditorcell",updateAlign:function(e){this.setUserCls(Ext.grid.cell.Base.prototype.alignCls[e])}}),Ext.define("Ext.plugin.TabGuard",{extend:Ext.plugin.Abstract,alias:"plugin.tabguard",tabGuard:!0,tabGuardTemplate:[{tag:"span","aria-hidden":"true",cls:Ext.baseCSSPrefix+"tab-guard-el"}],tabGuardElements:{before:"tabGuardBeforeEl",after:"tabGuardAfterEl"},init:function(e){var t=this;t.decorateComponent(e),e.addTool&&(e.addTool=Ext.Function.createSequence(e.addTool,t.maybeInitTabGuards,t)),e.add&&(e.add=Ext.Function.createSequence(e.add,t.maybeInitTabGuards,t)),e.remove&&(e.remove=Ext.Function.createSequence(e.remove,t.maybeInitTabGuards,t)),e.onRender=Ext.Function.createSequence(e.onRender,t.maybeInitTabGuards,t),e.getTabGuard=t.getTabGuard.bind(t),e.on("show",t.initTabGuards,t)},destroy:function(){var e=this.getCmp();e&&(delete e.addTool,delete e.add,delete e.remove),this.callParent()},privates:{decorateComponent:function(e){var t=this.tabGuardTemplate;(e=e||this.getCmp())[this.tabGuardElements.before]=e.el.insertFirst(t),e[this.tabGuardElements.after]=e.el.createChild(t)},getTabGuard:function(e){return this.getCmp()[this.tabGuardElements[e]]},maybeInitTabGuards:function(){var e=this.getCmp();e.rendered&&e.initialized&&e.tabGuard&&this.initTabGuards()},initTabGuards:function(){var e,t,i,n=this.getCmp(),r=this.tabGuardBeforeIndex||0,s=this.tabGuardAfterIndex||0,o=this.getTabGuard("before"),a=this.getTabGuard("after");if(n.rendered&&n.tabGuard){if((i=n.el.findTabbableElements({skipSelf:!0}))[0]===o.dom&&i.shift(),i[i.length-1]===a.dom&&i.pop(),i&&i.length){if(null==r||null==s)for(e=0;e<i.length;e++)0<(t=+i[e].getAttribute("tabIndex"))&&(r=Math.min(r,t),s=Math.max(s,t));o.dom.setAttribute("tabIndex",r),a.dom.setAttribute("tabIndex",s)}else o.dom.removeAttribute("tabIndex"),a.dom.removeAttribute("tabIndex");o.hasListeners.focusenter||o.on("focusenter",this.onTabGuardFocusEnter,n),a.hasListeners.focusenter||a.on("focusenter",this.onTabGuardFocusEnter,n)}},onTabGuardFocusEnter:function(e,t){var i,n,r,s=this.el,o=this.getTabGuard("before"),a=this.getTabGuard("after"),l=e.relatedTarget;(i=s.findTabbableElements({skipSelf:!0}))[0]===o.dom&&i.shift(),i[i.length-1]===a.dom&&i.pop(),0===i.length?r=s:n=l!==s.dom&&s.contains(l)?!!e.forwardTab:t===o.dom,(r=r||(n?i[0]:i[i.length-1]))&&Ext.fly(r).focus(1===i.length?1:0)}}}),Ext.define("Ext.grid.rowedit.Editor",{extend:Ext.dataview.ListItem,xtype:"roweditor",isRowEditor:!0,mixins:[Ext.mixin.StoreWatcher,Ext.panel.Buttons],ownerProperty:"grid",config:{buttonContainer:{xtype:"panel",ui:"roweditor-buttons",alignSelf:"center",border:!0,bodyBorder:!1,defaultType:"button",top:40,weighted:!0,layout:{type:"hbox",align:"center"}},minButtonWidth:null},classCls:Ext.baseCSSPrefix+"roweditor",buttonCtCls:Ext.baseCSSPrefix+"roweditor-button-ct",bubbleDirty:!1,defaultType:"roweditorbar",html:null,nameHolder:!0,plugins:"tabguard",tabGuard:!0,keyMap:{ESC:"cancel",ENTER:"saveAndClose","CmdOrCtrl+Enter":"onSaveAndNext","CmdOrCtrl+Down":"onNextRecord","CmdOrCtrl+Up":"onPrevRecord",HOME:"onHome",END:"onEnd",PAGE_DOWN:"onPageDown",PAGE_UP:"onPageUp",scope:"this"},layout:{type:"hbox"},storeListeners:{refresh:"onStoreRefresh"},activeLocation:null,activeRange:null,recordIndex:-1,initialize:function(){this.callParent(),this.el.on({keydown:function(e){e.stopPropagation()}})},cancel:function(){this.hide()},getChanges:function(){return this.getEditorValues(!1)},getEditItem:function(e){var t=null,i=e.$editorItemId;return i&&this.eachBar(function(e){return!(t=e.getComponent(i))}),t},getEditorValues:function(e){var t={};return e=!1!==e,this.eachBar("getEditorValues",[t,e]),e||!Ext.Object.isEmpty(t)?t:null},isDirty:function(){return!1===this.eachBar("isClean")},isValid:function(){return this.eachBar("isValid")&&!1!==this.parent.fireEvent("validateedit",this.activeLocation)},resetChanges:function(){this.eachBar("resetChanges")},revertChanges:function(){var e=this.getRecord();this.resetChanges(),(e=e&&e.modified)&&this.setFieldValues(e)},saveAndClose:function(){this.saveChanges(!0)&&this.hide()},setFieldValues:function(e){this.eachBar("setFieldValues",[e])},updateButtons:function(e){e&&e.addCls(this.buttonCtCls)},updateHidden:function(e,t){var i=this.plugin,n=!e,r=this.activeLocation;this.callParent([e,t]),(i.editing=n)?this.unanimated():(r&&!i.grid.destroying&&i.grid.setLocation(r),this.setRecord(null)),this.eachBar("setActive",[n]),n&&this.ensureFocus()},updateRecord:function(e,t){var i,n,r=this,s=r.activeLocation,o=r.activeRange,a=r.destroying;r.callParent([e,t]),r.eachBar("setRecord",[e]),e?(n=r.grid.store,o&&o.store!==n&&(o=Ext.destroy(o)),o||(r.activeRange=o=n.createActiveRange()),r.recordIndex=i=n.indexOf(e),o.goto(i,i+1),r.syncTop(),r.ensureFocus(),r.activeLocation.fireEditEvent("beginedit",r)):(s&&!a&&s.fireEditEvent("canceledit",r),r.activeLocation=r.activeRange=Ext.destroy(o),a||r.setHidden(!0))},onAdded:function(e){var t,i,n,r,s=e.visibleGrids;if(e.isLockedGrid)for(r=0;r<s.length;++r)t=(i=(n=s[r]).getFlex())?{flex:i}:{width:n.getWidth()},this.trackGrid(n,t);else this.trackGrid(e,{flex:1})},onEnd:function(){this.gotoRecord(this.grid.store.getCount()-1)},onHome:function(){this.gotoRecord(0)},onNextRecord:function(){this.gotoRecord(this.recordIndex+1)},onPageDown:function(){this.advancePage(1)},onPageUp:function(){this.advancePage(-1)},onPrevRecord:function(){this.gotoRecord(this.recordIndex-1)},onResize:function(e,t){this.$height=t,this.syncTop(),this.syncWidth()},onSaveAndNext:function(){var e=this.grid.store,t=this.recordIndex+1;this.saveChanges(!0)&&(t<e.getCount()?this.plugin.startEdit(e.getAt(t)):this.hide())},onStoreRefresh:function(){this.cancel()},adjustButtons:function(e,t){return this.normalizeButtonBar(e,t,null,this.getButtonContainer())},advancePage:function(e){var t=this.plugin.pickGrid(),i=t.store,n=Math.floor(t.getVisibleHeight()/t.rowHeight),r=this.recordIndex+n*e;r=Math.max(0,Math.min(r,i.getCount()-1)),this.gotoRecord(r)},beforeEdit:function(e){var t,i,n=this.plugin,r=this.getRecord(),s=r&&r.phantom,o=n.$autoConfirm,a=this.isDirty(),l=!0;return r!==e.record&&(r&&this.isVisible()&&(s||a)?((o=s?a?o.populated:o.new:o.updated)?!0===o&&(t=!0):(l=!1,(i=n.getDirtyText())&&Ext.toast(i)),l&&(!1===e.beforeEdit(this)?l=!1:t&&(l=this.saveChanges()))):!1===e.beforeEdit(this)&&(l=!1),l)},gotoRecord:function(e){var t=this.grid.store;0<=e&&e<t.getCount()&&this.plugin.startEdit(t.getAt(e))},startEdit:function(e){var t;this.activeLocation=t=e.clone(),(t.editor=this).setRecord(e.record),this.getHidden()&&(this.show(),this.ensureFocus())},privates:{commit:function(){this.eachBar("commit")},eachBar:function(e,t){var i,n,r,s,o=this.items,a="function"==typeof e;for(o=o&&o.items,a&&(t=t?t.slice():[]).unshift(null),i=0,r=o&&o.length;i<r&&(!(n=o[i]).isRowEditorBar||!1!==(s=a?(t[0]=n,e.apply(null,t)):n[e].apply(n,t)));++i);return s},ensureFocus:function(){var e;this.rendered&&!this.getHidden()&&(this.eachBar("flushSyncColumns"),(e=this.down(":focusable:not(button)"))&&e.focus())},getPositionedItemTarget:function(){return this.el},saveChanges:function(e){var t,i,n,r=this.isValid();return r?((i=this.getChanges())&&this.getRecord().set(i),(t=this.activeLocation).commit=e,t.fireEditEvent("edit",this),t.commit&&this.commit(),t.commit=null):(n=this.plugin.getInvalidToastMessage())&&Ext.toast(n),r},syncBtnTop:function(){var e,t,i=this.el,n=this.getButtons(),r=n.bodyElement,s=n.el,o=s.measure("h"),a=this.plugin,l=a.grid,c=a.pickGrid(),u=this.getTop(),d=this.$height,h=i.getBorderWidth("tb");l.isLockedGrid&&(u-=c.getHeaderContainer().measure("h")),t=u+d+o<c.getVisibleHeight()?(e=d-h-s.getBorderWidth("t")-r.getBorderWidth("t"),"-below"):(e=s.getBorderWidth("b")+r.getBorderWidth("b")-o+h,"-above"),this.setCls(this.buttonCtCls+t),s.setTop(e)},syncTop:function(){var e,t,i,n,r,s,o=this.plugin,a=o.pickGrid(),l=o.grid,c=this.$height,u=this.getRecord(),d=0;u&&(t=a.mapToItem(u),i=r=a.getVisibleHeight(),s=a.getScrollable().getPosition().y,l.getHorizontalOverflow()&&(i-=Ext.scrollbar.height()),a.infinite&&(n=t?t.$y0-s:this.recordIndex<a.getTopRenderedIndex()?0:r),a.isGrouping()&&((e=a.getPinnedHeader())&&e.$height&&(d=e.$height),(e=a.getPinnedFooter())&&e.$height&&(i-=e.$height)),n=Math.max(d,Math.min(n,i-(c||0))),l.isLockedGrid&&(n+=a.getHeaderContainer().measure("h")),this.setTop(n),null!=c&&this.syncBtnTop())},syncWidth:function(){this.setRight(this.grid.getVerticalOverflow()?Ext.scrollbar.width():0)},trackGrid:function(e,t){this.add(Ext.apply({grid:e,plugin:this.plugin,record:this.getRecord()},t))},unanimated:function(){var e=this,t=Ext.baseCSSPrefix+"no-transition";return e.addCls(t),Ext.defer(function(){e.destroyed||e.removeCls(t)},50),e}}}),Ext.define("Ext.grid.rowedit.Gap",{extend:Ext.Component,xtype:"roweditorgap",isRowEditorGap:!0,isRowEditorItem:!0,cls:Ext.baseCSSPrefix+"roweditorgap"}),Ext.define("Ext.grid.rowedit.Plugin",{extend:Ext.plugin.Abstract,alias:"plugin.rowedit",config:{dirtyText:"You need to commit or cancel your changes",editor:{lazy:!0,$value:{xtype:"roweditor"}},invalidToastMessage:"Cannot save invalid data",triggerEvent:"doubletap",grid:null},cachedConfig:{autoConfirm:"discard",buttons:{ok:{iconCls:"fi-check",text:null,handler:"up.saveAndClose",tooltip:"Save changes and close editor"},cancel:{iconCls:"fi-times",text:null,handler:"up.cancel",tooltip:"Close editor, discarding any changes"},reset:{iconCls:"fi-refresh",text:null,handler:"up.resetChanges",margin:"0 0 0 8",tooltip:"Reset editor to initially displayed values",weight:200},revert:{iconCls:"fi-undo",text:null,handler:"up.revertChanges",margin:"0 0 0 8",tooltip:"Reset editor to record's original values",weight:210}},confirmation:{reset:"Are you sure you want to discard the current edits?",revert:"Are you sure you want to revert all edits to this record?"},adapters:{default:{xtype:"roweditorcell"},checkcell:{xtype:"checkbox",isRowEditorCell:!0,bodyAlign:"center",label:null,$hasValue:!0},rownumberercell:{driver:"rownumber"},expandercell:null,widgetcell:null},drivers:{default:{prop:"value",commit:function(e){e.resetOriginalValue()},convert:Ext.identityFn,get:function(e){return e.getValue()},reset:function(e){e.reset()},set:function(e,t){e.forceSetValue?e.forceSetValue(t):e.setValue(t)}},checkbox:{prop:"checked",convert:function(e){return!!e},get:function(e){return e.getChecked()},set:function(e,t){e.setChecked(t)}},rownumber:{read:function(e,t,i){return t.printValue(i.parent.recordIndex+1)}},roweditorcell:{prop:"html",commit:Ext.emptyFn,convert:function(e,t){return Ext.htmlEncode(t.printValue(e))},get:function(e){return Ext.htmlDecode(e.getHtml())},reset:Ext.emptyFn,set:function(e,t){e.setHtml(this.convert(t,e.getColumn()))}}}},editing:!1,constructor:function(e){this.callParent([e||{}])},init:function(e){this.callParent([e]),this.setGrid(e)},doDestroy:function(){this.editing=!1,this.setEditor(null),this.setGrid(null),this.callParent()},cancelEdit:function(){this.editing&&this.getEditor().cancel()},completeEdit:function(){this.editing&&this.getEditor().saveAndClose()},startEdit:function(e,t){var i=this.getEditor(),n=e;return n.isLocation||(n=this.grid.createLocation({record:e,column:t})),this.grid.ensureVisible(n.record),!(!n.record||!1===i.beforeEdit(n))&&(i.startEdit(n),!0)},updateAutoConfirm:function(i){var n;Ext.isObject(i)?("updated"in(n=Ext.apply({},i))||(n.updated="discard"),"new"in n||(n.new=n.updated),"populated"in n||(n.populated=n.new)):n={new:i,populated:i,updated:i},Ext.each(["new","populated","updated"],function(e){var t=n[e];"boolean"!=typeof t&&"discard"!==t&&Ext.raise("Invalid autoConfirm"+(Ext.isObject(i)?"."+e:"")+' value "'+t+'"')}),this.$autoConfirm=n},applyEditor:function(e,t){return Ext.updateWidget(t,e,this,"createEditor")},createEditor:function(e){var t=this.getGrid();return Ext.apply({$initParent:t,owner:t,parent:t,plugin:this,hidden:!0,buttons:this.getButtons(),left:0,right:0,top:0},e)},updateEditor:function(e){(this.editor=e)&&this.getGrid().add(e)},updateGrid:function(e,t){this.grid=e,t&&!t.destroying&&t.unregisterActionable(this),e&&e.registerActionable(this)},activateCell:function(e){this.startEdit(e)},pickGrid:function(){var e=this.grid;return e.isLockedGrid&&(e=e.regionMap.center.getGrid()),e}}),Ext.define("Ext.menu.Separator",{extend:Ext.Component,xtype:"menuseparator",isMenuSeparator:!0,focusable:!1,classCls:Ext.baseCSSPrefix+"menuseparator",ariaRole:"separator"}),Ext.define("Ext.theme.material.navigation.Bar",{override:"Ext.navigation.Bar",config:{defaultBackButtonText:"",useTitleForBackButtonText:!1,backButton:{align:"left",ui:"back",hidden:!0,iconCls:"md-icon-arrow-back"}}}),Ext.define("Ext.panel.Header",{extend:Ext.Container,xtype:"panelheader",isPanelHeader:!0,config:{icon:null,iconAlign:null,iconCls:null,titleRotation:"auto",title:null,titleAlign:null,layout:{type:"box",vertical:!1,align:"center"},position:null},autoSize:null,classCls:Ext.baseCSSPrefix+"panelheader",verticalCls:Ext.baseCSSPrefix+"vertical",horizontalCls:Ext.baseCSSPrefix+"horizontal",toolEndCls:Ext.baseCSSPrefix+"end",toolStartCls:Ext.baseCSSPrefix+"start",rotationMap:{top:"0",right:"90",bottom:"0",left:"270"},dockCls:{top:Ext.baseCSSPrefix+"docked-top",right:Ext.baseCSSPrefix+"docked-right",bottom:Ext.baseCSSPrefix+"docked-bottom",left:Ext.baseCSSPrefix+"docked-left"},weighted:!0,vertical:!1,inheritUi:!0,addTools:function(e){var t=Ext.Array.from(e);return t&&t.length&&(t=this.add(t)),t},applyTitle:function(e,t){var i=t;return i?e&&"string"!=typeof e?e&&i.setConfig(e):i.setText(e||""):i=Ext.create(this.createTitle(e)),i},createTitle:function(e){var t=this.getRefOwner();return e&&"string"==typeof e&&(e={text:e}),Ext.merge({xtype:"paneltitle",instanceCls:t&&t.titleCls||null,flex:"1 1 auto"},e)},onItemAdd:function(e,t){var i=this.getTitle(),n=i&&i.weight||-10,r=e.weight||0;this.callParent([e,t]),e.isTool&&e.addCls(r<n?this.toolStartCls:this.toolEndCls)},onItemRemove:function(e,t,i){this.callParent([e,t,i]),e.isTool&&e.removeCls([this.toolStartCls,this.toolEndCls])},updateIcon:function(e){this.ensureTitle().setIcon(e)},updateIconAlign:function(e){this.ensureTitle().setIconAlign(e)},updateIconCls:function(e){this.ensureTitle().setIconCls(e)},updateTitle:function(e,t){t?t.setConfig(e):this.add(e)},updateTitleAlign:function(e){this.ensureTitle().setTextAlign(e)},updateTitleRotation:function(e){var t;if("auto"===e){if(this.isConfiguring)return;(t=this.getRefOwner())||Ext.raise("Cannot use rotation auto without an owning panel."),t&&(e=this.rotationMap[t.getHeaderPosition()])}this.rotateTitle(e)},updatePosition:function(e,t){var i=this,n=i.getLayout(),r="left"===e,s="right"===e,o=i.vertical=r||s,a=i.verticalCls,l=i.horizontalCls,c=i.dockCls;n.setVertical(o),n.setReverse(r),t&&i.removeCls(c[t]),e&&i.addCls(c[e]),o?i.replaceCls(l,a):i.replaceCls(a,l),"auto"===i.getTitleRotation()&&i.rotateTitle(i.rotationMap[e])},privates:{clearTools:function(){var e,t,i=this.getItems().items;for(t=i.length;0<t--;)(e=i[t]).isTool&&!e.$internal&&this.remove(e)},ensureTitle:function(){var e=this.getTitle();return e||(this.setTitle(""),e=this.getTitle()),e},isVertical:function(){return this.vertical},rotateTitle:function(e){this.ensureTitle().setRotation(e)},sortByWeight:function(e,t){return(e.weight||0)-(t.weight||0)}},deprecated:{6.5:{configs:{glyph:null}}}}),Ext.define("Ext.theme.material.panel.Header",{override:"Ext.panel.Header",config:{titleAlign:"left"}}),Ext.define("Ext.scroll.NativeScroller",{extend:Ext.scroll.Scroller,alias:"scroller.native",config:{monitorScroll:null,scrollingElement:null,spacerXY:null,xCls:null,yCls:null},statics:{initViewportScroller:function(){var e=Ext.getViewportScroller();e.getElement()||e.setElement(Ext.getBody())}},constructor:function(e){this.trackingPosition={x:null,y:null},this.callParent([e]),this.syncXCls(),this.syncYCls()},doDestroy:function(){var e=Ext.scroll.Scroller,t=this;t.setX(null),t.setY(null),t._spacer&&t._spacer.destroy(),t.scrollListener&&t.scrollListener.destroy(),t.translatable&&(t.translatable=null),e.viewport===t&&(e.viewport=null),t.callParent()},getClientSize:function(){var e=this.getElement().dom;return{x:e.clientWidth,y:e.clientHeight}},getScrollbarSize:function(){var e,t,i,n,r,s,o=0,a=0,l=this.getScrollingElement();return l&&!l.destroyed&&(t=this.getX(),i=this.getY(),e=l.dom,(t||i)&&(s=Ext.scrollbar.size()),"scroll"===t?n=!0:t&&(n=e.scrollWidth>e.clientWidth),"scroll"===i?r=!0:i&&(r=e.scrollHeight>e.clientHeight),n&&(a=s.height),r&&(o=s.width)),{width:o,height:a,reservedWidth:r?s.reservedWidth:"",reservedHeight:n?s.reservedHeight:""}},getSize:function(){var e,t=this.getScrollingElement();return t&&!t.destroyed?{x:(e=t.dom).scrollWidth,y:e.scrollHeight}:{x:0,y:0}},getMaxPosition:function(){var e,t=this.getScrollingElement(),i=0,n=0;return t&&!t.destroyed&&(i=(e=t.dom).scrollWidth-e.clientWidth,n=e.scrollHeight-e.clientHeight),{x:i,y:n}},getMaxUserPosition:function(){var e,t=this.getScrollingElement(),i=0,n=0;return t&&!t.destroyed&&(e=t.dom,this.getX()&&(i=e.scrollWidth-e.clientWidth),this.getY()&&(n=e.scrollHeight-e.clientHeight)),{x:i,y:n}},refresh:function(){var e=this.getElementScroll(),t=e.left,i=e.top,n=this.position,r=this.trackingPosition;return n.x=r.x=t,n.y=r.y=i,this.callParent()},updateElement:function(e,t){var i=this.nativeScrollerCls,n=null;this.callParent([e,t]),t&&!t.destroyed&&t.removeCls([i,this.getXCls(),this.getYCls()]),e&&(n=e.dom===document.documentElement||e.dom===document.body?Ext.scroll.Scroller.getScrollingElement():e,e.addCls(i)),this.setScrollingElement(n),this.isConfiguring||(this.syncXCls(),this.syncYCls(),this.getTranslatable().setElement(n))},updateSize:function(e){var t,i=this.getScrollingElement(),n=e.x,r=e.y;i&&(t=this.getSpacer(),n||r?(0<n&&--n,0<r&&--r,this.setSpacerXY({x:n,y:r}),t.show()):t.hide())},updateX:function(e){this.isConfiguring||this.syncXCls()},updateY:function(e){this.isConfiguring||this.syncYCls()},privates:{nativeScrollerCls:Ext.baseCSSPrefix+"nativescroller",spacerCls:Ext.baseCSSPrefix+"scroller-spacer",overflowXClsMap:{auto:Ext.baseCSSPrefix+"overflow-x-auto",true:Ext.baseCSSPrefix+"overflow-x-auto",false:Ext.baseCSSPrefix+"overflow-x-hidden",scroll:Ext.baseCSSPrefix+"overflow-x-scroll"},overflowYClsMap:{auto:Ext.baseCSSPrefix+"overflow-y-auto",true:Ext.baseCSSPrefix+"overflow-y-auto",false:Ext.baseCSSPrefix+"overflow-y-hidden",scroll:Ext.baseCSSPrefix+"overflow-y-scroll"},constrainScrollRange:function(e){if(e<1e6)return e;if(!this.maxSpacerTranslate){var t=Math.pow(2,32),i=t,n=500,r=Ext.getBody().createChild({style:{position:"absolute",left:"-10000px",top:"0",width:"500px",height:"500px"},cn:{cls:this.spacerCls}},null,!0),s=Ext.get(r.firstChild),o=s.dom.style;for(s.translate(0,t-1),o.lineHeight=Number(!parseInt(o.lineHeight,10))+"px";i!==n+1;)s.translate(0,t=n+Math.floor((i-n)/2)),o.lineHeight=Number(!parseInt(o.lineHeight,10))+"px",r.scrollHeight<t?i=t:n=t;for(s.translate(0,Ext.scroll.Scroller.prototype.maxSpacerTranslate=n),i=2*n;i!==n+1;)s.dom.style.marginTop=(t=n+Math.floor((i-n)/2))+"px",o.lineHeight=Number(!parseInt(o.lineHeight,10))+"px",r.scrollHeight<t?i=t:n=t;Ext.fly(r).destroy(),Ext.scroll.Scroller.prototype.maxSpacerMargin=n-Ext.scroll.Scroller.prototype.maxSpacerTranslate}return Math.min(e,this.maxSpacerTranslate)},doHighlight:function(e,t){!0!==t?Ext.fly(e).highlight(t):Ext.fly(e).highlight()},doScrollTo:function(e,t,i){var n,r,s,o,a,l=this,c=l.getScrollingElement(),u=l.getTranslatable();return c&&!c.destroyed?(s=t===1/0,((r=e===1/0)||s)&&(n=l.getMaxPosition(),r&&(e=n.x),s&&(t=n.y)),null!==e&&(e=l.convertX(e)),i?(a=new Ext.Deferred,u.on("animationend",function(){l.destroyed?a.reject():a.resolve()},Ext.global,{single:!0,onFrame:!0}),u.translate(e,t,i),o=a.promise):(u.translate(e,t),o=Ext.Deferred.getCachedResolved(),l.onScroll())):o=Ext.Deferred.getCachedRejected(),o},getElementScroll:function(){return this.getScrollingElement().getScroll()},getSpacer:function(){var e,t=this._spacer;return t||(e=this.getScrollingElement(),(t=this._spacer=e.createChild({cls:this.spacerCls,role:"presentation"},e.dom.firstChild)).setVisibilityMode(2),t.hide(),e.position()),t},onScroll:function(e){var t=this,i=t.position,n=t.getElementScroll(),r=n.left,s=n.top,o=r-i.x,a=s-i.y;if(o||a){if(e&&!t.getX()&&!t.getY()&&!t.getMonitorScroll())return void e.preventDefault();i.x=r,i.y=s,t.isScrolling||(t.setPrimary(!0),t.callPartners("onPartnerScrollStart",r,s),t.fireScrollStart(r,s,o,a),t.callPartners("fireScrollStart",r,s)),t.isPrimary&&(t.callPartners("onPartnerScroll",r,s),t.fireScroll(r,s,o,a),t.callPartners("fireScroll",r,s),t.onScrollEnd(r,s))}},doOnScrollEnd:function(e,t){var i=this,n=i.position,r=i.trackingPosition;i.destroying||i.destroyed||(i.isScrolling=Ext.isScrolling=!1,r.x=n.x,r.y=n.y,i.callPartners("onPartnerScrollEnd"),i.fireScrollEnd(e,t),i.callPartners("fireScrollEnd",e,t),i.isScrolling||i.setPrimary(null))},restoreState:function(){var e=this.trackingPosition;this.doScrollTo(e.x,e.y)},syncXCls:function(){this.getElement()&&this.setXCls(this.overflowXClsMap[this.getX()])},syncYCls:function(){this.getElement()&&this.setYCls(this.overflowYClsMap[this.getY()])},translateSpacer:function(e,t){this.getSpacer().translate(e,t)},updateScrollingElement:function(e,t){var i,n,r=document,s=this.scrollListener;s&&(s.destroy(),this.scrollListener=null),e&&(n=(i=e.dom)===r.scrollingElement||i===r.documentElement?Ext.getWin():e,this.scrollListener=n.on({scroll:"onScroll",scope:this,destroyable:!0}))},applySpacerXY:function(e,t){return t&&e.x===t.x&&e.y===t.y&&(e=void 0),e},updateSpacerXY:function(e){var t,i=this.getSpacer().dom.style,n=e.y;i.marginTop="",this.translateSpacer(e.x,this.constrainScrollRange(n)),i.lineHeight=Number(!parseInt(i.lineHeight,10))+"px",1e6<n&&0<(t=n-this.getScrollingElement().dom.scrollHeight)&&(i.marginTop=Math.min(t,this.maxSpacerMargin||0)+"px")},createTranslatable:function(e){return this.isConfiguring&&this.getElement(),Ext.apply({element:this.getScrollingElement()},e)},updateXCls:function(e,t){var i=this.getScrollingElement();i&&!i.destroyed&&i.replaceCls(t,e)},updateYCls:function(e,t){var i=this.getScrollingElement();i&&!i.destroyed&&i.replaceCls(t,e)}}},function(i){var n=Ext.scroll.Scroller;Ext.getViewportScroller=function(e){var t=n.viewport;return t||!1===e||(n.viewport=t=new i,i.initViewportScroller()),t},Ext.setViewportScroller=function(e){var t=n.viewport;e!==t&&(Ext.destroy(t),e&&!e.isScroller&&(e=new i(e)),n.viewport=e)},Ext.onReady(function(){i.initViewportScrollerTimer=Ext.defer(i.initViewportScroller,100)})}),Ext.define("Ext.scroll.indicator.Indicator",{extend:Ext.Widget,alias:"scrollindicator.indicator",mixins:[Ext.mixin.Factoryable],factoryConfig:{defaultType:"overlay",aliasPrefix:"scrollindicator."},isScrollIndicator:!0,classCls:Ext.baseCSSPrefix+"scrollindicator",config:{axis:null,enabled:null,scroller:null,value:null},privates:{axisClsMap:{x:Ext.baseCSSPrefix+"horizontal",y:Ext.baseCSSPrefix+"vertical"},updateAxis:function(e){this.addCls(this.axisClsMap[e])}}}),Ext.define("Ext.scroll.indicator.Bar",{extend:Ext.scroll.indicator.Indicator,alias:"scrollindicator.bar",isScrollbar:!0,config:{stylesheet:!0},classCls:Ext.baseCSSPrefix+"scrollbar",enabledCls:Ext.baseCSSPrefix+"enabled",scrollCls:Ext.baseCSSPrefix+"overflow-scroll",cornerCls:Ext.baseCSSPrefix+"scrollbar-corner",maxScrollSize:1e5,scale:1,position:0,template:[{reference:"spacerElement",cls:Ext.baseCSSPrefix+"spacer-el"}],constructor:function(e){this.callParent([e]),this.element.on("scroll","onScrollbarScroll",this)},doDestroy:function(){this.setEnabled(null),this.callParent()},privates:{hasRules:{x:!1,y:!1},names:{x:{scrollerCls:Ext.baseCSSPrefix+"has-horizontal-scrollbar",margin:"margin-right",spacerMargin:"margin-left",getAxis:"getX",size:"height",oppositeSize:"width",scrollPosition:"scrollLeft",minSize:"min-height"},y:{scrollerCls:Ext.baseCSSPrefix+"has-vertical-scrollbar",margin:"margin-bottom",spacerMargin:"margin-top",getAxis:"getY",size:"width",oppositeSize:"height",scrollPosition:"scrollTop",minSize:"min-width"}},onRefresh:function(){var e=this,t=e.getScroller(),i=t.getElement(),n=e.getAxis(),r=e.names[n],s=t[r.getAxis](),o=t.getSize()[n],a=i["x"===n?"getWidth":"getHeight"](),l=t.getMaxPosition()[n],c=t.getScrollbarSize()[r.oppositeSize],u=e.maxScrollSize;a&&o&&(e.setEnabled(t.isAxisEnabled(e.getAxis())),e.toggleCls(e.scrollCls,"scroll"===s),e.scale=Math.max(l/(u-a+c),1),e.spacerElement.setStyle(r.spacerMargin,Math.min(o,u)-1+"px"))},onScroll:function(){var e=this.getScroller(),t=this.getAxis();e.isScrollbarScrolling||(this.element.dom[this.names[t].scrollPosition]=Math.round(this.getScroller().position[t]/this.scale),this.readPosition())},onScrollbarScroll:function(){var e=this.getScroller(),t=this.getAxis(),i=this.position,n=this.readPosition(),r="y"===t;i===n||e.isScrolling&&!e.isScrollbarScrolling||(e.isScrollbarScrolling=!0,e.doScrollTo(r?null:n,r?n:null))},readPosition:function(){var e=Math.round(this.element.dom[this.names[this.getAxis()].scrollPosition]*this.scale);return this.position=e},updateAxis:function(e,t){var i=this.el,n=this.getScroller().getInnerElement(),r=this.names[e],s=Ext.isIE?1:0,o=Ext.scrollbar.size()[r.size]+s+"px";this.callParent([e,t]),i.setStyle(r.size,o),i.setStyle(r.margin,o),n.setStyle(r.minSize,"calc(100% - "+o+")")},updateEnabled:function(e){var t,i=this.getScroller();this.destroying||this.destroyed||this.toggleCls(this.enabledCls,!!e),i&&(t=i.getElement())&&!t.destroyed&&t.toggleCls(this.names[this.getAxis()].scrollerCls,!!e)},updateScroller:function(e){var t;e&&(t=e.getElement())&&(t.appendChild(this.el),e.isConfiguring||this.setEnabled(e.isAxisEnabled(this.getAxis())))},applyStylesheet:function(){var e=this.self.prototype,t=e.stylesheet;return t||(e.stylesheet=t=Ext.util.CSS.createStyleSheet("")),t}}}),Ext.define("Ext.scroll.indicator.Overlay",{extend:Ext.scroll.indicator.Indicator,alias:"scrollindicator.overlay",config:{axis:null,hideAnimation:!0,hideDelay:100},defaultHideAnimation:{to:{opacity:0},duration:300},names:{x:{side:"l",getSize:"getHeight",setLength:"setWidth",translate:"translateX"},y:{side:"t",getSize:"getWidth",setLength:"setHeight",translate:"translateY"}},oppositeAxis:{x:"y",y:"x"},classCls:Ext.baseCSSPrefix+"scrolloverlay",visible:!1,element:{reference:"element",style:"opacity: 0"},applyHideAnimation:function(e){return e=e&&Ext.mergeIf({onEnd:this.onHideAnimationEnd,scope:this},this.defaultHideAnimation,e)},constructor:function(e){var t;this.callParent([e]),Ext.os.is.iOS&&this.addUi("ios"),Ext.os.is.Android&&this.addUi("android"),t=this.getAxis(),this.names=this.names[t]},hide:function(){var e=this.getHideDelay();this.visible&&(this.visible=!1,e?this._hideTimer=Ext.defer(this.doHide,e,this):this.doHide())},updateScroller:function(e){e.getElement().appendChild(this.element)},updateValue:function(e){var t,i=this.element,n=this.names,r=this.getAxis(),s=this.getScroller(),o=s.getMaxUserPosition()[r],a=s.getClientSize()[r],l=this.length,c=l,u=a-l-this.sizeAdjust,d=Math.round;t=e<0?(c=d(l+l*e/a),0):o<e?u+l-(c=d(l-l*(e-o)/a)):d(e/o*u),this[n.translate](t),i[n.setLength](c)},show:function(){var e=this.element,t=e.getActiveAnimation();this.visible||(this.visible=!0,t&&t.end(),e.stopAnimation&&e.stopAnimation(),this.size||this.cacheStyles(),this.refreshLength(),clearTimeout(this._hideTimer),e.setStyle("opacity",""))},destroy:function(){this.callParent(),clearTimeout(this._hideTimer)},privates:{cacheStyles:function(){var e=this.element,t=this.names;this.size=e[t.getSize](),this.margin=e.getMargin(t.side)},doHide:function(){var e=this.getHideAnimation(),t=this.element;e?t.animate(e):t.setStyle("opacity",0)},hasOpposite:function(){return this.getScroller().isAxisEnabled(this.oppositeAxis[this.getAxis()])},onHideAnimationEnd:function(){this.element.setStyle("opacity","0")},onScroll:function(){this.setValue(this.getScroller().position[this.getAxis()])},onScrollEnd:function(){this.hide()},onScrollStart:function(){this.setValue(this.getScroller().position[this.getAxis()]),this.show()},refreshLength:function(){var e=this.names,t=this.getAxis(),i=this.getScroller(),n=i.getSize()[t],r=i.getClientSize()[t],s=r/n,o=2*this.margin,a=this.hasOpposite()?o+this.size:o,l=Math.round((r-a)*s);this.sizeAdjust=a,this.length=l,this.element[e.setLength](l)},translateX:function(e){this.element.translate(e)},translateY:function(e){this.element.translate(0,e)}}}),Ext.define("Ext.scroll.VirtualScroller",{extend:Ext.scroll.Scroller,alias:"scroller.virtual",isVirtualScroller:!0,config:{autoRefresh:!1,barIndicator:{lazy:!0,$value:{type:"bar"}},bounceEasing:{duration:400},directionLock:!1,disabled:null,clientSize:void 0,scrollbarSize:{width:0,height:0},indicators:{x:!0,y:!0},infinite:!0,innerElement:null,maxAbsoluteVelocity:6,maxPosition:{x:0,y:0},maxUserPosition:{x:0,y:0},minPosition:{x:0,y:0},minUserPosition:{x:0,y:0},momentumEasing:{momentum:{acceleration:30,friction:.5},bounce:{acceleration:30,springTension:.3},minVelocity:1},outOfBoundRestrictFactor:.5,overlayIndicator:{lazy:!0,$value:{type:"overlay"}},pageSize:{x:5e5,y:5e5},slotSnapEasing:{duration:150},slotSnapOffset:{x:0,y:0},slotSnapSize:{x:0,y:0},startMomentumResetTime:300},eventedConfig:{offsetX:0,offsetY:0},translatable:"csstransform",dragStartTime:0,dragEndTime:0,isDragging:!1,isWheeling:!1,isAnimating:!1,isMouseEvent:{mousedown:1,mousemove:1,mouseup:1},listenerMap:{touchstart:"onTouchStart",touchmove:"onTouchMove",dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},constructor:function(e){var t,i=this,n="onEvent";i.elementListeners={touchstart:n,touchmove:n,dragstart:n,drag:n,dragend:n,wheel:"onWheel",scope:i},i.minPosition={x:0,y:0},i.startPosition={x:0,y:0},i.velocity={x:0,y:0},i.isAxisEnabledFlags={x:!1,y:!1},i.flickStartPosition={x:0,y:0},i.flickStartTime={x:0,y:0},i.lastDragPosition={x:0,y:0},i.dragDirection={x:0,y:0},i.scrollbarSize={width:0,height:0},i.callParent([e]),t=i.getAutoRefresh(),i.refreshScrollbarSize(),t?i.refresh(!0):(i.refreshAxes(),i.callIndicators("onRefresh")),i.scheduleRefresh={idle:i.doRefresh,scope:i,single:!0,destroyable:!0}},doDestroy:function(){var e=this,t=e.getElement(),i=e.getInnerElement(),n=e.sizeMonitors;n&&(n.element.destroy(),n.container.destroy()),t&&!t.destroyed&&t.removeCls(e.cls),i&&!i.destroyed&&i.removeCls(e.innerCls),e._isWrapped&&(t.destroyed||e.unwrapContent(),i.destroy()),e.setElement(null),e.setInnerElement(null),e.setIndicators(null),Ext.destroyMembers(e,"scrollbarCorner"),e.callParent()},refresh:function(e){return e?this.doRefresh():this.refreshScheduled||(this.refreshScheduled=Ext.on(this.scheduleRefresh)),this},updateDisabled:function(e){this.isConfiguring||(e?this.detachListeners():this.attachListeners())},updateElement:function(e,t){var i,n=this,r=n.virtualScrollerCls,s=n.getInnerElement();n.callParent([e,t]),t&&!t.destroyed&&t.removeCls(r),e&&(e.addCls(r),s||(s=n.wrapContent(e),n.setInnerElement(s)),n.getDisabled()||n.attachListeners(),n.isConfiguring||(i=n.getAutoRefresh())&&(n.toggleResizeListeners(i),n.refresh()))},applyIndicators:function(e,t){var i,n,r,s,o,a;return e&&(!0===e||"string"==typeof e?r=s=e:(i=e.type,r=e.x,s=e.y)),e=t||{x:null,y:null},(r||s)&&(n=Ext.scrollbar.width()&&"overlay"!==i?"barIndicator":"overlayIndicator"),o=e.x,a=e.y,r?e.x=Ext.Factory.scrollindicator.update(o,r,this,"createXIndicator",n):o&&(o.destroy(),e.x=null),s?e.y=Ext.Factory.scrollindicator.update(a,s,this,"createYIndicator",n):a&&(a.destroy(),e.y=null),e},updateIndicators:function(e){this.isConfiguring||this.refreshScrollbarSize()},createXIndicator:function(e){return Ext.apply({axis:"x",scroller:this},e)},createYIndicator:function(e){return Ext.apply({axis:"y",scroller:this},e)},applySlotSnapSize:function(e){return"number"==typeof e&&(e={x:e,y:e}),e},updateX:function(){this.isConfiguring||(this.refreshAxes(),this.refreshScrollbarSize())},updateY:function(){this.isConfiguring||(this.refreshAxes(),this.refreshScrollbarSize())},privates:{virtualScrollerCls:Ext.baseCSSPrefix+"virtualscroller",innerCls:Ext.baseCSSPrefix+"scroller-inner",scrollbarCornerCls:Ext.baseCSSPrefix+"scrollbar-corner",attachListeners:function(){this.getElement().on(this.elementListeners)},callIndicators:function(e,t){var i,n,r=this.getIndicators();r&&((t||this.isAxisEnabled("x"))&&(i=r.x)&&i[e]&&i[e](),(t||this.isAxisEnabled("y"))&&(n=r.y)&&n[e]&&n[e]())},constrainX:function(e){return Math.min(this.getMaxPosition().x,Math.max(e,0))},constrainY:function(e){return Math.min(this.getMaxPosition().y,Math.max(e,0))},convertEasingConfig:function(e){return e},detachListeners:function(){this.getElement().un(this.elementListeners)},doRefresh:function(e){var t=this,i=t.configuredSize;t.refreshScheduled&&(t.refreshScheduled=t.refreshScheduled.destroy()),t.getElement()&&(t.stopAnimation(),t.getTranslatable().refresh(),t.setSize({x:i.x?void 0:null,y:i.y?void 0:null}),t.fireEvent("refresh",t))},doScrollTo:function(e,t,i){var n,r,s,o,a,l,c,u=this,d=u.isDragging,h=u.isPrimary;return u.destroyed||!u.getElement()?u:(a=u.getTranslatable(),s=u.position,d&&!u.isAxisEnabled("x")||(isNaN(e)||"number"!=typeof e?e=s.x:(!1===h||d||(e=u.constrainX(e)),s.x!==e&&(o=!0))),d&&!u.isAxisEnabled("y")||(isNaN(t)||"number"!=typeof t?t=s.y:(!1===h||d||(t=u.constrainY(t)),s.y!==t&&(o=!0))),o?(u.isScrolling||u.onScrollStart(),l=u.convertX(-e),c=-t,i?(r=new Ext.Deferred,a.on("animationend",function(){u.destroyed?r.reject():r.resolve()},Ext.global,{single:!0,onFrame:!0}),a.translateAnimated(l,c,i),n=r.promise):(a.translate(l,c),u.onScroll(e,t),u.isWheeling||u.isScrollbarScrolling?u.onScrollEnd():d||u.doOnScrollEnd())):i&&i.callback&&i.callback(),n||Ext.Deferred.getCachedResolved())},getAnimationEasing:function(e,t){if(!this.isAxisEnabled(e))return null;var i,n,r=this,s=r.position[e],o=r.getMinUserPosition()[e],a=r.getMaxUserPosition()[e],l=r.getMaxAbsoluteVelocity(),c=null,u=r.dragEndTime,d=t.flick.velocity[e],h="x"===e;return s<o?c=o:a<s&&(c=a),h&&(s=r.convertX(s),c=r.convertX(c)),null!==c?((n=r.getBounceEasing()[e]).setConfig({startTime:u,startValue:-s,endValue:-c}),n):0===d?null:(d<-l?d=-l:l<d&&(d=l),n=r.getMomentumEasing()[e],i={startTime:u,startValue:-s,startVelocity:1.5*d,minMomentumValue:-a,maxMomentumValue:0},h&&r.convertEasingConfig(i),n.setConfig(i),n)},getSnapPosition:function(e){var t,i,n,r,s=this.getSlotSnapSize()[e],o=null;return 0!==s&&this.isAxisEnabled(e)&&(t=this.position[e],i=this.getSlotSnapOffset()[e],n=this.getMaxUserPosition()[e],0!==(r=Math.floor((t-i)%s))&&(o=t!==n&&Math.abs(r)>s/2?Math.min(n,t+(0<r?s-r:r-s)):t-r)),o},isAxisEnabled:function(e){return this.getX(),this.getY(),this.isAxisEnabledFlags[e]},onAnimationEnd:function(){this.isAnimating=!1,this.snapToBoundary(),this.onScrollEnd()},onAnimationFrame:function(e,t,i){this.onScroll(this.convertX(-t),-i)},onAnimationStart:function(){this.isAnimating=!0},onAxisDrag:function(e,t){if(t&&this.isAxisEnabled(e)){var i=this,n=i.flickStartPosition,r=i.flickStartTime,s=i.lastDragPosition,o=i.dragDirection,a=i.position[e],l=i.getMinUserPosition()[e],c=i.getMaxUserPosition()[e],u=i.startPosition[e],d=s[e],h=u-t,f=o[e],g=i.getOutOfBoundRestrictFactor(),p=i.getStartMomentumResetTime(),m=Ext.Date.now();return h<l?h*=g:c<h&&(h=c+(h-c)*g),d<h?o[e]=1:h<d&&(o[e]=-1),(0!==f&&o[e]!==f||m-r[e]>p)&&(n[e]=a,r[e]=m),s[e]=h,!0}},onDrag:function(e){var t=this.lastDragPosition;this.isDragging&&this.onAxisDrag("x",this.convertX(e.deltaX))|this.onAxisDrag("y",e.deltaY)&&this.doScrollTo(t.x,t.y)},onDragEnd:function(e){var t,i;this.isDragging&&(this.dragEndTime=Ext.Date.now(),this.onDrag(e),this.isDragging=!1,t=this.getAnimationEasing("x",e),i=this.getAnimationEasing("y",e),t||i?this.getTranslatable().animate(t,i):this.onScrollEnd())},onDragStart:function(e){var t=this,i=e.absDeltaX,n=e.absDeltaY,r=t.startPosition,s=t.flickStartPosition,o=t.flickStartTime,a=t.lastDragPosition,l=t.position,c=t.dragDirection,u=l.x,d=l.y,h=Ext.Date.now(),f=t.getX(),g=t.getY();if(Ext.undefer(t.scrollEndTimer),t.getDirectionLock()&&(!f||!g)){if(!(f&&n<i||g&&i<n))return;e.stopPropagation()}a.x=u,a.y=d,s.x=u,s.y=d,r.x=u,r.y=d,o.x=h,o.y=h,c.x=0,c.y=0,t.dragStartTime=h,t.isDragging=!0,t.isScrolling||t.onScrollStart()},onElementResize:function(){this.refresh(!0)},onEvent:function(e){var t=this.self;if((!t.isTouching||this.isTouching)&&!t.isWheeling&&"mouse"!==e.pointerType&&(this.getY()||this.getX()))return this[this.listenerMap[e.type]](e)},onInnerElementResize:function(){this.refresh(!0)},onPartnerScroll:function(e,t){this.callParent([e,t]),this.callIndicators("onScroll")},onPartnerScrollStart:function(e,t,i,n){this.callParent([e,t,i,n]),this.callIndicators("onScrollStart")},onPartnerScrollEnd:function(){this.callParent(),this.callIndicators("onScrollEnd",!0)},onScroll:function(e,t){var i,n,r,s,o,a=this,l=a.position,c=e-l.x,u=t-l.y;(c||u)&&(l.x=e,l.y=t,a.getInfinite()&&((n=(i=a.getPageSize()).x)&&(n<(s=e-a.getOffsetX())?a.setOffsetX(Math.floor(e/n)*n):s<-n&&a.setOffsetX(Math.ceil(e/n)*n)),(r=i.y)&&(r<(o=t-a.getOffsetY())?a.setOffsetY(Math.floor(t/r)*r):o<-r&&a.setOffsetY(Math.ceil(t/r)*r))),a.isPrimary&&(a.callIndicators("onScroll"),a.callPartners("onPartnerScroll",e,t),a.fireScroll(e,t,c,u),a.callPartners("fireScroll",e,t)))},doOnScrollEnd:function(){var e=this,t=e.position,i=t.x,n=t.y;e.destroying||e.destroyed||!e.isScrolling||!e.isPrimary||e.isTouching||e.snapToSlot()||(e.isScrolling=Ext.isScrolling=e.isWheeling=e.self.isWheeling=e.isScrollbarScrolling=!1,e.callIndicators("onScrollEnd"),e.callPartners("onPartnerScrollEnd"),e.fireScrollEnd(i,n),e.callPartners("fireScrollEnd",i,n),e.isScrolling||e.setPrimary(null))},onScrollStart:function(){var e=this.position,t=e.x,i=e.y;this.isScrolling||(this.setPrimary(!0),this.callIndicators("onScrollStart"),this.callPartners("onPartnerScrollStart",t,i),this.fireScrollStart(t,i,0,0),this.callPartners("fireScrollStart",t,i))},onTouchEnd:function(){this.isTouching=this.self.isTouching=!1,this.isAnimating||this.onScrollEnd()},onTouchMove:function(e){e.preventDefault()},onTouchStart:function(e){Ext.getDoc().on({touchend:"onTouchEnd",scope:this,single:!0}),this.isTouching=this.self.isTouching=!0,this.stopAnimation()},onWheel:function(e){var t=this.self,i=e.deltaX,n=e.deltaY,r=this.position,s=r.x,o=r.y,a=this.constrainX(r.x+i),l=this.constrainY(r.y+n);a!==s||l!==o?(this.isWheeling=t.isWheeling=!0,this.doScrollTo(a,l),e.preventDefault()):this.isScrolling&&this.onScrollEnd()},refreshAxes:function(){var e,t,i,n,r=this.isAxisEnabledFlags,s=this.getSize(),o=this.getClientSize();s&&o&&(e=Math.max(0,s.x-o.x),t=Math.max(0,s.y-o.y),i=this.getX(),n=this.getY(),this.setMaxPosition({x:e,y:t}),!0===i||"auto"===i?r.x=!!e:!1===i?r.x=!1:"scroll"===i&&(r.x=!0),!0===n||"auto"===n?r.y=!!t:!1===n?r.y=!1:"scroll"===n&&(r.y=!0),this.setMaxUserPosition({x:r.x?e:0,y:r.y?t:0}),this.isConfiguring||this.callIndicators("onRefresh",!0))},refreshScrollbarSize:function(){var e,t,i=this.getIndicators(),n=this.scrollbarSize,r=Ext.scrollbar.size();i&&(e=i.x,t=i.y,e&&e.isScrollbar&&this.getX()&&(n.height=r.height),t&&t.isScrollbar&&this.getY()&&(n.width=r.width))},refreshSize:function(e,t){var i,n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v,E,b,C,S=this,w=S.getElement(),T=Ext.isIE?1:0;return w&&!w.destroyed?(h=w.dom,f=S.getInnerElement().dom,u=e.x,d=e.y,n=(i=S.scrollbarSize).width,r=i.height,s=Ext.scrollbar.size(),a=o=!1,y=(x=S.getIndicators()).x,v=x.y,C=S.scrollbarCorner,void 0===u&&(u=t&&t.x),void 0===d&&(d=t&&t.y),null==u&&(u=f.scrollWidth,p=!0),null==d&&(d=f.scrollHeight,m=!0),l=h.clientWidth,c=h.clientHeight,o=!!(1&(g=S.getScrollbarFlags(u,d,l,c))),a=!!(2&g),g&&g!==S.scrollbarFlags&&(y&&(y.setEnabled("scroll"===S.getX()),y.setStyle("visibility","hidden")),v&&(v.setEnabled("scroll"===S.getY()),v.setStyle("visibility","hidden")),p&&o&&(v.setEnabled(!0),E=!0),m&&a&&(y.setEnabled(!0),b=!0),E&&(u=f.scrollWidth),b&&(d=f.scrollHeight),(E||b)&&(o=!!(1&(g=S.getScrollbarFlags(u,d,l,c))),a=!!(2&g)),a&&o?(C||(S.scrollbarCorner=C=S.getElement().createChild({cls:S.scrollbarCornerCls}),C.setVisibilityMode(2),Ext.isWindows&&C.setStyle({width:n+T+"px",height:r+T+"px"})),C.show()):C&&C.hide(),y&&y.setStyle("visibility",""),v&&v.setStyle("visibility",""),S.scrollbarFlags=g,S.setScrollbarSize({width:o?n:0,height:a?r:0,reservedWidth:o?s.reservedWidth:"",reservedHeight:a?s.reservedHeight:""})),l=o?l-n:l,c=a?c-r:c,S.setClientSize({x:l,y:c}),{x:Math.max(u,l),y:Math.max(d,c)}):null},getScrollbarFlags:function(e,t,i,n){var r=0,s=this.scrollbarSize,o=s.width,a=s.height;return o&&("scroll"===this.getY()||n<t)&&(r|=1),a&&("scroll"===this.getX()||i<e)&&(r|=2),1&r&&a&&i-o<e&&(r|=2),2&r&&o&&n-a<t&&(r|=1),r},snapToBoundary:function(){var e=this.getPosition();if(!this.isConfiguring&&(e.x||e.y)){var t=this.getMinUserPosition(),i=this.getMaxUserPosition(),n=t.x,r=t.y,s=i.x,o=i.y,a=Math.round(e.x),l=Math.round(e.y);a<n?a=n:s<a&&(a=s),l<r?l=r:o<l&&(l=o),this.doScrollTo(a,l)}},snapToSlot:function(){var e=this.getSnapPosition("x"),t=this.getSnapPosition("y"),i=this.getSlotSnapEasing();return(null!==e||null!==t)&&(this.doScrollTo(e,t,{easingX:i.x,easingY:i.y}),!0)},stopAnimation:function(){this.getTranslatable().stopAnimation()},syncOffsets:function(e){e.setOffsetX(-this.getOffsetX()),e.setOffsetY(-this.getOffsetY())},toggleResizeListeners:function(e){var t,i,n=this.getElement();n&&(i=this.getInnerElement(),n[t=e?"on":"un"]("resize","onElementResize",this),i[t]("resize","onInnerElementResize",this))},unwrapContent:function(){for(var e,t=this.getInnerElement().dom,i=this.getElement().dom;e=t.firstChild;)i.insertBefore(e,t)},wrapContent:function(e){for(var t,i=document.createElement("div"),n=e.dom;t=n.lastChild;)i.insertBefore(t,i.firstChild);return n.appendChild(i),this.setInnerElement(i),this._isWrapped=!0,this.getInnerElement()},updateAutoRefresh:function(e){this.toggleResizeListeners(e)},applyBounceEasing:function(e){var t=Ext.fx.easing.EaseOut;return{x:Ext.factory(e,t),y:Ext.factory(e,t)}},updateBounceEasing:function(e){this.getTranslatable().setEasingX(e.x).setEasingY(e.y)},updateClientSize:function(){this.isConfiguring||this.refreshAxes()},applyInnerElement:function(e){return e&&(e.isElement||(e=Ext.get(e))),this.isConfiguring&&!e&&Ext.raise("Cannot create Ext.scroll.VirtualScroller with null innerElement"),e},updateInnerElement:function(e){e&&e.addCls(this.innerCls),this.getTranslatable().setElement(e)},applyMaxPosition:function(e,t){if(!t||e.x!==t.x||e.y!==t.y){var i,n=this.getTranslatable();return n.isAnimating&&(i=n.activeEasingY)&&i.getStartVelocity&&i.getStartVelocity()<0&&e.y<t.y&&i.setMinMomentumValue(-e.y),e}},applyMaxUserPosition:function(e,t){if(!t||e.x!==t.x||e.y!==t.y)return e},updateMaxUserPosition:function(){this.snapToBoundary()},updateMinUserPosition:function(){this.snapToBoundary()},applyMomentumEasing:function(e){var t=Ext.fx.easing.BoundMomentum;return{x:Ext.factory(e,t),y:Ext.factory(e,t)}},updateOffsetX:function(e){this.isConfiguring||this.getTranslatable().setOffsetX(e)},updateOffsetY:function(e){this.isConfiguring||this.getTranslatable().setOffsetY(e)},applySize:function(e,t){return e=this.callParent([e,t]),this.refreshSize(e,t)},updateSize:function(e,t){this.isConfiguring||this.refreshAxes()},applySlotSnapEasing:function(e){var t=Ext.fx.easing.EaseOut;return{x:Ext.factory(e,t),y:Ext.factory(e,t)}},applySlotSnapOffset:function(e){return"number"==typeof e&&(e={x:e,y:e}),e},updateTranslatable:function(e){e&&e.on({animationframe:"onAnimationFrame",animationstart:"onAnimationStart",animationend:"onAnimationEnd",scope:this})},createTranslatable:function(e){return Ext.apply({element:this.getInnerElement()},e)}}}),Ext.define("Ext.state.Builder",{constructor:function(e,t){this.name=t||null,this.parent=e||null,this.root=e?e.root:this},child:function(e){return new this.self(this,e)},get:function(e){var t,i=this.getData();return i&&i.$&&(t=i.$[e]),t},remove:function(e){var t=this.getData();t&&t.$&&delete t.$[e]},save:function(e,t){var i=e.self.$config.configs[t],n=e[i.names.get](),r=e.$statefulConfigs,s=r&&r[t];return s||i.equals(e.config[t],n)||((r=r||(e.$statefulConfigs={}))[t]=s=!0),s&&(i.save&&!1===i.save(this,t,n,e)||this.set(t,n)),this},set:function(e,t){var i,n=this.data;if("string"==typeof e)void 0===t?(n=n&&n.$)&&delete n[e]:(n=(n=n||this.getData(!0)).$||(n.$={}))[e]=t;else for(i in e)this.set(i,e[i]);return this},privates:{data:null,id:null,owner:null,clear:function(){var e=this.parent,t=e&&e.getData();t&&delete t[this.name],this.data=null},getData:function(e){var t=this.parent,i=this.data,n=this.name;return i||(t?(t=t.getData(e))&&!(i=t[n]||null)&&e&&(t[n]=i={}):e&&(i={}),this.data=i),i}}}),Ext.define("Ext.theme.material.tab.Tab",{override:"Ext.tab.Tab",config:{iconAlign:"top",flex:1},platformConfig:{desktop:{maxWidth:200}}}),Ext.define("Ext.theme.material.tab.Bar",{override:"Ext.tab.Bar",config:{animateIndicator:!0},platformConfig:{desktop:{layout:{pack:"center"}}}}),Ext.define("Ext.tip.Manager",{config:{tooltip:{xtype:"tooltip",align:"",anchorToTarget:!1,anchor:!1,closeAction:"hide",quickShowInterval:0,maxWidth:"80vw"},overflowTip:{align:"l-r?",anchor:!0,showOnTap:!0}},interceptTitles:!1,constructor:function(e){var t,i=this;i.initConfig(e),i._fly=new Ext.dom.Fly,i.tip=t=Ext.create(i.createTooltip()),t.allowRealign=!1,t.on({beforeshow:"onBeforeShow",hovertarget:"onHoverTarget",scope:i}),i.globalListeners=Ext.on({scope:i,destroyable:!0,dragstart:"dragDisable",dragend:"dragEnable",dragcancel:"dragEnable"}),i.self.instance||(i.self.instance=i)},disable:function(){1==++this.disabled&&this.getTooltip().disable()},enable:function(){var e=--this.disabled;0==e?this.getTooltip().enable():e<0&&(this.disabled=0)},destroy:function(){this.self.instance===this&&(this.self.instance=null),this._fly.detach(),this.globalListeners=this.tip=Ext.destroy(this.tip,this.globalListeners),this.callParent()},createTooltip:function(){var e=this.getTooltip();return Ext.apply({id:"ext-global-tooltip",delegate:this.delegateQuickTip.bind(this),target:Ext.getBody()},e)},hide:function(){this.tip&&this.tip.hide()},privates:{disabled:0,_propertyMap:function(){function e(e){return parseInt(e,10)}function t(e){return!!e}var i=Ext.identityFn;return{ui:{prop:"data-qui",parse:i},html:{prop:"data-qtip",parse:i},width:{prop:"data-qwidth",parse:e},minWidth:{prop:"data-qminWidth",parse:i},maxWidth:{prop:"data-qmaxWidth",parse:i},title:{prop:"data-qtitle",parse:i},autoHide:{prop:"data-qautoHide",parse:t},cls:{prop:"data-qcls",parse:i},axisLock:{prop:"data-axislock",parse:i},align:{prop:"data-qalign",parse:i},alignDelegate:{prop:"data-qaligndelegate",parse:i},anchor:{prop:"data-qanchor",parse:i},showDelay:{prop:"data-qshowDelay",parse:e},hideDelay:{prop:"data-qhideDelay",parse:e},dismissDelay:{prop:"data-qdismissDelay",parse:e},trackMouse:{prop:"data-qtrackMouse",parse:t},anchorToTarget:{prop:"data-qanchorToTarget",parse:t},allowOver:{prop:"data-qallowover",parse:t},closable:!0}}(),applyOverflowTip:function(e){var t=Ext.platformTags.phone;return Ext.apply({axisLock:!t,maxWidth:t?"80vw":400},e)},delegateQuickTip:function(e){return!!this.getTipConfig(e,"html")},dragDisable:function(){this.disabled||this.tip.disable()},dragEnable:function(){this.disabled||this.tip.enable()},getTipConfig:function(e,t){var i,n,r,s,o,a=this._propertyMap,l=this._tipDefaults,c=this._fly,u=c.attach(e).getData().qtip,d=this.tip,h=a.html.prop;if(!l&&"html"!==t)for(i in this._tipDefaults=l={},a)l[i]=d.getConfig(i);if(u)t?r=u[t]:(r=Ext.apply({},l),Ext.apply(r,u));else{if(e.hasAttribute(h))(n=e.getAttribute(h))||(n=this.interceptTitles&&e.title)&&(e.setAttribute(h,n),e.removeAttribute("title"));else if(e.hasAttribute("data-qoverflow")&&(n=c.dom.innerHTML,"html"!==t&&(l=Ext.apply({},this.getOverflowTip(),l)),!t&&!this.hasTextOverflow(e)))return!1;if(n)if("html"===t)r=n;else if(t)(o=a[t]).prop&&e.hasAttribute(o.prop)&&(r=o.parse(e.getAttribute(o.prop)));else for(i in r=u={html:n},a)"html"!==i&&(s=null,(o=a[i]).prop&&e.hasAttribute(o.prop)&&(s=o.parse(e.getAttribute(o.prop))),null===s&&(s=l[i]),u[i]=s)}return c.detach(),t&&null==r&&"html"!==t&&(r=l[t]),r},onBeforeShow:function(e){var t,i,n=e.currentTarget.dom;if(n){if(!1===(t=this.getTipConfig(n)))return!1;if(!t)return;t.anchorToTarget=!(!t.align&&!t.anchor),e.setConfig(t),(i=e.getHeader())&&i.setHidden(!t.title&&!t.closable)}},priorityConfigs:["showDelay","anchor","anchorToTarget","align","trackMouse"],onHoverTarget:function(e,t){var i,n=t.dom;n&&(i={},this.priorityConfigs.forEach(function(e){i[e]=this.getTipConfig(n,e)},this),i.anchorToTarget=!(!i.align&&!i.anchor),e.setConfig(i))},hasTextOverflow:function(e){if(Ext.fly(e).isStyle("text-overflow","ellipsis"))return Ext.util.TextMetrics.measure(e,e.innerHTML).width>Ext.fly(e).getViewRegion().width}}}),Ext.define("Ext.util.HeightSynchronizer",{active:null,candidates:null,filterer:null,constructor:function(e,t){var i,n=e.length;for(this.candidates=e,(this.filterer=t)||(this.active=e),i=0;i<n;++i)e[i].on("resize","handleResize",this)},getActive:function(){var e,t,i,n=this.active,r=this.filterer,s=this.candidates;if(!n){if(r)for(n=[],t=0,e=s.length;t<e;++t)!1!==r(i=s[t])&&n.push(i);else n=s;this.active=n}return n},handleResize:function(e,t,i,n,r){i&&i!==r&&this.sync()},invalidateItems:function(){this.active=null},sync:function(){var e,t,i,n,r=this.getActive(),s=r.length,o=null,a=!0;for(t=0;t<s;++t)r[t].setMinHeight(null);for(t=0;t<s;++t)n=(i=r[t]).measure("h"),null===o&&(o=n,e=i),n!==o&&(a=!1,o<n&&(o=n,e=i));if(!a)for(t=0;t<s;++t)(i=r[t])!==e&&i.setMinHeight(o)},destroy:function(e){var t,i,n=this.candidates;if(e)for(t=0,i=n.length;t<i;++t)n[t].un("resize","handleResize",this);this.callParent()}}),Ext.define("Ext.grid.Tree",{extend:Ext.grid.Grid,xtype:"tree",alternateClassName:"Ext.tree.Tree",classCls:Ext.baseCSSPrefix+"tree",expanderLastCls:Ext.baseCSSPrefix+"expander-last",expanderFirstCls:Ext.baseCSSPrefix+"expander-first",expanderOnlyCls:Ext.baseCSSPrefix+"expander-only",cellExpanderCls:Ext.baseCSSPrefix+"cell-expander",cachedConfig:{expanderFirst:!0,expanderOnly:!0},config:{root:{},selectOnExpander:!1,singleExpand:!1,rootVisible:!0,displayField:"text",columns:!1,rowLines:!1,folderSort:!1},eventsSelector:"."+Ext.baseCSSPrefix+"grid-cell",applyColumns:function(e){return e||(this.setHideHeaders(!0),e=[{xtype:"treecolumn",text:"Name",dataIndex:this.getDisplayField(),minWidth:100,flex:1}]),e},onRootChange:function(i,e){var n,r=this;e&&delete e.fireEventArgs,i&&(n=i.fireEventArgs,i.fireEventArgs=function(e){var t=n.apply(i,arguments);return!1!==t&&(e=r.rootEventsMap[e]||"item"+e,t=r.fireEventArgs.apply(r,arguments)),t})},updateExpanderFirst:function(e){var t=this.element;t.toggleCls(this.expanderFirstCls,e),t.toggleCls(this.expanderLastCls,!e)},updateExpanderOnly:function(e){var t=this.element;t.toggleCls(this.expanderOnlyCls,e),t.toggleCls(this.cellExpanderCls,!e)},setRootNode:function(e){return e=this.getStore().setRoot(e)},getRootNode:function(){var e=this.getStore();return e?e.getRoot():null},expandNode:function(e,t,i,n){return e.expand(t,i,n||this)},collapseNode:function(e,t,i,n){return e.collapse(t,i,n||this)},expandAll:function(e,t){var i=this.getRootNode();i&&(Ext.suspendLayouts(),i.expand(!0,e,t||this),Ext.resumeLayouts(!0))},collapseAll:function(e,t){var i=this.getRootNode();i&&(Ext.suspendLayouts(),t=t||this,this.getStore().rootVisible?i.collapse(!0,e,t):i.collapseChildren(!0,e,t),Ext.resumeLayouts(!0))},getChecked:function(){var e=[],t=this.getRootNode(),i=t.get("checked"),n=t.childNodes;return!0===i&&e.push(t),this.getCheckedChildItems(n,e),e},privates:{rootEventsMap:{beforeappend:"beforeitemappend",beforeremove:"beforeritememove",beforemove:"beforeitemmove",beforeinsert:"beforeiteminsert",beforeexpand:"beforeitemexpand",beforecollapse:"beforeitemcollapse"},doChildTouchStart:function(e){var t=e.cell;!t||t.isTreeCell&&!this.getSelectOnExpander()&&e.event.target===t.expanderElement.dom||this.callParent([e])},updateStore:function(e,t){var i,n=this;t&&Ext.destroy(n.storeListeners,n.storeRelayers),e&&((i=(n.store=e).getRoot())?n.onRootChange(i):(e.setRoot(n.getRoot()),i=e.getRoot()),"rootVisible"in e.initialConfig||e.setRootVisible(n.getRootVisible()),(e.ownerTree=n).callParent([e,t]),e.folderSort=n.getFolderSort(),n.storeListeners=n.mon(e,{destroyable:!0,rootchange:n.onRootChange,scope:n}),n.storeRelayers=n.relayEvents(e,["beforeload","load"]),e.rootVisible||e.autoLoad||i.isExpanded()||i.isLoading()||(i.isLoaded()?(i.data.expanded=!0,e.onNodeExpand(i,i.childNodes)):!1===e.autoLoad||e.hasPendingLoad()||(i.data.expanded=!1,i.expand())))},getCheckedChildItems:function(e,t){var i,n;for(i=0;i<e.length;i++)!0===(n=e[i]).get("checked")&&t.push(n),n.childNodes.length&&this.getCheckedChildItems(n.childNodes,t)}}}),Ext.define("Ext.grid.TreeDragZone",{extend:Ext.grid.GridDragZone,beforeDragStart:function(e){if(Ext.dd.Manager.getTargetComp(e).getRecord().isRoot())return!1;this.callParent([e])},getDragData:function(e){var t,i,n,r,s,o=this.view,a=Ext.Component.from(e,o);return n=(i=a.getRecord()).getTreeStore(),(t=o.getSelections())&&(i=-1!==t.indexOf(i)?t:i),s=Ext.Array.from(i),-1!==(r=i.indexOf(n.getRoot()))&&(s=Ext.Array.removeAt(s,r,0)),{eventTarget:e,view:o,item:a,records:s}},getDragText:function(e){var t=this.dragText,i=e.data.dragData.records.length;return Ext.isFunction(t)?t(i,e):1===i?Ext.dd.Manager.getTargetComp(e).getRecord().get(this.view.getDisplayField())||"":Ext.String.format(t,i,1===i?"":Ext.util.Inflector.pluralize(""))}}),Ext.define("Ext.grid.TreeDropZone",{extend:Ext.grid.GridDropZone,expandNode:function(e){e.isExpanded()||(e.expand(),this.ddEl&&this.ddEl.removeCls(this.dropMarkerCls+"-after")),this.timerId=null},cancelExpand:function(){this.timerId=Ext.undefer(this.timerId)},isTargetValid:function(e,t,i){var n,r,s=e.length,o=0;for(n=0;n<e.length;n++){if((r=e[n]).contains(t))return!1;r.parentNode!==t||"before"===i&&!t.isRoot()||++o}return o<s},onDragMove:function(e){var t,i,n,r,s,o,a,l=this,c=Ext.dd.Manager,u=c.getTargetComp(e),d=!0;t=c.getPosition(e,u),a=l.dropMarkerCls+"-"+t,u&&!u.hasCls(a)&&(u.getRecord&&(o=u.getRecord()),r=Ext.Array.intersect(l.getGroups(),e.source.getGroups()).length,o&&r?(s=-1===(n=e.data.dragData.records).indexOf(o),i=l.isTargetValid(n,o,t),s&&i?(l.ddEl&&l.removeDropMarker(),l.cancelExpand(),l.ddEl=u,o.isLeaf()||(d=!1,c.toggleProxyCls(e,l.validDropCls,!0),(!o.isExpanded()&&"after"===t||!o.isRoot()&&"before"===t)&&(d=!0),"after"===t&&l.allowExpandOnHover&&(l.timerId=Ext.defer(l.expandNode,l.expandDelay,l,[o]))),d&&l.addDropMarker(u,[l.dropIndicator,a])):l.ddEl&&l.removeDropMarker()):l.ddEl&&l.removeDropMarker())},arrangeNode:function(e,t,i,n){var r,s=t.length;for(r=0;r<s;r++)i[0]=t[r],e[n].apply(e,i);this.view.ensureVisible(t[0])},onNodeDrop:function(e){var t,i,n=e.targetNode,r=e.draggedData,s=r.records,o=s.length,a=e.targetRecord,l=e.position,c=a.isRoot(),u=a.parentNode||this.view.getRootNode(),d="appendChild",h=[null];if(this.copy)for(t=0;t<o;t++)s[t]=s[t].copy(void 0,!0,!0);"before"===l?c||(d="insertBefore",h=[null,a]):"after"===l&&(i=a.nextSibling,c||!a.isLeaf()?u=a:i&&(a.isLeaf()?(h=[null,i],d="insertBefore"):u=a)),this.arrangeNode(u,s,h,d),this.view.getSelectable().getSelection().getSelectionModel().select(s),this.view.fireEvent("drop",n,r,a,l),delete this.dragInfo},confirmDrop:function(){Ext.asap(this.onNodeDrop,this,[this.dragInfo])},prepareRecordBeforeDrop:function(e,t,i){var n,r,s=e.records,o=[],a=s.length;for(r=0;r<a;r++)(n=s[r]).parentNode===t&&"before"!==i||o.push(n);return e.records=o,e},onDrop:function(e){var t,i,n,r=this,s=r.view,o=r.ddEl;r.cancelExpand(),o&&(i=o.getRecord()).isNode&&(t=e.data.dragData,n=o.hasCls(r.dropMarkerCls+"-before")?"before":"after",r.prepareRecordBeforeDrop(t,i,n),t.records.length&&(!1!==s.fireEvent("beforedrop",o,t,i,n)&&(r.dragInfo={draggedData:t,targetRecord:i,position:n,targetNode:o},i.isExpanded()||"after"!=n?i.isLoading()?i.on({expand:"confirmDrop",single:!0,scope:r}):r.confirmDrop():i.expand(void 0,r.confirmDrop,r)),r.removeDropMarker()))}}),Ext.define("Ext.grid.cell.Tree",{extend:Ext.grid.cell.Cell,xtype:"treecell",isTreeCell:!0,classCls:Ext.baseCSSPrefix+"treecell",collapsedCls:Ext.baseCSSPrefix+"collapsed",expandedCls:Ext.baseCSSPrefix+"expanded",leafCls:Ext.baseCSSPrefix+"leaf",expandableCls:Ext.baseCSSPrefix+"expandable",withIconCls:Ext.baseCSSPrefix+"with-icon",withoutIconCls:Ext.baseCSSPrefix+"no-icon",loadingCls:Ext.baseCSSPrefix+"loading",selectedCls:Ext.baseCSSPrefix+"selected",checkableCls:Ext.baseCSSPrefix+"treecell-checkable",checkedCls:Ext.baseCSSPrefix+"treecell-checked",trimodeCls:Ext.baseCSSPrefix+"treecell-trimode",uncheckedCls:Ext.baseCSSPrefix+"treecell-unchecked",config:{iconClsProperty:"iconCls",iconCls:null,indent:null,text:{lazy:!0,$value:""},autoCheckChildren:!0,checkable:null,checkableField:"checkable",checkedField:"checked",checkOnTriTap:!0,enableTri:!0},element:{reference:"element",children:[{reference:"innerElement",cls:Ext.baseCSSPrefix+"inner-el",children:[{reference:"indentElement",cls:Ext.baseCSSPrefix+"indent-el"},{reference:"expanderElement",cls:Ext.baseCSSPrefix+"expander-el "+Ext.baseCSSPrefix+"font-icon"},{reference:"checkElement",listeners:{tap:"onCheckTap"},cls:Ext.baseCSSPrefix+"check-el "+Ext.baseCSSPrefix+"font-icon"},{reference:"iconElement",cls:Ext.baseCSSPrefix+"icon-el "+Ext.baseCSSPrefix+"font-icon"},{reference:"bodyElement",cls:Ext.baseCSSPrefix+"body-el",uiCls:"body-el"}]}]},toolDefaults:{zone:"tail"},relayedEvents:["beforecheckchange","checkchange"],constructor:function(e){this.callParent([e]),this.element.on({scope:this,tap:"maybeToggle"}),this.getGrid().relayEvents(this,this.relayedEvents)},toggle:function(){var e=this.getRecord();e.isExpanded()?this.collapse():e.isExpandable()&&this.expand()},collapse:function(){var e=this.getRecord();this.getGrid().fireEventedAction("nodecollapse",[this.parent,e,"collapse"],"doToggle",this)},expand:function(){var e,t,i,n,r=this.getRecord(),s=this.getGrid();if(s.fireEventedAction("nodeexpand",[this.parent,r,"expand"],"doToggle",this),r.isExpanded&&!r.isRoot()&&s.getSingleExpand())for(t=0,i=(e=r.parentNode.childNodes).length;t<i;++t)(n=e[t])!==r&&n.collapse()},refresh:function(e){var t;this.callParent([e]),(t=this.getRecord())&&this.doNodeUpdate(t)},updateCheckable:function(){this.syncCheckElement()},updateIconCls:function(e,t){var i=this.element,n=!e;this.iconElement.replaceCls(t,e),i.toggleCls(this.withIconCls,!n),i.toggleCls(this.withoutIconCls,n)},updateUi:function(e,t){this.callParent([e,t]),this._indent=null,this.syncIndent()},syncCheckElement:function(){var e,t=this,i=t.getRecord(),n=t.getCheckable(),r=t.checkedCls,s=t.trimodeCls,o=t.uncheckedCls,a=null,l=null;i&&(a=i.get(t.getCheckableField()),l=i.get(t.getCheckedField())),n&&!1!==a||!1!==n&&a&&null!=l||null===n&&null!=l?(t.addCls(t.checkableCls),e=t.shouldTri(),l||e?(t.getEnableTri()&&null!==n&&t.bubbleUp(i),e&&null!==n?t.replaceCls([r,o],s):t.replaceCls([s,o],r)):null===l&&null===n||t.replaceCls([r,s],o)):t.removeCls([t.checkableCls,r,s,o])},onCheckTap:function(e){var t,i,n,r=this,s=r.getRecord();s&&!1!==r.getCheckable()&&!s.get(!1===r.getCheckableField())&&(t=r.getCheckedField(),i=s.get(t),n=i&&!0!==i?this.getCheckOnTriTap():!i,!1!==r.fireEvent("beforecheckchange",r,n,i,s)&&(s.set(t,n),null!==r.getCheckable()&&(r.getAutoCheckChildren()&&s.cascade(function(e){e!==s&&e.set(t,n)}),r.getEnableTri()&&r.bubbleUp(s)),r.fireEvent("checkchange",r,n,s)))},bubbleUp:function(e){var t,i=e.parentNode;i&&(t=this.shouldTri(i,!0),i.set("checked",t?"tri":e.get("checked")),this.bubbleUp(i))},shouldTri:function(e,t){var i,n,r,s;return e=e||this.getRecord(),!(!this.getEnableTri()||!e)&&(i=this.getCheckedField(),null==(n=e.get(i))||t&&!e.isLeaf()?!!(r=e.childNodes)&&r.some(function(e,t){if(n=e.get(i),t&&(!!n!=!!s||n&&!0!==n))return!0;s=n}):"tri"===n)},privates:{doNodeUpdate:function(e){var t=this.getIconClsProperty(),i=this.element;t&&this.setIconCls(e.data[t]),i.toggleCls(this.loadingCls,e.data.loading),i.toggleCls(this.leafCls,e.isLeaf()),this.syncExpandCls(),this.syncIndent(),this.syncCheckElement()},getGrid:function(){return this.row.grid},syncExpandCls:function(){var e,t,i,n,r,s;this.updatingExpandCls||(t=(e=this.getRecord()).isExpandable(),i=this.element,n=e.isExpanded(),r=this.expandedCls,s=this.collapsedCls,this.updatingExpandCls=!0,i.toggleCls(this.expandableCls,t),t?(i.toggleCls(r,n),i.toggleCls(s,!n)):i.removeCls([r,s]),this.updatingExpandCls=!1)},syncIndent:function(){var e,t,i,n,r=this.getColumn();r&&(e=r._indentSize,t=this.getRecord(),e||(r._indentSize=e=parseInt(this.el.getStyle("background-position"),10)),t&&(i=(n=t.getTreeStore())&&n.rootVisible?t.data.depth:t.data.depth-1,this.indentElement.dom.style.width=i*e+"px"))},maybeToggle:function(e){var t=this.getRecord(),i=t.isExpanded(),n=this.getGrid();t.isLeaf()||n.getExpanderOnly()&&e.target!==this.expanderElement.dom||this.toggle(),t.isExpanded()!==i&&(e.nodeToggled=!0,e.stopEvent())},doToggle:function(e,t,i){t[i]()}}}),Ext.define("Ext.grid.column.Tree",{extend:Ext.grid.column.Column,xtype:"treecolumn",config:{cell:{xtype:"treecell"}},isTreeColumn:!0}),Ext.define("Ext.grid.plugin.TreeDragDrop",{extend:Ext.plugin.dd.DragDrop,alias:"plugin.treedragdrop",handle:"."+Ext.baseCSSPrefix+"gridrow",groups:"treeDD",dropIndicator:Ext.baseCSSPrefix+"tree-drop-indicator",dragText:"{0} selected node{1}",expandDelay:1e3,allowExpandOnHover:!0,init:function(e){e.on("initialize",this.onViewInitialize,this)},onViewInitialize:function(e){var t=this,i={};t.enableDrag&&(t.proxy&&(i.proxy=t.proxy),t.activateOnLongPress&&(i.activateOnLongPress=t.activateOnLongPress),t.dragZone=new Ext.grid.TreeDragZone(Ext.apply({element:e.bodyElement,view:e,dragText:t.dragText,handle:t.handle,groups:t.groups,scrollAmount:t.scrollAmount,containerScroll:t.containerScroll,constrain:Ext.getBody()},i))),t.enableDrop&&(t.dropZone=new Ext.grid.TreeDropZone({view:e,element:e.bodyElement,groups:t.groups,dropIndicator:t.dropIndicator,overCls:t.overCls,copy:t.copy,expandDelay:t.expandDelay,allowExpandOnHover:t.allowExpandOnHover}))}}),Ext.namespace("Ext.theme.is").Neptune=!0,Ext.theme.name="Neptune",Ext.theme.getDocCls=function(){return Ext.platformTags.desktop?"":"x-big"},Ext.define("Ext.theme.Material",{singleton:!0,_autoUpdateMeta:!0,_defaultWeight:"500",_colors:{red:{50:"#ffebee",100:"#ffcdd2",200:"#ef9a9a",300:"#e57373",400:"#ef5350",500:"#f44336",600:"#e53935",700:"#d32f2f",800:"#c62828",900:"#b71c1c",a100:"#ff8a80",a200:"#ff5252",a400:"#ff1744",a700:"#d50000"},pink:{50:"#fce4ec",100:"#f8bbd0",200:"#f48fb1",300:"#f06292",400:"#ec407a",500:"#e91e63",600:"#d81b60",700:"#c2185b",800:"#ad1457",900:"#880e4f",a100:"#ff80ab",a200:"#ff4081",a400:"#f50057",a700:"#c51162"},purple:{50:"#f3e5f5",100:"#e1bee7",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",600:"#8e24aa",700:"#7b1fa2",800:"#6a1b9a",900:"#4a148c",a100:"#ea80fc",a200:"#e040fb",a400:"#d500f9",a700:"#aa00ff"},"deep-purple":{50:"#ede7f6",100:"#d1c4e9",200:"#b39ddb",300:"#9575cd",400:"#7e57c2",500:"#673ab7",600:"#5e35b1",700:"#512da8",800:"#4527a0",900:"#311b92",a100:"#b388ff",a200:"#7c4dff",a400:"#651fff",a700:"#6200ea"},indigo:{50:"#e8eaf6",100:"#c5cae9",200:"#9fa8da",300:"#7986cb",400:"#5c6bc0",500:"#3f51b5",600:"#3949ab",700:"#303f9f",800:"#283593",900:"#1a237e",a100:"#8c9eff",a200:"#536dfe",a400:"#3d5afe",a700:"#304ffe"},blue:{50:"#e3f2fd",100:"#bbdefb",200:"#90caf9",300:"#64b5f6",400:"#42a5f5",500:"#2196f3",600:"#1e88e5",700:"#1976d2",800:"#1565c0",900:"#0d47a1",a100:"#82b1ff",a200:"#448aff",a400:"#2979ff",a700:"#2962ff"},"light-blue":{50:"#e1f5fe",100:"#b3e5fc",200:"#81d4fa",300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",600:"#039be5",700:"#0288d1",800:"#0277bd",900:"#01579b",a100:"#80d8ff",a200:"#40c4ff",a400:"#00b0ff",a700:"#0091ea"},cyan:{50:"#e0f7fa",100:"#b2ebf2",200:"#80deea",300:"#4dd0e1",400:"#26c6da",500:"#00bcd4",600:"#00acc1",700:"#0097a7",800:"#00838f",900:"#006064",a100:"#84ffff",a200:"#18ffff",a400:"#00e5ff",a700:"#00b8d4"},teal:{50:"#e0f2f1",100:"#b2dfdb",200:"#80cbc4",300:"#4db6ac",400:"#26a69a",500:"#009688",600:"#00897b",700:"#00796b",800:"#00695c",900:"#004d40",a100:"#a7ffeb",a200:"#64ffda",a400:"#1de9b6",a700:"#00bfa5"},green:{50:"#e8f5e9",100:"#c8e6c9",200:"#a5d6a7",300:"#81c784",400:"#66bb6a",500:"#4caf50",600:"#43a047",700:"#388e3c",800:"#2e7d32",900:"#1b5e20",a100:"#b9f6ca",a200:"#69f0ae",a400:"#00e676",a700:"#00c853"},"light-green":{50:"#f1f8e9",100:"#dcedc8",200:"#c5e1a5",300:"#aed581",400:"#9ccc65",500:"#8bc34a",600:"#7cb342",700:"#689f38",800:"#558b2f",900:"#33691e",a100:"#ccff90",a200:"#b2ff59",a400:"#76ff03",a700:"#64dd17"},lime:{50:"#f9fbe7",100:"#f0f4c3",200:"#e6ee9c",300:"#dce775",400:"#d4e157",500:"#cddc39",600:"#c0ca33",700:"#afb42b",800:"#9e9d24",900:"#827717",a100:"#f4ff81",a200:"#eeff41",a400:"#c6ff00",a700:"#aeea00"},yellow:{50:"#fffde7",100:"#fff9c4",200:"#fff59d",300:"#fff176",400:"#ffee58",500:"#ffeb3b",600:"#fdd835",700:"#fbc02d",800:"#f9a825",900:"#f57f17",a100:"#ffff8d",a200:"#ffff00",a400:"#ffea00",a700:"#ffd600"},amber:{50:"#fff8e1",100:"#ffecb3",200:"#ffe082",300:"#ffd54f",400:"#ffca28",500:"#ffc107",600:"#ffb300",700:"#ffa000",800:"#ff8f00",900:"#ff6f00",a100:"#ffe57f",a200:"#ffd740",a400:"#ffc400",a700:"#ffab00"},orange:{50:"#fff3e0",100:"#ffe0b2",200:"#ffcc80",300:"#ffb74d",400:"#ffa726",500:"#ff9800",600:"#fb8c00",700:"#f57c00",800:"#ef6c00",900:"#e65100",a100:"#ffd180",a200:"#ffab40",a400:"#ff9100",a700:"#ff6d00"},"deep-orange":{50:"#fbe9e7",100:"#ffccbc",200:"#ffab91",300:"#ff8a65",400:"#ff7043",500:"#ff5722",600:"#f4511e",700:"#e64a19",800:"#d84315",900:"#bf360c",a100:"#ff9e80",a200:"#ff6e40",a400:"#ff3d00",a700:"#dd2c00"},brown:{50:"#efebe9",100:"#d7ccc8",200:"#bcaaa4",300:"#a1887f",400:"#8d6e63",500:"#795548",600:"#6d4c41",700:"#5d4037",800:"#4e342e",900:"#3e2723"},grey:{50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121"},"blue-grey":{50:"#eceff1",100:"#cfd8dc",200:"#b0bec5",300:"#90a4ae",400:"#78909c",500:"#607d8b",600:"#546e7a",700:"#455a64",800:"#37474f",900:"#263238",1e3:"#11171a"}},hasFashion:function(){return!!window.Fashion&&!!Fashion.css&&Fashion.css.setVariables},setAutoUpdateMeta:function(e){this._autoUpdateMeta=e},getAutoUpdateMeta:function(){return this._autoUpdateMeta},getDefaultWeight:function(){return this._defaultWeight},setDarkMode:function(e){this.hasFashion()?Fashion.css.setVariables({"dark-mode":e?"true":"false"}):Ext.Logger.warn("Fashion was not found and is required to set CSS Variables for Material Theme")},setColors:function(e){var t,i,n={};this.hasFashion()?(e=Ext.merge({baseWeight:this.getDefaultWeight(),accentWeight:this.getDefaultWeight()},e),t=this._colors[e.base],i=this._colors[e.accent],t?t[e.baseWeight]?(n["base-color-name"]=e.base,this.getAutoUpdateMeta()&&this.updateMetaThemeColor(e.base,e.baseWeight)):Ext.Logger.warn("Base color weight: "+e.baseWeight+" is not a valid weight",this):e.base&&Ext.Logger.warn("Base color: "+e.base+" is not a valid material color",this),i?i[e.accentWeight]?n["accent-color-name"]=e.accent:Ext.Logger.warn("Accent color weight: "+e.accentWeight+" is not a valid weight",this):e.accent&&Ext.Logger.warn("Accent color: "+e.accent+" is not a valid material color",this),null!==e.darkMode&&(n["dark-mode"]=e.darkMode?"true":"false"),Fashion.css.setVariables(n)):Ext.Logger.warn("Fashion was not found and is required to set CSS Variables for Material Theme")},updateMetaThemeColor:function(e,t){var i,n=this._colors[e],r=Ext.manifest.material.toolbar.dynamic;t=t||this.getDefaultWeight(),Ext.platformTags.android&&Ext.platformTags.chrome&&r&&n&&(n=n[t],(i=Ext.query('meta[name="theme-color"]')[0])&&i.setAttribute("content",n))},getColors:function(){return this._colors}}),Ext.platformTags.android&&Ext.platformTags.chrome&&Ext.manifest.material&&Ext.manifest.material.toolbar&&(color=Ext.manifest.material.toolbar.color,toolbarIsDynamic=Ext.manifest.material.toolbar.dynamic,head=document.head,toolbarIsDynamic&&Ext.supports.CSSVariables&&(color=getComputedStyle(document.body).getPropertyValue("--primary-color-md"),color=color.replace(/ /g,"").replace(/^#(?:\\\\3)?/,"#")),color&&(meta=document.createElement("meta"),meta.setAttribute("name","theme-color"),meta.setAttribute("content",color),head.appendChild(meta))),Ext.namespace("Ext.theme.is").Material=!0,Ext.theme.name="Material",Ext.define(null,{override:"Ext.ux.gauge.needle.Abstract",compatibility:Ext.isIE10p,setTransform:function(e,t,i){var n=this.getNeedleGroup();this.callParent([e,t,i]),n.set({transform:getComputedStyle(n.dom).getPropertyValue("transform")})},updateStyle:function(e){var t;this.callParent([e]),Ext.isObject(e)&&"transform"in e&&(t=this.getNeedlePath()).set({transform:getComputedStyle(t.dom).getPropertyValue("transform")})}}),Ext.define("Ext.ux.ajax.Simlet",function(){var d=/([^?#]*)(#.*)?$/,h=/^(\\d{4})-(\\d{2})-(\\d{2})T(\\d{2}):(\\d{2}):(\\d{2}(?:\\.\\d*)?)Z$/,f=/^[+-]?\\d+$/,g=/^[+-]?\\d+\\.\\d+$/;return{alias:"simlet.basic",isSimlet:!0,responseProps:["responseText","responseXML","status","statusText","responseHeaders"],status:200,statusText:"OK",constructor:function(e){Ext.apply(this,e)},doGet:function(e){return this.handleRequest(e)},doPost:function(e){return this.handleRequest(e)},doRedirect:function(e){return!1},doDelete:function(e){var t=e.xhr.options.records;this.removeFromData(e,t)},exec:function(e){var t=this["do"+Ext.String.capitalize(e.method.toLowerCase())];return t?t.call(this,this.getCtx(e.method,e.url,e)):{status:405,statusText:"Method Not Allowed"}},getCtx:function(e,t,i){return{method:e,params:this.parseQueryString(t),url:t,xhr:i}},handleRequest:function(t){var i,n=this,r={};return Ext.Array.forEach(n.responseProps,function(e){e in n&&(i=n[e],Ext.isFunction(i)&&(i=i.call(n,t)),r[e]=i)}),r},openRequest:function(e,t,i,n){var r,s=this.getCtx(e,t),o=this.doRedirect(s);return"destroy"===i.action&&(e="delete"),o?r=o:(r=new Ext.ux.ajax.SimXhr({mgr:this.manager,simlet:this,options:i})).open(e,t,n),r},parseQueryString:function(e){var t,i,n,r,s,o,a,l,c=d.exec(e),u={};if(c&&c[1])for(s=0,o=(r=c[1].split("&")).length;s<o;++s)(n=r[s].split("="))[0]&&(t=decodeURIComponent(n.shift()),a=1<n.length?n.join("="):n[0],l=void 0,Ext.isDefined(a)&&(a=decodeURIComponent(a),f.test(a)?a=parseInt(a,10):g.test(a)?a=parseFloat(a):(l=h.exec(a))&&(a=new Date(Date.UTC(+l[1],l[2]-1,+l[3],+l[4],+l[5],+l[6])))),i=a,t in u?Ext.isArray(u[t])?u[t].push(i):u[t]=[u[t],i]:u[t]=i);return u},redirect:function(e,t,i){switch(arguments.length){case 2:if("string"==typeof t)break;i=t;case 1:t=e,e="GET"}return i&&(t=Ext.urlAppend(t,Ext.Object.toQueryString(i))),this.manager.openRequest(e,t)},removeFromData:function(e,t){var i,n=this,r=n.getData(e),s=(e.xhr.options.proxy&&e.xhr.options.proxy.getModel()||{}).idProperty||"id";Ext.each(t,function(e){var t=e.get(s);for(i=r.length;0<i--;)if(r[i][s]===t){n.deleteRecord(i);break}})}}}()),Ext.define("Ext.ux.ajax.DataSimlet",function(){function r(s,o){var e=s.direction,a=e&&"DESC"===e.toUpperCase()?-1:1;return function(e,t){var i=e[s.property],n=t[s.property],r=i<n?-1:n<i?1:0;return r||!o?r*a:o(e,t)}}function c(e,t){var i,n;for(i=t,n=e&&e.length;n;)i=r(e[--n],i);return i}return{extend:Ext.ux.ajax.Simlet,buildNodes:function(e,t){var i,n,r,s,o={data:[]},a=e.length;for(this.nodes[t]=o,n=0;n<a;++n)o.data.push(r=e[n]),s=r.text||r.title,r.id=t?t+"/"+s:s,i=r.children,(r.leaf=!i)||(delete r.children,this.buildNodes(i,r.id))},deleteRecord:function(e){this.data&&"function"!=typeof this.data&&Ext.Array.removeAt(this.data,e)},fixTree:function(e,t){var i,n=this,r=e.params.node;(i=n.nodes)||(n.nodes=i={},n.buildNodes(t,"")),(r=i[r])?(n.node&&(n.node.sortedData=n.sortedData,n.node.currentOrder=n.currentOrder),n.node=r,n.data=r.data,n.sortedData=r.sortedData,n.currentOrder=r.currentOrder):n.data=null},getData:function(e){var t,i,n,r,s,o=e.params,a=(o.filter||"")+(o.group||"")+"-"+(o.sort||"")+"-"+(o.dir||""),l=this.tree;return l&&this.fixTree(e,l),"function"==typeof(i=this.data)&&(t=!0,i=i.call(this,e)),i&&"--"!=a?t||a!==this.currentOrder?(e.filterSpec=o.filter&&Ext.decode(o.filter),e.groupSpec=o.group&&Ext.decode(o.group),n=o.sort,n=o.dir?[{direction:o.dir,property:n}]:o.sort?Ext.decode(o.sort):null,e.filterSpec&&((s=new Ext.util.FilterCollection).add(this.processFilters(e.filterSpec)),i=Ext.Array.filter(i,s.getFilterFn())),r=c(e.sortSpec=n),e.groupSpec&&(r=c([e.groupSpec],r)),i=Ext.isArray(i)?i.slice(0):i,r&&Ext.Array.sort(i,r),this.sortedData=i,this.currentOrder=a,i):this.sortedData:i||[]},processFilters:Ext.identityFn,getPage:function(e,t){var i=t,n=t.length,r=e.params.start||0,s=e.params.limit?Math.min(n,r+e.params.limit):n;return(r||s<n)&&(i=i.slice(r,s)),i},getGroupSummary:function(e,t,i){return t[0]},getSummary:function(e,t,i){var n,r,s,o=this,a=e.groupSpec.property,l={},c=[];function u(){n&&(c.push(o.getGroupSummary(a,n,e)),n=null)}return Ext.each(i,function(e){r=e[a],l[r]=!0}),Ext.each(t,function(e){return r=e[a],s!==r&&(u(),s=r),l[r]?(n?n.push(e):n=[e],!0):!c.length}),u(),c}}}()),Ext.define("Ext.ux.ajax.JsonSimlet",{extend:Ext.ux.ajax.DataSimlet,alias:"simlet.json",doGet:function(e){var t=this.getData(e),i=this.getPage(e,t),n=e.xhr.options.proxy&&e.xhr.options.proxy.getReader(),r=n&&n.getRootProperty(),s=this.callParent(arguments),o={};return r&&Ext.isArray(i)?(o[r]=i,o[n.getTotalProperty()]=t.length):o=i,e.groupSpec&&(o.summaryData=this.getSummary(e,t,i)),s.responseText=Ext.encode(o),s},doPost:function(e){return this.doGet(e)}}),Ext.define("Ext.ux.ajax.PivotSimlet",{extend:Ext.ux.ajax.JsonSimlet,alias:"simlet.pivot",lastPost:null,lastResponse:null,keysSeparator:"",grandTotalKey:"",doPost:function(e){var t=this.callParent(arguments);return this.lastResponse=this.processData(this.getData(e),Ext.decode(e.xhr.body)),t.responseText=Ext.encode(this.lastResponse),t},processData:function(e,t){var i,n,r,s,o,a,l,c=this,u=e.length,d={success:!0,leftAxis:[],topAxis:[],results:[]},h=new Ext.util.MixedCollection,f=new Ext.util.MixedCollection,g=new Ext.util.MixedCollection;for(c.lastPost=t,c.keysSeparator=t.keysSeparator,c.grandTotalKey=t.grandTotalKey,i=0;i<u;i++){for(s=c.extractValues(e[i],t.leftAxis,h),o=c.extractValues(e[i],t.topAxis,f),c.addResult(e[i],c.grandTotalKey,c.grandTotalKey,g),n=0;n<s.length;n++)for(c.addResult(e[i],s[n],c.grandTotalKey,g),r=0;r<o.length;r++)c.addResult(e[i],s[n],o[r],g);for(n=0;n<o.length;n++)c.addResult(e[i],c.grandTotalKey,o[n],g)}for(d.leftAxis=h.getRange(),d.topAxis=f.getRange(),u=g.getCount(),i=0;i<u;i++){for((a=g.getAt(i)).values={},n=0;n<t.aggregate.length;n++)l=t.aggregate[n],a.values[l.id]=c[l.aggregator](a.records,l.dataIndex,a.leftKey,a.topKey);delete a.records,d.results.push(a)}return h.clear(),f.clear(),g.clear(),d},getKey:function(e){return this.keysMap=this.keysMap||{},Ext.isDefined(this.keysMap[e])||(this.keysMap[e]=Ext.id()),this.keysMap[e]},extractValues:function(e,t,i){var n,r,s,o=t.length,a=[];for(r="",n=0;n<o;n++)s=t[n],r+=(0<n?this.keysSeparator:"")+this.getKey(e[s.dataIndex]),i.getByKey(r)||i.add(r,{key:r,value:e[s.dataIndex],dimensionId:s.id}),a.push(r);return a},addResult:function(e,t,i,n){var r=n.getByKey(t+"/"+i);(r=r||n.add(t+"/"+i,{leftKey:t,topKey:i,records:[]})).records.push(e)},sum:function(e,t,i,n){var r,s=e.length,o=0;for(r=0;r<s;r++)o+=Ext.Number.from(e[r][t],0);return o},avg:function(e,t,i,n){var r,s=e.length,o=0;for(r=0;r<s;r++)o+=Ext.Number.from(e[r][t],0);return 0<s?o/s:0},min:function(e,t,i,n){var r,s=[],o=e.length;for(r=0;r<o;r++)s.push(e[r][t]);return Ext.Array.min(s)},max:function(e,t,i,n){var r,s=[],o=e.length;for(r=0;r<o;r++)s.push(e[r][t]);return Ext.Array.max(s)},count:function(e,t,i,n){return e.length},variance:function(e,t,i,n){var r,s=Ext.pivot.Aggregators,o=e.length,a=s.avg.apply(s,arguments),l=0;if(0<a)for(r=0;r<o;r++)l+=Math.pow(Ext.Number.from(e[r][t],0)-a,2);return 0<l&&1<o?l/(o-1):0},varianceP:function(e,t,i,n){var r,s=Ext.pivot.Aggregators,o=e.length,a=s.avg.apply(s,arguments),l=0;if(0<a)for(r=0;r<o;r++)l+=Math.pow(Ext.Number.from(e[r][t],0)-a,2);return 0<l&&0<o?l/o:0},stdDev:function(e,t,i,n){var r=Ext.pivot.Aggregators,s=r.variance.apply(r,arguments);return 0<s?Math.sqrt(s):0},stdDevP:function(e,t,i,n){var r=Ext.pivot.Aggregators,s=r.varianceP.apply(r,arguments);return 0<s?Math.sqrt(s):0}}),Ext.define("Ext.ux.ajax.SimXhr",{readyState:0,mgr:null,simlet:null,constructor:function(e){Ext.apply(this,e),this.requestHeaders={}},abort:function(){this.timer&&(Ext.undefer(this.timer),this.timer=null),this.aborted=!0},getAllResponseHeaders:function(){var i=[];return Ext.isObject(this.responseHeaders)&&Ext.Object.each(this.responseHeaders,function(e,t){i.push(e+": "+t)}),i.join("\\r\\n")},getResponseHeader:function(e){var t=this.responseHeaders;return t&&t[e]||null},open:function(e,t,i,n,r){this.method=e,this.url=t,this.async=!1!==i,this.user=n,this.password=r,this.setReadyState(1)},overrideMimeType:function(e){this.mimeType=e},schedule:function(){var e=this,t=e.simlet.delay||e.mgr.delay;t?e.timer=Ext.defer(function(){e.onTick()},t):e.onTick()},send:function(e){this.body=e,this.async?this.schedule():this.onComplete()},setReadyState:function(e){this.readyState!==e&&(this.readyState=e,this.onreadystatechange())},setRequestHeader:function(e,t){this.requestHeaders[e]=t},onreadystatechange:Ext.emptyFn,onComplete:function(){var me=this,callback,text;me.readyState=4,Ext.apply(me,me.simlet.exec(me)),callback=me.jsonpCallback,callback&&(text=callback+"("+me.responseText+")",eval(text))},onTick:function(){this.timer=null,this.onComplete(),this.onreadystatechange&&this.onreadystatechange()}}),Ext.define("Ext.ux.ajax.SimManager",{singleton:!0,defaultType:"basic",delay:150,ready:!1,constructor:function(){this.simlets=[]},getSimlet:function(e){var t,i,n,r=e.indexOf("?"),s=this.simlets,o=s.length;for(r<0&&(r=e.indexOf("#")),0<r&&(e=e.substring(0,r)),t=0;t<o;++t)if((n=(i=s[t]).url)instanceof RegExp?n.test(e):n===e)return i;return this.defaultSimlet},getXhr:function(e,t,i,n){var r=this.getSimlet(t);return r?r.openRequest(e,t,i,n):null},init:function(e){var s=this;return Ext.apply(s,e),s.ready||(s.ready=!0,"defaultSimlet"in s||(s.defaultSimlet=new Ext.ux.ajax.Simlet({status:404,statusText:"Not Found"})),s._openRequest=Ext.data.Connection.prototype.openRequest,Ext.data.request.Ajax.override({openRequest:function(e,t,i){var n=!e.nosim&&s.getXhr(t.method,t.url,e,i);return n=n||this.callParent(arguments)}}),Ext.data.JsonP&&Ext.data.JsonP.self.override({createScript:function(e,t,i){var n=Ext.urlAppend(e,Ext.Object.toQueryString(t)),r=!i.nosim&&s.getXhr("GET",n,i,!0);return r=r||this.callParent(arguments)},loadScript:function(e){var t=e.script;t.simlet?(t.jsonpCallback=e.params[e.callbackKey],t.send(null),e.script=document.createElement("script")):this.callParent(arguments)}})),s},openRequest:function(e,t,i){var n={method:e,url:t};return this._openRequest.call(Ext.data.Connection.prototype,{},n,i)},register:function(e){var i=this;function n(e){var t=e;t.isSimlet||(t=Ext.create("simlet."+(t.type||t.stype||i.defaultType),e)),i.simlets.push(t),t.manager=i}return i.init(),Ext.isArray(e)?Ext.each(e,n):e.isSimlet||e.url?n(e):Ext.Object.each(e,function(e,t){t.url=e,n(t)}),i}}),Ext.define("Ext.ux.ajax.XmlSimlet",{extend:Ext.ux.ajax.DataSimlet,alias:"simlet.xml",xmlTpl:["<{root}>\\n",'<tpl for="data">',"    <{parent.record}>\\n",'<tpl for="parent.fields">',"        <{name}>{[parent[values.name]]}</{name}>\\n","</tpl>","    </{parent.record}>\\n","</tpl>","</{root}>"],doGet:function(e){var t,i,n=this.getData(e),r=this.getPage(e,n),s=e.xhr.options.operation.getProxy(),o=s&&s.getReader(),a=o&&o.getModel(),l=this.callParent(arguments),c={data:r,reader:o,fields:a&&a.fields,root:o&&o.getRootProperty(),record:o&&o.record};return e.groupSpec&&(c.summaryData=this.getSummary(e,n,r)),t=this.xmlTpl?Ext.XTemplate.getTpl(this,"xmlTpl").apply(c):n,"undefined"!=typeof DOMParser?i=(new DOMParser).parseFromString(t,"text/xml"):((i=new ActiveXObject("Microsoft.XMLDOM")).async=!1,i.loadXML(t)),l.responseText=t,l.responseXML=i,l},fixTree:function(){var e=[];this.callParent(arguments),this.buildTreeXml(this.data,e),this.data=e.join("")},buildTreeXml:function(e,i){var t=this.rootProperty,n=this.recordProperty;i.push("<",t,">"),Ext.Array.forEach(e,function(e){var t;for(t in i.push("<",n,">"),e)"children"===t?this.buildTreeXml(e.children,i):i.push("<",t,">",e[t],"</",t,">");i.push("</",n,">")}),i.push("</",t,">")}}),Ext.define("Ext.ux.event.Driver",{extend:Ext.util.Observable,active:null,specialKeysByName:{PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40},specialKeysByCode:{},getTextSelection:function(e){var t,i,n,r,s=e.ownerDocument;return"number"==typeof e.selectionStart?(n=e.selectionStart,r=e.selectionEnd):s.selection&&(t=s.selection.createRange(),(i=e.createTextRange()).setEndPoint("EndToStart",t),r=(n=i.text.length)+t.text.length),[n,r]},getTime:function(){return(new Date).getTime()},getTimestamp:function(){return this.getTime()-this.startTime},onStart:function(){},onStop:function(){},start:function(){this.active||(this.active=new Date,this.startTime=this.getTime(),this.onStart(),this.fireEvent("start",this))},stop:function(){this.active&&(this.active=null,this.onStop(),this.fireEvent("stop",this))}},function(){var i=this.prototype;Ext.Object.each(i.specialKeysByName,function(e,t){i.specialKeysByCode[t]=e})}),Ext.define("Ext.ux.event.Maker",{eventQueue:[],startAfter:500,timerIncrement:500,currentTiming:0,constructor:function(o){var a=this;return a.currentTiming=a.startAfter,Ext.isArray(o)||(o=[o]),Ext.Array.each(o,function(s){s.el=s.el||"el",Ext.Array.each(Ext.ComponentQuery.query(s.cmpQuery),function(e){var t,i,n,r={};n=s.domQuery?e.el.down(s.domQuery):e[s.el],r.target="#"+n.dom.id,r.type=s.type,r.button=o.button||0,t=n.getX()+n.getWidth()/2,i=n.getY()+n.getHeight()/2,r.xy=[t,i],r.ts=a.currentTiming,a.currentTiming+=a.timerIncrement,a.eventQueue.push(r)}),s.screenshot&&(a.eventQueue[a.eventQueue.length-1].screenshot=!0)}),a.eventQueue}}),Ext.define("Ext.ux.event.Player",function(s){var o,a={},l={},c={},u={},t={resize:1,reset:1,submit:1,change:1,select:1,error:1,abort:1};Ext.each(["click","dblclick","mouseover","mouseout","mousedown","mouseup","mousemove"],function(e){t[e]=a[e]=l[e]={bubbles:!0,cancelable:"mousemove"!==e,detail:1,screenX:0,screenY:0,clientX:0,clientY:0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,button:0}}),Ext.each(["keydown","keyup","keypress"],function(e){t[e]=a[e]=c[e]={bubbles:!0,cancelable:!0,ctrlKey:!1,altKey:!1,shiftKey:!1,metaKey:!1,keyCode:0,charCode:0}}),Ext.each(["blur","change","focus","resize","scroll","select"],function(e){a[e]=u[e]={bubbles:e in t,cancelable:!1,detail:1}});var e={8:function(e,t,i){t<i?e.value=e.value.substring(0,t)+e.value.substring(i):0<t&&(e.value=e.value.substring(0,--t)+e.value.substring(i)),this.setTextSelection(e,t,t)},46:function(e,t,i){t<i?e.value=e.value.substring(0,t)+e.value.substring(i):t<e.value.length-1&&(e.value=e.value.substring(0,t)+e.value.substring(t+1)),this.setTextSelection(e,t,t)}};return{extend:Ext.ux.event.Driver,keyFrameEvents:{click:!0},pauseForAnimations:!0,speed:1,stallTime:0,_inputSpecialKeys:{INPUT:e,TEXTAREA:Ext.apply({},e)},tagPathRegEx:/(\\w+)(?:\\[(\\d+)\\])?/,xpathRe:/^[#~](?:[a-z][-a-z0-9_]*)(?:\\/[a-z]+)*$/i,constructor:function(e){var t=this;t.callParent(arguments),t.timerFn=function(){t.onTick()},t.attachTo=t.attachTo||window,t.counter=0,o=t.attachTo.document},getElementFromXPath:function(e){var t,i,n,r,s,o,a=e.split("/"),l=this.tagPathRegEx,c=this.attachTo.document;for(c="~"===a[0]?c.body:c.getElementById(a[0].substring(1)),t=1,i=a.length;c&&t<i;++t){for(r=(n=l.exec(a[t]))[2]?parseInt(n[2],10):1,s=n[1].toUpperCase(),o=c.firstChild;o;o=o.nextSibling)if(o.tagName===s){if(1===r)break;--r}c=o}return c},locateElement:function(e){var t,i,n,r,s;return this.xpathRe.test(e)?r=this.getElementFromXPath(e):(s=e.split("=>"),i=Ext.String.trim(s[0]),n=Ext.String.trim(s[1]),r=i?(t=Ext.first(i))&&t.el:Ext.getBody(),n&&r&&(r=(r=Ext.query(n,!0,r))&&r[0])),r},offsetToRangeCharacterMove:function(e,t){return t-(e.value.slice(0,t).split("\\r\\n").length-1)},setTextSelection:function(e,t,i){var n,r;t<0&&(t+=e.value.length),null==i&&(i=t),i<0&&(i+=e.value.length),"number"==typeof e.selectionStart?(e.selectionStart=t,e.selectionEnd=i):(n=e.createTextRange(),r=this.offsetToRangeCharacterMove(e,t),n.collapse(!0),t===i?n.move("character",r):(n.moveEnd("character",this.offsetToRangeCharacterMove(e,i)),n.moveStart("character",r)),n.select())},getTimeIndex:function(){return(this.getTimestamp()-this.stallTime)*this.speed},makeToken:function(e,t){var i,n=this;e[t]=!0,e.defer=function(){e[t]=!1,i=n.getTime()},e.finish=function(){e[t]=!0,n.stallTime+=n.getTime()-i,n.schedule()}},nextEvent:function(e){var t=++this.queueIndex;this.keyFrameEvents[e.type]&&Ext.Array.insert(this.eventQueue,t,[{keyframe:!0,ts:e.ts}])},peekEvent:function(){var e=this.eventQueue[this.queueIndex]||null;return e&&void 0===e.seq&&(e.seq=this.counter++),e},replaceEvent:function(e,t){for(var i,n=0,r=t.length;n<r;++n)n&&(delete(i=t[n-1]).afterplay,delete i.screenshot,delete t[n].beforeplay);Ext.Array.replace(this.eventQueue,null==e?this.queueIndex:e,1,t)},processEvents:function(){for(var e,t=this,i=t.pauseForAnimations&&t.attachTo.Ext.fx.Manager.items;null!==(e=t.peekEvent());){if(i&&i.getCount())return!0;if(e.keyframe){if(!t.processKeyFrame(e))return!1;t.nextEvent(e)}else{if(!(e.ts<=t.getTimeIndex()&&!1!==t.fireEvent("beforeplay",t,e)&&t.playEvent(e)))return!0;t.nextEvent(e)}}return t.stop(),!1},processKeyFrame:function(e){return e.defer||(this.makeToken(e,"done"),this.fireEvent("keyframe",this,e)),e.done},injectEvent:function(e,t){var i,n=t.type,r=Ext.apply({},t,a[n]);return"type"===n?(i=this._inputSpecialKeys[e.tagName])?this.injectTypeInputEvent(e,t,i):this.injectTypeEvent(e,t):"focus"===n&&e.focus?(e.focus(),!0):"blur"===n&&e.blur?(e.blur(),!0):"scroll"===n?(e.scrollLeft=t.pos[0],e.scrollTop=t.pos[1],!0):"mduclick"===n?this.injectEvent(e,Ext.applyIf({type:"mousedown"},t))&&this.injectEvent(e,Ext.applyIf({type:"mouseup"},t))&&this.injectEvent(e,Ext.applyIf({type:"click"},t)):l[n]?s.injectMouseEvent(e,r,this.attachTo):c[n]?s.injectKeyEvent(e,r,this.attachTo):!!u[n]&&s.injectUIEvent(e,n,r.bubbles,r.cancelable,r.view||this.attachTo,r.detail)},injectTypeEvent:function(e,t){var i,n,r,s,o,a=t.text,l=[];if(a)for(delete t.text,o=a.toUpperCase(),r=0,s=a.length;r<s;++r)i=a.charCodeAt(r),n=o.charCodeAt(r),l.push(Ext.applyIf({type:"keydown",charCode:n,keyCode:n},t),Ext.applyIf({type:"keypress",charCode:i,keyCode:i},t),Ext.applyIf({type:"keyup",charCode:n,keyCode:n},t));else l.push(Ext.applyIf({type:"keydown",charCode:t.keyCode},t),Ext.applyIf({type:"keyup",charCode:t.keyCode},t));for(r=0,s=l.length;r<s;++r)this.injectEvent(e,l[r]);return!0},injectTypeInputEvent:function(e,t,i){var n,r,s=t.text;if(i){if(n=this.getTextSelection(e),!s)return(i=i[t.keyCode])?(i.call(this,e,n[0],n[1]),!0):("caret"in t?this.setTextSelection(e,t.caret,t.caret):t.selection&&this.setTextSelection(e,t.selection[0],t.selection[1]),this.injectTypeEvent(e,t));r=n[0],e.value=e.value.substring(0,r)+s+e.value.substring(n[1]),r+=s.length,this.setTextSelection(e,r,r)}return!0},playEvent:function(e){var t,i=this.locateElement(e.target),n=this.getTimeIndex(),r=e.timeout;return void 0===e.startedAt&&(e.startedAt=n),i?!!this.playEventHook(e,"beforeplay")&&(e.injected||(e.injected=!0,t=this.translateEvent(e,i),this.injectEvent(i,t)),this.playEventHook(e,"afterplay")):(null!==r&&(r=r||3e4,n-e.startedAt>r&&this.playEventHook(e,"timeout","onEventTimeout")),!1)},playEventHook:function(e,t,i){var n=t+".done",r=t+".fired",s=i||e[t];return!(s&&!e[n])||(e[r]||(e[r]=!0,this.makeToken(e,n),this.eventScope&&Ext.isString(s)&&(s=this.eventScope[s]),s&&s.call(this.eventScope||this,e)),!1)},schedule:function(){this.timer||(this.timer=Ext.defer(this.timerFn,10))},_translateAcross:["type","button","charCode","keyCode","caret","pos","text","selection"],translateEvent:function(e,t){for(var i,n,r={},s=e.modKeys||"",o=this._translateAcross,a=o.length;a--;)(i=o[a])in e&&(r[i]=e[i]);return r.altKey=0<s.indexOf("A"),r.ctrlKey=0<s.indexOf("C"),r.metaKey=0<s.indexOf("M"),r.shiftKey=0<s.indexOf("S"),t&&"x"in e?((n=Ext.fly(t).getXY())[0]+=e.x,n[1]+=e.y):"x"in e?n=[e.x,e.y]:"px"in e&&(n=[e.px,e.py]),n&&(r.clientX=r.screenX=n[0],r.clientY=r.screenY=n[1]),e.key&&(r.keyCode=this.specialKeysByName[e.key]),"wheel"===e.type&&("onwheel"in this.attachTo.document?(r.wheelX=e.dx,r.wheelY=e.dy):(r.type="mousewheel",r.wheelDeltaX=-40*e.dx,r.wheelDeltaY=r.wheelDelta=-40*e.dy)),r},onStart:function(){this.queueIndex=0,this.schedule()},onStop:function(){this.timer&&(Ext.undefer(this.timer),this.timer=null)},onTick:function(){this.timer=null,this.processEvents()&&this.schedule()},statics:{ieButtonCodeMap:{0:1,1:4,2:2},injectKeyEvent:function(e,t,i){var n=t.type,r=null;if("textevent"===n&&(n="keypress"),i=i||window,o.createEvent){try{(r=o.createEvent("KeyEvents")).initKeyEvent(n,t.bubbles,t.cancelable,i,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.keyCode,t.charCode)}catch(e){try{r=o.createEvent("Events")}catch(e){r=o.createEvent("UIEvents")}finally{r.initEvent(n,t.bubbles,t.cancelable),r.view=i,r.altKey=t.altKey,r.ctrlKey=t.ctrlKey,r.shiftKey=t.shiftKey,r.metaKey=t.metaKey,r.keyCode=t.keyCode,r.charCode=t.charCode}}e.dispatchEvent(r)}else{if(!o.createEventObject)return!1;(r=o.createEventObject()).bubbles=t.bubbles,r.cancelable=t.cancelable,r.view=i,r.ctrlKey=t.ctrlKey,r.altKey=t.altKey,r.shiftKey=t.shiftKey,r.metaKey=t.metaKey,r.keyCode=0<t.charCode?t.charCode:t.keyCode,e.fireEvent("on"+n,r)}return!0},injectMouseEvent:function(e,t,i){var n=t.type,r=null;if(i=i||window,o.createEvent)(r=o.createEvent("MouseEvents")).initMouseEvent?r.initMouseEvent(n,t.bubbles,t.cancelable,i,t.detail,t.screenX,t.screenY,t.clientX,t.clientY,t.ctrlKey,t.altKey,t.shiftKey,t.metaKey,t.button,t.relatedTarget):((r=o.createEvent("UIEvents")).initEvent(n,t.bubbles,t.cancelable),r.view=i,r.detail=t.detail,r.screenX=t.screenX,r.screenY=t.screenY,r.clientX=t.clientX,r.clientY=t.clientY,r.ctrlKey=t.ctrlKey,r.altKey=t.altKey,r.metaKey=t.metaKey,r.shiftKey=t.shiftKey,r.button=t.button,r.relatedTarget=t.relatedTarget),t.relatedTarget&&!r.relatedTarget&&("mouseout"===n?r.toElement=t.relatedTarget:"mouseover"===n&&(r.fromElement=t.relatedTarget)),e.dispatchEvent(r);else{if(!o.createEventObject)return!1;(r=o.createEventObject()).bubbles=t.bubbles,r.cancelable=t.cancelable,r.view=i,r.detail=t.detail,r.screenX=t.screenX,r.screenY=t.screenY,r.clientX=t.clientX,r.clientY=t.clientY,r.ctrlKey=t.ctrlKey,r.altKey=t.altKey,r.metaKey=t.metaKey,r.shiftKey=t.shiftKey,r.button=s.ieButtonCodeMap[t.button]||0,r.relatedTarget=t.relatedTarget,e.fireEvent("on"+n,r)}return!0},injectUIEvent:function(e,t,i){var n=null;if(i=i||window,o.createEvent)(n=o.createEvent("UIEvents")).initUIEvent(t.type,t.bubbles,t.cancelable,i,t.detail),e.dispatchEvent(n);else{if(!o.createEventObject)return!1;(n=o.createEventObject()).bubbles=t.bubbles,n.cancelable=t.cancelable,n.view=i,n.detail=t.detail,e.fireEvent("on"+t.type,n)}return!0}}}}),Ext.define("Ext.ux.event.Recorder",function(r){var e,t;function i(){var e,t=arguments.length,i={kind:"other"};for(e=0;e<t;++e)Ext.apply(i,arguments[e]);return i.alt&&!i.event&&(i.event=i.alt),i}function n(e){return i({kind:"keyboard",modKeys:!0,key:!0},e)}function s(e){return i({kind:"mouse",button:!0,modKeys:!0,xy:!0},e)}for(t in e={keydown:n(),keypress:n(),keyup:n(),dragmove:s({alt:"mousemove",pageCoords:!0,whileDrag:!0}),mousemove:s({pageCoords:!0}),mouseover:s(),mouseout:s(),click:s(),wheel:s({wheel:!0}),mousedown:s({press:!0}),mouseup:s({release:!0}),scroll:i({listen:!1}),focus:i(),blur:i()})e[t].event||(e[t].event=t);return e.wheel.event=null,{extend:Ext.ux.event.Driver,eventsToRecord:e,ignoreIdRegEx:/ext-gen(?:\\d+)/,inputRe:/^(input|textarea)$/i,constructor:function(e){var t=e&&e.eventsToRecord;t&&(this.eventsToRecord=Ext.apply(Ext.apply({},this.eventsToRecord),t),delete e.eventsToRecord),this.callParent(arguments),this.clear(),this.modKeys=[],this.attachTo=this.attachTo||window},clear:function(){this.eventsRecorded=[]},listenToEvent:function(e){var t=this,i=t.attachTo.document.body,n=function(){return t.onEvent.apply(t,arguments)},r={};return i.attachEvent&&i.ownerDocument.documentMode<10?(e="on"+e,i.attachEvent(e,n),r.destroy=function(){n&&(i.detachEvent(e,n),n=null)}):(i.addEventListener(e,n,!0),r.destroy=function(){n&&(i.removeEventListener(e,n,!0),n=null)}),r},coalesce:function(e,t){var i=this.eventsRecorded,n=i.length,r=n&&i[n-1],s=1<n&&i[n-2],o=2<n&&i[n-3];if(!r)return!1;if("mousemove"===e.type){if("mousemove"===r.type&&e.ts-r.ts<200)return e.ts=r.ts,i[n-1]=e,!0}else if("click"===e.type){if(s&&"mouseup"===r.type&&"mousedown"===s.type&&e.button===r.button&&e.button===s.button&&e.target===r.target&&e.target===s.target&&this.samePt(e,r)&&this.samePt(e,s))return i.pop(),s.type="mduclick",!0}else if("keyup"===e.type)if(s&&"keypress"===r.type&&"keydown"===s.type){if(e.target===r.target&&e.target===s.target)return i.pop(),s.type="type",s.text=String.fromCharCode(r.charCode),delete s.charCode,delete s.keyCode,o&&"type"===o.type&&o.text&&o.target===s.target&&(o.text+=s.text,i.pop()),!0}else{if(this.completeKeyStroke(r,e))return r.type="type",this.completeSpecialKeyStroke(t.target,r,e),!0;if("scroll"===r.type&&this.completeKeyStroke(s,e))return s.type="type",this.completeSpecialKeyStroke(t.target,s,e),i.pop(),i.pop(),i.push(r,s),!0}return!1},completeKeyStroke:function(e,t){return!(!e||"keydown"!==e.type||e.keyCode!==t.keyCode)&&(delete e.charCode,!0)},completeSpecialKeyStroke:function(e,t,i){var n=this.specialKeysByCode[i.keyCode];return!(!n||!this.inputRe.test(e.tagName))&&(delete t.keyCode,t.key=n,t.selection=this.getTextSelection(e),t.selection[0]===t.selection[1]&&(t.caret=t.selection[0],delete t.selection),!0)},getElementXPath:function(e){var t,i,n,r,s=!1,o=[];for(n=e;n;n=n.parentNode){if(n===this.attachTo.document.body){o.unshift("~"),s=!0;break}if(n.id&&!this.ignoreIdRegEx.test(n.id)){o.unshift("#"+n.id),s=!0;break}for(t=1,i=n;i=i.previousSibling;)i.tagName===n.tagName&&++t;r=n.tagName.toLowerCase(),t<2?o.unshift(r):o.unshift(r+"["+t+"]")}return s?o.join("/"):null},getRecordedEvents:function(){return this.eventsRecorded},onEvent:function(e){var t,i,n,r,s=this,o=new Ext.event.Event(e),a=s.eventsToRecord[o.type],l={type:o.type,ts:s.getTimestamp(),target:s.getElementXPath(o.target)};a&&l.target&&(t=(t=o.target.ownerDocument).defaultView||t.parentWindow)===s.attachTo&&(s.eventsToRecord.scroll&&s.syncScroll(o.target),a.xy&&(r=o.getXY(),a.pageCoords||!l.target?(l.px=r[0],l.py=r[1]):(n=Ext.fly(o.getTarget()).getXY(),r[0]-=n[0],r[1]-=n[1],l.x=r[0],l.y=r[1])),a.button&&(l.button="buttons"in e?e.buttons:e.button,!l.button&&a.whileDrag)||(a.wheel&&((l.type="wheel")===a.event?(l.dx=e.deltaX,l.dy=e.deltaY):"number"==typeof e.wheelDeltaX?(l.dx=-.025*e.wheelDeltaX,l.dy=-.025*e.wheelDeltaY):e.wheelDelta?l.dy=-.025*e.wheelDelta:e.detail&&(l.dy=e.detail)),a.modKeys&&(s.modKeys[0]=o.altKey?"A":"",s.modKeys[1]=o.ctrlKey?"C":"",s.modKeys[2]=o.metaKey?"M":"",s.modKeys[3]=o.shiftKey?"S":"",(i=s.modKeys.join(""))&&(l.modKeys=i)),a.key&&(l.charCode=o.getCharCode(),l.keyCode=o.getKey()),s.coalesce(l,o)?s.fireEvent("coalesce",s,l):(s.eventsRecorded.push(l),s.fireEvent("add",s,l))))},onStart:function(){var i=this,e=i.attachTo.Ext.dd.DragDropManager,t=i.attachTo.Ext.EventObjectImpl.prototype,n=[];r.prototype.eventsToRecord.wheel.event="onwheel"in i.attachTo.document?"wheel":"mousewheel",i.listeners=[],Ext.Object.each(i.eventsToRecord,function(e,t){t&&!1!==t.listen&&(t.event||(t.event=e),t.alt&&t.alt!==e?i.eventsToRecord[t.alt]||n.push(t):i.listeners.push(i.listenToEvent(t.event)))}),Ext.each(n,function(e){i.eventsToRecord[e.alt]=e,i.listeners.push(i.listenToEvent(e.alt))}),i.ddmStopEvent=e.stopEvent,e.stopEvent=Ext.Function.createSequence(e.stopEvent,function(e){i.onEvent(e)}),i.evStopEvent=t.stopEvent,t.stopEvent=Ext.Function.createSequence(t.stopEvent,function(){i.onEvent(this)})},onStop:function(){Ext.destroy(this.listeners),this.listeners=null,this.attachTo.Ext.dd.DragDropManager.stopEvent=this.ddmStopEvent,this.attachTo.Ext.EventObjectImpl.prototype.stopEvent=this.evStopEvent},samePt:function(e,t){return e.x===t.x&&e.y===t.y},syncScroll:function(e){var t,i,n,r,s,o,a,l=this.getTimestamp();for(a=e;a&&(t=a.$lastScrollLeft,i=a.$lastScrollTop,n=a.scrollLeft,r=a.scrollTop,s=!1,t!==n&&(n&&(s=!0),a.$lastScrollLeft=n),i!==r&&(r&&(s=!0),a.$lastScrollTop=r),s&&(this.eventsRecorded.push(o={type:"scroll",target:this.getElementXPath(a),ts:l,pos:[n,r]}),this.fireEvent("add",this,o)),"BODY"!==a.tagName);a=a.parentNode);}}}),Ext.define("Ext.ux.gauge.needle.Abstract",{mixins:[Ext.mixin.Factoryable],alias:"gauge.needle.abstract",isNeedle:!0,config:{path:null,innerRadius:25,outerRadius:"100% - 20",style:null,radius:0,gauge:null},constructor:function(e){this.initConfig(e)},applyInnerRadius:function(e){return this.getGauge().getRadiusFn(e)},applyOuterRadius:function(e){return this.getGauge().getRadiusFn(e)},updateRadius:function(){this.regeneratePath()},setTransform:function(e,t,i){this.getNeedleGroup().setStyle("transform","translate("+e+"px,"+t+"px) rotate("+i+"deg)")},applyPath:function(e){return Ext.isFunction(e)?e:null},updatePath:function(e){this.regeneratePath(e)},regeneratePath:function(e){e=e||this.getPath();var t=this.getRadius(),i=this.getInnerRadius()(t),n=this.getOuterRadius()(t),r=i<n?e(i,n):"";this.getNeedlePath().dom.setAttribute("d",r)},getNeedleGroup:function(){var e=this.getGauge(),t=this.needleGroup;return t||(t=this.needleGroup=Ext.get(document.createElementNS(e.svgNS,"g")),e.getSvg().appendChild(t)),t},getNeedlePath:function(){var e=this.pathElement;return e||((e=this.pathElement=Ext.get(document.createElementNS(this.getGauge().svgNS,"path"))).dom.setAttribute("class",Ext.baseCSSPrefix+"gauge-needle"),this.getNeedleGroup().appendChild(e)),e},updateStyle:function(e){var t=this.getNeedlePath();Ext.isObject(e)?t.setStyle(e):t.dom.removeAttribute("style")},destroy:function(){this.pathElement=Ext.destroy(this.pathElement),this.needleGroup=Ext.destroy(this.needleGroup),this.setGauge(null)}}),Ext.define("Ext.ux.gauge.Gauge",{alternateClassName:"Ext.ux.Gauge",extend:Ext.Gadget,xtype:"gauge",config:{padding:10,trackStart:135,trackLength:270,angleOffset:0,minValue:0,maxValue:100,value:50,needle:null,needleDefaults:{cached:!0,$value:{type:"diamond"}},clockwise:!0,textTpl:['<tpl>{value:number("0.00")}%</tpl>'],textAlign:"c-c",textOffset:{dx:0,dy:0},trackStyle:{outerRadius:"100%",innerRadius:"100% - 20",round:!1},valueStyle:{outerRadius:"100% - 2",innerRadius:"100% - 18",round:!1},animation:!0},baseCls:Ext.baseCSSPrefix+"gauge",template:[{reference:"bodyElement",children:[{reference:"textElement",cls:Ext.baseCSSPrefix+"gauge-text"}]}],defaultBindProperty:"value",pathAttributes:{fill:!0,fillOpacity:!0,stroke:!0,strokeOpacity:!0,strokeWidth:!0},easings:{linear:Ext.identityFn,in:function(e){return e*e*e},out:function(e){return--e*e*e+1},inOut:function(e){return e<.5?4*e*e*e:(e-1)*(2*e-2)*(2*e-2)+1}},resizeDelay:0,resizeTimerId:0,size:null,svgNS:"http://www.w3.org/2000/svg",svg:null,defs:null,trackArc:null,valueArc:null,trackGradient:null,valueGradient:null,fx:null,fxValue:0,fxAngleOffset:0,constructor:function(e){this.fitSectorInRectCache={startAngle:null,lengthAngle:null,minX:null,maxX:null,minY:null,maxY:null},this.interpolator=this.createInterpolator(),this.callParent([e]),this.el.on("resize","onElementResize",this)},doDestroy:function(){var e=this;Ext.undefer(e.resizeTimerId),e.el.un("resize","onElementResize",e),e.stopAnimation(),e.setNeedle(null),e.trackGradient=Ext.destroy(e.trackGradient),e.valueGradient=Ext.destroy(e.valueGradient),e.defs=Ext.destroy(e.defs),e.svg=Ext.destroy(e.svg),e.callParent()},onElementResize:function(e,t){this.handleResize(t)},handleResize:function(e,t){var i=this,n=i.element;n&&(e=e||n.getSize())&&e.width&&e.height&&(i.resizeTimerId=Ext.undefer(i.resizeTimerId),t||!i.resizeDelay?(i.size=e,i.resizeHandler(e)):i.resizeTimerId=Ext.defer(i.handleResize,i.resizeDelay,i,[e,!0]))},updateMinValue:function(e){this.interpolator.setDomain(e,this.getMaxValue()),this.isConfiguring||this.render()},updateMaxValue:function(e){this.interpolator.setDomain(this.getMinValue(),e),this.isConfiguring||this.render()},updateAngleOffset:function(e,t){var i=this,n=i.getAnimation();i.fxAngleOffset=e,i.isConfiguring||(n.duration?i.animate(t,e,n.duration,i.easings[n.easing],function(e){i.fxAngleOffset=e,i.render()}):i.render())},applyTrackStart:function(e){return(e<0||360<=e)&&Ext.raise("'trackStart' should be within [0, 360)."),e},applyTrackLength:function(e){return(e<=0||360<e)&&Ext.raise("'trackLength' should be within (0, 360]."),e},updateTrackStart:function(e){this.isConfiguring||this.render()},updateTrackLength:function(e){this.interpolator.setRange(0,e),this.isConfiguring||this.render()},applyPadding:function(e){var t;return"string"==typeof e?(t=parseFloat(e)/100,function(e){return e*t}):function(){return e}},updatePadding:function(){this.isConfiguring||this.render()},applyValue:function(e){var t=this.getMinValue(),i=this.getMaxValue();return Math.min(Math.max(e,t),i)},updateValue:function(e,t){var i=this,n=i.getAnimation();i.fxValue=e,i.isConfiguring||(i.writeText(),n.duration?i.animate(t,e,n.duration,i.easings[n.easing],function(e){i.fxValue=e,i.render()}):i.render())},applyTextTpl:function(e){return e&&!e.isTemplate&&(e=new Ext.XTemplate(e)),e},applyTextOffset:function(e){return(e=e||{}).dx=e.dx||0,e.dy=e.dy||0,e},updateTextTpl:function(){this.writeText(),this.isConfiguring||this.centerText()},writeText:function(e){var t=this.getValue(),i=this.getMinValue(),n=this.getMaxValue(),r=n-i;this.getTextTpl().overwrite(this.textElement,{value:t,percent:(t-i)/r*100,minValue:i,maxValue:n,delta:r})},centerText:function(e,t,i,n,r){var s,o,a=this.textElement,l=this.getTextAlign();Ext.Number.isEqual(n,0,.1)||i.isOutOfBound({x:e,y:t})?(s=a.getRegion().alignTo({align:l,target:i}),a.setLeft(s.left),a.setTop(s.top)):(o=a.getBox(),a.setLeft(e-o.width/2),a.setTop(t-o.height/2))},camelCaseRe:/([a-z])([A-Z])/g,camelToHyphen:function(e){return e.replace(this.camelCaseRe,"$1-$2").toLowerCase()},applyTrackStyle:function(e){var t;return e.innerRadius=this.getRadiusFn(e.innerRadius),e.outerRadius=this.getRadiusFn(e.outerRadius),Ext.isArray(e.fill)&&(t=this.getTrackGradient(),this.setGradientStops(t,e.fill),e.fill="url(#"+t.dom.getAttribute("id")+")"),e},updateTrackStyle:function(e){var t,i=Ext.fly(this.getTrackArc());for(t in e)t in this.pathAttributes?i.setStyle(this.camelToHyphen(t),e[t]):i.setStyle(t,e[t])},applyValueStyle:function(e){var t;return e.innerRadius=this.getRadiusFn(e.innerRadius),e.outerRadius=this.getRadiusFn(e.outerRadius),Ext.isArray(e.fill)&&(t=this.getValueGradient(),this.setGradientStops(t,e.fill),e.fill="url(#"+t.dom.getAttribute("id")+")"),e},updateValueStyle:function(e){var t,i=Ext.fly(this.getValueArc());for(t in e)t in this.pathAttributes?i.setStyle(this.camelToHyphen(t),e[t]):i.setStyle(t,e[t])},getRadiusFn:function(e){var t,i,n,r=0;return Ext.isNumber(e)?t=function(){return e}:Ext.isString(e)&&(e=e.replace(/ /g,""),n=parseFloat(e)/100,(i=e.search("%"))<e.length-1&&(r=parseFloat(e.substr(i+1))),(t=function(e){return e*n+r}).ratio=n),t},getSvg:function(){var e=this.svg;return e||(e=this.svg=Ext.get(document.createElementNS(this.svgNS,"svg")),this.bodyElement.append(e)),e},getTrackArc:function(){var e=this.trackArc;return e||(e=this.trackArc=document.createElementNS(this.svgNS,"path"),this.getSvg().append(e,!0),e.setAttribute("class",Ext.baseCSSPrefix+"gauge-track")),e},getValueArc:function(){var e=this.valueArc;return this.getTrackArc(),e||(e=this.valueArc=document.createElementNS(this.svgNS,"path"),this.getSvg().append(e,!0),e.setAttribute("class",Ext.baseCSSPrefix+"gauge-value")),e},applyNeedle:function(e,t){return this.getValueArc(),Ext.Factory.gaugeNeedle.update(t,e,this,"createNeedle","needleDefaults")},createNeedle:function(e){return Ext.apply({gauge:this},e)},getDefs:function(){var e=this.defs;return e||(e=this.defs=Ext.get(document.createElementNS(this.svgNS,"defs")),this.getSvg().appendChild(e)),e},setGradientSize:function(e,t,i,n,r){e.setAttribute("x1",t),e.setAttribute("y1",i),e.setAttribute("x2",n),e.setAttribute("y2",r)},resizeGradients:function(e){var t=this.getTrackGradient(),i=this.getValueGradient(),n=e.height/2,r=e.width,s=e.height/2;this.setGradientSize(t.dom,0,n,r,s),this.setGradientSize(i.dom,0,n,r,s)},setGradientStops:function(e,t){for(var i,n,r,s=t.length;e.firstChild;)e.removeChild(e.firstChild);for(i=0;i<s;i++)n=t[i],r=document.createElementNS(this.svgNS,"stop"),e.appendChild(r),r.setAttribute("offset",n.offset),r.setAttribute("stop-color",n.color),"opacity"in n&&r.setAttribute("stop-opacity",n.opacity)},getTrackGradient:function(){var e=this.trackGradient;return e||((e=this.trackGradient=Ext.get(document.createElementNS(this.svgNS,"linearGradient"))).dom.setAttribute("gradientUnits","userSpaceOnUse"),this.getDefs().appendChild(e),Ext.get(e)),e},getValueGradient:function(){var e=this.valueGradient;return e||((e=this.valueGradient=Ext.get(document.createElementNS(this.svgNS,"linearGradient"))).dom.setAttribute("gradientUnits","userSpaceOnUse"),this.getDefs().appendChild(e),Ext.get(e)),e},getArcPoint:function(e,t,i,n){var r=n/180*Math.PI;return[e+i*Math.cos(r),t+i*Math.sin(r)]},isCircle:function(e,t){return Ext.Number.isEqual(Math.abs(t-e),360,.001)},getArcPath:function(e,t,i,n,r,s,o){var a=this.isCircle(r,s),l=(s=s-.01,this.getArcPoint(e,t,i,r)),c=this.getArcPoint(e,t,i,s),u=this.getArcPoint(e,t,n,r),d=this.getArcPoint(e,t,n,s),h=s-r<=180?0:1,f=["M",l[0],l[1],"A",i,i,0,h,1,c[0],c[1]],g=(n-i)/2;return a?f.push("M",d[0],d[1]):o?f.push("A",g,g,0,0,0,d[0],d[1]):f.push("L",d[0],d[1]),f.push("A",n,n,0,h,0,u[0],u[1]),o&&!a&&f.push("A",g,g,0,0,0,l[0],l[1]),f.push("Z"),f.join(" ")},resizeHandler:function(e){this.getSvg().setSize(e),this.resizeGradients(e),this.render()},createInterpolator:function(n){function e(e,t){var i=0;return s&&(i=(e-r)/s,n&&(i=Math.max(0,i),i=Math.min(1,i)),t&&(i=1-i)),(1-i)*o+i*a}var r=0,s=1,o=0,a=1;return e.setDomain=function(e,t){return s=t-(r=e),this},e.setRange=function(e,t){return o=e,a=t,this},e.getDomain=function(){return[r,r+s]},e.getRange=function(){return[o,a]},e},applyAnimation:function(e){return!0===e?e={}:!1===e&&(e={duration:0}),"duration"in e||(e.duration=1e3),e.easing in this.easings||(e.easing="out"),e},updateAnimation:function(){this.stopAnimation()},animate:function(e,t,n,r,s,o){var a=this,l=Ext.now(),c=a.createInterpolator().setRange(e,t);function u(){var e=Ext.AnimationQueue.frameStartTime,t=Math.min(e-l,n)/n,i=c(r(t));o?"string"==typeof s?o[s].call(o,i):s.call(o,i):s(i),1<=t&&(Ext.AnimationQueue.stop(u,o),a.fx=null)}a.stopAnimation(),Ext.AnimationQueue.start(u,o),a.fx={frame:u,scope:o}},stopAnimation:function(){this.fx&&(Ext.AnimationQueue.stop(this.fx.frame,this.fx.scope),this.fx=null)},unitCircleExtrema:{0:[1,0],90:[0,1],180:[-1,0],270:[0,-1],360:[1,0],450:[0,1],540:[-1,0],630:[0,-1]},getUnitSectorExtrema:function(e,t){var i,n=this.unitCircleExtrema,r=[];for(i in n)e<i&&i<e+t&&r.push(n[i]);return r},fitSectorInRect:function(e,t,i,n,r){if(Ext.Number.isEqual(n,360,.001))return{cx:e/2,cy:t/2,radius:Math.min(e,t)/2,region:new Ext.util.Region(0,e,t,0)};var s,o,a,l,c,u,d,h=this.fitSectorInRectCache;h.startAngle===i&&h.lengthAngle===n?(l=h.minX,c=h.maxX,u=h.minY,d=h.maxY):(o=(s=this.getUnitSectorExtrema(i,n).concat([this.getArcPoint(0,0,1,i),this.getArcPoint(0,0,r,i),this.getArcPoint(0,0,1,i+n),this.getArcPoint(0,0,r,i+n)])).map(function(e){return e[0]}),a=s.map(function(e){return e[1]}),l=Math.min.apply(null,o),c=Math.max.apply(null,o),u=Math.min.apply(null,a),d=Math.max.apply(null,a),h.startAngle=i,h.lengthAngle=n,h.minX=l,h.maxX=c,h.minY=u,h.maxY=d);var f=e/(c-l),g=t/(d-u),p=Math.min(f,g),m=new Ext.util.Region(u*p,c*p,d*p,l*p),x=new Ext.util.Region(0,e,t,0),y=m.alignTo({align:"c-c",target:x});return{cx:y.left-l*p,cy:y.top-u*p,radius:p,region:y}},fitSectorInPaddedRect:function(e,t,i,n,r,s){var o=this.fitSectorInRect(e-2*i,t-2*i,n,r,s);return o.cx+=i,o.cy+=i,o.region.translateBy(i,i),o},normalizeAngle:function(e){return(e%360+360)%360},render:function(){if(this.size){var e=this,t=e.getTextOffset(),i=e.getTrackArc(),n=e.getValueArc(),r=e.getNeedle(),s=e.getClockwise(),o=e.fxValue,a=e.fxAngleOffset,l=e.getTrackLength(),c=e.size.width,u=e.size.height,d=e.getPadding()(Math.min(c,u)),h=e.normalizeAngle(e.getTrackStart()+a),f=h+l,g=e.interpolator(o),p=e.getTrackStyle(),m=e.getValueStyle(),x=e.fitSectorInPaddedRect(c,u,d,h,l,p.innerRadius.ratio),y=x.cx,v=x.cy,E=x.radius,b=Math.max(0,p.innerRadius(E)),C=Math.max(0,p.outerRadius(E)),S=Math.max(0,m.innerRadius(E)),w=Math.max(0,m.outerRadius(E)),T=e.getArcPath(y,v,b,C,h,f,p.round),P=e.getArcPath(y,v,S,w,s?h:f-g,s?h+g:f,m.round);e.centerText(y+t.dx,v+t.dy,x.region,b,C),i.setAttribute("d",T),n.setAttribute("d",P),r&&(r.setRadius(E),r.setTransform(y,v,-90+h+g)),e.fireEvent("render",e)}}}),Ext.define("Ext.ux.gauge.needle.Arrow",{extend:Ext.ux.gauge.needle.Abstract,alias:"gauge.needle.arrow",config:{path:function(e,t){return 30<t-e?"M0,"+(e+5)+" L-4,"+e+" L-4,"+(e+10)+" L-1,"+(e+15)+" L-1,"+(t-7)+" L-5,"+(t-10)+" L0,"+t+" L5,"+(t-10)+" L1,"+(t-7)+" L1,"+(e+15)+" L4,"+(e+10)+" L4,"+e+" Z":""}}}),Ext.define("Ext.ux.gauge.needle.Diamond",{extend:Ext.ux.gauge.needle.Abstract,alias:"gauge.needle.diamond",config:{path:function(e,t){return 10<t-e?"M0,"+e+" L-4,"+(e+5)+" L0,"+t+" L4,"+(e+5)+" Z":""}}}),Ext.define("Ext.ux.gauge.needle.Rectangle",{extend:Ext.ux.gauge.needle.Abstract,alias:"gauge.needle.rectangle",config:{path:function(e,t){return 10<t-e?"M-2,"+e+" L2,"+e+" L2,"+t+" L-2,"+t+" Z":""}}}),Ext.define("Ext.ux.gauge.needle.Spike",{extend:Ext.ux.gauge.needle.Abstract,alias:"gauge.needle.spike",config:{path:function(e,t){return 10<t-e?"M0,"+(e+5)+" L-4,"+e+" L0,"+t+" L4,"+e+" Z":""}}}),Ext.define("Ext.ux.gauge.needle.Wedge",{extend:Ext.ux.gauge.needle.Abstract,alias:"gauge.needle.wedge",config:{path:function(e,t){return 10<t-e?"M-4,"+e+" L0,"+t+" L4,"+e+" Z":""}}}),Ext.define("Ext.ux.rating.Picker",{extend:Ext.Gadget,xtype:"rating",focusable:!0,cachedConfig:{family:"monospace",glyphs:"",minimum:1,limit:5,overStyle:null,rounding:1,scale:"125%",selectedStyle:null,tip:null,trackOver:!0,value:null,tooltipText:null,trackingValue:null},config:{animate:null},element:{cls:"u"+Ext.baseCSSPrefix+"rating-picker",reference:"element",children:[{reference:"innerEl",cls:"u"+Ext.baseCSSPrefix+"rating-picker-inner",listeners:{click:"onClick",mousemove:"onMouseMove",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave"},children:[{reference:"valueEl",cls:"u"+Ext.baseCSSPrefix+"rating-picker-value"},{reference:"trackerEl",cls:"u"+Ext.baseCSSPrefix+"rating-picker-tracker"}]}]},defaultBindProperty:"value",twoWayBindable:"value",overCls:"u"+Ext.baseCSSPrefix+"rating-picker-over",trackOverCls:"u"+Ext.baseCSSPrefix+"rating-picker-track-over",applyGlyphs:function(e){return"string"==typeof e?(2!==e.length&&Ext.raise('Expected 2 characters for "glyphs" not "'+e+'".'),e=[e.charAt(0),e.charAt(1)]):"number"==typeof e[0]&&(e=[String.fromCharCode(e[0]),String.fromCharCode(e[1])]),e},applyOverStyle:function(e){this.trackerEl.applyStyles(e)},applySelectedStyle:function(e){this.valueEl.applyStyles(e)},applyTip:function(e){return e&&"function"!=typeof e&&(e.isTemplate||(e=new Ext.XTemplate(e)),e=e.apply.bind(e)),e},applyTrackingValue:function(e){return this.applyValue(e)},applyValue:function(e){var t,i,n;return null!==e&&(t=this.getRounding(),i=this.getLimit(),n=this.getMinimum(),e=(e=Math.round(Math.round(e/t)*t*1e3)/1e3)<n?n:i<e?i:e),e},onClick:function(e){var t=this.valueFromEvent(e);this.setValue(t)},onMouseEnter:function(){this.element.addCls(this.overCls)},onMouseLeave:function(){this.element.removeCls(this.overCls)},onMouseMove:function(e){var t=this.valueFromEvent(e);this.setTrackingValue(t)},updateFamily:function(e){this.element.setStyle("fontFamily","'"+e+"'")},updateGlyphs:function(){this.refreshGlyphs()},updateLimit:function(){this.refreshGlyphs()},updateScale:function(e){this.element.setStyle("fontSize",e)},updateTip:function(){this.refreshTip()},updateTooltipText:function(e){this.setTooltip(e)},updateTrackingValue:function(e){var t=this.trackerEl,i=this.valueToPercent(e);t.setStyle("width",i),this.refreshTip()},updateTrackOver:function(e){this.element.toggleCls(this.trackOverCls,e)},updateValue:function(e,t){var i,n,r=this,s=r.getAnimate(),o=r.valueEl,a=r.valueToPercent(e);r.isConfiguring||!s?o.setStyle("width",a):(o.stopAnimation(),o.animate(Ext.merge({from:{width:r.valueToPercent(t)},to:{width:a}},s))),r.refreshTip(),r.isConfiguring||(r.hasListeners.change&&r.fireEvent("change",r,e,t),(n=(i=r.getWidgetColumn&&r.getWidgetColumn())&&r.getWidgetRecord&&r.getWidgetRecord())&&i.dataIndex&&n.set(i.dataIndex,e))},afterCachedConfig:function(){return this.refresh(),this.callParent(arguments)},initConfig:function(e){this.isConfiguring=!0,this.callParent([e]),this.refresh()},setConfig:function(){return this.isReconfiguring=!0,this.callParent(arguments),this.isReconfiguring=!1,this.refresh(),this},privates:{getGlyphTextNode:function(e){var t=e.lastChild;return t&&3===t.nodeType||(t=e.ownerDocument.createTextNode(""),e.appendChild(t)),t},getTooltipData:function(){return{component:this,tracking:this.getTrackingValue(),trackOver:this.getTrackOver(),value:this.getValue()}},refresh:function(){this.invalidGlyphs&&this.refreshGlyphs(!0),this.invalidTip&&this.refreshTip(!0)},refreshGlyphs:function(e){var t,i,n,r,s,o,a,l=this,c=!e&&(l.isConfiguring||l.isReconfiguring);if(!c){for(t=l.getGlyphTextNode(l.innerEl.dom),a=l.getGlyphTextNode(l.valueEl.dom),o=l.getGlyphTextNode(l.trackerEl.dom),i=l.getGlyphs(),n=l.getLimit(),r=s="";n--;)s+=i[0],r+=i[1];t.nodeValue=s,a.nodeValue=r,o.nodeValue=r}l.invalidGlyphs=c},refreshTip:function(e){var t,i,n=!e&&(this.isConfiguring||this.isReconfiguring);n||(i=this.getTip())&&(t=i(this.getTooltipData()),this.setTooltipText(t)),this.invalidTip=n},valueFromEvent:function(e){var t,i=this.innerEl,n=e.getX(),r=this.getRounding(),s=n-i.getX(),o=i.getWidth(),a=this.getLimit();return this.getInherited().rtl&&(s=o-s),t=s/o*a,t=Math.ceil(t/r)*r},valueToPercent:function(e){return(e=e/this.getLimit()*100)+"%"}}}),Ext.define("Ext.ux.colorpick.Selection",{mixinId:"colorselection",config:{format:"hex6",value:"FF0000",color:null,previousColor:null,alphaDecimalFormat:"#.##"},applyColor:function(e){var t=e;return Ext.isString(t)&&(t=Ext.ux.colorpick.ColorUtils.parseColor(e,this.getAlphaDecimalFormat())),t},applyValue:function(e){var t=Ext.ux.colorpick.ColorUtils.parseColor(e||"#000000",this.getAlphaDecimalFormat());return this.formatColor(t)},formatColor:function(e){return Ext.ux.colorpick.ColorUtils.formats[this.getFormat()](e)},updateColor:function(e){this.syncing||(this.syncing=!0,this.setValue(this.formatColor(e)),this.syncing=!1)},updateValue:function(e,t){this.syncing||(this.syncing=!0,this.setColor(e),this.syncing=!1),this.fireEvent("change",this,e,t)}}),Ext.define("Ext.ux.colorpick.ColorUtils",function(s){return{singleton:!0,constructor:function(){s=this},backgroundTpl:"background: {rgba};",setBackground:function(e,t){var i,n,r;e&&(i=Ext.XTemplate.getTpl(s,"backgroundTpl"),n={rgba:s.getRGBAString(t)},r=i.apply(n),e.applyStyles(r))},formats:{HEX6:function(e){return s.rgb2hex(e&&e.r,e&&e.g,e&&e.b)},HEX8:function(e){var t=s.rgb2hex(e.r,e.g,e.b),i=Math.round(255*e.a).toString(16);return i.length<2&&(t+="0"),t+=i.toUpperCase()},rgb:function(e){return s.getRGBString(e)},rgba:function(e){return s.getRGBAString(e)}},hexRe:/^#?([0-9a-f]{3,8})/i,rgbaAltRe:/rgba\\(\\s*([\\w#\\d]+)\\s*,\\s*([\\d\\.]+)\\s*\\)/,rgbaRe:/rgba\\(\\s*([\\d\\.]+)\\s*,\\s*([\\d\\.]+)\\s*,\\s*([\\d\\.]+)\\s*,\\s*([\\d\\.]+)\\s*\\)/,rgbRe:/rgb\\(\\s*([\\d\\.]+)\\s*,\\s*([\\d\\.]+)\\s*,\\s*([\\d\\.]+)\\s*\\)/,parseColor:function(e,t){var i,n,r,s;if(!e)return null;if(i=this.colorMap[e])r={r:i[0],g:i[1],b:i[2],a:1};else if("transparent"===e)r={r:0,g:0,b:0,a:0};else if(n=this.hexRe.exec(e))switch((n=n[1]).length){default:return null;case 3:r={r:parseInt(n[0]+n[0],16),g:parseInt(n[1]+n[1],16),b:parseInt(n[2]+n[2],16),a:1};break;case 6:case 8:r={r:parseInt(n.substr(0,2),16),g:parseInt(n.substr(2,2),16),b:parseInt(n.substr(4,2),16),a:parseInt(n.substr(6,2)||"ff",16)/255}}else if(n=this.rgbaRe.exec(e))r={r:parseFloat(n[1]),g:parseFloat(n[2]),b:parseFloat(n[3]),a:parseFloat(n[4])};else{if(n=this.rgbaAltRe.exec(e))return(r=this.parseColor(n[1])).a=parseFloat(n[2]),r;if(!(n=this.rgbRe.exec(e)))return null;r={r:parseFloat(n[1]),g:parseFloat(n[2]),b:parseFloat(n[3]),a:1}}return t&&(r.a=Ext.util.Format.number(r.a,t)),s=this.rgb2hsv(r.r,r.g,r.b),Ext.apply(r,s)},isValid:function(e){return null!==s.parseColor(e)},getRGBAString:function(e){return"rgba("+(e=null===e?{r:0,g:0,b:0,h:1,s:1,v:1,a:"1"}:e).r+","+e.g+","+e.b+","+e.a+")"},getRGBString:function(e){return"rgb("+e.r+","+e.g+","+e.b+")"},hsv2rgb:function(e,t,i){var n,r,s,o,a;switch(e=void 0===(e=1<e?1:e)?1:e,360===(e*=360)&&(e=0),r=e/60,s=(n=(i=1<i?1:i)*(t=1<t?1:t))*(1-Math.abs(r%2-1)),o=[0,0,0],Math.floor(r)){case 0:o=[n,s,0];break;case 1:o=[s,n,0];break;case 2:o=[0,n,s];break;case 3:o=[0,s,n];break;case 4:o=[s,0,n];break;case 5:o=[n,0,s];break;default:console.error("unknown color "+e+" "+t+" "+i)}return a=i-n,o[0]+=a,o[1]+=a,o[2]+=a,o[0]=Math.round(255*o[0]),o[1]=Math.round(255*o[1]),o[2]=Math.round(255*o[2]),{r:o[0],g:o[1],b:o[2]}},rgb2hsv:function(e,t,i){var n,r,s,o,a;return e/=255,t/=255,i/=255,(s=0)!=(r=(n=Math.max(e,t,i))-Math.min(e,t,i))&&(n===e?s=(t-i)/r%6:n===t?s=(i-e)/r+2:n===i&&(s=(e-t)/r+4)),360===(o=60*s)&&(o=0),(a=0)!=r&&(a=r/n),(o/=360)<0&&(o+=1),{h:o,s:a,v:n}},rgb2hex:function(e,t,i){return e=null===e?e:e.toString(16),t=null===t?t:t.toString(16),i=null===i?i:i.toString(16),(null===e||e.length<2)&&(e="0"+e||"0"),(null===t||t.length<2)&&(t="0"+t||"0"),(null===i||i.length<2)&&(i="0"+i||"0"),(null===e||2<e.length)&&(e="ff"),(null===t||2<t.length)&&(t="ff"),(null===i||2<i.length)&&(i="ff"),(e+t+i).toUpperCase()},colorMap:{aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]}}},function(e){var t=e.formats,i={};t["#HEX6"]=function(e){return"#"+t.HEX6(e)},t["#HEX8"]=function(e){return"#"+t.HEX8(e)},Ext.Object.each(t,function(e,t){i[e.toLowerCase()]=function(e){return t(e).toLowerCase()}}),Ext.apply(t,i)}),Ext.define("Ext.ux.colorpick.ColorMapController",{extend:Ext.app.ViewController,alias:"controller.colorpickercolormapcontroller",init:function(){var e=this.getView();this.mon(e.bodyElement,{mousedown:this.onMouseDown,mouseup:this.onMouseUp,mousemove:this.onMouseMove,scope:this})},onHandleDrag:function(e,t){var i=this.getView(),n=i.down("#dragHandle").element,r=n.getX()-i.element.getX(),s=n.getY()-i.element.getY(),o=i.bodyElement,a=r/o.getWidth(),l=s/o.getHeight();.99<a&&(a=1),.99<l&&(l=1),a<0&&(a=0),l<0&&(l=0),i.fireEvent("handledrag",a,l)},onMouseDown:function(e){this.onMapClick(e),this.onHandleDrag(),this.isDragging=!0},onMouseUp:function(e){this.onMapClick(e),this.onHandleDrag(),this.isDragging=!1},onMouseMove:function(e){this.isDragging&&(this.onMapClick(e),this.onHandleDrag())},onMapClick:function(e){var t,i,n=this.getView(),r=n.down("#dragHandle"),s=n.element.getXY(),o=e.getXY();t=o[0]-s[0],i=o[1]-s[1],r.element.setStyle({left:t+"px",top:i+"px"}),e.preventDefault(),this.onHandleDrag()},onColorBindingChanged:function(e){var t,i,n,r=this.getViewModel().get("selectedColor"),s=this.getView(),o=s.down("#dragHandle"),a=s.bodyElement,l=a.getWidth(),c=a.getHeight();r=null===r?{r:0,g:0,b:0,h:1,s:1,v:1,a:"1"}:r,i=l*(t=Ext.ux.colorpick.ColorUtils.rgb2hsv(r.r,r.g,r.b)).s,n=c*(1-t.v),o.element.setStyle({left:i+"px",top:n+"px"})},onHueBindingChanged:function(e){var t,i;t=Ext.ux.colorpick.ColorUtils.hsv2rgb(e,1,1),i=Ext.ux.colorpick.ColorUtils.rgb2hex(t.r,t.g,t.b),this.getView().element.applyStyles({"background-color":"#"+i})}}),Ext.define("Ext.ux.colorpick.ColorMap",{extend:Ext.container.Container,alias:"widget.colorpickercolormap",controller:"colorpickercolormapcontroller",cls:Ext.baseCSSPrefix+"colorpicker-colormap",items:[{xtype:"component",cls:Ext.baseCSSPrefix+"colorpicker-colormap-draghandle-container",itemId:"dragHandle",width:1,height:1,style:{position:"relative"},html:'<div class="'+Ext.baseCSSPrefix+'colorpicker-colormap-draghandle"></div>'}],listeners:{colorbindingchanged:{fn:"onColorBindingChanged",scope:"controller"},huebindingchanged:{fn:"onHueBindingChanged",scope:"controller"}},afterRender:function(){var e=this.mapGradientUrl,t=this.el;this.callParent(),e||(0===(e=(e=t.getStyle("background-image")).substring(4,e.length-1)).indexOf('"')&&(e=e.substring(1,e.length-1)),Ext.ux.colorpick.ColorMap.prototype.mapGradientUrl=e),t.setStyle("background-image","none"),(t=this.bodyElement).createChild({tag:"img",cls:Ext.baseCSSPrefix+"colorpicker-colormap-blender",src:e})},setPosition:function(e){this.down("#dragHandle").isDragging||this.fireEvent("colorbindingchanged",e)},setHue:function(e){this.fireEvent("huebindingchanged",e)}}),Ext.define("Ext.ux.colorpick.SelectorModel",{extend:Ext.app.ViewModel,alias:"viewmodel.colorpick-selectormodel",data:{selectedColor:{r:255,g:255,b:255,h:0,s:1,v:1,a:1},previousColor:{r:0,g:0,b:0,h:0,s:1,v:1,a:1}},formulas:{hex:{get:function(e){var t=null===e("selectedColor.r")?e("selectedColor.r"):e("selectedColor.r").toString(16),i=null===e("selectedColor.g")?e("selectedColor.g"):e("selectedColor.g").toString(16),n=null===e("selectedColor.b")?e("selectedColor.b"):e("selectedColor.b").toString(16);return"#"+Ext.ux.colorpick.ColorUtils.rgb2hex(t,i,n)},set:function(e){var t;Ext.isEmpty(e)||(t=Ext.ux.colorpick.ColorUtils.parseColor(e),this.changeRGB(t))}},red:{get:function(e){return e("selectedColor.r")},set:function(e){this.changeRGB({r:e})}},green:{get:function(e){return e("selectedColor.g")},set:function(e){this.changeRGB({g:e})}},blue:{get:function(e){return e("selectedColor.b")},set:function(e){this.changeRGB({b:e})}},hue:{get:function(e){return 360*e("selectedColor.h")},set:function(e){this.changeHSV({h:e&&e/360})}},saturation:{get:function(e){return 100*e("selectedColor.s")},set:function(e){this.changeHSV({s:e&&e/100})}},value:{get:function(e){return 100*e("selectedColor.v")},set:function(e){this.changeHSV({v:e&&e/100})}},alpha:{get:function(e){return 100*e("selectedColor.a")},set:function(e){null!==e&&this.set("selectedColor",Ext.applyIf({a:e/100},this.data.selectedColor))}}},changeHSV:function(e){var t;null!==e.h&&null!==e.s&&null!==e.v&&(Ext.applyIf(e,this.data.selectedColor),t=Ext.ux.colorpick.ColorUtils.hsv2rgb(e.h,e.s,e.v),e.r=t.r,e.g=t.g,e.b=t.b,this.set("selectedColor",e))},changeRGB:function(e){var t;Ext.applyIf(e,this.data.selectedColor),e&&null!==e.r&&null!==e.g&&null!==e.b&&(t=Ext.ux.colorpick.ColorUtils.rgb2hsv(e.r,e.g,e.b),e.h=t.h,e.s=t.s,e.v=t.v,this.set("selectedColor",e))}}),Ext.define("Ext.ux.colorpick.SelectorController",{extend:Ext.app.ViewController,alias:"controller.colorpick-selectorcontroller",destroy:function(){var e=this.getView(),t=e.childViewModel;t&&(t.destroy(),e.childViewModel=null),this.callParent()},changeHSV:function(e){var t,i=this.getView(),n=i.getColor();Ext.applyIf(e,n),t=Ext.ux.colorpick.ColorUtils.hsv2rgb(e.h,e.s,e.v),Ext.apply(e,t),i.setColor(e)},onColorMapHandleDrag:function(e,t){this.changeHSV({s:e,v:1-t})},onValueSliderHandleDrag:function(e){this.changeHSV({v:1-e})},onSaturationSliderHandleDrag:function(e){this.changeHSV({s:1-e})},onHueSliderHandleDrag:function(e){this.changeHSV({h:1-e})},onAlphaSliderHandleDrag:function(e){var t=this.getView(),i=t.getColor(),n=Ext.applyIf({a:1-e},i);t.setColor(n),t.el.repaint()},onPreviousColorSelected:function(e,t){this.getView().setColor(t)},onOK:function(){var e=this.getView();e.fireEvent("ok",e,e.getValue())},onCancel:function(){this.fireViewEvent("cancel",this.getView())},onResize:function(){var e,t,i,n,r=this.getView().childViewModel,s=this.getReferences();e=r.get("hue"),t=r.get("saturation"),i=r.get("value"),n=r.get("alpha"),s.colorMap.setPosition(r.getData()),s.hueSlider.setHue(e),s.satSlider.setSaturation(t),s.valueSlider.setValue(i),s.alphaSlider.setAlpha(n)}}),Ext.define("Ext.ux.colorpick.ColorPreview",{extend:Ext.Component,alias:"widget.colorpickercolorpreview",cls:Ext.baseCSSPrefix+"colorpreview",getTemplate:function(){return[{reference:"filterElement",cls:Ext.baseCSSPrefix+"colorpreview-filter-el"},{reference:"btnElement",cls:Ext.baseCSSPrefix+"colorpreview-btn-el",tag:"a"}]},onRender:function(){this.callParent(arguments),this.mon(this.btnElement,"click",this.onClick,this)},onClick:function(e){e.preventDefault(),this.fireEvent("click",this,this.color)},setColor:function(e){this.color=e,this.applyBgStyle(e)},applyBgStyle:function(e){var t,i=Ext.ux.colorpick.ColorUtils,n=this.filterElement;t=i.getRGBAString(e),n.applyStyles({background:t})}}),Ext.define("Ext.ux.colorpick.SliderController",{extend:Ext.app.ViewController,alias:"controller.colorpick-slidercontroller",getDragHandle:function(){return this.view.lookupReference("dragHandle")},getDragContainer:function(){return this.view.lookupReference("dragHandleContainer")},onHandleDrag:function(e){var t=this.getView(),i=this.getDragContainer(),n=this.getDragHandle(),r=i.bodyElement,s=r.getY(),o=e.getY()-r.getY(),a=r.getHeight(),l=o/a;0<=o&&o<a&&(n.element.setY(o+s),.99<l&&(l=1),e.preventDefault(),t.fireEvent("handledrag",l),n.el.repaint())},onMouseDown:function(e){this.getDragHandle().isDragging=!0,this.onHandleDrag(e)},onMouseMove:function(e){this.getDragHandle().isDragging&&this.onHandleDrag(e)},onMouseUp:function(e){var t=this.getDragHandle();t.isDragging&&this.onHandleDrag(e),t.isDragging=!1}}),Ext.define("Ext.ux.colorpick.Slider",{extend:Ext.container.Container,xtype:"colorpickerslider",controller:"colorpick-slidercontroller",afterRender:function(){var e,t,i;this.callParent(arguments),e=this.getWidth(),i=(t=this.lookupReference("dragHandleContainer")).getWidth(),t.el.setStyle("left",(e-i)/4+"px")},baseCls:Ext.baseCSSPrefix+"colorpicker-slider",referenceHolder:!0,listeners:{element:"element",touchstart:"onMouseDown",touchend:"onMouseUp",touchmove:"onMouseMove"},autoSize:!1,items:{xtype:"container",cls:Ext.baseCSSPrefix+"colorpicker-draghandle-container",reference:"dragHandleContainer",height:"100%",items:{xtype:"component",cls:Ext.baseCSSPrefix+"colorpicker-draghandle-outer",style:{position:"relative"},reference:"dragHandle",width:"100%",height:1,html:'<div class="'+Ext.baseCSSPrefix+'colorpicker-draghandle"></div>'}},setHue:function(){Ext.raise("Must implement setHue() in a child class!")},getDragHandle:function(){return this.lookupReference("dragHandle")},getDragContainer:function(){return this.lookupReference("dragHandleContainer")}}),Ext.define("Ext.ux.colorpick.SliderAlpha",{extend:Ext.ux.colorpick.Slider,alias:"widget.colorpickerslideralpha",cls:Ext.baseCSSPrefix+"colorpicker-alpha",gradientStyleTpl:Ext.create("Ext.XTemplate","background: -moz-linear-gradient(top, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);background: -webkit-linear-gradient(top,rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);background: -o-linear-gradient(top, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);background: -ms-linear-gradient(top, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);background: linear-gradient(to bottom, rgba({r}, {g}, {b}, 1) 0%, rgba({r}, {g}, {b}, 0) 100%);"),setAlpha:function(e){var t,i=this.getDragContainer(),n=this.getDragHandle(),r=i.bodyElement.getHeight();e=Math.max(e,0),e=Math.min(e,100),n.isDragging||(t=r*(1-e/100),n.element.setStyle({top:t+"px"}))},setColor:function(e){var t,i=this.getDragContainer();e=null===e?{r:0,g:0,b:0,h:1,s:1,v:1,a:"1"}:e,t=Ext.ux.colorpick.ColorUtils.rgb2hex(e.r,e.g,e.b),i.bodyElement.applyStyles(this.gradientStyleTpl.apply({hex:t,r:e.r,g:e.g,b:e.b}))}}),Ext.define("Ext.ux.colorpick.SliderSaturation",{extend:Ext.ux.colorpick.Slider,alias:"widget.colorpickerslidersaturation",cls:Ext.baseCSSPrefix+"colorpicker-saturation",gradientStyleTpl:Ext.create("Ext.XTemplate","background: -mox-linear-gradient(top,#{hex} 0%, #ffffff 100%);background: -webkit-linear-gradient(top, #{hex} 0%,#ffffff 100%);background: -o-linear-gradient(top, #{hex} 0%,#ffffff 100%);background: -ms-linear-gradient(top, #{hex} 0%,#ffffff 100%);background: linear-gradient(to bottom, #{hex} 0%,#ffffff 100%);"),setSaturation:function(e){var t,i=this.getDragContainer(),n=this.getDragHandle(),r=i.bodyElement.getHeight();e=Math.max(e,0),e=Math.min(e,100),n.isDragging||(t=r*(1-e/100),n.element.setStyle({top:t+"px"}))},setHue:function(e){var t,i,n=this.getDragContainer();t=Ext.ux.colorpick.ColorUtils.hsv2rgb(e,1,1),i=Ext.ux.colorpick.ColorUtils.rgb2hex(t.r,t.g,t.b),n.element.applyStyles(this.gradientStyleTpl.apply({hex:i}))}}),Ext.define("Ext.ux.colorpick.SliderValue",{extend:Ext.ux.colorpick.Slider,alias:"widget.colorpickerslidervalue",cls:Ext.baseCSSPrefix+"colorpicker-value",gradientStyleTpl:Ext.create("Ext.XTemplate","background: -mox-linear-gradient(top, #{hex} 0%, #000000 100%);background: -webkit-linear-gradient(top, #{hex} 0%,#000000 100%);background: -o-linear-gradient(top, #{hex} 0%,#000000 100%);background: -ms-linear-gradient(top, #{hex} 0%,#000000 100%);background: linear-gradient(to bottom, #{hex} 0%,#000000 100%);"),setValue:function(e){var t,i=this.getDragContainer(),n=this.getDragHandle(),r=i.bodyElement.getHeight();e=Math.max(e,0),e=Math.min(e,100),n.isDragging||(t=r*(1-e/100),n.element.setStyle({top:t+"px"}))},setHue:function(e){var t,i,n=this.getDragContainer();this.element&&(t=Ext.ux.colorpick.ColorUtils.hsv2rgb(e,1,1),i=Ext.ux.colorpick.ColorUtils.rgb2hex(t.r,t.g,t.b),n.bodyElement.applyStyles(this.gradientStyleTpl.apply({hex:i})))}}),Ext.define("Ext.ux.colorpick.SliderHue",{extend:Ext.ux.colorpick.Slider,alias:"widget.colorpickersliderhue",cls:Ext.baseCSSPrefix+"colorpicker-hue",afterRender:function(){var e=this.gradientUrl,t=this.el;this.callParent(),e||(0===(e=(e=t.getStyle("background-image")).substring(4,e.length-1)).indexOf('"')&&(e=e.substring(1,e.length-1)),Ext.ux.colorpick.SliderHue.prototype.gradientUrl=e),t.setStyle("background-image","none"),(t=this.getDragContainer().el).createChild({tag:"img",cls:Ext.baseCSSPrefix+"colorpicker-hue-gradient",src:e})},setHue:function(e){var t,i=this.getDragContainer(),n=this.getDragHandle(),r=i.bodyElement.getHeight();e=1<e?e/360:e,n.isDragging||(t=r*(1-e),n.element.setStyle({top:t+"px"}))}}),Ext.define("Ext.ux.colorpick.Selector",{extend:Ext.panel.Panel,xtype:"colorselector",mixins:[Ext.ux.colorpick.Selection],controller:"colorpick-selectorcontroller",config:{hexReadOnly:!1},width:Ext.platformTags.phone?"auto":580,height:337,cls:Ext.baseCSSPrefix+"colorpicker",padding:10,layout:{type:Ext.platformTags.phone?"vbox":"hbox",align:"stretch"},defaultBindProperty:"value",twoWayBindable:["value","hidden"],fieldWidth:50,fieldPad:5,showPreviousColor:!1,okButtonText:"OK",cancelButtonText:"Cancel",showOkCancelButtons:!1,listeners:{resize:"onResize",show:"onResize"},initConfig:function(e){var t=this,i=Ext.Factory.viewModel("colorpick-selectormodel");t.childViewModel=i,Ext.platformTags.phone&&"landscape"!==Ext.Viewport.getOrientation()&&(t.fieldWidth=35),Ext.platformTags.phone?e.items=[t.getPreviewForMobile(i,e),{xtype:"container",padding:"4px 0 0 0",layout:{type:"hbox",align:"stretch"},flex:1,items:[t.getMapAndHexRGBFields(i),t.getSliderAndHField(i),t.getSliderAndSField(i),t.getSliderAndVField(i),t.getSliderAndAField(i)]},t.getButtonForMobile(i,e)]:e.items=[t.getMapAndHexRGBFields(i),t.getSliderAndHField(i),t.getSliderAndSField(i),t.getSliderAndVField(i),t.getSliderAndAField(i),t.getPreviewAndButtons(i,e)],t.childViewModel.bind("{selectedColor}",function(e){t.setColor(e)}),this.callParent(arguments)},updateColor:function(e){this.mixins.colorselection.updateColor.call(this,e),this.childViewModel.set("selectedColor",e)},updatePreviousColor:function(e){this.childViewModel.set("previousColor",e)},getMapAndHexRGBFields:function(e){var t="0 "+this.fieldPad+" 0 0",i=this.fieldWidth;return{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",flex:1,autoSize:!1,layout:{type:"vbox",constrainAlign:!0},margin:"0 10 0 0",items:[{xtype:"colorpickercolormap",reference:"colorMap",flex:1,bind:{position:{bindTo:"{selectedColor}",deep:!0},hue:"{selectedColor.h}"},listeners:{handledrag:"onColorMapHandleDrag"}},{xtype:"container",layout:"hbox",autoSize:null,defaults:{labelAlign:"top",allowBlank:!1},items:[{xtype:"textfield",label:"HEX",flex:1,bind:"{hex}",clearable:!Ext.platformTags.phone,margin:t,validators:/^#[0-9a-f]{6}$/i,readOnly:this.getHexReadOnly(),required:!0},{xtype:"numberfield",clearable:!1,label:"R",bind:"{red}",width:i,hideTrigger:!0,validators:/^(0|[1-9]\\d*)$/i,maxValue:255,minValue:0,margin:t,required:!0},{xtype:"numberfield",clearable:!1,label:"G",bind:"{green}",width:i,hideTrigger:!0,validators:/^(0|[1-9]\\d*)$/i,maxValue:255,minValue:0,margin:t,required:!0},{xtype:"numberfield",clearable:!1,label:"B",bind:"{blue}",width:i,hideTrigger:!0,validators:/^(0|[1-9]\\d*)$/i,maxValue:255,minValue:0,margin:0,required:!0}]}]}},getSliderAndHField:function(e){var t=this.fieldWidth;return{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",width:t,layout:{type:"vbox",align:"stretch"},items:[{xtype:"colorpickersliderhue",reference:"hueSlider",flex:1,bind:{hue:"{selectedColor.h}"},width:t,listeners:{handledrag:"onHueSliderHandleDrag"}},{xtype:"numberfield",reference:"hnumberfield",clearable:!1,label:"H",labelAlign:"top",bind:"{hue}",hideTrigger:!0,maxValue:360,minValue:0,allowBlank:!1,margin:0,required:!0}]}},getSliderAndSField:function(e){var t=this.fieldWidth,i=this.fieldPad;return{xtype:"container",viewModel:e,cls:[Ext.baseCSSPrefix+"colorpicker-escape-overflow",Ext.baseCSSPrefix+"colorpicker-column-sslider"],width:t,layout:{type:"vbox",align:"stretch"},margin:"0 "+i+" 0 "+i,items:[{xtype:"colorpickerslidersaturation",reference:"satSlider",flex:1,bind:{saturation:"{saturation}",hue:"{selectedColor.h}"},width:t,listeners:{handledrag:"onSaturationSliderHandleDrag"}},{xtype:"numberfield",reference:"snumberfield",clearable:!1,label:"S",labelAlign:"top",bind:"{saturation}",hideTrigger:!0,maxValue:100,minValue:0,allowBlank:!1,margin:0,required:!0}]}},getSliderAndVField:function(e){var t=this.fieldWidth;return{xtype:"container",viewModel:e,cls:[Ext.baseCSSPrefix+"colorpicker-escape-overflow",Ext.baseCSSPrefix+"colorpicker-column-vslider"],width:t,layout:{type:"vbox",align:"stretch"},items:[{xtype:"colorpickerslidervalue",reference:"valueSlider",flex:1,bind:{value:"{value}",hue:"{selectedColor.h}"},width:t,listeners:{handledrag:"onValueSliderHandleDrag"}},{xtype:"numberfield",reference:"vnumberfield",clearable:!1,label:"V",labelAlign:"top",bind:"{value}",hideTrigger:!0,maxValue:100,minValue:0,allowBlank:!1,margin:0,required:!0}]}},getSliderAndAField:function(e){var t=this.fieldWidth;return{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-escape-overflow",width:t,layout:{type:"vbox",align:"stretch"},margin:"0 0 0 "+this.fieldPad,items:[{xtype:"colorpickerslideralpha",reference:"alphaSlider",flex:1,bind:{alpha:"{alpha}",color:{bindTo:"{selectedColor}",deep:!0}},width:t,listeners:{handledrag:"onAlphaSliderHandleDrag"}},{xtype:"numberfield",reference:"anumberfield",clearable:!1,label:"A",labelAlign:"top",bind:"{alpha}",hideTrigger:!0,maxValue:100,minValue:0,allowBlank:!1,margin:0,required:!0}]}},getPreviewAndButtons:function(e,t){var i=[{xtype:"colorpickercolorpreview",flex:1,bind:{color:{bindTo:"{selectedColor}",deep:!0}}}];return t.showPreviousColor&&i.push({xtype:"colorpickercolorpreview",flex:1,bind:{color:{bindTo:"{previousColor}",deep:!0}},listeners:{click:"onPreviousColorSelected"}}),t.showOkCancelButtons&&i.push({xtype:"button",text:this.okButtonText,margin:"10 0 0 0",handler:"onOK"},{xtype:"button",text:this.cancelButtonText,margin:"10 0 0 0",handler:"onCancel"}),{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-column-preview",width:70,margin:"0 0 0 10",items:i,layout:{type:"vbox",align:"stretch"}}},getPreviewForMobile:function(e,t){var i=[{xtype:"colorpickercolorpreview",flex:1,bind:{color:{bindTo:"{selectedColor}",deep:!0}}}];return t.showPreviousColor&&i.push({xtype:"colorpickercolorpreview",flex:1,bind:{color:{bindTo:"{previousColor}",deep:!0}},listeners:{click:"onPreviousColorSelected"}}),{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-column-mobile-preview",height:40,margin:"10 0 10 0",items:i,layout:{type:"hbox",align:"stretch"}}},getButtonForMobile:function(e,t){var i=[];return t.showOkCancelButtons?(i.push({xtype:"container",flex:1},{xtype:"button",text:this.cancelButtonText,minWidth:70,margin:"5 5 0 5",handler:"onCancel"},{xtype:"button",text:this.okButtonText,margin:"5 5 0 5",minWidth:50,handler:"onOK"}),{xtype:"container",viewModel:e,cls:Ext.baseCSSPrefix+"colorpicker-column-mobile-button",width:"100%",height:40,margin:"0",align:"right",items:i,layout:{type:"hbox",align:"stretch"}}):{}}}),Ext.define("Ext.ux.colorpick.ButtonController",{extend:Ext.app.ViewController,alias:"controller.colorpick-buttoncontroller",afterRender:function(e){e.updateColor(e.getColor())},destroy:function(){var e=this.getView(),t=e.colorPickerWindow;t&&(t.destroy(),e.colorPickerWindow=e.colorPicker=null),this.callParent()},getPopup:function(){var e,t=this.getView(),i=t.colorPickerWindow;return i||(i=Ext.create(t.getPopup()),(t.colorPickerWindow=i).colorPicker=t.colorPicker=e=i.lookupReference("selector"),e.setFormat(t.getFormat()),e.on({ok:"onColorPickerOK",cancel:"onColorPickerCancel",scope:this}),i.on({close:"onColorPickerCancel",scope:this})),i},onClick:function(){var e=this.getView().getColor(),t=this.getPopup(),i=t.colorPicker;i.setColor(e),i.setPreviousColor(e),t.show()},onColorPickerOK:function(e){var t=this.getView(),i=e.getColor();t.colorPickerWindow.hide(),t.setColor(i)},onColorPickerCancel:function(){this.getView().colorPickerWindow.hide()},syncColor:function(e){var t=this.getView();Ext.ux.colorpick.ColorUtils.setBackground(t.filterEl,e)}}),Ext.define("Ext.ux.colorpick.Button",{extend:Ext.Component,xtype:"colorbutton",controller:"colorpick-buttoncontroller",mixins:[Ext.ux.colorpick.Selection],baseCls:Ext.baseCSSPrefix+"colorpicker-button",width:20,height:20,childEls:["btnEl","filterEl"],config:{popup:{lazy:!0,$value:{xtype:"dialog",closeAction:"hide",referenceHolder:!0,header:!1,resizable:!0,scrollable:!0,items:{xtype:"colorselector",reference:"selector",flex:"1 1 auto",showPreviousColor:!0,showOkCancelButtons:!0}}}},defaultBindProperty:"value",twoWayBindable:"value",getTemplate:function(){return[{reference:"filterEl",cls:Ext.baseCSSPrefix+"colorbutton-filter-el"},{reference:"btnEl",tag:"a",cls:Ext.baseCSSPrefix+"colorbutton-btn-el"}]},listeners:{click:"onClick",element:"btnEl"},updateColor:function(e){var t=this.colorPicker;this.mixins.colorselection.updateColor.call(this,e),Ext.ux.colorpick.ColorUtils.setBackground(this.filterEl,e),t&&t.setColor(e)},updateFormat:function(e){var t=this.colorPicker;t&&t.setFormat(e)}}),Ext.define("Ext.ux.colorpick.Field",{extend:Ext.field.Picker,xtype:"colorfield",mixins:[Ext.ux.colorpick.Selection],editable:!1,focusable:!0,matchFieldWidth:!1,html:['<div class="'+Ext.baseCSSPrefix+'colorpicker-field-swatch"><div class="'+Ext.baseCSSPrefix+'colorpicker-field-swatch-inner"></div></div>'],cls:Ext.baseCSSPrefix+"colorpicker-field",config:{popup:{lazy:!0,$value:{xtype:"window",closeAction:"hide",modal:!!Ext.platformTags.phone,referenceHolder:!0,width:Ext.platformTags.phone?"100%":"auto",layout:Ext.platformTags.phone?"hbox":"vbox",header:!1,resizable:!0,scrollable:!0,items:{xtype:"colorselector",reference:"selector",flex:"1 1 auto",showPreviousColor:!0,showOkCancelButtons:!0}}}},afterRender:function(){this.callParent(),this.updateValue(this.value)},createFloatedPicker:function(){var e,t=this.getPopup();return this.colorPickerWindow=t=Ext.create(t),(e=this.colorPicker=t.lookupReference("selector")).setColor(this.getColor()),e.setHexReadOnly(!this.editable),e.on({ok:"onColorPickerOK",cancel:"onColorPickerCancel",close:"onColorPickerCancel",scope:this}),(this.colorPicker.ownerCmp=this).colorPickerWindow},createEdgePicker:function(){var e,t=this.getPopup();return this.colorPickerWindow=t=Ext.create(t),e=this.colorPicker=t.lookupReference("selector"),this.pickerType="floated",e.setColor(this.getColor()),e.on({ok:"onColorPickerOK",cancel:"onColorPickerCancel",close:"onColorPickerCancel",scope:this}),(this.colorPicker.ownerCmp=this).colorPickerWindow},collapse:function(){var e=this.getPicker();this.expanded&&e.hide()},showPicker:function(){var e=this[this.alignTarget],t=this.getPicker(),i=this.getColor();this.colorPicker&&(this.colorPicker.setColor(this.getColor()),this.colorPicker.setPreviousColor(i)),this.getMatchFieldWidth()&&t.setWidth(e.getWidth()),Ext.platformTags.phone?t.show():t.showBy(e,this.getFloatedPickerAlign(),{minHeight:100}),this.touchListeners=Ext.getDoc().on({translate:!1,touchstart:this.collapseIf,scope:this,delegated:!1,destroyable:!0})},onFocusLeave:function(e){"focusenter"!==e.type&&this.callParent(arguments)},onColorPickerOK:function(e){this.setColor(e.getColor()),this.collapse()},onColorPickerCancel:function(){this.collapse()},onExpandTap:function(){var e=this.getColor();this.colorPicker&&this.colorPicker.setPreviousColor(e),this.callParent(arguments)},setValue:function(e){var t;Ext.ux.colorpick.ColorUtils.isValid(e)&&(t=this.mixins.colorselection.applyValue.call(this,e),this.callParent([t]))},updateFormat:function(e){var t=this.colorPicker;t&&t.setFormat(e)},updateValue:function(e){var t,i=this.element.down(".x-colorpicker-field-swatch-inner");this.syncing||(this.syncing=!0,this.setColor(e),this.syncing=!1),t=this.getColor(),Ext.ux.colorpick.ColorUtils.setBackground(i,t),this.colorPicker&&this.colorPicker.setColor(t),this.inputElement.dom.value=this.getValue()},validator:function(e){return!!Ext.ux.colorpick.ColorUtils.isValid(e)||this.invalidText},updateColor:function(e){var t=this.colorPicker,i=this.element.down(".x-colorpicker-field-swatch-inner");this.mixins.colorselection.updateColor.call(this,e),Ext.ux.colorpick.ColorUtils.setBackground(i,e),t&&t.setColor(e)}}),Ext.define("Ext.d3.ComponentBase",{extend:Ext.Component,onElementResize:function(e,t,i){this.handleResize({width:t,height:i})}}),Ext.namespace("Ext.d3.lib").d3=!0,Ext.define("Ext.d3.Component",{extend:Ext.d3.ComponentBase,isD3:!0,config:{store:null,componentCls:"",interactions:[],transitions:{none:{name:void 0,duration:0,ease:Ext.identityFn}},touchAction:{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1}},baseCls:Ext.baseCSSPrefix+"d3",defaultBindProperty:"store",isInitializing:!0,refreshDelay:100,resizeDelay:250,resizeTimerId:0,size:null,d3Components:null,constructor:function(e){this.d3Components={},this.callParent(arguments),this.isInitializing=!1,this.on("resize","onElementResize",this)},destroy:function(){this.resizeTimerId&&clearTimeout(this.resizeTimerId),this.un("resize","onElementResize",this),this.setInteractions(),this.callParent()},updateComponentCls:function(e,t){var i=this.baseCls,n=this.element;e&&Ext.isString(e)&&(n.addCls(e,i),t&&n.removeCls(t,i))},register:function(e){var t=this.d3Components,i=e.getId();void 0===i&&Ext.raise("Attempting to register a component with no ID."),i in t&&Ext.raise('Component with ID "'+i+'" is already registered.'),t[i]=e},unregister:function(e){delete this.d3Components[e.getId()]},applyInteractions:function(e,t){t||((t=[]).map={});var i,n,r,s,o=[],a=t.map;for(o.map={},i=0,n=(e=Ext.Array.from(e,!0)).length;i<n;i++)(r=e[i])&&(r.isInteraction?s=r.getId():(s=r.id,r.element=this.element),(r=Ext.factory(r,null,a[s],"d3.interaction"))&&(r.setComponent(this),this.addInteraction(r),o.push(r),o.map[r.getId()]=r));for(i in a)o.map[i]||(r=a[i]).destroy();return o},applyTransitions:function(e){var t,i,n,r={};for(t in e)!0===(i=e[t])&&Ext.raise("'true' is not a valid transition value (should be an object or 'false')."),r[t]=i=Ext.apply({},i||e.none),"string"==typeof(n=i.ease)&&(i.ease=d3["ease"+n.charAt(0).toUpperCase()+n.substr(1)]),"name"in i||(i.name=this.getId()+"-"+t);return r},createTransition:function(e,t){var i=this.getTransitions()[e];return i||Ext.raise('No transition named "'+e+'"'),(t=t||d3).transition(i.name).ease(i.ease).duration(i.duration)},panZoom:null,onPanZoom:Ext.emptyFn,getContentRect:Ext.emptyFn,getViewportRect:Ext.emptyFn,addInteraction:function(e){e.isPanZoom&&(e.setContentRect(this.getContentRect.bind(this)),e.setViewportRect(this.getViewportRect.bind(this)),(this.panZoom=e).on("panzoom",this.onPanZoom,this)),e.on("destroy",this.onInteractionDestroy,this)},removeInteraction:function(e){e.isPanZoom&&(e.setContentRect(null),e.setViewportRect(null),this.panZoom=null,e.un("panzoom",this.onPanZoom,this))},onInteractionDestroy:function(e){e.un("destroy",this.onInteractionDestroy,this),this.removeInteraction(e)},applyStore:function(e){return e&&Ext.StoreManager.lookup(e)},updateStore:function(e,t){var i,n={datachanged:"onDataChange",buffer:this.refreshDelay,scope:this,order:"after"};t&&(t.un(n),t.getAutoDestroy()&&t.destroy()),e&&(e.on(n),e.isTreeStore&&((i=e.getRoot()).isExpanded()||(e.suspendEvent("datachanged"),i.on({expand:function(){e.resumeEvent("datachanged"),e.fireEvent("datachanged",e)},single:!0})))),this.onDataChange(e)},onDataChange:function(e){this.isInitializing||this.processDataChange(e)},onDataUpdate:function(e,t,i,n,r){this.isInitializing||this.processDataUpdate(e,t,i,n,r)},onDataLoad:function(e,t,i,n){this.processDataLoad(e,t,i,n)},processDataChange:Ext.emptyFn,processDataUpdate:Ext.emptyFn,processDataLoad:Ext.emptyFn,maskEl:null,showMask:function(e){this.maskEl?(this.maskEl.dom.firstChild.textContent=e,this.maskEl.setStyle("display","flex")):this.maskEl=this.element.createChild({style:{position:"absolute",display:"flex",alignItems:"center",justifyContent:"center",left:0,top:0,bottom:0,right:0,background:"rgba(0,0,0,0.5)"},children:[{html:e,style:{background:"rgba(0,0,0,0.8)",color:"white",fontWeight:"bold",borderRadius:"10px",padding:"10px"}}]})},hideMask:function(){this.maskEl&&this.maskEl.setStyle("display","none")},handleResize:function(e,t){var i=this,n=i.element;(e=e||n&&n.getSize())&&e.width&&e.height&&(clearTimeout(i.resizeTimerId),t?(i.resizeTimerId=0,i.resizeHandler(e),i.panZoom&&i.panZoom.updateIndicator&&i.panZoom.updateIndicator(),i.size=e):i.resizeTimerId=Ext.defer(i.handleResize,i.resizeDelay,i,[e,!0]))},resizeHandler:Ext.emptyFn,toLocalXY:function(e,t){var i=e.getXY(),n=t?t.getXY():this.element.getXY();return[i[0]-n[0],i[1]-n[1]]}}),Ext.define("Ext.d3.svg.Svg",{extend:Ext.d3.Component,xtype:["d3-svg","d3"],isSvg:!0,config:{padding:{top:0,left:0,right:0,bottom:0},clipScene:!1},defaultCls:{wrapper:Ext.baseCSSPrefix+"d3-wrapper",scene:Ext.baseCSSPrefix+"d3-scene",hidden:Ext.baseCSSPrefix+"d3-hidden",invisible:Ext.baseCSSPrefix+"d3-invisible"},defs:null,wrapper:null,wrapperClipRect:null,wrapperClipId:"wrapper-clip",scene:null,sceneRect:null,svg:null,onClassExtended:function(e,t){Ext.applyIf(t.defaultCls,e.superclass.defaultCls)},applyPadding:function(e,t){return Ext.isObject(e)?t?Ext.apply(t,e):e:Ext.util.Format.parseBox(e)},getSvg:function(){return this.svg||(this.svg=d3.select(this.element.dom).append("svg").attr("version","1.1"))},resizeHandler:function(e){var t,i=this,n=i.getSvg(),r=i.getPadding(),s=i.getInherited().rtl,o=i.getWrapper(),a=i.getWrapperClipRect(),l=i.getScene(),c=e&&e.width,u=e&&e.height;c&&u&&(n.attr("width",c).attr("height",u),(t=i.sceneRect||(i.sceneRect={})).x=s?r.right:r.left,t.y=r.top,t.width=c-r.left-r.right,t.height=u-r.top-r.bottom,o.attr("transform","translate("+t.x+","+t.y+")"),a.attr("width",t.width).attr("height",t.height),i.onSceneResize(l,t),i.fireEvent("sceneresize",i,l,t))},updatePadding:function(){this.isConfiguring||this.resizeHandler(this.getSize())},getSceneRect:function(){return this.sceneRect},getContentRect:function(){return this.scene&&this.scene.node().getBBox()},getViewportRect:function(){return this.sceneRect},scaleRe:/scale\\((.+),(.+)\\)/i,alignContentTransitionName:null,alignMap:{c:"cc",t:"ct",b:"cb",l:"lc",r:"rc",lc:"lc",cl:"lc",rc:"rc",cr:"rc",ct:"ct",tc:"ct",cb:"cb",bc:"cb",rt:"rt",tr:"rt",rb:"rb",br:"rb",lt:"lt",tl:"lt",lb:"lb",bl:"lb"},alignContent:function(e,t){var i,n,r,s,o,a,l,c,u=this,d="",h=1,f=1,g=u.getSceneRect(),p=u.getContentRect(),m=u.scene.interrupt(u.alignContentTransitionName);if(g&&p){switch((s=m.attr("transform"))&&(o=s.match(u.scaleRe))&&(d=o[0],h=o[1],f=o[2]),(a=u.alignMap[e])||Ext.raise("Invalid content align options."),l=a[0],c=a[1],l){case"c":i=g.width/2-(p.x+p.width/2)*h;break;case"l":i=-p.x*h;break;case"r":i=g.width-(p.x+p.width)*h}switch(c){case"c":n=g.height/2-(p.y+p.height/2)*f;break;case"t":n=-p.y*f;break;case"b":n=g.height-(p.y+p.height)*f}}Ext.isNumber(i)&&Ext.isNumber(n)&&(r=[i,n],t&&("string"==typeof t&&(t=u.createTransition(t)),u.alignContentTransitionName=t._name,m=m.transition(t)),m.attr("transform","translate("+r+")"+d),u.panZoom&&u.panZoom.setPanZoomSilently(r))},onSceneResize:Ext.emptyFn,getScene:function(){var e=this.getWrapper(),t=this.scene;return t||(this.scene=t=e.append("g").classed(this.defaultCls.scene,!0),this.setupScene(t),this.fireEvent("scenesetup",this,t)),t},clearScene:function(){var e=this.scene,t=this.defs;if(e)for((e=e.node()).removeAttribute("transform");e.firstChild;)e.removeChild(e.firstChild);if(t)for(t=t.node();t.firstChild;)t.removeChild(t.firstChild)},showScene:function(){var e=this.scene;e&&e.classed(this.defaultCls.invisible,!1)},hideScene:function(){var e=this.scene;e&&e.classed(this.defaultCls.invisible,!0)},setupScene:Ext.emptyFn,onPanZoom:function(e,t,i){this.scene.attr("transform","translate("+i+")scale("+t+")")},removeInteraction:function(e){e.isPanZoom&&this.scene.attr("transform",null),this.callParent([e])},getWrapper:function(){var e=this.wrapper;return e=e||(this.wrapper=this.getSvg().append("g").classed(this.defaultCls.wrapper,!0))},getWrapperClipRect:function(){var e=this.wrapperClipRect;return e=e||(this.wrapperClipRect=this.getDefs().append("clipPath").attr("id",this.wrapperClipId).append("rect").attr("fill","white"))},updateClipScene:function(e){this.getWrapper().attr("clip-path",e?"url(#"+this.wrapperClipId+")":"")},getDefs:function(){var e=this.defs;return e=e||(this.defs=this.getSvg().append("defs"))},destroy:function(){this.getSvg().remove(),this.callParent()}}),Ext.define("Ext.d3.Helpers",{singleton:!0,makeScale:function(e){var t,i,n=e.type;return n||Ext.raise("The type of scale is not specified."),t=n.charAt(0).toUpperCase()+n.substr(1),i=this.make("scale"+t,e),"nice"in e&&i.nice&&i.nice(this.eval(e.nice)),i._type=n,i},makeAxis:function(e){var t,i,n=e.orient;return n||Ext.raise('The position of the axis ("orient" property) is not specified.'),t=n.charAt(0).toUpperCase()+n.substr(1),(i=this.make("axis"+t,e))._type=n,i},make:function(e,t){return this.configure(d3[e](),t)},configure:function(e,t){var i,n,r;for(i in t)(n="$"===i.charAt(0))&&(i=i.substr(1)),"function"==typeof e[i]&&(n?(r=t["$"+i].map(function(e){return"string"!=typeof e||e.search("d3.")||(e=new Function("return "+e)()),e}),e[i].apply(e,r),n=!1):(r=this.eval(t[i]),e[i](r)));return e},eval:function(e){return"string"!=typeof e||e.search("d3.")||(e=new Function("return "+e)()),e},isBBoxable:function(e){return!Ext.isFirefox||!e||(e instanceof Element&&(e=d3.select(e)),document.contains(e.node())&&"none"!==e.style("display")&&"hidden"!==e.attr("visibility"))},getBBox:function(e){if("none"!==e.style("display"))return e.node().getBBox()},setDominantBaseline:function(e,t){e.setAttribute("dominant-baseline",t),this.fakeDominantBaseline(e,t),Ext.isSafari&&"text-after-edge"===t&&e.setAttribute("baseline-shift","super")},noDominantBaseline:function(){return Ext.isIE||Ext.isEdge},fakeDominantBaselineMap:{alphabetic:"0em",ideographic:"-.24em",hanging:".72em",mathematical:".46em",middle:".22em",central:".33em","text-after-edge":"-.26em","text-before-edge":".91em"},fakeDominantBaseline:function(e,t,i){var n;(i||this.noDominantBaseline())&&(n=this.fakeDominantBaselineMap[t])&&e.setAttribute("dy",n)},fakeDominantBaselines:function(e){var t,i,n,r,s,o,a=this.fakeDominantBaselineMap;if(this.noDominantBaseline())if(1<arguments.length){if(t=e,i=arguments[1],r=document.querySelectorAll(t),n=a[i])for(s=0,o=r.length;s<o;s++)r[s].setAttribute("dy",n)}else for(t in e)if(n=a[i=e[t]])for(s=0,o=(r=document.querySelectorAll(t)).length;s<o;s++)r[s].setAttribute("dy",n)},unitMath:function(e,t,i){var n=parseFloat(e),r=e.substr(n.toString().length);switch(t){case"*":n*=i;break;case"+":n+=i;break;case"/":n/=i;break;case"-":n-=i}return n.toString()+r},getLinkId:function(e){var t=e.search("#");return e.substr(t,e.length-t-1)},alignRect:function(e,t,i,n,r){var s,o,a;if(n&&i){switch(e){case"center":s=n.width/2-(i.x+i.width/2);break;case"left":s=-i.x;break;case"right":s=n.width-(i.x+i.width);break;default:Ext.raise("Invalid value. Valid \`x\` values are: center, left, right.")}switch(t){case"center":o=n.height/2-(i.y+i.height/2);break;case"top":o=-i.y;break;case"bottom":o=n.height-(i.y+i.height);break;default:Ext.raise("Invalid value. Valid \`y\` values are: center, top, bottom.")}}Ext.isNumber(s)&&Ext.isNumber(o)&&(a=[s+=n.x,o+=n.y],r.attr("transform","translate("+a+")"))},commasRe:/,+/g,getTransformComponent:function(e,t){var i,n,r,s,o=e.indexOf(t);if(0<=o&&(i=e.indexOf("(",o)+1,n=e.indexOf(")",i),0<=i&&0<=n&&(r=(r=(r=e.substr(i,n-i)).replace(" ",",")).replace(this.commasRe,","))),r)return 1<(s=r.split(",")).length?[parseFloat(s[0]),parseFloat(s[1])]:[parseFloat(s[0])]},parseTransform:function(e){var t=this.getTransformComponent(e,"scale"),i=this.getTransformComponent(e,"rotate"),n=this.getTransformComponent(e,"translate");return t?t.length<2&&t.push(t[0]):t=[0,0],i=i?i[0]:0,n?n.length<2&&n.push(0):n=[0,0],{scale:t,rotate:i,translate:n}}}),Ext.define("Ext.d3.mixin.Detached",{extend:Ext.Mixin,detached:null,constructor:function(e){this.detached=d3.select("body").append("svg").remove().attr("version","1.1")},getDetached:function(){return this.detached},isDetached:function(e){return e&&e.node().parentElement===this.detached.node()},attach:function(e,t){e instanceof d3.selection&&(e=e.node()),e instanceof SVGElement||Ext.raise("The \`parent\` must either be a D3 selection or an SVG element."),t instanceof d3.selection?e.appendChild(t.node()):t instanceof SVGElement?e.appendChild(t):Ext.raise("The \`child\` must either be a D3 selection or an SVG element.")},detach:function(e){this.attach(this.detached,e)},destroy:function(){var e=this.detached.node();e&&e.parentNode&&e.parentNode.removeChild(e),this.callParent()}}),Ext.define("Ext.d3.axis.Axis",{mixins:{observable:Ext.mixin.Observable,detached:Ext.d3.mixin.Detached},config:{axis:{orient:"top"},scale:{type:"linear"},title:null,parent:null,component:null},defaultCls:{self:Ext.baseCSSPrefix+"d3-axis",title:Ext.baseCSSPrefix+"d3-axis-title"},title:null,group:null,domain:null,constructor:function(e){var t,i=this;t="id"in(e=e||{})?e.id:"id"in i.config?i.config.id:i.getId(),i.setId(t),i.mixins.detached.constructor.call(i,e),i.group=i.getDetached().append("g").classed(i.defaultCls.self,!0).attr("id",i.getId()),i.mixins.observable.constructor.call(i,e)},getGroup:function(){return this.group},getBox:function(){return this.group.node().getBBox()},applyScale:function(e,t){var i=this.getAxis();return e&&(Ext.isFunction(e)||(e=Ext.d3.Helpers.makeScale(e)),i&&i.scale(e)),e||t},applyAxis:function(e,t){var i=this.getScale();return e&&(Ext.isFunction(e)||(e=Ext.d3.Helpers.makeAxis(e)),i&&e.scale(i)),e||t},updateParent:function(e){e?(this.attach(e,this.group),this.render()):this.detach(this.group)},updateTitle:function(e){var t=this;e?(t.title?t.isDetached(t.title)&&t.attach(t.group,t.title):t.title=t.group.append("text").classed(t.defaultCls.title,!0),t.title.text(e.text||""),t.title.attr(e.attr),t.positionTitle(e)):t.title&&t.detach(t.title)},getAxisLine:function(){var e=this.domain;return(e=e||this.group.select("path.domain")).empty()?null:this.domain=e},getTicksBBox:function(){var e,t,i,n,r,s=this.group;return(n=s.selectAll(".tick")).size()&&(t=s.append("g"),i=t.node(),e=s.node(),n.each(function(){i.appendChild(this)}),r=i.getBBox(),n.each(function(){e.appendChild(this)}),t.remove()),r},positionTitle:function(e){var t,i,n,r,s,o,a=this.title,l=this.getAxis(),c=this.getAxisLine(),u=l._type,d="left"===u||"right"===u,h=Ext.d3.Helpers,f="text-before-edge",g="text-after-edge",p=0,m=0;if(c&&a&&Ext.d3.Helpers.isBBoxable(this.getParent())){switch(e=e||this.getTitle(),s=c.node().getBBox(),o=this.getTicksBBox(),t=e.alignment||"middle",r="outside"===(e.position||"outside"),i=e.padding||"0.5em",t){case"start":case"left":n="start",d?m=s.y+s.height:p=s.x;break;case"end":case"right":n="end",d?m=s.y:p=s.x+s.width;break;case"middle":case"center":n="middle",d?m=s.y+s.height/2:p=s.x+s.width/2}switch(u){case"top":r&&(a.attr("y",o?o.y:0),i=h.unitMath(i,"*",-1)),h.setDominantBaseline(a.node(),r?g:f),a.attr("text-anchor",n).attr("x",p);break;case"bottom":r?a.attr("y",o?o.y+o.height:0):i=h.unitMath(i,"*",-1),h.setDominantBaseline(a.node(),r?f:g),a.attr("text-anchor",n).attr("x",p);break;case"left":r&&(p=o?o.x:0,i=h.unitMath(i,"*",-1)),h.setDominantBaseline(a.node(),r?g:f),a.attr("text-anchor",n).attr("transform","translate("+p+", "+m+")rotate(-90)");break;case"right":r?p=o?o.x+o.width:0:i=h.unitMath(i,"*",-1),h.setDominantBaseline(a.node(),r?f:g),a.attr("text-anchor",n).attr("transform","translate("+p+", "+m+")rotate(-90)")}a.attr("dy",i)}},render:function(e){var t=this.getAxis(),i=t._type,n=this.getScale();n.domain().length&&n.range().length&&(e?this.group.transition(e).call(t):this.group.call(t),this.group.attr("data-orient",i),this.positionTitle())},destroy:function(){this.mixins.detached.destroy.call(this)}}),Ext.define("Ext.d3.axis.Data",{extend:Ext.d3.axis.Axis,config:{field:null,step:null},applyAxis:function(e,t){var i=this.getComponent().getInherited().rtl;return e&&i&&("left"===(e=Ext.Object.chain(e)).orient?e.orient="right":"right"===e.orient&&(e.orient="left")),this.callParent([e,t])}}),Ext.define("Ext.d3.axis.Color",{mixins:{observable:Ext.mixin.Observable},isColorAxis:!0,config:{scale:{merge:function(e,t){return e&&e.type&&t&&t.type===e.type&&(e=Ext.Object.merge(t,e)),e},$value:{type:"linear",range:["white","maroon"]}},field:null,processor:null,minimum:null,maximum:null},constructor:function(e){this.mixins.observable.constructor.call(this,e)},applyScale:function(e,t){return e&&(Ext.isFunction(e)||(this.isUserSetDomain=!!e.domain,e=Ext.d3.Helpers.makeScale(e))),e||t},updateScale:function(e){this.scale=e},updateField:function(e){this.field=e},updateProcessor:function(e){this.processor=e},getColor:function(e){var t=this.scale,i=this.field,n=this.processor;return n?n(this,t,e,i):e&&e.data&&e.data.isModel&&i?t(e.data.data[i]):t(e)},updateMinimum:function(){this.setDomain()},updateMaximum:function(){this.setDomain()},findDataDomain:function(e){var t,i=this.field,n=d3.min(e,function(e){return e.data[i]}),r=d3.max(e,function(e){return e.data[i]});return i&&(t=Ext.isNumber(n)&&Ext.isNumber(r)?[n,r]:e.map(function(e){return e.data[i]}).sort().filter(function(e,t,i){return!t||e!==i[t-1]})),t},setDomainFromData:function(e){this.isUserSetDomain||this.setDomain(this.findDataDomain(e))},setDomain:function(e){var t,i,n,r,s=this.getScale(),o=s.range().length,a=this.getMinimum(),l=this.getMaximum();if(s&&!this.isUserSetDomain){if(e=(e=e||s.domain()).slice(),Ext.isNumber(a)&&(e[0]=a),Ext.isNumber(l)&&(e[e.length-1]=l),s.ticks&&e.length!==o){for(i=e[0],t=((n=e[e.length-1])-i)/(o-1),e=[],r=0;r<o-1;r++)e.push(i+r*t);e.push(n)}s.domain(e),this.fireEvent("scalechange",this,s)}}}),Ext.define("Ext.d3.legend.Legend",{mixins:{observable:Ext.mixin.Observable,detached:Ext.d3.mixin.Detached},config:{docked:"bottom",padding:30,hidden:!1,component:null},defaultCls:{self:Ext.baseCSSPrefix+"d3-legend",item:Ext.baseCSSPrefix+"d3-legend-item",label:Ext.baseCSSPrefix+"d3-legend-label",hidden:Ext.baseCSSPrefix+"d3-hidden"},constructor:function(e){this.mixins.detached.constructor.call(this,e),this.group=this.getDetached().append("g").classed(this.defaultCls.self,!0),this.mixins.observable.constructor.call(this,e)},getGroup:function(){return this.group},applyDocked:function(e){return this.getComponent().getInherited().rtl&&("left"===e?e="right":"right"===e&&(e="left")),e},getBox:function(){var e=this.getHidden(),t=this.getDocked(),i=this.getPadding(),n=this.group.node().getBBox(),r=this.box||(this.box={});if(e)return{x:0,y:0,width:0,height:0};switch(r.x=n.x,r.y=n.y,r.width=n.width,r.height=n.height,t){case"right":r.x-=i;case"left":r.width+=i;break;case"bottom":r.y-=i;case"top":r.height+=i}return r},updateHidden:function(e){this[e?"hide":"show"]()},show:function(){this.group.classed(this.defaultCls.hidden,!1),this.setHidden(!1),this.fireEvent("show",this)},hide:function(){this.group.classed(this.defaultCls.hidden,!0),this.setHidden(!0),this.fireEvent("hide",this)},updateComponent:function(e,t){t&&this.detach(this.group),e&&this.attach(e.getScene(),this.group)},destroy:function(){this.mixins.detached.destroy.call(this)}}),Ext.define("Ext.d3.legend.Color",{extend:Ext.d3.legend.Legend,config:{axis:null,items:{count:5,slice:null,reverse:!1,size:{x:30,y:30}}},getScale:function(){return this.getAxis().getScale()},updateAxis:function(e,t){t&&t.un("scalechange",this.onScaleChange,this),e&&e.on("scalechange",this.onScaleChange,this)},onScaleChange:function(e,t){this.renderItems()},updateItems:function(){this.isConfiguring||this.renderItems()},renderItems:function(){var e,t,i=this.getScale(),n=this.getItems(),r=this.getRenderedItems();0<n.count&&i.ticks?(e=i.ticks(n.count),n.slice&&(e=e.slice.apply(e,n.slice)),n.reverse&&(e=e.reverse())):e=i.domain(),e&&(t=r.data(e),this.onAddItems(t.enter()),this.onUpdateItems(t),this.onRemoveItems(t.exit()))},getRenderedItems:function(){return this.group.selectAll("."+this.defaultCls.item)},onAddItems:function(e){(e=e.append("g").classed(this.defaultCls.item,!0)).append("rect"),e.append("text"),this.onUpdateItems(e)},onUpdateItems:function(e){var t,i,n=this.getItems(),r=this.getDocked(),s=this.getScale();switch(t=e.select("rect").attr("width",n.size.x).attr("height",n.size.y).style("fill",s),i=e.select("text").each(function(){Ext.d3.Helpers.setDominantBaseline(this,"middle")}).attr("text-anchor","middle").text(String),r){case"left":case"right":t.attr("transform",function(e,t){return"translate(0,"+t*n.size.y+")"}),i.attr("x",n.size.x+10).attr("y",function(e,t){return(t+.5)*n.size.y}).attr("dx",10);break;case"top":case"bottom":t.attr("transform",function(e,t){return"translate("+t*n.size.x+",0)"}),i.attr("x",function(e,t){return(t+.5)*n.size.x}).attr("y",n.size.y).attr("dy","1em")}},onRemoveItems:function(e){e.remove()}}),Ext.define("Ext.d3.mixin.ToolTip",{extend:Ext.Mixin,mixinConfig:{id:"d3tooltip",before:{destroy:"destroyTooltip"}},config:{tooltip:null},applyTooltip:function(e,t){return Ext.destroy(t),e&&(e=new Ext.tip.ToolTip(Ext.merge({renderer:Ext.emptyFn,target:this.el,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,trackMouse:!0,showOnTap:!0},e))).on("hovertarget","onTargetHover",this),e},onTargetHover:function(e,t){t.dom&&Ext.callback(e.renderer,e.scope,[this,e,t.dom.__data__,t],0,this)},destroyTooltip:function(){this.setTooltip(null)}}),Ext.define("Ext.d3.HeatMap",{extend:Ext.d3.svg.Svg,xtype:"d3-heatmap",mixins:[Ext.d3.mixin.ToolTip],config:{componentCls:"heatmap",xAxis:{axis:{orient:"bottom"},scale:{type:"linear"}},yAxis:{axis:{orient:"left"},scale:{type:"linear"}},colorAxis:{},legend:!1,tiles:null,labels:!0,transitions:{layout:{duration:500,ease:"cubicInOut",delay:10}}},data:null,tiles:null,tilesGroup:null,tilesRect:null,legendRect:null,defaultCls:{tiles:Ext.baseCSSPrefix+"d3-tiles",tile:Ext.baseCSSPrefix+"d3-tile"},constructor:function(e){this.callParent([e]),this.mixins.d3tooltip.constructor.call(this,e)},applyTooltip:function(e,t){return e&&(e.delegate="g."+this.defaultCls.tile),this.mixins.d3tooltip.applyTooltip.call(this,e,t)},updateTooltip:null,applyAxis:function(e,t){return(e=e&&new Ext.d3.axis.Data(Ext.merge({parent:this.getScene(),component:this},e)))||t},updateAxis:function(e,t){this.isConfiguring||(this.processData(),this.renderScene())},applyXAxis:function(e,t){return this.applyAxis(e,t)},updateXAxis:function(){this.updateAxis()},applyYAxis:function(e,t){return this.applyAxis(e,t)},updateYAxis:function(){this.updateAxis()},applyLegend:function(e,t){return e&&(e.axis=this.getColorAxis(),e=new Ext.d3.legend.Color(Ext.merge({component:this},e))),e||t},updateLegend:function(e,t){var i={show:"onLegendVisibility",hide:"onLegendVisibility",scope:this};t&&t.un(i),e&&e.on(i),this.isConfiguring||this.performLayout()},onLegendVisibility:function(){this.performLayout()},applyColorAxis:function(e,t){return(e=e&&new Ext.d3.axis.Color(e))||t},updateColorAxis:function(){this.isConfiguring||(this.processData(),this.renderScene())},getStoreData:function(e){return e?e.getData().items:[]},processData:function(e){var t=this.data=this.getStoreData(e||this.getStore()),i=this.getXAxis(),n=this.getYAxis(),r=this.getColorAxis(),s=i.getScale(),o=n.getScale(),a=i.getField(),l=n.getField(),c=i.getStep(),u=n.getStep();this.setDomainFromData(t,a,s,c),this.setDomainFromData(t,l,o,u),r.setDomainFromData(t)},setDomainFromData:function(e,t,i,n){var r,s;i.bandwidth?(s=e.map(function(e){return e.data[t]}).filter(function(e,t,i){return i.indexOf(e)===t}),i.domain(s)):(r=d3.extent(e,function(e){return e.data[t]}),i.domain([+r[0],+r[1]+n]))},isDataProcessed:!1,processDataChange:function(e){this.processData(e),this.isDataProcessed=!0,this.isConfiguring||this.performLayout()},onSceneResize:function(e,t){this.callParent([e,t]),this.isDataProcessed||this.processData(),this.isOldSize=!1,this.performLayout(t)},performLayout:function(e){if(e=e||this.getSceneRect()){this.showScene();var t,i,n,r,s,o,a=this.getLegend(),l=this.getXAxis(),c=this.getYAxis(),u=l.getGroup(),d=c.getGroup(),h=l.getAxis(),f=c.getAxis(),g=l.getScale(),p=c.getScale(),m=this.getInherited().rtl;if(s={x:0,y:0,width:e.width,height:e.height},this.tilesRect=r=Ext.Object.chain(s),a){switch(i=a.getBox(),n=a.getDocked(),this.legendRect=t=Ext.Object.chain(s),n){case"right":r.width-=i.width,t.width=i.width,t.x=e.width-i.width;break;case"left":r.width-=i.width,t.width=i.width,r.x+=i.width;break;case"bottom":r.height-=i.height,t.height=i.height,t.y=e.height-i.height;break;case"top":r.height-=i.height,t.height=i.height,r.y+=i.height}Ext.d3.Helpers.alignRect("center","center",i,t,a.getGroup())}o=[r.x,r.x+r.width],m&&o.reverse(),g.range(o),p.range([r.y+r.height,r.y]),u.attr("transform","translate(0,"+("top"===h._type?r.y:r.y+r.height)+")"),d.attr("transform","translate("+("left"===f._type?r.x:r.x+r.width)+",0)"),this.renderScene()}},setupScene:function(e){this.callParent([e]),this.tilesGroup=e.append("g").classed(this.defaultCls.tiles,!0),this.hideScene()},getRenderedTiles:function(){return this.tilesGroup.selectAll("."+this.defaultCls.tile)},renderScene:function(e){var t,i,n=this,r=n.getXAxis(),s=n.getYAxis(),o=r.getField(),a=s.getField(),l=n.hasFirstRender&&n.isOldSize?"layout":"none";e=e||n.data||n.getStoreData(n.getStore()),t=n.getRenderedTiles().data(e,function(e){var t=e.data[o],i=e.data[a];return t instanceof Date&&(t=+t),i instanceof Date&&(i=+i),String(t)+"-"+String(i)}),n.layoutTransition=n.createTransition(l).on("end",function(){n.layoutTransition=null}),i=n.onAddTiles(t.enter()),n.onUpdateTiles(t.merge(i)),n.onRemoveTiles(t.exit()),r.render(),s.render(),n.hasFirstRender=!0,n.isOldSize=!0},onAddTiles:function(e){var t,i,n,r,s=this.getTiles(),o=this.getLabels();if(e.empty())return e;if(i=(t=e.append("g").classed(this.defaultCls.tile,!0)).append("rect").attr("fill","white"),s){for(r in s.attr)i.attr(r,s.attr[r]);if(t.classed(s.cls,!!s.cls),o){for(r in n=t.append("text").attr("opacity",0),o.attr)n.attr(r,o.attr[r]);n.classed(o.cls,!!o.cls),Ext.d3.Helpers.noDominantBaseline()&&n.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,"central",!0)})}}return t},onUpdateTiles:function(e){function t(e,t){return t*m}var i=this.getInherited().rtl,n=this.getXAxis(),r=this.getYAxis(),s=this.getColorAxis(),o=n.getScale(),a=r.getScale(),l=s.getScale(),c=n.getStep(),u=r.getStep(),d=o.bandwidth?o.bandwidth():o(c)-o(0),h=a.bandwidth?a.bandwidth():a(u)-a(0),f=n.getField(),g=r.getField(),p=s.getField(),m=this.hasFirstRender&&this.isOldSize&&this.getTransitions().layout.delay||0,x=this.layoutTransition;e.select("rect").transition(x).delay(t).attr("x",function(e){var t=o(e.data[f]);return i&&!o.bandwidth&&(t+=d),t+.5}).attr("y",function(e){var t=a(e.data[g]);return a.bandwidth||(t+=h),t+.5}).attrTween("width",function(){var t=+this.getAttribute("width"),i=Math.abs(d);return function(e){return Math.max(t*(1-e)+i*e,0)}}).attrTween("height",function(){var t=+this.getAttribute("height"),i=Math.abs(h);return function(e){return Math.max(t*(1-e)+i*e,0)}}).style("fill",function(e){return l(e.data[p])}),e.select("text").text(function(e){return e.data[p]}).transition(x).delay(t).attr("opacity",1).attr("x",function(e){return o(e.data[f])+d/2}).attr("y",function(e){return a(e.data[g])+h/2}).on("end",function(){this.removeAttribute("opacity")})},onRemoveTiles:function(e){e.remove()},destroy:function(){var e=this.getXAxis(),t=this.getYAxis(),i=this.getColorAxis(),n=this.getLegend();Ext.destroy(e,t,i,n),this.callParent()}}),Ext.define("Ext.d3.canvas.HiDPI",{singleton:!0,relFontSizeRegEx:/(^[0-9])*(\\d+(?:\\.\\d+)?)(px|%|em|pt)/,absFontSizeRegEx:/(xx-small)|(x-small)|(small)|(medium)|(large)|(x-large)|(xx-large)/,fillStroke:function(e,l,t){var i,n=e.font,r=n!==e.$oldFont,s=e.shadowOffsetX,o=e.shadowOffsetY,a=e.lineDashOffset,c=e.lineWidth;r?(i=(i=n.replace(this.relFontSizeRegEx,function(e,t,i){return parseFloat(i)*l})).replace(this.absFontSizeRegEx,function(e,t,i,n,r,s,o,a){return t?9*l+"px":i?10*l+"px":n?13*l+"px":r?16*l+"px":s?18*l+"px":o?24*l+"px":a?32*l+"px":void 0}),e.font=i,e.$oldFont=n,e.$scaledFont=i):e.font=e.$scaledFont,e.shadowOffsetX=s*l,e.shadowOffsetY=o*l,e.lineDashOffset=a*l,e.lineWidth=c*l,3<arguments.length?e[t].apply(e,Array.prototype.slice.call(arguments,3)):e[t](),e.font=n,e.shadowOffsetX=s,e.shadowOffsetY=o,e.lineDashOffset=a,e.lineWidth=c},getOverrides:function(){var r=this,u=r.getDevicePixelRatio();return this.overrides||(this.overrides={fill:function(){r.fillStroke(this,u,"$fill")},stroke:function(){r.fillStroke(this,u,"$stroke")},moveTo:function(e,t){this.$moveTo(e*u,t*u)},lineTo:function(e,t){this.$lineTo(e*u,t*u)},quadraticCurveTo:function(e,t,i,n){this.$quadraticCurveTo(e*u,t*u,i*u,n*u)},bezierCurveTo:function(e,t,i,n,r,s){this.$bezierCurveTo(e*u,t*u,i*u,n*u,r*u,s*u)},arcTo:function(e,t,i,n,r){this.$arcTo(e*u,t*u,i*u,n*u,r*u)},arc:function(e,t,i,n,r,s){this.$arc(e*u,t*u,i*u,n,r,s)},rect:function(e,t,i,n){this.$rect(e*u,t*u,i*u,n*u)},clearRect:function(e,t,i,n){this.$clearRect(e*u,t*u,i*u,n*u)},fillRect:function(e,t,i,n){r.fillStroke(this,u,"$fillRect",e*u,t*u,i*u,n*u)},strokeRect:function(e,t,i,n){r.fillStroke(this,u,"$strokeRect",e*u,t*u,i*u,n*u)},translate:function(e,t){this.$translate(e*u,t*u)},transform:function(e,t,i,n,r,s){this.$transform(e,t,i,n,r*u,s*u)},setTransform:function(e,t,i,n,r,s){this.$setTransform(e,t,i,n,r*u,s*u)},isPointInPath:function(e,t,i,n){var r=arguments.length;return 3<r?this.$isPointInPath(e,t*u,i*u,n):2<r?this.$isPointInPath(e*u,t*u,i):this.$isPointInPath(e*u,t*u)},isPointInStroke:function(e,t,i){return 2<arguments.length?this.$isPointInStroke(e,t*u,i*u):this.$isPointInStroke(e*u,t*u)},drawImage:function(e,t,i,n,r,s,o,a,l){var c=arguments.length;5<c?this.$drawImage(e,t,i,n,r,s*u,o*u,a*u,l*u):3<c?this.$drawImage(e,t*u,i*u,n*u,r*u):this.$drawImage(e,t*u,i*u)},putImageData:function(e,t,i,n,r,s,o){this.$putImageData(e,t*u,i*u,n,r,s,o)},setLineDash:function(e){e instanceof Array||(e=Array.prototype.slice.call(e)),this.$setLineDash(e.map(function(e){return e*u}))},fillText:function(e,t,i,n){this.$fillText(e,t*u,i*u,n*u)},strokeText:function(e,t,i,n){this.$strokeText(e,t*u,i*u,n*u)},measureText:function(e){var t=this.$measureText(e);return t.width*=u,t},createLinearGradient:function(e,t,i,n){return this.$createLinearGradient(e*u,t*u,i*u,n*u)},createRadialGradient:function(e,t,i,n,r,s){return this.$createRadialGradient(e*u,t*u,i*u,n*u,r*u,s*u)}})},getDevicePixelRatio:function(e){return e?e.$devicePixelRatio||1:window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1},applyOverrides:function(e){var t,i=e.getContext("2d"),n=this.getDevicePixelRatio(),r=this.getOverrides();if(!e.$devicePixelRatio&&1!==n){for(t in r)i["$"+t]=i[t];Ext.apply(i,r),e.$devicePixelRatio=n}return e},setSize:function(e,t,i){var n=this.getDevicePixelRatio(e);return e.width=Math.round(t*n),e.height=Math.round(i*n),e.style.width=Math.round(t)+"px",e.style.height=Math.round(i)+"px",e}}),Ext.define("Ext.d3.canvas.Canvas",{extend:Ext.d3.Component,xtype:"d3-canvas",isCanvas:!0,config:{hdpi:!0},template:[{tag:"canvas",reference:"canvasElement",style:{position:"absolute"}}],canvas:null,context2D:null,renderScene:null,getCanvas:function(){var e=this.canvas;return e||(e=this.canvasElement.dom,this.getHdpi()&&(e=Ext.d3.canvas.HiDPI.applyOverrides(e)),this.canvas=e,this.context2D=e.getContext("2d")),e},resizeHandler:function(e){var t=this.canvas||this.getCanvas(),i=this.sceneRect||(this.sceneRect={});i.x=0,i.y=0,i.width=e.width,i.height=e.height,Ext.d3.canvas.HiDPI.setSize(t,i.width,i.height),this.onSceneResize(t,i),this.fireEvent("sceneresize",this,t,i)},onSceneResize:Ext.emptyFn,onPanZoom:function(e,t,i){var n=this.canvas,r=this.context2D;r&&this.renderScene&&(r.save(),r.clearRect(0,0,n.width,n.height),r.setTransform(t[0],0,0,t[1],i[0],i[1]),this.renderScene(r),r.restore())},getSceneRect:function(){return this.sceneRect}}),Ext.define("Ext.d3.hierarchy.Hierarchy",{extend:Ext.d3.svg.Svg,mixins:[Ext.d3.mixin.ToolTip],config:{hierarchyCls:"hierarchy",selection:null,colorAxis:{scale:{type:"ordinal",range:"d3.schemeCategory20c.slice(0, -4)"},field:"name"},nodeChildren:function(e){return e.isExpanded()?e.childNodes:null},nodeClass:void 0,nodeText:["name","text"],sorter:null,nodeTransform:function(e){e.attr("transform",function(e){return"translate("+e.x+","+e.y+")"})},nodeValue:1,noParentValue:!1,nodeKey:function(e,t){return e.data.id},linkKey:function(e,t){return e.target.data.id},selectEventName:"click",expandEventName:"dblclick",rootVisible:!0,layout:void 0,noSizeLayout:!0,renderLinks:!1,transitions:{layout:{duration:500,ease:"cubicInOut"},select:{duration:150,ease:"cubicInOut",sourceScale:1,targetScale:1.07}}},publishes:"selection",root:null,nodes:null,links:null,defaultCls:{links:Ext.baseCSSPrefix+"d3-links",nodes:Ext.baseCSSPrefix+"d3-nodes",link:Ext.baseCSSPrefix+"d3-link",node:Ext.baseCSSPrefix+"d3-node",root:Ext.baseCSSPrefix+"d3-root",label:Ext.baseCSSPrefix+"d3-label",parent:Ext.baseCSSPrefix+"d3-parent",leaf:Ext.baseCSSPrefix+"d3-leaf",selected:Ext.baseCSSPrefix+"d3-selected",expanded:Ext.baseCSSPrefix+"d3-expanded"},nodeClassCfg:null,mouseEnterPlugin:null,constructor:function(e){this.callParent([e]),this.mixins.d3tooltip.constructor.call(this,e)},applyTooltip:function(e,t){return e&&(e.delegate="g."+this.defaultCls.node),this.mixins.d3tooltip.applyTooltip.call(this,e,t)},updateTooltip:null,defaultNodeClass:function(e){var t,i=this,n=i.defaultCls,r=i.nodeClassCfg;for(t in r||(i.nodeClassCfg=r={},r[n.parent]=function(e){return!e.data.isLeaf()},r[n.leaf]=function(e){return e.data.isLeaf()},r[n.expanded]=function(e){return e.data.isExpanded()},r[n.root]=function(e){return e===i.root}),r)e.classed(t,r[t])},applyColorAxis:function(e,t){return e&&!e.isColorAxis&&(e=new Ext.d3.axis.Color(e)),e||t},applyNodeText:function(s){var e;return"function"==typeof s?e=s:"string"==typeof s?e=function(e,t){var i=t&&t.data&&t.data.data;return i&&i[s]||""}:Array.isArray(s)?e=function(e,t){var i,n,r=t&&t.data&&t.data.data;if(r)for(n=0;n<s.length&&!i;n++)i=r[s[n]];return i||""}:Ext.raise("nodeText must be a string, array of strings, or a function that returns a string."),e},applyNodeClass:function(e,t){var i;return i=(i=Ext.isFunction(e)?e:t||this.defaultNodeClass)&&i.bind(this)},applyNodeTransform:function(e){return e=e&&e.bind(this)},updateHierarchyCls:function(e,t){var i=this.baseCls,n=this.element;e&&Ext.isString(e)&&(n.addCls(e,i),t&&n.removeCls(t,i))},applyStore:function(e,t){var i=e&&Ext.StoreManager.lookup(e,"tree");return i&&!i.isTreeStore&&Ext.raise("The store must be a Ext.data.TreeStore."),i},applyNodeValue:function(t){var i,e,n=this.getNoParentValue(),r=this.getNodeChildren();return"string"==typeof t?i=function(e){return e.data[t]}:Ext.isNumber(t)?i=function(){return t}:"function"==typeof t&&(i=t),i&&(e=n?function(e){return r(e)?0:i.call(this,e)}:i.bind(this)),e},updateNodeValue:function(){this.isConfiguring||this.performLayout()},updateNodeChildren:function(){this.isConfiguring||this.performLayout()},updateSorter:function(e){this.isConfiguring||this.performLayout()},findNode:function(t,e){return(e=e||this.getRenderedNodes()).filter(function(e){return t&&(e.data.id===t.data.id||e===t)})},nodeFromRecord:function(e){var t=e&&this.selectionFromRecord(e);return t&&!t.empty()?t.datum():null},selectionFromRecord:function(e){return e&&e.isModel||Ext.raise("Passed parameter should be a model instance."),this.scene.select('[data-id="'+e.id+'"]')},isRecordInStore:function(e){var t=this.getStore();return!(!(e&&e.isModel&&t)||t.isEmptyStore||e.store!==t&&t.getNodeById(e.id)!==e&&t.getRoot()!==e)},applySelection:function(e){return e&&!e.isModel&&Ext.raise("The 'record' should be a Ext.data.TreeModel instance."),this.isRecordInStore(e)?e:null},updateSelection:function(e,t){var i,n,r,s=this;s.hasFirstRender?(e&&((r=!(i=s.selectionFromRecord(e)).empty())?s.onNodeSelect(e,i):(s[s.self.getConfigurator().configs.selection.names.internal]=null,Ext.log.warn('Selected record "'+e.id+'" does not have an associated element. E.g.:\\n- record was selected before it was rendered;\\n- record was selected in some other view, but is not supposed to be rendered by this D3 component (see "nodeChildren" config).'))),t&&((n=s.selectionFromRecord(t)).empty()||s.onNodeDeselect(t,n)),r&&s.fireEvent("selectionchange",s,e,t)):e&&s.on({scenerender:s.updateSelection.bind(s,e,t),single:!0})},onNodeSelect:function(e,t){t.classed(this.defaultCls.selected,!0),this.fireEvent("select",this,e,t)},onNodeDeselect:function(e,t){t.classed(this.defaultCls.selected,!1),this.fireEvent("deselect",this,e,t)},onNodesAdd:function(e){e.attr("class",this.defaultCls.node).each(function(e){this.setAttribute("data-id",e.data.id)})},addNodeListeners:function(){var e,t,i=Ext.Array.from(this.getSelectEventName()),n=Ext.Array.from(this.getExpandEventName());for(e=0,t=i.length;e<t;e++)this.addNodeListener(i[e],this.onSelectEvent);for(e=0,t=n.length;e<t;e++)this.addNodeListener(n[e],this.onExpandEvent)},updateEventName:function(e,t,i){var n,r,s=Ext.Array.from(e),o=Ext.Array.from(t);for(n=0,r=o.length;n<r;n++)this.removeNodeListener(o[n],i);for(n=0,r=s.length;n<r;n++)this.addNodeListener(s[n],i)},updateSelectEventName:function(e,t){this.updateEventName(e,t,this.onSelectEvent)},updateExpandEventName:function(e,t){this.updateEventName(e,t,this.onExpandEvent)},addNodeListener:function(e,t){var i=this.el;"mouseenter"===e?this.mouseEnterPlugin=this.addPlugin({type:"mouseenter",element:i,delegate:"g."+this.defaultCls.node,handler:t}):e&&i.on(e,t,this,{delegate:"g."+this.defaultCls.node})},removeNodeListener:function(e,t){var i=this.el;"mouseenter"===e?Ext.destroy(this.mouseEnterPlugin):e&&i.un(e,t,this,{delegate:"g."+this.defaultCls.node})},onSelectEvent:function(e,t){var i=d3.select(t),n=i.node(),r=i.datum();this.handleSelectEvent(e,r,n)},handleSelectEvent:function(e,t,i){this.setSelection(t.data)},onExpandEvent:function(e){var t=d3.select(e.currentTarget),i=t.node(),n=t.datum();this.handleExpandEvent(e,n,i)},handleExpandEvent:function(e,t,i){var n=t.data;n.isExpanded()?n.collapse():n.expand()},setLayoutSize:function(e){this.getLayout().size(e)},getLayoutSize:function(){var e=this.getLayout();return e.size&&e.size()},onSceneResize:function(e,t){this.callParent([e,t]),this.setLayoutSize([t.width,t.height]),this.performLayout()},hasFirstLayout:!1,hasFirstRender:!1,isLayoutTransitionSkipped:!1,oldLayoutSaving:!1,oldNodes:null,oldLinks:null,isLayoutBlocked:Ext.emptyFn,skipLayoutTransition:function(){this.isLayoutTransitionSkipped=!0},processDataChange:function(e){(this.getNoSizeLayout()||this.size)&&this.performLayout()},setupScene:function(e){this.callParent([e]),this.linksGroup=e.append("g").classed(this.defaultCls.links,!0),this.nodesGroup=e.append("g").classed(this.defaultCls.nodes,!0)},performLayout:function(){var e,t,i,n,r,s,o,a,l=this,c=l.getStore(),u=c&&c.getRoot(),d=l.getRootVisible(),h=l.getLayout();l.getScene(),u||(l.getRenderedNodes().remove(),l.getRenderedLinks().remove()),!u||c.isLoading()||l.isInitializing||l.isLayoutBlocked(h)||(n=!d&&u.data.autoRoot&&1===u.childNodes.length?u.firstChild:u,r=l.getSorter(),s=l.getRenderLinks(),o=l.getNodeChildren(),a=l.getNodeValue(),l.oldLayoutSaving&&l.saveLayout(l.nodes,l.links),e=d3.hierarchy(n,o).sum(a),r&&(e=e.sort(r)),l.storeRoot=u,l.root=e=h(e),t=l.nodes=e.descendants(),s&&(i=l.links=e.links()),l.hasFirstLayout=!0,l.renderScene(t,i))},saveLayout:function(e,t){var i,n,r,s={};if(this.oldNodes=s,e)for(i=0,n=e.length;i<n;i++)s[(r=e[i]).data.id]=r;this.oldLinks=t},getOldNode:function(e){return e&&this.oldNodes&&this.oldNodes[e.data.id]},renderScene:function(e,t){var i,n,r=this,s=r.getNodeKey(),o=r.getLinkKey();r.hasFirstLayout||r.performLayout(),e=e||r.nodes,t=t||r.links,r.onBeforeRender(e,t),e&&(i=r.getRenderedNodes().data(e,s),r.renderNodes(i),t&&(n=r.getRenderedLinks().data(t,o),r.renderLinks(n))),r.hideRoot(),r.hasFirstRender=!0,r.onAfterRender(i,n),r.fireEvent("scenerender",r,i,n)},getRenderedNodes:function(){return this.nodesGroup.selectAll("."+this.defaultCls.node)},getRenderedLinks:function(){return this.linksGroup.selectAll("."+this.defaultCls.link)},hideRoot:function(){var e=this.getRootVisible();this.nodesGroup.select("."+this.defaultCls.root).classed(this.defaultCls.invisible,!e)},renderLinks:function(e){this.updateLinks(e,this.addLinks(e.enter())),this.removeLinks(e.exit())},renderNodes:function(e){var t=this.getNodeClass(),i=e.enter().append("g");i.call(this.onNodesAdd.bind(this)),this.addNodes(i),i.call(t),e.call(t),this.updateNodes(e,i),this.removeNodes(e.exit())},layoutTransition:null,onBeforeRender:function(){var e=this,t=e.hasFirstRender&&!e.isLayoutTransitionSkipped,i=e.createTransition(t?"layout":"none");e.isLayoutTransitionSkipped=!1,e.layoutTransition=i.on("end",function(){e.layoutTransition=null,e.destroyed||e.destroying||e.onLayout()})},onLayout:function(){this.panZoom&&this.panZoom.updateIndicator(),this.fireEvent("layout",this)},onAfterRender:Ext.emptyFn,updateLinks:Ext.emptyFn,addLinks:Ext.emptyFn,updateNodes:Ext.emptyFn,addNodes:Ext.emptyFn,removeLinks:function(e){e.remove()},removeNodes:function(e){e.remove()}}),Ext.define("Ext.d3.hierarchy.Pack",{extend:Ext.d3.hierarchy.Hierarchy,xtype:"d3-pack",config:{componentCls:"pack",textPadding:[3,3],nodeValue:function(e){return e.childNodes.length+1},clipText:!0,noSizeLayout:!1},applyLayout:function(){return d3.pack()},onNodeSelect:function(e,t){this.callParent(arguments),t.select("circle").style("fill",null)},onNodeDeselect:function(e,t){var i=this.getColorAxis();this.callParent(arguments),t.select("circle").style("fill",function(e){return i.getColor(e)})},updateColorAxis:function(t){this.isConfiguring||this.getRenderedNodes().select("circle").style("fill",function(e){return t.getColor(e)})},textVisibilityFn:function(e){var t=this.getTextPadding(),r=2*parseFloat(t[0]),s=2*parseFloat(t[1]);e.classed(this.defaultCls.invisible,function(e){var t=this.getBBox(),i=e.r-r,n=e.r-s;return t.width>i||t.height>n})},addNodes:function(e){var t,i=this.getNodeTransform(),n=this.getClipText();e.call(this.onNodesAdd.bind(this)).call(i).append("circle"),t=e.append("text").attr("class",this.defaultCls.label),n&&t.call(this.textVisibilityFn.bind(this)),Ext.d3.Helpers.noDominantBaseline()&&t.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,"central",!0)}),t.attr("opacity",0)},updateNodes:function(e,t){var i,n=this,r=n.getColorAxis(),s=n.getNodeTransform(),o=n.getSelection(),a=n.getNodeText(),l=n.getClipText(),c=e.merge(t),u=n.layoutTransition;c.transition(u).call(s),c.select("circle").transition(u).attr("r",function(e){return e.r}).style("fill",function(e){return e.data===o?null:r.getColor(e)}),i=c.select("text").text(function(e){return a(n,e)}),l&&i.call(n.textVisibilityFn.bind(n)),i.transition(u).attr("opacity",1)},removeNodes:function(e){e.attr("opacity",1).transition(this.layoutTransition).attr("opacity",0).remove()}}),Ext.define("Ext.d3.hierarchy.TreeMap",{extend:Ext.d3.hierarchy.Hierarchy,xtype:"d3-treemap",config:{componentCls:"treemap",tiling:null,parentTile:{padding:4,label:{offset:[5,2],clipSize:[110,40]}},leafTile:{padding:0},nodeTransform:function(e){e.attr("transform",function(e){return"translate("+e.x0+","+e.y0+")"})},busyLayoutText:"Layout in progress...",noParentValue:!0,noSizeLayout:!1,scaleLabels:!1},labelQuantizer:null,constructor:function(e){this.labelQuantizer=this.createLabelQuantizer(),this.callParent([e])},createLabelQuantizer:function(){return d3.scaleQuantize().domain([8,27]).range(["8px","12px","18px","27px"])},labelSizer:function(e,t){return Math.min((e.x1-e.x0)/4,(e.y1-e.y0)/2)},applyTiling:function(e,t){return Ext.d3.Helpers.eval(e||t)},updateTiling:function(e){e&&(this.getLayout().tile(e),this.isConfiguring||this.performLayout())},updateLeafTile:function(e){e&&this.getLayout().paddingInner(e.padding||0),this.isConfiguring||this.performLayout()},applyParentTile:function(e){var t,i=this;return e&&(t=e.padding,Ext.isNumber(t)&&(e.padding=function(e){return i.getRootVisible()||e!==i.root?t:0})),e},updateParentTile:function(e){var t,i;e&&(t=this.getLayout(),i=e.padding,t.paddingRight(i),t.paddingBottom(i),t.paddingLeft(i)),this.isConfiguring||this.performLayout()},applyLayout:function(){return d3.treemap().round(!0)},setLayoutSize:function(e){this.callParent([e])},deferredLayoutId:null,isLayoutBlocked:function(e){var t=this.getBusyLayoutText(),i=!1;return this.deferredLayoutId?(clearTimeout(this.deferredLayoutId),this.deferredLayoutId=null):(this.showMask(t),this.deferredLayoutId=setTimeout(this.performLayout.bind(this),100),i=!0),i},setupScene:function(e){this.callParent([e]),this.getScaleLabels()},onAfterRender:function(){this.hideMask()},hiddenParentLabels:null,labelSizes:null,getContentRect:function(){var e=this.getSceneRect(),t=this.contentRect||(this.contentRect={x:0,y:0});return e&&(t.width=e.width,t.height=e.height),e&&t},onNodeSelect:function(e,t){this.callParent(arguments),t.select("rect").style("fill",null)},onNodeDeselect:function(e,t){var i=this.getColorAxis();this.callParent(arguments),t.select("rect").style("fill",function(e){return i.getColor(e)})},renderNodes:function(e){var t,a=this,i=a.root,n=a.getLayout(),l=a.getParentTile().label,r=a.getNodeTransform(),c=a.hiddenParentLabels={},u=a.labelSizes={};a.callParent([e]),n.paddingTop(function(e){var t,i,n,r=e.data.data.id,s=u[r],o=l.clipSize;return a.getRootVisible()||e!==a.root?(t=2*l.offset[1],i=e.x1-e.x0,n=e.y1-e.y0,s.width<i&&s.height<n&&i>o[0]&&n>o[1]?(t+=s.height,c[r]=!1):c[r]=!0):(t=0,c[r]=!0),t}),a.root=i=n(i),t=a.nodes=i.descendants(),n.paddingTop(0),(e=a.getRenderedNodes().data(t,a.getNodeKey())).transition(a.layoutTransition).call(r),e.select("rect").call(a.nodeSizeFn.bind(a)),e.select("text").call(a.textVisibilityFn.bind(a)).each(function(e){e.data.isLeaf()?(this.setAttribute("x",(e.x1-e.x0)/2),this.setAttribute("y",(e.y1-e.y0)/2)):(this.setAttribute("x",l.offset[0]),this.setAttribute("y",l.offset[1]))})},addNodes:function(e){var i=this,n=i.labelSizes,t=i.getColorAxis(),r=i.getNodeText(),s=i.getScaleLabels(),o=i.defaultCls;e.append("rect").style("fill",function(e){return t.getColor(e)}),e.append("text").style("font-size",function(e){return s?i.getLabelSize(e,this):null}).each(function(e){var t=r(i,e);this.textContent=null==t?"":t,this.setAttribute("class",o.label),Ext.d3.Helpers.fakeDominantBaseline(this,e.data.isLeaf()?"central":"text-before-edge"),n[e.data.id]=this.getBBox()})},updateNodes:function(e){var i=this,n=i.getNodeText(),t=i.getScaleLabels(),r=i.labelSizes;e.select("rect").call(i.nodeSizeFn.bind(i)),e.select("text").style("font-size",function(e){return t?i.getLabelSize(e,this):null}).each(function(e){var t=n(i,e);this.textContent=null==t?"":t,r[e.data.id]=this.getBBox()})},getLabelSize:function(e,t){return e.data.isLeaf()?this.labelQuantizer(this.labelSizer(e,t)):null},updateScaleLabels:function(){this.isConfiguring||this.performLayout()},updateNodeValue:function(e){this.callParent(arguments),this.isConfiguring||this.performLayout()},nodeSizeFn:function(e){e.attr("width",function(e){return Math.max(0,e.x1-e.x0)}).attr("height",function(e){return Math.max(0,e.y1-e.y0)})},isLabelVisible:function(e,t){var i=e.getBBox(),n=t.x1-t.x0,r=t.y1-t.y0,s=t.data.isLeaf(),o=this.getParentTile(),a=this.hiddenParentLabels,l=o.label.offset;return s?(n-=2,r-=2):(n-=2*l[0],r-=2*l[1]),s||!t.data.isExpanded()?i.width<n&&i.height<r:!a[t.data.id]},textVisibilityFn:function(e){var t=this;e.classed(t.defaultCls.invisible,function(e){return!t.isLabelVisible(this,e)})},destroy:function(){var e=this.getColorAxis();this.deferredLayoutId&&clearTimeout(this.deferredLayoutId),e.destroy(),this.callParent()}}),Ext.define("Ext.d3.hierarchy.partition.Partition",{extend:Ext.d3.hierarchy.Hierarchy,xtype:"d3-partition",config:{partitionCls:"partition",nodeValue:function(e){return e.isExpanded()&&e.childNodes?0:1}},updatePartitionCls:function(e,t){var i=this.baseCls,n=this.element;e&&Ext.isString(e)&&(n.addCls(e,i),t&&n.removeCls(t,i))},applyLayout:function(){return d3.partition()},resetZoom:function(e){var t=this.getStore(),i=t&&t.getRoot();this.zoomInNode(i,e)}}),Ext.define("Ext.d3.hierarchy.partition.Sunburst",{extend:Ext.d3.hierarchy.partition.Partition,xtype:"d3-sunburst",config:{componentCls:"sunburst",textPadding:[5,"0.35em"],zoomParentDotRadius:30,transitions:{zoom:{duration:1e3,ease:"cubicInOut"}}},setupScene:function(e){this.callParent([e]),this.setupScales(),this.setupArcGenerator()},scaleDefaults:{x:{domain:[0,1],range:[0,2*Math.PI]},y:{domain:[0,1]}},setupScales:function(){var e=this.scaleDefaults;this.xScale=d3.scaleLinear().domain(e.x.domain.slice()).range(e.x.range.slice()),this.yScale=d3.scaleSqrt().domain(e.y.domain.slice())},arc:null,defaultCls:{center:Ext.baseCSSPrefix+"d3-center"},setupArcGenerator:function(){var t=this.xScale,i=this.yScale;this.arc=d3.arc().startAngle(function(e){return Math.max(0,Math.min(2*Math.PI,t(e.x0)))}).endAngle(function(e){return Math.max(0,Math.min(2*Math.PI,t(e.x1)))}).innerRadius(function(e){return Math.max(0,i(e.y0))}).outerRadius(function(e){return Math.max(0,i(e.y1))})},onSceneResize:function(e,t){var i=this.nodesGroup,n=.5*t.width,r=.5*t.height,s=Math.min(n,r);i.attr("transform","translate("+n+","+r+")"),this.setRadius(s)},radius:null,minRadius:1,setRadius:function(e){e=Math.max(this.minRadius,e),this.radius=e,this.yScale.range([0,e]),this.renderScene()},zoomInNode:function(e,t){var r,i,n=this,s=n.getScene(),o=n.getZoomParentDotRadius(),a=n.radius,l=n.xScale,c=n.yScale,u=n.arc;n.hasFirstLayout&&n.hasFirstRender&&n.size&&e&&e.isNode&&(r=n.nodeFromRecord(e)),r&&((i=n.createTransition(t?"none":"zoom",s).tween("scale",function(){var t=d3.interpolate(l.domain(),[r.x0,r.x1]),i=d3.interpolate(c.domain(),[r.y0,1]),n=d3.interpolate(c.range(),[r.y0?o:0,a]);return function(e){l.domain(t(e)),c.domain(i(e)).range(n(e))}}).selectAll("."+n.defaultCls.node)).selectAll("path").attrTween("d",function(t){return function(e){return u(t)}}),i.selectAll("text").call(n.positionTextFn.bind(n)).call(n.textVisibilityFn.bind(n)),t&&(n.xScale.domain([r.x0,r.x1]),n.yScale.domain([r.y0,1]).range([r.y0?o:0,a])))},onNodeSelect:function(e,t){var i=this.getTransitions().select,n=i.targetScale,r=i.sourceScale,s=this.createTransition("select");this.callParent(arguments),t.raise().select("path").style("fill",null),s.duration()&&t.transition(s).attr("transform","scale("+n+","+n+")").transition(s).attr("transform","scale("+r+","+r+")")},onNodeDeselect:function(e,t){var i=this.getColorAxis();this.callParent(arguments),t.select("path").style("fill",function(e){return i.getColor(e)})},isBBoxInSlice:function(e,t,i,n,r,s,o){var a=Math.abs(i-t),l=Math.abs(r-n)-2*s,c=a<Math.PI?2*(n+s)*Math.tan(.5*a)-2*o:.5*r,u=e.width>l,d=e.height>c;return!(u||d)},textVisibilityFn:function(e){var h=this,f=h.xScale,g=h.yScale,i=h.defaultCls.invisible,t=h.getTextPadding(),p=parseFloat(t[0]),m=parseFloat(t[1]);function n(e,t){h.isDestroyed&&Ext.log.warn("Component is destroyed, shouldn't have executed this.");var i=e._bbox||e.getBBox(),n=f(t.x0),r=f(t.x1),s=g(t.y0),o=g(t.y1),a=h.isBBoxInSlice(i,n,r,s,o,p,m),l=f.domain(),c=g.domain(),u=l[0]>t.x0||l[1]<t.x1,d=c[0]>t.y0||c[1]<t.y1;return!a||u||d}e instanceof d3.transition?e.tween("class.invisible",function(e){var t=this;return function(){d3.select(t).classed(i,n(t,e))}}):e.classed(i,function(e){return n(this,e)})},positionTextFn:function(e){var t,i,n=this,r=n.xScale,s=n.yScale,o=Math.PI/2,a=180/Math.PI,l=e instanceof d3.transition,c=l?"attrTween":"attr";function u(e){return s(e.y0)}function d(e){return e===n.root?"":"rotate("+(r((e.x0+e.x1)/2)-o)*a+")"}i=l?(t=function(e){return function(){return u(e)}},function(e){return function(){return d(e)}}):(t=function(e){return u(e)},function(e){return d(e)}),e[c]("x",t)[c]("transform",i)},addNodes:function(e){var t=this,i=t.getTextPadding();e.append("path").attr("d",t.arc),e.append("text").attr("class",t.defaultCls.label).each(function(e){e!==t.root&&(this.setAttribute("dx",i[0]),this.setAttribute("dy",i[1]))})},measureLabels:function(e){e instanceof d3.transition||e.each(function(){this._bbox=this.getBBox()})},updateNodes:function(e,t){var i=this,n=i.getColorAxis(),r=i.getNodeText(),s=i.getSelection(),o=e.merge(t);o.select("path").attr("d",i.arc).style("fill",function(e){return e.data===s?null:n.getColor(e)}),o.select("text").text(function(e){return r(i,e)}).call(i.measureLabels.bind(i)).call(i.positionTextFn.bind(i)).call(i.textVisibilityFn.bind(i)),i.nodesGroup.select("."+i.defaultCls.selected).raise()},updateColorAxis:function(t){this.isConfiguring||this.getRenderedNodes().select("path").style("fill",function(e){return t.getColor(e)})}}),Ext.define("Ext.d3.hierarchy.tree.Tree",{extend:Ext.d3.hierarchy.Hierarchy,config:{treeCls:"tree",nodeTransform:null,depth:0,nodeRadius:5,nodeTransition:!0,nodeSize:null,noSizeLayout:!1,renderLinks:!0,transitions:{select:{targetScale:1.5}}},updateTreeCls:function(e,t){var i=this.baseCls,n=this.element;e&&Ext.isString(e)&&(n.addCls(e,i),t&&n.removeCls(t,i))},applyLayout:function(){return d3.tree()},updateNodeSize:function(e){this.getLayout().nodeSize(e)},updateColorAxis:function(t){this.isConfiguring||this.getRenderedNodes().select("circle").style("fill",function(e){return t.getColor(e)})},hideRoot:function(){var e=this.getRootVisible();this.nodesGroup.select("."+this.defaultCls.root).classed(this.defaultCls.hidden,!e)},onNodeSelect:function(e,t){var i=this.getTransitions().select,n=i.targetScale,r=i.sourceScale,s=this.createTransition("select"),o=t.select("circle");this.callParent(arguments),o.style("fill",null),s.duration()&&o.transition(s).attr("transform","scale("+n+","+n+")").transition(s).attr("transform","scale("+r+","+r+")")},onNodeDeselect:function(e,t){var i=this.getColorAxis();this.callParent(arguments),t.select("circle").style("fill",function(e){return i.getColor(e)})}}),Ext.define("Ext.d3.hierarchy.tree.HorizontalTree",{extend:Ext.d3.hierarchy.tree.Tree,xtype:["d3-tree","d3-horizontal-tree"],config:{componentCls:"horizontal-tree",nodeTransform:function(e){e.attr("transform",function(e){return"translate("+e.y+","+e.x+")"})}},pendingTreeAlign:!1,oldLayoutSaving:!0,alignAfterLayout:function(){this.pendingTreeAlign=!0},onSceneResize:function(e,t){var i=this.getLayout();this.alignAfterLayout(),i.nodeSize()?this.size?this.alignTree():this.performLayout():this.callParent(arguments)},onLayout:function(){this.pendingTreeAlign&&(this.pendingTreeAlign=!1,this.alignTree()),this.callParent()},alignTree:function(){this.getNodeSize()&&this.alignContent("l")},updateNodeSize:function(e){e?this.getLayout().nodeSize(e.slice().reverse()):(this.setLayoutSize([this.sceneRect.width,this.sceneRect.height]),this.panZoom&&Ext.log.warn("With no \`nodeSize\` set, the \`panzoom\` interaction is likely redundant. You can remove it with \`component.panZoom.destroy()\`. This will also remove any translation/scaling currently applied to the scene.")),this.isConfiguring||(this.skipLayoutTransition(),this.alignAfterLayout(),this.performLayout())},setLayoutSize:function(e){var t=e[0];e[0]=e[1],e[1]=t,this.callParent([e])},onNodesAdd:function(e){var t;this.callParent([e]),(t=this.getOldNode(this.nodeFromRecord(this.getSelection())))&&e.attr("transform","translate("+t.y+","+t.x+")")},addNodes:function(e){var t,i=this.getNodeRadius();e.append("circle").attr("opacity",0),t=e.append("text").attr("class",this.defaultCls.label).each(function(e){var t=e.data.isLeaf();this.setAttribute("x",t?i+5:-5-i)}).attr("opacity",0),Ext.d3.Helpers.noDominantBaseline()&&t.each(function(){Ext.d3.Helpers.fakeDominantBaseline(this,"central",!0)})},updateNodes:function(e,t){var i=this,n=i.getSelection(),r=i.getNodeTransform(),s=i.getColorAxis(),o=i.getNodeRadius(),a=i.getNodeText(),l=e.merge(t),c=i.layoutTransition;l.transition(c).call(r),l.select("circle").style("fill",function(e){return e.data===n?null:s.getColor(e)}).attr("r",o).transition(c).attr("opacity",1),l.select("text").text(function(e){return a(i,e)}).transition(c).attr("opacity",1)},removeNodes:function(e){var r=this,s=r.nodeFromRecord(r.getSelection());e.attr("opacity",1).transition(r.layoutTransition).attr("opacity",0).attr("transform",function(e){var t=e.parent,i=s||t&&r.nodeFromRecord(t.data),n=i&&i.x||0;return"translate("+(i&&i.y||0)+","+n+")"}).remove()},getLinkPath:function(e){var t=e.source.y+(e.target.y-e.source.y)/2;return"M"+e.source.y+","+e.source.x+"C"+t+","+e.source.x+" "+t+","+e.target.x+" "+e.target.y+","+e.target.x},addLinks:function(e){var s=this,o=s.nodeFromRecord(s.getSelection());return e.append("path").classed(s.defaultCls.link,!0).attr("d",function(e){var t=o||e.source,i=s.getOldNode(t),n=i?i.x:t.x,r=i?i.y:t.y;return"M"+r+","+n+"C"+r+","+n+" "+r+","+n+" "+r+","+n}).attr("opacity",0)},updateLinks:function(e,t){var i=this,n=e.merge(t),r=i.layoutTransition,s=!i.getRootVisible();n.classed(i.defaultCls.hidden,function(e){return s&&e.source.data===i.storeRoot}).transition(r).attr("d",i.getLinkPath).attr("opacity",1)},removeLinks:function(e){var s=this,o=s.nodeFromRecord(s.getSelection());e.attr("opacity",1).transition(s.layoutTransition).attr("opacity",0).attr("d",function(e){var t=e.source,i=o||t&&s.nodeFromRecord(t.data),n=i&&i.x||0,r=i&&i.y||0;return"M"+r+","+n+"C"+r+","+n+" "+r+","+n+" "+r+","+n}).remove()}}),Ext.define("Ext.exporter.data.Base",{config:{idPrefix:"id",id:null,autoGenerateId:!0,autoGenerateKey:{$value:!1,merge:function(e,t){return!!e&&Ext.concat(e,t||null)}}},internalCols:null,clearPropertiesOnDestroy:!1,constructor:function(e){return this.internalCols=[],this.initConfig(e),this._id||this.setId(null),this.callParent([e])},destroy:function(){this.destroyCollections(),this.callParent(),this.internalCols=null},destroyCollections:function(){var e,t,i,n,r=this.internalCols,s=r.length;for(e=0;e<s;e++){for(i=(n=r[e]).length,t=0;t<i;t++)n.items[t].destroy();n.destroy()}r.length=0},clearCollections:function(e){var t,i;for(t=(e=e?Ext.Array.from(e):this.internalCols).length-1;0<=t;t--)(i=e[t])&&i.destroy(),Ext.Array.remove(this.internalCols,i)},applyId:function(e){return!e&&this._autoGenerateId?this._idPrefix+ ++Ext.idSeed:e},checkCollection:function(e,t,i){var n;return e&&(n=this.constructCollection(i)).add(e),t&&(Ext.Array.remove(this.internalCols,t),Ext.destroy(t.items,t)),n},constructCollection:function(e){var t,i=Ext.ClassManager.get(e),n={decoder:this.getCollectionDecoder(i)};return"function"==typeof i.prototype.getKey&&(n.keyFn=this.getCollectionItemKey),t=new Ext.util.Collection(n),this.internalCols.push(t),t},getCollectionDecoder:function(t){return function(e){return e&&e.isInstance?e:new t(e||{})}},getCollectionItemKey:function(e){return e.getKey?e.getKey():e._id||e.getId()},getKey:function(){var e,t,i=this.getAutoGenerateKey(),n="",r=this.getConfig();if(!Ext.isArray(i)||!i.length)return this.getId();for(e=i.length,t=0;t<e;t++)n+=this.serializeKeyValue(r[i[t]]);return n},serializeKeyValue:function(e){var t,i,n,r="";if(null===e)r="_";else if(Ext.isDate(e))r=e.getTime();else if(Ext.isArray(e))for(i=e.length,n=0;n<i;n++)r+=this.serializeKeyValue(e[n]);else if("object"==typeof e)if(e.isInstance)r=e.getKey?e.getKey():"_";else for(t=Ext.Object.getAllKeys(e),i=(t=Ext.Array.sort(t)).length,n=0;n<i;n++)r+=this.serializeKeyValue(e[t[n]]);else r=e;return r}}),Ext.define("Ext.exporter.data.Cell",{extend:Ext.exporter.data.Base,config:{style:null,value:null}}),Ext.define("Ext.exporter.data.Row",{extend:Ext.exporter.data.Base,config:{cells:null},destroy:function(){this.clearCollections()},applyCells:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Cell")},addCell:function(e){return this._cells||this.setCells([]),this._cells.add(e||{})},getCell:function(e){return this._cells?this._cells.get(e):null}}),Ext.define("Ext.exporter.data.Group",{extend:Ext.exporter.data.Base,config:{text:null,rows:null,summaries:null,summary:null,groups:null},applyRows:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Row")},addRow:function(e){return this._rows||this.setRows([]),this._rows.add(e||{})},getRow:function(e){return this._rows?this._rows.get(e):null},applyGroups:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Group")},addGroup:function(e){return this._groups||this.setGroups([]),this._groups.add(e||{})},getGroup:function(e){return this._groups?this._groups.get(e):null},applySummaries:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Row")},applySummary:function(e){return e&&this.addSummary(e),null},addSummary:function(e){return this._summaries||this.setSummaries([]),this._summaries.add(e||{})},getSummary:function(e){return this._summaries?this._summaries.get(e):null}}),Ext.define("Ext.exporter.data.Column",{extend:Ext.exporter.data.Base,config:{table:null,text:null,style:null,width:null,mergeAcross:null,mergeDown:null,level:0,index:null,columns:null},destroy:function(){this.setTable(null),this.callParent()},updateTable:function(e){var t,i,n=this.getColumns();if(n)for(i=n.length,t=0;t<i;t++)n.getAt(t).setTable(e)},applyColumns:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Column")},updateColumns:function(e,t){t&&(t.un({add:this.onColumnAdd,remove:this.onColumnRemove,scope:this}),Ext.destroy(t.items,t)),e&&(e.on({add:this.onColumnAdd,remove:this.onColumnRemove,scope:this}),this.onColumnAdd(e,{items:e.getRange()}))},sync:function(e,t){var i,n,r,s=this.getColumnCount()-1,o=this.getColumns();if(this.setLevel(e),o){for(n=o.length,i=0;i<n;i++)o.items[i].sync(e+1,t);this.setMergeDown(null)}else r=t-e,this.setMergeDown(0<r?r:null);this.setMergeAcross(0<s?s:null)},onColumnAdd:function(e,t){var i,n=t.items,r=n.length,s=this.getTable();for(i=0;i<r;i++)n[i].setTable(s);s&&s.syncColumns()},onColumnRemove:function(e,t){var i=this.getTable();Ext.destroy(t.items),i&&i.syncColumns()},getColumnCount:function(e){var t,i,n=0;if(!e&&!(e=this.getColumns()))return 1;for(i=0;i<e.length;i++)n+=(t=e.getAt(i).getColumns())?this.getColumnCount(t):1;return n},addColumn:function(e){return this.getColumns()||this.setColumns([]),this.getColumns().add(e||{})},getColumn:function(e){return this.getColumns().get(e)}}),Ext.define("Ext.exporter.data.Table",{extend:Ext.exporter.data.Group,isDataTable:!0,config:{columns:null},autoGenerateId:!1,applyColumns:function(e,t){return this.checkCollection(e,t,"Ext.exporter.data.Column")},updateColumns:function(e,t){t&&(t.un({add:this.onColumnAdd,remove:this.onColumnRemove,scope:this}),Ext.destroy(t.items,t)),e&&(e.on({add:this.onColumnAdd,remove:this.onColumnRemove,scope:this}),this.onColumnAdd(e,{items:e.getRange()}),this.syncColumns())},syncColumns:function(){var e,t,i,n,r,s,o,a,l=this.getColumns(),c=this.getColDepth(l,-1),u={};if(l){for(i=l.length,e=0;e<i;e++)l.items[e].sync(0,c);for(this.getColumnLevels(l,c,u),i=(r=Ext.Object.getKeys(u)).length,e=0;e<i;e++)for(n=(s=u[r[e]]).length,t=0;t<n;t++)0===t?a=1:s[t-1]?a+=(o=s[t-1].getConfig()).mergeAcross?o.mergeAcross+1:1:a++,s[t]&&s[t].setIndex(a)}},getLeveledColumns:function(){var e=this.getColumns(),t=this.getColDepth(e,-1),i={};return this.getColumnLevels(e,t,i,!0),i},getBottomColumns:function(){var e,t=this.getLeveledColumns();return(e=Ext.Object.getKeys(t)).length?t[e[e.length-1]]:[]},getColumnLevels:function(e,t,i,n){var r,s,o,a,l,c,u;if(e)for(a=e.length,s=0;s<a;s++)if(c=(r=e.items[s]).getLevel(),u=r.getColumns(),i[l="s"+c]=i[l]||[],i[l].push(r),u)this.getColumnLevels(u,t,i,n);else for(o=c+1;o<=t;o++)i[l="s"+o]=i[l]||[],i[l].push(n?r:null)},onColumnAdd:function(e,t){var i,n=t.items,r=n.length;for(i=0;i<r;i++)n[i].setTable(this);this.syncColumns()},onColumnRemove:function(e,t){Ext.destroy(t.items),this.syncColumns()},getColumnCount:function(){var e,t,i=this._columns,n=0;if(i)for(t=i.length,e=0;e<t;e++)n+=i.items[e].getColumnCount();return n},getColDepth:function(e,t){var i,n,r=0;if(!e)return t;for(n=e.length,i=0;i<n;i++)r=Math.max(r,this.getColDepth(e.items[i]._columns,t+1));return r},addColumn:function(e){return this._columns||this.setColumns([]),this._columns.add(e||{})},getColumn:function(e){return this._columns?this._columns.get(e):null}}),Ext.define("Ext.exporter.file.Base",{extend:Ext.exporter.data.Base,tpl:null,destroy:function(){this.tpl=null,this.callParent()},render:function(){var e=this.processRenderData(this.getRenderData());return this.tpl?Ext.XTemplate.getTpl(this,"tpl").apply(e):""},processRenderData:function(e){return e},getRenderData:function(){var e=this.getConfig();return e.self=this,e}}),Ext.define("Ext.exporter.file.Style",{extend:Ext.exporter.file.Base,config:{name:null,alignment:null,font:null,interior:null,format:null,borders:null,checks:{alignment:{horizontal:["Automatic","Left","Center","Right","Justify"],readingOrder:["LeftToRight","RightToLeft","Context"],vertical:["Automatic","Top","Bottom","Center"]},font:{bold:[!0,!1],italic:[!0,!1],strikeThrough:[!0,!1],underline:["None","Single"]},border:{position:["Left","Top","Right","Bottom"],lineStyle:["None","Continuous","Dash","Dot"]},interior:{pattern:["None","Solid"]}}},datePatterns:{"General Date":"Y-m-d H:i:s","Long Date":"l, F d, Y","Medium Date":"Y-m-d","Short Date":"n/j/Y","Long Time":"g:i:s A","Medium Time":"H:i:s","Short Time":"g:i A"},numberPatterns:{"General Number":"0",Fixed:"0.00",Standard:"0.00"},booleanPatterns:{"Yes/No":["Yes","No"],"True/False":["True","False"],"On/Off":["On","Off"]},isStyle:!0,autoGenerateKey:["alignment","font","interior","format","borders"],constructor:function(e){this.callParent([this.uncapitalizeKeys(e)])},uncapitalizeKeys:function(e){var t,i,n,r,s=e;if(Ext.isObject(e))for(s={},i=(t=Ext.Object.getAllKeys(e)).length,n=0;n<i;n++)r=t[n],s[Ext.String.uncapitalize(r)]=this.uncapitalizeKeys(e[r]);else if(Ext.isArray(e))for(s=[],i=e.length,n=0;n<i;n++)s.push(this.uncapitalizeKeys(e[n]));return s},destroy:function(){this.setAlignment(null),this.setFont(null),this.setInterior(null),this.setBorders(null),this.setChecks(null),this.callParent()},updateAlignment:function(e){this.checkAttribute(e,"alignment")},updateFont:function(e){this.checkAttribute(e,"font")},updateInterior:function(e){this.checkAttribute(e,"interior")},applyBorders:function(e,t){return e&&(e=Ext.Array.from(e),Ext.Array.unique(Ext.Array.pluck(e,"position")).length!==e.length&&Ext.raise("Invalid border positions supplied")),e},updateBorders:function(e){this.checkAttribute(e,"border")},checkAttribute:function(e,t){var i,n,r,s,o,a,l,c,u,d=this.getChecks();if(e&&d&&d[t])for(u=(i=Ext.Array.from(e)).length,s=0;s<u;s++)for(c=i[s],r=(n=Ext.Object.getKeys(c||{})).length,o=0;o<r;o++)l=n[o],(a=d[t][l])&&c[l]&&((Ext.isArray(a)?-1<Ext.Array.indexOf(a,c[l]):a===c[l])||(delete c[l],Ext.raise(Ext.String.format("Invalid key (%0) or value (%1) provided for Style!",l,c[l]))))},getFormattedValue:function(e){var t=this.getFormat(),i=e,n=Ext.util.Format;return!t||"General"===t||Ext.isEmpty(e)?i:"Currency"===t?n.currency(e):"Euro Currency"===t?n.currency(e,""):"Percent"===t?n.number(100*e,"0.00")+"%":"Scientific"===t?Number(e).toExponential():this.datePatterns[t]?n.date(e,this.datePatterns[t]):this.numberPatterns[t]?n.number(e,this.numberPatterns[t]):this.booleanPatterns[t]?e?this.booleanPatterns[t][0]:this.booleanPatterns[t][1]:Ext.isFunction(t)?t(e):n.number(e,t)}}),Ext.define("Ext.exporter.File",{singleton:!0,textPopupWait:"You may close this window after the file is downloaded!",textPopupBlocker:"The file was not saved because pop-up blocker might be enabled! Please check your browser settings.",url:"https://exporter.sencha.com",forceDownload:!1,requiresPopup:function(){var e=Ext.platformTags;return this.forceDownload||Ext.isSafari||e.phone||e.tablet},initializePopup:function(e){var t,i=this.requiresPopup();!i&&e&&(i=!this.saveBlobAs),this.popup=null,i&&(t=window.open("","_blank"))&&(this.popup=t).document.write(Ext.dom.Helper.markup({tag:"html",children:[{tag:"head"},{tag:"body",children:[{tag:"p",html:this.textPopupWait}]}]}))},saveBinaryAs:function(e,t,i,n){var r=this.downloadBinaryAs;return!this.requiresPopup()&&this.saveBlobAs&&(r=this.saveBlobAs),r.call(this,e,t,i,n)},downloadBinaryAs:function(e,t,i,n){var r,s,o=new Ext.Deferred;return this.url?(r=Ext.dom.Helper.markup({tag:"html",children:[{tag:"head"},{tag:"body",children:[{tag:"form",method:"POST",action:this.url,children:[{tag:"input",type:"hidden",name:"content",value:Ext.util.Base64.encode(e)},{tag:"input",type:"hidden",name:"filename",value:t},{tag:"input",type:"hidden",name:"charset",value:i||"UTF-8"},{tag:"input",type:"hidden",name:"mime",value:n||"application/octet-stream"}]},{tag:"script",type:"text/javascript",children:'document.getElementsByTagName("form")[0].submit();'}]}]}),(s=this.popup||window.open("","_blank"))?(s.document.write(r),o.resolve()):o.reject(this.textPopupBlocker),this.popup=null):Ext.raise("Cannot download file since no URL was defined!"),o.promise}},function(a){var r=window.navigator,u=window.saveAs||function(f){"use strict";if(void 0===r||!/MSIE [1-9]\\./.test(r.userAgent)){var e=f.document,g=function(){return f.URL||f.webkitURL||f},p=e.createElementNS("http://www.w3.org/1999/xhtml","a"),m="download"in p,x=/Version\\/[\\d.]+.*Safari/.test(r.userAgent),y=f.webkitRequestFileSystem,v=f.requestFileSystem||y||f.mozRequestFileSystem,s=function(e){(f.setImmediate||f.setTimeout)(function(){throw e},0)},E="application/octet-stream",b=0,C=function(e){setTimeout(function(){"string"==typeof e?g().revokeObjectURL(e):e.remove()},4e4)},S=function(e,t,i){var n,r;for(n=(t=[].concat(t)).length;n--;)if("function"==typeof(r=e["on"+t[n]]))try{r.call(e,i||e)}catch(e){s(e)}},w=function(e){return/^\\s*(?:text\\/\\S*|application\\/xml|\\S*\\/\\S*\\+xml)\\s*;.*charset\\s*=\\s*utf-8/i.test(e.type)?new Blob(["\\ufeff",e],{type:e.type}):e},n=function(n,i,e){e||(n=w(n));function r(){S(c,"writestart progress write writeend".split(" "))}function s(){var t;if(l&&x&&"undefined"!=typeof FileReader)return(t=new FileReader).onloadend=function(){var e=t.result;l.location.href="data:attachment/file"+e.slice(e.search(/[,;]/)),c.readyState=c.DONE,r()},t.readAsDataURL(n),void(c.readyState=c.INIT);!d&&a||(a=g().createObjectURL(n)),l?l.location.href=a:void 0===f.open(a,"_blank")&&x&&(f.location.href=a),c.readyState=c.DONE,r(),C(a)}function o(e){return function(){if(c.readyState!==c.DONE)return e.apply(this,arguments)}}var a,l,t,c=this,u=n.type,d=!1,h={create:!0,exclusive:!1};if(c.readyState=c.INIT,i=i||"download",m)return a=g().createObjectURL(n),void setTimeout(function(){var e,t;p.href=a,p.download=i,e=p,t=new MouseEvent("click"),e.dispatchEvent(t),r(),C(a),c.readyState=c.DONE});f.chrome&&u&&u!==E&&(t=n.slice||n.webkitSlice,n=t.call(n,0,n.size,E),d=!0),y&&"download"!==i&&(i+=".download"),u!==E&&!y||(l=f),v?(b+=n.size,v(f.TEMPORARY,b,o(function(e){e.root.getDirectory("saved",h,o(function(e){function t(){e.getFile(i,h,o(function(i){i.createWriter(o(function(t){t.onwriteend=function(e){l.location.href=i.toURL(),c.readyState=c.DONE,S(c,"writeend",e),C(i)},t.onerror=function(){var e=t.error;e.code!==e.ABORT_ERR&&s()},["writestart","progress","write","abort"].forEach(function(e){t["on"+e]=c["on"+e]}),t.write(n),c.abort=function(){t.abort(),c.readyState=c.DONE},c.readyState=c.WRITING}),s)}),s)}e.getFile(i,{create:!1},o(function(e){e.remove(),t()}),o(function(e){(e.code===e.NOT_FOUND_ERR?t:s)()}))}),s)}),s)):s()},t=n.prototype;return void 0!==r&&r.msSaveOrOpenBlob?function(e,t,i){return i||(e=w(e)),r.msSaveOrOpenBlob(e,t||"download")}:(t.abort=function(){this.readyState=this.DONE,S(this,"abort")},t.readyState=t.INIT=0,t.WRITING=1,t.DONE=2,t.error=t.onwritestart=t.onprogress=t.onwrite=t.onabort=t.onerror=t.onwriteend=null,function(e,t,i){return new n(e,t,i)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);"undefined"!=typeof module&&module.exports?module.exports.saveAs=u:"undefined"!=typeof define&&null!==define&&null!==define.amd&&define([],function(){return u});var s=window.saveTextAs||function(e,t,i){var n,r,s,o;return t=t||"download.txt",i=i||"utf-8",e=(e||"").replace(/\\r?\\n/g,"\\r\\n"),u&&Blob?(n=new Blob([e],{type:"text/plain;charset="+i}),u(n,t),!0):!!((r=window.frames.saveTxtWindow)||((r=document.createElement("iframe")).id="saveTxtWindow",r.style.display="none",document.body.insertBefore(r,null),(r=window.frames.saveTxtWindow)||(r=a.popup||window.open("","_temp","width=100,height=100"))))&&((s=r.document).open("text/html","replace"),s.charset=i,s.write(e),s.close(),o=s.execCommand("SaveAs",null,t),r.close(),o)};a.saveAs=function(e,t,i,n){var r;return this.requiresPopup()?this.downloadBinaryAs(e,t,i||"UTF-8",n||"text/plain"):(r=new Ext.Deferred,s(e,t,i)?r.resolve():r.reject(),r.promise)},u&&Blob&&(a.saveBlobAs=function(e,t,i,n){var r,s,o=new Ext.Deferred,a=new Uint8Array(e.length),l=a.length,c={type:n||"application/octet-stream"};for(s=0;s<l;s++)a[s]=e.charCodeAt(s);return r=new Blob([a],c),u(r,t),o.resolve(),o.promise})}),Ext.define("Ext.exporter.Base",{mixins:[Ext.mixin.Factoryable],alias:"exporter.base",config:{data:null,showSummary:!0,title:null,author:"Sencha",fileName:"export.txt",charset:"UTF-8",mimeType:"text/plain",binary:!1},constructor:function(e){return this.initConfig(e||{}),Ext.exporter.File.initializePopup(this.getBinary()),this.callParent([e])},destroy:function(){this.setData(Ext.destroy(this.getData())),this.callParent()},getContent:Ext.identityFn,saveAs:function(){var e=new Ext.Deferred;return Ext.asap(this.delayedSave,this,[e]),e.promise},delayedSave:function(t){var e=this.getBinary()?"saveBinaryAs":"saveAs";Ext.exporter.File[e](this.getContent(),this.getFileName(),this.getCharset(),this.getMimeType()).then(function(){t.resolve()},function(e){t.reject(e)})},getColumnCount:function(e){var t,i=0;if(!e)return i;for(t=0;t<e.length;t++)e[t].columns?i+=this.getColumnCount(e[t].columns):i+=1;return i},applyData:function(e){return!e||e.isDataTable?e:new Ext.exporter.data.Table(e)}}),Ext.define("Ext.exporter.file.ooxml.Base",{extend:Ext.exporter.file.Base,config:{tplAttributes:{$value:[],merge:function(e,t){return[].concat(e,t)}},tplNonAttributes:{$value:["idPrefix","id","autoGenerateId","self","tplAttributes","tplNonAttributes"],merge:function(e,t){return[].concat(e,t)}}},generateTplAttributes:!1,processRenderData:function(e){var t,i,n=this.getTplAttributes(),r=this.getTplNonAttributes(),s=Ext.Object.getAllKeys(e),o=s.length,a="";if(!this.generateTplAttributes)return e.attributes="",e;for(t=0;t<o;t++)i=s[t],n&&n.length?0<=Ext.Array.indexOf(n,i)&&null!==e[i]&&(a+=(a.length?" ":"")+this.processTplAttribute(i,e[i])):r&&r.length&&Ext.Array.indexOf(r,i)<0&&null!==e[i]&&(a+=(a.length?" ":"")+this.processTplAttribute(i,e[i]));return e.attributes=a,e},processTplAttribute:function(e,t){var i=t;return"boolean"==typeof t?i=Number(t):"string"==typeof t&&(i=Ext.util.Base64._utf8_encode(Ext.util.Format.htmlEncode(t||""))),e+'="'+i+'"'}}),Ext.define("Ext.exporter.file.ooxml.Relationship",{extend:Ext.exporter.file.Base,isRelationship:!0,config:{idPrefix:"rId",schema:"",target:"",parentFolder:null,path:null},tpl:['<Relationship Id="{id}" Type="{schema}" Target="{path}"/>'],updateTarget:function(e){this.calculatePath()},applyParentFolder:function(e){return"/"===(e=e||"")[e.length-1]&&(e=e.slice(0,e.length-1)),e},updateParentFolder:function(e){this.calculatePath()},calculatePath:function(){var e,t=String(this.getParentFolder()||""),i=String(this.getTarget()||""),n=t.split("/"),r=i.split("/"),s=Math.min(n.length,r.length),o=s,a="",l=[];for(e=0;e<s;e++)if(n[e]!==r[e]){o=e;break}if(0===o)a=i;else{for(e=o;e<n.length;e++)l.push("..");a=(l=l.concat(r.slice(o))).join("/")}this.setPath(a)}}),Ext.define("Ext.exporter.file.ooxml.ContentType",{extend:Ext.exporter.file.Base,isContentType:!0,config:{tag:"Override",partName:"",contentType:"",extension:""},tpl:["<{tag}",'<tpl if="extension"> Extension="{extension}"</tpl>','<tpl if="partName"> PartName="{partName}"</tpl>','<tpl if="contentType"> ContentType="{contentType}"</tpl>',"/>"]}),Ext.define("Ext.exporter.file.ooxml.Xml",{extend:Ext.exporter.file.ooxml.Base,config:{folder:null,fileName:null,path:null,relationship:null,contentType:null},cachedConfig:{fileNameTemplate:"{fileName}.xml"},tplNonAttributes:["path","relationship","contentType","fileName","folder","fileNameTemplate"],destroy:function(){this.setRelationship(null),this.setContentType(null),this.callParent()},applyFolder:function(e){return"/"!==(e=e||"")[e.length-1]&&(e+="/"),e},updateFolder:function(){this.generatePath()},updateFileName:function(){this.generatePath()},getFileNameFromTemplate:function(){var e=Ext.XTemplate.getTpl(this,"_fileNameTemplate");return e?e.apply(this.getConfig()):""},generatePath:function(){this.setPath((this.getFolder()||"")+this.getFileNameFromTemplate())},updatePath:function(e){var t=this.getRelationship(),i=this.getContentType();t&&t.setTarget(e),i&&i.setPartName(e)},applyRelationship:function(e){return!e||e.isRelationship?e:new Ext.exporter.file.ooxml.Relationship(e)},updateRelationship:function(e,t){Ext.destroy(t)},applyContentType:function(e){return!e||e.isContentType?e:new Ext.exporter.file.ooxml.ContentType(e)},updateContentType:function(e,t){Ext.destroy(t)},collectFiles:Ext.emptyFn}),Ext.define("Ext.exporter.file.ooxml.Relationships",{extend:Ext.exporter.file.ooxml.Xml,isRelationships:!0,currentIndex:1,config:{parentFolder:null,items:[]},contentType:{contentType:"application/vnd.openxmlformats-package.relationships+xml"},fileNameTemplate:"{fileName}.rels",tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<Relationships xmlns="http://schemas.openxmlformats.org/package/2006/relationships">','<tpl if="items"><tpl for="items.getRange()">{[values.render()]}</tpl></tpl>',"</Relationships>"],collectFiles:function(e){var t,i=this.getItems(),n=i.length,r=this.getParentFolder();if(n){for(t=0;t<n;t++)i.getAt(t).setParentFolder(r);e[this.getPath()]=this.render()}},applyFolder:function(e,t){return(e=this.callParent([e,t]))+"_rels/"},applyItems:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.Relationship")},updateItems:function(e,t){t&&t.un({add:this.updateIds,remove:this.updateIds,scope:this}),e&&e.on({add:this.updateIds,remove:this.updateIds,scope:this})},updateIds:function(e){var t,i;if(e)for(i=e.length,t=0;t<i;t++)e.getAt(t).setId("rId"+(t+1))},addRelationship:function(e){return this.getItems().add(e||{})},removeRelationship:function(e){return this.getItems().remove(e)}}),Ext.define("Ext.exporter.file.ooxml.XmlRels",{extend:Ext.exporter.file.ooxml.Xml,config:{index:null,name:null,relationships:{contentType:{contentType:"application/vnd.openxmlformats-package.relationships+xml"}}},cachedConfig:{nameTemplate:"{name}"},tplNonAttributes:["index","relationships","nameTemplate"],contentType:{},relationship:{},fileNameTemplate:"{fileName}{index}.xml",destroy:function(){this.setRelationships(null),this.callParent()},updateFolder:function(e,t){var i=this.getRelationships();i&&i.setFolder(e),this.callParent([e,t])},applyRelationships:function(e){return!e||e.isRelationships?e:new Ext.exporter.file.ooxml.Relationships(e)},updateRelationships:function(e,t){Ext.destroy(t)},updateIndex:function(){this.generatePath()},generateName:function(){var e=Ext.XTemplate.getTpl(this,"_nameTemplate");this.setName(e?e.apply(this.getConfig()):"")},collectFiles:function(e){this.collectRelationshipsFiles(e),e[this.getPath()]=this.render()},collectRelationshipsFiles:function(e){var t=this.getRelationships(),i=this.getFileName();t&&(t.setFileName(i?this.getFileNameFromTemplate():""),t.setParentFolder(this.getFolder()),t.collectFiles(e))},collectContentTypes:function(e){e.push(this.getContentType())}}),Ext.define("Ext.exporter.file.zip.File",{extend:Ext.Base,config:{path:"",data:null,dateTime:null,folder:!1},constructor:function(e){return this.initConfig(e),this.getDateTime()||this.setDateTime(new Date),this.callParent([e])},getId:function(){return this.getPath()},crc32:function(e,t){var i,n,r,s=this.self.crcTable;if(void 0===e||!e.length)return 0;for(i="string"!=typeof e,void 0===t&&(t=0),t^=-1,n=0,r=e.length;n<r;n++)t=t>>>8^s[255&(t^(i?e[n]:e.charCodeAt(n)))];return-1^t},getHeader:function(e){var t,i,n=this.getData(),r=this.getPath(),s=Ext.util.Base64._utf8_encode(r),o=s!==r,a=this.getDateTime(),l="",c="",u=Ext.util.Format.decToHex,d="";return t=a.getHours(),t<<=6,t|=a.getMinutes(),t<<=5,t|=a.getSeconds()/2,i=a.getFullYear()-1980,i<<=4,i|=a.getMonth()+1,i<<=5,i|=a.getDate(),o&&(c=u(1,1)+u(this.crc32(s),4)+s,l+="up"+u(c.length,2)+c),d+="\\n\\0",d+=o?"\\0\\b":"\\0\\0",d+="\\0\\0",d+=u(t,2),d+=u(i,2),d+=u(n?this.crc32(n):0,4),d+=u(n?n.length:0,4),d+=u(n?n.length:0,4),d+=u(s.length,2),{fileHeader:"PK"+(d+=u(l.length,2))+s+l,dirHeader:"PK\\0"+d+"\\0\\0\\0\\0\\0\\0"+(!0===this.getFolder()?"\\0\\0\\0":"\\0\\0\\0\\0")+u(e,4)+s+l,data:n||""}}},function(e){var t,i,n,r=[];for(i=0;i<256;i++){for(t=i,n=0;n<8;n++)t=1&t?3988292384^t>>>1:t>>>1;r[i]=t}e.crcTable=r}),Ext.define("Ext.exporter.file.zip.Folder",{extend:Ext.exporter.file.zip.File,folder:!0}),Ext.define("Ext.exporter.file.zip.Archive",{extend:Ext.exporter.file.Base,config:{folders:[],files:[]},destroy:function(){this.setFolders(null),this.setFiles(null),this.callParent()},applyFolders:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.zip.Folder")},applyFiles:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.zip.File")},updateFiles:function(e,t){t&&t.un({add:this.onFileAdd,remove:this.onFileRemove,scope:this}),e&&(e.on({add:this.onFileAdd,remove:this.onFileRemove,scope:this}),this.onFileAdd(e,{items:e.getRange()}))},onFileAdd:function(e,t){var i,n,r,s=this.getFolders(),o=t.items,a=o.length;for(i=0;i<a;i++)n=o[i],(r=this.getParentFolder(n.getPath()))&&s.add({path:r})},onFileRemove:function(e,t){Ext.destroy(t.items)},getParentFolder:function(e){var t;return"/"===e.slice(-1)&&(e=e.substring(0,e.length-1)),0<(t=e.lastIndexOf("/"))?e.substring(0,t+1):""},addFile:function(e){return this.getFiles().add(e||{})},removeFile:function(e){return this.getFiles().remove(e)},getContent:function(){var e,t,i,n="",r="",s=0,o=0,a=Ext.util.Format.decToHex,l=[];for(Ext.Array.insert(l,0,this._folders.items),Ext.Array.insert(l,l.length,this._files.items),e=l.length,t=0;t<e;t++)s+=(i=l[t].getHeader(s)).fileHeader.length+i.data.length,o+=i.dirHeader.length,n+=i.fileHeader+i.data,r+=i.dirHeader;return n+=r+("PK\\0\\0\\0\\0"+a(e,2)+a(e,2)+a(o,4)+a(s,4)+"\\0\\0")}}),Ext.define("Ext.exporter.file.ooxml.excel.Sheet",{extend:Ext.exporter.file.ooxml.XmlRels,config:{workbook:null},folder:"sheet",fileName:"sheet",nameTemplate:"Sheet{index}",fileNameTemplate:"{fileName}{index}.xml",nameLengthLimit:31,nameRegex:/[\\/*?:\\[\\]]/gi,destroy:function(){this.callParent(),this.setWorkbook(null)},updateIndex:function(){null==this._name&&this.generateName(),this.callParent(arguments)},applyName:function(e){var t=this.nameLengthLimit,i=Ext.String.trim(String(e||"").replace(this.nameRegex,""));return i=i.length>t+3?Ext.String.ellipsis(i,t):i.substr(0,t),Ext.util.Format.htmlEncode(i)},updateName:function(t){var i=this,e=i.getWorkbook(),n=!1;i.isNaming||i.isConfiguring||(e&&(n=!!e.getSheets().findBy(function(e){return e!==i&&e.getName()===t})),(n=n||Ext.isEmpty(t))&&(i.isNaming=!0,i.generateName(),i.isNaming=!1))}}),Ext.define("Ext.exporter.file.ooxml.excel.Column",{extend:Ext.exporter.file.ooxml.Base,config:{min:1,max:1,width:10,autoFitWidth:!1,hidden:!1,styleId:null},tpl:["<col ",'min="{min}" ','max="{max}" ','width="{width}"','<tpl if="styleId"> style="{styleId}"</tpl>','<tpl if="hidden"> hidden="1"</tpl>','<tpl if="autoFitWidth"> bestFit="1"</tpl>','<tpl if="width != 10"> customWidth="1"</tpl>',"/>"]}),Ext.define("Ext.exporter.file.ooxml.excel.Cell",{extend:Ext.exporter.file.Base,isCell:!0,config:{row:null,dataType:null,showPhonetic:null,index:null,styleId:null,mergeAcross:null,mergeDown:null,value:null,serializeDateToNumber:!0},isMergedCell:!1,tpl:['<c r="{ref}"','<tpl if="value != null"> t="{dataType}"</tpl>','<tpl if="showPhonetic"> ph="1"</tpl>','<tpl if="styleId"> s="{styleId}"</tpl>','<tpl if="value == null">/><tpl else>><v>{value}</v></c></tpl>'],constructor:function(e){var t=e;return(null==e||Ext.isDate(e)||Ext.isPrimitive(e))&&(t={value:e}),this.callParent([t])},destroy:function(){this.setRow(null),this.callParent()},getRef:function(){return this.getNotation(this._index)+this._row._index},getRenderData:function(){var e={},t=this._row&&this._row._worksheet,i=t&&t._workbook;return e.dataType=this._dataType,e.value=this._value,e.showPhonetic=this._showPhonetic,e.styleId=this._styleId,this.isMergedCell&&t&&t.setMergedCellsNo(t._mergedCellsNo+1),"s"===e.dataType&&i&&(e.value=i._sharedStrings.addString(e.value)),e.ref=this.getRef(),e},applyValue:function(e){var t;return null!=e&&("number"==typeof e?t="n":"string"==typeof e?(t="s",e=Ext.util.Format.stripTags(e)):e instanceof Date?e=this.getSerializeDateToNumber()?(t="n",this.dateValue(e)):(t="d",Ext.Date.format(e,"Y-m-d\\\\TH:i:s.u")):t="b",this.setDataType(t)),e},updateMergeAcross:function(e){this.isMergedCell=e||this._mergeDown},updateMergeDown:function(e){this.isMergedCell=e||this._mergeAcross},getMergedCellRef:function(){var e=this._index,t=this._row._index,i=this._mergeAcross,n=this._mergeDown,r=this.getNotation(e)+t+":";return i&&(e+=i),n&&(t+=n),r+=this.getNotation(e)+t},getNotation:function(e){var t,i,n=String.fromCharCode;return e<=0&&(e=1),t=e%26,0===(i=Math.floor(e/26))||26===e?n(65+e-1):0==t?this.getNotation(i-1)+"Z":i<26?n(65+i-1)+n(65+t-1):this.getNotation(i)+n(65+t-1)},dateValue:function(e){return 25569+(e.getTime()-60*e.getTimezoneOffset()*1e3)/864e5}}),Ext.define("Ext.exporter.file.ooxml.excel.Row",{extend:Ext.exporter.file.Base,config:{collapsed:null,hidden:null,height:null,outlineLevel:null,showPhonetic:null,index:null,styleId:null,worksheet:null,cells:[],cachedCells:null},tpl:["<row",'<tpl if="index"> r="{index}"</tpl>','<tpl if="collapsed"> collapsed="{collapsed}"</tpl>','<tpl if="hidden"> hidden="1"</tpl>','<tpl if="height"> ht="{height}" customHeight="1"</tpl>','<tpl if="outlineLevel"> outlineLevel="{outlineLevel}"</tpl>','<tpl if="styleId"> s="{styleId}" customFormat="1"</tpl>','<tpl if="cachedCells">',">{cachedCells}</row>",'<tpl elseif="cells && cells.length">','><tpl for="cells.items">{[values.render()]}</tpl></row>',"<tpl else>","/>","</tpl>"],lastCellIndex:1,constructor:function(e){var t=e;return Ext.isArray(e)&&(t={cells:e}),this.callParent([t])},destroy:function(){this.setWorksheet(null),this.callParent()},applyCells:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Cell")},updateCells:function(e,t){t&&e.un({add:this.onCellAdd,remove:this.onCellRemove,scope:this}),e&&(e.on({add:this.onCellAdd,remove:this.onCellRemove,scope:this}),this.onCellAdd(e,{items:e.getRange()}))},onCellAdd:function(e,t){var i,n,r,s=t.items,o=s.length;for(i=0;i<o;i++)(n=s[i]).setRow(this),(r=n._index)?this.lastCellIndex=Math.max(e.length,r)+1:n.setIndex(this.lastCellIndex++)},onCellRemove:function(e,t){Ext.destroy(t.items),this.updateCellIndexes()},addCell:function(e){return this._cells||this.setCells([]),this._cells.add(e||{})},getCell:function(e){return this._cells?this._cells.get(e):null},beginCellRendering:function(){this.tempCells=[],this.startCaching=!0,this.lastCellIndex=1,this.cachedCell||(this.cachedCell=new Ext.exporter.file.ooxml.excel.Cell({row:this}),this.cachedCellConfig=this.cachedCell.getConfig(),this.cachedCellConfig.id=null)},endCellRendering:function(){this.setCachedCells(this.tempCells.join("")),this.tempCells=null,this.startCaching=!1,this.lastCellIndex=1},renderCells:function(e){var t,i,n,r,s,o={first:null,last:null,row:"",merged:""},a=e.length,l=[];for(this.beginCellRendering(),r=this.cachedCell,t=0;t<a;t++)n="object"!=typeof(i=e[t]||{})||i instanceof Date?{value:i}:i,Ext.applyIf(n,this.cachedCellConfig),r.setValue(n.value),r.setShowPhonetic(n.showPhonetic),r.setStyleId(n.styleId),r.setMergeAcross(n.mergeAcross),r.setMergeDown(n.mergeDown),r.setIndex(n.index),(s=r.getIndex())?this.lastCellIndex=Math.max(this.lastCellIndex,s)+1:r.setIndex(this.lastCellIndex++),0===t?o.first=o.last=r.getRef():t===a-1&&(o.last=r.getRef()),this.tempCells.push(r.render()),r.isMergedCell&&l.push('<mergeCell ref="'+r.getMergedCellRef()+'"/>');return this.endCellRendering(),o.row=this.render(),o.merged=l.join(""),o}}),Ext.define("Ext.exporter.file.ooxml.excel.Location",{extend:Ext.exporter.file.ooxml.Base,config:{ref:null,firstHeaderRow:null,firstDataRow:null,firstDataCol:null,rowPageCount:null,colPageCount:null},generateTplAttributes:!0,tpl:["<location {attributes}/>"]}),Ext.define("Ext.exporter.file.ooxml.excel.FieldItem",{extend:Ext.exporter.file.ooxml.Base,config:{c:null,d:null,e:null,f:null,h:null,m:null,n:null,s:null,sd:null,t:null,x:null},generateTplAttributes:!0,tpl:["<item {attributes}/>"]}),Ext.define("Ext.exporter.file.ooxml.excel.PivotAreaReference",{extend:Ext.exporter.file.ooxml.Base,config:{avgSubtotal:null,byPosition:null,count:null,countASubtotal:null,countSubtotal:null,defaultSubtotal:null,field:null,maxSubtotal:null,minSubtotal:null,productSubtotal:null,relative:null,selected:null,stdDevPSubtotal:null,stdDevSubtotal:null,sumSubtotal:null,varPSubtotal:null,varSubtotal:null,items:[]},tplNonAttributes:["items"],generateTplAttributes:!0,tpl:["<reference {attributes}>",'<tpl if="items"><tpl for="items"><x v="{.}"/></tpl></tpl>',"</reference>"],getCount:function(){return this.getItems().length},applyItems:function(e){return null!==e?Ext.Array.from(e):null}}),Ext.define("Ext.exporter.file.ooxml.excel.PivotArea",{extend:Ext.exporter.file.ooxml.Base,config:{axis:null,cacheIndex:null,collapsedLevelsAreSubtotals:null,dataOnly:null,field:null,fieldPosition:null,grandCol:null,grandRow:null,labelOnly:null,offset:null,outline:null,type:null,references:null},tplNonAttributes:["references"],generateTplAttributes:!0,tpl:["<pivotArea {attributes}>",'<tpl if="references">','    <references count="{references.length}">','        <tpl for="references.getRange()">{[values.render()]}</tpl>',"    </references>","</tpl>","</pivotArea>"],applyReferences:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.PivotAreaReference")}}),Ext.define("Ext.exporter.file.ooxml.excel.AutoSortScope",{extend:Ext.exporter.file.ooxml.Base,config:{pivotArea:{}},tpl:["<autoSortScope>{[values.pivotArea.render()]}</autoSortScope>"],destroy:function(){this.setPivotArea(null),this.callParent()},applyPivotArea:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.PivotArea(e)},updatePivotArea:function(e,t){Ext.destroy(t)}}),Ext.define("Ext.exporter.file.ooxml.excel.PivotField",{extend:Ext.exporter.file.ooxml.Base,config:{allDrilled:null,autoShow:null,avgSubtotal:null,axis:null,compact:null,countASubtotal:null,countSubtotal:null,dataField:null,dataSourceSort:null,defaultAttributeDrillState:null,defaultSubtotal:null,dragOff:null,dragToCol:null,dragToData:null,dragToPage:null,dragToRow:null,hiddenLevel:null,hideNewItems:null,includeNewItemsInFilter:null,insertBlankRow:null,insertPageBreak:null,itemPageCount:null,maxSubtotal:null,measureFilter:null,minSubtotal:null,multipleItemSelectionAllowed:null,nonAutoSortDefault:null,numFmtId:null,outline:null,productSubtotal:null,rankBy:null,serverField:null,showAll:null,showDropDowns:null,showPropAsCaption:null,showPropCell:null,showPropTip:null,sortType:null,stdDevPSubtotal:null,stdDevSubtotal:null,subtotalCaption:null,subtotalTop:null,sumSubtotal:null,topAutoShow:null,uniqueMemberProperty:null,varPSubtotal:null,varSubtotal:null,items:null,autoSortScope:null},tplNonAttributes:["items","autoSortScope"],generateTplAttributes:!0,tpl:['<tpl if="items || autoSortScope">',"<pivotField {attributes}>",'<tpl if="items"><items count="{items.length}"><tpl for="items.getRange()">{[values.render()]}</tpl></items></tpl>','<tpl if="autoSortScope">{[values.autoSortScope.render()]}</tpl>',"</pivotField>","<tpl else>","<pivotField {attributes} />","</tpl>"],destroy:function(){this.setAutoSortScope(null),this.callParent()},applyItems:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.FieldItem")},applyAutoSortScope:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.AutoSortScope(e)},updateAutoSortScope:function(e,t){Ext.destroy(t)}}),Ext.define("Ext.exporter.file.ooxml.excel.Field",{extend:Ext.exporter.file.ooxml.Base,config:{x:null},tpl:['<field x="{x}"/>']}),Ext.define("Ext.exporter.file.ooxml.excel.Item",{extend:Ext.exporter.file.ooxml.Base,config:{i:null,r:null,t:null,x:null},tpl:['<tpl if="x"><i{attr}>{x}</i><tpl else><i{attr}/></tpl>'],getRenderData:function(){var e,t=this.callParent(),i=t.x?t.x.length:0,n="",r="";for(e=0;e<i;e++)0<t.x[e]?n+='<x v="'+t.x[e]+'"/>':n+="<x/>";return t.x=n,t.t&&(r+=' t="'+t.t+'"'),0<t.r&&(r+=' r="'+t.r+'"'),0<t.i&&(r+=' i="'+t.i+'"'),t.attr=r,t},applyX:function(e){return null!=e?Ext.Array.from(e):null}}),Ext.define("Ext.exporter.file.ooxml.excel.DataField",{extend:Ext.exporter.file.ooxml.Base,config:{baseField:null,baseItem:null,fld:null,name:null,numFmtId:null,showDataAs:null,subtotal:null},generateTplAttributes:!0,tpl:["<dataField {attributes}/>"]}),Ext.define("Ext.exporter.file.ooxml.excel.Record",{extend:Ext.exporter.file.ooxml.Base,config:{items:null},tplNonAttributes:["items","stritems"],tpl:['<tpl if="stritems">',"<r>","{stritems}","</r>","<tpl else>","<r/>","</tpl>"],numberTpl:'<n v="{0}"/>',booleanTpl:'<b v="{0}"/>',stringTpl:'<s v="{0}"/>',dateTpl:'<d v="{0}"/>',constructor:function(e){var t;return t=Ext.isArray(e)||Ext.isDate(e)||Ext.isPrimitive(e)?{items:e}:e,this.callParent([t])},getRenderData:function(){var e,t,i,n,r=this.callParent(),s=r.items,o="",a=[];if(s)for(t=s.length,e=0;e<t;e++)null==(i=s[e])||""===i||("string"==typeof i?(n=this.stringTpl,i=Ext.util.Base64._utf8_encode(Ext.util.Format.htmlEncode(i)),a.push("s")):"boolean"==typeof i?(n=this.booleanTpl,a.push("b")):"number"==typeof i?(n=this.numberTpl,a.push("n")):i instanceof Date&&(n=this.dateTpl,i=Ext.Date.format(i,"Y-m-d\\\\TH:i:s.u"),a.push("d")),o+=Ext.String.format(n,i));return r.stritems=o,r},applyItems:function(e){return null!==e?Ext.Array.from(e):null}}),Ext.define("Ext.exporter.file.ooxml.excel.PivotCacheRecords",{extend:Ext.exporter.file.ooxml.XmlRels,config:{items:[]},folder:"/xl/pivotCache/",fileName:"pivotCacheRecords",contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheRecords+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotCacheRecords"},tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<pivotCacheRecords xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" ','xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" count="{items.length}">','<tpl for="items.getRange()">{[values.render()]}</tpl>',"</pivotCacheRecords>"],applyItems:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Record")}}),Ext.define("Ext.exporter.file.ooxml.excel.WorksheetSource",{extend:Ext.exporter.file.ooxml.Base,config:{id:null,name:null,ref:null,sheet:null},autoGenerateId:!1,tplAttributes:["id","name","ref","sheet"],generateTplAttributes:!0,tpl:["<worksheetSource {attributes} />"]}),Ext.define("Ext.exporter.file.ooxml.excel.CacheSource",{extend:Ext.exporter.file.ooxml.Base,config:{type:"worksheet",worksheetSource:{}},tplNonAttributes:["worksheetSource"],generateTplAttributes:!0,tpl:["<cacheSource {attributes}>","<tpl if=\\"type == 'worksheet'\\">","{[values.worksheetSource.render()]}","</tpl>","</cacheSource>"],destroy:function(){this.setWorksheetSource(null),this.callParent()},applyWorksheetSource:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.WorksheetSource(e)},updateWorksheetSource:function(e,t){Ext.destroy(t)}}),Ext.define("Ext.exporter.file.ooxml.excel.SharedItems",{extend:Ext.exporter.file.ooxml.Base,config:{containsBlank:null,containsDate:null,containsInteger:null,containsMixedTypes:null,containsNonDate:null,containsNumber:null,containsSemiMixedTypes:null,containsString:null,longText:null,maxDate:null,maxValue:null,minDate:null,minValue:null,items:null},tplNonAttributes:["items","stritems"],generateTplAttributes:!0,tpl:['<tpl if="stritems">',"<sharedItems {attributes}>","{stritems}","</sharedItems>","<tpl else>","<sharedItems {attributes}/>","</tpl>"],numberTpl:'<n v="{0}"/>',booleanTpl:'<b v="{0}"/>',stringTpl:'<s v="{0}"/>',dateTpl:'<d v="{0}"/>',getRenderData:function(){var e,t,i,n,r=this.callParent(),s=r.items,o="",a=!1,l=!1,c=!1,u=!1,d=0,h=[],f=null,g=null;if(s)for(t=s.length,e=0;e<t;e++)null==(i=s[e])||""===i?0:(d++,"string"==typeof i?(c=!0,n=this.stringTpl,i=Ext.util.Base64._utf8_encode(Ext.util.Format.htmlEncode(i)),h.push("s")):"boolean"==typeof i?(n=this.booleanTpl,h.push("b")):"number"==typeof i?(a=!0,n=this.numberTpl,f=Math.min(f,i),g=Math.max(g,i),0<=String(i).indexOf(".")&&(u=!0),h.push("n")):i instanceof Date&&(l=!0,n=this.dateTpl,i=Ext.Date.format(i,"Y-m-d\\\\TH:i:s.u"),h.push("d")),o+=Ext.String.format(n,i));return 0<d&&(r.count=d),r.stritems=o,l&&(r.containsSemiMixedTypes=c,r.containsDate=!0,r.stritems=""),a&&(r.containsSemiMixedTypes=c,r.containsNumber=!0,r.minValue=f,r.maxValue=g,u||(r.containsInteger=!0)),r.containsString=c,0<(t=Ext.Array.unique(h))&&(r.containsMixedTypes=1<t),r},applyItems:function(e){return null!==e?Ext.Array.from(e):null},updateMinValue:function(e){null!=e&&this.setContainsNumber(!0)},updateMaxValue:function(e){null!=e&&this.setContainsNumber(!0)},applyMinDate:function(e){return e=e&&Ext.Date.format(e,"Y-m-d\\\\TH:i:s.u")},updateMinDate:function(e){null!=e&&this.setContainsDate(!0)},applyMaxDate:function(e){return e=e&&Ext.Date.format(e,"Y-m-d\\\\TH:i:s.u")},updateMaxDate:function(e){null!=e&&this.setContainsDate(!0)}}),Ext.define("Ext.exporter.file.ooxml.excel.CacheField",{extend:Ext.exporter.file.ooxml.Base,config:{caption:null,databaseField:null,formula:null,hierarchy:null,level:null,mappingCount:null,memberPropertyField:null,name:null,numFmtId:null,propertyName:null,serverField:null,sqlType:null,uniqueList:null,sharedItems:{},fieldGroup:null,mpMap:null},tplNonAttributes:["sharedItems","fieldGroup","mpMap"],generateTplAttributes:!0,tpl:["<cacheField {attributes}>",'<tpl if="sharedItems">{[values.sharedItems.render()]}</tpl>',"</cacheField>"],destroy:function(){this.setSharedItems(null),this.callParent()},applySharedItems:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.SharedItems(e)},updateSharedItems:function(e,t){Ext.destroy(t)}}),Ext.define("Ext.exporter.file.ooxml.excel.PivotCache",{extend:Ext.exporter.file.ooxml.Base,config:{id:null,cacheId:null},autoGenerateId:!1,tpl:['<pivotCache cacheId="{cacheId}" r:id="{id}"/>']}),Ext.define("Ext.exporter.file.ooxml.excel.PivotCacheDefinition",{extend:Ext.exporter.file.ooxml.XmlRels,config:{backgroundQuery:null,createdVersion:null,enableRefresh:null,invalid:null,minRefreshableVersion:null,missingItemsLimit:null,optimizeMemory:null,recordCount:null,refreshedBy:null,refreshedDateIso:null,refreshedVersion:null,refreshOnLoad:null,saveData:null,supportAdvancedDrill:null,supportSubquery:null,tupleCache:null,upgradeOnRefresh:null,cacheRecords:{},cacheSource:{},cacheFields:null,pivotCache:{}},folder:"/xl/pivotCache/",fileName:"pivotCacheDefinition",contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotCacheDefinition+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotCacheDefinition"},tplNonAttributes:["cacheRecords","cacheSource","cacheFields","pivotCache"],generateTplAttributes:!0,tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<pivotCacheDefinition xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" ','xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships" r:id="{[values.relationship.getId()]}" {attributes}>',"{[values.cacheSource.render()]}",'<tpl if="cacheFields"><cacheFields count="{cacheFields.length}"><tpl for="cacheFields.getRange()">{[values.render()]}</tpl></cacheFields></tpl>',"</pivotCacheDefinition>"],destroy:function(){this.setCacheRecords(null),this.setCacheSource(null),this.setPivotCache(null),this.callParent()},getRenderData:function(){var e=this.callParent(),t=this.getCacheRecords();return t&&(t=t.getItems(),e.recordCount=t.length),e},collectFiles:function(e){var t=this.getCacheRecords();t&&t.collectFiles(e),this.callParent([e])},collectContentTypes:function(e){var t=this.getCacheRecords();t&&t.collectContentTypes(e),this.callParent([e])},updateIndex:function(e,t){var i=this.getCacheRecords();i&&i.setIndex(e),this.callParent([e,t])},applyPivotCache:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.PivotCache(e)},updatePivotCache:function(e,t){Ext.destroy(t)},applyCacheRecords:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.PivotCacheRecords(e)},updateCacheRecords:function(e,t){var i,n=this.getRelationships();t&&n.removeRelationship(t.getRelationship()),Ext.destroy(t),e&&(i=e.getRelationship(),n.addRelationship(i),this.setId(i.getId()))},applyCacheSource:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.CacheSource(e)},updateCacheSource:function(e,t){Ext.destroy(t)},applyCacheFields:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.CacheField")}}),Ext.define("Ext.exporter.file.ooxml.excel.PivotTableStyleInfo",{extend:Ext.exporter.file.ooxml.Base,config:{name:"PivotStyleLight2",showColHeaders:!0,showColStripes:null,showLastColumn:!0,showRowHeaders:!0,showRowStripes:null},generateTplAttributes:!0,tpl:["<pivotTableStyleInfo {attributes}/>"]}),Ext.define("Ext.exporter.file.ooxml.excel.PivotTable",{extend:Ext.exporter.file.ooxml.XmlRels,config:{applyAlignmentFormats:!1,applyBorderFormats:!1,applyFontFormats:!1,applyNumberFormats:!1,applyPatternFormats:!1,applyWidthHeightFormats:!0,asteriskTotals:null,autoFormatId:4096,cacheId:null,chartFormat:null,colGrandTotals:null,colHeaderCaption:null,compact:!1,compactData:!1,createdVersion:null,customListSort:null,dataCaption:"Values",dataOnRows:null,dataPosition:null,disableFieldList:null,editData:null,enableDrill:null,enableFieldProperties:null,enableWizard:null,errorCaption:null,fieldListSortAscending:null,fieldPrintTitles:null,grandTotalCaption:null,gridDropZones:null,immersive:null,indent:null,itemPrintTitles:!0,mdxSubqueries:null,mergeItem:null,minRefreshableVersion:null,missingCaption:null,multipleFieldFilters:!1,name:null,outline:!0,outlineData:null,pageOverThenDown:null,pageStyle:null,pageWrap:null,pivotTableStyle:null,preserveFormatting:null,printDrill:null,published:null,rowGrandTotals:null,rowHeaderCaption:null,showCalcMbrs:null,showDataDropDown:null,showDataTips:null,showDrill:null,showDropZones:null,showEmptyCol:null,showEmptyRow:null,showError:null,showHeaders:null,showItems:null,showMemberPropertyTips:null,showMissing:null,showMultipleLabel:null,subtotalHiddenItems:null,tag:null,updatedVersion:null,useAutoFormatting:!0,vacatedStyle:null,visualTotals:null,location:{},pivotFields:null,rowFields:null,rowItems:null,colFields:null,colItems:null,pageFields:null,dataFields:null,pivotTableStyleInfo:{},worksheet:null,cacheDefinition:{},viewLayoutType:"outline"},folder:"/xl/pivotTables/",fileName:"pivotTable",nameTemplate:"PivotTable{index}",contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.pivotTable+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/pivotTable"},tplNonAttributes:["location","worksheet","cacheDefinition","pivotFields","rowFields","rowItems","colFields","colItems","pageFields","dataFields","pivotTableStyleInfo","viewLayoutType"],generateTplAttributes:!0,tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<pivotTableDefinition xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" {attributes}>',"{[values.location.render()]}",'<tpl if="pivotFields && pivotFields.length"><pivotFields count="{pivotFields.length}"><tpl for="pivotFields.getRange()">{[values.render()]}</tpl></pivotFields></tpl>','<tpl if="rowFields && rowFields.length"><rowFields count="{rowFields.length}"><tpl for="rowFields.getRange()">{[values.render()]}</tpl></rowFields></tpl>','<tpl if="rowItems && rowItems.length"><rowItems count="{rowItems.length}"><tpl for="rowItems.getRange()">{[values.render()]}</tpl></rowItems></tpl>','<tpl if="colFields && colFields.length"><colFields count="{colFields.length}"><tpl for="colFields.getRange()">{[values.render()]}</tpl></colFields></tpl>','<tpl if="colItems && colItems.length"><colItems count="{colItems.length}"><tpl for="colItems.getRange()">{[values.render()]}</tpl></colItems></tpl>','<tpl if="pageFields && pageFields.length"><pageFields count="{pageFields.length}"><tpl for="pageFields.getRange()">{[values.render()]}</tpl></pageFields></tpl>','<tpl if="dataFields && dataFields.length"><dataFields count="{dataFields.length}"><tpl for="dataFields.getRange()">{[values.render()]}</tpl></dataFields></tpl>','<tpl if="pivotTableStyleInfo">{[values.pivotTableStyleInfo.render()]}</tpl>',"</pivotTableDefinition>"],destroy:function(){this.setWorksheet(null),this.setLocation(null),this.setCacheDefinition(null),this.setPivotTableStyleInfo(null),this.callParent()},collectFiles:function(e){this.getCacheDefinition().collectFiles(e),this.callParent([e])},collectContentTypes:function(e){this.getCacheDefinition().collectContentTypes(e),this.callParent([e])},updateIndex:function(e,t){var i=this.getCacheDefinition();i&&i.setIndex(e),null==this._name&&this.generateName(),this.callParent([e,t])},updateWorksheet:function(e,t){var i,n,r=this.getCacheDefinition();t&&r&&t.getWorkbook()&&t.getWorkbook().getRelationships()&&t.getWorkbook().getRelationships().removeRelationship(r.getRelationship()),e&&r&&((i=e.getWorkbook()).getRelationships().addRelationship(r.getRelationship()),n=r.getPivotCache(),i.addPivotCache(n),this.setCacheId(n.getCacheId()),n.setId(r.getRelationship().getId()))},applyPivotTableStyleInfo:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.PivotTableStyleInfo(e)},updatePivotTableStyleInfo:function(e,t){Ext.destroy(t)},applyCacheDefinition:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.PivotCacheDefinition(e)},updateCacheDefinition:function(e,t){var i=this.getRelationships();t&&i.removeRelationship(t.getRelationship()),Ext.destroy(t),e&&i.addRelationship(e.getRelationship())},updateViewLayoutType:function(e){var t=this;"compact"===e?(t.setOutline(!0),t.setOutlineData(!0),t.setCompact(null),t.setCompactData(null)):("outline"===e?(t.setOutline(!0),t.setOutlineData(!0)):(t.setOutline(null),t.setOutlineData(null)),t.setCompact(!1),t.setCompactData(!1)),t.processPivotFields(t.getPivotFields().getRange())},applyLocation:function(e){return!e||e.isInstance?e:new Ext.exporter.file.ooxml.excel.Location(e)},updateLocation:function(e,t){Ext.destroy(t)},applyPivotFields:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.PivotField")},updatePivotFields:function(e,t){t&&t.un({add:this.onPivotFieldAdd,scope:this}),e&&(e.on({add:this.onPivotFieldAdd,scope:this}),this.processPivotFields(e.getRange()))},onPivotFieldAdd:function(e,t){this.processPivotFields(t.items)},processPivotFields:function(e){var t,i,n,r,s=this.getViewLayoutType(),o=e.length;for(r="compact"===s?n=null:"outline"===s?(n=!1,null):n=!1,t=0;t<o;t++)(i=e[t]).setCompact(n),i.setOutline(r)},applyRowFields:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Field")},applyRowItems:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Item")},applyColFields:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Field")},applyColItems:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Item")},applyDataFields:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.DataField")},applyAutoFormatId:function(e){return 4096<=e&&e<=4117?e:null}}),Ext.define("Ext.exporter.file.ooxml.excel.Worksheet",{extend:Ext.exporter.file.ooxml.excel.Sheet,isWorksheet:!0,config:{columns:null,rows:[],drawings:null,tables:null,mergeCells:null,mergedCellsNo:0,topLeftRef:null,bottomRightRef:null,cachedRows:"",cachedMergeCells:"",pivotTables:null},folder:"/xl/worksheets/",contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.worksheet+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/worksheet"},tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<worksheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" ','xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">','<tpl if="columns">',"<cols>",'<tpl for="columns.items">{[values.render()]}</tpl>',"</cols>","</tpl>",'<tpl if="cachedRows">',"<sheetData>{cachedRows}</sheetData>",'<tpl if="cachedMergeCells"><mergeCells>{cachedMergeCells}</mergeCells></tpl>','<tpl elseif="rows">','<sheetData><tpl for="rows.items">{[values.render()]}</tpl></sheetData>','<tpl if="values.self.getMergedCellsNo() &gt; 0">',"<mergeCells>",'<tpl for="rows.items">','<tpl for="_cells.items">','<tpl if="isMergedCell"><mergeCell ref="{[values.getMergedCellRef()]}"/></tpl>',"</tpl>","</tpl>","</mergeCells>","</tpl>","<tpl else>","</sheetData>","</tpl>","</worksheet>"],lastRowIndex:1,destroy:function(){Ext.destroy(this.cachedRow),this.cachedRow=this.cachedRowConfig=null,this.callParent()},getRenderData:function(){var e=this.getName();return Ext.isEmpty(e)&&this.generateName(),this.setMergedCellsNo(0),this.callParent()},collectFiles:function(e){var t,i,n=this.getPivotTables();if(n)for(t=n.length,i=0;i<t;i++)n.getAt(i).collectFiles(e);this.callParent([e])},collectContentTypes:function(e){var t,i,n=this.getPivotTables();if(n)for(t=n.length,i=0;i<t;i++)n.getAt(i).collectContentTypes(e);this.callParent([e])},applyColumns:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Column")},applyRows:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Row")},updateRows:function(e,t){t&&t.un({add:this.onRowAdd,remove:this.onRowRemove,scope:this}),e&&(e.on({add:this.onRowAdd,remove:this.onRowRemove,scope:this}),this.onRowAdd(e,{items:e.getRange()}))},onRowAdd:function(e,t){var i,n,r,s=t.items,o=s.length;for(i=0;i<o;i++)(n=s[i]).setWorksheet(this),(r=n._index)?this.lastRowIndex=Math.max(e.length,r)+1:n.setIndex(this.lastRowIndex++)},onRowRemove:function(e,t){Ext.destroy(t.items)},updateItemIndexes:function(e){var t,i,n;if(e)for(i=e.length,t=0;t<i;t++)(n=e.getAt(t)).getIndex()||n.setIndex(t+1)},updateDrawings:function(e,t){var i=this.getRelationships();t&&i&&i.removeRelationship(t.getRelationship()),e&&i&&i.addRelationship(e.getRelationship())},updateTables:function(e,t){var i=this.getRelationships();t&&i&&i.removeRelationship(t.getRelationship()),e&&i&&i.addRelationship(e.getRelationship())},applyPivotTables:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.PivotTable")},updatePivotTables:function(e,t){t&&t.un({add:this.onPivotTableAdd,remove:this.onPivotTableRemove,scope:this}),e&&(e.on({add:this.onPivotTableAdd,remove:this.onPivotTableRemove,scope:this}),this.processPivotTables(e.getRange()))},onPivotTableAdd:function(e,t){this.processPivotTables(t.items)},processPivotTables:function(e){var t,i,n=this.getRelationships(),r=e.length;for(t=0;t<r;t++)i=e[t],n.addRelationship(i.getRelationship()),i.setWorksheet(this);this.updateItemIndexes(this.getPivotTables())},onPivotTableRemove:function(e,t){var i,n,r=this.getRelationships(),s=t.items.length;for(i=0;i<s;i++)n=t.items[i],r.removeRelationship(n.getRelationship()),Ext.destroy(n)},addColumn:function(e){return this._columns||this.setColumns([]),this._columns.add(e||{})},addRow:function(e){return this._rows||this.setRows([]),this._rows.add(e||{})},getRow:function(e){return this._rows?this._rows.get(e):null},addPivotTable:function(e){return this._pivotTables||this.setPivotTables([]),this._pivotTables.add(e||{})},getPivotTable:function(e){return this._pivotTables?this._pivotTables.get(e):null},beginRowRendering:function(){var e=this;e.tempRows=[],e.tempMergeCells=[],e.startCaching=!0,e.setMergedCellsNo(0),e.lastRowIndex=1,e.cachedIndex=0,e.cachedRow||(e.cachedRow=new Ext.exporter.file.ooxml.excel.Row({worksheet:e}),e.cachedRowConfig=e.cachedRow.getConfig(),e.cachedRowConfig.id=e.cachedRowConfig.cells=null)},endRowRendering:function(){this.setCachedRows(this.tempRows.join("")),this.setCachedMergeCells(this.tempMergeCells.join("")),this.tempRows=this.tempMergeCells=null,this.startCaching=!1,this.lastRowIndex=1},renderRows:function(e){var t,i=Ext.Array.from(e),n=i.length;for(t=0;t<n;t++)this.renderRow(i[t])},renderRow:function(e){var t,i,n,r,s,o=this;return o.startCaching||o.beginRowRendering(),i=o.cachedRow,Ext.isArray(e)?(r=e,t={}):(t=e,r=Ext.Array.from(t.cells||[])),delete t.cells,Ext.applyIf(t,o.cachedRowConfig),i.setCollapsed(t.collapsed),i.setHidden(t.hidden),i.setHeight(t.height),i.setOutlineLevel(t.outlineLevel),i.setShowPhonetic(t.showPhonetic),i.setStyleId(t.styleId),i.setIndex(t.index),(n=i.getIndex())?o.lastRowIndex=Math.max(o.lastRowIndex,n)+1:i.setIndex(o.lastRowIndex++),s=i.renderCells(r),o.tempRows.push(s.row),0===o.cachedIndex&&(o._topLeftRef=s.first),o._bottomRightRef=s.last,o.tempMergeCells.push(s.merged),o.cachedIndex++,s.rowIndex=i.getIndex(),s}}),Ext.define("Ext.exporter.file.ooxml.excel.Font",{extend:Ext.exporter.file.ooxml.Base,config:{size:10,fontName:"",family:null,charset:null,bold:!1,italic:!1,underline:!1,outline:!1,strikeThrough:!1,color:null,verticalAlign:null},mappings:{family:{Automatic:0,Roman:1,Swiss:2,Modern:3,Script:4,Decorative:5}},tpl:["<font>",'<tpl if="size"><sz val="{size}"/></tpl>','<tpl if="fontName"><name val="{fontName}"/></tpl>','<tpl if="family"><family val="{family}"/></tpl>','<tpl if="charset"><charset val="{charset}"/></tpl>','<tpl if="bold"><b/></tpl>','<tpl if="italic"><i/></tpl>','<tpl if="underline"><u/></tpl>','<tpl if="outline"><outline/></tpl>','<tpl if="strikeThrough"><strike/></tpl>','<tpl if="color"><color rgb="{color}"/></tpl>','<tpl if="verticalAlign"><vertAlign val="{verticalAlign}"/></tpl>',"</font>"],autoGenerateKey:["size","fontName","family","charset","bold","italic","underline","outline","strikeThrough","color","verticalAlign"],constructor:function(e){var t,i={},n=Ext.Object.getKeys(e||{}),r=n.length;if(e)for(t=0;t<r;t++)i[Ext.String.uncapitalize(n[t])]=e[n[t]];this.callParent([i])},applyFamily:function(e){return"string"==typeof e?this.mappings.family[e]:e},applyBold:function(e){return!!e},applyItalic:function(e){return!!e},applyStrikeThrough:function(e){return!!e},applyUnderline:function(e){return!!e},applyOutline:function(e){return!!e},applyColor:function(e){var t;return e?0<=(t=String(e)).indexOf("#")?t.replace("#",""):t:e},applyVerticalAlign:function(e){return Ext.util.Format.lowercase(e)}}),Ext.define("Ext.exporter.file.ooxml.excel.NumberFormat",{extend:Ext.exporter.file.ooxml.Base,config:{isDate:!1,numFmtId:null,formatCode:""},tpl:['<numFmt numFmtId="{numFmtId}" formatCode="{formatCode:htmlEncode}"/>'],spaceRe:/(,| )/g,getRenderData:function(){var e=this.callParent(),t=e.formatCode;return t=t&&e.isDate?t.replace(this.spaceRe,"\\\\$1"):t,e.formatCode=t,e},getKey:function(){return this.getFormatCode()}}),Ext.define("Ext.exporter.file.ooxml.excel.Fill",{extend:Ext.exporter.file.ooxml.Base,config:{patternType:"none",fgColor:null,bgColor:null},tpl:["<fill>",'<tpl if="fgColor || bgColor">','<patternFill patternType="{patternType}">','<tpl if="fgColor"><fgColor rgb="{fgColor}"/></tpl>','<tpl if="bgColor"><bgColor rgb="{bgColor}"/></tpl>',"</patternFill>","<tpl else>",'<patternFill patternType="{patternType}"/>',"</tpl>","</fill>"],autoGenerateKey:["patternType","fgColor","bgColor"],constructor:function(e){var t=Ext.clone(e);e&&(t.patternType=t.patternType||e.pattern,t.bgColor=t.bgColor||("solid"!==t.patternType?e.color:null),t.fgColor=t.fgColor||("solid"===t.patternType?e.color:null)),this.callParent([t])},formatColor:function(e){var t;return e?0<=(t=String(e)).indexOf("#")?t.replace("#",""):t:e},applyFgColor:function(e){return this.formatColor(e)},applyBgColor:function(e){return this.formatColor(e)},applyPatternType:function(e){var t=Ext.util.Format.uncapitalize(e);return 0<=Ext.Array.indexOf(["none","solid","mediumGray","darkGray","lightGray","darkHorizontal","darkVertical","darkDown","darkUp","darkGrid","darkTrellis","lightHorizontal","lightVertical","lightDown","lightUp","lightGrid","lightTrellis","gray125","gray0625"],t)?t:"none"}}),Ext.define("Ext.exporter.file.ooxml.excel.BorderPr",{extend:Ext.exporter.file.ooxml.Base,isBorderPr:!0,config:{tag:"left",color:null,lineStyle:"none"},mappings:{lineStyle:{None:"none",Continuous:"thin",Dash:"dashed",Dot:"dotted",DashDot:"dashDot",DashDotDot:"dashDotDot",SlantDashDot:"slantDashDot",Double:"double"}},tpl:['<tpl if="color">','<{tag} style="{lineStyle}"><color rgb="{color}"/></{tag}>',"<tpl else>",'<{tag} style="{lineStyle}"/>',"</tpl>"],autoGenerateKey:["tag","color","lineStyle"],applyColor:function(e){var t;return e?0<=(t=String(e)).indexOf("#")?t.replace("#",""):t:e},applyLineStyle:function(e){return 0<=Ext.Array.indexOf(["none","thin","medium","dashed","dotted","thick","double","hair","mediumDashed","dashDot","mediumDashDot","dashDotDot","mediumDashDotDot","slantDashDot"],e)?e:this.mappings.lineStyle[e]||"none"}}),Ext.define("Ext.exporter.file.ooxml.excel.Border",{extend:Ext.exporter.file.ooxml.Base,config:{left:null,right:null,top:null,bottom:null},tpl:["<border>",'<tpl if="left">{[values.left.render()]}</tpl>','<tpl if="right">{[values.right.render()]}</tpl>','<tpl if="top">{[values.top.render()]}</tpl>','<tpl if="bottom">{[values.bottom.render()]}</tpl>',"</border>"],autoGenerateKey:["left","right","top","bottom"],destroy:function(){this.setConfig({left:null,right:null,top:null,bottom:null}),this.callParent()},applyLeft:function(e){return e&&!e.isBorderPr?new Ext.exporter.file.ooxml.excel.BorderPr(e):e},applyTop:function(e){return e&&!e.isBorderPr?new Ext.exporter.file.ooxml.excel.BorderPr(e):e},applyRight:function(e){return e&&!e.isBorderPr?new Ext.exporter.file.ooxml.excel.BorderPr(e):e},applyBottom:function(e){return e&&!e.isBorderPr?new Ext.exporter.file.ooxml.excel.BorderPr(e):e},updateLeft:function(e,t){Ext.destroy(t),e&&e.setTag("left")},updateTop:function(e,t){Ext.destroy(t),e&&e.setTag("top")},updateRight:function(e,t){Ext.destroy(t),e&&e.setTag("right")},updateBottom:function(e,t){Ext.destroy(t),e&&e.setTag("bottom")}}),Ext.define("Ext.exporter.file.ooxml.excel.CellAlignment",{extend:Ext.exporter.file.ooxml.Base,isCellAlignment:!0,config:{horizontal:"general",vertical:"top",rotate:null,wrapText:!1,indent:null,relativeIndent:null,justifyLastLine:!1,shrinkToFit:!1,readingOrder:null},autoGenerateKey:["horizontal","vertical","rotate","wrapText","indent","relativeIndent","justifyLastLine","shrinkToFit","readingOrder"],mappings:{horizontal:{Automatic:"general",CenterAcrossSelection:"centerContinuous",JustifyDistributed:"distributed"},vertical:{Automatic:"top",JustifyDistributed:"distributed"},readingOrder:{Context:0,LeftToRight:1,RightToLeft:2}},tpl:["<alignment",'<tpl if="horizontal"> horizontal="{horizontal}"</tpl>','<tpl if="vertical"> vertical="{vertical}"</tpl>','<tpl if="rotate"> textRotation="{rotate}"</tpl>','<tpl if="wrapText"> wrapText="{wrapText}"</tpl>','<tpl if="indent"> indent="{indent}"</tpl>','<tpl if="relativeIndent"> relativeIndent="{relativeIndent}"</tpl>','<tpl if="justifyLastLine"> justifyLastLine="{justifyLastLine}"</tpl>','<tpl if="shrinkToFit"> shrinkToFit="{shrinkToFit}"</tpl>','<tpl if="readingOrder"> readingOrder="{readingOrder}"</tpl>',"/>"],constructor:function(e){var t,i={},n=Ext.Object.getKeys(e||{}),r=n.length;if(e)for(t=0;t<r;t++)i[Ext.String.uncapitalize(n[t])]=e[n[t]];this.callParent([i])},applyHorizontal:function(e){var t=Ext.util.Format.uncapitalize(e);return 0<=Ext.Array.indexOf(["general","left","center","right","fill","justify","centerContinuous","distributed"],t)?t:this.mappings.horizontal[e]||"general"},applyVertical:function(e){var t=Ext.util.Format.uncapitalize(e);return 0<=Ext.Array.indexOf(["top","center","bottom","justify","distributed"],t)?t:this.mappings.vertical[e]||"top"},applyReadingOrder:function(e){return"string"==typeof e?this.mappings.readingOrder[e]||0:e}}),Ext.define("Ext.exporter.file.ooxml.excel.CellStyleXf",{extend:Ext.exporter.file.ooxml.Base,config:{numFmtId:0,fontId:0,fillId:0,borderId:0,alignment:null},autoGenerateKey:["numFmtId","fontId","fillId","borderId","alignment"],tpl:['<xf numFmtId="{numFmtId}" fontId="{fontId}" fillId="{fillId}" borderId="{borderId}"','<tpl if="numFmtId"> applyNumberFormat="1"</tpl>','<tpl if="fillId"> applyFill="1"</tpl>','<tpl if="borderId"> applyBorder="1"</tpl>','<tpl if="fontId"> applyFont="1"</tpl>','<tpl if="alignment">',' applyAlignment="1">{[values.alignment.render()]}</xf>',"<tpl else>","/>","</tpl>"],applyAlignment:function(e){return e&&!e.isCellAlignment?new Ext.exporter.file.ooxml.excel.CellAlignment(e):e}}),Ext.define("Ext.exporter.file.ooxml.excel.CellXf",{extend:Ext.exporter.file.ooxml.excel.CellStyleXf,config:{xfId:0},tpl:['<xf numFmtId="{numFmtId}" fontId="{fontId}" fillId="{fillId}" borderId="{borderId}"','    xfId="{xfId}"','<tpl if="numFmtId"> applyNumberFormat="1"</tpl>','<tpl if="fillId"> applyFill="1"</tpl>','<tpl if="borderId"> applyBorder="1"</tpl>','<tpl if="fontId"> applyFont="1"</tpl>','<tpl if="alignment">',' applyAlignment="1">{[values.alignment.render()]}</xf>',"<tpl else>","/>","</tpl>"],autoGenerateKey:["xfId"]}),Ext.define("Ext.exporter.file.ooxml.excel.Stylesheet",{extend:Ext.exporter.file.ooxml.Xml,isStylesheet:!0,config:{fonts:[{fontName:"Arial",size:10,family:2}],numberFormats:null,fills:[{patternType:"none"},{patternType:"gray125"}],borders:[{left:{},top:{},right:{},bottom:{}}],cellStyleXfs:[{}],cellXfs:[{}]},contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.styles+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/styles"},folder:"/xl/",fileName:"styles",tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<styleSheet xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main">','<tpl if="numberFormats"><numFmts count="{numberFormats.length}"><tpl for="numberFormats.items">{[values.render()]}</tpl></numFmts></tpl>','<tpl if="fonts"><fonts count="{fonts.length}"><tpl for="fonts.items">{[values.render()]}</tpl></fonts></tpl>','<tpl if="fills"><fills count="{fills.length}"><tpl for="fills.items">{[values.render()]}</tpl></fills></tpl>','<tpl if="borders"><borders count="{borders.length}"><tpl for="borders.items">{[values.render()]}</tpl></borders></tpl>','<tpl if="cellStyleXfs"><cellStyleXfs count="{cellStyleXfs.length}"><tpl for="cellStyleXfs.items">{[values.render()]}</tpl></cellStyleXfs></tpl>','<tpl if="cellXfs"><cellXfs count="{cellXfs.length}"><tpl for="cellXfs.items">{[values.render()]}</tpl></cellXfs></tpl>','<tableStyles count="0" defaultTableStyle="TableStyleMedium9" defaultPivotStyle="PivotStyleMedium7"/>',"</styleSheet>"],lastNumberFormatId:164,datePatterns:{"General Date":"[$-F800]dddd, mmmm dd, yyyy","Long Date":"[$-F800]dddd, mmmm dd, yyyy","Medium Date":"mm/dd/yy;@","Short Date":"m/d/yy;@","Long Time":"h:mm:ss;@","Medium Time":"[$-409]h:mm AM/PM;@","Short Time":"h:mm;@"},numberPatterns:{"General Number":1,Fixed:2,Standard:2,Percent:10,Scientific:11,Currency:'"$"#,##0.00',"Euro Currency":'""#,##0.00'},booleanPatterns:{"Yes/No":'"Yes";-;"No"',"True/False":'"True";-;"False"',"On/Off":'"On";-;"Off"'},applyFonts:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Font")},applyNumberFormats:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.NumberFormat")},applyFills:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Fill")},applyBorders:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Border")},applyCellXfs:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.CellXf")},applyCellStyleXfs:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.CellStyleXf")},addFont:function(e){var t,i,n=this._fonts;return n||(this.setFonts([]),n=this._fonts),i=new Ext.exporter.file.ooxml.excel.Font(e),0<=(t=n.indexOfKey(i.getKey()))?i.destroy():(n.add(i),t=n.indexOf(i)),t},addNumberFormat:function(e){var t,i,n=this._numberFormats;return n||(this.setNumberFormats([]),n=this._numberFormats),i=new Ext.exporter.file.ooxml.excel.NumberFormat(e),(t=n.get(i.getKey()))||(t=i,n.add(t),t.setNumFmtId(this.lastNumberFormatId++)),t.getNumFmtId()},addFill:function(e){var t,i,n=this._fills;return n||(this.setFills([]),n=this._fills),i=new Ext.exporter.file.ooxml.excel.Fill(e),0<=(t=n.indexOfKey(i.getKey()))?i.destroy():(n.add(i),t=n.indexOf(i)),t},addBorder:function(e){var t,i,n=this._borders;return n||(this.setBorders([]),n=this._borders),i=new Ext.exporter.file.ooxml.excel.Border(e),0<=(t=n.indexOfKey(i.getKey()))?i.destroy():(n.add(i),t=n.indexOf(i)),t},addCellXf:function(e){var t,i,n=this._cellXfs;return n||(this.setCellXfs([]),n=this._cellXfs),i=new Ext.exporter.file.ooxml.excel.CellXf(e),0<=(t=n.indexOfKey(i.getKey()))?i.destroy():(n.add(i),t=n.indexOf(i)),t},addCellStyleXf:function(e){var t,i,n=this._cellStyleXfs;return n||(this.setCellStyleXfs([]),n=this._cellStyleXfs),i=new Ext.exporter.file.ooxml.excel.CellStyleXf(e),0<=(t=n.indexOfKey(i.getKey()))?i.destroy():(n.add(i),t=n.indexOf(i)),t},getStyleParams:function(e){var t=(e&&e.isStyle?e:new Ext.exporter.file.Style(e)).getConfig(),i=0,n=0,r=0,s=0,o=0;return t.parentId=e?e.parentId:null,t.font&&(n=this.addFont(t.font)),t.format&&(i=this.getNumberFormatId(t.format)),t.interior&&(r=this.addFill(t.interior)),t.borders&&(s=this.getBorderId(t.borders)),t.parentId&&(o=t.parentId),{numFmtId:i,fontId:n,fillId:r,borderId:s,xfId:o,alignment:t.alignment||null}},addStyle:function(e){return this.addCellStyleXf(this.getStyleParams(e))},addCellStyle:function(e,t){var i,n,r=this.getCellXfs();return r&&(i=r.getAt(t))&&(n=i.getConfig()),this.addCellXf(Ext.merge(n||{},this.getStyleParams(e)))},getNumberFormatId:function(e){var t,i,n=!!this.datePatterns[e];return"General"===e?0:(i=this.datePatterns[e]||this.booleanPatterns[e]||this.numberPatterns[e],Ext.isNumeric(i)?t=i:i=i||e,t||this.addNumberFormat({isDate:n,formatCode:i}))},getBorderId:function(e){var t,i,n,r={},s=e.length;for(t=0;t<s;t++)i=e[t],n=Ext.util.Format.lowercase(i.position),delete i.position,r[n]=i;return this.addBorder(r)}}),Ext.define("Ext.exporter.file.ooxml.excel.SharedStrings",{extend:Ext.exporter.file.ooxml.Xml,isSharedStrings:!0,config:{strings:[]},contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sharedStrings+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/sharedStrings"},folder:"/xl/",fileName:"sharedStrings",tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<sst xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" count="{strings.length}" uniqueCount="{strings.length}">','<tpl for="strings.getRange()"><si><t>{.:this.utf8}</t></si></tpl>',"</sst>",{utf8:function(e){return Ext.util.Base64._utf8_encode(e)}}],destroy:function(){this.setStrings(null),this.callParent()},applyStrings:function(e,t){var i;return e&&(i=new Ext.util.Collection({keyFn:Ext.identityFn})).add(e),Ext.destroy(t),i},addString:function(e){var t,i=Ext.util.Format.htmlEncode(e),n=this.getStrings();return n||(this.setStrings([]),n=this.getStrings()),(t=n.indexOfKey(i))<0&&(n.add(i),t=n.length-1),t}}),Ext.define("Ext.exporter.file.ooxml.theme.Base",{extend:Ext.exporter.file.ooxml.XmlRels,alias:"ooxmltheme.base",mixins:[Ext.mixin.Factoryable],folder:"/theme/",fileName:"theme",contentType:{contentType:"application/vnd.openxmlformats-officedocument.theme+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/theme"}}),Ext.define("Ext.exporter.file.ooxml.theme.Office",{extend:Ext.exporter.file.ooxml.theme.Base,alias:"ooxmltheme.office",tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<a:theme xmlns:a="http://schemas.openxmlformats.org/drawingml/2006/main" name="Office Theme">',"<a:themeElements>",'<a:clrScheme name="Office">',"<a:dk1>",'<a:sysClr val="windowText" lastClr="000000"/>',"</a:dk1>","<a:lt1>",'<a:sysClr val="window" lastClr="FFFFFF"/>',"</a:lt1>","<a:dk2>",'<a:srgbClr val="44546A"/>',"</a:dk2>","<a:lt2>",'<a:srgbClr val="E7E6E6"/>',"</a:lt2>","<a:accent1>",'<a:srgbClr val="4472C4"/>',"</a:accent1>","<a:accent2>",'<a:srgbClr val="ED7D31"/>',"</a:accent2>","<a:accent3>",'<a:srgbClr val="A5A5A5"/>',"</a:accent3>","<a:accent4>",'<a:srgbClr val="FFC000"/>',"</a:accent4>","<a:accent5>",'<a:srgbClr val="5B9BD5"/>',"</a:accent5>","<a:accent6>",'<a:srgbClr val="70AD47"/>',"</a:accent6>","<a:hlink>",'<a:srgbClr val="0563C1"/>',"</a:hlink>","<a:folHlink>",'<a:srgbClr val="954F72"/>',"</a:folHlink>","</a:clrScheme>",'<a:fontScheme name="Office">',"<a:majorFont>",'<a:latin typeface="Calibri Light" panose="020F0302020204030204"/>','<a:ea typeface=""/>','<a:cs typeface=""/>','<a:font script="Jpan" typeface="Yu Gothic Light"/>','<a:font script="Hang" typeface="{[this.utf8(\\' \\')]}"/>','<a:font script="Hans" typeface="DengXian Light"/>','<a:font script="Hant" typeface="{[this.utf8(\\'\\')]}"/>','<a:font script="Arab" typeface="Times New Roman"/>','<a:font script="Hebr" typeface="Times New Roman"/>','<a:font script="Thai" typeface="Tahoma"/>','<a:font script="Ethi" typeface="Nyala"/>','<a:font script="Beng" typeface="Vrinda"/>','<a:font script="Gujr" typeface="Shruti"/>','<a:font script="Khmr" typeface="MoolBoran"/>','<a:font script="Knda" typeface="Tunga"/>','<a:font script="Guru" typeface="Raavi"/>','<a:font script="Cans" typeface="Euphemia"/>','<a:font script="Cher" typeface="Plantagenet Cherokee"/>','<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>','<a:font script="Tibt" typeface="Microsoft Himalaya"/>','<a:font script="Thaa" typeface="MV Boli"/>','<a:font script="Deva" typeface="Mangal"/>','<a:font script="Telu" typeface="Gautami"/>','<a:font script="Taml" typeface="Latha"/>','<a:font script="Syrc" typeface="Estrangelo Edessa"/>','<a:font script="Orya" typeface="Kalinga"/>','<a:font script="Mlym" typeface="Kartika"/>','<a:font script="Laoo" typeface="DokChampa"/>','<a:font script="Sinh" typeface="Iskoola Pota"/>','<a:font script="Mong" typeface="Mongolian Baiti"/>','<a:font script="Viet" typeface="Times New Roman"/>','<a:font script="Uigh" typeface="Microsoft Uighur"/>','<a:font script="Geor" typeface="Sylfaen"/>',"</a:majorFont>","<a:minorFont>",'<a:latin typeface="Calibri" panose="020F0502020204030204"/>','<a:ea typeface=""/>','<a:cs typeface=""/>','<a:font script="Jpan" typeface="Yu Gothic"/>','<a:font script="Hang" typeface="{[this.utf8(\\' \\')]}"/>','<a:font script="Hans" typeface="DengXian"/>','<a:font script="Hant" typeface="{[this.utf8(\\'\\')]}"/>','<a:font script="Arab" typeface="Arial"/>','<a:font script="Hebr" typeface="Arial"/>','<a:font script="Thai" typeface="Tahoma"/>','<a:font script="Ethi" typeface="Nyala"/>','<a:font script="Beng" typeface="Vrinda"/>','<a:font script="Gujr" typeface="Shruti"/>','<a:font script="Khmr" typeface="DaunPenh"/>','<a:font script="Knda" typeface="Tunga"/>','<a:font script="Guru" typeface="Raavi"/>','<a:font script="Cans" typeface="Euphemia"/>','<a:font script="Cher" typeface="Plantagenet Cherokee"/>','<a:font script="Yiii" typeface="Microsoft Yi Baiti"/>','<a:font script="Tibt" typeface="Microsoft Himalaya"/>','<a:font script="Thaa" typeface="MV Boli"/>','<a:font script="Deva" typeface="Mangal"/>','<a:font script="Telu" typeface="Gautami"/>','<a:font script="Taml" typeface="Latha"/>','<a:font script="Syrc" typeface="Estrangelo Edessa"/>','<a:font script="Orya" typeface="Kalinga"/>','<a:font script="Mlym" typeface="Kartika"/>','<a:font script="Laoo" typeface="DokChampa"/>','<a:font script="Sinh" typeface="Iskoola Pota"/>','<a:font script="Mong" typeface="Mongolian Baiti"/>','<a:font script="Viet" typeface="Arial"/>','<a:font script="Uigh" typeface="Microsoft Uighur"/>','<a:font script="Geor" typeface="Sylfaen"/>',"</a:minorFont>","</a:fontScheme>",'<a:fmtScheme name="Office">',"<a:fillStyleLst>","<a:solidFill>",'<a:schemeClr val="phClr"/>',"</a:solidFill>",'<a:gradFill rotWithShape="1">',"<a:gsLst>",'<a:gs pos="0">','<a:schemeClr val="phClr">','<a:lumMod val="110000"/>','<a:satMod val="105000"/>','<a:tint val="67000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="50000">','<a:schemeClr val="phClr">','<a:lumMod val="105000"/>','<a:satMod val="103000"/>','<a:tint val="73000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="100000">','<a:schemeClr val="phClr">','<a:lumMod val="105000"/>','<a:satMod val="109000"/>','<a:tint val="81000"/>',"</a:schemeClr>","</a:gs>","</a:gsLst>",'<a:lin ang="5400000" scaled="0"/>',"</a:gradFill>",'<a:gradFill rotWithShape="1">',"<a:gsLst>",'<a:gs pos="0">','<a:schemeClr val="phClr">','<a:satMod val="103000"/>','<a:lumMod val="102000"/>','<a:tint val="94000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="50000">','<a:schemeClr val="phClr">','<a:satMod val="110000"/>','<a:lumMod val="100000"/>','<a:shade val="100000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="100000">','<a:schemeClr val="phClr">','<a:lumMod val="99000"/>','<a:satMod val="120000"/>','<a:shade val="78000"/>',"</a:schemeClr>","</a:gs>","</a:gsLst>",'<a:lin ang="5400000" scaled="0"/>',"</a:gradFill>","</a:fillStyleLst>","<a:lnStyleLst>",'<a:ln w="6350" cap="flat" cmpd="sng" algn="ctr">',"<a:solidFill>",'<a:schemeClr val="phClr"/>',"</a:solidFill>",'<a:prstDash val="solid"/>','<a:miter lim="800000"/>',"</a:ln>",'<a:ln w="12700" cap="flat" cmpd="sng" algn="ctr">',"<a:solidFill>",'<a:schemeClr val="phClr"/>',"</a:solidFill>",'<a:prstDash val="solid"/>','<a:miter lim="800000"/>',"</a:ln>",'<a:ln w="19050" cap="flat" cmpd="sng" algn="ctr">',"<a:solidFill>",'<a:schemeClr val="phClr"/>',"</a:solidFill>",'<a:prstDash val="solid"/>','<a:miter lim="800000"/>',"</a:ln>","</a:lnStyleLst>","<a:effectStyleLst>","<a:effectStyle>","<a:effectLst/>","</a:effectStyle>","<a:effectStyle>","<a:effectLst/>","</a:effectStyle>","<a:effectStyle>","<a:effectLst>",'<a:outerShdw blurRad="57150" dist="19050" dir="5400000" algn="ctr" rotWithShape="0">','<a:srgbClr val="000000">','<a:alpha val="63000"/>',"</a:srgbClr>","</a:outerShdw>","</a:effectLst>","</a:effectStyle>","</a:effectStyleLst>","<a:bgFillStyleLst>","<a:solidFill>",'<a:schemeClr val="phClr"/>',"</a:solidFill>","<a:solidFill>",'<a:schemeClr val="phClr">','<a:tint val="95000"/>','<a:satMod val="170000"/>',"</a:schemeClr>","</a:solidFill>",'<a:gradFill rotWithShape="1">',"<a:gsLst>",'<a:gs pos="0">','<a:schemeClr val="phClr">','<a:tint val="93000"/>','<a:satMod val="150000"/>','<a:shade val="98000"/>','<a:lumMod val="102000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="50000">','<a:schemeClr val="phClr">','<a:tint val="98000"/>','<a:satMod val="130000"/>','<a:shade val="90000"/>','<a:lumMod val="103000"/>',"</a:schemeClr>","</a:gs>",'<a:gs pos="100000">','<a:schemeClr val="phClr">','<a:shade val="63000"/>','<a:satMod val="120000"/>',"</a:schemeClr>","</a:gs>","</a:gsLst>",'<a:lin ang="5400000" scaled="0"/>',"</a:gradFill>","</a:bgFillStyleLst>","</a:fmtScheme>","</a:themeElements>","<a:objectDefaults/>","<a:extraClrSchemeLst/>","</a:theme>",{utf8:function(e){return Ext.util.Base64._utf8_encode(e||"")}}]}),Ext.define("Ext.exporter.file.ooxml.excel.Workbook",{extend:Ext.exporter.file.ooxml.XmlRels,isWorkbook:!0,currentSheetIndex:1,currentPivotCacheIndex:0,config:{stylesheet:{},sharedStrings:{},sheets:[],pivotCaches:null,theme:{type:"office",folder:"/xl/theme/",index:1}},contentType:{contentType:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet.main+xml"},relationship:{schema:"http://schemas.openxmlformats.org/officeDocument/2006/relationships/officeDocument"},folder:"/xl/",fileName:"workbook",tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<workbook xmlns="http://schemas.openxmlformats.org/spreadsheetml/2006/main" ','xmlns:r="http://schemas.openxmlformats.org/officeDocument/2006/relationships">','<tpl if="sheets">',"<sheets>",'<tpl if="sheets"><tpl for="sheets.items"><sheet name="{[this.utf8(values.getName())]}" sheetId="{[xindex]}" state="visible" r:id="{[values.getRelationship().getId()]}"/></tpl></tpl>',"</sheets>","</tpl>",'<tpl if="pivotCaches">',"<pivotCaches>",'<tpl for="pivotCaches.getRange()">{[values.render()]}</tpl>',"</pivotCaches>","</tpl>","</workbook>",{utf8:function(e){return Ext.util.Base64._utf8_encode(e||"")}}],destroy:function(){this.setStylesheet(null),this.setSharedStrings(null),this.setTheme(null),this.callParent()},collectFiles:function(e){var t,i,n,r=this._stylesheet,s=this._sharedStrings,o=this._theme;for(n=(t=this._sheets).length,i=0;i<n;i++)t.items[i].collectFiles(e);e[this._path]=this.render(),e[r._path]=r.render(),e[s._path]=s.render(),e[o._path]=o.render(),this.collectRelationshipsFiles(e)},collectContentTypes:function(e){var t,i,n;for(e.push(this.getStylesheet().getContentType()),e.push(this.getSharedStrings().getContentType()),e.push(this.getTheme().getContentType()),n=(t=this.getSheets()).length,i=0;i<n;i++)t.getAt(i).collectContentTypes(e);this.callParent([e])},applyStylesheet:function(e){return!e||e.isStylesheet?e:new Ext.exporter.file.ooxml.excel.Stylesheet},updateStylesheet:function(e,t){var i=this.getRelationships();t&&i&&i.removeRelationship(t.getRelationship()),e&&i&&i.addRelationship(e.getRelationship()),Ext.destroy(t)},applySharedStrings:function(e){return!e||e.isSharedStrings?e:new Ext.exporter.file.ooxml.excel.SharedStrings},updateSharedStrings:function(e,t){var i=this.getRelationships();t&&i&&i.removeRelationship(t.getRelationship()),e&&i.addRelationship(e.getRelationship()),Ext.destroy(t)},applyPivotCaches:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.PivotCache")},updatePivotCaches:function(e,t){t&&t.un({add:this.onPivotCacheAdd,scope:this}),e&&e.on({add:this.onPivotCacheAdd,scope:this})},onPivotCacheAdd:function(e,t){var i,n=t.items.length;for(i=0;i<n;i++)t.items[i].setCacheId(this.currentPivotCacheIndex++)},applySheets:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.excel.Sheet")},updateSheets:function(e,t){t&&t.un({add:this.onSheetAdd,remove:this.onSheetRemove,scope:this}),e&&e.on({add:this.onSheetAdd,remove:this.onSheetRemove,scope:this})},applyTheme:function(e){var t={type:"office"};return e&&("string"==typeof e?t.type=e:Ext.apply(t,e),e=Ext.Factory.ooxmltheme(e)),e},updateTheme:function(e,t){var i=this.getRelationships();t&&i&&i.removeRelationship(t.getRelationship()),e&&i&&i.addRelationship(e.getRelationship()),Ext.destroy(t)},onSheetAdd:function(e,t){var i,n,r=this.getRelationships(),s=t.items.length;for(i=0;i<s;i++)(n=t.items[i]).setIndex(this.currentSheetIndex++),n.setWorkbook(this),r.addRelationship(n.getRelationship())},onSheetRemove:function(e,t){var i,n,r=this.getRelationships(),s=t.items.length;for(i=0;i<s;i++)n=t.items[i],r.removeRelationship(n.getRelationship()),Ext.destroy(n)},addWorksheet:function(e){var t,i,n=Ext.Array.from(e||{}),r=n.length;for(t=0;t<r;t++)(i=n[t])&&!i.isWorksheet&&(i.workbook=this,n[t]=new Ext.exporter.file.ooxml.excel.Worksheet(i));return this.getSheets().add(n)},removeWorksheet:function(e){return this.getSheets().remove(e)},addPivotCache:function(e){return this.getPivotCaches()||this.setPivotCaches([]),this.getPivotCaches().add(e||{})},removePivotCache:function(e){return this.getPivotCaches().remove(e)},addStyle:function(e){return this.getStylesheet().addStyle(e)},addCellStyle:function(e){return this.getStylesheet().addCellStyle(e)}}),Ext.define("Ext.exporter.file.ooxml.ContentTypes",{extend:Ext.exporter.file.ooxml.Xml,isContentTypes:!0,config:{contentTypes:[{tag:"Default",contentType:"application/vnd.openxmlformats-package.relationships+xml",extension:"rels"},{tag:"Default",contentType:"application/xml",extension:"xml"}]},tpl:['<?xml version="1.0" encoding="UTF-8" standalone="yes"?>','<Types xmlns="http://schemas.openxmlformats.org/package/2006/content-types">','<tpl if="contentTypes"><tpl for="contentTypes.getRange()">{[values.render()]}</tpl></tpl>',"</Types>"],folder:"/",fileName:"[Content_Types]",applyContentTypes:function(e,t){return this.checkCollection(e,t,"Ext.exporter.file.ooxml.ContentType")},addContentType:function(e){return this.getContentTypes().add(e||{})}}),Ext.define("Ext.exporter.file.ooxml.CoreProperties",{extend:Ext.exporter.file.ooxml.Xml,isCoreProperties:!0,config:{title:"Workbook",author:"Sencha",subject:""},contentType:{contentType:"application/vnd.openxmlformats-package.core-properties+xml",partName:"/docProps/core.xml"},relationship:{schema:"http://schemas.openxmlformats.org/package/2006/relationships/metadata/core-properties",target:"docProps/core.xml"},path:"/docProps/core.xml",tpl:['<coreProperties xmlns="http://schemas.openxmlformats.org/package/2006/metadata/core-properties" ','xmlns:dcterms="http://purl.org/dc/terms/" ','xmlns:dc="http://purl.org/dc/elements/1.1/" ','xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance">',"   <dc:creator>{author:this.utf8}</dc:creator>","   <dc:title>{title:this.utf8}</dc:title>","   <dc:subject>{subject:this.utf8}</dc:subject>","</coreProperties>",{utf8:function(e){return Ext.util.Base64._utf8_encode(e||"")}}]}),Ext.define("Ext.exporter.file.ooxml.Excel",{extend:Ext.exporter.file.ooxml.XmlRels,config:{properties:null,workbook:{}},folder:"/",fileName:null,tpl:[],constructor:function(e){var t=this.callParent([e]);return this.getWorkbook()||this.setWorkbook({}),t},destroy:function(){this.setWorkbook(null),this.setProperties(null),this.setRelationships(null),this.callParent()},render:function(){var e,t,i,n,r,s,o={};if(this.collectFiles(o),r=(e=Ext.Object.getKeys(o)).length){for(s=new Ext.exporter.file.zip.Archive,n=0;n<r;n++)i=o[t=e[n]],-1===(t=t.substr(1)).indexOf(".xml")&&-1===t.indexOf(".rel")||s.addFile({path:t,data:i});return i=s.getContent(),s=Ext.destroy(s),i}},collectFiles:function(e){var t=new Ext.exporter.file.ooxml.ContentTypes,i=this.getWorkbook(),n=this.getProperties(),r=[];i.collectFiles(e),n&&(t.addContentType(n.getContentType()),e[n.getPath()]=n.render()),i.collectContentTypes(r),t.addContentType(r),e[t.getPath()]=t.render(),Ext.destroy(t),this.collectRelationshipsFiles(e)},applyProperties:function(e){return!e||e.isCoreProperties?e:new Ext.exporter.file.ooxml.CoreProperties(e)},updateProperties:function(e,t){var i=this.getRelationships();t&&(i.removeRelationship(t.getRelationship()),t.destroy()),e&&i.addRelationship(e.getRelationship())},applyWorkbook:function(e){return!e||e.isWorkbook?e:new Ext.exporter.file.ooxml.excel.Workbook(e)},updateWorkbook:function(e,t){var i=this.getRelationships();t&&(i.removeRelationship(t.getRelationship()),t.destroy()),e&&i.addRelationship(e.getRelationship())},addWorksheet:function(e){return this.getWorkbook().addWorksheet(e)},addStyle:function(e){return this.getWorkbook().getStylesheet().addStyle(e)},addCellStyle:function(e,t){return this.getWorkbook().getStylesheet().addCellStyle(e,t)}}),Ext.define("Ext.exporter.excel.Xlsx",{extend:Ext.exporter.Base,alternateClassName:"Ext.exporter.Excel",alias:["exporter.excel07","exporter.xlsx","exporter.excel"],config:{defaultStyle:{alignment:{vertical:"Top"},font:{fontName:"Arial",family:"Swiss",size:11,color:"#000000"}},titleStyle:{alignment:{horizontal:"Center",vertical:"Center"},font:{fontName:"Arial",family:"Swiss",size:18,color:"#1F497D"}},groupHeaderStyle:{borders:[{position:"Bottom",lineStyle:"Continuous",weight:1,color:"#4F81BD"}]},groupFooterStyle:{borders:[{position:"Top",lineStyle:"Continuous",weight:1,color:"#4F81BD"}]},tableHeaderStyle:{alignment:{horizontal:"Center",vertical:"Center"},borders:[{position:"Bottom",lineStyle:"Continuous",weight:1,color:"#4F81BD"}],font:{fontName:"Arial",family:"Swiss",size:11,color:"#1F497D"}}},fileName:"export.xlsx",charset:"ascii",mimeType:"application/zip",binary:!0,titleRowHeight:22.5,headerRowHeight:20.25,destroy:function(){this.excel=this.worksheet=Ext.destroy(this.excel,this.worksheet),this.callParent()},getContent:function(){var e,t,i=this,n=this.getConfig(),r=n.data;return i.excel=new Ext.exporter.file.ooxml.Excel({properties:{title:n.title,author:n.author}}),i.worksheet=t=i.excel.addWorksheet({name:n.title}),i.tableHeaderStyleId=i.excel.addCellStyle(n.tableHeaderStyle),e=r?r.getColumnCount():1,t.beginRowRendering(),i.addTitle(n,e),r&&(t.renderRows(i.buildHeader()),t.renderRows(i.buildRows(r,e,-1))),t.endRowRendering(),i.columnStylesNormal=i.columnStylesNormalId=i.columnStylesFooter=null,i.columnStylesFooterId=i.headerStyles=i.footerStyles=null,i.excel.render()},addTitle:function(e,t){Ext.isEmpty(e.title)||this.worksheet.renderRow({height:this.titleRowHeight,cells:[{mergeAcross:t-1,value:e.title,styleId:this.excel.addCellStyle(e.titleStyle)}]})},buildRows:function(e,t,i){var n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v,E=this,b=E._showSummary,C=[];if(!e)return C;if(n=e._groups,p=e._text,g=!n&&!e._rows,!1===b||Ext.isEmpty(p)||g||(s=E.getGroupHeaderStyleByLevel(i),C.push({styleId:s,cells:[{mergeAcross:t-1,value:p,styleId:s}]})),n)for(d=n.length,l=0;l<d;l++)Ext.Array.insert(C,C.length,E.buildRows(n.items[l],t,i+1));if(e._rows)for(h=(m=e._rows.items).length,!1===b&&(s=E.getGroupHeaderStyleByLevel(i),C.push({cells:[{mergeAcross:t-1,value:e._text,styleId:s}]})),u=0;u<h;u++){for(r={id:(y=m[u])._id,cells:[]},f=(a=y._cells).length,c=0;c<f;c++)x=a.items[c],v=E.columnStylesNormalId[c],r.cells.push({id:x._id,value:x._value,styleId:E.getCellStyleId(x._style,v)});C.push(r)}if((m=e._summaries&&e._summaries.items)&&(b||g))for(o=E.getGroupFooterStyleByLevel(i),h=m.length,u=0;u<h;u++){for(r={id:(y=m[u])._id,cells:[]},f=(a=y._cells).length,c=0;c<f;c++)x=a.items[c],v=g?E.columnStylesNormalId[c]:0===c?o:E.columnStylesFooterId[c],r.cells.push({id:x._id,value:x._value,styleId:E.getCellStyleId(x._style,v)});C.push(r)}return e.destroy(),C},getGroupHeaderStyleByLevel:function(e){var t="l"+e,i=this.headerStyles;return i||(this.headerStyles=i={}),i.hasOwnProperty(t)||(i[t]=this.excel.addCellStyle(Ext.applyIf({alignment:{Indent:0<e?e:0}},this._groupHeaderStyle))),i[t]},getGroupFooterStyleByLevel:function(e){var t="l"+e,i=this.footerStyles;return i||(this.footerStyles=i={}),i.hasOwnProperty(t)||(i[t]=this.excel.addCellStyle(Ext.applyIf({alignment:{Indent:0<e?e:0}},this.columnStylesFooter[0]))),i[t]},buildHeader:function(){var e,t,i,n,r,s,o,a,l,c,u,d,h=this,f={},g=h.getData(),p=[];for(h.buildHeaderRows(g.getColumns(),f),r=(e=Ext.Object.getKeys(f)).length,i=0;i<r;i++){for(t={height:h.headerRowHeight,styleId:h.tableHeaderStyleId,cells:[]},s=(a=f[e[i]]).length,n=0;n<s;n++)(d=a[n]).styleId=h.tableHeaderStyleId,t.cells.push(d);p.push(t)}for(s=(a=g.getBottomColumns()).length,h.columnStylesNormal=[],h.columnStylesNormalId=[],h.columnStylesFooter=[],h.columnStylesFooterId=[],l=h.getGroupFooterStyle(),n=0;n<s;n++)u={style:(c=a[n]).getStyle(),width:c.getWidth()},o=Ext.applyIf({parentId:0},l),o=Ext.merge(o,u.style),h.columnStylesFooter.push(o),h.columnStylesFooterId.push(h.excel.addCellStyle(o)),o=Ext.applyIf({parentId:0},u.style),h.columnStylesNormal.push(o),u.styleId=h.excel.addCellStyle(o),h.columnStylesNormalId.push(u.styleId),u.min=u.max=n+1,u.style=null,u.width&&(u.width=u.width/10),h.worksheet.addColumn(u);return p},getCellStyleId:function(e,t){return e?this.excel.addCellStyle(e,t):t},buildHeaderRows:function(e,t){var i,n,r,s,o;if(e)for(s=e.length,r=0;r<s;r++)(i=e.items[r].getConfig()).value=i.text,n=i.columns,delete i.columns,delete i.table,t[o="s"+i.level]=t[o]||[],t[o].push(i),this.buildHeaderRows(n,t)}}),Ext.define("Ext.exporter.Plugin",{extend:Ext.plugin.Abstract,alias:["plugin.exporterplugin"],init:function(e){return e.saveDocumentAs=Ext.bind(this.saveDocumentAs,this),e.getDocumentData=Ext.bind(this.getDocumentData,this),this.cmp=e,this.callParent([e])},destroy:function(){var e=this.cmp;e.saveDocumentAs=e.getDocumentData=this.cmp=this.delayedSaveTimer=Ext.unasap(this.delayedSaveTimer),this.callParent()},saveDocumentAs:function(e){var t=this.cmp,i=new Ext.Deferred,n=this.getExporter(e);return t.fireEvent("beforedocumentsave",t,{config:e,exporter:n}),this.delayedSaveTimer=Ext.asap(this.delayedSave,this,[n,e,i]),i.promise},delayedSave:function(t,i,n){var r=this.cmp;if(this.disabled||!r)return Ext.destroy(t),void n.reject();this.setExporterData(t,i),t.saveAs().then(function(){n.resolve(i)},function(e){n.reject(e)}).always(function(){var e=r&&!r.destroyed;e&&r.fireEvent("documentsave",r,{config:i,exporter:t}),Ext.destroy(t),e&&r.fireEvent("exportfinished",r,{config:i})})},getDocumentData:function(e){var t,i;if(!this.disabled)return t=this.getExporter(e),this.setExporterData(t,e),i=t.getContent(),Ext.destroy(t),i},getExporter:function(e){var t=Ext.apply({type:"excel"},e);return Ext.Factory.exporter(t)},setExporterData:function(e,t){var i=this.cmp;e.setData(this.prepareData(t)),i.fireEvent("dataready",i,{config:t,exporter:e})},getExportStyle:function(e,t){var i,n,r,s=t&&t.type;return Ext.isArray(e)?(i=Ext.Array.pluck(e,"type"),0<=(r=Ext.Array.indexOf(i,void 0))&&(n=e[r]),0<=(r=Ext.Array.indexOf(i,s))?e[r]:n):e},prepareData:Ext.emptyFn}),Ext.define("Ext.grid.plugin.BaseExporter",{extend:Ext.exporter.Plugin,prepareData:function(e){var t,i,n=this.cmp.getStore(),r=new Ext.exporter.data.Table;return t=this.getColumnHeaders(e,this.getGridColumns()),r.setColumns(t.headers),!n||n&&n.destroyed||(n&&n.isBufferedStore&&Ext.raise("BufferedStore can't be exported because it doesn't have all data available"),i=this.prepareDataIndexColumns(e,t.dataIndexes),n.isTreeStore?this.extractNodeData(e,r,i,n.getRoot()):e&&e.includeGroups&&n.isGrouped()?(this.extractData(e,r,i,n.getGroups()),this.extractSummaryRow(e,r,i,n)):this.extractRows(e,r,i,n)),r},getColumnHeaders:function(e,t){var i,n,r=[],s=[],o=t.length;for(i=0;i<o;i++)(n=this.getColumnHeader(e,t[i]))&&(r.push(n.header),Ext.Array.insert(s,s.length,n.dataIndexes));return{headers:r,dataIndexes:s}},getGridColumns:function(){return[]},getColumnHeader:Ext.emptyFn,prepareDataIndexColumns:function(e,t){var i,n=t.length,r=[];for(i=0;i<n;i++)r.push(this.prepareDataIndexColumn(e,t[i]));return r},prepareDataIndexColumn:function(e,t){return{column:t,fn:Ext.emptyFn}},extractData:function(e,t,i,n){var r,s,o,a,l;if(n)for(s=n.getCount(),r=0;r<s;r++)o=(a=n.getAt(r)).getGroups(),l=t.addGroup({text:a.getGroupKey()}),o?this.extractData(e,l,i,o):this.extractRows(e,l,i,a)},extractNodeData:function(e,t,i,n){var r,s,o,a,l,c,u,d,h=this.cmp.getStore(),f=i.length;if(n&&n.hasChildNodes())for(d=(u=n.childNodes).length,r=0;r<d;r++){for(o=u[r],a={cells:[]},s=0;s<f;s++)c=i[s],l=this.getCell(h,o,c)||{value:null},c.column.isTreeColumn&&l&&(l.style=Ext.merge(l.style||{},{alignment:{indent:o.getDepth()-1}})),a.cells.push(l);t.addRow(a),o.hasChildNodes()&&this.extractNodeData(e,t,i,o)}},extractRows:function(e,t,i,n){var r,s,o,a,l,c=this.cmp.getStore(),u=n.getCount(),d=i.length,h=[];for(r=0;r<u;r++){for(o=n.getAt(r),a={cells:[]},s=0;s<d;s++)l=this.getCell(c,o,i[s]),a.cells.push(l||{value:null});h.push(a)}t.setRows(h),this.extractSummaryRow(e,t,i,n)},extractSummaryRow:function(e,t,i,n){var r,s,o,a,l=i.length;if(e.includeSummary){for(o={cells:[]},s=this.getSummaryRecord(n,i),r=0;r<l;r++)a=this.getSummaryCell(n,s,i[r]),o.cells.push(a||{value:null});t.setSummaries(o)}},getCell:Ext.emptyFn,getSummaryCell:Ext.emptyFn,getSummaryRecord:function(e,t){var i,n,r,s=t.length,o=e.getSummaryRecord(),a=new Ext.data.Model({id:"summary-record"});for(a.beginEdit(),a.set(o.getData()),i=0;i<s;i++)(n=t[i]).summary?(r=e.isStore?e.data.items.slice():e.items.slice(),a.set(n.summaryIndex,n.summary.calculate(r,n.summaryIndex,"data",0,r.length))):n.summaryType&&a.set(n.summaryIndex,this.getSummary(e,n.summaryType,n.summaryIndex));return a.endEdit(),a.commit(!0),a},getSummary:function(e,t,i){var n=e.isStore;if(t){if(Ext.isFunction(t))return n?e.aggregate(t,null,!1,[i]):e.aggregate(i,t);switch(t){case"count":return e.count();case"min":return e.min(i);case"max":return e.max(i);case"sum":return e.sum(i);case"average":return e.average(i);default:return null}}}}),Ext.define("Ext.grid.plugin.Exporter",{alias:["plugin.gridexporter"],extend:Ext.grid.plugin.BaseExporter,getGridColumns:function(){return this.cmp.getHeaderContainer().innerItems},getColumnHeader:function(e,t){var i,n,r,s=[];if(i={text:t.getText(),width:t.getWidth()},t.isHeaderGroup?(n=this.getColumnHeaders(e,t.innerItems),i.columns=n.headers,0===i.columns.length?i=null:Ext.Array.insert(s,s.length,n.dataIndexes)):t.getHidden()||t.getIgnoreExport()?i=null:(r=this.getExportStyle(t.getExportStyle(),e),i.style=r,i.width=i.width||t.getComputedWidth(),r&&(i.width=r.width||i.width),s.push(t)),i)return{header:i,dataIndexes:s}},prepareDataIndexColumn:function(e,t){var i=Ext.identityFn,n=Ext.identityFn,r=this.getExportStyle(t.getExportStyle(),e);return r&&(!r||r.format)||(i=this.getSpecialFn({renderer:"renderer",exportRenderer:"exportRenderer",formatter:"formatter"},t)||i,n=this.getSpecialFn({renderer:"summaryRenderer",exportRenderer:"exportSummaryRenderer",formatter:"summaryFormatter"},t)||i),{dataIndex:t.getDataIndex(),column:t,fn:i,summary:t.getSummary(),summaryType:t.getSummaryType(),summaryIndex:t.getSummaryDataIndex()||t.getDataIndex(),summaryFn:n}},getSpecialFn:function(e,t){var i,n,r,s=t["get"+Ext.String.capitalize(e.exportRenderer)](),o=t["get"+Ext.String.capitalize(e.renderer)](),a=t["get"+Ext.String.capitalize(e.formatter)]();return n=t.getScope()||t.resolveListenerScope()||t,r=s,a&&!r?i=a:(!0===r&&(r=o),"string"==typeof r?i=function(){return Ext.callback(r,n,arguments,0,t)}:"function"==typeof r&&(i=function(){return r.apply(n,arguments)})),i},getCell:function(e,t,i){var n=i.dataIndex,r=t.get(n);return{value:i.fn(r,t,n,null,i.column)}},getSummaryCell:function(e,t,i){var n=i.summaryIndex,r=t.get(n);return{value:i.summaryFn(r,t,n,null,i.column)}}}),Ext.define("Ext.pivot.Aggregators",{alternateClassName:["Mz.aggregate.Aggregators"],singleton:!0,customText:"Custom",sumText:"Sum",avgText:"Avg",minText:"Min",maxText:"Max",countText:"Count",countNumbersText:"Count numbers",groupSumPercentageText:"Group sum percentage",groupCountPercentageText:"Group count percentage",varianceText:"Var",variancePText:"Varp",stdDevText:"StdDev",stdDevPText:"StdDevp",sum:function(e,t,i,n,r){var s,o,a=e.length,l=i.calculateAsExcel?null:0;for(s=0;s<a;s++)null!==(o=e[s].get(t))&&(null===l&&(l=0),"number"==typeof o&&(l+=o));return l},avg:function(e,t,i,n,r){var s,o,a=e.length,l=i.calculateAsExcel,c=l?null:0,u=0;for(s=0;s<a;s++)"number"==typeof(o=e[s].get(t))&&(null===c&&(c=0),c+=o,u++);return l||(u=a),0<u&&null!==c?c/u:null},min:function(e,t,i,n,r){var s,o,a,l=e.length,c=null;for(s=0;s<l;s++)o=e[s].get(t),a=!0,i.calculateAsExcel&&(null!==o?("number"!=typeof o&&(o=0,a=!1),null===c&&(c=o)):a=!1),a&&o<c&&(c=o);return c},max:function(e,t,i,n,r){var s,o,a,l=e.length,c=null;for(s=0;s<l;s++)o=e[s].get(t),a=!0,i.calculateAsExcel&&(null!==o?("number"!=typeof o&&(o=0,a=!1),null===c&&(c=o)):a=!1),a&&c<o&&(c=o);return c},count:function(e,t,i,n,r){var s,o=e.length,a=null;if(i.calculateAsExcel)for(s=0;s<o;s++)null!==e[s].get(t)&&(null===a&&(a=0),a++);else a=o;return a},countNumbers:function(e,t,i,n,r){var s,o,a=e.length,l=null;for(s=0;s<a;s++)null!==(o=e[s].get(t))&&(null===l&&(l=0),"number"==typeof o&&l++);return i.calculateAsExcel?l:l||0},groupSumPercentage:function(e,t,i,n,r){var s,o,a=Ext.pivot.Aggregators.sum,l=e.length,c=n.split(i.keysSeparator),u=null,d=null;return l?(c.pop(),c=c.join(i.keysSeparator),Ext.isEmpty(c)&&(c=i.grandTotalKey),(s=i.results.get(n,r))&&(u=s.hasValue("groupSum")?s.getValue("groupSum"):s.calculateByFn("groupSum",t,a)),(o=i.results.get(c,r))&&(d=o.hasValue("groupSum")?o.getValue("groupSum"):o.calculateByFn("groupSum",t,a)),null!==d&&null!==u&&0!==d?u/d*100:null):null},groupCountPercentage:function(e,t,i,n,r){var s,o,a=Ext.pivot.Aggregators.count,l=e.length,c=n.split(i.keysSeparator),u=null,d=null;return l?(c.pop(),c=c.join(i.keysSeparator),Ext.isEmpty(c)&&(c=i.grandTotalKey),(s=i.results.get(n,r))&&(u=s.hasValue("groupCount")?s.getValue("groupCount"):s.calculateByFn("groupCount",t,a)),(o=i.results.get(c,r))&&(d=o.hasValue("groupCount")?o.getValue("groupCount"):o.calculateByFn("groupCount",t,a)),null!==d&&null!==u&&0!==d?u/d*100:null):null},variance:function(e,t,i,n,r){var s,o,a=i.calculateAsExcel,l=Ext.pivot.Aggregators,c=a?l.countNumbers.apply(l,arguments):e.length,u=l.avg.apply(l,arguments),d=e.length,h=0;if(0<u)for(s=0;s<d;s++)o=e[s].get(t),a?"number"==typeof o&&(h+=Math.pow(o-u,2)):h+=Math.pow(Ext.Number.from(o,0)-u,2);return 0<h&&1<c?h/(c-1):null},varianceP:function(e,t,i,n,r){var s,o,a=i.calculateAsExcel,l=Ext.pivot.Aggregators,c=a?l.countNumbers.apply(l,arguments):e.length,u=l.avg.apply(l,arguments),d=e.length,h=0;if(0<u)for(s=0;s<d;s++)o=e[s].get(t),a?"number"==typeof o&&(h+=Math.pow(o-u,2)):h+=Math.pow(Ext.Number.from(o,0)-u,2);return 0<h&&0<c?h/c:null},stdDev:function(e,t,i,n,r){var s=Ext.pivot.Aggregators,o=s.variance.apply(s,arguments);return 0<o?Math.sqrt(o):null},stdDevP:function(e,t,i,n,r){var s=Ext.pivot.Aggregators,o=s.varianceP.apply(s,arguments);return 0<o?Math.sqrt(o):null}}),Ext.define("Ext.pivot.MixedCollection",{extend:Ext.util.MixedCollection,alternateClassName:["Mz.aggregate.MixedCollection"],removeAt:function(e){Ext.destroy(this.callParent(arguments))},clear:function(){this.destroyItems(),this.callParent(arguments)},removeAll:function(){this.destroyItems(),this.callParent(arguments)},destroy:function(){this.clear()},destroyItems:function(){var e,t,i,n=this.items;if(n)for(e=n.length,t=0;t<e;t++)(i=n[t]).destroy&&i.destroy()}}),Ext.define("Ext.pivot.filter.Base",{alternateClassName:["Mz.aggregate.filter.Abstract"],alias:"pivotfilter.base",mixins:[Ext.mixin.Factoryable],isFilter:!0,operator:null,value:null,caseSensitive:!0,parent:null,constructor:function(e){var t=Ext.util.Format;return this.thousandRe=new RegExp("["+t.thousandSeparator+"]","g"),this.decimalRe=new RegExp("["+t.decimalSeparator+"]"),Ext.apply(this,e),this.callParent([e])},destroy:function(){this.parent=this.thousandRe=this.decimalRe=null,this.callParent()},serialize:function(){return Ext.apply({type:this.type,operator:this.operator,value:this.value,caseSensitive:this.caseSensitive},this.getSerialArgs()||{})},getSerialArgs:Ext.emptyFn,isMatch:function(e){var t,i,n,r,s,o=this,a=o.value;return a=(Ext.isArray(a)?a[0]:a)||"",t=o.compare(e,a),"="===o.operator?0===t:"!="===o.operator?0!==t:">"===o.operator?0<t:">="===o.operator?0<=t:"<"===o.operator?t<0:"<="===o.operator?t<=0:(a=o.value,r=(Ext.isArray(a)?a[0]:a)||"",s=(Ext.isArray(a)?a[1]:a)||"",i=o.compare(e,r),n=o.compare(e,s),"between"===o.operator?0<=i&&n<=0:"not between"!==o.operator||!(0<=i&&n<=0))},parseNumber:function(e){var t;return"number"==typeof e?e:(Ext.isEmpty(e)&&(e=""),t=(t=String(e).replace(this.thousandRe,"")).replace(this.decimalRe,"."),Ext.isNumeric(t)?parseFloat(t):null)},compare:function(e,t){var i=Ext.pivot.matrix.Base.prototype.naturalSort,n=this.parseNumber(e),r=this.parseNumber(t);return Ext.isNumber(n)&&Ext.isNumber(r)?i(n,r):Ext.isDate(e)?Ext.isDate(t)?i(e,t):i(e,Ext.Date.parse(t,Ext.Date.defaultFormat)):this.caseSensitive?i(e||"",t||""):i(String(e||"").toLowerCase(),String(t||"").toLowerCase())},deprecated:{"6.0":{properties:{mztype:null,from:null,to:null}}}}),Ext.define("Ext.pivot.filter.Label",{alternateClassName:["Mz.aggregate.filter.Label"],extend:Ext.pivot.filter.Base,alias:"pivotfilter.label",isMatch:function(e){var t=this;return"begins"===t.operator?Ext.String.startsWith(String(e||""),String(t.value||""),!t.caseSensitive):"not begins"===t.operator?!Ext.String.startsWith(String(e||""),String(t.value||""),!t.caseSensitive):"ends"===t.operator?Ext.String.endsWith(String(e||""),String(t.value||""),!t.caseSensitive):"not ends"===t.operator?!Ext.String.endsWith(String(e||""),String(t.value||""),!t.caseSensitive):"contains"===t.operator?t.stringContains(String(e||""),String(t.value||""),!t.caseSensitive):"not contains"===t.operator?!t.stringContains(String(e||""),String(t.value||""),!t.caseSensitive):"in"===t.operator?t.foundInArray(t.value):"not in"===t.operator?!t.foundInArray(t.value):t.callParent(arguments)},foundInArray:function(e){var t,i=Ext.Array.from(this.value),n=i.length,r=!1;if(this.caseSensitive)return 0<=Ext.Array.indexOf(i,e);for(t=0;t<n&&!(r=r||String(e).toLowerCase()===String(i[t]).toLowerCase());t++);return r},stringContains:function(e,t,i){var n=t.length<=e.length;return n&&(i&&(e=e.toLowerCase(),t=t.toLowerCase()),n=0<=e.lastIndexOf(t)),n},deprecated:{"6.0":{methods:{startsWith:Ext.emptyFn,endsWith:Ext.emptyFn}}}}),Ext.define("Ext.pivot.filter.Value",{alternateClassName:["Mz.aggregate.filter.Value"],extend:Ext.pivot.filter.Base,alias:"pivotfilter.value",dimensionId:"",topType:"items",topOrder:"top",topSort:!0,isTopFilter:!1,constructor:function(e){var t=this.callParent([e]);return Ext.isEmpty(this.dimensionId)&&Ext.raise("dimensionId is mandatory on Value filters"),this.isTopFilter="top10"===this.operator,t},destroy:function(){this.dimension=null,this.callParent()},getDimension:function(){return this.parent.matrix.aggregate.getByKey(this.dimensionId)||Ext.raise("There is no aggregate dimension that matches the dimensionId provided"),this.parent.matrix.aggregate.getByKey(this.dimensionId)},getSerialArgs:function(){return{dimensionId:this.dimensionId,topType:this.topType,topOrder:this.topOrder,topSort:this.topSort}},applyFilter:function(e,t){var i=this.topSort?t:Ext.Array.clone(t),n=[];if(0===t.length)return n;switch(this.sortItemsByGrandTotal(e,i),this.topType){case"items":n=this.extractTop10Items(i);break;case"sum":n=this.extractTop10Sum(i);break;case"percent":n=this.extractTop10Percent(e,i)}return this.topSort||(i.length=0),n},extractTop10Items:function(e){var t,i=[];for(t=0;t<e.length&&!(i.indexOf(e[t].tempVar)<0&&(i.push(e[t].tempVar),i.length>this.value||this.value<t+1&&0<t));t++);return Ext.Array.slice(e,t)},extractTop10Sum:function(e){var t,i=0;for(t=0;t<e.length&&!((i+=e[t].tempVar)>=this.value);t++);return Ext.Array.slice(e,t+1)},extractTop10Percent:function(e,t){var i,n,r,s,o,a,l=0,c=t[0].key.split(e.matrix.keysSeparator);for(c.length--,s=0<c.length?c.join(e.matrix.keysSeparator):e.matrix.grandTotalKey,n=e.isLeftAxis?s:e.matrix.grandTotalKey,r=e.isLeftAxis?e.matrix.grandTotalKey:s,a=(o=e.matrix.results.get(n,r))?o.getValue(this.dimensionId):0,i=0;i<t.length&&!(100*(l+=t[i].tempVar)/a>=this.value);i++);return Ext.Array.slice(t,i+1)},sortItemsByGrandTotal:function(n,e){var t,i,r,s,o=this;for(s=0;s<e.length;s++)t=n.isLeftAxis?e[s].key:n.matrix.grandTotalKey,i=n.isLeftAxis?n.matrix.grandTotalKey:e[s].key,r=n.matrix.results.get(t,i),e[s].tempVar=r?r.getValue(o.dimensionId):0;Ext.Array.sort(e,function(e,t){var i=n.matrix.naturalSort(e.tempVar,t.tempVar);return i<0&&"top"===o.topOrder?1:0<i&&"top"===o.topOrder?-1:i})}}),Ext.define("Ext.pivot.dimension.Item",{alternateClassName:["Mz.aggregate.dimension.Item"],$configPrefixed:!1,$configStrict:!1,config:{id:null,header:"",dataIndex:"",sortIndex:"",width:100,flex:0,align:"left",sortable:!0,direction:"ASC",sorterFn:null,caseSensitiveSort:!0,filter:null,labelRenderer:null,renderer:null,formatter:null,column:null,exportStyle:null,scope:null,grouperFn:null,blankText:"(blank)",showZeroAsBlank:!1,aggregator:"sum",values:[]},isAggregate:!1,matrix:null,constructor:function(e){var t=this;return this.initConfig(e),t.getId()||t.setId(Ext.id()),Ext.isEmpty(t.dataIndex)&&Ext.raise("No dataIndex provided to the dimension!"),t.grouperFn||(t.groupFn=Ext.bind(t.defaultGrouperFn,t)),t.sortable?t.sorterFn||(t.sortFn=Ext.bind(t.defaultSorterFn,t)):t.sortFn=Ext.bind(t.manualSorterFn,t),Ext.isEmpty(t.getSortIndex())&&t.setSortIndex(t.getDataIndex()),!t.isAggregate||t.getFormatter()||t.getRenderer()||t.setRenderer(t.getDefaultFormatRenderer("0,000.00")),this.callParent([e])},destroy:function(){this.setConfig({values:null,grouperFn:null,sorterFn:null,filter:null,renderer:null,labelRenderer:null,aggregator:null}),this.callParent()},serialize:function(){return this.getConfiguration(!0)},getConfiguration:function(e){var t=this.getConfig();return delete t.values,t.filter&&(t.filter=t.filter.serialize()),e&&"function"==typeof t.aggregator&&(t.aggregator="sum"),e&&"function"==typeof t.renderer&&(t.renderer=null),e&&"function"==typeof t.labelRenderer&&(t.labelRenderer=null),t},applyId:function(e){return e||Ext.id()},updateExportStyle:function(e){e&&!e.id&&(e.id=this.getId())},applyFilter:function(e,t){return null==e?e:e&&e.isFilter?(e.parent=this,e):e=!!Ext.isObject(e)&&(Ext.applyIf(e,{type:"label",parent:this}),Ext.Factory.pivotfilter(e))},updateAggregator:function(e){var t=Ext.pivot.Aggregators;Ext.isString(e)&&Ext.isFunction(t[e])?this.aggregatorFn=Ext.bind(t[e],t):this.aggregatorFn=e||"sum"},updateGrouperFn:function(e){this.groupFn=Ext.isFunction(e)?Ext.bind(e,this):e},updateSorterFn:function(e){this.sortFn=Ext.isFunction(e)?Ext.bind(e,this):e},addValue:function(e,t){var i=this.values;i.getByKey(e)||i.add({sortValue:e,value:e,display:t})},applyValues:function(e,t){var i;return Ext.destroy(t),e&&!e.isInstance?((i=new Ext.pivot.MixedCollection).getKey=function(e){return e.value},i.addAll(e),i):e},sortValues:function(){this.sortable&&this.values.sortBy(this.sortFn)},defaultSorterFn:function(e,t){var i,n=e.sortValue,r=t.sortValue;return n instanceof Date&&(n=n.getTime()),r instanceof Date&&(r=r.getTime()),this.caseSensitiveSort||(n="string"==typeof n?n.toUpperCase():n,r="string"==typeof r?r.toUpperCase():r),(i=this.matrix.useNaturalSorting?this.matrix.naturalSort(n,r):n===r?0:n<r?-1:1)<0&&"DESC"===this.direction?1:0<i&&"DESC"===this.direction?-1:i},manualSorterFn:function(e,t){var i=this.values,n=i?i.indexOfKey(e.value):0,r=i?i.indexOfKey(t.value):0;return n===r?0:n<r?-1:1},getDefaultFormatRenderer:function(i){var n=this;return function(e){var t;return Ext.isEmpty(i)?e:Ext.isFunction(i)?i.apply(n,arguments):Ext.isNumber(e)?n.isAggregate&&0===e&&n.showZeroAsBlank?"":(t=0<=e,e=Math.abs(e),e=Ext.util.Format.number(e,i),t?e:"-"+e):e}},defaultGrouperFn:function(e){return e.get(this.dataIndex)},getFormatterFn:function(){var e,t=this,i=t.getFormatter();if(i)return(e=0===i.indexOf("this."))&&(i=i.substring(5)),i=Ext.app.bind.Template.prototype.parseFormat(i),e&&(i.scope=null),function(e){return i.format(e,i.scope||t.getScope()||t.matrix.cmp.resolveListenerScope("self.controller")||this)}},aggregatorFn:Ext.emptyFn,groupFn:Ext.emptyFn,sortFn:Ext.emptyFn}),Ext.define("Ext.pivot.axis.Item",{alternateClassName:["Mz.aggregate.axis.Item"],level:0,key:"",value:"",sortValue:"",name:"",dimensionId:"",dimension:null,children:null,record:null,records:null,axis:null,data:null,expanded:!1,constructor:function(e){var t;Ext.apply(this,e||{}),Ext.isEmpty(this.sortValue)&&(this.sortValue=this.value),t=this.axis,this.expanded=t&&(t.isLeftAxis&&!t.matrix.collapsibleRows||!t.isLeftAxis&&!t.matrix.collapsibleColumns),this.callParent(arguments)},destroy:function(){Ext.destroy(this.children),this.axis=this.data=this.dimension=this.record=this.children=this.records=null,this.callParent(arguments)},getTextTotal:function(){return Ext.XTemplate.getTpl(this.axis.matrix,"textTotalTpl").apply({groupField:this.dimension.dataIndex,columnName:this.dimension.dataIndex,name:this.name,rows:this.children||[]})},expand:function(e){(this.expanded=!0)===e&&this.expandCollapseChildrenTree(!0),this.axis.matrix.fireEvent("groupexpand",this.axis.matrix,this.axis.isLeftAxis?"row":"col",this)},collapse:function(e){!(this.expanded=!1)===e&&this.expandCollapseChildrenTree(!1),this.axis.matrix.fireEvent("groupcollapse",this.axis.matrix,this.axis.isLeftAxis?"row":"col",this)},expandCollapseChildrenTree:function(e){var t;if(this.expanded=e,Ext.isArray(this.children))for(t=0;t<this.children.length;t++)this.children[t].expandCollapseChildrenTree(e)}}),Ext.define("Ext.pivot.axis.Base",{alternateClassName:["Mz.aggregate.axis.Abstract"],alias:"pivotaxis.base",mixins:[Ext.mixin.Factoryable],dimensions:null,matrix:null,items:null,tree:null,levels:0,isLeftAxis:!1,constructor:function(e){var t=this;e&&e.matrix?(t.isLeftAxis=e.isLeftAxis||t.isLeftAxis,t.matrix=e.matrix,t.tree=[],t.dimensions=new Ext.pivot.MixedCollection,t.dimensions.getKey=function(e){return e.getId()},t.items=new Ext.pivot.MixedCollection,t.items.getKey=function(e){return e.key},Ext.Array.each(Ext.Array.from(e.dimensions||[]),t.addDimension,t)):Ext.log("Wrong initialization of the axis!")},destroy:function(){Ext.destroyMembers(this,"dimensions","items","tree"),this.matrix=this.dimensions=this.items=this.tree=null},addDimension:function(e){var t=e;e&&(e.isInstance||(t=new Ext.pivot.dimension.Item(e)),t.matrix=this.matrix,this.dimensions.add(t))},addItem:function(e){return!(!Ext.isObject(e)||Ext.isEmpty(e.key)||Ext.isEmpty(e.value)||Ext.isEmpty(e.dimensionId))&&(e.key=String(e.key),e.dimension=this.dimensions.getByKey(e.dimensionId),e.name=e.name||Ext.callback(e.dimension.labelRenderer,e.dimension.scope||"self.controller",[e.value],0,this.matrix.cmp)||e.value,e.dimension.addValue(e.value,e.name),!((e.axis=this).items.map[e.key]||!e.dimension)&&(this.items.add(new Ext.pivot.axis.Item(e)),!0))},clear:function(){this.items.clear(),this.tree=null},getTree:function(){return this.tree||this.buildTree(),this.tree},expandAll:function(){var e,t=this.getTree(),i=t.length;for(e=0;e<i;e++)t[e].expandCollapseChildrenTree(!0);0<i&&this.matrix.fireEvent("groupexpand",this.matrix,this.isLeftAxis?"row":"col",null)},collapseAll:function(){var e,t=this.getTree(),i=t.length;for(e=0;e<i;e++)t[e].expandCollapseChildrenTree(!1);0<i&&this.matrix.fireEvent("groupcollapse",this.matrix,this.isLeftAxis?"row":"col",null)},findTreeElement:function(e,t){var i,n,r=this.items,s=r.getCount(),o=!1;for(i=0;i<s;i++)if(n=r.items[i],Ext.isDate(t)?Ext.Date.isEqual(n[e],t):n[e]===t){o=!0;break}return o?{level:n.level,node:n}:null},buildTree:function(){var e,t,i,n,r,s=this,o=s.dimensions.items,a=o.length;for(e=0;e<a;e++)o[e].sortValues();for(s.tree=[],a=(o=s.items.items).length,e=0;e<a;e++)t=o[e],i=String(t.key).split(s.matrix.keysSeparator),n=(i=Ext.Array.slice(i,0,i.length-1)).join(s.matrix.keysSeparator),(r=s.items.map[n])?(t.level=r.level+1,t.data=Ext.clone(r.data||{}),r.children=r.children||[],r.children.push(t)):(t.level=0,t.data={},s.tree.push(t)),t.data[t.dimension.getId()]=t.name,s.levels=Math.max(s.levels,t.level);s.sortTree()},rebuildTree:function(){var e,t=this.items.items,i=t.length;for(this.tree=null,e=0;e<i;e++)t[e].children=null;this.buildTree()},sortTree:function(){var e,t,i,n=arguments[0]||this.tree,r=n.length;for(0<n.length&&(e=n[0].dimension),e&&Ext.Array.sort(n,e.sortFn),t=0;t<r;t++)(i=n[t]).children&&this.sortTree(i.children)},sortTreeByField:function(e,t){var i,n,r,s=this,o=!1;if(e===s.matrix.compactViewKey)for(o=s.sortTreeByDimension(s.tree,s.dimensions.items,t),n=s.dimensions.items.length,r=0;r<n;r++)s.dimensions.items[r].direction=t;else t=t||"ASC",(i=s.dimensions.getByKey(e))?(o=s.sortTreeByDimension(s.tree,i,t),i.direction=t):o=s.sortTreeByRecords(s.tree,e,t);return o},sortTreeByDimension:function(e,t,i){var n,r,s,o,a=!1,l=Ext.Array.from(t);for(0<(r=(e=e||[]).length)&&(n=e[0].dimension),0<=Ext.Array.indexOf(l,n)&&(n.sortable&&(o=n.direction,n.direction=i,Ext.Array.sort(e,n.sortFn),n.direction=o),a=n.sortable),s=0;s<r;s++)a=this.sortTreeByDimension(e[s].children,t,i)||a;return a},sortTreeByRecords:function(e,t,i){var n,r;if((r=(e=e||[]).length)<=0)return!1;for(e[0].record?this.sortTreeRecords(e,t,i):this.sortTreeLeaves(e,t,i),n=0;n<r;n++)this.sortTreeByRecords(e[n].children,t,i);return!0},sortTreeRecords:function(e,s,o){var a=this.matrix.naturalSort;o=o||"ASC",Ext.Array.sort(e||[],function(e,t){var i,n=e.record,r=t.record;return n&&n.isModel&&r&&r.isModel?(i=a(n.get(s)||"",r.get(s)||""))<0&&"DESC"===o?1:0<i&&"DESC"===o?-1:i:0})},sortTreeLeaves:function(e,t,s){var o,a,l=this.matrix.naturalSort,c=this.matrix.results,i=this.matrix.model,n=Ext.Array.indexOf(Ext.Array.pluck(i,"name"),t);if(n<0)return!1;o=i[n].col,a=i[n].agg,s=s||"ASC",Ext.Array.sort(e||[],function(e,t){var i,n,r;return n=(n=c.get(e.key,o))?n.getValue(a):0,r=(r=c.get(t.key,o))?r.getValue(a):0,(i=l(n,r))<0&&"DESC"===s?1:0<i&&"DESC"===s?-1:i})}}),Ext.define("Ext.pivot.axis.Local",{alternateClassName:["Mz.aggregate.axis.Local"],extend:Ext.pivot.axis.Base,alias:"pivotaxis.local",processRecord:function(e){var t,i,n,r,s=[],o="",a=!0,l=this.dimensions.items.length;for(r=0;r<l&&(n=this.dimensions.items[r],t=Ext.callback(n.groupFn,n.scope||"self.controller",[e],0,this.matrix.cmp),i=o?o+this.matrix.keysSeparator:"",t=Ext.isEmpty(t)?n.blankText:t,i+=this.matrix.getKey(t),n.filter instanceof Ext.pivot.filter.Label&&(a=n.filter.isMatch(t)),a);r++)s.push({value:t,sortValue:e.get(n.sortIndex),key:i,dimensionId:n.getId()}),o=i;return a?s:null},buildTree:function(){this.callParent(arguments),this.filterTree()},filterTree:function(){var e,t=this.dimensions.items.length,i=!1;for(e=0;e<t;e++)i=i||this.dimensions.items[e].filter instanceof Ext.pivot.filter.Value;i&&(this.matrix.filterApplied=!0,this.filterTreeItems(this.tree))},filterTreeItems:function(e){var t,i,n;if(e&&Ext.isArray(e)&&!(e.length<=0)){if((t=e[0].dimension.filter)&&t instanceof Ext.pivot.filter.Value)for(n=t.isTopFilter?t.applyFilter(this,e)||[]:Ext.Array.filter(e,this.canRemoveItem,this),this.removeRecordsFromResults(n),this.removeItemsFromArray(e,n),i=0;i<n.length;i++)this.removeTreeChildren(n[i]);for(i=0;i<e.length;i++)e[i].children&&(this.filterTreeItems(e[i].children),0===e[i].children.length&&(this.items.remove(e[i]),Ext.Array.erase(e,i,1),i--))}},removeTreeChildren:function(e){var t,i;if(e.children)for(i=e.children.length,t=0;t<i;t++)this.removeTreeChildren(e.children[t]);this.items.remove(e)},canRemoveItem:function(e){var t=this.isLeftAxis?e.key:this.matrix.grandTotalKey,i=this.isLeftAxis?this.matrix.grandTotalKey:e.key,n=this.matrix.results.get(t,i),r=e.dimension.filter;return!!n&&!r.isMatch(n.getValue(r.dimensionId))},removeItemsFromArray:function(e,t){var i;for(i=0;i<e.length;i++)0<=Ext.Array.indexOf(t,e[i])&&(Ext.Array.erase(e,i,1),i--)},removeRecordsFromResults:function(e){var t;for(t=0;t<e.length;t++)this.removeRecordsByItem(e[t])},removeRecordsByItem:function(e){var t,i,n,r,s=this;if(e.children&&s.removeRecordsFromResults(e.children),n=s.isLeftAxis?(r=s.matrix.results.get(e.key,s.matrix.grandTotalKey),s.matrix.results.getByLeftKey(s.matrix.grandTotalKey)):(r=s.matrix.results.get(s.matrix.grandTotalKey,e.key),s.matrix.results.getByTopKey(s.matrix.grandTotalKey)),r){for(i=0;i<n.length;i++)s.removeItemsFromArray(n[i].records,r.records);for((t=e.key.split(s.matrix.keysSeparator)).length=t.length-1;0<t.length;){for(n=s.isLeftAxis?s.matrix.results.getByLeftKey(t.join(s.matrix.keysSeparator)):s.matrix.results.getByTopKey(t.join(s.matrix.keysSeparator)),i=0;i<n.length;i++)s.removeItemsFromArray(n[i].records,r.records);t.length=t.length-1}}}}),Ext.define("Ext.pivot.feature.PivotStore",{config:{store:null,grid:null,matrix:null,clsGrandTotal:"",clsGroupTotal:""},totalRowEvent:"pivottotal",groupRowEvent:"pivotgroup",itemRowEvent:"pivotitem",constructor:function(e){return this.initConfig(e),this.callParent(arguments)},destroy:function(){Ext.destroy(this.storeListeners,this.matrixListeners),this.setConfig({store:null,matrix:null,grid:null}),this.storeInfo=this.storeListeners=null,this.callParent(arguments)},updateStore:function(e){Ext.destroy(this.storeListeners),e&&(this.storeListeners=e.on({pivotstoreremodel:this.processStore,scope:this,destroyable:!0}))},updateMatrix:function(e){Ext.destroy(this.matrixListeners),e&&(this.matrixListeners=e.on({groupexpand:this.onGroupExpand,groupcollapse:this.onGroupCollapse,scope:this,destroyable:!0}))},processStore:function(){var e,t,i,n,r,s=this.getStore(),o=this.getMatrix(),a=[];if(o&&s){for(r=o.getColumns(),s.suspendEvents(),s.model.replaceFields(r,!0),this.storeInfo={},"first"===o.rowGrandTotalsPosition&&a.push.apply(a,this.processGrandTotal()||[]),t=(e=o.leftAxis.getTree()).length,i=0;i<t;i++)n=e[i],a.push.apply(a,this.processGroup({group:n,previousExpanded:0<i&&e[i-1].expanded})||[]);"last"===o.rowGrandTotalsPosition&&a.push.apply(a,this.processGrandTotal()||[]),s.loadData(a),s.resumeEvents(),s.fireEvent("refresh",s)}},processGroup:function(e){var t=this["processGroup"+Ext.String.capitalize(this.getMatrix().viewLayoutType)];return Ext.isFunction(t)||(t=this.processGroupOutline),t.call(this,e)},processGrandTotal:function(){var e,t,i,n,r,s,o,a=!1,l=this.getMatrix(),c={key:l.grandTotalKey},u=[],d=l.totals.length,h=l.leftAxis.dimensions.items,f=h.length;for(e=0;e<d;e++)if(i=f,(s=(n=l.totals[e]).record)&&s.isModel){for(this.storeInfo[s.internalId]={leftKey:c.key,rowStyle:"",rowClasses:[this.getClsGrandTotal()],rowEvent:this.totalRowEvent,rendererParams:{}},t=0;t<f;t++)r=h[t],"compact"===l.viewLayoutType||0===t?("compact"===l.viewLayoutType?(o=l.compactViewKey,i=1):o=r.getId(),s.data[o]=n.title,this.storeInfo[s.internalId].rendererParams[o]={fn:"groupOutlineRenderer",group:c,colspan:i,hidden:!1,subtotalRow:!0},a=!0):(this.storeInfo[s.internalId].rendererParams[r.id]={fn:"groupOutlineRenderer",group:c,colspan:0,hidden:a,subtotalRow:!0},i--);this.storeInfo[s.internalId].rendererParams.topaxis={fn:"topAxisRenderer"},u.push(s)}return u},processGroupOutline:function(e){var t=e.group,i=[];return t.record?this.processRecordOutline({results:i,group:t}):this.processGroupOutlineWithChildren({results:i,group:t,previousExpanded:e.previousExpanded}),i},processGroupOutlineWithChildren:function(e){var t,i,n,r,s=this.getMatrix(),o=e.group,a=e.previousExpanded;if(t=!o.expanded||o.expanded&&"first"===s.rowSubTotalsPosition,i=o.expanded?o.records.expanded:o.records.collapsed,this.processGroupHeaderRecordOutline({results:e.results,group:o,record:i,previousExpanded:a,hasSummaryData:t}),o.expanded){if(o.children)for(r=o.children.length,n=0;n<r;n++)o.children[n].children?this.processGroupOutlineWithChildren({results:e.results,group:o.children[n]}):this.processRecordOutline({results:e.results,group:o.children[n]});"last"===s.rowSubTotalsPosition&&(i=o.records.footer,this.processGroupHeaderRecordOutline({results:e.results,group:o,record:i,previousExpanded:a,subtotalRow:!0,hasSummaryData:!0}))}},processGroupHeaderRecordOutline:function(e){var t,i,n=this.getMatrix(),r=e.group,s=e.record,o=e.previousExpanded,a=e.subtotalRow,l=e.hasSummaryData,c=n.leftAxis.dimensions.items,u=c.length,d=u,h=!1;for(this.storeInfo[s.internalId]={leftKey:r.key,rowStyle:"",rowClasses:[this.getClsGroupTotal()],rowEvent:this.groupRowEvent,rendererParams:{}},t=0;t<u;t++)(i=c[t]).id===r.dimension.id?(this.storeInfo[s.internalId].rendererParams[i.id]={fn:"groupOutlineRenderer",group:r,colspan:d,hidden:!1,previousExpanded:o,subtotalRow:a},h=!0):(this.storeInfo[s.internalId].rendererParams[i.id]={fn:"groupOutlineRenderer",group:r,colspan:0,hidden:h,previousExpanded:o,subtotalRow:a},d--);this.storeInfo[s.internalId].rendererParams.topaxis={fn:l?"topAxisRenderer":"topAxisNoRenderer",group:r},e.results.push(s)},processRecordOutline:function(e){var t,i,n=e.group,r=!1,s=n.record,o=this.getMatrix().leftAxis.dimensions.items,a=o.length;for(this.storeInfo[s.internalId]={leftKey:n.key,rowStyle:"",rowClasses:[],rowEvent:this.itemRowEvent,rendererParams:{}},t=0;t<a;t++)(i=o[t]).id===n.dimension.id&&(r=!0),this.storeInfo[s.internalId].rendererParams[i.id]={fn:"recordOutlineRenderer",group:n,hidden:!r};this.storeInfo[s.internalId].rendererParams.topaxis={fn:"topAxisRenderer",group:n},e.results.push(s)},processGroupCompact:function(e){var t=e.group,i=e.previousExpanded,n=[];return t.record?this.processRecordCompact({results:n,group:t}):this.processGroupCompactWithChildren({results:n,group:t,previousExpanded:i}),n},processGroupCompactWithChildren:function(e){var t,i,n,r=this.getMatrix(),s=e.group,o=e.previousExpanded;if(t=!s.expanded||s.expanded&&"first"===r.rowSubTotalsPosition,this.processGroupHeaderRecordCompact({results:e.results,group:s,record:s.expanded?s.records.expanded:s.records.collapsed,previousExpanded:o,hasSummaryData:t}),s.expanded){if(s.children)for(n=s.children.length,i=0;i<n;i++)s.children[i].children?this.processGroupCompactWithChildren({results:e.results,group:s.children[i]}):this.processRecordCompact({results:e.results,group:s.children[i]});"last"===r.rowSubTotalsPosition&&this.processGroupHeaderRecordCompact({results:e.results,group:s,record:s.records.footer,previousExpanded:o,subtotalRow:!0,hasSummaryData:!0})}},processGroupHeaderRecordCompact:function(e){var t=this.getMatrix(),i=e.group,n=e.record,r=e.previousExpanded,s=e.subtotalRow,o=e.hasSummaryData;this.storeInfo[n.internalId]={leftKey:i.key,rowStyle:"",rowClasses:[this.getClsGroupTotal()],rowEvent:this.groupRowEvent,rendererParams:{}},this.storeInfo[n.internalId].rendererParams[t.compactViewKey]={fn:"groupCompactRenderer",group:i,colspan:0,previousExpanded:r,subtotalRow:s},this.storeInfo[n.internalId].rendererParams.topaxis={fn:o?"topAxisRenderer":"topAxisNoRenderer",group:i},e.results.push(n)},processRecordCompact:function(e){var t=e.group,i=t.record;this.storeInfo[i.internalId]={leftKey:t.key,rowStyle:"",rowClasses:[],rowEvent:this.itemRowEvent,rendererParams:{}},this.storeInfo[i.internalId].rendererParams[this.getMatrix().compactViewKey]={fn:"recordCompactRenderer",group:t},this.storeInfo[i.internalId].rendererParams.topaxis={fn:"topAxisRenderer",group:t},e.results.push(i)},processGroupTabular:function(e){var t=e.group,i=[];return t.record?this.processRecordTabular({results:i,group:t}):this.processGroupTabularWithChildren({results:i,group:t,previousExpanded:e.previousExpanded}),i},processGroupTabularWithChildren:function(e,t){var i,n,r,s,o=this.getMatrix(),a=e.group,l=e.previousExpanded;if(t||this.processGroupHeaderRecordTabular({results:e.results,group:a,previousExpanded:l,hasSummaryData:!a.expanded}),a.expanded){if(a.children)for(s=a.children.length,n=0;n<s;n++)r=a.children[n],0===n&&r.children&&r.expanded?this.processGroupTabularWithChildren({results:e.results,group:r},!0):0<n&&(r.children?this.processGroupTabularWithChildren({results:e.results,group:r}):this.processRecordTabular({results:e.results,group:r}));"none"!==o.rowSubTotalsPosition&&(i=a.records.footer,this.processGroupHeaderRecordTabular({results:e.results,group:a,record:i,previousExpanded:l,subtotalRow:!0,hasSummaryData:!0}))}},getTabularGroupRecord:function(e){var t=e.record;return t=t||(e.expanded?this.getTabularGroupRecord(e.children[0]):e.records.collapsed)},processGroupHeaderRecordTabular:function(e){var t,i,n,r,s,o,a=this.getMatrix(),l=e.group,c=e.record,u=e.previousExpanded,d=e.subtotalRow,h=e.hasSummaryData,f=a.leftAxis.dimensions.length,g=f,p=!1,m={},x=[],y=this.itemRowEvent;if(c){for(t=0;t<f;t++)m[(i=a.leftAxis.dimensions.items[t]).id]={fn:"groupTabularRenderer",group:l,colspan:0,hidden:!1,previousExpanded:u,subtotalRow:d},i.id===l.dimension.id?(m[i.id].colspan=g,p=!0):(m[i.id].hidden=p,g--);n=l}else{for(c=(n=l).record;!c;)m[n.dimension.id]={fn:"groupTabularRenderer",group:n,colspan:0,hidden:!1,previousExpanded:u,subtotalRow:d},n.children?n.expanded?n=n.children[0]:(c=n.records.collapsed,m[n.dimension.id].colspan=f-n.level):c=n.record;for(p=!1,t=0;t<f;t++)m[(i=a.leftAxis.dimensions.items[t]).id]?(c.data[i.id]=m[i.id].group.name,p=!0):p?m[i.id]={fn:"groupTabularRenderer",group:l,colspan:0,hidden:!0,previousExpanded:u,subtotalRow:d}:c.data[i.id]="";if(0<l.level)for((r=(o=l).key.split(a.keysSeparator)).length--,s=a.leftAxis.items.getByKey(r.join(a.keysSeparator));s&&s.children[0]===o;)m[s.dimension.id]={fn:"groupTabularRenderer",group:s,colspan:0,hidden:!1,previousExpanded:u,subtotalRow:d},c.data[s.dimension.id]=s.name,(r=(o=s).key.split(a.keysSeparator)).length--,s=a.leftAxis.items.getByKey(r.join(a.keysSeparator))}h&&(x.push(this.getClsGroupTotal()),y=this.groupRowEvent),this.storeInfo[c.internalId]={leftKey:l.key,rowStyle:"",rowClasses:x,rowEvent:y,rendererParams:m},this.storeInfo[c.internalId].rendererParams.topaxis={fn:"topAxisRenderer",group:n},e.results.push(c)},processRecordTabular:function(e){var t,i,n=e.group,r=!1,s=n.record,o=this.getMatrix().leftAxis.dimensions.items,a=o.length;for(this.storeInfo[s.internalId]={leftKey:n.key,rowStyle:"",rowClasses:[],rowEvent:this.itemRowEvent,rendererParams:{}},t=0;t<a;t++)(i=o[t]).id===n.dimension.id?r=!0:s.data[i.id]=null,this.storeInfo[s.internalId].rendererParams[i.id]={fn:"recordTabularRenderer",group:n,hidden:!r};this.storeInfo[s.internalId].rendererParams.topaxis={fn:"topAxisRenderer",group:n},e.results.push(s)},doExpandCollapse:function(e,t){var i,n=this.getGrid();(i=this.getMatrix().leftAxis.findTreeElement("key",e))&&(this.doExpandCollapseInternal(i.node,t),n.fireEvent(i.node.expanded?"pivotgroupexpand":"pivotgroupcollapse",n,"row",i.node))},doExpandCollapseInternal:function(e,t){var i,n,r,s=this.getStore(),o=Ext.isClassic;e.expanded=!e.expanded,n=this.processGroup({group:e,previousExpanded:!1}),e.expanded=!e.expanded,(i=this.processGroup({group:e,previousExpanded:!1})).length&&n.length&&-1!==(r=s.indexOf(n[0]))&&(s.suspendEvents(),e.expanded?s.remove(s.getAt(r)):s.remove(n),s.insert(r,i),this.removeStoreInfoData(n),s.resumeEvents(),o?s.fireEvent("replace",s,r,n,i):s.fireEvent("refresh",s))},removeStoreInfoData:function(e){var t,i,n=e.length;for(i=0;i<n;i++)t=e[i],this.storeInfo[t.internalId]&&delete this.storeInfo[t.internalId]},onGroupExpand:function(e,t,i){"row"===t&&(i?this.doExpandCollapseInternal(i,i.records.collapsed):this.processStore())},onGroupCollapse:function(e,t,i){"row"===t&&(i?this.doExpandCollapseInternal(i,i.records.expanded):this.processStore())}}),Ext.define("Ext.pivot.result.Base",{alias:"pivotresult.base",mixins:[Ext.mixin.Factoryable],leftKey:"",topKey:"",dirty:!1,values:null,matrix:null,constructor:function(e){return Ext.apply(this,e||{}),this.values={},this.callParent(arguments)},destroy:function(){return this.matrix=this.values=null,this.leftAxisItem=this.topAxisItem=null,this.callParent(arguments)},calculate:Ext.emptyFn,calculateByFn:Ext.emptyFn,addValue:function(e,t){this.values[e]=t},getValue:function(e){return this.values[e]},hasValue:function(e){return e in this.values},getLeftAxisItem:function(){return this.matrix.leftAxis.items.getByKey(this.leftKey)},getTopAxisItem:function(){return this.matrix.topAxis.items.getByKey(this.topKey)}}),Ext.define("Ext.pivot.result.Collection",{alternateClassName:["Mz.aggregate.matrix.Results"],resultType:"base",items:null,matrix:null,constructor:function(e){return Ext.apply(this,e||{}),this.items=new Ext.pivot.MixedCollection,this.items.getKey=function(e){return e.leftKey+"/"+e.topKey},this.callParent(arguments)},destroy:function(){Ext.destroy(this.items),this.matrix=this.items=null,this.callParent(arguments)},clear:function(){this.items.clear()},add:function(e,t){var i=this.get(e,t);return i=i||this.items.add(Ext.Factory.pivotresult({type:this.resultType,leftKey:e,topKey:t,matrix:this.matrix}))},get:function(e,t){return this.items.getByKey(e+"/"+t)},remove:function(e,t){this.items.removeAtKey(e+"/"+t)},getByLeftKey:function(n){return this.items.filterBy(function(e,t){var i=String(t).split("/");return n===i[0]}).getRange()},getByTopKey:function(n){return this.items.filterBy(function(e,t){var i=String(t).split("/");return 1<i.length&&n===i[1]}).getRange()},calculate:function(){var e,t=this.items.getCount();for(e=0;e<t;e++)this.items.getAt(e).calculate()}}),Ext.define("Ext.pivot.matrix.Base",{alternateClassName:["Mz.aggregate.matrix.Abstract"],extend:Ext.util.Observable,alias:"pivotmatrix.base",mixins:[Ext.mixin.Factoryable],resultType:"base",leftAxisType:"base",topAxisType:"base",textRowLabels:"Row labels",textTotalTpl:"Total ({name})",textGrandTotalTpl:"Grand total",keysSeparator:"#_#",grandTotalKey:"grandtotal",compactViewKey:"_compactview_",compactViewColumnWidth:200,viewLayoutType:"outline",rowSubTotalsPosition:"first",rowGrandTotalsPosition:"last",colSubTotalsPosition:"last",colGrandTotalsPosition:"last",showZeroAsBlank:!1,calculateAsExcel:!1,leftAxis:null,topAxis:null,aggregate:null,results:null,pivotStore:null,isDestroyed:!1,cmp:null,useNaturalSorting:!1,collapsibleRows:!0,collapsibleColumns:!0,isPivotMatrix:!0,serializeProperties:["viewLayoutType","rowSubTotalsPosition","rowGrandTotalsPosition","colSubTotalsPosition","colGrandTotalsPosition","showZeroAsBlank","collapsibleRows","collapsibleColumns"],constructor:function(e){var t=this.callParent(arguments);return this.initialize(!0,e),t},destroy:function(){var e=this;e.delayedTask.cancel(),e.delayedTask=null,Ext.isFunction(e.onDestroy)&&e.onDestroy(),Ext.destroy(e.results,e.leftAxis,e.topAxis,e.aggregate,e.pivotStore),e.results=e.leftAxis=e.topAxis=e.aggregate=e.pivotStore=null,Ext.isArray(e.columns)&&(e.columns.length=0),Ext.isArray(e.model)&&(e.model.length=0),Ext.isArray(e.totals)&&(e.totals.length=0),e.columns=e.model=e.totals=e.keysMap=e.cmp=e.modelInfo=null,e.isDestroyed=!0,e.callParent(arguments)},getKey:function(e){return this.keysMap=this.keysMap||{},Ext.isDefined(this.keysMap[e])||(this.keysMap[e]=Ext.id()),this.keysMap[e]},naturalSort:function(){function g(e,t){return(!(e=e||"").match(n)||1===t)&&parseFloat(e)||e.replace(i," ").replace(m,"")||0}var p=/(^([+\\-]?(?:\\d*)(?:\\.\\d*)?(?:[eE][+\\-]?\\d+)?)?$|^0x[\\da-fA-F]+$|\\d+)/g,m=/^\\s+|\\s+$/g,i=/\\s+/g,x=/(^([\\w ]+,?[\\w ]+)?[\\w ]+,?[\\w ]+\\d+:\\d+(:\\d+)?[\\w ]?|^\\d{1,4}[\\/\\-]\\d{1,4}[\\/\\-]\\d{1,4}|^\\w+, \\w+ \\d+, \\d{4})/,y=/^0x[0-9a-f]+$/i,n=/^0/;return function(e,t){var i,n,r,s,o,a,l=String(e instanceof Date?e.getTime():e||"").replace(m,""),c=String(t instanceof Date?t.getTime():t||"").replace(m,""),u=l.replace(p,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),d=c.replace(p,"\\0$1\\0").replace(/\\0$/,"").replace(/^\\0/,"").split("\\0"),h=parseInt(l.match(y),16)||1!==u.length&&Date.parse(l),f=parseInt(c.match(y),16)||h&&c.match(x)&&Date.parse(c)||null;if(f){if(h<f)return-1;if(f<h)return 1}for(r=0,s=u.length,o=d.length,a=Math.max(s,o);r<a;r++){if(i=g(u[r],s),n=g(d[r],o),isNaN(i)!==isNaN(n))return isNaN(i)?1:-1;if(typeof i!=typeof n&&(i+="",n+=""),i<n)return-1;if(n<i)return 1}return 0}}(),initialize:function(e,t){var i,n=this,r=n.serializeProperties;for(t=t||{},n.initResults(),(e||t.aggregate)&&n.initAggregates(t.aggregate||[]),(e||t.leftAxis)&&n.initLeftAxis(t.leftAxis||[]),(e||t.topAxis)&&n.initTopAxis(t.topAxis||[]),i=0;i<r.length;i++)Ext.isDefined(t[r[i]])&&(n[r[i]]=t[r[i]]);n.totals=[],n.modelInfo={},n.keysMap=null,e||(n.collapsibleRows||n.leftAxis.expandAll(),n.collapsibleColumns||n.topAxis.expandAll()),e&&(n.pivotStore=new Ext.data.ArrayStore({autoDestroy:!1,fields:[]}),n.delayedTask=new Ext.util.DelayedTask(n.startProcess,n),Ext.isFunction(n.onInitialize)&&n.onInitialize()),n.delayedTask.delay(5)},onInitialize:Ext.emptyFn,onDestroy:Ext.emptyFn,reconfigure:function(e){var t=Ext.clone(e||{});!1!==this.fireEvent("beforereconfigure",this,t)?(Ext.isFunction(this.onReconfigure)&&this.onReconfigure(t),this.fireEvent("reconfigure",this,t),this.initialize(!1,t),this.clearData()):this.delayedTask.cancel()},onReconfigure:Ext.emptyFn,serialize:function(){var e,t,i=this.serializeProperties,n=i.length,r={};for(e=0;e<n;e++)r[t=i[e]]=this[t];return r.leftAxis=this.serializeDimensions(this.leftAxis.dimensions),r.topAxis=this.serializeDimensions(this.topAxis.dimensions),r.aggregate=this.serializeDimensions(this.aggregate),r},serializeDimensions:function(e){var t,i=e.getCount(),n=[];for(t=0;t<i;t++)n.push(e.getAt(t).serialize());return n},initResults:function(){Ext.destroy(this.results),this.results=new Ext.pivot.result.Collection({resultType:this.resultType,matrix:this})},initAggregates:function(e){var t,i;if(Ext.destroy(this.aggregate),this.aggregate=new Ext.pivot.MixedCollection,this.aggregate.getKey=function(e){return e.getId()},!Ext.isEmpty(e))for(e=Ext.Array.from(e),t=0;t<e.length;t++)(i=e[t]).isInstance||(Ext.applyIf(i,{isAggregate:!0,align:"right",showZeroAsBlank:this.showZeroAsBlank}),i=new Ext.pivot.dimension.Item(i)),(i.matrix=this).aggregate.add(i)},initLeftAxis:function(e){e=Ext.Array.from(e||[]),Ext.destroy(this.leftAxis),this.leftAxis=Ext.Factory.pivotaxis({type:this.leftAxisType,matrix:this,dimensions:e,isLeftAxis:!0})},initTopAxis:function(e){e=Ext.Array.from(e||[]),Ext.destroy(this.topAxis),this.topAxis=Ext.Factory.pivotaxis({type:this.topAxisType,matrix:this,dimensions:e,isLeftAxis:!1})},clearData:function(){var e=this;e.fireEvent("cleardata",e),e.leftAxis.clear(),e.topAxis.clear(),e.results.clear(),Ext.isArray(e.columns)&&(e.columns.length=0),Ext.isArray(e.model)&&(e.model.length=0),e.totals=[],e.modelInfo={},e.keysMap=null,e.pivotStore&&e.pivotStore.removeAll(!0)},startProcess:Ext.emptyFn,endProcess:function(){var e=this;e.leftAxis.getTree(),e.topAxis.getTree(),e.buildModelAndColumns(),e.buildPivotStore(),Ext.isFunction(e.onBuildStore)&&e.onBuildStore(e.pivotStore),e.fireEvent("storebuilt",e,e.pivotStore),e.fireEvent("done",e)},onBuildModel:Ext.emptyFn,onBuildColumns:Ext.emptyFn,onBuildRecord:Ext.emptyFn,onBuildTotals:Ext.emptyFn,onBuildStore:Ext.emptyFn,buildModelAndColumns:function(){var e=this;e.model=[{name:"id",type:"string"},{name:"isRowGroupHeader",type:"boolean",defaultValue:!1},{name:"isRowGroupTotal",type:"boolean",defaultValue:!1},{name:"isRowGrandTotal",type:"boolean",defaultValue:!1},{name:"leftAxisKey",type:"string",defaultValue:null}],e.internalCounter=0,e.columns=[],"compact"===e.viewLayoutType?e.generateCompactLeftAxis():e.leftAxis.dimensions.each(e.parseLeftAxisDimension,e),"first"===e.colGrandTotalsPosition&&e.columns.push(e.parseAggregateForColumn(null,{text:e.textGrandTotalTpl,grandTotal:!0})),Ext.Array.each(e.topAxis.getTree(),e.parseTopAxisItem,e),"last"===e.colGrandTotalsPosition&&e.columns.push(e.parseAggregateForColumn(null,{text:e.textGrandTotalTpl,grandTotal:!0})),Ext.isFunction(e.onBuildModel)&&e.onBuildModel(e.model),e.fireEvent("modelbuilt",e,e.model),Ext.isFunction(e.onBuildColumns)&&e.onBuildColumns(e.columns),e.fireEvent("columnsbuilt",e,e.columns)},getDefaultFieldInfo:function(e){return Ext.apply({isColGroupTotal:!1,isColGrandTotal:!1,leftAxisColumn:!1,topAxisColumn:!1,topAxisKey:null},e)},parseLeftAxisDimension:function(e){var t=e.getId();this.model.push({name:t,type:"auto"}),this.columns.push(Ext.merge({dataIndex:t,text:e.header,dimension:e,leftAxis:!0},e.column)),this.modelInfo[t]=this.getDefaultFieldInfo({leftAxisColumn:!0})},generateCompactLeftAxis:function(){this.model.push({name:this.compactViewKey,type:"auto"}),this.columns.push({dataIndex:this.compactViewKey,text:this.textRowLabels,leftAxis:!0,width:this.compactViewColumnWidth}),this.modelInfo[this.compactViewKey]=this.getDefaultFieldInfo({leftAxisColumn:!0})},parseTopAxisItem:function(e){var t,i,n,r,s,o=this,a=[],l=[];if(e.children){for("first"===o.colSubTotalsPosition&&(i=o.addColSummary(e))&&l.push(i),n=e.children.length,r=0;r<n;r++)s=o.parseTopAxisItem(e.children[r]),Ext.isArray(s)?Ext.Array.insert(a,a.length,s):a.push(s);return t={text:e.name,group:e,columns:a,key:e.key,xexpandable:!0,xgrouped:!0},0===e.level&&o.columns.push(t),l.push(t),"last"===o.colSubTotalsPosition&&(i=o.addColSummary(e))&&l.push(i),"none"===o.colSubTotalsPosition&&(i=o.addColSummary(e))&&l.push(i),l}if(a=o.parseAggregateForColumn(e,null),0!==e.level)return a;o.columns.push(a)},addColSummary:function(e){var t;return t=this.parseAggregateForColumn(e,{text:e.expanded?e.getTextTotal():e.name,group:e,subTotal:!0}),0===e.level&&this.columns.push(t),Ext.apply(t,{key:e.key,xexpandable:!0,xgrouped:!0}),t},parseAggregateForColumn:function(e,t){var i,n,r=this,s=[],o={},a=r.aggregate.getRange(),l=a.length;for(i=0;i<l;i++)n=a[i],r.internalCounter++,r.model.push({name:"c"+r.internalCounter,type:"auto",defaultValue:void 0,useNull:!0,col:e?e.key:r.grandTotalKey,agg:n.getId()}),s.push(Ext.merge({dataIndex:"c"+r.internalCounter,text:n.header,topAxis:!0,subTotal:!!t&&!0===t.subTotal,grandTotal:!!t&&!0===t.grandTotal,dimension:n},n.column)),r.modelInfo["c"+r.internalCounter]=r.getDefaultFieldInfo({isColGroupTotal:!!t&&!0===t.subTotal,isColGrandTotal:!!t&&!0===t.grandTotal,topAxisColumn:!0,topAxisKey:e?e.key:r.grandTotalKey});return 0===s.length&&0===r.aggregate.getCount()?(r.internalCounter++,o=Ext.apply({text:e?e.name:"",dataIndex:"c"+r.internalCounter},t||{})):1===s.length?(o=Ext.applyIf({text:e?e.name:""},s[0]),Ext.apply(o,t||{}),t&&t.grandTotal&&1===r.aggregate.getCount()&&(o.text=r.aggregate.getAt(0).header||t.text)):o=Ext.apply({text:e?e.name:"",columns:s},t||{}),o},buildPivotStore:function(){var e=this;Ext.isFunction(e.pivotStore.model.setFields)?e.pivotStore.model.setFields(e.model):e.pivotStore.model.replaceFields(e.model,!0),e.pivotStore.removeAll(!0),Ext.Array.each(e.leftAxis.getTree(),e.addRecordToPivotStore,e),e.addGrandTotalsToPivotStore()},addGrandTotalsToPivotStore:function(){var e,t,i,n=[];for(n.push({title:this.textGrandTotalTpl,values:this.preparePivotStoreRecordData({key:this.grandTotalKey},{isRowGrandTotal:!0})}),Ext.isFunction(this.onBuildTotals)&&this.onBuildTotals(n),this.fireEvent("buildtotals",this,n),e=n.length,t=0;t<e;t++)i=n[t],Ext.isObject(i)&&Ext.isObject(i.values)&&(Ext.applyIf(i.values,{isRowGrandTotal:!0}),this.totals.push({title:i.title||"",record:this.pivotStore.add(i.values)[0]}))},addRecordToPivotStore:function(e){var t,i,n=this;e.children?(e.records={},i="compact"===n.viewLayoutType?n.compactViewKey:e.dimensionId,e.records.collapsed=n.pivotStore.add(n.preparePivotStoreRecordData(e,{isRowGroupHeader:!0,isRowGroupTotal:!0}))[0],"first"===n.rowSubTotalsPosition&&"tabular"!==n.viewLayoutType?e.records.expanded=n.pivotStore.add(n.preparePivotStoreRecordData(e,{isRowGroupHeader:!0}))[0]:(t={},(t=n.preparePivotStoreRecordData(e,{isRowGroupHeader:!0}))[i]=e.name,e.records.expanded=n.pivotStore.add(t)[0],"last"!==n.rowSubTotalsPosition&&"tabular"!==n.viewLayoutType||((t=n.preparePivotStoreRecordData(e,{isRowGroupTotal:!0}))[i]=e.getTextTotal(),e.records.footer=n.pivotStore.add(t)[0])),Ext.Array.each(e.children,n.addRecordToPivotStore,n)):(t=n.pivotStore.add(n.preparePivotStoreRecordData(e))[0],e.record=t,Ext.isFunction(n.onBuildRecord)&&n.onBuildRecord(t,e),n.fireEvent("recordbuilt",n,t,e))},preparePivotStoreRecordData:function(e,t){var i,n,r,s={},o=this.model.length;if(e){for(e.dimensionId&&(s[e.dimensionId]=e.name),s.leftAxisKey=e.key,i=0;i<o;i++)(n=this.model[i]).col&&n.agg&&(r=this.results.items.map[e.key+"/"+n.col],s[n.name]=r?r.values[n.agg]:null);"compact"===this.viewLayoutType&&(s[this.compactViewKey]=e.name)}return Ext.applyIf(s,t)},getColumns:function(){return this.model},getColumnHeaders:function(){return this.model||this.buildModelAndColumns(),this.columns},isGroupRow:function(e){var t=this.leftAxis.findTreeElement("key",e);return!!t&&(t.node.children&&0===t.node.children.length?0:t.level)},isGroupCol:function(e){var t=this.topAxis.findTreeElement("key",e);return!!t&&(t.node.children&&0===t.node.children.length?0:t.level)},deprecated:{"6.0":{properties:{mztype:"type",mztypeLeftAxis:"leftAxisType",mztypeTopAxis:"topAxisType"}}}}),Ext.define("Ext.pivot.result.Local",{extend:Ext.pivot.result.Base,alias:"pivotresult.local",alternateClassName:["Mz.aggregate.matrix.Result"],records:null,constructor:function(e){return this.records=[],this.callParent(arguments)},destroy:function(){return this.records.length=0,this.records=null,this.callParent(arguments)},calculate:function(){var e,t,i=this.matrix.aggregate.getCount();for(e=0;e<i;e++)t=this.matrix.aggregate.getAt(e),this.addValue(t.getId(),Ext.callback(t.aggregatorFn,t.getScope()||"self.controller",[this.records,t.dataIndex,this.matrix,this.leftKey,this.topKey],0,this.matrix.cmp))},calculateByFn:function(e,t,i){var n;return Ext.isString(i)&&(i=Ext.pivot.Aggregators[i]),Ext.isFunction(i)||Ext.raise("Invalid function provided!"),n=i(this.records,t,this.matrix,this.leftKey,this.topKey),this.addValue(e,n),n},addRecord:function(e){this.records.push(e)},removeRecord:function(e){Ext.Array.remove(this.records,e)}}),Ext.define("Ext.pivot.matrix.Local",{alternateClassName:["Mz.aggregate.matrix.Local"],extend:Ext.pivot.matrix.Base,alias:"pivotmatrix.local",isLocalMatrix:!0,resultType:"local",leftAxisType:"local",topAxisType:"local",store:null,recordsPerJob:1e3,timeBetweenJobs:2,onInitialize:function(){var e=this;e.localDelayedTask=new Ext.util.DelayedTask(e.delayedProcess,e),e.storeCleanDelayedTask=new Ext.util.DelayedTask(e.onOriginalStoreCleanDelayed,e),e.storeChangedDelayedTask=new Ext.util.DelayedTask(e.onOriginalStoreChangedDelayed,e),e.initializeStore({store:e.store}),e.callParent(arguments)},initializeStore:function(e){var t,i,n=this;n.processedRecords={},e.store?i=e.store:n.store&&(n.store.isStore&&!n.storeListeners?t=n.store:i=n.store),i&&(t=Ext.getStore(i||""),Ext.isEmpty(t)&&Ext.isString(i)&&(t=Ext.create(i))),t&&t.isStore&&(Ext.destroy(n.storeListeners),n.store&&n.store.autoDestroy&&t!==n.store&&Ext.destroy(n.store),n.store=t,n.storeListeners=n.store.on({refresh:n.startProcess,beforeload:n.onOriginalStoreBeforeLoad,add:n.onOriginalStoreAdd,update:n.onOriginalStoreUpdate,remove:n.onOriginalStoreRemove,commit:n.onOriginalStoreClean,reject:n.onOriginalStoreClean,clear:n.startProcess,scope:n,destroyable:!0}),t.isLoaded()&&n.startProcess())},onReconfigure:function(e){this.initializeStore(e),this.callParent(arguments)},onDestroy:function(){var e=this;e.localDelayedTask.cancel(),e.localDelayedTask=null,e.storeCleanDelayedTask.cancel(),e.storeCleanDelayedTask=null,e.storeChangedDelayedTask.cancel(),e.storeChangedDelayedTask=null,Ext.isArray(e.records)&&(e.records.length=0),e.records=e.changedRecords=null,Ext.destroy(e.storeListeners),e.store&&e.store.isStore&&e.store.autoDestroy&&Ext.destroy(e.store),e.store=e.storeListeners=e.processedRecords=null,e.callParent(arguments)},onOriginalStoreBeforeLoad:function(e){this.fireEvent("start",this)},createStoreChangesQueue:function(){this.changedRecords=this.changedRecords||{},this.changedRecords.add=this.changedRecords.add||[],this.changedRecords.update=this.changedRecords.update||[],this.changedRecords.remove=this.changedRecords.remove||[]},dropStoreChangesQueue:function(){this.changedRecords&&(this.changedRecords.add.length=0,this.changedRecords.update.length=0,this.changedRecords.remove.length=0)},onOriginalStoreAdd:function(e,t){this.createStoreChangesQueue(),Ext.Array.insert(this.changedRecords.add,this.changedRecords.add.length,t),this.storeChangedDelayedTask.delay(100)},onOriginalStoreUpdate:function(e,t){this.createStoreChangesQueue(),Ext.Array.indexOf(this.changedRecords.add,t)<0&&Ext.Array.insert(this.changedRecords.update,this.changedRecords.update.length,[t]),this.storeChangedDelayedTask.delay(100)},onOriginalStoreRemove:function(e,t,i,n){var r,s=t.length;if(!n){for(this.createStoreChangesQueue(),r=0;r<s;r++)Ext.Array.remove(this.changedRecords.update,t[r]),Ext.Array.remove(this.changedRecords.add,t[r]);Ext.Array.insert(this.changedRecords.remove,this.changedRecords.remove.length,t),this.storeChangedDelayedTask.delay(100)}},onOriginalStoreChangedDelayed:function(){var e=this.changedRecords;this.isDestroyed||(this.storeChanged=!!(e.add.length||e.update.length||e.remove.length),this.storeChanged&&(this.onOriginalStoreAddDelayed(),this.onOriginalStoreUpdateDelayed(),this.onOriginalStoreRemoveDelayed()))},onOriginalStoreAddDelayed:function(){var e,t,i,n,r,s=[],o=!1;if(e=(i=this.changedRecords.add).length){for(t=0;t<e;t++)n=i[t],this.processRecord(n,t,e),r=this.processedRecords[n.internalId],o=o||r.left.length||r.top.length,r.left.length&&Ext.Array.insert(s,s.length,r.left);if(i.length=0,o&&(this.leftAxis.rebuildTree(),this.topAxis.rebuildTree()),e=s.length)for(t=0;t<e;t++)((r=s[t]).children&&!r.records||!r.children&&!r.record)&&this.addRecordToPivotStore(r);this.recalculateResults(this.store,i,o)}},onOriginalStoreUpdateDelayed:function(){var e,t,i,n,r,s,o,a,l,c=this,u=[],d=!1;if(e=(i=c.changedRecords.update).length){for(t=0;t<e;t++)n=i[t],s=c.processedRecords[n.internalId],c.removeRecordFromResults(n),c.processRecord(n,t,e),o=c.processedRecords[n.internalId],s&&o&&(a=Ext.Array.equals(s.left,o.left),l=Ext.Array.equals(s.top,o.top),d=d||!a||!l,a||Ext.Array.insert(u,u.length,o.left));for(i.length=0,d&&(c.leftAxis.rebuildTree(),c.topAxis.rebuildTree()),e=u.length,t=0;t<e;t++)((r=u[t]).children&&!r.records||!r.children&&!r.record)&&c.addRecordToPivotStore(r);c.recalculateResults(c.store,i,d)}},onOriginalStoreRemoveDelayed:function(){var e,t,i,n;if(e=(i=this.changedRecords.remove).length){for(t=0;t<e;t++)n=this.removeRecordFromResults(i[t])||n;i.length=0,n&&(this.leftAxis.rebuildTree(),this.topAxis.rebuildTree()),this.recalculateResults(this.store,i,n)}},onOriginalStoreClean:function(){this.localDelayedTask.id?(this.dropStoreChangesQueue(),this.storeChanged=!1):this.storeCleanDelayedTask.delay(100)},onOriginalStoreCleanDelayed:function(){var e,t,i;if(!this.isDestroyed){for(t=(e=this.pivotStore.getRange()).length,i=0;i<t;i++)e[i].commit(!0);this.storeChanged=!1,this.fireEvent("afterupdate",this,!1)}},removeRecordFromResults:function(e){var t,i,n,r,s,o,a=this,l=a.processedRecords[e.internalId],c=a.grandTotalKey,u=!1;if(!l)return u;for((t=a.results.get(c,c))&&(t.removeRecord(e),0===t.records.length&&a.results.remove(c,c)),s=l.top.length,n=0;n<s;n++)i=l.top[n],(t=a.results.get(c,i.key))&&(t.removeRecord(e),0===t.records.length&&(a.results.remove(c,i.key),a.topAxis.items.remove(i),u=!0));for(s=l.left.length,n=0;n<s;n++)for(i=l.left[n],(t=a.results.get(i.key,c))&&(t.removeRecord(e),0===t.records.length&&(a.results.remove(i.key,c),a.leftAxis.items.remove(i),u=!0)),o=l.top.length,r=0;r<o;r++)(t=a.results.get(l.left[n].key,l.top[r].key))&&(t.removeRecord(e),0===t.records.length&&a.results.remove(l.left[n].key,l.top[r].key));return u},recalculateResults:function(e,t,i){var n=this;n.fireEvent("beforeupdate",n,i),n.buildModelAndColumns(),n.results.calculate(),Ext.Array.each(n.leftAxis.getTree(),n.updateRecordToPivotStore,n),n.updateGrandTotalsToPivotStore(),n.fireEvent("afterupdate",n,i)},updateGrandTotalsToPivotStore:function(){var e,t=this,i=[];if(!(t.totals.length<=0)&&(i.push({title:t.textGrandTotalTpl,values:t.preparePivotStoreRecordData({key:t.grandTotalKey})}),Ext.isFunction(t.onBuildTotals)&&t.onBuildTotals(i),t.fireEvent("buildtotals",t,i),t.totals.length===i.length))for(e=0;e<t.totals.length;e++)Ext.isObject(i[e])&&Ext.isObject(i[e].values)&&t.totals[e].record instanceof Ext.data.Model&&(delete i[e].values.id,t.totals[e].record.set(i[e].values))},updateRecordToPivotStore:function(e){var t,i;e.children?(e.records&&(t="compact"===this.viewLayoutType?this.compactViewKey:e.dimensionId,delete(i=this.preparePivotStoreRecordData(e)).id,delete i[t],e.records.collapsed.set(i),e.records.expanded&&e.records.expanded.set(i),e.records.footer&&e.records.footer.set(i)),Ext.Array.each(e.children,this.updateRecordToPivotStore,this)):e.record&&(delete(i=this.preparePivotStoreRecordData(e)).id,e.record.set(i))},startProcess:function(){!this.store||this.store&&!this.store.isStore||this.isDestroyed||this.store.isLoading()||(this.dropStoreChangesQueue(),this.clearData(),this.localDelayedTask.delay(50))},delayedProcess:function(){this.isDestroyed||(this.fireEvent("start",this),this.records=this.store.getRange(),0!==this.records.length?(this.statusInProgress=!1,this.processRecords(0)):this.endProcess())},processRecords:function(e){var t,i=this,n=e;if(!i.isDestroyed){for(t=i.records.length,i.statusInProgress=!0;n<t&&n<e+i.recordsPerJob&&i.statusInProgress;)i.processRecord(i.records[n],n,t),n++;if(t<=n)return i.statusInProgress=!1,i.results.calculate(),i.leftAxis.buildTree(),i.topAxis.buildTree(),i.filterApplied&&i.results.calculate(),i.records=null,void i.endProcess();i.statusInProgress&&0<t&&Ext.defer(i.processRecords,i.timeBetweenJobs,i,[n])}},processRecord:function(e,t,i){var n,r,s,o,a,l,c,u,d=this,h=d.grandTotalKey;if(d.processedRecords[e.internalId]=c={left:[],top:[]},n=d.leftAxis.processRecord(e),r=d.topAxis.processRecord(e),n&&r){for(d.results.add(h,h).addRecord(e),a=r.length,s=0;s<a;s++)u=r[s],d.topAxis.addItem(u),c.top.push(d.topAxis.items.map[u.key]),d.results.add(h,u.key).addRecord(e);for(l=n.length,s=0;s<l;s++)for(u=n[s],d.leftAxis.addItem(u),c.left.push(d.leftAxis.items.map[u.key]),d.results.add(u.key,h).addRecord(e),o=0;o<a;o++)d.results.add(u.key,r[o].key).addRecord(e)}d.fireEvent("progress",d,t+1,i)},getRecordsByRowGroup:function(e){var t,i=this.results.getByLeftKey(e),n=i.length,r=[];for(t=0;t<n;t++)Ext.Array.insert(r,r.length,i[t].records||[]);return r},getRecordsByColGroup:function(e){var t,i=this.results.getByTopKey(e),n=i.length,r=[];for(t=0;t<n;t++)Ext.Array.insert(r,r.length,i[t].records||[]);return r},getRecordsByGroups:function(e,t){var i=this.results.get(e,t);return i&&i.records||[]}}),Ext.define("Ext.pivot.matrix.Remote",{alternateClassName:["Mz.aggregate.matrix.Remote"],extend:Ext.pivot.matrix.Base,alias:"pivotmatrix.remote",isRemoteMatrix:!0,url:"",timeout:3e3,onBeforeRequest:Ext.emptyFn,onRequestException:Ext.emptyFn,onInitialize:function(){this.remoteDelayedTask=new Ext.util.DelayedTask(this.delayedProcess,this),this.callParent(arguments)},onDestroy:function(){this.remoteDelayedTask.cancel(),this.remoteDelayedTask=null,this.callParent()},startProcess:function(){Ext.isEmpty(this.url)||(this.clearData(),this.fireEvent("start",this),this.statusInProgress=!1,this.remoteDelayedTask.delay(5))},delayedProcess:function(){var e,t,i=this,n=i.serialize();!(t={keysSeparator:i.keysSeparator,grandTotalKey:i.grandTotalKey,leftAxis:n.leftAxis,topAxis:n.topAxis,aggregate:n.aggregate})!==(e=i.fireEvent("beforerequest",i,t))&&Ext.isFunction(i.onBeforeRequest)&&(e=i.onBeforeRequest(t)),!1===e?i.endProcess():Ext.Ajax.request({url:i.url,timeout:i.timeout,jsonData:t,callback:i.processRemoteResults,scope:i})},processRemoteResults:function(e,t,i){var n,r,s,o,a,l=!t,c=Ext.JSON.decode(i.responseText,!0);if(t&&(l=!c||!c.success),l)return this.fireEvent("requestexception",this,i),Ext.isFunction(this.onRequestException)&&this.onRequestException(i),void this.endProcess();for(s=(n=Ext.Array.from(c.leftAxis||[])).length,o=0;o<s;o++)r=n[o],Ext.isObject(r)&&this.leftAxis.addItem(r);for(s=(n=Ext.Array.from(c.topAxis||[])).length,o=0;o<s;o++)r=n[o],Ext.isObject(r)&&this.topAxis.addItem(r);for(s=(n=Ext.Array.from(c.results||[])).length,o=0;o<s;o++)r=n[o],Ext.isObject(r)&&(a=this.results.add(r.leftKey||"",r.topKey||""),Ext.Object.each(r.values||{},a.addValue,a));this.endProcess()}}),Ext.define("Ext.pivot.plugin.configurator.FieldSettings",{$configStrict:!1,config:{cls:"",style:null,fixed:[],allowed:["leftAxis","topAxis","aggregate"],aggregators:["sum","avg","min","max","count","countNumbers","groupSumPercentage","groupCountPercentage","variance","varianceP","stdDev","stdDevP"],renderers:{},formatters:{}},isFieldSettings:!0,constructor:function(e){return this.initConfig(e||{}),this.callParent(arguments)},getDefaultEmptyArray:function(e){var t=this["_"+e];return t||(t=[],this["set"+Ext.String.capitalize(e)](t)),t},applyArrayValues:function(e,t,i){return null==t||t&&Ext.isArray(t)?t:(t&&(i=i||this["get"+Ext.String.capitalize(e)](),Ext.Array.splice(i,0,i.length,t)),i)},getFixed:function(){return this.getDefaultEmptyArray("fixed")},applyFixed:function(e,t){return this.applyArrayValues("fixed",e,t)},getAllowed:function(){return this.getDefaultEmptyArray("allowed")},applyAllowed:function(e,t){return this.applyArrayValues("allowed",e,t)},getAggregators:function(){return this.getDefaultEmptyArray("aggregators")},applyAggregators:function(e,t){return this.applyArrayValues("aggregators",e,t)},isFixed:function(e){var t;return!!e&&(t=e.getFieldType(),0<=Ext.Array.indexOf(this.getFixed(),t))},isAllowed:function(e){var t,i=this.getFixed();return!!e&&(t=e.getFieldType(),i.length?0<=Ext.Array.indexOf(i,t):"all"===t||0<=Ext.Array.indexOf(this.getAllowed(),t))}}),Ext.define("Ext.pivot.plugin.configurator.Field",{extend:Ext.pivot.dimension.Item,config:{editor:null,settings:{}},isField:!0,clone:function(){return new Ext.pivot.plugin.configurator.Field(Ext.applyIf({id:Ext.id()},this.getInitialConfig()))},getConfiguration:function(e){var t=this.callParent([e]);return t.settings&&(t.settings=t.settings.getConfig()),t},updateAggregator:function(e,t){var i,n;this.callParent([e,t]),e&&(0===(n=(i=this.getSettings()).getAggregators()).length?Ext.Array.remove(i.getAllowed(),"aggregate"):Ext.Array.include(n,e))},getSettings:function(){var e=this.settings;return e||(e=new Ext.pivot.plugin.configurator.FieldSettings({}),this.setSettings(e)),e},applySettings:function(e,t){return null==e||e&&e.isFieldSettings?e:(e&&(t=t||this.getSettings()).setConfig(e),t&&this.setAggregator(this.getAggregator()),t)},getFieldText:function(){var e=this.getHeader();return this.isAggregate&&(e+=" ("+this.getAggText()+")"),e},getAggText:function(e){var t=Ext.pivot.Aggregators,i=e||this.getAggregator();return!Ext.isFunction(i)&&t[i+"Text"]||t.customText}}),Ext.define("Ext.pivot.cell.Cell",{extend:Ext.grid.cell.Cell,xtype:"pivotgridcell",config:{eventCell:!0,collapsible:null},outlineGroupHeaderCls:Ext.baseCSSPrefix+"pivot-grid-group-header-outline",outlineCellHiddenCls:Ext.baseCSSPrefix+"pivot-grid-outline-cell-hidden",outlineCellGroupExpandedCls:Ext.baseCSSPrefix+"pivot-grid-outline-cell-previous-expanded",compactGroupHeaderCls:Ext.baseCSSPrefix+"pivot-grid-group-header-compact",compactLayoutPadding:25,tabularGroupHeaderCls:Ext.baseCSSPrefix+"pivot-grid-group-header-tabular",encodeHtml:!1,onRender:function(){var e,t=this.dataIndex,i=this.getViewModel(),n=this.getRecord();this.callParent(),i&&t&&(e=this.row.getGrid().getMatrix(),i.setData({column:e.modelInfo[t]||{},value:this.getValue(),record:n}))},handleEvent:function(e,t){var i,n,r,s,o,a,l,c,u=this.row,d=u.getGrid(),h=this.getRecord(),f={grid:d};if(h)return n=u.getEventName()||"",i=u.getRecordInfo(h),a=d.getMatrix(),r=this.getColumn(),s=(l=(l=(l=i.rendererParams[r._dataIndex])||i.rendererParams.topaxis)?l.group:null)?l.key:i.leftKey,Ext.apply(f,{cell:this,leftKey:s,leftItem:l,column:r}),this.getEventCell()&&(n+="cell",o=d.getTopAxisKey(f.column),(f.topKey=o)&&(c=(c=a.topAxis.findTreeElement("key",o))?c.node:null)&&Ext.apply(f,{topItem:c,dimensionId:c.dimensionId})),!1!==d.fireEvent(n+e,f,t)&&"tap"===e&&this.getCollapsible()&&(l.expanded?l.collapse():l.expand()),!1},updateRecord:function(e,t){var i=this.getViewModel();this.callParent([e,t]),i&&i.setData({value:this.getValue(),record:e})}}),Ext.define("Ext.pivot.cell.Group",{extend:Ext.pivot.cell.Cell,xtype:"pivotgridgroupcell",config:{innerGroupStyle:null,innerGroupCls:null,userGroupStyle:null,userGroupCls:null},innerTemplate:[{reference:"iconElement",classList:[Ext.baseCSSPrefix+"pivot-grid-group-icon",Ext.baseCSSPrefix+"font-icon"]},{reference:"groupElement",classList:[Ext.baseCSSPrefix+"pivot-grid-group-title"]}],groupCls:Ext.baseCSSPrefix+"pivot-grid-group",groupHeaderCls:Ext.baseCSSPrefix+"pivot-grid-group-header",groupHeaderCollapsibleCls:Ext.baseCSSPrefix+"pivot-grid-group-header-collapsible",groupHeaderCollapsedCls:Ext.baseCSSPrefix+"pivot-grid-group-header-collapsed",updateCellCls:function(e,t){var i="string"==typeof e?e.split(" "):Ext.Array.from(e);this.callParent([e,t]),this.setEventCell(i.indexOf(this.groupHeaderCls)<0),this.setCollapsible(0<=i.indexOf(this.groupHeaderCollapsibleCls))},updateInnerGroupStyle:function(e){this.groupElement.applyStyles(e)},updateInnerGroupCls:function(e,t){this.groupElement.replaceCls(t,e)},updateUserGroupStyle:function(e){this.groupElement.applyStyles(e)},updateUserGroupCls:function(e,t){this.groupElement.replaceCls(t,e)},updateRawValue:function(e){var t=this.groupElement.dom,i=null==e?"":e;this.getEncodeHtml()?t.textContent=i:t.innerHTML=i},updateRecord:function(e,t){var i=this.row.getRecordInfo(),n=this.dataIndex;i&&n&&((i=i.rendererParams[n])&&this[i.fn]?this[i.fn](i,this.row.getGrid()):this.setCellCls("")),this.callParent([e,t])},groupOutlineRenderer:function(e,t){var i=this,n="",r=e.group;if("compact"===t.getMatrix().viewLayoutType&&i.bodyElement.setStyle(t.isRTL()?"padding-right":"padding-left","0"),0<e.colspan)return n+=i.groupHeaderCls+" "+i.outlineGroupHeaderCls,e.subtotalRow||(r&&r.children&&r.axis.matrix.collapsibleRows&&(n+=" "+i.groupHeaderCollapsibleCls,e.group.expanded||(n+=" "+i.groupHeaderCollapsedCls)),e.previousExpanded&&(n+=" "+i.outlineCellGroupExpandedCls)),i.setCellCls(n),void i.setInnerGroupCls(i.groupCls);i.setCellCls(i.outlineCellHiddenCls)},recordOutlineRenderer:function(e,t){e.hidden?this.setCellCls(this.outlineCellHiddenCls):this.setCellCls(this.groupHeaderCls)},groupCompactRenderer:function(e,t){var i=this,n="",r=e.group;i.bodyElement.setStyle(t.isRTL()?"padding-right":"padding-left",i.compactLayoutPadding*r.level+"px"),n+=i.groupHeaderCls+" "+i.compactGroupHeaderCls,e.subtotalRow||(r&&r.children&&r.axis.matrix.collapsibleRows&&(n+=" "+i.groupHeaderCollapsibleCls,e.group.expanded||(n+=" "+i.groupHeaderCollapsedCls)),e.previousExpanded&&(n+=" "+i.outlineCellGroupExpandedCls)),i.setCellCls(n),i.setInnerGroupCls(i.groupCls)},recordCompactRenderer:function(e,t){this.bodyElement.setStyle(t.isRTL()?"padding-right":"padding-left",this.compactLayoutPadding*e.group.level+"px"),this.setCellCls(this.groupHeaderCls+" "+this.compactGroupHeaderCls)},groupTabularRenderer:function(e,t){var i="",n=e.group;i+=this.groupHeaderCls+" "+this.tabularGroupHeaderCls,e.subtotalRow||e.hidden||n&&n.children&&n.axis.matrix.collapsibleRows&&(i+=" "+this.groupHeaderCollapsibleCls,n.expanded||(i+=" "+this.groupHeaderCollapsedCls)),this.setCellCls(i),this.setInnerGroupCls(this.groupCls)},recordTabularRenderer:function(e){e.hidden?this.setCellCls(this.outlineCellHiddenCls):this.setCellCls(this.groupHeaderCls)}}),Ext.define("Ext.pivot.Row",{extend:Ext.grid.Row,xtype:"pivotgridrow",config:{recordInfo:null,rowCls:null,eventName:null},summaryDataCls:Ext.baseCSSPrefix+"pivot-summary-data",summaryRowCls:Ext.baseCSSPrefix+"pivot-grid-group-total",grandSummaryRowCls:Ext.baseCSSPrefix+"pivot-grid-grand-total",onRender:function(){var e;this.callParent(),(e=this.getViewModel())&&e.set("columns",this.getRefOwner().getMatrix().modelInfo)},destroy:function(){this.setRecordInfo(null),this.callParent()},updateRecord:function(e,t){var i;this.destroying||this.destroyed||(i=this.getRefOwner().getRecordInfo(e),this.setRecordInfo(i),i&&(this.setRowCls(i.rowClasses),this.setEventName(i.rowEvent)),this.callParent([e,t]))}}),Ext.define("Ext.pivot.Grid",{extend:Ext.grid.Grid,xtype:"pivotgrid",isPivotGrid:!0,isPivotComponent:!0,enableLoadMask:!0,enableColumnSort:!0,startRowGroupsCollapsed:!0,startColGroupsCollapsed:!0,cellSelector:"."+Ext.baseCSSPrefix+"gridcell",clsGroupTotal:Ext.baseCSSPrefix+"pivot-grid-group-total",clsGrandTotal:Ext.baseCSSPrefix+"pivot-grid-grand-total",groupHeaderCollapsedCls:Ext.baseCSSPrefix+"pivot-grid-group-header-collapsed",groupHeaderCollapsibleCls:Ext.baseCSSPrefix+"pivot-grid-group-header-collapsible",summaryDataCls:Ext.baseCSSPrefix+"pivot-summary-data",groupCls:Ext.baseCSSPrefix+"pivot-grid-group",relayedMatrixEvents:["beforereconfigure","reconfigure","start","progress","done","modelbuilt","columnsbuilt","recordbuilt","buildtotals","storebuilt","groupexpand","groupcollapse","beforerequest","requestexception"],config:{matrix:{type:"local"},leftAxisCellConfig:{xtype:"pivotgridgroupcell"},topAxisCellConfig:{xtype:"pivotgridcell"}},variableHeights:!0,itemConfig:{xtype:"pivotgridrow"},classCLs:Ext.baseCSSPrefix+"pivot-grid",initialize:function(){var e=this;return e.setColumns([]),e.setStore(new Ext.data.ArrayStore({$internal:!0,fields:[]})),e.pivotDataSource=new Ext.pivot.feature.PivotStore({store:e.getStore(),grid:e,matrix:e.getMatrix(),clsGrandTotal:e.clsGrandTotal,clsGroupTotal:e.clsGroupTotal,summaryDataCls:e.summaryDataCls}),e.getHeaderContainer().on({columntap:"handleColumnTap",headergrouptap:"handleHeaderGroupTap",scope:e}),e.callParent()},destroy:function(){var e=this;Ext.destroy(e.matrixRelayedListeners,e.matrixListeners,e.headerCtListeners,e.lockedHeaderCtListeners),Ext.destroy(e.pivotDataSource),e.matrixRelayedListeners=e.matrixListeners=e.headerCtListeners=null,e.lockedHeaderCtListeners=null,e.setMatrix(null),e.callParent(),e.lastColumnSorted=e.store=Ext.destroy(e.store)},applyMatrix:function(e,t){return Ext.destroy(t),null==e?e:e&&e.isPivotMatrix?(e.cmp=this,e):(Ext.applyIf(e,{type:"local"}),e.cmp=this,Ext.Factory.pivotmatrix(e))},updateMatrix:function(e,t){var i=this;Ext.destroy(t,i.matrixListeners,i.matrixRelayedListeners),e&&(i.matrixListeners=e.on({cleardata:i.onMatrixClearData,start:i.onMatrixProcessStart,progress:i.onMatrixProcessProgress,done:i.onMatrixDataReady,afterupdate:i.onMatrixAfterUpdate,groupexpand:i.onMatrixGroupExpandCollapse,groupcollapse:i.onMatrixGroupExpandCollapse,scope:i,destroyable:!0}),i.matrixRelayedListeners=i.relayEvents(e,i.relayedMatrixEvents,"pivot"),i.pivotDataSource&&i.pivotDataSource.setMatrix(e))},refreshView:function(){this.destroyed||this.destroying||this.getStore().fireEvent("pivotstoreremodel",this)},updateHeaderContainerColumns:function(e){var t,i,n,r,s,o,a,l=this,c=[];if(e){if((s=l.getColumnForGroup(l.getHeaderContainer().innerItems,e)).found){for(n=s.item.getParent(),i=s.index,a=n.items.length,o=0;o<a;o++)(r=n.items.getAt(o)).group===e&&c.push(r);n.remove(c),t=Ext.clone(l.pivotColumns),l.preparePivotColumns(t),t=l.getVisiblePivotColumns(l.prepareVisiblePivotColumns(t),e),n.insert(i,t)}}else t=Ext.clone(l.pivotColumns),l.preparePivotColumns(t),t=l.prepareVisiblePivotColumns(t),l.setColumns(t)},getColumnForGroup:function(e,t){var i,n,r=e.length,s={found:!1,index:-1,item:null};for(i=0;i<r&&((n=e[i]).group===t?(s.found=!0,s.index=i,s.item=n):n.innerItems&&(s=this.getColumnForGroup(n.innerItems,t)),!s.found);i++);return s},onMatrixClearData:function(){this.getStore().removeAll(!0),this.setColumns([]),this.expandedItemsState||(this.lastColumnsState=null),this.sortedColumn=null},onMatrixProcessStart:function(){this.enableLoadMask&&this.setMasked({xtype:"loadmask",indicator:!0})},onMatrixProcessProgress:function(e,t,i){var n=100*(t||.1)/(i||.1);this.enableLoadMask&&this.getMasked().setMessage(Ext.util.Format.number(n,"0")+"%")},onMatrixDataReady:function(e){this.refreshMatrixData(e,!1)},onMatrixAfterUpdate:function(e,t){t?this.refreshMatrixData(e,!0):this.refreshView()},onMatrixGroupExpandCollapse:function(e,t,i){"col"===t&&this.updateHeaderContainerColumns(i)},refreshMatrixData:function(e,t){var i,n,r,s=this,o=e.getColumnHeaders(),a=!1,l=s.getTopAxisCellConfig(),c=e.leftAxis.items.items,u=e.topAxis.items.items;if(s.enableLoadMask&&s.setMasked(!1),l&&(l.zeroValue=e.showZeroAsBlank?"":"0"),!t)if(s.expandedItemsState){for(n=c.length,i=0;i<n;i++)r=c[i],0<=Ext.Array.indexOf(s.expandedItemsState.rows,r.key)&&(a=r.expanded=!0);for(n=u.length,i=0;i<n;i++)r=u[i],0<=Ext.Array.indexOf(s.expandedItemsState.cols,r.key)&&(a=r.expanded=!0);a&&(o=e.getColumnHeaders(),delete s.expandedItemsState)}else e.collapsibleRows&&s.doExpandCollapseTree(e.leftAxis.getTree(),!s.startRowGroupsCollapsed),e.collapsibleColumns&&(s.doExpandCollapseTree(e.topAxis.getTree(),!s.startColGroupsCollapsed),o=e.getColumnHeaders());s.pivotColumns=Ext.clone(o),o=Ext.clone(s.pivotColumns),s.preparePivotColumns(o),s.restorePivotColumnsState(o),o=s.prepareVisiblePivotColumns(o),s.setColumns(o),Ext.isEmpty(s.sortedColumn)||e.leftAxis.sortTreeByField(s.sortedColumn.dataIndex,s.sortedColumn.direction),s.getStore().fireEvent("pivotstoreremodel",s),Ext.isEmpty(s.sortedColumn)||s.updateColumnSortState(s.sortedColumn.dataIndex,s.sortedColumn.direction),s.lastColumnSorted=null},getVisiblePivotColumns:function(e,t){var i,n,r=[],s=e.length;for(i=0;i<s;i++)(n=e[i]).group===t&&r.push(n),n.columns&&(r=Ext.Array.merge(r,this.getVisiblePivotColumns(n.columns,t)));return r},prepareVisiblePivotColumns:function(e){var t,i,n=e.length,r=[];for(t=0;t<n;t++)(i=e[t]).hidden||r.push(i),i.columns&&(i.columns=this.prepareVisiblePivotColumns(i.columns));return r},preparePivotColumns:function(e){var t,i,n=this,r={menuDisabled:!0,sortable:!1,lockable:!1},s=e?e.length:0;for(t=0;t<s;t++)(i=e[t]).cls=i.cls||"",Ext.apply(i,r),i.leftAxis?i.cell?Ext.applyIf(i.cell,Ext.clone(n.getLeftAxisCellConfig())):Ext.apply(i,{cell:Ext.clone(n.getLeftAxisCellConfig())}):i.topAxis&&(i.cell?Ext.applyIf(i.cell,Ext.clone(n.getTopAxisCellConfig())):Ext.apply(i,{cell:Ext.clone(n.getTopAxisCellConfig())})),i.subTotal&&(i.cls=n.clsGroupTotal),i.group&&i.xgrouped&&(i.group.expanded?!i.subTotal&&this._matrix.collapsibleColumns&&(i.cls+=(Ext.isEmpty(i.cls)?"":" ")+n.groupHeaderCollapsibleCls):i.subTotal&&this._matrix.collapsibleColumns&&(i.cls+=(Ext.isEmpty(i.cls)?"":" ")+n.groupHeaderCollapsibleCls+" "+n.groupHeaderCollapsedCls),i.subTotal?i.text=i.group.expanded?i.group.getTextTotal():Ext.String.format('<div class="'+Ext.baseCSSPrefix+"pivot-grid-group-icon "+Ext.baseCSSPrefix+'font-icon"></div><div class="'+this.groupCls+'">{0}</div>',i.group.name):i.group&&(i.text=Ext.String.format('<div class="'+Ext.baseCSSPrefix+"pivot-grid-group-icon "+Ext.baseCSSPrefix+'font-icon"></div><div class="'+this.groupCls+'">{0}</div>',i.group.name)),i.xexpandable=i.subTotal?!i.group.expanded:i.group.expanded,(!i.group.expanded&&!i.subTotal||i.group.expanded&&i.subTotal&&"none"===this.getMatrix().colSubTotalsPosition)&&(i.hidden=!0)),i.grandTotal&&(i.cls=n.clsGrandTotal),Ext.isEmpty(i.columns)?(i.dimension&&(Ext.apply(i,{renderer:!!i.dimension&&i.dimension.getRenderer(),formatter:!!i.dimension&&i.dimension.getFormatter(),scope:i.dimension?i.dimension.scope:null,align:i.dimension.align}),0<i.dimension.flex?i.flex=i.flex||i.dimension.flex:i.width=i.width||i.dimension.width,i.cell=Ext.merge(i.cell,i.dimension.cellConfig)),i.cell&&i.cell.bind&&!i.cell.viewModel&&(i.cell.bind=n.processBindKey(i.cell.bind,i.dataIndex))):n.preparePivotColumns(i.columns)},processBindKey:function(e,t){var i,n,r,s;if(Ext.isString(e))return e.replace("{column","{columns."+t).replace("{value","{record."+t);if(Ext.isObject(e)?i=Ext.Object.getAllKeys(e):Ext.isArray(e)&&(i=e),i)for(r=i.length,s=0;s<r;s++)e[n=i[s]]=this.processBindKey(e[n],t);return e},reconfigurePivot:function(e){var t=this.getMatrix();e=e||{},!t||e.type&&t.type!==e.type?this.setMatrix(e):t.reconfigure(e)},doExpandCollapseTree:function(e,t){var i;for(i=0;i<e.length;i++)e[i].expanded=t,e[i].children&&this.doExpandCollapseTree(e[i].children,t)},doExpandCollapse:function(e,t,i,n){var r,s=this.getMatrix();s&&(r=("row"===e?s.leftAxis:s.topAxis).findTreeElement("key",t))&&(r=r.node,(i=Ext.isDefined(i)?i:!r.expanded)?r.expand(n):r.collapse(n))},expandRow:function(e,t){this.doExpandCollapse("row",e,!0,t)},collapseRow:function(e,t){this.doExpandCollapse("row",e,!1,t)},expandCol:function(e,t){this.doExpandCollapse("col",e,!0,t)},collapseCol:function(e,t){this.doExpandCollapse("col",e,!1,t)},expandAll:function(){this.expandAllColumns(),this.expandAllRows()},expandAllRows:function(){this.getMatrix().leftAxis.expandAll()},expandAllColumns:function(){this.getMatrix().topAxis.expandAll()},collapseAll:function(){this.collapseAllRows(),this.collapseAllColumns()},collapseAllRows:function(){this.getMatrix().leftAxis.collapseAll()},collapseAllColumns:function(){this.getMatrix().topAxis.collapseAll()},setStore:function(e){var t;!e||e&&e.$internal?this.callParent([e]):(t=this.getMatrix())&&t instanceof Ext.pivot.matrix.Local&&t.reconfigure({store:e})},getTopAxisKey:function(e){var t,i=this.getMatrix().getColumns(),n=null;if(!e)return null;for(t=0;t<i.length;t++)if(i[t].name===e.getDataIndex()){n=i[t].col;break}return n},getTopAxisItem:function(e){return this.getMatrix().topAxis.items.getByKey(this.getTopAxisKey(e))},getLeftAxisItem:function(e){var t;return e&&(t=this.pivotDataSource.storeInfo[e.internalId])?this.getMatrix().leftAxis.items.getByKey(t.leftKey):null},getStateProperties:function(){return["viewLayoutType","rowSubTotalsPosition","rowGrandTotalsPosition","colSubTotalsPosition","colGrandTotalsPosition","aggregate","leftAxis","topAxis","enableColumnSort","sortedColumn"]},getPivotColumnsState:function(){var e,t;if(!this.lastColumnsState)for(t=this.getDataIndexColumns(this.getMatrix().getColumnHeaders()),this.lastColumnsState={},e=0;e<t.length;e++)t[e].dataIndex&&(this.lastColumnsState[t[e].dataIndex]={width:t[e].width,flex:t[e].flex||0});for(t=this.getColumns(),e=0;e<t.length;e++)t[e].dataIndex&&(this.lastColumnsState[t[e].dataIndex]={width:t[e].rendered?t[e].getWidth():t[e].width,flex:t[e].flex||0});return this.lastColumnsState},getDataIndexColumns:function(e){var t,i=[];for(t=0;t<e.length;t++)e[t].dataIndex?i.push(e[t].dataIndex):Ext.isArray(e[t].columns)&&(i=Ext.Array.merge(i,this.getDataIndexColumns(e[t].columns)));return i},restorePivotColumnsState:function(e){this.parsePivotColumnsState(this.getPivotColumnsState(),e)},parsePivotColumnsState:function(e,t){var i,n;if(t)for(n=0;n<t.length;n++)(i=e[t[n].dataIndex])&&(i.flex?t[n].flex=i.flex:i.width&&(t[n].width=i.width)),this.parsePivotColumnsState(e,t[n].columns)},onChildTap:function(e){this.handleRowEvent("tap",e.event),this.callParent([e])},onChildTapHold:function(e){this.handleRowEvent("taphold",e.event),this.callParent([e])},onChildSingleTap:function(e){this.handleRowEvent("singletap",e.event),this.callParent([e])},onChildDoubleTap:function(e){this.handleRowEvent("doubletap",e.event),this.callParent([e])},handleRowEvent:function(e,t){var i,n=Ext.fly(t.getTarget(this.cellSelector)),r=this.getNavigationModel();n&&n.component&&n.component.handleEvent&&(n.component.handleEvent(e,t),r&&(i=r.getLocation())&&i.refresh())},handleColumnTap:function(e,t,i){var n;return t.xexpandable?(this.handleHeaderGroupTap(e,t,i),!1):this.enableColumnSort?(n="ASC"===t.$axisSortDirection?"DESC":"ASC",!t.leftAxis&&!t.topAxis||Ext.isEmpty(t.getDataIndex())||this.getMatrix().leftAxis.sortTreeByField(t.getDataIndex(),n)&&(t.$axisSortDirection=n,this.refreshView(),this.updateSortIndicator(t,n),i.stopEvent()),!1):void 0},updateSortIndicator:function(e,t){var i=this.lastColumnSorted;i&&(i.setSortState(null),e.topAxis&&i.leftAxis&&(i.$axisSortDirection=null)),e.setSortState(t),this.lastColumnSorted=e},handleHeaderGroupTap:function(e,t,i){return t.xexpandable&&this._matrix.collapsibleColumns&&(i.stopEvent(),this.doExpandCollapse("col",t.key)),!1},isRTL:function(){return!!Ext.isFunction(this.isLocalRtl)&&this.isLocalRtl()},getRecordInfo:function(e){return e?this.pivotDataSource.storeInfo[e.internalId]:null},onColumnRemove:function(e,t){return t===this.lastColumnSorted&&(this.lastColumnSorted=null),this.callParent([e,t])},privates:{discardMeasureRow:!0}}),Ext.define("Ext.pivot.plugin.configurator.Column",{extend:Ext.dataview.ListItem,alias:"widget.pivotconfigfield",userCls:Ext.baseCSSPrefix+"pivot-grid-config-column",filteredCls:Ext.baseCSSPrefix+"pivot-grid-config-column-filter",ascSortIconCls:Ext.baseCSSPrefix+"pivot-grid-config-column-btn-sort-asc",descSortIconCls:Ext.baseCSSPrefix+"pivot-grid-config-column-btn-sort-desc",config:{deleteCmp:{xtype:"component",cls:[Ext.baseCSSPrefix+"pivot-grid-config-column-btn",Ext.baseCSSPrefix+"pivot-grid-config-column-btn-delete"],docked:"right",hidden:!0},moveCmp:{xtype:"component",cls:[Ext.baseCSSPrefix+"pivot-grid-config-column-btn",Ext.baseCSSPrefix+"pivot-grid-config-column-btn-move"],docked:"left"},sortCmp:{xtype:"component",cls:Ext.baseCSSPrefix+"pivot-grid-config-column-btn",docked:"right",hidden:!0}},applyDeleteCmp:function(e,t){return e&&!e.isComponent&&(e=Ext.factory(e,Ext.Component,t)),e},updateDeleteCmp:function(e,t){e&&this.add(e),Ext.destroy(t)},applyMoveCmp:function(e,t){return e&&!e.isComponent&&(e=Ext.factory(e,Ext.Component,t)),e},updateMoveCmp:function(e,t){e&&this.add(e),Ext.destroy(t)},applySortCmp:function(e,t){return e&&!e.isComponent&&(e=Ext.factory(e,Ext.Component,t)),e},updateSortCmp:function(e,t){e&&this.add(e),Ext.destroy(t)},getField:function(){return this.getRecord().get("field")},updateRecord:function(e,t){var i,n=this.innerElement;this.callParent([e,t]),e&&(t&&t.get("field")&&(i=t.get("field").getSettings(),this.resetStyle(n,i.getStyle()),this.removeCls(i.getCls())),e.get("field")&&(i=e.get("field").getSettings(),n.setStyle(i.getStyle()),this.addCls(i.getCls()),this.refreshData()))},refreshData:function(){var e,t=this.getDeleteCmp(),i=this.getRecord(),n=i.get("field"),r=n.getSettings(),s=this.dataview||this.getDataview(),o=s.getFieldType?s:s.up("pivotconfigcontainer");"all"!==o.getFieldType()&&(e=r.isFixed(o),t.setHidden(e)),i.set("text",n.getFieldText()),this.updateSortCmpCls(),this.updateFilterCls()},updateFilterCls:function(){var e=this.dataview||this.getDataview();"all"!==(e.getFieldType?e:e.up("pivotconfigcontainer")).getFieldType()&&(this.getField().getFilter()?this.addCls(this.filteredCls):this.removeCls(this.filteredCls))},updateSortCmpCls:function(){var e=this.dataview||this.getDataview(),t=(e.getFieldType?e:e.up("pivotconfigcontainer")).getFieldType(),i=this.getField(),n=this.getSortCmp();"leftAxis"===t||"topAxis"===t?(n.show(),n.setUserCls(""),i.getSortable()&&("ASC"===i.getDirection()?n.setUserCls(this.ascSortIconCls):n.setUserCls(this.descSortIconCls))):n.hide()},resetStyle:function(e,t){var i,n={},r=Ext.Object.getAllKeys(t),s=r.length;for(i=0;i<s;i++)n[r[i]]=null;e.setStyle(n)},onApplyFilterSettings:function(e,t){this.getField().setFilter(t),this.updateFilterCls(),this.applyChanges()},onRemoveFilter:function(){this.getField().setFilter(null),this.updateFilterCls(),this.applyChanges()},applyChanges:function(){var e=this.dataview||this.getDataView();e&&e.applyChanges()}}),Ext.define("Ext.pivot.plugin.configurator.DragZone",{extend:Ext.drag.Source,groups:"pivotfields",proxy:{type:"placeholder",cursorOffset:[-20,30],placeholderCls:Ext.baseCSSPrefix+"pivot-drag-proxy-placeholder",validCls:Ext.baseCSSPrefix+"pivot-drag-proxy-placeholder-valid",invalidCls:Ext.baseCSSPrefix+"pivot-drag-proxy-placeholder-invalid"},handle:"."+Ext.baseCSSPrefix+"listitem",platformConfig:{phone:{activateOnLongPress:!0}},constructor:function(e){var t=e.getList();this.panel=e,this.list=t,this.callParent([{element:t.getScrollable().getElement()}])},onDragStart:function(e){var t,i=Ext.fly(e.eventTarget).up(this.getHandle());i&&i.component&&(t=i.component.getRecord(),e.setData("record",t),e.setData("sourceList",this.list),this.getProxy().setHtml(Ext.String.format('<span class="x-pivot-drag-placeholder-icon">&nbsp;</span><span>{0}</span>',t.get("text"))))}}),Ext.define("Ext.pivot.plugin.configurator.DropZone",{extend:Ext.drag.Target,groups:"pivotfields",leftIndicatorCls:Ext.baseCSSPrefix+"pivot-grid-left-indicator",rightIndicatorCls:Ext.baseCSSPrefix+"pivot-grid-right-indicator",listItemSelector:"."+Ext.baseCSSPrefix+"listitem",listSelector:"."+Ext.baseCSSPrefix+"list",constructor:function(e){var t=e.getList();this.panel=e,this.list=t,this.callParent([{element:t.getScrollable().getElement()}])},getLeftIndicator:function(){return this.leftIndicator||(this.self.prototype.leftIndicator=Ext.getBody().createChild({cls:this.leftIndicatorCls,html:"&#160;"}),this.self.prototype.indicatorWidth=this.leftIndicator.dom.offsetWidth,this.self.prototype.indicatorOffset=Math.round(this.indicatorWidth/2)),this.leftIndicator},getRightIndicator:function(){return this.rightIndicator||(this.self.prototype.rightIndicator=Ext.getBody().createChild({cls:this.rightIndicatorCls,html:"&#160;"})),this.rightIndicator},accepts:function(e){var t=e.data,i=t.record,n=t.sourceList,r=this.panel,s=r.up("pivotconfigpanel");return!i||(n.isXType("pivotconfigcontainer")||(n=n.up("pivotconfigcontainer")),i.get("field").getSettings().isAllowed(r)&&s.isAllowed(n,r,t.record))},onDragMove:function(e){e.valid?this.positionIndicator(e):this.hideIndicators()},onDragLeave:function(e){this.hideIndicators()},onDrop:function(e){var t=e.data,i=t.sourceList,n=this.panel,r=n.up("pivotconfigpanel");this.hideIndicators(),r&&(i.isXType("pivotconfigcontainer")||(i=i.up("pivotconfigcontainer")),r.dragDropField(i,n,t.record,t.position))},positionIndicator:function(e){var t,i,n,r,s,o,a,l,c,u,d=this,h=-1,f=d.getLeftIndicator(),g=d.getRightIndicator(),p=d.indicatorWidth,m=d.indicatorOffset;(t=d.getCursorElement(e,d.listItemSelector))?(c="tl",u="tr",h=(i=t.component).$dataIndex):(c="bl",u="br",h=d.list.getViewItems().length,t=(i=d.list.getItemAt(h-1))?i.element:d.getCursorElement(e,d.listSelector)),n=f.getAlignToXY(t,c),r=g.getAlignToXY(t,u),--n[0],r[0]-=p,"tl"===c&&(n[1]-=p,r[1]-=p),s=a=-m,o=(s+=t.getX())+t.getWidth(),l=(a+=t.getY())+t.getHeight(),n[0]=Ext.Number.constrain(n[0],s,o),r[0]=Ext.Number.constrain(r[0],s,o),n[1]=Ext.Number.constrain(n[1],a,l),r[1]=Ext.Number.constrain(r[1],a,l),f.show(),g.show(),f.setXY(n),g.setXY(r),e.setData("position",h)},hideIndicators:function(){this.getLeftIndicator().hide(),this.getRightIndicator().hide()},getCursorElement:function(e,t,i,n){var r=e.cursor.current,s=Ext.drag.Manager.elementFromPoint(r.x,r.y);return Ext.fly(s).up(t,i,n)}}),Ext.define("Ext.pivot.plugin.configurator.Container",{extend:Ext.Panel,alias:"widget.pivotconfigcontainer",config:{fieldType:"all",emptyText:null,store:{type:"array",fields:[{name:"text",type:"string"},{name:"field",type:"auto"}]},list:{xclass:"Ext.dataview.List",handleSorting:!1,handleFiltering:!1,isConfiguratorContainer:!0,disableSelection:!0,itemConfig:{xtype:"pivotconfigfield"},deferEmptyText:!1,touchAction:{panX:!1,pinchZoom:!1,doubleTapZoom:!1},itemRipple:!1}},layout:"fit",initialize:function(){var e=this,t=e.getList();e.callParent(),e.dragZone=new Ext.pivot.plugin.configurator.DragZone(e),e.dropZone=new Ext.pivot.plugin.configurator.DropZone(e),"all"!==e.getFieldType()&&(t.element.on({delegate:"."+Ext.baseCSSPrefix+"pivot-grid-config-column-btn",tap:e.handleColumnBtnTap,scope:e}),t.element.on({delegate:"."+Ext.baseCSSPrefix+"listitem-body-el",tap:e.handleColumnTap,scope:e}))},destroy:function(){Ext.destroyMembers(this,"storeListeners","dragZone","dropZone"),this.callParent()},updateFieldType:function(e){"all"!==e&&this.setUserCls(Ext.baseCSSPrefix+"pivot-grid-config-container")},updateEmptyText:function(e){var t=this.getList();t&&t.setEmptyText(e)},applyList:function(e,t){var i;return e&&(i=this.getStore(),e.isComponent?e.setStore(i):(e.store=i,e.emptyText=this.getEmptyText(),e=Ext.factory(e,Ext.dataview.List,t))),e},updateList:function(e){e&&this.add(e)},applyStore:function(e){return Ext.Factory.store(e)},updateStore:function(e,t){Ext.destroy(this.storeListeners),e&&(this.storeListeners=e.on({datachanged:this.applyChanges,scope:this}))},applyChanges:function(){"all"!==this.getFieldType()&&this.fireEvent("configchange",this)},addField:function(e,t){var i=this.getStore(),n=this.getFieldType(),r={};e.isAggregate="aggregate"===n,Ext.apply(r,{field:e,text:e.getFieldText()}),0<=t?i.insert(t,r):i.add(r)},removeField:function(e){this.getStore().remove(e),e.set("field",null)},moveField:function(e,t){var i=this.getStore(),n=i.indexOf(e);-1===t&&n===i.getCount()-1||(i.remove(e),0<=t?i.insert(t,e):i.add(e))},handleColumnBtnTap:function(e){var t=Ext.fly(e.currentTarget),i=t.up("."+this.getList().baseCls+"item").component,n=i.getRecord();n&&(t.hasCls(Ext.baseCSSPrefix+"pivot-grid-config-column-btn-delete")?this.fireEvent("removefield",this,i,n):t.hasCls(Ext.baseCSSPrefix+"pivot-grid-config-column-btn-tools")&&this.fireEvent("toolsbtnpressed",this,i))},handleColumnTap:function(e){var t=Ext.fly(e.currentTarget).up("."+this.getList().baseCls+"item").component;t.getRecord()&&this.fireEvent("toolsbtnpressed",this,t)}}),Ext.define("Ext.pivot.plugin.configurator.PanelController",{extend:Ext.app.ViewController,alias:"controller.pivotconfigpanel",destroy:function(){this.pivotListeners=this.matrixProperties=Ext.destroy(this.pivotListeners),this.callParent()},closeMe:function(){var e=this.getView();e.fireEvent("close",e)},cancelConfiguration:function(){this.refreshDimensions(),this.matrixProperties=null,this.closeMe()},applyConfiguration:function(){this.applyChanges().then(function(e){e.closeMe()})},showSettings:function(){var e=this.getView(),t=e.getPivot(),i=t.getMatrix().serialize(),n=e.down("#settings");delete i.leftAxis,delete i.topAxis,delete i.aggregate,!1!==t.fireEvent("beforeshowpivotsettings",e,{container:n,settings:i})&&(e.setActiveItem(n),n.setMatrixProperties(i),t.fireEvent("showpivotsettings",e,{container:n,settings:i}))},backToMainView:function(){this.getView().setActiveItem("#main")},onPivotChanged:function(e,t){Ext.destroy(this.pivotListeners),t&&(this.pivotListeners=t.getMatrix().on({done:this.onPivotDone,scope:this,destroyable:!0}))},onFieldsChanged:function(e,t){t&&this.refreshDimensions()},onBeforeApplyPivotSettings:function(e,t){var i=this.getView();return i.getPivot().fireEvent("beforeapplypivotsettings",i,{container:e,settings:t})},onApplyPivotSettings:function(e,t){var i=this.getView();return this.matrixProperties=t,this.onConfigChanged(),i.getPivot().fireEvent("applypivotsettings",i,{container:e,settings:t})},onBeforeApplyConfigFieldSettings:function(e,t){var i=this.getView();return i.getPivot().fireEvent("beforeapplyconfigfieldsettings",i,{container:e,settings:t})},onApplyConfigFieldSettings:function(e,t){var i=this.getView();return this.onConfigChanged(),i.getPivot().fireEvent("applyconfigfieldsettings",i,{container:e,settings:t})},onConfigChanged:function(){this.configurationChanged=!0},showCard:function(e,t){var i,n,r,s,o=this.getView(),a=o.getPivot(),l=t.getField().getSettings(),c=o.down("#field"),u=[];if(!1!==a.fireEvent("beforeshowconfigfieldsettings",o,{container:c,settings:l})){for(o.setActiveItem(c),c.setFieldItem(t),s=(i=this.getAggregateContainer().getStore()).getCount(),r=0;r<s;r++)n=i.getAt(r).get("field"),u.push([n.getHeader(),n.getId()]);c.getViewModel().getStore("sDimensions").loadData(u),a.fireEvent("showconfigfieldsettings",o,{container:c,settings:l})}},onRemoveField:function(e,t,i){var n=this.getView();n.dragDropField(e,n.getAllFieldsContainer(),i)},refreshDimensions:function(){var e,t,i,n,r,s,o,a,l=this,c=l.getView(),u=c.getPivot(),d=u?u.getMatrix():null;d&&(l.internalReconfiguration=!0,n=l.getAllFieldsContainer(),e=l.getTopAxisContainer(),t=l.getLeftAxisContainer(),i=l.getAggregateContainer(),n.getStore().removeAll(),e.getStore().removeAll(),t.getStore().removeAll(),i.getStore().removeAll(),a=c.getFields().clone(),r=l.getConfigFields(d.topAxis.dimensions.getRange()),s=l.getConfigFields(d.leftAxis.dimensions.getRange()),o=l.getConfigFields(d.aggregate.getRange()),l.addFieldsToConfigurator(a.getRange(),n),l.addFieldsToConfigurator(r,e),l.addFieldsToConfigurator(s,t),l.addFieldsToConfigurator(o,i),l.internalReconfiguration=!1)},onPivotDone:function(){this.internalReconfiguration?this.internalReconfiguration=!1:this.refreshDimensions()},reconfigurePivot:function(e,t){var i=this,n=i.getView(),r=n.getPivot(),s={topAxis:i.getFieldsFromContainer(i.getTopAxisContainer(),!0),leftAxis:i.getFieldsFromContainer(i.getLeftAxisContainer(),!0),aggregate:i.getFieldsFromContainer(i.getAggregateContainer(),!0)};Ext.apply(s,i.matrixProperties),!(i.internalReconfiguration=!0)!==r.fireEvent("beforeconfigchange",n,s)&&(r.getMatrix().reconfigure(s),r.fireEvent("configchange",n,s)),e(i)},getAllFieldsContainer:function(){return this.lookupReference("fieldsCt")},getLeftAxisContainer:function(){return this.lookupReference("fieldsLeftCt")},getTopAxisContainer:function(){return this.lookupReference("fieldsTopCt")},getAggregateContainer:function(){return this.lookupReference("fieldsAggCt")},applyChanges:function(){var n=this;return new Ext.Promise(function(e,t){var i=n.getView();if(n.configurationChanged){if(n.configurationChanged=!1,i.isHidden()||n.internalReconfiguration)return void t(n);Ext.asap(n.reconfigurePivot,n,[e,t])}else e(n)})},getFieldsFromContainer:function(e,t){var i,n,r=e.getStore(),s=r.getCount(),o=[];for(i=0;i<s;i++)n=r.getAt(i).get("field"),o.push(!0===t?n.getConfiguration():n);return o},addFieldsToConfigurator:function(e,t){var i,n=e.length;for(t.getStore().removeAll(),i=0;i<n;i++)t.addField(e[i],-1);t.getList().refresh()},getConfigFields:function(e){var t,i,n,r=e.length,s=this.getView().getFields(),o=[];for(t=0;t<r;t++)n=e[t],(i=s.byDataIndex.get(n.dataIndex))&&((i=i.clone()).setConfig(n.getInitialConfig()),o.push(i));return o}}),Ext.define("Ext.pivot.plugin.configurator.model.Select",{extend:Ext.data.Model,fields:[{name:"text",type:"string"},{name:"value",type:"auto"},{name:"type",type:"integer"}]}),Ext.define("Ext.pivot.plugin.configurator.store.Select",{extend:Ext.data.ArrayStore,alias:"store.pivotselect",model:"Ext.pivot.plugin.configurator.model.Select"}),Ext.define("Ext.pivot.plugin.configurator.FormController",{extend:Ext.app.ViewController,alias:"controller.pivotconfigform",init:function(e){var t=this.getViewModel();t.getStore("sSorters").loadData([[e.sortClearText,"none"],[e.sortAscText,"ASC"],[e.sortDescText,"DESC"]]),t.getStore("sFilters").loadData([[e.clearFilterText,"none"],[e.labelFiltersText,"label"],[e.valueFiltersText,"value"],[e.top10FiltersText,"top10"]]),t.getStore("sTopOrder").loadData([[e.topOrderTopText,"top"],[e.topOrderBottomText,"bottom"]]),t.getStore("sTopType").loadData([[e.topTypeItemsText,"items"],[e.topTypePercentText,"percent"],[e.topTypeSumText,"sum"]]),t.getStore("sAlign").loadData([[e.alignLeftText,"left"],[e.alignCenterText,"center"],[e.alignRightText,"right"]]),t.set("labelFilterText",e.labelFilterText),t.set("valueFilterText",e.valueFilterText),t.set("requiredMessage",e.requiredFieldText)},applySettings:function(){var e,t,i,n,r=this.getViewModel(),s=this.getView(),o=s.getFieldItem(),a=o.getField(),l=Ext.clone(r.get("form"));s.isValid()&&(l.align&&l.align.isModel&&(l.align=l.align.get("value")),a.isAggregate?((e=l.formatter&&l.formatter.isModel?l.formatter:r.getStore("sFormatters").findRecord("value",l.formatter,0,!1,!0,!0))&&(1===e.get("type")?(l.formatter=e.get("value"),l.renderer=null):(l.renderer=e.get("value"),l.formatter=null)),l.aggregator&&l.aggregator.isModel&&(l.aggregator=l.aggregator.get("value"))):((t=l.direction)&&t.isModel&&(t=t.get("value")),l.sortable="none"!==t,l.direction=t||"ASC",n=(i=l.filter).type.isModel?i.type.get("value"):i.type,i&&i.type&&"none"!==n?(i.type=n,i.operator&&i.operator.isModel&&(i.operator=i.operator.get("value")),i.dimensionId&&i.dimensionId.isModel&&(i.dimensionId=i.dimensionId.get("value")),i.topType&&i.topType.isModel&&(i.topType=i.topType.get("value")),i.topOrder&&i.topOrder.isModel&&(i.topOrder=i.topOrder.get("value")),"top10"===i.type&&(i.type="value",i.operator="top10"),"between"!==i.operator&&"not between"!==i.operator||(i.value=[i.from,i.to]),delete i.from,delete i.to,"label"===i.type&&(delete i.dimensionId,delete i.topSort,delete i.topType,delete i.topOrder)):i=null,l.filter=i),!1!==s.fireEvent("beforeapplyconfigfieldsettings",s,l)&&(a.setConfig(l),o.refreshData(),s.fireEvent("applyconfigfieldsettings",s,l),this.cancelSettings()))},cancelSettings:function(){var e=this.getView();e.setFieldItem(null),e.fireEvent("close",e)},onFieldItemChanged:function(e,t){var i,n,r,s,o,a,l,c,u,d,h,f=this.getViewModel(),g={},p=[],m=[];if(t){if(u=(i=t.getField()).getConfig(),Ext.apply(g,{dataIndex:u.dataIndex,header:u.header}),i.isAggregate){for(r=(n=i.getSettings()).getFormatters(),s=n.getRenderers(),a=(o=n.getAggregators()).length,l=0;l<a;l++)m.push([i.getAggText(o[l]),o[l]]);for(a=(c=Ext.Object.getAllKeys(r||{})).length,l=0;l<a;l++)p.push([c[l],r[c[l]],1]);for(a=(c=Ext.Object.getAllKeys(s||{})).length,l=0;l<a;l++)p.push([c[l],s[c[l]],2]);f.getStore("sFormatters").loadData(p),f.getStore("sAggregators").loadData(m),h=u.formatter,Ext.isFunction(h)&&(h=null),h||Ext.isFunction(u.renderer)||(h=u.renderer),Ext.apply(g,{formatter:h,aggregator:u.aggregator,align:u.align})}else d=u.filter,Ext.apply(g,{direction:u.sortable?u.direction:"none",filter:{type:d?"value"===d.type&&"top10"===d.operator?"top10":d.type:"none",operator:d?"value"===d.type&&"top10"===d.operator?"top10":d.operator:null,value:d?d.value:null,from:d&&Ext.isArray(d.value)?d.value[0]:null,to:d&&Ext.isArray(d.value)?d.value[1]:null,caseSensitive:!!d&&d.caseSensitive,topSort:!!d&&d.topSort,topOrder:!!d&&d.topOrder,topType:!!d&&d.topType,dimensionId:d?d.dimensionId:null}});f.set("form",g)}else f.set("form",g)},prepareOperators:function(e){var t,i=this.getView(),n=this.getViewModel();t=[[i.equalsLText,"="],[i.doesNotEqualLText,"!="],[i.greaterThanLText,">"],[i.greaterThanOrEqualToLText,">="],[i.lessThanLText,"<"],[i.lessThanOrEqualToLText,"<="],[i.betweenLText,"between"],[i.notBetweenLText,"not between"]],"label"===e&&Ext.Array.insert(t,3,[[i.beginsWithLText,"begins"],[i.doesNotBeginWithLText,"not begins"],[i.endsWithLText,"ends"],[i.doesNotEndWithLText,"not ends"],[i.containsLText,"contains"],[i.doesNotContainLText,"not contains"]]),n.getStore("sOperators").loadData(t)},onChangeFilterType:function(e,t){var i=t&&t.isModel?t.get("value"):t;"label"!==i&&"value"!==i||this.prepareOperators(i)}}),Ext.define("Ext.pivot.plugin.configurator.Form",{extend:Ext.form.Panel,xtype:"pivotconfigform",controller:"pivotconfigform",viewModel:{stores:{sFormatters:{type:"pivotselect"},sAggregators:{type:"pivotselect"},sSorters:{type:"pivotselect"},sFilters:{type:"pivotselect"},sOperators:{type:"pivotselect"},sTopOrder:{type:"pivotselect"},sTopType:{type:"pivotselect"},sDimensions:{type:"pivotselect"},sAlign:{type:"pivotselect"}},data:{requiredMessage:null,labelFilterText:null,valueFilterText:null},formulas:{filterType:{bind:{bindTo:"{form.filter.type}",deep:!0},get:function(e){return e&&e.isModel?e.get("value"):e}},filterOperator:{bind:{bindTo:"{form.filter.operator}",deep:!0},get:function(e){return e&&e.isModel?e.get("value"):e}},filterOperatorValue:{bind:'{filterCommon && !(filterOperator === "between" || filterOperator === "not between")}',get:function(e){return e}},filterOperatorBetween:{bind:'{filterCommon && (filterOperator === "between" || filterOperator === "not between")}',get:function(e){return e}},filterCommon:{bind:'{filterType === "label" || filterType === "value"}',get:function(e){return e}},filterLabel:{bind:'{filterType === "label"}',get:function(e){return e}},filterValue:{bind:'{filterType === "value"}',get:function(e){return e}},filterTop10:{bind:'{filterType === "top10"}',get:function(e){return e}}}},eventedConfig:{fieldItem:null,title:null},listeners:{fielditemchange:"onFieldItemChanged"},defaults:{xtype:"fieldset",defaults:{labelAlign:"top"}},showAnimation:{type:"slideIn",duration:250,easing:"ease-out",direction:"left"},hideAnimation:{type:"slideOut",duration:250,easing:"ease-in",direction:"right"},okText:"Ok",cancelText:"Cancel",formatText:"Format as",summarizeByText:"Summarize by",customNameText:"Custom name",sourceNameText:'The source name for this field is "{form.dataIndex}"',sortText:"Sort",filterText:"Filter",sortResultsText:"Sort results",alignText:"Align",alignLeftText:"Left",alignCenterText:"Center",alignRightText:"Right",caseSensitiveText:"Case sensitive",valueText:"Value",fromText:"From",toText:"To",labelFilterText:"Show items for which the label",valueFilterText:"Show items for which",top10FilterText:"Show",sortAscText:"Sort A to Z",sortDescText:"Sort Z to A",sortClearText:"Disable sorting",clearFilterText:"Disable filtering",labelFiltersText:"Label filters",valueFiltersText:"Value filters",top10FiltersText:"Top 10 filters",equalsLText:"equals",doesNotEqualLText:"does not equal",beginsWithLText:"begins with",doesNotBeginWithLText:"does not begin with",endsWithLText:"ends with",doesNotEndWithLText:"does not end with",containsLText:"contains",doesNotContainLText:"does not contain",greaterThanLText:"is greater than",greaterThanOrEqualToLText:"is greater than or equal to",lessThanLText:"is less than",lessThanOrEqualToLText:"is less than or equal to",betweenLText:"is between",notBetweenLText:"is not between",topOrderTopText:"Top",topOrderBottomText:"Bottom",topTypeItemsText:"Items",topTypePercentText:"Percent",topTypeSumText:"Sum",requiredFieldText:"This field is required",operatorText:"Operator",dimensionText:"Dimension",orderText:"Order",typeText:"Type",updateFieldItem:function(e){var t,i,n=this;n.removeAll(!0,!0),e&&(i=e.getField(),t=[{xtype:"titlebar",docked:"top",titleAlign:"left",bind:{title:"{form.header}"},items:[{text:n.cancelText,align:"right",ui:"alt",handler:"cancelSettings"},{text:n.okText,align:"right",ui:"alt",handler:"applySettings",margin:"0 0 0 5"}]},{bind:{instructions:n.sourceNameText},items:[{label:n.customNameText,xtype:"textfield",name:"header",required:!0,requiredMessage:n.requiredFieldText,bind:"{form.header}"}]}],i.isAggregate?t.push({items:[{label:n.alignText,xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"align",bind:{store:"{sAlign}",value:"{form.align}"}},{label:n.formatText,xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"formatter",bind:{store:"{sFormatters}",value:"{form.formatter}"}},{label:n.summarizeByText,xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"aggregator",bind:{store:"{sAggregators}",value:"{form.aggregator}"}}]}):t.push({xtype:"fieldset",items:[{label:n.sortText,labelAlign:"top",xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"sort",bind:{store:"{sSorters}",value:"{form.direction}"}},{label:n.filterText,labelAlign:"top",xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"filter",bind:{store:"{sFilters}",value:"{form.filter.type}"},listeners:{change:"onChangeFilterType"}}]},{defaults:{labelAlign:"top"},bind:{hidden:"{!filterCommon}",title:"{filterLabel ? labelFilterText : valueFilterText}"},items:[{xtype:"selectfield",autoSelect:!1,placeholder:n.dimensionText,name:"dimensionId",bind:{store:"{sDimensions}",value:"{form.filter.dimensionId}",hidden:"{!filterValue}",required:"{filterValue}",requiredMessage:"{filterValue ? requiredMessage : null}"}},{xtype:"selectfield",autoSelect:!1,placeholder:n.operatorText,name:"operator",bind:{store:"{sOperators}",value:"{form.filter.operator}",required:"{filterCommon}",requiredMessage:"{filterCommon ? requiredMessage : null}"}},{xtype:"textfield",placeholder:n.valueText,name:"value",bind:{value:"{form.filter.value}",hidden:"{filterOperatorBetween}",required:"{filterOperatorValue}",requiredMessage:"{filterOperatorValue ? requiredMessage : null}"}},{xtype:"textfield",placeholder:n.fromText,name:"from",bind:{value:"{form.filter.from}",hidden:"{filterOperatorValue}",required:"{filterOperatorBetween}",requiredMessage:"{filterOperatorBetween ? requiredMessage : null}"}},{xtype:"textfield",placeholder:n.toText,name:"to",bind:{value:"{form.filter.to}",hidden:"{filterOperatorValue}",required:"{filterOperatorBetween}",requiredMessage:"{filterOperatorBetween ? requiredMessage : null}"}},{xtype:"togglefield",label:n.caseSensitiveText,name:"caseSensitive",bind:"{form.filter.caseSensitive}"}]},{xtype:"fieldset",title:n.top10FilterText,defaults:{labelAlign:"top"},bind:{hidden:"{!filterTop10}"},items:[{xtype:"selectfield",autoSelect:!1,placeholder:n.orderText,name:"topOrder",bind:{store:"{sTopOrder}",value:"{form.filter.topOrder}",required:"{filterTop10}",requiredMessage:"{filterTop10 ? requiredMessage : null}"}},{xtype:"textfield",placeholder:n.valueText,name:"topValue",bind:{value:"{form.filter.value}",required:"{filterTop10}",requiredMessage:"{filterTop10 ? requiredMessage : null}"}},{xtype:"selectfield",autoSelect:!1,placeholder:n.typeText,name:"topType",bind:{store:"{sTopType}",value:"{form.filter.topType}",required:"{filterTop10}",requiredMessage:"{filterTop10 ? requiredMessage : null}"}},{xtype:"selectfield",autoSelect:!1,placeholder:n.dimensionText,name:"topDimensionId",bind:{store:"{sDimensions}",value:"{form.filter.dimensionId}",required:"{filterTop10}",requiredMessage:"{filterTop10 ? requiredMessage : null}"}},{xtype:"togglefield",label:n.sortResultsText,name:"topSort",bind:"{form.filter.topSort}"}]}),n.add(t))}}),Ext.define("Ext.pivot.plugin.configurator.SettingsController",{extend:Ext.app.ViewController,alias:"controller.pivotsettings",init:function(e){var t=this.getViewModel();t.getStore("sLayout").loadData([[e.outlineLayoutText,"outline"],[e.compactLayoutText,"compact"],[e.tabularLayoutText,"tabular"]]),t.getStore("sPositions").loadData([[e.firstPositionText,"first"],[e.hidePositionText,"none"],[e.lastPositionText,"last"]]),t.getStore("sYesNo").loadData([[e.yesText,!0],[e.noText,!1]])},applySettings:function(){var e,t=this.getViewModel(),i=this.getView(),n=Ext.clone(t.get("form"));for(e in n)n[e]&&n[e].isModel&&(n[e]=n[e].get("value"));!1!==i.fireEvent("beforeapplypivotsettings",i,n)&&(i.fireEvent("applypivotsettings",i,n),this.cancelSettings())},cancelSettings:function(){var e=this.getView();e.setMatrixProperties(null),e.fireEvent("close",e)},onMatrixPropertiesChanged:function(e,t){this.getViewModel().set("form",t)}}),Ext.define("Ext.pivot.plugin.configurator.Settings",{extend:Ext.form.Panel,xtype:"pivotsettings",controller:"pivotsettings",viewModel:{stores:{sLayout:{type:"pivotselect"},sPositions:{type:"pivotselect"},sYesNo:{type:"pivotselect"}}},eventedConfig:{matrixProperties:null},listeners:{matrixpropertieschange:"onMatrixPropertiesChanged"},defaults:{xtype:"fieldset",defaults:{labelAlign:"top"}},showAnimation:{type:"slideIn",duration:250,easing:"ease-out",direction:"left"},hideAnimation:{type:"slideOut",duration:250,easing:"ease-in",direction:"right"},titleText:"Settings",okText:"Ok",cancelText:"Cancel",layoutText:"Layout",outlineLayoutText:"Outline",compactLayoutText:"Compact",tabularLayoutText:"Tabular",firstPositionText:"First",hidePositionText:"Hide",lastPositionText:"Last",rowSubTotalPositionText:"Row subtotal position",columnSubTotalPositionText:"Column subtotal position",rowTotalPositionText:"Row total position",columnTotalPositionText:"Column total position",showZeroAsBlankText:"Show zero as blank",yesText:"Yes",noText:"No",updateMatrixProperties:function(e){var t,i=this;i.removeAll(!0,!0),e&&(t=[{xtype:"titlebar",docked:"top",titleAlign:"left",title:i.titleText,items:[{text:i.cancelText,align:"right",ui:"alt",handler:"cancelSettings"},{text:i.okText,align:"right",ui:"alt",handler:"applySettings",margin:"0 0 0 5"}]},{label:i.layoutText,xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"viewLayoutType",bind:{store:"{sLayout}",value:"{form.viewLayoutType}"}},{label:i.rowSubTotalPositionText,xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"rowSubTotalsPosition",bind:{store:"{sPositions}",value:"{form.rowSubTotalsPosition}"}},{label:i.columnSubTotalPositionText,xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"colSubTotalsPosition",bind:{store:"{sPositions}",value:"{form.colSubTotalsPosition}"}},{label:i.rowTotalPositionText,xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"rowGrandTotalsPosition",bind:{store:"{sPositions}",value:"{form.rowGrandTotalsPosition}"}},{label:i.columnTotalPositionText,xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"colGrandTotalsPosition",bind:{store:"{sPositions}",value:"{form.colGrandTotalsPosition}"}},{label:i.showZeroAsBlankText,xtype:"selectfield",autoSelect:!1,useClearIcon:!0,name:"showZeroAsBlank",bind:{store:"{sYesNo}",value:"{form.showZeroAsBlank}"}}],i.add(t))}}),Ext.define("Ext.pivot.plugin.configurator.Panel",{extend:Ext.Panel,alias:"widget.pivotconfigpanel",controller:"pivotconfigpanel",isPivotConfigPanel:!0,cls:Ext.baseCSSPrefix+"pivot-grid-config-panel",showAnimation:{type:"slideIn",duration:250,easing:"ease-out",direction:"left"},hideAnimation:{type:"slideOut",duration:250,easing:"ease-in",direction:"right"},panelTitle:"Configuration",panelAllFieldsText:"Drop Unused Fields Here",panelAllFieldsTitle:"All fields",panelTopFieldsText:"Drop Column Fields Here",panelTopFieldsTitle:"Column labels",panelLeftFieldsText:"Drop Row Fields Here",panelLeftFieldsTitle:"Row labels",panelAggFieldsText:"Drop Agg Fields Here",panelAggFieldsTitle:"Values",cancelText:"Cancel",okText:"Done",eventedConfig:{pivot:null,fields:null},listeners:{pivotchange:"onPivotChanged",fieldschange:"onFieldsChanged"},layout:"card",initialize:function(){return this.setup(),this.callParent()},dragDropField:function(e,t,i,n){var r,s=this.getPivot(),o=i.get("field"),a=e.getFieldType(),l=t.getFieldType(),c=this.getController(),u=c.getTopAxisContainer(),d=c.getLeftAxisContainer();if(!1!==s.fireEvent("beforemoveconfigfield",this,{fromContainer:e,toContainer:t,field:o}))if(e!==t)if("all"===l)e.removeField(i);else if("aggregate"===l)t.addField(o,n),"all"!==a&&e.removeField(i);else{if(r=this.findFieldInContainer(o,t))return;e="leftAxis"===l?(r=this.findFieldInContainer(o,u))?u:e:(r=this.findFieldInContainer(o,d))?d:e,r?(e.removeField(r),t.addField(o)):("aggregate"===a&&e.removeField(i),t.addField(o,n))}else t.moveField(i,n)},isAllowed:function(e,t,i){var n=!0,r=i.get("field"),s=e&&e.getFieldType(),o=t&&t.getFieldType();return"aggregate"!==s||"leftAxis"!==o&&"topAxis"!==o||(n=!this.findFieldInContainer(r,t)),n},findFieldInContainer:function(e,t){var i,n,r=t.getStore(),s=r.getCount();for(i=0;i<s;i++)if((n=r.getAt(i)).get("field").getDataIndex()===e.getDataIndex())return n},setup:function(){var e=this,t={configchange:"onConfigChanged",toolsbtnpressed:"showCard",removefield:"onRemoveField"};e.add([{itemId:"main",xtype:"container",layout:{type:"hbox",align:"stretch"},defaults:{flex:1},items:[{xtype:"titlebar",docked:"top",title:e.panelTitle,titleAlign:"left",items:[{xtype:"tool",type:"gear",align:"right",handler:"showSettings"},{text:e.cancelText,align:"right",ui:"alt",handler:"cancelConfiguration"},{text:e.okText,align:"right",ui:"alt",handler:"applyConfiguration",margin:"0 0 0 5"}]},{reference:"fieldsCt",xtype:"pivotconfigcontainer",title:e.panelAllFieldsTitle,emptyText:e.panelAllFieldsText,fieldType:"all",listeners:t},{xtype:"container",layout:{type:"vbox",align:"stretch"},defaults:{xtype:"pivotconfigcontainer",flex:1},items:[{reference:"fieldsAggCt",title:e.panelAggFieldsTitle,emptyText:e.panelAggFieldsText,fieldType:"aggregate",listeners:t},{reference:"fieldsLeftCt",title:e.panelLeftFieldsTitle,emptyText:e.panelLeftFieldsText,fieldType:"leftAxis",listeners:t},{reference:"fieldsTopCt",title:e.panelTopFieldsTitle,emptyText:e.panelTopFieldsText,fieldType:"topAxis",listeners:t}]}]},{itemId:"field",xtype:"pivotconfigform",listeners:{close:"backToMainView",beforeapplyconfigfieldsettings:"onBeforeApplyConfigFieldSettings",applyconfigfieldsettings:"onApplyConfigFieldSettings"}},{itemId:"settings",xtype:"pivotsettings",listeners:{close:"backToMainView",beforeapplypivotsettings:"onBeforeApplyPivotSettings",applypivotsettings:"onApplyPivotSettings"}}])},getAllFieldsContainer:function(){return this.lookup("fieldsCt")},getAllFieldsHeader:function(){return this.getAllFieldsContainer().getHeader()},setAllFieldsContainerVisible:function(e){this.getAllFieldsContainer().setHidden(!e)},getLeftAxisContainer:function(){return this.lookup("fieldsLeftCt")},getLeftAxisHeader:function(){return this.getLeftAxisContainer().getHeader()},setLeftAxisContainerVisible:function(e){this.getLeftAxisContainer().setHidden(!e)},getTopAxisContainer:function(){return this.lookup("fieldsTopCt")},getTopAxisHeader:function(){return this.getTopAxisContainer().getHeader()},setTopAxisContainerVisible:function(e){this.getTopAxisContainer().setHidden(!e)},getAggregateContainer:function(){return this.lookup("fieldsAggCt")},getAggregateHeader:function(){return this.getAggregateContainer().getHeader()},setAggregateContainerVisible:function(e){this.getAggregateContainer().setHidden(!e)}}),Ext.define("Ext.pivot.plugin.Configurator",{extend:Ext.plugin.Abstract,alias:"plugin.pivotconfigurator",config:{fields:[],width:400,panel:{lazy:!0,$value:{xtype:"pivotconfigpanel",hidden:!0,floated:!0,modal:!0,hideOnMaskTap:!0,right:0,height:"100%"}},pivot:null},init:function(e){this.setPivot(e)},destroy:function(){this.setConfig({pivot:null,panel:null}),this.callParent()},enable:function(){this.disabled=!1,this.showConfigurator()},disable:function(){this.disabled=!0,this.hideConfigurator()},applyPanel:function(e,t){return e=e&&(e.isInstance?e:Ext.create(e))},updatePanel:function(e,t){var i=this.getPivot();Ext.destroy(t,this.panelListeners),e&&(this.panelListeners=e.on({hiddenchange:"onPanelHiddenChange",close:"hideConfigurator",scope:this,destroyable:!0}),e.setConfig({pivot:i,fields:this.getFields()}),i.add(e))},onPanelHiddenChange:function(e,t){this.getPivot().fireEvent(t?"hideconfigpanel":"showconfigpanel",e)},updatePivot:function(e,t){Ext.destroy(this.pivotListeners),t&&(t.showConfigurator=t.hideConfigurator=null),e&&(e.isPivotComponent||Ext.raise("This plugin is only compatible with pivot components"),e.showConfigurator=Ext.bind(this.showConfigurator,this),e.hideConfigurator=Ext.bind(this.hideConfigurator,this),e.initialized?this.onPivotInitialized():e.on({initialize:"onPivotInitialized",single:!0,scope:this}))},getWidth:function(){var e=this.getPivot(),t=Ext.Viewport,i=100;return e&&e.element&&(i=e.element.getWidth()),t&&(i=Math.min(i,t.element.getHeight(),t.element.getWidth())),Ext.Number.constrain(this._width,100,i)},onPivotInitialized:function(){var e,t,i,n,r,s,o,a,l=this.getPivot(),c=this.getFields(),u=l.getMatrix(),d=l.getHeaderContainer&&l.getHeaderContainer(),h=[],f={},g=!1;if(0===c.length&&u instanceof Ext.pivot.matrix.Local)for(g=!0,r=(t=(e=u.store)?e.model.getFields():[]).length,s=0;s<r;s++)n=t[s].getName(),c.byDataIndex.get(n)||c.add({header:Ext.String.capitalize(n),dataIndex:n});for(r=(t=Ext.Array.merge(u.leftAxis.dimensions.getRange(),u.topAxis.dimensions.getRange(),u.aggregate.getRange())).length,s=0;s<r;s++)delete(o=t[s].getConfig()).matrix,delete o.values,delete o.id,(i=c.byDataIndex.get(o.dataIndex))?g&&(f[o.dataIndex]||(f[o.dataIndex]=0),delete o.header,f[o.dataIndex]++,h.push(o)):c.add(o);for(r=h.length,s=0;s<r;s++)1===f[(o=h[s]).dataIndex]&&(i=c.byDataIndex.get(o.dataIndex))&&(a=i.getConfig(),Ext.merge(a,o),i.setConfig(a));this.isReady=!0,this.doneSetup=!1,d&&(this.pivotListeners=d.renderElement.on({longpress:"showConfigurator",scope:this}))},hideConfigurator:function(){var e=this.getPanel();e&&e.hide()},showConfigurator:function(){var e=this.getPanel();e&&(e.setWidth(this.getWidth()),e.show())},getFields:function(){var e=this._fields;return e||(e=new Ext.util.Collection({extraKeys:{byDataIndex:"dataIndex"},decoder:function(e){return e&&e.isField?e:new Ext.pivot.plugin.configurator.Field(e||{})}}),this.setFields(e)),e},applyFields:function(e,t){return null==e||e&&e.isCollection?e:(e&&(t=t||this.getFields()).splice(0,t.length,e),t)},deprecated:{6.5:{configs:{panelWrapper:null,panelWrap:null}}}}),Ext.define("Ext.pivot.d3.HeatMap",{extend:Ext.d3.HeatMap,xtype:"pivotheatmap",padding:{top:20,right:30,bottom:20,left:80},config:{defaultFormatter:'number("0.00")',matrix:{type:"local",rowGrandTotalsPosition:"none",colGrandTotalsPosition:"none"},xAxis:{axis:{orient:"bottom"},scale:{type:"band"},step:100},yAxis:{axis:{orient:"left"},scale:{type:"band"},step:100},colorAxis:{scale:{type:"linear",range:["white","green"]}},tiles:{attr:{stroke:"green","stroke-width":1},labels:!0},legend:{docked:"bottom",padding:60,items:{count:10,slice:[1],size:{x:40,y:20}}}},destroy:function(){this.setMatrix(null),this.callParent()},applyMatrix:function(e){return e&&(e.isPivotMatrix||(e.type||(e.type="local"),e.cmp=this,e=Ext.Factory.pivotmatrix(e))),e},updateMatrix:function(e,t){Ext.destroy(t,this.matrixListeners),this.matrixListeners=null,e&&(this.matrixListeners=e.on({done:this.onMatrixDataReady,scope:this,destroyable:!0}))},updateStore:Ext.emptyFn,updateXAxis:Ext.emptyFn,updateYAxis:Ext.emptyFn,updateColorAxis:Ext.emptyFn,onMatrixDataReady:function(e){var t,i=this.getXAxis(),n=this.getYAxis(),r=this.getColorAxis(),s=e.topAxis.dimensions,o=e.leftAxis.dimensions,a=e.aggregate;s.getCount()&&i&&(t=s.getAt(0),i.setField(t.getDataIndex()),i.setTitle({text:t.getHeader()})),o.getCount()&&n&&(t=o.getAt(0),n.setField(t.getDataIndex()),n.setTitle({text:t.getHeader()})),a.getCount()&&r&&(t=a.getAt(0),r.setField(t.getId())),this.processData(),this.performLayout()},bindFormatter:function(t,i){var n=this;return function(e){return t(e,i||n.resolveListenerScope())}},getStoreData:function(){var e,t,i,n,r,s,o=this.getMatrix(),a=o.leftAxis.getTree(),l=a.length,c=o.topAxis.getTree(),u=c.length,d=[],h=this.getXAxis(),f=this.getYAxis(),g=this.getColorAxis(),p=h.getField(),m=f.getField(),x=g.getField();for(e=0;e<l;e++)for(i=a[e],t=0;t<u;t++)n=c[t],r=o.results.get(i.key,n.key),(s={data:{}}).data[p]=n.name,s.data[m]=i.name,s.data[x]=r?r.getValue(x):null,s.data.records=r?r.records.length:0,d.push(s);return d},onUpdateTiles:function(e){var i,n,t,r,s=this.getMatrix(),o=this.getColorAxis().getField();s.aggregate.getCount()&&(i=s.aggregate.getAt(0),n=i.getFormatter()||this.getDefaultFormatter(),t=i.getScope(),r=Ext.app.bind.Parser.fly(n),n=this.bindFormatter(r.compileFormat(),t),r.release()),this.callParent([e]),e.select("text").text(function(e){var t=e.data[o]||null;return null!==t&&i&&n&&(t=n(t)),null!==t?t:null})}}),Ext.define("Ext.pivot.d3.AbstractContainer",{extend:Ext.panel.Panel,isPivotComponent:!0,config:{matrix:{type:"local"},drawing:{xtype:"pivotheatmap"},configurator:null},destroy:function(){this.setMatrix(null),this.callParent()},addDrawing:function(){this.add(Ext.applyIf({matrix:this.getMatrix()},this.getDrawing()))},applyMatrix:function(e,t){return Ext.destroy(t),null==e?e:e&&e.isPivotMatrix?(e.cmp=this,e):(Ext.applyIf(e,{type:"local"}),e.cmp=this,Ext.Factory.pivotmatrix(e))},applyConfigurator:function(e){return e?this.addPlugin(e):null},updateConfigurator:function(e,t){t&&this.removePlugin(t)}}),Ext.define("Ext.pivot.d3.TreeMap",{extend:Ext.d3.hierarchy.TreeMap,xtype:"pivottreemap",config:{autoExpand:!0,matrix:{type:"local",rowGrandTotalsPosition:"none",colGrandTotalsPosition:"none"},store:{type:"tree",fields:["name","value",{name:"records",type:"int"}],root:{expanded:!0,name:"Root",children:[]}},nodeValue:function(e){return e.data.value},colorAxis:{scale:{range:["#E45649","#ECECEC","#50A14F"]},processor:function(e,t,i,n){var r=i.data;return r.isLeaf()?t(r.get("depth")-5):"#ececec"}}},destroy:function(){this.setMatrix(null),this.callParent()},applyMatrix:function(e){return e&&(e.isPivotMatrix||(e.type||(e.type="local"),e.cmp=this,e=Ext.Factory.pivotmatrix(e))),e},updateMatrix:function(e,t){Ext.destroy(t,this.matrixListeners),this.matrixListeners=null,e&&(this.matrixListeners=e.on({done:this.onMatrixDataReady,scope:this,destroyable:!0}))},onMatrixDataReady:function(e){var t,i,n=this.getColorAxis(),r=e.aggregate,s=this.getStore().getRoot();r.getCount()&&n&&(t=r.getAt(0).getId(),n.setField(t)),i=this.getTreeStoreData(e.leftAxis.getTree(),t),s&&(s.removeAll(),s.appendChild(i)),this.performLayout()},getTreeStoreData:function(e,t){var i,n,r,s,o,a=[],l=this.getMatrix(),c=this.getAutoExpand();if(e&&l)for(n=e.length,i=0;i<n;i++)r=e[i],(o=l.results.get(r.key,l.grandTotalKey))&&(s={path:r.key,name:r.name,value:o?o.getValue(t):null,records:o&&o.records?o.records.length:0},r.children?(s.children=this.getTreeStoreData(r.children,t),s.expanded=c):s.leaf=!0,a.push(s));return a}}),Ext.define("Ext.pivot.d3.Container",{extend:Ext.pivot.d3.AbstractContainer,xtype:"pivotd3container",config:{configurator:{id:"configurator",type:"pivotconfigurator"}},layout:"fit",initialize:function(){this.addDrawing(),this.callParent()}}),Ext.define("Ext.calendar.EventBase",{extend:Ext.Gadget,config:{defaultTitle:"(New Event)",endDate:null,mode:null,model:null,palette:null,resize:!1,startDate:null,title:"",touchAction:{panX:!1,panY:!1},view:null},cloneForProxy:function(){var e=new this.self(this.config);return e.el.unselectable(),e},updateModel:function(e){var t;e&&(this.setStartDate(e.getStartDate()),this.setEndDate(e.getEndDate()),this.setTitle(e.getTitle()),(t=this.element.dom).setAttribute("data-eventId",e.id),t.setAttribute("data-calendarId",e.getCalendarId()))},updateResize:function(e){this.toggleCls(this.$allowResizeCls,e)},privates:{$allowResizeCls:Ext.baseCSSPrefix+"calendar-event-resizable"}}),Ext.define("Ext.calendar.Event",{extend:Ext.calendar.EventBase,xtype:"calendar-event",config:{timeFormat:"H:i"},smallSize:60,getElementConfig:function(){var e=this.callParent();return e.cls=Ext.baseCSSPrefix+"calendar-event",e.children=[{cls:Ext.baseCSSPrefix+"calendar-event-inner",reference:"innerElement",children:[{cls:Ext.baseCSSPrefix+"calendar-event-time",reference:"timeElement",children:[{tag:"span",reference:"startElement",cls:Ext.baseCSSPrefix+"calendar-event-time-start"},{tag:"span",html:" - ",reference:"separatorElement",cls:Ext.baseCSSPrefix+"calendar-event-time-separator"},{tag:"span",reference:"endElement",cls:Ext.baseCSSPrefix+"calendar-event-time-end"}]},{reference:"titleElement",tag:"span",cls:Ext.baseCSSPrefix+"calendar-event-title"},{cls:Ext.baseCSSPrefix+"calendar-event-resizer",reference:"resizerElement"}]}],e},updateEndDate:function(e){this.endElement.setText(this.displayDate(e)),this.calculateSize()},updateMode:function(e){this.addCls(this.modes[e]),"weekinline"!==e&&"weekspan"!==e||this.addCls(this.$inlineTitleCls)},updatePalette:function(e){var t=this.innerElement.dom.style,i=this.getMode();"weekspan"===i||"day"===i?(t.backgroundColor=e.primary,t.color=e.secondary,"day"===i&&(this.element.dom.style.borderColor=e.border)):t.color=e.primary},updateStartDate:function(e){this.startElement.setText(this.displayDate(e)),this.calculateSize()},updateTitle:function(e){e=e||this.getDefaultTitle(),this.titleElement.setText(e)},privates:{$inlineTitleCls:Ext.baseCSSPrefix+"calendar-event-inline-title",modes:{day:Ext.baseCSSPrefix+"calendar-event-day",weekspan:Ext.baseCSSPrefix+"calendar-event-week-span",weekinline:Ext.baseCSSPrefix+"calendar-event-week-inline"},calculateSize:function(){var e,t=this.getStartDate(),i=this.getEndDate(),n=this.getView().MS_TO_MINUTES,r="day"===this.getMode();(!r||t&&i)&&(e=!r||i-t<=this.smallSize*n,this.element.toggleCls(this.$inlineTitleCls,e))},displayDate:function(e){if(e)return e=this.getView().utcToLocal(e),Ext.Date.format(e,this.getTimeFormat())}}}),Ext.define("Ext.calendar.AbstractList",{extend:Ext.dataview.DataView,onChildTap:function(e){this.callParent([e]),this.handleItemTap(e.record)}}),Ext.define("Ext.calendar.List",{extend:Ext.calendar.AbstractList,xtype:"calendar-list",config:{enableToggle:!0},cls:Ext.baseCSSPrefix+"calendar-list",itemTpl:'<div class="<tpl if="hidden">'+Ext.baseCSSPrefix+'calendar-list-item-hidden</tpl>"><div class="'+Ext.baseCSSPrefix+'calendar-list-icon" style="background-color: {color};"></div><div class="'+Ext.baseCSSPrefix+'calendar-list-text">{title:htmlEncode}</div></div>',itemSelector:"."+Ext.baseCSSPrefix+"calendar-list-item",itemCls:Ext.baseCSSPrefix+"calendar-list-item",scrollable:!0,prepareData:function(e,t,i){return{id:i.id,editable:i.isEditable(),hidden:i.isHidden(),color:i.getBaseColor(),title:i.getTitle()}},handleItemTap:function(e){this.getEnableToggle()&&e.setHidden(!e.isHidden())}}),Ext.define("Ext.calendar.date.Range",{end:null,start:null,isRange:!0,statics:{fly:function(){var i=null;return function(e,t){return e.isRange?e:((i=i||new Ext.calendar.date.Range).start=e,i.end=t,i)}}()},constructor:function(e,t){this.start=e,this.end=t},clone:function(){var e=Ext.Date;return new this.self(e.clone(this.start),e.clone(this.end))},contains:function(e){return this.start<=e&&e<=this.end},containsRange:function(e,t){var i=this.self.fly(e,t);return i.start>=this.start&&i.end<=this.end},equals:function(e,t){var i;return!!e&&(i=this.self.fly(e,t),this.start.getTime()===i.start.getTime()&&this.end.getTime()===i.end.getTime())},getDuration:function(){return this.end.getTime()-this.start.getTime()},isContainedBy:function(e,t){return this.self.fly(e,t).containsRange(this)},overlaps:function(e,t){var i=this.self.fly(e,t);return i.start<this.end&&this.start<i.end}}),Ext.define("Ext.calendar.date.Util",{singleton:!0,clearTimeUtc:function(e,t){return t&&(e=Ext.Date.clone(e)),e.setUTCHours(0),e.setUTCMinutes(0),e.setUTCSeconds(0),e.setUTCMilliseconds(0),e},privates:{getDefaultTimezoneOffset:function(){return(new Date).getTimezoneOffset()},getLocalNow:function(){return new Date},expandRange:function(e){var t=Ext.Date,i=e.start,n=e.end;return(i=t.clone(i)).setUTCHours(0),0!==n.getUTCHours()&&(n=t.clone(n)).setUTCHours(24),new Ext.calendar.date.Range(i,n)}}}),Ext.define("Ext.calendar.dd.WeeksProxy",{extend:Ext.drag.proxy.Placeholder,alias:"drag.proxy.calendar-weeks",config:{titleTpl:'<tpl if="days &gt; 1">({days} days) </tpl>{title}',width:null},draggingCls:Ext.baseCSSPrefix+"calendar-event-dragging",applyTitleTpl:function(e){return e&&!e.isXTemplate&&(e=new Ext.XTemplate(e)),e},getElement:function(e){var t=e.view,i=e.widget.cloneForProxy(),n=i.element;return i.removeCls(t.$staticEventCls),i.addCls(this.draggingCls),i.addCls(this.placeholderCls),t.element.appendChild(n),i.setWidth(this.getWidth()),this.setTitle(i),this.clone=i,n},cleanup:function(){this.clone=Ext.destroy(this.clone),this.callParent()},privates:{setTitle:function(e){var t,i=this.getTitleTpl();i&&(t=e.getModel(),e.setTitle(i.apply({model:t,title:e.getTitle(),days:this.getSource().getView().getEventDaysSpanned(t)})))}}}),Ext.define("Ext.calendar.util.Dom",{singleton:!0,extractPositions:function(e,t){var i,n=e.length,r=[];for(i=0;i<n;++i)r.push(Ext.fly(e[i])[t]());return r},getIndexPosition:function(e,t){var i,n,r=e.length;if(t<e[0])i=0;else if(t>e[r-1])i=r-1;else for(n=r-1;0<=n;--n)if(t>e[n]){i=n;break}return i}}),Ext.define("Ext.calendar.dd.DaysAllDaySource",{extend:Ext.drag.Source,activateOnLongPress:"touch",config:{proxy:{type:"calendar-weeks",width:200},view:null},describe:function(e){var t=this.getView(),i=t.getEvent(e.eventTarget);e.event=i,e.widget=t.getEventWidget(i),e.setData("calendar-event-allday",i),e.view=t},beforeDragStart:function(e){return this.getView().handleChangeStart("drag",e.event)},updateView:function(e){e&&(this.setHandle("."+e.$eventCls),this.setElement(e.allDayContent))},destroy:function(){this.setView(null),this.callParent()},privates:{setup:function(e){var t,i,n;this.callParent([e]),t=e.view,i=e.event,n=Ext.calendar.util.Dom.extractPositions(t.backgroundCells,"getX"),e.index=Ext.calendar.util.Dom.getIndexPosition(n,e.cursor.current.x),e.positions=n,e.span=t.getEventDaysSpanned(i)}}}),Ext.define("Ext.calendar.dd.DaysAllDayTarget",{extend:Ext.drag.Target,config:{view:null},updateView:function(e){e&&this.setElement(e.allDayContent)},accepts:function(e){return Ext.Array.contains(e.types,"calendar-event-allday")},onDragMove:function(e){var t,i=e.view;e.valid&&(t=Ext.calendar.util.Dom.getIndexPosition(e.positions,e.cursor.current.x),i.selectRange(t,t+e.span-1)),this.callParent([e])},onDragLeave:function(e){this.getView().clearSelected(),this.callParent([e])},onDrop:function(e){var t=Ext.Date,i=e.view,n=e.event,r=Ext.calendar.util.Dom.getIndexPosition(e.positions,e.cursor.current.x),s=i.utcTimezoneOffset(t.add(i.dateInfo.full.start,t.DAY,r)),o=n.getStartDate(),a=s<o,l=t.diff(a?s:o,a?o:s,t.DAY);a&&(l=-l),i.handleChange("drop",n,new Ext.calendar.date.Range(t.add(n.getStartDate(),t.DAY,l),t.add(n.getEndDate(),t.DAY,l)),function(){i.clearSelected()}),this.callParent([e])},destroy:function(){this.setView(null),this.callParent()}}),Ext.define("Ext.calendar.dd.DaysProxy",{extend:Ext.drag.proxy.Placeholder,alias:"drag.proxy.calendar-days",config:{cursorOffset:null},draggingCls:Ext.baseCSSPrefix+"calendar-event-dragging",getElement:function(e){var t=e.view,i=e.widget,n=i.cloneForProxy(),r=n.element,s=t.getEventColumn(0);return n.removeCls(t.$staticEventCls),n.addCls(this.draggingCls),n.setWidth(Ext.fly(s).getWidth()),n.setHeight(i.getHeight()),t.bodyWrap.appendChild(r),this.element=r,this.clone=n,e.widgetClone=n,r},cleanup:function(e){e&&e.deferCleanup||(this.clone=Ext.destroy(this.clone),this.callParent())}}),Ext.define("Ext.calendar.dd.DaysBodySource",{extend:Ext.drag.Source,activateOnLongPress:"touch",config:{proxy:{type:"calendar-days"},view:null},describe:function(e){var t=this.getView();e.event=t.getEvent(e.eventTarget),e.widget=t.getEventWidget(e.event),e.setData("calendar-event",e.event),e.view=t},beforeDragStart:function(e){var t=this.getView().$resizerCls;return!Ext.fly(e.eventTarget).hasCls(t)&&this.getView().handleChangeStart("drag",e.event)},updateView:function(e){e&&(this.setHandle("."+e.$eventCls),this.setElement(e.bodyWrap),this.setConstrain({snap:{x:this.snapX,y:this.snapY}}))},onDragStart:function(e){this.callParent([e]),e.widget.element.hide()},onDragEnd:function(e){var t;this.callParent([e]),(t=e.widget).destroyed||e.deferCleanup||t.element.show()},destroy:function(){this.setView(null),this.callParent()},privates:{startMarginName:"left",setup:function(e){var t,i,n,r=[];for(this.callParent([e]),i=(t=e.view).getVisibleDays(),n=0;n<i;++n)r.push(Ext.fly(t.getEventColumn(n)).getX());e.sizes={height:e.proxy.element.getHeight(),slotStyle:t.getSlotStyle(),margin:t.getEventStyle().margin,startPositions:r,startOffset:e.cursor.initial.y-e.widget.element.getY()}},snapX:function(e,t){var i=e.sizes,n=i.startPositions,r=Ext.calendar.util.Dom.getIndexPosition(n,t);return n[e.dayIndex=r]+i.margin[e.source.startMarginName]},snapY:function(e,t){var i=e.sizes,n=e.view,r=n.bodyTable.getY(),s=i.slotStyle.halfHeight,o=n.maxSlots,a=Math.max(0,t-i.startOffset-r);return t=r+i.margin.top+Ext.Number.roundToNearest(a,s),Math.min(t,r+o*s-i.height)}}}),Ext.define("Ext.calendar.dd.DaysBodyTarget",{extend:Ext.drag.Target,config:{view:null},updateView:function(e){e&&this.setElement(e.bodyWrap)},accepts:function(e){return Ext.Array.contains(e.types,"calendar-event")},onDragMove:function(e){var t,i,n,r,s=e.sizes,o=e.view,a=e.event,l=Ext.Date;e.valid&&(t=Math.max(0,e.proxy.current.y-o.bodyTable.getY()),r=Math.floor(t/s.slotStyle.halfHeight),i=l.clone(o.dateInfo.visible.start),i=l.add(i,l.DAY,e.dayIndex||0),i=l.add(i,l.MINUTE,o.minimumEventMinutes*r,!0),n=l.add(i,l.MINUTE,a.getDuration(),!0),e.widgetClone.setStartDate(i),e.widgetClone.setEndDate(n),e.range=[i,n]),this.callParent([e])},onDrop:function(e){var t,i=this.getView(),n=e.source.getProxy();e.deferCleanup=!0,i.handleChange("drop",e.event,new Ext.calendar.date.Range(e.range[0],e.range[1]),function(){n.cleanup(),(t=e.widget).destroyed||t.element.show(),i.clearSelected()}),this.callParent([e])},destroy:function(){this.setView(null),this.callParent()}}),Ext.define("Ext.calendar.dd.WeeksSource",{extend:Ext.drag.Source,activateOnLongPress:"touch",config:{proxy:{type:"calendar-weeks",width:200},view:null},describe:function(e){var t=this.getView();e.event=t.getEvent(e.eventTarget),e.widget=t.getEventWidget(e.eventTarget),e.setData("calendar-event",e.event),e.view=t},beforeDragStart:function(e){return this.getView().handleChangeStart("drag",e.event)},onDragStart:function(e){var t=e.view,i=e.cursor.current,n=t.getCellByPosition(i.x,i.y),r=e.event;e.span=t.getEventDaysSpanned(r),e.startDate=t.getDateFromCell(n),this.callParent([e])},updateView:function(e){e&&(this.setHandle("."+e.$eventCls),this.setElement(e.element))},destroy:function(){this.setView(null),this.callParent()}}),Ext.define("Ext.calendar.dd.WeeksTarget",{extend:Ext.drag.Target,config:{view:null},updateView:function(e){e&&this.setElement(e.element)},accepts:function(e){return Ext.Array.contains(e.types,"calendar-event")},onDragMove:function(e){var t,i,n,r=Ext.Date,s=e.view,o=e.cursor.current,a=e.span;e.valid&&(t=s.getCellByPosition(o.x,o.y),i=s.getDateFromCell(t),n=r.add(i,r.DAY,a-1),s.selectRange(i,n)),this.callParent([e])},onDragLeave:function(e){this.getView().clearSelected(),this.callParent([e])},onDrop:function(e){var t,i=Ext.Date,n=e.cursor.current,r=e.view,s=r.getCellByPosition(n.x,n.y),o=e.event;t=this.calculateDifference(o,r.getDateFromCell(s),e.startDate),r.handleChange("drop",o,new Ext.calendar.date.Range(i.add(o.getStartDate(),i.DAY,t,!1),i.add(o.getEndDate(),i.DAY,t,!1)),function(){r.clearSelected()}),this.callParent([e])},destroy:function(){this.setView(null),this.callParent()},privates:{calculateDifference:function(e,t,i){var n,r,s=Ext.Date,o=e.getStartDate();return e.getAllDay()?n=(t=s.localToUtc(t))<o:(n=t<i,o=i),r=s.diff(n?t:o,n?o:t,s.DAY),n&&(r=-r),r}}}),Ext.define("Ext.calendar.form.CalendarPicker",{extend:Ext.field.Select,xtype:"calendar-calendar-picker",cls:Ext.baseCSSPrefix+"calendar-picker-field",floatedPicker:{userCls:Ext.baseCSSPrefix+"calendar-picker-list",itemTpl:'<div class="'+Ext.baseCSSPrefix+'calendar-picker-list-icon" style="background-color: {color};"></div><span class="'+Ext.baseCSSPrefix+"calendar-picker-list-text "+Ext.baseCSSPrefix+'list-label">{title:htmlEncode}</span>'},edgePicker:{userCls:Ext.baseCSSPrefix+"calendar-picker-list"},applyPicker:function(e,t){return(e=this.callParent([e,t]))&&(("floated"===this.pickerType?e:e.items.first()).prepareData=this.prepareData),e},createEdgePicker:function(){var e=this.callParent();return e.slots[0].itemTpl='<div class="'+Ext.baseCSSPrefix+'picker-item {cls}"><div class="'+Ext.baseCSSPrefix+'calendar-picker-list-icon" style="background-color: {color};"></div><span class="'+Ext.baseCSSPrefix+'list-label">{title:htmlEncode}</span></div>',e},prepareData:function(e,t,i){return{id:i.id,title:i.getTitle(),color:i.getBaseColor()}},updateValue:function(e,t){var i,n=this.iconEl;this.callParent([e,t]),n||(this.iconEl=n=this.bodyElement.createChild({cls:Ext.baseCSSPrefix+"calendar-picker-field-icon"})),(i=this.getSelection())?(n.setDisplayed(!0),n.setStyle("background-color",i.getBaseColor())):n.setDisplayed(!1)},privates:{queryTabletPicker:function(e){return e.down("calendar-list")}}}),Ext.define("Ext.calendar.form.TimeField",{extend:Ext.field.Select,xtype:"calendar-timefield",config:{increment:15,format:"g:i A",minValue:null,maxValue:null},initialize:function(){this.callParent(),this.refreshOptions()},updateMinValue:function(){this.isConfiguring||this.refreshOptions()},updateMaxValue:function(){this.isConfiguring||this.refreshOptions()},applyValue:function(e){var t,i,n,r,s,o,a,l=null;if(e)for(e.isModel&&(e=e.data.value),t=e.getHours(),i=e.getMinutes(),s=0,r=(n=this.getStore().getRange()).length;s<r;++s)if(t===(a=(o=n[s]).data.value).getHours()&&i===a.getMinutes()){l=o;break}return l},updateValue:function(e){e&&e.isModel&&(this.setSelection(e),this.setInputValue(e.data.text))},getValue:function(){var e=this.callParent();return e&&e.isModel&&(e=e.data.value),e},privates:{initDate:new Date(2008,0,1),refreshOptions:function(){var e,t=Ext.Date,i=this.getMinValue(),n=this.getMaxValue(),r=this.getIncrement(),s=this.getFormat(),o=t.clone(this.initDate),a=[];for(n?((e=t.clone(o)).setHours(n.getHours()),e.setMinutes(n.getMinutes())):e=t.add(o,t.DAY,1),i&&(o.setHours(i.getHours()),o.setMinutes(i.getMinutes()));o<e;)a.push({value:o,text:t.format(o,s)}),o=t.add(o,t.MINUTE,r,!0);this.setOptions(a)}}}),Ext.define("Ext.calendar.form.AbstractForm",{extend:Ext.form.Panel,trackResetOnLoad:!0,defaultListenerScope:!0,platformConfig:{"!desktop":{width:"100%",height:"100%",layout:"fit",isCompact:!0,fullscreen:!0},desktop:{modal:!0,centered:!0,scrollable:"y"}},floated:!0,config:{calendarField:{xtype:"calendar-calendar-picker",label:"Calendar",name:"calendarId",displayField:"title",valueField:"id"},titleField:{xtype:"textfield",label:"Title",name:"title"},startDateField:{xtype:"datepickerfield",label:"From",itemId:"startDate",name:"startDate"},startTimeField:{xtype:"calendar-timefield",label:"&#160;",itemId:"startTime",name:"startTime"},endDateField:{xtype:"datepickerfield",label:"To",itemId:"endDate",name:"endDate"},endTimeField:{xtype:"calendar-timefield",label:"&#160;",itemId:"endTime",name:"endTime"},allDayField:{xtype:"checkboxfield",itemId:"allDay",name:"allDay",label:"All Day",listeners:{change:"onAllDayChange"}},descriptionField:{xtype:"textareafield",label:"Description",name:"description",flex:1,minHeight:"6em"},dropButton:{text:"Delete",handler:"onDropTap"},saveButton:{text:"Save",handler:"onSaveTap"},cancelButton:{text:"Cancel",handler:"onCancelTap"}},initialize:function(){this.initForm(),this.add({xtype:"toolbar",docked:"bottom",items:this.generateButtons()}),this.callParent(),this.applyValues(),this.checkFields()},generateButtons:function(){var e=[],t=this.getDropButton();return t&&e.push(t),e.push({xtype:"component",flex:1},this.getCancelButton(),this.getSaveButton()),e},fieldQuery:function(){return this.query("[isField][?name]")},applyValues:function(){this.setValues(this.consumeEventData())},createItems:function(){var e=this,t=e.getCalendarField();t.store||(t.store=e.getCalendarStore()),e.add([{xtype:"fieldset",scrollable:e.isCompact?"y":void 0,margin:0,layout:{type:"vbox",align:"stretch"},items:[t,e.getTitleField(),e.getStartDateField(),e.getStartTimeField(),e.getEndDateField(),e.getEndTimeField(),e.getAllDayField(),e.getDescriptionField()]}])},privates:{checkFields:function(){var e=this.down("#allDay").isChecked();this.down("#startTime").setDisabled(e),this.down("#endTime").setDisabled(e)},onAllDayChange:function(){this.checkFields()},onCancelTap:function(){this.fireCancel()},onDropTap:function(){this.fireDrop()},onSaveTap:function(){this.fireSave(this.produceEventData(this.getValues()))}}}),Ext.define("Ext.calendar.form.Base",{extend:Ext.Mixin,config:{event:null,view:null},fireCancel:function(){this.fireEvent("cancel",this)},fireDrop:function(){this.fireEvent("drop",this)},fireSave:function(e){this.fireEvent("save",this,{data:e})},getCalendarStore:function(){return{type:"chained",autoDestroy:!0,source:this.getView().getStore(),filters:[{filterFn:function(e){return e.isEditable()}}]}}}),Ext.define("Ext.calendar.form.Form",{extend:Ext.calendar.form.AbstractForm,mixins:[Ext.calendar.form.Base],defaultStartTime:[9,0],defaultEndTime:[10,0],initForm:function(){this.createItems()},consumeEventData:function(){var e,t=Ext.Date,i=this.getView(),n=this.getEvent(),r=n.getStartDate(),s=n.getEndDate(),o=n.getAllDay(),a=o?t.utcToLocal(r):i.utcToLocal(r),l=o?t.utcToLocal(s):i.utcToLocal(s),c=o||a.getTime()===l.getTime(),u={calendarId:n.getCalendarId(),title:n.getTitle(),description:n.getDescription(),allDay:o,startDate:a,endDate:l};return c||(u.startTime=a,u.endTime=l),o&&(u.endDate=t.subtract(l,t.DAY,1)),this.setDefaultTime(u,"startTime",this.defaultStartTime),this.setDefaultTime(u,"endTime",this.defaultEndTime),u.calendarId||(e=i.getEditableCalendars()).length&&(u.calendarId=e[0].id),u},produceEventData:function(e){var t=Ext.Date,i=this.getView(),n=e.startTime,r=e.endTime,s=e.startDate,o=e.endDate,a=s.getFullYear(),l=s.getMonth(),c=s.getDate(),u=o.getFullYear(),d=o.getMonth(),h=o.getDate();return e.allDay?(s=t.utc(a,l,c),o=t.add(t.utc(u,d,h),t.DAY,1),delete e.startTime,delete e.endTime):(s=i.toUtcOffset(new Date(a,l,c,n.getHours(),n.getMinutes())),o=i.toUtcOffset(new Date(u,d,h,r.getHours(),r.getMinutes()))),e.startDate=s,e.endDate=o,e},privates:{setDefaultTime:function(e,t,i){e[t]||(e[t]=new Date(2010,0,1,i[0],i[1]))}}}),Ext.define("Ext.calendar.form.Add",{extend:Ext.calendar.form.Form,xtype:"calendar-form-add",dropButton:null,title:"Add Event"}),Ext.define("Ext.calendar.form.Edit",{extend:Ext.calendar.form.Form,xtype:"calendar-form-edit",title:"Edit Event"}),Ext.define("Ext.calendar.header.Base",{extend:Ext.Gadget,mixins:[Ext.mixin.ConfigState],alternateStateConfig:"compactOptions",config:{cellCls:"",compact:!1,compactOptions:null,format:"",value:null,visibleDays:null},baseCls:Ext.baseCSSPrefix+"calendar-header",constructor:function(e){this.callParent([e]),this.redrawCells()},updateCompact:function(e){var t=this.baseCls;this.element.toggleCls(t+"-compact",e),this.element.toggleCls(t+"-large",!e),this.toggleConfigState(e)},updateCompactOptions:function(){!this.isConfiguring&&this.getCompact()&&this.toggleConfigState()},updateFormat:function(){this.isConfiguring||this.setHeaderText(!0)},applyValue:function(e,t){return e&&t&&e-t==0&&(e=void 0),e},updateValue:function(){this.isConfiguring||this.setHeaderText()},updateVisibleDays:function(){this.isConfiguring||this.redrawCells()},getElementConfig:function(){return{tag:"table",cls:this.$tableCls,reference:"element",children:[{tag:"tbody",children:[{tag:"tr",reference:"row"}]}]}},privates:{domFormat:"Y-m-d",useDates:!0,$headerCls:Ext.baseCSSPrefix+"calendar-header-cell",$hiddenCls:Ext.baseCSSPrefix+"calendar-header-hidden-cell",$tableCls:Ext.baseCSSPrefix+"calendar-header-table",clearCells:function(e){var t=this.row.dom,i=t.childNodes;for(e=e||0;i.length>e;)t.removeChild(i[e])},createCells:function(){var e,t,i=this.row.dom,n=[],r=this.getCreateDays(),s=Ext.baseCSSPrefix+"unselectable "+this.$headerCls,o=this.getCellCls();for(o&&(s+=" "+o),t=0;t<r;++t)(e=document.createElement("td")).className=s,e.setAttribute("data-index",t),this.onCellCreate(e,t),i.appendChild(e),n.push(e);return n},getCreateDays:function(){return this.getVisibleDays()},onCellCreate:Ext.privateFn,redrawCells:function(){this.clearCells(),this.cells=this.createCells(),this.setHeaderText()},setHeaderText:function(){var e,t,i=Ext.Date,n=this.getValue(),r=this.getFormat(),s=this.domFormat,o=this.cells,a=o.length,l=this.useDates;if(n)for(n=i.clone(n),t=0;t<a;++t)e=o[t],l&&e.setAttribute("data-date",i.format(n,s)),e.setAttribute("data-day",n.getDay()),e.innerHTML=i.format(n,r),n=i.add(n,i.DAY,1)}}}),Ext.define("Ext.calendar.header.Days",{extend:Ext.calendar.header.Base,xtype:"calendar-daysheader",format:"D m/d",compactOptions:{format:"d"},getElementConfig:function(){var e=this.callParent();return e.cls=this.$tableCls,delete e.reference,{cls:Ext.baseCSSPrefix+"calendar-header",reference:"element",children:[e]}},privates:{headerScrollOffsetName:"padding-right",$gutterCls:Ext.baseCSSPrefix+"calendar-header-gutter",createCells:function(){var e=this.row,t=this.callParent();return e.insertFirst({tag:"td",cls:this.$headerCls+" "+this.$gutterCls},!0),e.append({tag:"td",style:"display: none;"},!0),t},setOverflowWidth:function(e){this.element.setStyle(this.headerScrollOffsetName,e+"px")}}}),Ext.define("Ext.calendar.header.Weeks",{extend:Ext.calendar.header.Base,xtype:"calendar-weeksheader",format:"D",privates:{useDates:!1,getCreateDays:function(){return Ext.Date.DAYS_IN_WEEK},onCellCreate:function(e,t){Ext.fly(e).toggleCls(this.$hiddenCls,t>=this.getVisibleDays())}}}),Ext.define("Ext.calendar.model.EventBase",{extend:Ext.Mixin,inheritableStatics:{getDaysSpanned:function(e,t){var i=Ext.Date,n=0;for(e=i.clearTime(e,!0);e<t;)++n,e=i.add(e,i.DAY,1);return n},sort:function(e,t){return e.getStartDate().getTime()-t.getStartDate().getTime()||t.getDuration()-e.getDuration()||e.getTitle()-t.getTitle()}},containsRange:function(e,t){return this.getRange().containsRange(e,t)},getCalendar:function(){return this.calendar||null},getRange:function(){return new Ext.calendar.date.Range(this.getStartDate(),this.getEndDate())},isContainedByRange:function(e,t){return this.getRange().isContainedBy(e,t)},isSpan:function(){var e,t=Ext.Date,i=this.data.startTime;return!!this.getAllDay()||(i?(e=t.add(t.clearTime(t.clone(i)),t.DAY,1),t.diff(i,e,"mi")<this.getDuration()):1440<this.getDuration())},occursInRange:function(e,t){return this.getRange().overlaps(e,t)},setCalendar:function(e,t){t=!1!==t,this.calendar=e,this.setCalendarId(e?e.id:null,t)}}),Ext.define("Ext.calendar.model.Event",{extend:Ext.data.Model,mixins:[Ext.calendar.model.EventBase],fields:[{name:"title",type:"string"},{name:"calendarId"},{name:"color",type:"string"},{name:"description",type:"string"},{name:"startDate",type:"date",dateFormat:"c"},{name:"endDate",type:"date",dateFormat:"c"},{name:"allDay",type:"boolean"},{name:"duration",type:"int",depends:["startDate","endDate"],calculate:function(e){var t=e.startDate,i=e.endDate,n=0;return i&&t&&(n=i.getTime()-t.getTime()),n/6e4}}],getAllDay:function(){return this.data.allDay},getCalendarId:function(){return this.data.calendarId},getColor:function(){return this.data.color},getDescription:function(){return this.data.description},getDuration:function(){return this.data.duration},getEndDate:function(){return this.data.endDate},getRange:function(){var e=this.range;return e||(this.range=e=new Ext.calendar.date.Range(this.getStartDate(),this.getEndDate())),e},getStartDate:function(){return this.data.startDate},getTitle:function(){return this.data.title},isEditable:function(){var e=this.getCalendar();return!e||e.isEditable()},setAllDay:function(e){this.set("allDay",e)},setCalendarId:function(e,t){t=!1!==t,this.set("calendarId",e,{dirty:t})},setColor:function(e){this.set("color",e)},setData:function(e){var t=e.duration;t?(delete(e=Ext.apply({},e)).duration,this.setDuration(t)):e.startDate&&e.endDate&&(this.range=null),this.set(e)},setDescription:function(e){this.set("description",e)},setDuration:function(e){var t=Ext.Date;this.range=null,this.set("endDate",t.add(this.data.startDate,t.MINUTE,e,!0))},setRange:function(e,t){var i=Ext.Date;e.isRange&&(t=e.end,e=e.start),this.range=null,this.set({startDate:i.clone(e),endDate:i.clone(t)})},setTitle:function(e){this.set("title",e)}}),Ext.define("Ext.calendar.store.Events",{extend:Ext.data.Store,alias:"store.calendar-events",model:"Ext.calendar.model.Event",config:{calendar:null,calendarParam:"calendar",dateFormat:"C",endParam:"endDate",prefetchMode:"month",startParam:"startDate"},remoteSort:!1,pageSize:0,sorters:[{direction:"ASC",sorterFn:function(e,t){return Ext.calendar.model.Event.sort(e,t)}}],prefetchSettings:{month:{unit:Ext.Date.MONTH,amount:2},week:{unit:Ext.Date.WEEK,amount:2},day:{unit:Ext.Date.DAY,amount:4}},constructor:function(e){this.requests={},this.callParent([e])},getInRange:function(e,t){var i,n,r=this.data.items,s=r.length,o=[];for(i=0;i<s;++i)(n=r[i]).occursInRange(e,t)&&o.push(n);return o},hasRangeCached:function(e){var t=this.range,i=!1;return t&&(i=t.full.containsRange(e)),i},setRange:function(e){var t,i,n,r,s,o=Ext.Date,a=Ext.calendar.date.Range,l=this.range,c=this.getPrefetchSetting(),u=0,d=!1;n=o.subtract(e.start,c.unit,c.amount,!0),r=o.add(e.end,c.unit,c.amount,!0),s={actual:e.clone(),full:new a(n,r)},this.compareRange(l,s)||l&&l.full.containsRange(s.full)||(this.hasRangeCached(e)?this.hasRangeCached(s.full)||(l.full.start>n&&(t=n,i=l.full.start,++u,d=!0),l.full.end<r&&(t=l.full.end,i=r,++u),1===u?this.prefetchRange(t,i,d,s):2===u?this.loadRange(n,r,s):Ext.raise("Should never be here.")):this.loadRange(s.full.start,s.full.end,s),this.requested=s)},onProxyLoad:function(e){e.wasSuccessful()&&(this.range=this.requested,this.requested=null),this.setCalendarFromLoad=!0,this.callParent([e]),this.setCalendarFromLoad=!1},onCollectionAdd:function(e,t){this.setRecordCalendar(this.getCalendar(),t.items,!this.setCalendarFromLoad),this.callParent([e,t])},onCollectionRemove:function(e,t){this.callParent([e,t]),this.isMoving||this.setRecordCalendar(null,t.items,!0)},privates:{isMoving:0,abortAll:function(){var e,t,i=this.requests;for(t in i)(e=i[t])&&!e.destroyed&&e.abort();this.requests={}},compareRange:function(e,t){return e&&t?e.full.equals(t.full)&&e.actual.equals(t.actual):(e||null)===(t||null)},getPrefetchSetting:function(){return this.prefetchSettings[this.getPrefetchMode()]},loadRange:function(e,t,i){var n=this.requested,r=new Ext.calendar.date.Range(e,t);n&&n.full.equals(r)||(this.abortAll(),this.load({params:this.setupParams(e,t),requested:i}))},onBeforeLoad:function(e){this.requests[e._internalId]=e},onPrefetch:function(e){var t,i,n=this,r=e.getRecords()||[],s=[],o=[],a=Ext.Array.toMap(r,"id"),l=n.getDataSource().getRange(),c=l.length,u=n.range.full.start,d=n.range.full.end;for(e.wasSuccessful()&&(n.range=n.requested,n.requested=null),delete n.requests[e._internalId],n.suspendEvents(),t=0;t<c;++t)a[(i=l[t]).id]||i.occursInRange(u,d)||s.push(i);for(t=0,c=r.length;t<c;++t)i=r[t],n.getById(i.id)||o.push(i);n.ignoreCollectionRemove=n.setCalendarFromLoad=!0,n.getData().splice(0,s,o),n.ignoreCollectionRemove=n.setCalendarFromLoad=!1,n.resumeEvents(),n.fireEvent("prefetch",n,o,s)},prefetch:function(e){var t;e=Ext.apply({internalScope:this,internalCallback:this.onPrefetch},e),this.setLoadOptions(e),t=this.createOperation("read",e),(this.requests[t._internalId]=t).execute()},prefetchRange:function(e,t,i,n){this.prefetch({params:this.setupParams(e,t),isLeading:i,newRequested:n})},setRecordCalendar:function(e,t,i){var n,r,s=t.length;for(n=0;n<s;++n)(r=t[n]).$moving=!0,r.setCalendar(e,i),delete r.$moving},setupParams:function(e,t){var i=Ext.Date,n=this.getDateFormat(),r={};return r[this.getCalendarParam()]=this.getCalendar().id,r[this.getStartParam()]=i.format(e,n),r[this.getEndParam()]=i.format(t,n),r}}}),Ext.define("Ext.calendar.theme.Theme",{singleton:!0,colors:["#F44336","#3F51B5","#4CAF50","#FF9800","#E91E63","#2196F3","#8BC34A","#FF5722","#673AB7","#009688","#FFC107","#607D8B"],lightColor:"#FFFFFF",darkColor:"#000000",generatePalette:function(e){var t,i,n=this.light,r=this.dark,s=this.lightColor,o=this.darkColor,a=e.getBrightness();return n||(this.light=n=Ext.util.Color.fromString(s),this.dark=r=Ext.util.Color.fromString(o)),t=Math.abs(n.getBrightness()-a),i=Math.abs(r.getBrightness()-a),{primary:e.toString(),secondary:i<t?s:o,border:e.createDarker(.2).toString()}},getBaseColor:function(e){var t,i=this.idMap,n=this.colors,r=e.id;return(t=i[r])||(t=n[this.current%n.length],i[r]=t,++this.current),t},getPalette:function(e){var t,i=this.colorMap,n=i[e];return n||(t=Ext.util.Color.fromString(e),i[e]=n=this.generatePalette(t)),n},privates:{colorMap:{},idMap:{},current:0,onIdChanged:function(e,t){var i=this.idMap,n=i[t];n&&(delete i[t],i[e]=n)}}}),Ext.define("Ext.calendar.model.CalendarBase",{extend:Ext.Mixin,config:{eventStoreDefaults:{type:"calendar-events",proxy:{type:"ajax"}}},events:function(){var e,t=this._eventStore;return t||(e=Ext.merge({calendar:this},this.config.eventStoreDefaults,this.eventStoreDefaults,this.get("eventCfg")),this._eventStore=t=Ext.Factory.store(this.getEventStoreConfig(e))),t},getBaseColor:function(){var e=this.getColor()||this.getAssignedColor();return e||(e=Ext.calendar.theme.Theme.getBaseColor(this),this.setAssignedColor(e)),e},isEditable:function(){return this.getEditable()},isHidden:function(){return this.getHidden()},privates:{onIdChanged:function(e,t){Ext.calendar.theme.Theme.onIdChanged(e,t)}}}),Ext.define("Ext.calendar.model.Calendar",{extend:Ext.data.Model,mixins:[Ext.calendar.model.CalendarBase],fields:[{name:"title",type:"string"},{name:"description",type:"string"},{name:"color",type:"string"},{name:"assignedColor",type:"string",persist:!1},{name:"hidden",type:"bool"},{name:"editable",type:"bool",defaultValue:!0},{name:"eventStore",type:"auto",persist:!1}],constructor:function(e,t){this.callParent([e,t]),this.getBaseColor()},getAssignedColor:function(){return this.data.assignedColor},getColor:function(){return this.data.color},getDescription:function(){return this.data.description},getEditable:function(){return this.data.editable},getEventStoreConfig:function(e){return Ext.merge(e,this.data.eventStore)},getHidden:function(){return this.data.hidden},getTitle:function(){return this.data.title},setAssignedColor:function(e){this.set("assignedColor",e)},setColor:function(e){this.set("color",e)},setDescription:function(e){this.set("description",e)},setEditable:function(e){this.set("editable",e)},setHidden:function(e){this.set("hidden",e)},setTitle:function(e){this.set("title",e)}}),Ext.define("Ext.calendar.panel.AbstractBase",{extend:Ext.Panel,layout:"fit",autoSize:!1,initialize:function(){this.callParent(),this.syncHeaderSize&&(this.element.on("resize","handleResize",this),this.getView().on("refresh","handleRefresh",this,{single:!0}))},updateDayHeader:function(e){e&&(e.setDocked("top"),this.add(e))},updateView:function(e){this.add(e)},privates:{handleRefresh:function(){this.handleResize()},handleResize:function(){var e=this.getDayHeader();e&&e.setOverflowWidth(this.getView().scrollable.getScrollbarSize().width)}}});Ext.define("Ext.calendar.panel.Base",{extend:Ext.calendar.panel.AbstractBase,config:{dayHeader:null,eventRelayers:{view:{beforeeventadd:!0,beforeeventedit:!0,eventadd:!0,eventedit:!0,eventdrop:!0,eventtap:!0,validateeventadd:!0,validateeventedit:!0,validateeventdrop:!0,valuechange:!0}},view:null},platformConfig:{"!desktop":{compact:!0}},configExtractor:{view:{addForm:!0,compact:!0,compactOptions:!0,controlStoreRange:!0,editForm:!0,eventDefaults:!0,gestureNavigation:!0,store:!0,timezoneOffset:!0,value:!0}},twoWayBindable:{value:1},cls:[Ext.baseCSSPrefix+"calendar-base",Ext.baseCSSPrefix+"unselectable"],constructor:function(e){var t,i,n,r,s,o=Ext.Config,a=this.configExtractor,l={};for(t in e=Ext.apply({},e),this.extracted=l,a){for(i in n=a[t],l[t]=r={},e)i in n&&(!0===(s=n[i])&&(s=i),r[s]=e[i],delete e[i]);this.setupProxy(n,o.get(t).names.get)}this.callParent([e]),this.initRelayers()},onClassExtended:function(e,t,i){var n=t.configExtractor;n&&(delete t.configExtractor,e.prototype.configExtractor=Ext.merge({},e.prototype.configExtractor,n))},updateHighlightToday:Ext.emptyFn,getDisplayRange:function(){return this.getView().getDisplayRange()},getVisibleRange:function(){return this.getView().getVisibleRange()},moveNext:function(){this.getView().moveNext()},movePrevious:function(){this.getView().movePrevious()},navigate:function(e,t){this.getView().navigate(e,t)},showAddForm:function(e,t){this.getView().showAddForm(e,t)},showEditForm:function(e,t){this.getView().showEditForm(e,t)},applyDayHeader:function(e){return e&&(e=Ext.apply(this.extracted.dayHeader,e),e=Ext.create(e)),e},updateDayHeader:function(e,t){t&&t.destroy(),e&&this.getView().setHeader(e),this.callParent([e,t])},applyView:function(e){return e=e&&Ext.create(Ext.apply(this.extracted.view,e))},updateView:function(e,t){t&&t.destroy(),this.callParent([e,t])},privates:{calculateMoveNext:function(){return this.getView().calculateMoveNext()},calculateMovePrevious:function(){return this.getView().calculateMovePrevious()},createItemRelayer:function(i){var n=this;return function(e,t){return n.fireEvent(i,n,t)}},generateProxyMethod:function(e,t,i){var n=this,r=t.names.set,s=t.names.get,o=e.names.set,a=e.names.get;n[o]||(n[o]=function(e){var t=n[i]();t&&t[r](e)}),n[a]||(n[a]=function(){var e=n[i]();if(e)return e[s]()})},initRelayers:function(){var e,t,i,n,r,s=Ext.Config,o=this.getEventRelayers();for(e in o)for(n in t=o[e],i=this[s.get(e).names.get](),r=t.$prefix||"",t)i.on(n,this.createItemRelayer(r+n))},refreshEvents:function(){this.getView().refreshEvents()},setupProxy:function(e,t){var i,n,r,s,o=Ext.Config;for(i in e)s=e[i],r=o.get(i),n=!0===s?r:o.get(s),this.generateProxyMethod(r,n,t)}}}),Ext.define("Ext.calendar.store.EventSource",{extend:Ext.data.Store,config:{source:null},sorters:[{direction:"ASC",sorterFn:function(e,t){return Ext.calendar.model.Event.sort(e,t)}}],trackRemoved:!1,constructor:function(e){this.calendarMap={},this.callParent([e])},createEvent:function(e){this.getSource()||Ext.raise("Cannot create event, no source specified."),this.getSource().first()||Ext.raise("Cannot create event, source is empty.");var t=new(this.getSource().first().events().getModel());return e&&t.setData(e),t},updateSource:function(e){this.sourceListeners=Ext.destroy(this.sourceListeners),e&&(this.sourceListeners=e.on({destroyable:!0,scope:this,add:"checkData",remove:"checkData",refresh:"checkData"}),this.checkData())},add:function(e){var t=this.getEventsForCalendar(e.getCalendarId());t?t.add(e):Ext.raise("Unknown calendar: "+e.getCalendarId())},move:function(e,t){var i,n=this.getEventsForCalendar(t),r=e.getCalendar();r&&(n.suspendAutoSync(),++n.isMoving),n.remove(e),r&&(--n.isMoving,n.resumeAutoSync(),e.unjoin(n),(i=n.removed)&&Ext.Array.remove(i,e),(n=this.getEventsForCalendar(r)).suspendAutoSync(),n.add(e),n.resumeAutoSync())},remove:function(e){var t=this.getEventsForCalendar(e.getCalendarId());t?t.remove(e):Ext.raise("Unknown calendar: "+e.getCalendarId())},hasRangeCached:function(e){var t,i,n=this.calendarMap,r=this.range;if(!r)return!1;for(t in n)if(i=!0,!this.getEventsForCalendar(n[t]).hasRangeCached(e))return!1;return!!i||r.containsRange(e)},setRange:function(e){var t,i,n,r,s,o=this,a=o.calendarMap,l=!0,c=!0;for(n in o.range=e.clone(),a)s=!0,t=(i=o.getEventsForCalendar(a[n])).hasRangeCached(e),c=c&&t,i.setRange(e),t||(r=r||[],i.on("load",function(e,t,i){Ext.Array.remove(r,e),l=l&&i,0===r.length&&o.doBulkLoad(l)},null,{single:!0}),r.push(i),o.activeLoad=!0);s&&c?o.checkData(!0):r&&o.fireEvent("beforeload",o)},doDestroy:function(){var e,t=this.calendarMap;for(e in t)this.untrackCalendar(t[e]);this.calendarMap=this.stores=null,this.setSource(null),this.callParent()},privates:{checkData:function(e){var t,i,n,r,s,o,a=this.calendarMap,l=Ext.apply({},a),c=this.getSource().getRange(),u=c.length,d=[],h=this.range;for(h&&(s=h.start,o=h.end),t=0;t<u;++t)l[i=(n=c[t]).getId()]&&(delete l[i],this.untrackCalendar(a[i])),this.trackCalendar(n),h&&(r=this.getEventsForCalendar(n)).getCount()&&Ext.Array.push(d,r.getInRange(s,o)),a[i]=n;for(i in l)this.untrackCalendar(l[i]),delete a[i];!0!==e&&h&&this.setRange(h),this.loadRecords(d)},doBulkLoad:function(e){var t,i,n=this.calendarMap,r=this.range,s=[];if(e){for(t in n)i=this.getEventsForCalendar(n[t]),Ext.Array.push(s,i.getInRange(r.start,r.end));this.loadRecords(s)}this.fireEvent("load",this,s,e),this.activeLoad=!1},fireChangeEvent:function(){return!1},getEventsForCalendar:function(e){var t=null;return e.isModel||(e=this.calendarMap[e]),e&&(t=e.events()),t},onEventStoreAdd:function(e,t){var i,n,r=this.range,s=t.length,o=[];for(i=0;i<s;++i)(n=t[i]).occursInRange(r.start,r.end)&&o.push(n);0<o.length&&this.getDataSource().add(o)},onEventStoreBeforeUpdate:function(e,t){t.$moving||(this.suspendEvents(),this.lastIndex=this.indexOf(t))},onEventStoreClear:function(e,t){var i;0<t.length&&(this.suspendEvents(),i=this.getDataSource().remove(t),this.resumeEvents(),i&&this.fireEvent("refresh",this))},onEventStorePrefetch:function(e,t,i){this.getDataSource().remove(i)},onEventStoreRefresh:function(){this.activeLoad||this.checkData()},onEventStoreRemove:function(e,t){this.getDataSource().remove(t)},onEventStoreUpdate:function(e,t,i,n,r){if(!t.$moving){var s=this,o=s.lastIndex,a=-1!==s.lastIndex,l=s.contains(t);s.resumeEvents(),a&&l?s.fireEvent("update",s,t,i,n,r):a&&!l?s.fireEvent("remove",s,[t],o,!1):!a&&l&&s.fireEvent("add",s,[t],s.indexOf(t))}},trackCalendar:function(e){var t=this.getEventsForCalendar(e);t.sourceListeners=t.on({destroyable:!0,scope:this,add:"onEventStoreAdd",beforeupdate:"onEventStoreBeforeUpdate",clear:"onEventStoreClear",prefetch:"onEventStorePrefetch",refresh:"onEventStoreRefresh",remove:"onEventStoreRemove",update:"onEventStoreUpdate"})},untrackCalendar:function(e){var t=this.getEventsForCalendar(e);t.sourceListeners=Ext.destroy(t.sourceListeners)}}}),Ext.define("Ext.calendar.store.Calendars",{extend:Ext.data.Store,alias:"store.calendar-calendars",config:{eventStoreDefaults:null},model:"Ext.calendar.model.Calendar",getEventSource:function(){var e=this.eventSource;return e||(this.eventSource=e=new Ext.calendar.store.EventSource({source:this})),e},onCollectionAdd:function(e,t){var i,n,r=this.getEventStoreDefaults(),s=t.items,o=s.length;if(this.callParent([e,t]),r)for(i=0;i<o;++i)(n=s[i]).hasOwnProperty("eventStoreDefaults")||(n.eventStoreDefaults=Ext.merge({},n.eventStoreDefaults,r))},doDestroy:function(){this.eventSource=Ext.destroy(this.eventSource),this.callParent()}}),Ext.define("Ext.calendar.view.Base",{extend:Ext.Gadget,mixins:[Ext.mixin.ConfigState],alternateStateConfig:"compactOptions",config:{addForm:{xtype:"calendar-form-add"},compact:!1,compactOptions:null,controlStoreRange:!0,editForm:{xtype:"calendar-form-edit"},eventDefaults:{xtype:"calendar-event"},gestureNavigation:!0,header:null,store:null,timezoneOffset:void 0,value:void 0},platformConfig:{"!desktop":{compact:!0}},twoWayBindable:{value:1},constructor:function(e){this.eventMap={},this.eventPool={},this.callParent([e])},getForm:function(){return this.form||null},moveNext:function(){this.setValue(this.calculateMoveNext())},movePrevious:function(){this.setValue(this.calculateMovePrevious())},navigate:function(e,t){var i=Ext.Date;0!==e&&this.setValue(i.add(this.getValue(),t||i.DAY,e,!0))},showAddForm:function(e,t){var i,n=Ext.Date;this.getAddForm()&&(e||(i=this.getDefaultCreateRange(),e=this.createModel({startDate:i.start,endDate:n.add(i.end,n.DAY,1),allDay:!0})),this.doShowForm(e,"add",this.createAddForm(),"onFormCreateSave",t))},showEditForm:function(e,t){this.getEditForm()&&this.doShowForm(e,"edit",this.createEditForm(),"onFormEditSave",t)},createAddForm:function(){return Ext.merge({view:this},this.getAddForm())},createEditForm:function(e){return Ext.merge({view:this},this.getEditForm())},getEventSource:function(){return this.eventSource},updateCompact:function(e){var t=this.baseCls,i=this.getHeader();this.toggleCls(Ext.baseCSSPrefix+"calendar-compact",e),this.toggleCls(t+"-compact",e),this.toggleCls(Ext.baseCSSPrefix+"calendar-large",!e),this.toggleCls(t+"-large",!e),i&&i.setCompact(e),this.toggleConfigState(e)},updateCompactOptions:function(){!this.isConfiguring&&this.getCompact()&&this.toggleConfigState(!0)},updateGestureNavigation:function(e){var t;Ext.supports.Touch&&(t=e?"on":"un",this.getBodyElement()[t]("swipe","onBodySwipe",this))},updateHeader:function(e,t){t&&t.destroy(),e&&(e.setCompact(this.getCompact()),this.refreshHeaders())},applyStore:function(e){return e=e&&Ext.StoreManager.lookup(e,"calendar-calendars")},updateStore:function(e,t){var i=this;i.eventSource=null,t&&(t.getAutoDestroy()?t.destroy():(t.getEventSource().un(i.getSourceListeners()),t.un(i.getStoreListeners()))),e&&(e.on(i.getStoreListeners()),i.eventSource=e.getEventSource(),i.eventSource.on(i.getSourceListeners()),i.isConfiguring||(i.onSourceAttach(),i.refreshEvents()))},applyTimezoneOffset:function(e){return this.autoOffset=!1,void 0===e&&(e=Ext.calendar.date.Util.getDefaultTimezoneOffset(),this.autoOffset=!0),e},applyValue:function(e,t){return e=Ext.Date.clearTime(e||Ext.calendar.date.Util.getLocalNow(),!0),t&&t.getTime()===e.getTime()&&(e=void 0),e},updateValue:function(e){this.isConfiguring||this.fireEvent("valuechange",this,{value:e})},doDestroy:function(){this.clearEvents(),this.form=Ext.destroy(this.form),this.setHeader(null),this.setStore(null),this.callParent()},privates:{$eventCls:Ext.baseCSSPrefix+"calendar-event",$eventInnerCls:Ext.baseCSSPrefix+"calendar-event-inner",$eventColorCls:Ext.baseCSSPrefix+"calendar-event-marker-color",$staticEventCls:Ext.baseCSSPrefix+"calendar-event-static",$tableCls:Ext.baseCSSPrefix+"calendar-table",eventRefreshSuspend:0,refreshCounter:0,forwardDirection:"left",backwardDirection:"right",dateInfo:null,calculateMove:function(e){var t=this.getMoveInterval(),i=this.getMoveBaseValue();return Ext.Date.add(i,t.unit,e*t.amount,!0)},calculateMoveNext:function(){return this.calculateMove(1)},calculateMovePrevious:function(){return this.calculateMove(-1)},clearEvents:function(){var e,t=this.eventMap;for(e in t)t[e].destroy();this.eventMap={}},createEvent:function(e,t,i){var n,r,s=Ext.apply({},this.getEventDefaults());return i?(r=this.getUtcNow(),t.startDate=r,t.endDate=r):t.palette=this.getEventPalette(e),(t=t||{}).model=e,t.view=this,n=Ext.widget(Ext.apply(t,s)),i||(this.eventMap[n.id]=n),n},createEvents:function(e,t){var i,n=e.length,r=[];for(i=0;i<n;++i)r.push(this.createEvent(e[i],Ext.apply({},t)));return r},createModel:function(e){return this.getEventSource().createEvent(e)},doRefresh:Ext.privateFn,doRefreshEvents:Ext.privateFn,doShowForm:function(r,s,e,o,a){var t,l=this;l.getStore()&&r.isEditable()&&!1!==l.fireEvent("beforeevent"+s,l,{event:r})&&(a=a||{},l.form=t=Ext.create(Ext.apply({event:r},e)),t.on({save:function(t,e){var i=e.data,n={event:r,data:i,validate:Ext.Promise.resolve(!0)};l.fireEvent("validateevent"+s,l,n),n.validate.then(function(e){!1!==e?(a.onSave&&a.onSave.call(a.scope||l,l,r,i),l[o](t,r,i),l.fireEvent("event"+s,l,{event:r,data:i})):l.onFormCancel(t)})},cancel:function(e,t){a.onCancel&&a.onCancel.call(a.scope||l,l,r),l.onFormCancel(e),l.fireEvent("event"+s+"cancel",l,{event:r})},close:function(e){a.onCancel&&a.onCancel.call(a.scope||l,l,r),l.onFormCancel(e)},drop:function(t){var e={event:r,validate:Ext.Promise.resolve(!0)};l.fireEvent("validateeventdrop",l,e),e.validate.then(function(e){!1!==e?(a.onDrop&&a.onDrop.call(a.scope||l,l,r),l.onFormDrop(t,r),l.fireEvent("eventdrop",l,{event:r})):l.onFormCancel(t)})}}),t.show())},getBodyElement:function(){return this.element},getCalendar:function(e){return this.getStore().getById(e)},getDaysSpanned:function(e,t,i){var n=Ext.Date;return i?n.diff(e,t,n.DAY):(e=this.utcToLocal(e),t=this.utcToLocal(t),Ext.calendar.model.Event.getDaysSpanned(e,t))},getDefaultCreateRange:function(){var e,t=Ext.calendar.date.Util.getLocalNow(),i=this.getDisplayRange();return t=this.toUtcOffset(Ext.Date.clearTime(t,!0)),e=i.contains(t)?Ext.Date.localToUtc(t):this.toUtcOffset(i.start),new Ext.calendar.date.Range(e,e)},getDefaultPalette:function(){var e,t,i=this.getStore(),n=Ext.calendar.theme.Theme;return i&&(e=i.first())&&(t=e.getBaseColor()),n.getPalette(t||n.colors[0])},getEditableCalendars:function(){var e,t=this.getStore();return t&&(e=Ext.Array.filter(t.getRange(),function(e){return e.isEditable()})),e||[]},getEvent:function(e){var t,i=this.$eventCls;return e.isEvent&&(e=e.target),Ext.fly(e).hasCls(i)||(e=Ext.fly(e).up("."+i,this.element,!0)),t=e.getAttribute("data-eventId"),this.getEventSource().getById(t)},getEventDaysSpanned:function(e){return this.getDaysSpanned(e.getStartDate(),e.getEndDate(),e.getAllDay())},getEventPalette:function(e){var t=e.getColor()||e.getCalendar().getBaseColor();return Ext.calendar.theme.Theme.getPalette(t)},getMoveBaseValue:function(){return this.getValue()},getMoveInteral:Ext.privateFn,getSourceListeners:function(){return{scope:this,add:"onSourceAdd",refresh:"onSourceRefresh",remove:"onSourceRemove",update:"onSourceUpdate"}},getStoreListeners:function(){return{scope:this,update:"onStoreUpdate"}},getUtcNow:function(){return Ext.Date.utcToLocal(new Date)},handleChange:function(t,i,n,e){var r=this,s={event:i,newRange:n.clone(),validate:Ext.Promise.resolve(!0)},o=e||Ext.emptyFn;r.fireEvent("validateevent"+t,r,s),s.validate.then(function(e){!1!==e?(o(!0),i.setRange(n),r.fireEvent("event"+t,r,{event:i,newRange:n.clone()})):o(!1)})},handleChangeStart:function(e,t){var i=t.isEditable();return i=i&&this.fireEvent("beforeevent"+e+"start",this,{event:t})},handleResize:Ext.privateFn,hasEditableCalendars:function(){return 0<this.getEditableCalendars().length},isEventHidden:function(e){var t=e.getCalendar();return!t||t.isHidden()},onBodySwipe:function(e){e.direction===this.forwardDirection?this.moveNext():e.direction===this.backwardDirection&&this.movePrevious()},onEventTap:function(e){this.fireEvent("eventtap",this,{event:e}),this.showEditForm(e)},onFormCreateSave:function(e,t,i){t.setData(i),t.setCalendar(this.getCalendar(t.getCalendarId())),this.getEventSource().add(t),this.form=Ext.destroy(e)},onFormEditSave:function(e,t,i){var n,r=t.getCalendar();this.suspendEventRefresh(),t.setData(i),n=t.getCalendarId(),r.id!==n&&(t.setCalendar(this.getCalendar(n)),this.getEventSource().move(t,r)),this.resumeEventRefresh(),this.refreshEvents(),this.form=Ext.destroy(e)},onFormDrop:function(e,t){this.getEventSource().remove(t),this.form=Ext.destroy(e)},onFormCancel:function(e){this.form=Ext.destroy(e)},onSourceAdd:function(){this.refreshEvents()},onSourceAttach:Ext.privateFn,onSourceRefresh:function(){this.refreshEvents()},onSourceRemove:function(){this.refreshEvents()},onSourceUpdate:function(){this.refreshEvents()},onStoreUpdate:function(){this.refreshEvents()},refresh:function(){this.isConfiguring||(++this.refreshCounter,this.doRefresh(),this.hasListeners.refresh&&this.fireEvent("refresh",this))},refreshEvents:function(){this.eventRefreshSuspend||this.isConfiguring||(this.refreshCounter||this.refresh(),this.doRefreshEvents())},refreshHeaders:Ext.privateFn,resumeEventRefresh:function(){--this.eventRefreshSuspend},setSourceRange:function(e){if(this.getControlStoreRange()){var t,i=this.getEventSource();i&&(e=Ext.calendar.date.Util.expandRange(e),t=i.hasRangeCached(e),i.setRange(e),t&&this.refreshEvents())}},suspendEventRefresh:function(){++this.eventRefreshSuspend},toUtcOffset:function(e){var t,i=Ext.Date,n=i.localToUtc(e),r=this.autoOffset,s=r?n.getTimezoneOffset():this.getTimezoneOffset();return r&&(t=e.getTimezoneOffset())!==s&&(s+=t-s),i.add(n,i.MINUTE,s,!1)},utcToLocal:function(e){var t=Ext.Date,i=this.getTimezoneOffset(),n=e.getTimezoneOffset();return this.autoOffset?t.clone(e):t.subtract(e,t.MINUTE,i-n,!0)},utcTimezoneOffset:function(e){var t=Ext.Date,i=this.autoOffset?e.getTimezoneOffset():this.getTimezoneOffset();return t.subtract(e,t.MINUTE,i,!0)}}}),Ext.define("Ext.overrides.calendar.view.Base",{override:"Ext.calendar.view.Base",constructor:function(e){this.callParent([e]),this.element.on("resize","handleResize",this)},onRender:function(){this.callParent(),this.parent||this.refresh()},privates:{refreshEvents:function(){var e=this.element;if(!e.isPainted()&&!this.refreshPaintListener)return e.on("painted","refreshEvents",this,{single:!0}),void(this.refreshPaintListener=!0);this.refreshPaintListener=!1,this.callParent()}}}),Ext.define("Ext.calendar.view.DaysRenderer",{end:null,start:null,view:null,constructor:function(e){var t,i;Ext.apply(this,e),i=(t=this.view).slotTicks,this.slots=(t.getEndTime()-t.getStartTime())*(60/i),this.offset=t.MS_TO_MINUTES*i,this.events=[]},addIf:function(e){var t,i,n=this.start,r=this.view,s=this.offset;!e.isSpan()&&e.isContainedByRange(n,this.end)&&(t=Math.max(0,(r.roundDate(e.getStartDate())-n)/s),i=Math.min(this.slots,(r.roundDate(e.getEndDate())-n)/s),this.events.push({event:e,start:t,end:i,len:i-t,colIdx:-1,overlaps:[],edgeWeight:-1,forwardPos:-1,backwardPos:-1}))},calculate:function(){var e,t,i,n,r=this.events;if(r.sort(this.sortEvents),e=this.buildColumns(r),this.constructOverlaps(e),n=e[0]){for(t=n.length,i=0;i<t;++i)this.calculateEdgeWeights(n[i]);for(i=0;i<t;++i)this.calculatePositions(n[i],0,0)}},hasEvents:function(){return 0<this.events.length},privates:{appendOverlappingEvents:function(e,t){this.doOverlap(e,t,e.overlaps)},buildColumns:function(e){var t,i,n,r,s,o=e.length,a=[];for(t=0;t<o;++t){for(s=-1,r=e[t],i=0,n=a.length;i<n;++i)if(!this.hasOverlappingEvents(r,a[i])){s=i;break}-1===s&&(a[s=a.length]=[]),a[s].push(r),r.colIdx=s}return a},calculateEdgeWeights:function(e){var t,i=e.overlaps,n=i.length,r=e.edgeWeight;if(-1===r){for(t=r=0;t<n;++t)r=Math.max(r,this.calculateEdgeWeights(i[t])+1);e.edgeWeight=r}return r},calculatePositions:function(e,t,i){var n,r,s,o,a=e.overlaps,l=a.length,c=t+1;if(-1===e.forwardPos)for(0===l?e.forwardPos=1:(a.sort(this.sortOverlaps),s=a[0],this.calculatePositions(s,c,i),e.forwardPos=s.backwardPos),o=(n=e.forwardPos)-i,e.backwardPos=n-o/c,r=1;r<l;++r)this.calculatePositions(a[r],0,n)},constructOverlaps:function(e){var t,i,n,r,s,o,a=e.length;for(i=0;i<a;++i)for(n=0,s=(t=e[i]).length;n<s;++n)for(o=t[n],r=i+1;r<a;++r)this.appendOverlappingEvents(o,e[r])},doOverlap:function(e,t,i){var n,r,s=t.length,o=!1;for(n=0;n<s;++n)if(r=t[n],this.overlaps(e,r)){if(!i)return!0;i.push(r),o=!0}return o},hasOverlappingEvents:function(e,t){return this.doOverlap(e,t)},overlaps:function(e,t){return e.start<t.end&&e.end>t.start},sortEvents:function(e,t){return Ext.calendar.model.EventBase.sort(e.event,t.event)},sortOverlaps:function(e,t){return t.edgeWeight-e.edgeWeight||(e.backwardPos||0)-(t.backwardPos||0)||Ext.calendar.model.EventBase.sort(e.event,t.event)}}}),Ext.define("Ext.calendar.view.Days",{extend:Ext.calendar.view.Base,xtype:"calendar-daysview",isDaysView:!0,baseCls:Ext.baseCSSPrefix+"calendar-days",cellOverflowScrollBug:Ext.isGecko||Ext.isIE11m||Ext.isEdge,config:{allowSelection:!0,compactOptions:{displayOverlap:!1,showNowMarker:!1,timeFormat:"g",timeRenderer:function(e,t,i){var n,r,s=Ext.Date,o="";return i&&(r=Ext.baseCSSPrefix+"calendar-days-time-ampm",(n=s.clone(this.baseDate)).setHours(e),o='<div class="'+r+'">'+Ext.Date.format(n,"a")+"</div>"),t+o}},displayOverlap:!0,draggable:!0,droppable:!0,endTime:20,resizeEvents:!0,showNowMarker:!0,startTime:8,timeFormat:"H:i",timeRenderer:null,visibleDays:4},constructor:function(e){var t=this;t.slotsPerHour=60/t.slotTicks,t.callParent([e]),t.scrollable=t.createScroller(),t.bodyTable.on("tap","handleEventTap",t,{delegate:"."+t.$eventCls}),t.allDayContent.on("tap","handleEventTap",t,{delegate:"."+t.$eventCls}),t.recalculate(),t.refreshHeaders()},getDisplayRange:function(){var e;return this.isConfiguring&&this.recalculate(),e=this.dateInfo.active,new Ext.calendar.date.Range(this.utcToLocal(e.start),this.utcToLocal(e.end))},getVisibleRange:function(){var e,t=Ext.Date;return this.isConfiguring&&this.recalculate(),e=this.dateInfo.active,new Ext.calendar.date.Range(t.clone(e.start),t.clone(e.end))},setTimeRange:function(e,t){this.isConfiguring=!0,this.setStartTime(e),this.setEndTime(t),this.isConfiguring=!1,this.suspendEventRefresh(),this.recalculate(),this.resumeEventRefresh(),this.refresh()},updateAllowSelection:function(e){var t=this;t.allDaySelectionListeners=t.selectionListeners=Ext.destroy(t.selectionListeners,t.allDaySelectionListeners),e&&(t.bodySelectionListeners=t.bodyTable.on({destroyable:!0,scope:t,touchstart:"onBodyTouchStart",touchmove:"onBodyTouchMove",touchend:"onBodyTouchEnd"}),t.allDaySelectionListeners=t.headerWrap.on({destroyable:!0,scope:t,touchstart:"onAllDayTouchStart",touchmove:"onAllDayTouchMove",touchend:"onAllDayTouchEnd"}))},updateDisplayOverlap:function(e){this.isConfiguring||this.refreshEvents()},applyDraggable:function(e){return e=e&&new Ext.calendar.dd.DaysBodySource},updateDraggable:function(e,t){t&&(t.destroy(),this.allDayDrag=Ext.destroy(this.allDayDrag)),e&&(e.setView(this),this.allDayDrag=new Ext.calendar.dd.DaysAllDaySource,this.allDayDrag.setView(this))},applyDroppable:function(e){return e&&!e.isInstance&&(e=new Ext.calendar.dd.DaysBodyTarget(e)),e},updateDroppable:function(e,t){t&&(t.destroy(),this.allDayDrop=Ext.destroy(this.allDayDrop)),e&&(e.setView(this),this.allDayDrop=new Ext.calendar.dd.DaysAllDayTarget,this.allDayDrop.setView(this))},updateEndTime:function(){this.calculateSlots(),this.isConfiguring||this.refresh()},updateResizeEvents:function(e){this.dragListeners=Ext.destroy(this.dragListeners),e&&(this.dragListeners=this.bodyTable.on({scope:this,dragstart:"onResizerDragStart",drag:"onResizerDrag",dragend:"onResizerDragEnd",destroyable:!0,delegate:"."+this.$resizerCls,priority:1001})),this.isConfiguring||this.destroying||this.refreshEvents()},updateShowNowMarker:function(e){var t=this.markerEl;Ext.uninterval(this.showNowInterval),this.showNowInterval=null,this.markerEl=null,t&&Ext.fly(t).remove(),e&&(this.isConfiguring||this.checkNowMarker(),this.showNowInterval=Ext.interval(this.checkNowMarker,3e5,this))},updateStartTime:function(){this.calculateSlots(),this.isConfiguring||this.refresh()},updateTimeFormat:function(){this.isConfiguring||this.updateTimeLabels()},updateTimeRenderer:function(){this.isConfiguring||this.updateTimeLabels()},updateTimezoneOffset:function(){this.isConfiguring||this.recalculate()},updateValue:function(e,t){this.isConfiguring||(this.recalculate(),this.refreshHeaders(),this.checkNowMarker(),this.refreshEvents()),this.callParent([e,t])},updateVisibleDays:function(){this.isConfiguring||(this.suspendEventRefresh(),this.recalculate(),this.resumeEventRefresh(),this.refresh())},getElementConfig:function(){var e=this.callParent(),t=[{tag:"table",cls:this.$tableCls+" "+this.$bodyTableCls,reference:"bodyTable",children:[{tag:"tbody",children:[{tag:"tr",reference:"timeRow",children:[{tag:"td",reference:"timeContainer",cls:this.$timeContainerCls}]}]}]}];return e.children=[{cls:Ext.baseCSSPrefix+"calendar-days-table-wrap",reference:"tableWrap",children:[{cls:Ext.baseCSSPrefix+"calendar-days-header-wrap",reference:"headerWrap",children:[{cls:Ext.baseCSSPrefix+"calendar-days-allday-background-wrap",reference:"allDayBackgroundWrap",children:[{tag:"table",cls:this.$tableCls+" "+Ext.baseCSSPrefix+"calendar-days-allday-background-table",children:[{tag:"tbody",children:[{tag:"tr",reference:"allDayBackgroundRow",children:[{tag:"td",cls:this.$headerGutterCls}]}]}]}]},{tag:"table",cls:this.$tableCls+" "+Ext.baseCSSPrefix+"calendar-days-allday-events",children:[{tag:"tbody",reference:"allDayContent",children:[{tag:"tr",reference:"allDayEmptyRow"}]}]}]},{cls:Ext.baseCSSPrefix+"calendar-days-body-row",children:[{cls:Ext.baseCSSPrefix+"calendar-days-body-cell",reference:this.cellOverflowScrollBug?null:"bodyWrap",children:this.cellOverflowScrollBug?[{cls:Ext.baseCSSPrefix+"calendar-days-body-wrap",reference:"bodyWrap",children:t}]:t}]}]}],e},doDestroy:function(){this.scrollable=Ext.destroy(this.scrollable),this.setAllowSelection(!1),this.setShowNowMarker(!1),this.setResizeEvents(!1),this.setDraggable(null),this.setDroppable(null),this.callParent()},privates:{$allDayBackgroundCls:Ext.baseCSSPrefix+"calendar-days-allday-background-cell",$allDayEmptyRowCls:Ext.baseCSSPrefix+"calendar-days-allday-empty-cell",$bodyCls:Ext.baseCSSPrefix+"calendar-days-body",$bodyTableCls:Ext.baseCSSPrefix+"calendar-days-body-table",$dayColumnCls:Ext.baseCSSPrefix+"calendar-days-day-column",$dayEventContainerCls:Ext.baseCSSPrefix+"calendar-days-day-event-container",$headerGutterCls:Ext.baseCSSPrefix+"calendar-days-header-gutter",$markerAltCls:Ext.baseCSSPrefix+"calendar-days-marker-alt",$markerCls:Ext.baseCSSPrefix+"calendar-days-marker",$nowMarkerCls:Ext.baseCSSPrefix+"calendar-days-now-marker",$resizerCls:Ext.baseCSSPrefix+"calendar-event-resizer",$resizingCls:Ext.baseCSSPrefix+"calendar-event-resizing",$selectionCls:Ext.baseCSSPrefix+"calendar-days-selection",$tableCls:Ext.baseCSSPrefix+"calendar-days-table",$timeCls:Ext.baseCSSPrefix+"calendar-days-time",$timeContainerCls:Ext.baseCSSPrefix+"calendar-days-time-ct",baseDate:new Date(2008,0,1),MS_TO_MINUTES:6e4,minimumEventMinutes:30,slotTicks:5,slotsPerHour:null,backPosName:"left",forwardPosName:"right",headerScrollOffsetName:"padding-right",calculateSlots:function(){this.maxSlots=2*(this.getEndTime()-this.getStartTime())},checkNowMarker:function(){this.getShowNowMarker()&&this.doCheckNowMarker()},clearAndPopulate:function(e,t,i){for(var n,r=e.dom.childNodes,s=t.length,o=i?0:1;r.length>o;)e.removeChild(r[o]);for(n=0;n<s;++n)e.appendChild(t[n],!0)},clearEvents:function(){var e,t;if(this.callParent(),e=this.allDayContent.dom)for(t=e.childNodes;1<t.length;)e.removeChild(t[0])},clearSelected:function(){this.selectRange(-1,-1)},constructAllDayEvents:function(e){var t,i,n,r,s,o,a,l,c,u,d=Ext.Date,h=e.length,f=this.getVisibleDays(),g=this.allDayEmptyRow.dom,p=this.allDayContent.dom;for(t=new Ext.calendar.view.WeeksRenderer({view:this,start:d.clone(this.dateInfo.full.start),days:f,index:0,maxEvents:null}),n=0;n<h;++n)i=e[n],!this.isEventHidden(i)&&i.isSpan()&&t.addIf(i);if(g.firstChild.className===this.$headerGutterCls&&g.removeChild(g.firstChild),t.hasEvents())for(t.calculate(),n=0,h=t.rows.length;n<h;++n){for(r=t.compress(n),c=document.createElement("tr"),s=0,l=r.length;s<l;++s)o=r[s],(u=document.createElement("td")).colSpan=o.len,o.isEmpty||((a=this.createEvent(o.event,{},!1)).addCls(this.$staticEventCls),u.appendChild(a.element.dom)),c.appendChild(u);p.insertBefore(c,g)}Ext.fly(p.firstChild).insertFirst({tag:"td",cls:this.$headerGutterCls,rowSpan:p.childNodes.length})},constructEvents:function(){var e,t,i,n,r,s=this,o=Ext.Date,a=s.getEventSource().getRange(),l=a.length,c=s.getVisibleDays(),u=o.clone(s.dateInfo.visible.start),d=u,h=s.getEndTime()-s.getStartTime();for(s.constructAllDayEvents(a),e=0;e<c;++e){for(d=o.add(u,o.HOUR,h,!0),n=document.createDocumentFragment(),i=new Ext.calendar.view.DaysRenderer({view:s,start:u,end:d}),t=0;t<l;++t)r=a[t],s.isEventHidden(r)||i.addIf(r);i.hasEvents()&&(i.calculate(),s.processDay(i,n)),s.getEventColumn(e).appendChild(n),u=o.add(u,o.DAY,1)}},createEvent:function(e,t,i){var n=!!e&&e.getAllDay();return(t=t||{}).mode=n?"weekspan":"day",n||(t.resize=this.getResizeEvents()),this.callParent([e,t,i])},createScroller:function(){return new Ext.scroll.NativeScroller({element:this.bodyWrap,x:!1,y:!0})},doCheckNowMarker:function(){var e,t,i=this,n=Ext.Date,r=i.markerEl,s=i.roundDate(Ext.calendar.date.Util.getLocalNow()),o=i.dateInfo.visible,a=i.utcToLocal(o.start),l=i.utcToLocal(o.end),c=i.getVisibleDays(),u=s.getFullYear(),d=s.getMonth(),h=s.getDate(),f=s.getHours(),g=s.getMinutes(),p=i.getStartTime(),m=i.getEndTime();if(r&&Ext.fly(r).remove(),i.markerEl=null,i.element.isVisible(!0)){if(a<=s&&s<l)for(t=0;t<c;++t){if(a.getFullYear()===u&&a.getMonth()===d&&a.getDate()===h){p<=f&&(f<m||f===m&&0===g)&&(a.setHours(p),e=n.diff(a,s,n.MINUTE)/i.slotTicks*i.getSlotStyle().minSlotHeight);break}a=n.add(a,n.DAY,1)}void 0!==e&&(i.markerEl=Ext.fly(i.getColumn(t)).createChild({cls:i.$nowMarkerCls,style:{top:e+"px"}},null,!0))}},doRecalculate:function(e){var t,i,n=Ext.Date,r=Ext.calendar.date.Range;return e=e||n.clone(this.getValue()),e=this.toUtcOffset(n.clearTime(e,!0)),t=n.add(e,n.DAY,this.getVisibleDays()),i=n.subtract(t,n.DAY,1),{full:new r(e,t),active:new r(e,i),visible:new r(n.add(e,n.HOUR,this.getStartTime(),!0),n.subtract(t,n.HOUR,24-this.getEndTime(),!0))}},doRefresh:function(){var e,t=this,i=t.timeContainer,n=t.allDayBackgroundRow;t.dateInfo||(t.suspendEventRefresh(),t.recalculate(),t.resumeEventRefresh()),i.dom.innerHTML="",i.appendChild(t.generateTimeElements(),!0),t.clearAndPopulate(t.allDayEmptyRow,t.generateAllDayCells(t.$allDayEmptyRowCls,"&#160;"),!0),t.clearAndPopulate(n,t.generateAllDayCells(t.$allDayBackgroundCls)),t.clearAndPopulate(t.timeRow,t.generateColumns()),e=Ext.Array.toArray(t.allDayBackgroundRow.dom.childNodes),t.backgroundCells=Ext.Array.slice(e,1),t.checkNowMarker(),t.refreshHeaders(),t.syncHeaderScroll(),t.refreshEvents()},doRefreshEvents:function(){var e=this.getEventSource();this.clearEvents(),e&&e.getCount()&&this.constructEvents()},generateAllDayCells:function(e,t){var i,n=[],r=this.getVisibleDays();for(i=0;i<r;++i)n.push({tag:"td",cls:e,html:t});return n},generateColumns:function(){var e,t,i,n,r=this.getVisibleDays(),s=this.getStartTime(),o=this.getEndTime(),a=[];for(t=0;t<r;++t){for(n=[],e={tag:"td",cls:this.$dayColumnCls,"data-index":t,children:[{cls:this.$dayEventContainerCls},{cls:this.$markerContainerCls,children:n}]},i=s;i<o;++i)n.push({cls:this.$markerCls,children:[{cls:this.$markerAltCls}]});a.push(e)}return a},generateTimeElements:function(){var e,t=this.generateTimeLabels(),i=t.length,n=[];for(e=0;e<i;++e)n.push({cls:this.$timeCls,html:t[e]});return n},generateTimeLabels:function(){var e,t,i,n,r,s=Ext.Date,o=s.clone(this.baseDate),a=this.getStartTime(),l=this.getEndTime(),c=this.getTimeFormat(),u=[],d=this.getTimeRenderer();for(n=a;n<l;++n)o.setHours(n),i=s.format(o,c),d&&(r=!1,n<12&&!e?r=e=!0:12<=n&&!t&&(r=t=!0),i=d.call(this,n,i,r)),u.push(i);return u},getBodyElement:function(){return this.bodyTable},getColumn:function(e){return this.getColumns()[e]},getColumns:function(){return this.bodyTable.query("."+this.$dayColumnCls)},getEventColumn:function(e){return Ext.fly(this.getColumn(e)).down("."+this.$dayEventContainerCls)},getEventStyle:function(){var e,t,i,n=this.eventStyle;return n||((t=(e=this.createEvent(null,{resize:!0},!0)).element).dom.style.visibility="hidden",this.getEventColumn(0).appendChild(t.dom),(i=t.getMargin()).height=i.top+i.bottom,this.eventStyle=n={margin:i,resizerWidth:Ext.fly(t.down("."+this.$resizerCls,!0)).getWidth()},e.destroy()),n},getEventWidget:function(e){var t,i,n=this.eventMap,r=e.id;for(t in n)if((i=n[t]).getModel().id===r)return i;return null},getMoveInterval:function(){return{unit:Ext.Date.DAY,amount:this.getVisibleDays()}},getSlotStyle:function(){var e,t=this.slotStyle;return t||(e=Ext.fly(this.bodyTable.down("."+this.$markerCls,!0)).getHeight(),this.slotStyle=t={hourHeight:e,halfHeight:e/2,minSlotHeight:e/this.slotsPerHour}),t},handleEventTap:function(e){var t=this.getEvent(e);t&&(e.preventDefault(),this.onEventTap(t))},handleResize:function(){this.slotStyle=null,this.callParent(),this.refreshEvents(),this.checkNowMarker(),this.syncHeaderScroll()},onAllDayTouchEnd:function(e){var t,i,n,r,s,o,a=Ext.Date,l=this.isAllDayCreating;l&&(t=l.initialIndex,i=Ext.calendar.util.Dom.getIndexPosition(l.positions,e.pageX),n=l.startDate,s=Math.abs(i-t),i<t?(r=n,n=a.subtract(r,a.DAY,s)):r=a.add(n,a.DAY,s),o=this.createModel({startDate:a.localToUtc(n),endDate:a.add(a.localToUtc(r),a.DAY,1),allDay:!0}),this.showAddForm(o,{scope:this,onSave:this.clearSelected,onCancel:this.clearSelected}),this.isAllDayCreating=null)},onAllDayTouchMove:function(e){var t,i,n=this.isAllDayCreating;n&&(t=n.initialIndex,i=Ext.calendar.util.Dom.getIndexPosition(n.positions,e.pageX),this.selectRange(t,i))},onAllDayTouchStart:function(e){var t,i,n=Ext.Date,r=this.utcToLocal(this.dateInfo.full.start);"touch"===e.pointerType||e.getTarget("."+this.$eventCls,this.headerWrap)||(t=Ext.calendar.util.Dom.extractPositions(this.backgroundCells,"getX"),i=Ext.calendar.util.Dom.getIndexPosition(t,e.pageX),this.isAllDayCreating={positions:t,initialIndex:i,startDate:n.add(r,n.DAY,i)},this.selectRange(i,i))},onBodyTouchEnd:function(e){var t,i,n,r,s,o=this.isBodyCreating;o&&((t=o.widget)&&(r=t.getStartDate(),s=t.getEndDate(),i=function(){t.destroy()},n=this.createModel({startDate:r,endDate:s}),this.showAddForm(n,{onSave:i,onCancel:i})),this.isBodyCreating=null)},onBodyTouchMove:function(e){var t,i,n,r,s,o,a,l,c=this,u=Ext.Date,d=c.isBodyCreating,h=c.minimumEventMinutes,f=c.getEventStyle().margin;d&&((i=d.widget)||(t=(i=c.createEvent(null,{},!0)).element,i.setPalette(c.getDefaultPalette()),i.addCls(c.$resizingCls),i.setWidth("100%"),t.setZIndex(999),c.getEventColumn(d.index).appendChild(t),d.widget=i),t=i.element,(n=c.slotFromPosition(e.getY()))<0||n>c.maxSlots||((r=d.startSlot)===n&&(n=r+1),o=n<r?(s=n,r):(s=r,n),t.setStyle({top:f.top+c.slotToPosition(s)+"px",marginTop:0,marginBottom:0}),i.setHeight((o-s)*c.getSlotStyle().halfHeight-f.bottom),a=u.clone(d.baseDate),a=u.add(a,u.MINUTE,s*h,!0),l=u.add(a,u.MINUTE,(o-s)*h,!0),i.setStartDate(a),i.setEndDate(l)))},onBodyTouchStart:function(e){var t,i,n,r=Ext.Date;"touch"===e.pointerType||e.getTarget("."+this.$eventCls,this.bodyTable)||(t=e.getTarget("."+this.$dayColumnCls))&&(i=parseInt(t.getAttribute("data-index"),10),n=r.add(this.dateInfo.visible.start,r.DAY,i),this.isBodyCreating={col:t,index:i,baseDate:n,startSlot:this.slotFromPosition(e.getY())})},onResizerDrag:function(e){if(this.resizing){var t,i=Ext.Date,n=this.resizing,r=n.event,s=n.widget,o=this.getSlotStyle().halfHeight,a=this.slotFromPosition(e.getY()),l=a*o-n.eventTop,c=n.startSlot,u=r.getStartDate(),d=this.minimumEventMinutes;e.stopEvent(),a<0||a>this.maxSlots||a<=c||(n.current=t=i.add(u,i.MINUTE,d*(a-c),!0),s.setHeight(l),s.setEndDate(t))}},onResizerDragEnd:function(){if(this.resizing){function e(e){s.destroyed||(s.element.setZIndex(n.oldZIndex),s.removeCls(t.$resizingCls)),e||(s.setHeight(o),s.setEndDate(a.getEndDate()))}var t=this,i=Ext.calendar.date.Range,n=t.resizing,r=n.current,s=n.widget,o=n.height,a=n.event;t.resizing=null,r?t.handleChange("resize",a,new i(a.getStartDate(),r),e):e()}},onResizerDragStart:function(e){var t,i,n,r=this.getEvent(e);e.stopEvent(),!1!==this.handleChangeStart("resize",r)&&(n=(i=(t=this.getEventWidget(r)).element).getTop(!0),this.resizing={height:t.getHeight(),event:r,eventTop:n,startSlot:this.slotFromPosition(n,!0),widget:t,oldZIndex:i.getZIndex()},t.addCls(this.$resizingCls),i.setZIndex(999))},onSourceAttach:function(){this.recalculate()},processDay:function(e,t){var i,n,r,s,o,a,l,c,u=e.events,d=u.length,h=this.getSlotStyle().minSlotHeight,f=this.getEventStyle(),g=f.margin,p=0,m=this.getDisplayOverlap();for(this.getResizeEvents()&&(p=f.resizerWidth+5),i=0;i<d;++i)a=(n=u[i]).forwardPos,l=n.backwardPos,m&&(a=Math.min(1,l+2*(a-l))),s=l,o=1-a,r=this.createEvent(n.event),(c={marginTop:0,marginBottom:0,top:n.start*h+g.top+"px",zIndex:n.colIdx+1})[this.backPosName]=100*s+"%",c[this.forwardPosName]=100*o+"%",m&&0<n.edgeWeight&&(c.marginRight=p+"px"),r.setStyle(c),r.setHeight(n.len*h-g.bottom),t.appendChild(r.element.dom)},recalculate:function(){var e=this.doRecalculate();this.dateInfo=e,this.setSourceRange(e.full)},refreshHeaders:function(){var e=this.getHeader(),t=this.dateInfo;e&&(e.setVisibleDays(this.getVisibleDays()),t&&e.setValue(this.utcToLocal(t.full.start)))},roundDate:function(e){return new Date(Ext.Number.roundToNearest(e.getTime(),this.slotTicks))},selectRange:function(e,t){var i,n=this.backgroundCells,r=n.length;for(t<e&&(i=e,e=t,t=i),i=0;i<r;++i)Ext.fly(n[i]).toggleCls(this.$selectionCls,e<=i&&i<=t)},slotFromPosition:function(e,t){var i=e-(t?0:this.bodyTable.getY());return Math.round(i/this.getSlotStyle().halfHeight)},slotToPosition:function(e){return e*this.getSlotStyle().halfHeight},syncHeaderScroll:function(){var e,t=this.scrollable,i=this.headerScrollOffsetName;t&&(e=t.getScrollbarSize().width+"px",this.headerWrap.setStyle(i,e),this.allDayBackgroundWrap.setStyle(i,e))},updateTimeLabels:function(){var e,t,i=this.generateTimeLabels(),n=this.timeContainer.dom.childNodes;for(i.length!==n.length&&Ext.raise("Number of generated times did not match"),t=0,e=i.length;t<e;++t)n[t].innerHTML=i[t]}}}),Ext.define("Ext.calendar.panel.Days",{extend:Ext.calendar.panel.Base,xtype:"calendar-days",config:{dayHeader:{xtype:"calendar-daysheader"},eventRelayers:{view:{beforeeventdragstart:!0,validateeventdrop:!0,eventdrop:!0,beforeeventresizestart:!0,validateeventresize:!0,eventresize:!0}},view:{xtype:"calendar-daysview"}},configExtractor:{dayHeader:{dayHeaderFormat:"format"},view:{allowSelection:!0,displayOverlap:!0,draggable:!0,droppable:!0,endTime:!0,resizeEvents:!0,showNowMarker:!0,startTime:!0,timeFormat:!0,visibleDays:!0,highlightToday:!0}},setTimeRange:function(e,t){this.getView().setTimeRange(e,t)},privates:{syncHeaderSize:!0}}),Ext.define("Ext.calendar.view.Day",{extend:Ext.calendar.view.Days,xtype:"calendar-dayview",config:{compactOptions:{displayOverlap:!0},visibleDays:1},privates:{getMoveInterval:function(){return{unit:Ext.Date.DAY,amount:1}}}}),Ext.define("Ext.calendar.panel.Day",{extend:Ext.calendar.panel.Days,xtype:"calendar-day",config:{view:{xtype:"calendar-dayview"}}}),Ext.define("Ext.calendar.view.WeeksRenderer",{days:null,index:null,maxEvents:null,overflow:!0,start:null,view:null,constructor:function(e){var t,i=this,n=Ext.Date;Ext.apply(i,e),t=i.start,i.end=n.add(t,n.DAY,i.days),i.utcStart=this.view.utcTimezoneOffset(t),i.utcEnd=this.view.utcTimezoneOffset(i.end),i.hasMaxEvents=null!==i.maxEvents,i.rows=[],i.events=[],i.seen={},i.overflows=[]},addIf:function(e){var t,i;i=e.getAllDay()?(t=this.utcStart,this.utcEnd):(t=this.start,this.end),e.occursInRange(t,i)&&this.events.push(e)},calculate:function(){var e,t,i,n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v,E,b,C,S=this,w=Ext.Date,T=S.view,P=S.seen,I=S.events,A=I.length,k=S.days,D=S.end,R=S.utcEnd,M=w.clone(S.start),F=w.clone(S.utcStart),L=S.maxEvents,O=S.hasMaxEvents,B=S.overflows,N=S.overflow?1:0,V=[];for(e=0;e<k;++e){for(o=w.add(M,w.DAY,1),s=S.view.utcTimezoneOffset(o),i=[],t=0;t<A;++t)a=(n=I[t]).id,h=(f=n.getAllDay())?(u=F,d=s,R):(u=M,d=o,D),n.occursInRange(u,d)&&(m=n.isSpan(),P[a]?m&&i.push({isPlaceholder:!0,event:n,id:a}):(c=1,m&&(c=h<(l=n.getEndDate())?k-e:T.getDaysSpanned(u,l,f)),P[a]=c,i.push({event:n,id:a})));if(r=i.length,i.sort(S.sortEvents),O){if(E={},B[e]=v=[],v.$map=E,0<e)for(b=B[e-1].$map,t=0;t<r;++t)b[a=(g=i[t]).id]&&(v.push(g.event),E[a]=!0,i.splice(t,1),y=!0,--t,--r);if(0<r)if(L<r){for(p=Math.max(0,L-N),t=0,x=(C=Ext.Array.splice(i,p)).length;t<x;++t)g=C[t],v.push(g.event),E[g.id]=!0;y=!0}else 0<N&&v.length&&r===L&&(g=i.pop(),v.push(g.event),E[g.id]=!0)}V.push(i),M=o,F=s}for(y&&0<L&&S.calculateOverflows(V,B),e=0;e<k;++e)for(r=(i=V[e]).length,t=0;t<r;++t)(g=i[t]).isPlaceholder||(n=g.event,S.addToRow(n,e,P[n.id]))},compress:function(e){for(var t,i=this.rows[e],n=[],r=this.days,s=0,o=0;o<r;)(t=i[o]).event?(0<s&&(n.push({isEmpty:!0,len:s}),s=0),n.push(t),o+=t.len):(++s,++o);return 0<s&&n.push({isEmpty:!0,len:s}),n},hasEvents:function(){return 0<this.events.length},privates:{addToRow:function(e,t,i){var n,r,s,o,a,l=this.rows,c=l.length,u=i+t;for(r=0;r<c;++r){for(o=l[r],s=t;s<u&&!o[s];++s);if(s===u){n=o,a=r;break}}n||(n=this.makeRow(),l.push(n),a=l.length-1),this.occupy(e,n,a,t,u-1)},calculateOverflows:function(e,t){var i,n,r,s,o,a=this.days,l=this.maxEvents;for(i=a-2;0<=i;--i)0<(r=(n=e[i]).length)&&0===t[i].length&&r===l&&(o=(s=n[r-1]).id,t[i+1].$map[o]&&(t[i].unshift(s.event),t[i].$map[o]=!0,n.length=r-1))},makeRow:function(){var e,t=[],i=this.days;for(e=0;e<i;++e)t[e]=0;return t},occupy:function(e,t,i,n,r){var s,o=r-n+1;for(s=n;s<=r;++s)t[s]=s!==n||{event:e,len:o,start:n,weekIdx:this.index,localIdx:i}},sortEvents:function(e,t){return e=e.event,(t=t.event).isSpan()-e.isSpan()||Ext.calendar.model.Event.sort(e,t)}}}),Ext.define("Ext.calendar.view.Weeks",{extend:Ext.calendar.view.Base,xtype:"calendar-weeksview",isWeeksView:!0,baseCls:Ext.baseCSSPrefix+"calendar-weeks",config:{addOnSelect:!0,allowSelection:!0,compactOptions:{overflowText:"+{0}",showOverflow:"top"},dayFormat:"j",draggable:!0,droppable:!0,firstDayOfWeek:void 0,overflowText:"+{0} more",showOverflow:"bottom",value:void 0,visibleDays:7,visibleWeeks:2,weekendDays:void 0},constructor:function(e){this.callParent([e]),this.el.on("tap","handleEventTap",this,{delegate:"."+this.$eventCls}),this.cellTable.on("click","onOverflowClick",this,{delegate:"."+this.$overflowCls}),this.recalculate(),this.refreshHeaders()},getDisplayRange:function(){var e;return this.isConfiguring&&this.recalculate(),e=this.dateInfo[this.displayRangeProp],new Ext.calendar.date.Range(this.utcToLocal(e.start),this.utcToLocal(e.end))},getVisibleRange:function(){var e,t=Ext.Date;return this.isConfiguring&&this.recalculate(),e=this.dateInfo.visible,new Ext.calendar.date.Range(t.clone(e.start),t.clone(e.end))},updateAllowSelection:function(e){this.selectionListeners=Ext.destroy(this.selectionListeners),e&&this.el.on({destroyable:!0,scope:this,touchstart:"onTouchStart",touchmove:"onTouchMove",touchend:"onTouchEnd",longpress:"onLongPress"})},updateDayFormat:function(e){this.isConfiguring||this.refresh()},updateDaysInWeek:function(){this.refresh()},applyDraggable:function(e){return e=e&&new Ext.calendar.dd.WeeksSource(e)},updateDraggable:function(e,t){t&&t.destroy(),e&&e.setView(this)},applyDroppable:function(e){return e=e&&new Ext.calendar.dd.WeeksTarget},updateDroppable:function(e,t){t&&t.destroy(),e&&e.setView(this)},applyFirstDayOfWeek:function(e){return"number"!=typeof e&&(e=Ext.Date.firstDayOfWeek),e},updateFirstDayOfWeek:function(e){this.isConfiguring||(this.recalculate(),this.refreshHeaders(),this.refresh())},updateShowOverflow:function(e,t){var i=Ext.baseCSSPrefix+"calendar-weeks-with-overflow-",n=this.element;t&&n.removeCls(i+t),e&&n.addCls(i+e),this.isConfiguring||this.refresh()},updateTimezoneOffset:function(){this.isConfiguring||this.recalculate()},updateValue:function(e,t){this.isConfiguring||(this.suspendEventRefresh(),this.recalculate(),this.resumeEventRefresh(),this.refreshHeaders(),this.refresh()),this.callParent([e,t])},updateVisibleDays:function(){this.isConfiguring||(this.recalculate(),this.refreshHeaders(),this.refresh())},updateVisibleWeeks:function(e){var t=this,i=t.cellTable;t.suspendEventRefresh(),t.recalculate(),t.resumeEventRefresh(),i.removeChild(i.dom.firstChild),i.createChild({tag:"tbody",children:t.generateCells(t.dateInfo.requiredWeeks,!0)},null,!0),t.cells=t.queryCells(),t.isConfiguring||t.refresh()},applyWeekendDays:function(e){return e||Ext.Date.weekendDays},updateWeekendDays:function(e){this.weekendDayMap=Ext.Array.toMap(e),this.refresh()},getElementConfig:function(){var e=this.callParent();return e.children=[{tag:"table",reference:"cellTable",cls:this.$tableCls+" "+Ext.baseCSSPrefix+"calendar-weeks-week-rows",children:[{tag:"tbody"}]}],e},doDestroy:function(){this.setAllowSelection(!1),this.setDraggable(null),this.setDroppable(null),this.callParent()},privates:{displayRangeProp:"visible",domFormat:"Y-m-d",eventGutter:5,maxDayMonth:new Date(2e3,0,1),sundayDay:new Date(2e3,9,1),startMarginName:"left",trackRanges:!1,$rowCls:Ext.baseCSSPrefix+"calendar-weeks-row",$cellCls:Ext.baseCSSPrefix+"calendar-weeks-cell",$weekendCls:Ext.baseCSSPrefix+"calendar-weeks-weekend-cell",$outsideCls:Ext.baseCSSPrefix+"calendar-weeks-outside-cell",$pastCls:Ext.baseCSSPrefix+"calendar-weeks-past-cell",$futureCls:Ext.baseCSSPrefix+"calendar-weeks-future-cell",$todayCls:Ext.baseCSSPrefix+"calendar-weeks-today-cell",$selectionCls:Ext.baseCSSPrefix+"calendar-weeks-selection",$dayTextCls:Ext.baseCSSPrefix+"calendar-weeks-day-text",$hiddenCellCls:Ext.baseCSSPrefix+"calendar-weeks-hidden-cell",$cellInnerCls:Ext.baseCSSPrefix+"calendar-weeks-cell-inner",$overflowCls:Ext.baseCSSPrefix+"calendar-weeks-overflow",$cellOverflowCls:Ext.baseCSSPrefix+"calendar-weeks-overflow-cell",$overflowPopupCls:Ext.baseCSSPrefix+"calendar-weeks-overflow-popup",clearSelected:function(){var e,t=this.cells,i=t.length;for(e=0;e<i;++e)Ext.fly(t[e]).removeCls(this.$selectionCls)},constructEvents:function(){var e,t,i,n,r,s=this,o=Ext.Date,a=Ext.Date.DAYS_IN_WEEK,l=s.getEventSource().getRange(),c=l.length,u=s.getVisibleDays(),d=s.dateInfo.requiredWeeks,h=o.clone(s.dateInfo.visible.start),f=s.getEventStyle().fullHeight,g=Math.floor(s.getDaySizes().heightForEvents/f),p="bottom"===s.getShowOverflow(),m=[];for(s.weeks=m,n=document.createDocumentFragment(),e=0;e<d;++e){for(i=new Ext.calendar.view.WeeksRenderer({view:s,start:h,days:u,index:e,overflow:p,maxEvents:g}),t=0;t<c;++t)r=l[t],s.isEventHidden(r)||i.addIf(r);i.hasEvents()&&i.calculate(),s.processWeek(i,n),m.push(i),h=o.add(h,o.DAY,a)}s.element.appendChild(n)},createEvent:function(e,t,i){var n=!e||e.isSpan();return t=Ext.apply({mode:n?"weekspan":"weekinline"},t),this.callParent([e,t,i])},doRecalculate:function(e){var t,i,n,r=Ext.Date,s=r.DAYS_IN_WEEK,o=this.getVisibleWeeks(),a=Ext.calendar.date.Range;return e=e||this.getValue(),i=((e=r.clearTime(e,!0)).getDay()+s-this.getFirstDayOfWeek())%s,t=this.toUtcOffset(e),{full:new a(e=r.subtract(t,r.DAY,i),n=r.add(e,r.DAY,o*s-(s-this.getVisibleDays()))),visible:new a(e,n),active:new a(e,r.subtract(n,r.DAY,1)),requiredWeeks:o}},doRefresh:function(){var e,t,i,n,r,s,o=this,a=Ext.Date,l=o.dateInfo,c=o.getDayFormat(),u=o.weekendDayMap,d=a.clearTime(Ext.calendar.date.Util.getLocalNow()),h=o.utcToLocal(l.visible.start),f=[],g=o.trackRanges,p=o.getVisibleDays(),m=Ext.Date.DAYS_IN_WEEK,x=d.getFullYear(),y=d.getMonth(),v=d.getDate();for(g&&(r=o.utcToLocal(l.month.start),s=o.utcToLocal(l.month.end)),i=0,t=(e=o.cells).length;i<t;++i)n=e[i],f.length=0,f.push(o.$cellCls),u[h.getDay()]&&f.push(o.$weekendCls),g&&(h<r?f.push(o.$pastCls,o.$outsideCls):s<h&&f.push(o.$futureCls,o.$outsideCls)),h.getFullYear()===x&&h.getMonth()===y&&h.getDate()===v&&(f.push(o.$todayCls),o.highlightToday&&f.push(o.$todayCellHighlightCls+"-weeks-day")),p<=i%m&&f.push(o.$hiddenCellCls),n.className=f.join(" "),n.setAttribute("data-date",a.format(h,o.domFormat)),n.firstChild.firstChild.innerHTML=a.format(h,c),h=a.add(h,a.DAY,1);o.refreshEvents()},doRefreshEvents:function(){var e=this.getEventSource();this.clearEvents(),this.hideOverflowPopup(),e&&e.getCount()&&this.constructEvents()},findIndex:function(e,t){for(var i=0,n=e.length;i<n&&!((t-=e[i])<=0);)++i;return i},generateCells:function(e,t){var i,n,r,s,o,a=Ext.Date.DAYS_IN_WEEK,l=[];for(t&&(i=100/e,Ext.isGecko&&(i=parseInt(i,10)),o={height:i+"%"}),n=0;n<e;++n){for(s=[],r=0;r<a;++r)s.push({tag:"td","data-index":r,cls:this.$cellCls,children:[{cls:this.$cellInnerCls,children:[{tag:"span",cls:this.$dayTextCls},{cls:this.$overflowCls}]}]});l.push({tag:"tr",cls:this.$rowCls,"data-week":n,children:s,style:o})}return l},getCell:function(e){var t,i,n=null,r=this.cells,s=r.length;for(Ext.isDate(e)&&(e=Ext.Date.format(e,this.domFormat)),t=0;t<s;++t)if((i=r[t]).getAttribute("data-date")===e){n=i;break}return n},getCellByPosition:function(e,t){var i,n,r,s;return i=this.getDaySizes(),n=this.element.getXY(),r=this.findIndex(i.widths,e-n[0]),s=this.findIndex(i.heights,t-n[1]),this.cells[s*Ext.Date.DAYS_IN_WEEK+r]},getCellFromEvent:function(e,t){var i,n;return!(i=e.getTarget("."+this.$cellCls,this.element))&&t&&(n=e.getXY(),i=this.getCellByPosition(n[0],n[1])),i},getDateFromCell:function(e){return Ext.Date.parse(e.getAttribute("data-date"),this.domFormat)},getDaySizes:function(){var e,t,i,n,r,s,o,a=this.daySizes,l=this.cells,c=this.getVisibleDays(),u=Number.MAX_VALUE;if(!this.daySizes){for(e=l[0],t=(i=Ext.fly(e.firstChild)).getPadding("tb")+Ext.fly(e.firstChild.firstChild).getHeight(),n=[],r=[],s=0;s<c;++s)i=Ext.fly(l[s]),n.push(i.getWidth()),o=i.getHeight(),r.push(o),o<u&&(u=o);this.daySizes=a={widths:n,heights:r,headerHeight:t,heightForEvents:Math.max(0,u-t-this.eventGutter)}}return a},getEventStyle:function(){var e,t,i,n,r=this.eventStyle;return r||((t=(e=this.createEvent(null,null,!0)).element).dom.style.visibility="hidden",this.element.appendChild(t),n=t.getHeight(),(i=t.getMargin()).height=i.top+i.bottom,i.width=i.left+i.right,this.eventStyle=r={margin:i,height:n,fullHeight:n+i.height},e.destroy()),r},getEventWidget:function(e){var t,i=this.$eventCls;return e.isEvent&&(e=e.target),Ext.fly(e).hasCls(i)||(e=Ext.fly(e).up("."+i,this.element,!0)),t=e.getAttribute("data-componentid"),this.eventMap[t]},getMoveBaseValue:function(){return this.utcToLocal(this.dateInfo.visible.start)},getMoveInterval:function(){var e=Ext.Date;return{unit:e.DAY,amount:e.DAYS_IN_WEEK*this.getVisibleWeeks()}},handleEventTap:function(e){var t=this.getEvent(e);t&&(this.hideOverflowPopup(),this.onEventTap(t))},handleResize:function(){this.callParent(),this.daySizes=null,this.hideOverflowPopup(),this.refreshEvents()},hideOverflowPopup:Ext.privateFn,maybeShowAddForm:function(e,t){var i,n=Ext.Date;this.getAddOnSelect()&&this.hasEditableCalendars()&&this.getAddForm()&&(i=this.createModel({allDay:!0,startDate:n.localToUtc(e),endDate:n.add(n.localToUtc(t),n.DAY,1)}),this.showAddForm(i,{scope:this,onSave:this.clearSelected,onCancel:this.clearSelected}))},onLongPress:function(e){var t,i=this.getCellFromEvent(e);i&&(t=this.getDateFromCell(i),this.fireEvent("select",this,{date:t}),this.maybeShowAddForm(t,t))},onOverflowClick:function(e){var t=this.getCellFromEvent(e),i=this.getDateFromCell(t),n=parseInt(t.parentNode.getAttribute("data-week"),10),r=parseInt(t.getAttribute("data-index"),10);this.showOverflowPopup(this.weeks[n].overflows[r],i,t)},onSourceAttach:function(){this.recalculate()},onTouchEnd:function(){var e,t,i,n=this,r=n.cells;n.isSelecting&&((e=n.selectedStartIndex)===(t=n.selectedEndIndex)?(e=t=n.getDateFromCell(r[e]),n.fireEvent("select",n,{date:e})):(t<e&&(i=t,t=e,e=i),e=n.getDateFromCell(r[e]),t=n.getDateFromCell(r[t]),n.fireEvent("selectrange",n,{range:new Ext.calendar.date.Range(e,t)})),n.maybeShowAddForm(e,t),n.isSelecting=!1)},onTouchMove:function(e){var t,i,n,r,s,o=this.selectedStartIndex,a=this.cells,l=a.length;if(this.isSelecting)for(r=this.getCellFromEvent(e,!0),o<(i=Ext.Array.indexOf(a,r))?t=i:i<o?(t=o,o=i,s=!0):t=o,this.selectedEndIndex=s?o:t,n=0;n<l;++n)Ext.fly(a[n]).toggleCls(this.$selectionCls,o<=n&&n<=t)},onTouchStart:function(e,t){var i,n=this.element;"touch"===e.pointerType||e.getTarget("."+this.$overflowCls,n)||e.getTarget("."+this.$overflowPopupCls,n)||(i=this.getCellFromEvent(e))&&(this.isSelecting=!0,this.selectedStartIndex=this.selectedEndIndex=Ext.Array.indexOf(this.cells,i),Ext.fly(i).addCls(this.$selectionCls))},positionEvent:function(e,t){var i,n=this.getDaySizes(),r=this.getEventStyle(),s=r.margin,o=n.widths,a=t.start,l=t.localIdx,c=t.weekIdx;i=n.headerHeight+r.height*l+(l+1)*s.height,e.setTop(this.positionSum(0,c,n.heights)+i),e.setLeft(this.positionSum(0,a,o)+s[this.startMarginName]),e.setWidth(this.positionSum(a,t.len,o)-s.width)},positionSum:function(e,t,i){var n,r=0,s=e+t;for(n=e;n<s;++n)r+=i[n];return r},processWeek:function(e,t){var i,n,r,s,o,a,l,c,u,d=e.rows,h=e.days,f=e.overflows,g=e.index*Ext.Date.DAYS_IN_WEEK,p=this.getShowOverflow(),m=this.cells,x=this.$cellOverflowCls,y=this.getOverflowText();if(d)for(r=0,u=d.length;r<u;++r)for(o=0,s=(n=e.compress(r)).length;o<s;++o)(a=n[o]).isEmpty||((l=this.createEvent(a.event).element).dom.style.margin="0",t.appendChild(l.dom),this.positionEvent(l,a));for(r=0;r<h;++r)c=m[g+r],(i=f&&f[r])&&i.length&&p?(Ext.fly(c).addCls(x),c.firstChild.lastChild.innerHTML=Ext.String.format(y,i.length)):Ext.fly(c).removeCls(x)},queryCells:function(){return this.element.query("."+this.$cellCls)},recalculate:function(){var e=this.doRecalculate();this.dateInfo=e,this.setSourceRange(e.visible)},refreshHeaders:function(){var e=this.getHeader(),t=this.dateInfo;e&&(e.setVisibleDays(this.getVisibleDays()),t&&e.setValue(this.utcToLocal(t.visible.start)))},selectRange:function(e,t){var i,n,r=Ext.Date,s=this.dateInfo.active,o=this.cells,a=o.length,l=!1;if(e<s.start&&(e=s.start),t>s.end&&(t=s.end),e=this.getCell(r.clearTime(e,!0)),t=this.getCell(r.clearTime(t,!0)),e&&t)for(i=0;i<a;++i)(n=o[i])===e&&(l=!0),Ext.fly(n).toggleCls(this.$selectionCls,l),n===t&&(l=!1)},showOverflowPopup:Ext.privateFn}}),Ext.define("Ext.overrides.calendar.view.Weeks",{override:"Ext.calendar.view.Weeks",doDestroy:function(){this.tip=Ext.destroy(this.tip),this.callParent()},privates:{hideOverflowPopup:function(){var e=this.tip;e&&(e.hide(),e.removeAll())},showOverflowPopup:function(e,t,i){var n=this.tip;n||(this.tip=n=new Ext.tip.ToolTip({anchor:!0,autoHide:!1,ui:"calendar-overflow",cls:this.$overflowPopupCls,minWidth:200,border:!0}),this.tip.el.on("tap","handleEventTap",this,{delegate:"."+this.$eventCls})),n.removeAll(),e=this.createEvents(e,{cls:this.$staticEventCls}),n.add(e),n.el.dom.setAttribute("data-date",Ext.Date.format(t,this.domFormat)),n.show(),n.showBy(i,"tc-bc?",[0,-20])}}}),Ext.define("Ext.calendar.panel.Weeks",{extend:Ext.calendar.panel.Base,xtype:"calendar-weeks",config:{dayHeader:{xtype:"calendar-weeksheader"},eventRelayers:{view:{beforeeventdragstart:!0,validateeventdrop:!0,eventdrop:!0}},view:{xtype:"calendar-weeksview"}},configExtractor:{dayHeader:{dayHeaderFormat:"format"},view:{addOnSelect:!0,allowSelection:!0,dayFormat:!0,draggable:!0,droppable:!0,firstDayOfWeek:!0,overflowText:!0,showOverflow:!0,visibleDays:!0,visibleWeeks:!0,weekendDays:!0,highlightToday:!0}}}),Ext.define("Ext.calendar.view.Month",{extend:Ext.calendar.view.Weeks,xtype:"calendar-monthview",config:{value:void 0,visibleWeeks:6},nextMonth:function(e){this.navigate(this.getNavigateValue(e),Ext.Date.MONTH)},nextYear:function(e){this.navigate(this.getNavigateValue(e),Ext.Date.YEAR)},previousMonth:function(e){this.navigate(-this.getNavigateValue(e),Ext.Date.MONTH)},previousYear:function(e){this.navigate(-this.getNavigateValue(e),Ext.Date.YEAR)},privates:{displayRangeProp:"month",maxWeeks:6,$rowClasses:[Ext.baseCSSPrefix+"calendar-month-4weeks",Ext.baseCSSPrefix+"calendar-month-5weeks",Ext.baseCSSPrefix+"calendar-month-6weeks"],$todayCellHighlightCls:Ext.baseCSSPrefix+"today-cell-highlight",trackRanges:!0,doRecalculate:function(e){var t,i,n,r,s,o,a=Ext.Date,l=a.DAYS_IN_WEEK,c=this.getFirstDayOfWeek(),u=this.maxWeeks,d=this.getVisibleWeeks(),h=this.getVisibleDays(),f=Ext.calendar.date.Range;return o=((e=a.getFirstDateOfMonth(e||this.getValue())).getDay()+l-c)%l,n=this.toUtcOffset(e),r=a.getLastDateOfMonth(e),s=this.toUtcOffset(r),null===d&&(h<=o&&(o=h-o),t=o+a.getDaysInMonth(e),u=Math.ceil(t/l)),i=l*u-(l-h),{full:new f(e=a.subtract(n,a.DAY,o),i=a.add(e,a.DAY,i)),visible:new f(e,i),active:new f(e,a.subtract(i,a.DAY,1)),month:new f(n,s),requiredWeeks:u}},doRefresh:function(){var e=this.$rowClasses,t=this.dateInfo.requiredWeeks;this.element.replaceCls(e,e[t-1-e.length]),this.callParent()},getMoveBaseValue:function(){return this.utcToLocal(this.dateInfo.month.start)},getMoveInterval:function(){return{unit:Ext.Date.MONTH,amount:1}},generateCells:function(){return this.callParent([this.maxWeeks,!1])},getNavigateValue:function(e){return e||0===e?e:1}}}),Ext.define("Ext.calendar.panel.Month",{extend:Ext.calendar.panel.Weeks,xtype:"calendar-month",config:{view:{xtype:"calendar-monthview"}},autoSize:!1,nextMonth:function(e){this.getView().nextMonth(e)},nextYear:function(e){this.getView().nextYear(e)},previousMonth:function(e){this.getView().previousMonth(e)},previousYear:function(e){this.getView().previousYears(e)},updateHighlightToday:function(e){var t,i,n=this.getView(),r=n.getHeader();i=Ext.Date.format(new Date,r.domFormat),(t=n.element.selectNode('td[data-date="'+i+'"]',!1))&&t.toggleCls(n.$todayCellHighlightCls+"-weeks-day",e)}}),Ext.define("Ext.calendar.panel.AbstractPanel",{extend:Ext.Panel,layout:"fit",config:{compactOptions:{createButton:{xtype:"button",text:null,iconCls:Ext.baseCSSPrefix+"fa fa-plus"}},createButton:{ui:"action"},menuButton:{xtype:"button",iconCls:Ext.baseCSSPrefix+"fa fa-bars"},sideBar:{docked:"left",autoSize:null,ui:"light"},sheet:{xtype:"sheet",reference:"sheet",cls:Ext.baseCSSPrefix+"calendar-panel-sheet",centered:!1,enter:"left",exit:"left",hideOnMaskTap:!0,stretchY:!0,ui:"light",header:{border:!1,title:"Calendars"}},titleBar:{docked:"top"}},items:[{xtype:"panel",reference:"mainContainer",flex:1,layout:"fit"}],autoSize:!1,initialize:function(){var e=this.lookup("mainContainer");this.getCompact()||this.addSideBar(),this.addTitleBar(),e.add(this.createView()),this.refreshCalTitle(),this.callParent()},updateCompact:function(e){this.isConfiguring||this.reconfigureItems()},updateCreateButtonPosition:function(){var e,t=this.lookup("sheet");this.isConfiguring||(e=t&&t.isVisible(),this.reconfigureItems(),e&&this.showSheet())},updateSwitcherPosition:function(){var e,t=this.lookup("sheet");this.isConfiguring||(e=t&&t.isVisible(),this.reconfigureItems(),e&&this.showSheet())},privates:{addSideBar:function(){var e=this.createSideBar();e&&this.add(e)},addTitleBar:function(){var e=this.getCompact()?this.createCompactTitleBar():this.createNormalTitleBar();e&&this.lookup("mainContainer").add(e)},createCompactTitleBar:function(){return this.createTitleBar([Ext.apply({scope:this,handler:"onMenuButtonTap"},this.getMenuButton()),this.createDateTitle({listeners:{element:"element",scope:this,tap:"onTodayTap"}}),{xtype:"component",flex:1},this.createCreateButton()])},createNormalTitleBar:function(){var e=[];return"titleBar"===this.getCreateButtonPosition()&&e.push(this.createCreateButton({margin:"0 10 0 0"})),e.push(this.createTodayButton(),{xtype:"segmentedbutton",allowToggle:!1,items:[this.createPreviousButton(),this.createNextButton()]},this.createDateTitle()),"titleBar"===this.getSwitcherPosition()&&e.push({xtype:"component",flex:1},this.createSwitcher()),this.createTitleBar(e)},createTitleBar:function(e){var t=this.getTitleBar();return t?this.createContainerWithChildren({reference:"titleBar"},t,e):null},createSheet:function(){return Ext.apply({layout:{type:"vbox",align:"stretch"},items:[this.createCalendarList(),this.createSwitcher({vertical:!0})]},this.getSheet())},createSideBar:function(){var e=this.getSideBar(),t=[];return e?("sideBar"===this.getCreateButtonPosition()&&t.push({xtype:"container",margin:"0 0 10 0",autoSize:null,layout:{type:"hbox",pack:"center"},items:this.createCreateButton()}),t.push(this.createCalendarList()),"sideBar"===this.getSwitcherPosition()&&t.push(this.createSwitcher({vertical:!0})),this.createContainerWithChildren({reference:"sideBar",layout:"vbox"},e,t)):null},onMenuButtonTap:function(){this.showSheet()},onSwitcherChange:function(e,t){var i=this.lookup("sheet");i&&this.getCompact()&&i.hide(),this.doSetView(t,!0)},reconfigureItems:function(){Ext.destroy(this.lookup("sheet"),this.lookup("titleBar"),this.lookup("sideBar")),this.addTitleBar(),this.getCompact()||this.addSideBar(),this.refreshCalTitle()},setSwitcherValue:function(e){var t=this.lookup("switcher");t?t.setValue(e):this.setView(e,!0)},showSheet:function(){var e=this.lookup("sheet");(e=e||this.add(this.createSheet())).show()}}}),Ext.define("Ext.calendar.view.Week",{extend:Ext.calendar.view.Days,xtype:"calendar-weekview",config:{firstDayOfWeek:void 0,visibleDays:7},applyFirstDayOfWeek:function(e){return"number"!=typeof e&&(e=Ext.Date.firstDayOfWeek),e},updateFirstDayOfWeek:function(){this.isConfiguring||(this.recalculate(),this.refreshHeaders(),this.checkNowMarker())},privates:{doRecalculate:function(e){var t,i,n,r=Ext.Date,s=Ext.calendar.date.Range,o=r.DAYS_IN_WEEK;return e=e||this.getValue(),t=((e=r.clearTime(e,!0)).getDay()+o-this.getFirstDayOfWeek())%o,e=this.toUtcOffset(e),e=r.subtract(e,r.DAY,t),n=r.add(e,r.DAY,this.getVisibleDays()),i=r.subtract(n,r.DAY,1),{full:new s(e,n),active:new s(e,i),visible:new s(r.add(e,r.HOUR,this.getStartTime(),!0),r.subtract(n,r.HOUR,24-this.getEndTime(),!0))}},getMoveBaseValue:function(){return this.utcToLocal(this.dateInfo.full.start)},getMoveInterval:function(){var e=Ext.Date;return{unit:e.DAY,amount:e.DAYS_IN_WEEK}}}}),Ext.define("Ext.calendar.panel.Week",{extend:Ext.calendar.panel.Days,xtype:"calendar-week",config:{view:{xtype:"calendar-weekview"}},configExtractor:{view:{firstDayOfWeek:!0}},$todayCellHighlightCls:Ext.baseCSSPrefix+"today-cell-highlight",updateDayHeader:function(e,t){this.callParent(arguments),this.updateHighlightToday(this.extracted.view.highlightToday)},updateHighlightToday:function(e){var t,i,n=this.getView().getHeader();i=Ext.Date.format(new Date,n.domFormat),(t=n.element.selectNode('td[data-date="'+i+'"]',!1))&&t.toggleCls(this.$todayCellHighlightCls+"-day",e)}}),Ext.define("Ext.calendar.view.Multi",{extend:Ext.container.Container,xtype:"calendar-multiview",layout:"fit",platformConfig:{"!desktop":{compact:!0}},config:{compact:!1,compactOptions:null,store:null,timezoneOffset:void 0,value:void 0,views:null},defaultView:null,constructor:function(e){var t;this.callParent([e]),(t=this.defaultView)&&this.setView(t)},moveNext:function(){this.setValue(this.activeView.calculateMoveNext())},movePrevious:function(){this.setValue(this.activeView.calculateMovePrevious())},navigate:function(e,t){var i=Ext.Date;0!==e&&this.setValue(i.add(this.getValue(),t||i.DAY,e,!0))},setView:function(e){var t,i=this,n=i.activeView;n&&n.$key===e||(Ext.suspendLayouts(),n&&i.remove(n),(t=i.getViews()[e])||Ext.raise('Invalid view specified: "'+e+'".'),t.highlightToday=i.highlightToday,i.activeView=i.add(i.createView(t,e)),i.activeView.on("valuechange","onValueChange",i),i.recalculate(i.getValue()),Ext.resumeLayouts(!0))},updateHighlightToday:function(e){this.highlightToday=e,this.getActiveItem().updateHighlightToday(e)},updateCompact:function(e){this.setViewCfg("setCompact",e)},applyStore:function(e){return e=e&&Ext.StoreManager.lookup(e,"calendar-calendars")},updateStore:function(e){this.setViewCfg("setStore",e),this.isConfiguring||this.recalculate(this.getValue())},applyTimezoneOffset:function(e){return this.autoOffset=!1,void 0===e&&(e=Ext.calendar.date.Util.getDefaultTimezoneOffset(),this.autoOffset=!0),e},updateTimezoneOffset:function(e){this.setViewCfg("setTimezoneOffset",e)},applyValue:function(e,t){return e=Ext.Date.clearTime(e||Ext.calendar.date.Util.getLocalNow(),!0),t&&t.getTime()===e.getTime()&&(e=void 0),e},updateValue:function(e){this.isConfiguring||this.recalculate(e)},showAddForm:function(e,t){return this.activeView.showAddForm(e,t)},showEditForm:function(e,t){return this.activeView.showEditForm(e,t)},privates:{createView:function(e,t){return Ext.apply({$key:t,controlStoreRange:!1,compact:this.getCompact(),store:this.getStore(),timezoneOffset:this.autoOffset?void 0:this.getTimezoneOffset(),value:this.getValue()},e)},getActiveKey:function(){var e=this.activeView;return e?e.$key:""},onValueChange:function(e,t){this.setValue(t.value),this.fireEvent("valuechange",this,t)},recalculate:function(e){var t,i,n=this.activeView,r=this.getStore();n&&r&&(i=r.getEventSource(),t=Ext.calendar.date.Util.expandRange(n.getView().doRecalculate(e).full),i.setRange(t),n.setValue(e))},setViewCfg:function(e,t){var i;this.isConfiguring||(i=this.activeView)&&i[e](t)}}}),Ext.define("Ext.calendar.panel.Panel",{extend:Ext.calendar.panel.AbstractPanel,xtype:"calendar",mixins:[Ext.mixin.ConfigState],alternateStateConfig:"compactOptions",referenceHolder:!0,platformConfig:{"!desktop":{compact:!0}},config:{calendarList:{xtype:"calendar-list",reference:"list",flex:1},compact:!1,compactOptions:{},createButton:{xtype:"button",cls:Ext.baseCSSPrefix+"calendar-panel-create-button",text:"Create"},createButtonPosition:"sideBar",dateTitle:{xtype:"component",reference:"calTitle",cls:Ext.baseCSSPrefix+"calendar-panel-title",margin:"0 0 0 10"},highlightToday:!0,nextButton:{xtype:"button",text:">"},previousButton:{xtype:"button",text:"<"},sideBar:{xtype:"panel",cls:Ext.baseCSSPrefix+"calendar-sidebar"},store:null,switcher:{xtype:"segmentedbutton",reference:"switcher",cls:Ext.baseCSSPrefix+"calendar-panel-switcher",allowMultiple:!1},switcherPosition:"titleBar",timezoneOffset:void 0,titleBar:{xtype:"toolbar"},todayButton:{xtype:"button",text:"Today",margin:"0 10 0 0"},value:void 0,views:{day:{xtype:"calendar-day",titleTpl:'{start:date("l F d, Y")}',controlStoreRange:!1,label:"Day",weight:10,dayHeader:null},week:{xtype:"calendar-week",dayHeaderFormat:"D d",controlStoreRange:!1,titleTpl:'{start:date("j M")} - {end:date("j M Y")}',label:"Week",weight:20},month:{xtype:"calendar-month",titleTpl:'{start:date("F Y")}',label:"Month",weight:30}}},defaultView:"month",cls:Ext.baseCSSPrefix+"calendar-panel",moveNext:function(){this.getView().moveNext()},movePrevious:function(){this.getView().movePrevious()},navigate:function(e,t){this.getView().navigate(e,t)},setView:function(e){this.doSetView(e)},updateCompact:function(e,t){this.toggleCls(Ext.baseCSSPrefix+"compact",e),this.toggleConfigState(e),this.callParent([e,t]),this.setViewCfg("setCompact",e)},updateCompactOptions:function(){!this.isConfiguring&&this.getCompact()&&this.toggleConfigState(!0)},applyStore:function(e){return e=e&&Ext.StoreManager.lookup(e,"calendar-calendars")},updateStore:function(e){var t=this.lookup("list");this.setViewCfg("setStore",e),t&&t.setStore(e)},applyTimezoneOffset:function(e){return this.autoOffset=!1,void 0===e&&(e=Ext.calendar.date.Util.getDefaultTimezoneOffset(),this.autoOffset=!0),e},updateTimezoneOffset:function(e){this.setViewCfg("setTimezoneOffset",e)},applyValue:function(e,t){return e=Ext.Date.clearTime(e||Ext.calendar.date.Util.getLocalNow(),!0),t&&t.getTime()===e.getTime()&&(e=void 0),e},updateValue:function(e){this.setViewCfg("setValue",e),this.refreshCalTitle()},getValue:function(){var e=this.getView();return e?e.getValue():this.callParent()},getView:function(){return this.lookup("view")},privates:{weightStart:0,weightIncrement:10,createCalendarList:function(e){return Ext.apply({store:this.getStore()},this.getCalendarList())},createCreateButton:function(e){return e=e||{},e=Ext.apply(e,this.getCreateButton()),Ext.apply({handler:"onCreateTap",scope:this},e)},createContainerWithChildren:function(e,t,i){var n,r,s,o=(t=Ext.apply({},t)).items,a=this.weightStart,l=this.weightIncrement;if(o){for(Ext.isArray(o)||(o=[o]),r=0,n=(i=Ext.Array.clone(i)).length;r<n;++r)null==(s=i[r]).weight&&(i[r]=Ext.apply({weight:a},s)),a+=l;i=i.concat(o),Ext.Array.sort(i,this.weightSorter),delete t.items}return t.items=i,Ext.apply(t,e)},createDateTitle:function(e){return e=e||{},Ext.apply(e,this.getDateTitle())},createNextButton:function(){return Ext.apply({handler:"onNextTap",scope:this},this.getNextButton())},createPreviousButton:function(){return Ext.apply({handler:"onPrevTap",scope:this},this.getPreviousButton())},createSwitcher:function(e){var t=this.getView();return e=Ext.apply({value:t&&t.getActiveKey()||this.defaultView,listeners:{scope:this,change:"onSwitcherChange"},items:this.getSwitcherItems()},e),Ext.apply(e,this.getSwitcher())},createTodayButton:function(){return Ext.apply({handler:"onTodayTap",scope:this},this.getTodayButton())},createView:function(){return{xtype:"calendar-multiview",reference:"view",compact:this.getCompact(),defaultView:this.defaultView,store:this.getStore(),timezoneOffset:this.autoOffset?void 0:this.getTimezoneOffset(),value:this.getValue(),views:this.getViews(),highlightToday:this.getHighlightToday(),listeners:{scope:this,valuechange:"onValueChange"}}},doSetView:function(e,t){t?(this.getView().highlightToday=this.getHighlightToday(),this.getView().setView(e),this.refreshCalTitle()):this.setSwitcherValue(e)},updateHighlightToday:function(e){this.isConfiguring||this.getView().updateHighlightToday(e)},getSwitcherItems:function(){var e,t,i=this.getViews(),n=[];for(e in i)(t=i[e])&&n.push({text:t.label,value:e,weight:t.weight});return n.sort(this.weightSorter),n},onCreateTap:function(){this.getView().showAddForm()},onNextTap:function(){this.moveNext()},onPrevTap:function(){this.movePrevious()},onValueChange:function(e,t){this.setValue(t.value)},onTodayTap:function(){this.setValue(new Date)},refreshCalTitle:function(){var e,t=this.getView(),i=this.lookup("calTitle");t&&i&&(e=(t=t.activeView).lookupTpl("titleTpl"))&&i.setHtml(e.apply(t.getDisplayRange()))},setViewCfg:function(e,t){var i;this.isConfiguring||(i=this.getView())&&i[e](t)},weightSorter:function(e,t){return e.weight-t.weight}}}),Ext.define("Ext.draw.ContainerBase",{extend:Ext.Container,constructor:function(e){this.callParent([e]),this.initAnimator()},onResize:function(e,t,i,n){this.handleResize({width:e,height:t},!0)},addElementListener:function(){var e=this.element;e.on.apply(e,arguments)},removeElementListener:function(){var e=this.element;e.un.apply(e,arguments)},preview:function(e){var t;t="svg-markup"===(e=e||this.getImage()).type?{xtype:"container",html:e.data}:{xtype:"image",mode:"img",imageCls:"",cls:Ext.baseCSSPrefix+"chart-preview",src:e.data},Ext.Viewport.add({xtype:"panel",layout:"fit",modal:!0,border:1,shadow:!0,width:"90%",height:"90%",hideOnMaskTap:!0,centered:!0,floated:!0,scrollable:!1,closable:!0,closeAction:"hide",items:[t],listeners:{hide:function(){this.destroy()}}}).show()}}),Ext.define("Ext.draw.SurfaceBase",{extend:Ext.Widget,getOwnerBody:function(){return this.getRefOwner().bodyElement}}),Ext.define("Ext.draw.sprite.AnimationParser",function(){function n(e,t,i){return e+(t-e)*i}return{singleton:!0,attributeRe:/^url\\(#([a-zA-Z-]+)\\)$/,color:{parseInitial:function(e,t){return Ext.isString(e)&&(e=Ext.util.Color.create(e)),Ext.isString(t)&&(t=Ext.util.Color.create(t)),e&&e.isColor&&t&&t.isColor?[[e.r,e.g,e.b,e.a],[t.r,t.g,t.b,t.a]]:[e||t,t||e]},compute:function(e,t,i){return Ext.isArray(e)&&Ext.isArray(t)?[n(e[0],t[0],i),n(e[1],t[1],i),n(e[2],t[2],i),n(e[3],t[3],i)]:t||e},serve:function(e){return Ext.util.Color.fly(e[0],e[1],e[2],e[3]).toString()}},number:{parse:function(e){return null===e?null:+e},compute:function(e,t,i){return Ext.isNumber(e)&&Ext.isNumber(t)?n(e,t,i):t||e}},angle:{parseInitial:function(e,t){return t-e>Math.PI?t-=2*Math.PI:t-e<-Math.PI&&(t+=2*Math.PI),[e,t]},compute:function(e,t,i){return Ext.isNumber(e)&&Ext.isNumber(t)?n(e,t,i):t||e}},path:{parseInitial:function(e,t){var i,n,r,s,o,a=e.toStripes(),l=t.toStripes(),c=a.length,u=l.length,d=l[u-1],h=[d[d.length-2],d[d.length-1]];for(i=c;i<u;i++)a.push(a[c-1].slice(0));for(i=u;i<c;i++)l.push(h.slice(0));for(o=a.length,l.path=t,l.temp=new Ext.draw.Path,i=0;i<o;i++){for(r=a[i],s=l[i],c=r.length,u=s.length,l.temp.commands.push("M"),n=u;n<c;n+=6)s.push(h[0],h[1],h[0],h[1],h[0],h[1]);for(h=[(d=l[l.length-1])[d.length-2],d[d.length-1]],n=c;n<u;n+=6)r.push(h[0],h[1],h[0],h[1],h[0],h[1]);for(i=0;i<s.length;i++)s[i]-=r[i];for(i=2;i<s.length;i+=6)l.temp.commands.push("C")}return[a,l]},compute:function(e,t,i){if(1<=i)return t.path;for(var n,r,s,o=0,a=e.length,l=0,c=t.temp.params,u=0;o<a;o++)for(r=e[o],s=t[o],n=r.length,l=0;l<n;l++)c[u++]=s[l]*i+r[l];return t.temp}},data:{compute:function(e,t,i,n){var r,s,o,a=e.length-1,l=t.length-1,c=Math.max(a,l);for(n&&n!==e||(n=[]),n.length=c+1,r=0;r<=c;r++)s=e[Math.min(r,a)],o=t[Math.min(r,l)],Ext.isNumber(s)?(Ext.isNumber(o)||(o=0),n[r]=s+(o-s)*i):n[r]=o;return n}},text:{compute:function(e,t,i){return e.substr(0,Math.round(e.length*(1-i)))+t.substr(Math.round(t.length*(1-i)))}},limited:"number",limited01:"number"}}),function(){if(!Ext.global.Float32Array){function e(e){var t,i;if("number"==typeof e)this.length=e;else if("length"in e)for(this.length=e.length,t=0,i=e.length;t<i;t++)this[t]=+e[t]}e.prototype=[],Ext.global.Float32Array=e}}(),Ext.define("Ext.draw.Draw",{singleton:!0,radian:Math.PI/180,pi2:2*Math.PI,reflectFn:function(e){return e},rad:function(e){return e%360*this.radian},degrees:function(e){return e/this.radian%360},isBBoxIntersect:function(e,t,i){return i=i||0,Math.max(e.x,t.x)-i>Math.min(e.x+e.width,t.x+t.width)||Math.max(e.y,t.y)-i>Math.min(e.y+e.height,t.y+t.height)},isPointInBBox:function(e,t,i){return!!i&&e>=i.x&&e<=i.x+i.width&&t>=i.y&&t<=i.y+i.height},naturalSpline:function(e){var t,i,n,r,s,o,a=e.length,l=0,c=new Float32Array(e.length),u=new Float32Array(3*e.length-2);for(c[0]=0,c[a-1]=0,t=1;t<a-1;t++)c[t]=e[t+1]+e[t-1]-2*e[t]-c[t-1],l=1/(4-l),c[t]*=l;for(t=a-2;0<t;t--)l=3.732050807568877+48.248711305964385/(-13.928203230275537+Math.pow(.07179676972449123,t)),c[t]-=c[t+1]*l;for(n=(o=e[0])-c[0],i=t=0;t<a-1;i+=3)s=o,r=n,n=(o=e[++t])-c[t],u[i]=s,u[i+1]=(n+2*r)/3,u[i+2]=(2*n+r)/3;return u[i]=o,u},spline:function(e){return this.naturalSpline(e)},cardinalToBezier:function(e,t,i,n,r){return[t,t+(i-e)/6*r,i-(n-t)/6*r,i]},cardinalSpline:function(e,t){var i,n,r=e.length,s=new Float32Array(3*r-2);for(void 0===t&&(t=.5),n=this.cardinalToBezier(e[0],e[0],e[1],e[2],t),s[0]=n[0],s[1]=n[1],s[2]=n[2],s[3]=n[3],i=0;i<r-3;i++)n=this.cardinalToBezier(e[i],e[i+1],e[i+2],e[i+3],t),s[4+3*i]=n[1],s[4+3*i+1]=n[2],s[4+3*i+2]=n[3];return n=this.cardinalToBezier(e[r-3],e[r-2],e[r-1],e[r-1],t),s[4+3*i]=n[1],s[4+3*i+1]=n[2],s[4+3*i+2]=n[3],s},getAnchors:function(e,t,i,n,r,s,o){var a,l,c,u,d,h,f,g,p,m=Math.PI,x=m/2,y=Math.abs,v=Math.sin,E=Math.cos,b=Math.atan;return a=(i-e)/(o=o||4),l=(r-i)/o,t<=n&&s<=n||n<=t&&n<=s?c=u=x:(c=b((i-e)/y(n-t)),t<n&&(c=m-c),u=b((r-i)/y(n-s)),s<n&&(u=m-u)),x<(p=x-(c+u)%(2*m)/2)&&(p-=m),u+=p,d=i-a*v(c+=p),h=n+a*E(c),f=i+l*v(u),g=n+l*E(u),(t<n&&h<t||n<t&&t<h)&&(d+=y(t-h)*(d-i)/(h-n),h=t),(s<n&&g<s||n<s&&s<g)&&(f-=y(s-g)*(f-i)/(g-n),g=s),{x1:d,y1:h,x2:f,y2:g}},smooth:function(e,t,i){var n,r,s,o,a,l,c,u,d,h,f=e.length,g=[],p=[];for(d=0;d<f-1&&(n=e[d],r=t[d],0!==d||(c=n,u=r,g.push(c),p.push(u),1!==f));d++){if(s=e[d+1],o=t[d+1],a=e[d+2],l=t[d+2],!Ext.isNumber(a)||!Ext.isNumber(l)){g.push(c,s,s),p.push(u,o,o);break}h=this.getAnchors(n,r,s,o,a,l,i),g.push(c,h.x1,s),p.push(u,h.y1,o),c=h.x2,u=h.y2}return{smoothX:g,smoothY:p}},beginUpdateIOS:Ext.os.is.iOS?function(){this.iosUpdateEl=Ext.getBody().createChild({"data-sticky":!0,style:"position: absolute; top: 0px; bottom: 0px; left: 0px; right: 0px; background: rgba(0,0,0,0.001); z-index: 100000"})}:Ext.emptyFn,endUpdateIOS:function(){this.iosUpdateEl=Ext.destroy(this.iosUpdateEl)}}),Ext.define("Ext.draw.gradient.Gradient",{isGradient:!0,config:{stops:[]},applyStops:function(e){var t,i,n,r=[],s=e.length;for(t=0;t<s;t++)(n=(i=e[t]).color)&&n.isColor||(n=Ext.util.Color.fly(n||Ext.util.Color.NONE)),r.push({offset:Math.min(1,Math.max(0,"offset"in i?i.offset:i.position||0)),color:n.toString()});return r.sort(function(e,t){return e.offset-t.offset}),r},onClassExtended:function(e,t){!t.alias&&t.type&&(t.alias="gradient."+t.type)},constructor:function(e){this.initConfig(e)},generateGradient:Ext.emptyFn}),Ext.define("Ext.draw.gradient.GradientDefinition",{singleton:!0,urlStringRe:/^url\\(#([\\w-]+)\\)$/,gradients:{},add:function(e){var t,i,n,r=this.gradients;for(t=0,i=e.length;t<i;t++)n=e[t],Ext.isString(n.id)&&(r[n.id]=n)},get:function(e){var t,i=this.gradients,n=e.match(this.urlStringRe);return n&&n[1]&&(t=i[n[1]])&&t||e}}),Ext.define("Ext.draw.sprite.AttributeParser",{singleton:!0,attributeRe:/^url\\(#([a-zA-Z-]+)\\)$/,default:Ext.identityFn,string:function(e){return String(e)},number:function(e){if(Ext.isNumber(+e))return e},angle:function(e){if(Ext.isNumber(e))return(e%=2*Math.PI)<-Math.PI?e+=2*Math.PI:e>=Math.PI&&(e-=2*Math.PI),e},data:function(e){return Ext.isArray(e)?e.slice():e instanceof Float32Array?new Float32Array(e):void 0},bool:function(e){return!!e},color:function(e){if(e&&e.isColor)return e.toString();if(e&&e.isGradient)return e;if(!e)return Ext.util.Color.NONE;if(Ext.isString(e)){if("url"!==e.substr(0,3))return Ext.util.Color.fly(e).toString();if(e=Ext.draw.gradient.GradientDefinition.get(e),Ext.isString(e))return e}return"linear"===e.type?Ext.create("Ext.draw.gradient.Linear",e):"radial"===e.type?Ext.create("Ext.draw.gradient.Radial",e):"pattern"===e.type?Ext.create("Ext.draw.gradient.Pattern",e):Ext.util.Color.NONE},limited:function(t,i){return function(e){return e=+e,Ext.isNumber(e)?Math.min(Math.max(e,t),i):void 0}},limited01:function(e){return e=+e,Ext.isNumber(e)?Math.min(Math.max(e,0),1):void 0},enums:function(){var e,t,i={},n=Array.prototype.slice.call(arguments,0);for(e=0,t=n.length;e<t;e++)i[n[e]]=!0;return function(e){return e in i?e:void 0}}}),Ext.define("Ext.draw.sprite.AttributeDefinition",{config:{defaults:{$value:{},lazy:!0},aliases:{},animationProcessors:{},processors:{$value:{},lazy:!0},dirtyTriggers:{},triggers:{},updaters:{}},inheritableStatics:{processorFactoryRe:/^(\\w+)\\(([\\w\\-,]*)\\)$/},spriteClass:null,constructor:function(e){this.initConfig(e)},applyDefaults:function(e,t){return t=Ext.apply(t||{},this.normalize(e))},applyAliases:function(e,t){return Ext.apply(t||{},e)},applyProcessors:function(e,t){this.getAnimationProcessors();var i,n,r,s,o=t||{},a=Ext.draw.sprite.AttributeParser,l=this.self.processorFactoryRe,c={};for(n in e)"string"==typeof(s=e[n])&&((r=s.match(l))?s=a[r[1]].apply(a,r[2].split(",")):a[s]&&(i=!0,s=a[c[n]=s])),Ext.isFunction(s)||Ext.raise(this.spriteClass.$className+": processor '"+n+"' has not been found."),o[n]=s;return i&&this.setAnimationProcessors(c),o},applyAnimationProcessors:function(e,t){var i,n,r=Ext.draw.sprite.AnimationParser;for(i in t=t||{},e)if("none"===(n=e[i]))t[i]=null;else if(!Ext.isString(n)||i in t)Ext.isObject(n)&&(t[i]=n);else if(n in r){for(;Ext.isString(r[n]);)n=r[n];t[i]=r[n]}return t},updateDirtyTriggers:function(e){this.setTriggers(e)},applyTriggers:function(e,t){var i;for(i in t=t||{},e)t[i]=e[i].split(",");return t},applyUpdaters:function(e,t){return Ext.apply(t||{},e)},batchedNormalize:function(e,t){if(!e)return{};var i,n,r,s,o,a,l,c,u,d=this.getProcessors(),h=this.getAliases(),f=e.translation||e.translate,g={};for(r in o="rotation"in e?e.rotation:"rotate"in e?e.rotate:void 0,void 0!==(a="scaling"in e?e.scaling:"scale"in e?e.scale:void 0)&&(Ext.isNumber(a)?(g.scalingX=a,g.scalingY=a):("x"in a&&(g.scalingX=a.x),"y"in a&&(g.scalingY=a.y),"centerX"in a&&(g.scalingCenterX=a.centerX),"centerY"in a&&(g.scalingCenterY=a.centerY))),void 0!==o&&(Ext.isNumber(o)?(o=Ext.draw.Draw.rad(o),g.rotationRads=o):("rads"in o?g.rotationRads=o.rads:"degrees"in o&&(Ext.isArray(o.degrees)?g.rotationRads=Ext.Array.map(o.degrees,function(e){return Ext.draw.Draw.rad(e)}):g.rotationRads=Ext.draw.Draw.rad(o.degrees)),"centerX"in o&&(g.rotationCenterX=o.centerX),"centerY"in o&&(g.rotationCenterY=o.centerY))),void 0!==f&&("x"in f&&(g.translationX=f.x),"y"in f&&(g.translationY=f.y)),"matrix"in e&&(u=(l=Ext.draw.Matrix.create(e.matrix)).split(),g.matrix=l,g.rotationRads=u.rotation,g.rotationCenterX=0,g.rotationCenterY=0,g.scalingX=u.scaleX,g.scalingY=u.scaleY,g.scalingCenterX=0,g.scalingCenterY=0,g.translationX=u.translateX,g.translationY=u.translateY),e)if(void 0!==(s=e[r]))if(Ext.isArray(s))if(r in h&&(r=h[r]),r in d)for(g[r]=[],i=0,n=s.length;i<n;i++)void 0!==(c=d[r].call(this,s[i]))&&(g[r][i]=c);else t&&(g[r]=s);else r in h&&(r=h[r]),r in d?void 0!==(s=d[r].call(this,s))&&(g[r]=s):t&&(g[r]=s);return g},normalize:function(e,t){if(!e)return{};var i,n,r,s,o,a,l=this.getProcessors(),c=this.getAliases(),u=e.translation||e.translate,d={};for(i in r="rotation"in e?e.rotation:"rotate"in e?e.rotate:void 0,s="scaling"in e?e.scaling:"scale"in e?e.scale:void 0,u&&("x"in u&&(d.translationX=u.x),"y"in u&&(d.translationY=u.y)),void 0!==s&&(Ext.isNumber(s)?(d.scalingX=s,d.scalingY=s):("x"in s&&(d.scalingX=s.x),"y"in s&&(d.scalingY=s.y),"centerX"in s&&(d.scalingCenterX=s.centerX),"centerY"in s&&(d.scalingCenterY=s.centerY))),void 0!==r&&(Ext.isNumber(r)?(r=Ext.draw.Draw.rad(r),d.rotationRads=r):("rads"in r?d.rotationRads=r.rads:"degrees"in r&&(d.rotationRads=Ext.draw.Draw.rad(r.degrees)),"centerX"in r&&(d.rotationCenterX=r.centerX),"centerY"in r&&(d.rotationCenterY=r.centerY))),"matrix"in e&&(a=(o=Ext.draw.Matrix.create(e.matrix)).split(),d.matrix=o,d.rotationRads=a.rotation,d.rotationCenterX=0,d.rotationCenterY=0,d.scalingX=a.scaleX,d.scalingY=a.scaleY,d.scalingCenterX=0,d.scalingCenterY=0,d.translationX=a.translateX,d.translationY=a.translateY),e)void 0!==(n=e[i])&&(i in c&&(i=c[i]),i in l?void 0!==(n=l[i].call(this,n))&&(d[i]=n):t&&(d[i]=n));return d},setBypassingNormalization:function(e,t,i){return t.pushDown(e,i)},set:function(e,t,i){return i=this.normalize(i),this.setBypassingNormalization(e,t,i)}}),Ext.define("Ext.draw.Matrix",{isMatrix:!0,statics:{createAffineMatrixFromTwoPair:function(e,t,i,n,r,s,o,a){var l=i-e,c=n-t,u=o-r,d=a-s,h=1/(l*l+c*c),f=l*u+c*d,g=u*c-l*d;return new this(f*h,-g*h,g*h,f*h,(-f*e-g*t)*h+r,(g*e-f*t)*h+s)},createPanZoomFromTwoPair:function(e,t,i,n,r,s,o,a){if(2===arguments.length)return this.createPanZoomFromTwoPair.apply(this,e.concat(t));var l=i-e,c=n-t,u=.5*(e+i),d=.5*(t+n),h=o-r,f=a-s,g=.5*(r+o),p=.5*(s+a),m=l*l+c*c,x=h*h+f*f,y=Math.sqrt(x/m);return new this(y,0,0,y,g-y*u,p-y*d)},fly:function(){function t(e){return i.elements=e,i}var i=null;return function(e){return(i=i||new Ext.draw.Matrix).elements=e,Ext.draw.Matrix.fly=t,i}}(),create:function(e){return e instanceof this?e:new this(e)}},constructor:function(e,t,i,n,r,s){e&&6===e.length?this.elements=e.slice():this.elements=void 0!==e?[e,t,i,n,r,s]:[1,0,0,1,0,0]},prepend:function(e,t,i,n,r,s){var o=this.elements,a=o[0],l=o[1],c=o[2],u=o[3],d=o[4],h=o[5];return o[0]=e*a+i*l,o[1]=t*a+n*l,o[2]=e*c+i*u,o[3]=t*c+n*u,o[4]=e*d+i*h+r,o[5]=t*d+n*h+s,this},prependMatrix:function(e){return this.prepend.apply(this,e.elements)},append:function(e,t,i,n,r,s){var o=this.elements,a=o[0],l=o[1],c=o[2],u=o[3],d=o[4],h=o[5];return o[0]=e*a+t*c,o[1]=e*l+t*u,o[2]=i*a+n*c,o[3]=i*l+n*u,o[4]=r*a+s*c+d,o[5]=r*l+s*u+h,this},appendMatrix:function(e){return this.append.apply(this,e.elements)},set:function(e,t,i,n,r,s){var o=this.elements;return o[0]=e,o[1]=t,o[2]=i,o[3]=n,o[4]=r,o[5]=s,this},inverse:function(e){var t=this.elements,i=t[0],n=t[1],r=t[2],s=t[3],o=t[4],a=t[5],l=1/(i*s-n*r);return i*=l,n*=l,r*=l,s*=l,e?(e.set(s,-n,-r,i,r*a-s*o,n*o-i*a),e):new Ext.draw.Matrix(s,-n,-r,i,r*a-s*o,n*o-i*a)},translate:function(e,t,i){return i?this.prepend(1,0,0,1,e,t):this.append(1,0,0,1,e,t)},scale:function(e,t,i,n,r){return null==t&&(t=e),void 0===i&&(i=0),void 0===n&&(n=0),r?this.prepend(e,0,0,t,i-i*e,n-n*t):this.append(e,0,0,t,i-i*e,n-n*t)},rotate:function(e,t,i,n){var r=Math.cos(e),s=Math.sin(e);return t=t||0,i=i||0,n?this.prepend(r,s,-s,r,t-r*t+i*s,i-r*i-t*s):this.append(r,s,-s,r,t-r*t+i*s,i-r*i-t*s)},rotateFromVector:function(e,t,i){var n=Math.sqrt(e*e+t*t),r=e/n,s=t/n;return i?this.prepend(r,s,-s,r,0,0):this.append(r,s,-s,r,0,0)},clone:function(){return new Ext.draw.Matrix(this.elements)},flipX:function(){return this.append(-1,0,0,1,0,0)},flipY:function(){return this.append(1,0,0,-1,0,0)},skewX:function(e){return this.append(1,0,Math.tan(e),1,0,0)},skewY:function(e){return this.append(1,Math.tan(e),0,1,0,0)},shearX:function(e){return this.append(1,0,e,1,0,0)},shearY:function(e){return this.append(1,e,0,1,0,0)},reset:function(){return this.set(1,0,0,1,0,0)},precisionCompensate:function(e,t){var i=this.elements,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],l=i[5],c=r*s-n*o;t.b=e*r/n,t.c=e*s/o,t.d=e,t.xx=n/e,t.yy=o/e,t.dx=(l*n*s-a*n*o)/c/e,t.dy=(a*r*o-l*n*o)/c/e},precisionCompensateRect:function(e,t){var i=this.elements,n=i[0],r=i[1],s=i[2],o=i[3],a=i[4],l=i[5],c=s/n;t.b=e*r/n,t.c=e*c,t.d=e*o/n,t.xx=n/e,t.yy=n/e,t.dx=(l*s-a*o)/(r*c-o)/e,t.dy=-(l*n-a*r)/(r*c-o)/e},x:function(e,t){var i=this.elements;return e*i[0]+t*i[2]+i[4]},y:function(e,t){var i=this.elements;return e*i[1]+t*i[3]+i[5]},get:function(e,t){return+this.elements[e+2*t].toFixed(4)},transformPoint:function(e){var t,i,n=this.elements;return i=e.isPoint?(t=e.x,e.y):(t=e[0],e[1]),[t*n[0]+i*n[2]+n[4],t*n[1]+i*n[3]+n[5]]},transformBBox:function(e,t,i){var n,r,s,o=this.elements,a=e.x,l=e.y,c=.5*e.width,u=.5*e.height,d=o[0],h=o[1],f=o[2],g=o[3],p=a+c,m=l+u;return r=t?(c-=t,u-=t,s=[Math.sqrt(o[0]*o[0]+o[2]*o[2]),Math.sqrt(o[1]*o[1]+o[3]*o[3])],n=Math.abs(c*d)+Math.abs(u*f)+Math.abs(s[0]*t),Math.abs(c*h)+Math.abs(u*g)+Math.abs(s[1]*t)):(n=Math.abs(c*d)+Math.abs(u*f),Math.abs(c*h)+Math.abs(u*g)),(i=i||{}).x=p*d+m*f+o[4]-n,i.y=p*h+m*g+o[5]-r,i.width=n+n,i.height=r+r,i},transformList:function(e){var t,i,n=this.elements,r=n[0],s=n[2],o=n[4],a=n[1],l=n[3],c=n[5],u=e.length;for(i=0;i<u;i++)t=e[i],e[i]=[t[0]*r+t[1]*s+o,t[0]*a+t[1]*l+c];return e},isIdentity:function(){var e=this.elements;return 1===e[0]&&0===e[1]&&0===e[2]&&1===e[3]&&0===e[4]&&0===e[5]},isEqual:function(e){var t=e&&e.isMatrix?e.elements:e,i=this.elements;return i[0]===t[0]&&i[1]===t[1]&&i[2]===t[2]&&i[3]===t[3]&&i[4]===t[4]&&i[5]===t[5]},equals:function(e){return this.isEqual(e)},toArray:function(){var e=this.elements;return[e[0],e[2],e[4],e[1],e[3],e[5]]},toVerticalArray:function(){return this.elements.slice()},toString:function(){return[this.get(0,0),this.get(0,1),this.get(1,0),this.get(1,1),this.get(2,0),this.get(2,1)].join(",")},toContext:function(e){return e.transform.apply(e,this.elements),this},toSvg:function(){var e=this.elements;return"matrix("+e[0].toFixed(9)+","+e[1].toFixed(9)+","+e[2].toFixed(9)+","+e[3].toFixed(9)+","+e[4].toFixed(9)+","+e[5].toFixed(9)+")"},getScaleX:function(){var e=this.elements;return Math.sqrt(e[0]*e[0]+e[2]*e[2])},getScaleY:function(){var e=this.elements;return Math.sqrt(e[1]*e[1]+e[3]*e[3])},getXX:function(){return this.elements[0]},getXY:function(){return this.elements[1]},getYX:function(){return this.elements[2]},getYY:function(){return this.elements[3]},getDX:function(){return this.elements[4]},getDY:function(){return this.elements[5]},split:function(){var e=this.elements,t=e[0],i=e[1],n=e[3],r={translateX:e[4],translateY:e[5]};return r.rotate=r.rotation=Math.atan2(i,t),r.scaleX=t/Math.cos(r.rotate),r.scaleY=n/t*r.scaleX,r}},function(){function e(e,t,i){e[t]={get:function(){return this.elements[i]},set:function(e){this.elements[i]=e}}}if(Object.defineProperties){var t={};e(t,"a",0),e(t,"b",1),e(t,"c",2),e(t,"d",3),e(t,"e",4),e(t,"f",5),Object.defineProperties(this.prototype,t)}this.prototype.multiply=this.prototype.appendMatrix}),Ext.define("Ext.draw.modifier.Modifier",{isModifier:!0,mixins:{observable:Ext.mixin.Observable},config:{lower:null,upper:null,sprite:null},constructor:function(e){this.mixins.observable.constructor.call(this,e)},updateUpper:function(e){e&&e.setLower(this)},updateLower:function(e){e&&e.setUpper(this)},prepareAttributes:function(e){this._lower&&this._lower.prepareAttributes(e)},popUp:function(e,t){this._upper?this._upper.popUp(e,t):Ext.apply(e,t)},filterChanges:function(e,t,i){var n,r,s=e.targets;if(i)for(n in t)((r=t[n])!==e[n]||s&&r!==s[n])&&(i[n]=r);else for(n in t)(r=t[n])!==e[n]||s&&r!==s[n]||delete t[n];return i||t},pushDown:function(e,t){return this._lower?this._lower.pushDown(e,t):this.filterChanges(e,t)}}),Ext.define("Ext.draw.modifier.Target",{extend:Ext.draw.modifier.Modifier,alias:"modifier.target",statics:{uniqueId:0},prepareAttributes:function(e){this._lower&&this._lower.prepareAttributes(e),e.attributeId="attribute-"+Ext.draw.modifier.Target.uniqueId++,e.hasOwnProperty("canvasAttributes")||(e.bbox={plain:{dirty:!0},transform:{dirty:!0}},e.dirty=!0,e.pendingUpdaters={},e.canvasAttributes={},e.matrix=new Ext.draw.Matrix,e.inverseMatrix=new Ext.draw.Matrix)},applyChanges:function(e,t){Ext.apply(e,t);var i,n,r,s,o,a,l,c,u,d=this.getSprite(),h=e.pendingUpdaters,f=d.self.def.getTriggers();for(s in t)o=!0,(i=f[s])&&d.scheduleUpdaters(e,i,[s]),e.template&&t.removeFromInstance&&t.removeFromInstance[s]&&delete e[s];if(o){if(h.canvas)for(a=h.canvas,delete h.canvas,l=0,u=a.length;l<u;l++)s=a[l],e.canvasAttributes[s]=e[s];if(e.hasOwnProperty("children"))for(l=0,u=(n=e.children).length;l<u;l++){if(r=n[l],Ext.apply(r.pendingUpdaters,h),a)for(c=0;c<a.length;c++)s=a[c],r.canvasAttributes[s]=r[s];d.callUpdaters(r)}d.setDirty(!0),d.callUpdaters(e)}},popUp:function(e,t){this.applyChanges(e,t)},pushDown:function(e,t){return this._lower&&(t=this._lower.pushDown(e,t)),this.applyChanges(e,t),t}}),Ext.define("Ext.draw.TimingFunctions",function(){var e,t,i,n=Math.pow,r=Math.sin,s=Math.cos,o=Math.sqrt,a=Math.PI,l=["quad","cube","quart","quint"],c={pow:function(e,t){return n(e,t||6)},expo:function(e){return n(2,8*(e-1))},circ:function(e){return 1-o(1-e*e)},sine:function(e){return 1-r((1-e)*a/2)},back:function(e,t){return e*e*(((t=t||1.616)+1)*e-t)},bounce:function(e){var t,i;for(t=0,i=1;;t+=i,i/=2)if((7-4*t)/11<=e)return i*i-n((11-6*t-11*e)/4,2)},elastic:function(e,t){return n(2,10*--e)*s(20*e*a*(t||1)/3)}},u={};function d(t){return function(e){return n(e,t)}}function h(e,t){u[e+"In"]=function(e){return t(e)},u[e+"Out"]=function(e){return 1-t(1-e)},u[e+"InOut"]=function(e){return e<=.5?t(2*e)/2:(2-t(2*(1-e)))/2}}for(i=0,t=l.length;i<t;++i)c[l[i]]=d(i+2);for(e in c)h(e,c[e]);return u.linear=Ext.identityFn,u.easeIn=u.quadIn,u.easeOut=u.quadOut,u.easeInOut=u.quadInOut,{singleton:!0,easingMap:u}},function(e){Ext.apply(e,e.easingMap)}),Ext.define("Ext.draw.Animator",{singleton:!0,frameCallbacks:{},frameCallbackId:0,scheduled:0,frameStartTimeOffset:Ext.now(),animations:[],running:!1,animationTime:function(){return Ext.AnimationQueue.frameStartTime-this.frameStartTimeOffset},add:function(e){this.contains(e)||(this.animations.push(e),this.ignite(),"fireEvent"in e&&e.fireEvent("animationstart",e))},remove:function(e){for(var t=this.animations,i=0,n=t.length;i<n;++i)if(t[i]===e)return t.splice(i,1),void("fireEvent"in e&&e.fireEvent("animationend",e))},contains:function(e){return-1<Ext.Array.indexOf(this.animations,e)},empty:function(){return 0===this.animations.length},idle:function(){return 0===this.scheduled&&0===this.animations.length},step:function(e){for(var t,i=this.animations,n=0,r=i.length;n<r;n++)(t=i[n]).step(e),t.animating||(i.splice(n,1),n--,r--,t.fireEvent&&t.fireEvent("animationend",t))},schedule:function(e,t){var i="frameCallback"+this.frameCallbackId++;return t=t||this,Ext.isString(e)&&(e=t[e]),Ext.draw.Animator.frameCallbacks[i]={fn:e,scope:t,once:!0},this.scheduled++,Ext.draw.Animator.ignite(),i},scheduleIf:function(e,t){var i,n,r=Ext.draw.Animator.frameCallbacks;for(n in t=t||this,Ext.isString(e)&&(e=t[e]),r)if((i=r[n]).once&&i.fn===e&&i.scope===t)return null;return this.schedule(e,t)},cancel:function(e){Ext.draw.Animator.frameCallbacks[e]&&Ext.draw.Animator.frameCallbacks[e].once&&(this.scheduled=Math.max(--this.scheduled,0),delete Ext.draw.Animator.frameCallbacks[e],Ext.draw.Draw.endUpdateIOS()),this.idle()&&this.extinguish()},clear:function(){this.animations.length=0,Ext.draw.Animator.frameCallbacks={},this.extinguish()},addFrameCallback:function(e,t){var i="frameCallback"+this.frameCallbackId++;return t=t||this,Ext.isString(e)&&(e=t[e]),Ext.draw.Animator.frameCallbacks[i]={fn:e,scope:t},i},removeFrameCallback:function(e){delete Ext.draw.Animator.frameCallbacks[e],this.idle()&&this.extinguish()},fireFrameCallbacks:function(){var e,t,i,n=this.frameCallbacks;for(e in n)t=(i=n[e]).fn,Ext.isString(t)&&(t=i.scope[t]),t.call(i.scope),n[e]&&i.once&&(this.scheduled=Math.max(--this.scheduled,0),delete n[e])},handleFrame:function(){this.step(this.animationTime()),this.fireFrameCallbacks(),this.idle()&&this.extinguish()},ignite:function(){this.running||(this.running=!0,Ext.AnimationQueue.start(this.handleFrame,this),Ext.draw.Draw.beginUpdateIOS())},extinguish:function(){this.running=!1,Ext.AnimationQueue.stop(this.handleFrame,this),Ext.draw.Draw.endUpdateIOS()}}),Ext.define("Ext.draw.modifier.Animation",{extend:Ext.draw.modifier.Modifier,alias:"modifier.animation",config:{easing:Ext.identityFn,duration:0,customEasings:{},customDurations:{}},constructor:function(e){this.anyAnimation=this.anySpecialAnimations=!1,this.animating=0,this.animatingPool=[],this.callParent([e])},prepareAttributes:function(e){e.hasOwnProperty("timers")||(e.animating=!1,e.timers={},e.targets=Ext.Object.chain(e),e.targets.prototype=e),this._lower&&this._lower.prepareAttributes(e.targets)},updateSprite:function(e){this.setConfig(e.config.animation)},updateDuration:function(e){this.anyAnimation=0<e},applyEasing:function(e){return"string"==typeof e&&(e=Ext.draw.TimingFunctions.easingMap[e]),e},applyCustomEasings:function(e,t){var i,n,r,s,o,a;for(n in t=t||{},e)for(i=!0,s=e[n],r=n.split(","),"string"==typeof s&&(s=Ext.draw.TimingFunctions.easingMap[s]),o=0,a=r.length;o<a;o++)t[r[o]]=s;return i&&(this.anySpecialAnimations=i),t},setEasingOn:function(e,t){var i,n,r={};for(i=0,n=(e=Ext.Array.from(e).slice()).length;i<n;i++)r[e[i]]=t;this.setCustomEasings(r)},clearEasingOn:function(e){var t,i;for(t=0,i=(e=Ext.Array.from(e,!0)).length;t<i;t++)delete this._customEasings[e[t]]},applyCustomDurations:function(e,t){var i,n,r,s,o,a;for(n in t=t||{},e)for(i=!0,r=e[n],o=0,a=(s=n.split(",")).length;o<a;o++)t[s[o]]=r;return i&&(this.anySpecialAnimations=i),t},setDurationOn:function(e,t){var i,n,r={};for(i=0,n=(e=Ext.Array.from(e).slice()).length;i<n;i++)r[e[i]]=t;this.setCustomDurations(r)},clearDurationOn:function(e){var t,i;for(t=0,i=(e=Ext.Array.from(e,!0)).length;t<i;t++)delete this._customDurations[e[t]]},setAnimating:function(e,t){var i,n=this.animatingPool;if(e.animating!==t)if(e.animating=t)n.push(e),0===this.animating&&Ext.draw.Animator.add(this),this.animating++;else{for(i=n.length;i--;)n[i]===e&&n.splice(i,1);this.animating=n.length}},setAttrs:function(e,t){var i,n,r,s,o,a,l,c,u=e.timers,d=this._sprite.self.def._animationProcessors,h=this._easing,f=this._duration,g=this._customDurations,p=this._customEasings,m=this.anySpecialAnimations,x=this.anyAnimation||m,y=e.targets,v=!1;if(!x){for(n in t)e[n]===t[n]?delete t[n]:e[n]=t[n],delete y[n],delete u[n];return t}for(n in t){if((r=t[n])!==(s=e[n])&&null!=s&&(o=d[n])){if(a=h,l=f,m&&(n in p&&(a=p[n]),n in g&&(l=g[n])),(s&&s.isGradient||r&&r.isGradient)&&(l=0),l){u[n]||(u[n]={}),(i=u[n]).start=0,i.easing=a,i.duration=l,i.compute=o.compute,i.serve=o.serve||Ext.identityFn,i.remove=t.removeFromInstance&&t.removeFromInstance[n],o.parseInitial?(c=o.parseInitial(s,r),i.source=c[0],i.target=c[1]):o.parse?(i.source=o.parse(s),i.target=o.parse(r)):(i.source=s,i.target=r),y[n]=r,delete t[n],v=!0;continue}delete y[n]}else delete y[n];delete u[n]}return v&&!e.animating&&this.setAnimating(e,!0),t},updateAttributes:function(e){if(!e.animating)return{};var t,i,n,r={},s=!1,o=e.timers,a=e.targets,l=Ext.draw.Animator.animationTime();if(e.lastUpdate===l)return null;for(t in o)1<=(n=(i=o[t]).start?(l-i.start)/i.duration:(i.start=l,0))?(r[t]=a[t],delete a[t],o[t].remove&&(r.removeFromInstance=r.removeFromInstance||{},r.removeFromInstance[t]=!0),delete o[t]):(r[t]=i.serve(i.compute(i.source,i.target,i.easing(n),e[t])),s=!0);return e.lastUpdate=l,this.setAnimating(e,s),r},pushDown:function(e,t){return t=this.callParent([e.targets,t]),this.setAttrs(e,t)},popUp:function(e,t){return e=e.prototype,t=this.setAttrs(e,t),this._upper?this._upper.popUp(e,t):Ext.apply(e,t)},step:function(e){for(var t,i,n=this.animatingPool.slice(),r=n.length,s=0;s<r;s++)t=n[s],(i=this.updateAttributes(t))&&this._upper&&this._upper.popUp(t,i)},stop:function(){var e,t,i=this.animatingPool;for(this.step(),e=0,t=i.length;e<t;e++)i[e].animating=!1;this.animatingPool.length=0,this.animating=0,Ext.draw.Animator.remove(this)},destroy:function(){Ext.draw.Animator.remove(this),this.callParent()}}),Ext.define("Ext.draw.modifier.Highlight",{extend:Ext.draw.modifier.Modifier,alias:"modifier.highlight",config:{enabled:!1,style:null},preFx:!0,applyStyle:function(e,t){return t=t||{},this.getSprite()?Ext.apply(t,this.getSprite().self.def.normalize(e)):Ext.apply(t,e),t},prepareAttributes:function(e){e.hasOwnProperty("highlightOriginal")||(e.highlighted=!1,e.highlightOriginal=Ext.Object.chain(e),(e.highlightOriginal.prototype=e).highlightOriginal.removeFromInstance={}),this._lower&&this._lower.prepareAttributes(e.highlightOriginal)},updateSprite:function(e,t){var i,n=this.getStyle();e&&(i=e.self.def,n&&(this._style=i.normalize(n)),this.setStyle(e.config.highlight),i.setConfig({defaults:{highlighted:!1},processors:{highlighted:"bool"}})),this.setSprite(e)},filterChanges:function(e,t){var i,n=e.highlightOriginal,r=this.getStyle();if(e.highlighted)for(i in t)r.hasOwnProperty(i)&&(n[i]=t[i],delete t[i]);return t},pushDown:function(e,t){var i,n,r,s,o=this.getStyle(),a=e.highlightOriginal,l=a.removeFromInstance;if(t.hasOwnProperty("highlighted")){if(i=t.highlighted,delete t.highlighted,this._lower&&(t=this._lower.pushDown(a,t)),t=this.filterChanges(e,t),i!==e.highlighted){if(i)for(n in o)n in t?a[n]=t[n]:(r=e.template&&e.template.ownAttr)&&!e.prototype.hasOwnProperty(n)?(l[n]=!0,a[n]=r.targets[n]):((s=a.timers[n])&&s.remove&&(l[n]=!0),a[n]=e[n]),a[n]!==o[n]&&(t[n]=o[n]);else{for(n in o)n in t||(t[n]=a[n]),delete a[n];t.removeFromInstance=t.removeFromInstance||{},Ext.apply(t.removeFromInstance,l),a.removeFromInstance={}}t.highlighted=i}}else this._lower&&(t=this._lower.pushDown(a,t)),t=this.filterChanges(e,t);return t},popUp:function(e,t){t=this.filterChanges(e,t),this.callParent([e,t])}}),Ext.define("Ext.draw.sprite.Sprite",{alias:"sprite.sprite",mixins:{observable:Ext.mixin.Observable},isSprite:!0,$configStrict:!1,statics:{debug:!1,defaultHitTestOptions:{fill:!0,stroke:!0}},inheritableStatics:{def:{processors:{debug:"default",strokeStyle:"color",fillStyle:"color",strokeOpacity:"limited01",fillOpacity:"limited01",lineWidth:"number",lineCap:"enums(butt,round,square)",lineJoin:"enums(round,bevel,miter)",lineDash:"data",lineDashOffset:"number",miterLimit:"number",shadowColor:"color",shadowOffsetX:"number",shadowOffsetY:"number",shadowBlur:"number",globalAlpha:"limited01",globalCompositeOperation:"enums(source-over,destination-over,source-in,destination-in,source-out,destination-out,source-atop,destination-atop,lighter,xor,copy)",hidden:"bool",transformFillStroke:"bool",zIndex:"number",translationX:"number",translationY:"number",rotationRads:"number",rotationCenterX:"number",rotationCenterY:"number",scalingX:"number",scalingY:"number",scalingCenterX:"number",scalingCenterY:"number",constrainGradients:"bool"},aliases:{stroke:"strokeStyle",fill:"fillStyle",color:"fillStyle","stroke-width":"lineWidth","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","text-anchor":"textAlign",opacity:"globalAlpha",translateX:"translationX",translateY:"translationY",rotateRads:"rotationRads",rotateCenterX:"rotationCenterX",rotateCenterY:"rotationCenterY",scaleX:"scalingX",scaleY:"scalingY",scaleCenterX:"scalingCenterX",scaleCenterY:"scalingCenterY"},defaults:{hidden:!1,zIndex:0,strokeStyle:"none",fillStyle:"none",lineWidth:1,lineDash:[],lineDashOffset:0,lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowColor:"none",shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,globalAlpha:1,strokeOpacity:1,fillOpacity:1,transformFillStroke:!1,translationX:0,translationY:0,rotationRads:0,rotationCenterX:null,rotationCenterY:null,scalingX:1,scalingY:1,scalingCenterX:null,scalingCenterY:null,constrainGradients:!1},triggers:{zIndex:"zIndex",globalAlpha:"canvas",globalCompositeOperation:"canvas",transformFillStroke:"canvas",strokeStyle:"canvas",fillStyle:"canvas",strokeOpacity:"canvas",fillOpacity:"canvas",lineWidth:"canvas",lineCap:"canvas",lineJoin:"canvas",lineDash:"canvas",lineDashOffset:"canvas",miterLimit:"canvas",shadowColor:"canvas",shadowOffsetX:"canvas",shadowOffsetY:"canvas",shadowBlur:"canvas",translationX:"transform",translationY:"transform",rotationRads:"transform",rotationCenterX:"transform",rotationCenterY:"transform",scalingX:"transform",scalingY:"transform",scalingCenterX:"transform",scalingCenterY:"transform",constrainGradients:"canvas"},updaters:{bbox:"bboxUpdater",zIndex:function(e){e.dirtyZIndex=!0},transform:function(e){e.dirtyTransform=!0,e.bbox.transform.dirty=!0}}}},config:{parent:null,surface:null},onClassExtended:function(e,t){var i,n=e.superclass.self.def.initialConfig,r=t.inheritableStatics&&t.inheritableStatics.def;r?(i=Ext.Object.merge({},n,r),e.def=new Ext.draw.sprite.AttributeDefinition(i),delete t.inheritableStatics.def):e.def=new Ext.draw.sprite.AttributeDefinition(n),e.def.spriteClass=e},constructor:function(e){if("Ext.draw.sprite.Sprite"===Ext.getClassName(this))throw"Ext.draw.sprite.Sprite is an abstract class";var t,i,n=this,r=n.self.def,s=r.getDefaults(),o=r.getProcessors();for(i in e=Ext.isObject(e)?e:{},n.id=e.id||Ext.id(null,"ext-sprite-"),n.attr={},n.mixins.observable.constructor.apply(n,arguments),t=Ext.Array.from(e.modifiers,!0),n.createModifiers(t),n.initializeAttributes(),n.setAttributes(s,!0),e)i in o&&n["get"+i.charAt(0).toUpperCase()+i.substr(1)]&&Ext.raise("The "+n.$className+" sprite has both a config and an attribute with the same name: "+i+".");n.setAttributes(e)},updateSurface:function(e,t){t&&t.remove(this)},getDirty:function(){return this.attr.dirty},setDirty:function(e){var t;(this.attr.dirty=e)&&(t=this.getParent())&&t.setDirty(!0)},addModifier:function(e,t){var i,n=this.modifiers,r=n.animation,s=n.target;return e instanceof Ext.draw.modifier.Modifier||(i="string"==typeof e?e:e.type)&&!n[i]&&(n[i]=e=Ext.factory(e,null,null,"modifier")),e.setSprite(this),e.preFx||e.config&&e.config.preFx?(r._lower&&r._lower.setUpper(e),e.setUpper(r)):(s._lower.setUpper(e),e.setUpper(s)),t&&this.initializeAttributes(),e},createModifiers:function(e){var t,i,n,r=Ext.draw.modifier,s=this.getInitialConfig().animation;for(this.modifiers=t={target:new r.Target({sprite:this}),animation:new r.Animation(Ext.apply({sprite:this},s))},t.animation.setUpper(t.target),i=0,n=e.length;i<n;i++)this.addModifier(e[i],!1);return t},getAnimation:function(){return this.modifiers.animation},setAnimation:function(e){this.isConfiguring||this.modifiers.animation.setConfig(e||{duration:0})},initializeAttributes:function(){this.modifiers.target.prepareAttributes(this.attr)},callUpdaters:function(e){var t,i,n,r,s=this.self.def.getUpdaters(),o=!1,a=!1;t=(e=e||this.attr).pendingUpdaters,this.callUpdaters=Ext.emptyFn;do{for(n in o=!1,t)o=!0,i=t[n],delete t[n],"string"==typeof(r=s[n])&&(r=this[r]),r&&r.call(this,e,i);a=a||o}while(o);delete this.callUpdaters,a&&this.setDirty(!0)},callUpdater:function(e,t,i){this.scheduleUpdater(e,t,i),this.callUpdaters(e)},scheduleUpdaters:function(e,t,i){var n,r,s;if(e=e||this.attr,i)for(r=0,s=t.length;r<s;r++)n=t[r],this.scheduleUpdater(e,n,i);else for(n in t)i=t[n],this.scheduleUpdater(e,n,i)},scheduleUpdater:function(e,t,i){var n;i=i||[],t in(n=(e=e||this.attr).pendingUpdaters)?i.length&&(n[t]=Ext.Array.merge(n[t],i)):n[t]=i},setAttributes:function(e,t,i){var n;this.destroyed&&Ext.Error.raise("Setting attributes of a destroyed sprite."),n=t?i?e:Ext.apply({},e):this.self.def.normalize(e),this.modifiers.target.pushDown(this.attr,n)},setAttributesBypassingNormalization:function(e,t){return this.setAttributes(e,!0,t)},bboxUpdater:function(e){var t=0!==e.rotationRads,i=1!==e.scalingX||1!==e.scalingY,n=null===e.rotationCenterX||null===e.rotationCenterY,r=null===e.scalingCenterX||null===e.scalingCenterY;e.bbox.plain.dirty=!0,e.bbox.transform.dirty=!0,(t&&n||i&&r)&&this.scheduleUpdater(e,"transform")},getBBox:function(e){var t=this.attr.bbox,i=t.plain,n=t.transform;return i.dirty&&(this.updatePlainBBox(i),i.dirty=!1),e?i:(this.applyTransformations(),n.dirty&&(this.updateTransformedBBox(n,i),n.dirty=!1),n)},updatePlainBBox:Ext.emptyFn,updateTransformedBBox:function(e,t){this.attr.matrix.transformBBox(t,0,e)},getBBoxCenter:function(e){var t=this.getBBox(e);return t?[t.x+.5*t.width,t.y+.5*t.height]:[0,0]},hide:function(){return this.attr.hidden=!0,this.setDirty(!0),this},show:function(){return this.attr.hidden=!1,this.setDirty(!0),this},useAttributes:function(e,t){this.applyTransformations(this.isSpriteInstance);var i,n=this.attr.canvasAttributes,r=n.strokeStyle,s=n.fillStyle,o=n.lineDash,a=n.lineDashOffset;for(i in r&&(r.isGradient?(e.strokeStyle="black",e.strokeGradient=r):e.strokeGradient=!1),s&&(s.isGradient?(e.fillStyle="black",e.fillGradient=s):e.fillGradient=!1),o&&e.setLineDash(o),Ext.isNumber(a)&&Ext.isNumber(e.lineDashOffset)&&(e.lineDashOffset=a),n)void 0!==n[i]&&n[i]!==e[i]&&(e[i]=n[i]);this.setGradientBBox(e,t)},setGradientBBox:function(e,t){var i=this.attr;i.constrainGradients?e.setGradientBBox({x:t[0],y:t[1],width:t[2],height:t[3]}):e.setGradientBBox(this.getBBox(i.transformFillStroke))},applyTransformations:function(e){if(e||this.attr.dirtyTransform){var t,i,n=this.attr,r=this.getBBoxCenter(!0),s=r[0],o=r[1],a=n.translationX,l=n.translationY,c=n.scalingX,u=null===n.scalingY?n.scalingX:n.scalingY,d=null===n.scalingCenterX?s:n.scalingCenterX,h=null===n.scalingCenterY?o:n.scalingCenterY,f=n.rotationRads,g=null===n.rotationCenterX?s:n.rotationCenterX,p=null===n.rotationCenterY?o:n.rotationCenterY,m=Math.cos(f),x=Math.sin(f);1===c&&1===u&&(h=d=0),0===f&&(p=g=0),t=d*(1-c)-g,i=h*(1-u)-p,n.matrix.elements=[m*c,x*c,-x*u,m*u,m*t-x*i+g+a,x*t+m*i+p+l],n.matrix.inverse(n.inverseMatrix),n.dirtyTransform=!1,n.bbox.transform.dirty=!0}},transform:function(e,t){var i,n=this.attr,r=n.matrix;return i=e&&e.isMatrix?e.elements:e,Ext.isArray(i)&&6===i.length||Ext.raise("An instance of Ext.draw.Matrix or an array of 6 numbers is expected."),r.prepend.apply(r,i.slice()),r.inverse(n.inverseMatrix),t&&this.updateTransformAttributes(),n.dirtyTransform=!1,n.bbox.transform.dirty=!0,this.setDirty(!0),this},updateTransformAttributes:function(){var e=this.attr,t=e.matrix.split();e.rotationRads=t.rotate,e.rotationCenterX=0,e.rotationCenterY=0,e.scalingX=t.scaleX,e.scalingY=t.scaleY,e.scalingCenterX=0,e.scalingCenterY=0,e.translationX=t.translateX,e.translationY=t.translateY},resetTransform:function(e){var t=this.attr;return t.matrix.reset(),t.inverseMatrix.reset(),e||this.updateTransformAttributes(),t.dirtyTransform=!1,t.bbox.transform.dirty=!0,this.setDirty(!0),this},setTransform:function(e,t){return this.resetTransform(!0),this.transform.call(this,e,t),this},preRender:Ext.emptyFn,render:Ext.emptyFn,renderBBox:function(e,t){var i=this.getBBox();t.beginPath(),t.moveTo(i.x,i.y),t.lineTo(i.x+i.width,i.y),t.lineTo(i.x+i.width,i.y+i.height),t.lineTo(i.x,i.y+i.height),t.closePath(),t.strokeStyle="red",t.strokeOpacity=1,t.lineWidth=.5,t.stroke()},hitTest:function(e,t){var i,n,r;return this.isVisible()&&(i=e[0],n=e[1],(r=this.getBBox())&&i>=r.x&&i<=r.x+r.width&&n>=r.y&&n<=r.y+r.height)?{sprite:this}:null},isVisible:function(){var e=this.attr,t=this.getParent(),i=t&&(t.isSurface||t.isVisible())&&!e.hidden&&e.globalAlpha,n=Ext.util.Color.NONE,r=Ext.util.Color.RGBA_NONE,s=e.fillOpacity&&e.fillStyle!==n&&e.fillStyle!==r,o=e.strokeOpacity&&e.strokeStyle!==n&&e.strokeStyle!==r;return!!(i&&(s||o))},repaint:function(){var e=this.getSurface();e&&e.renderFrame()},remove:function(){var e=this.getSurface();return e&&e.isSurface?e.remove(this):null},destroy:function(){for(var e,t=this.modifiers.target;t;)t=(e=t)._lower,e.destroy();delete this.attr,this.remove(),!1!==this.fireEvent("beforedestroy",this)&&this.fireEvent("destroy",this),this.callParent()}},function(){this.def=new Ext.draw.sprite.AttributeDefinition(this.def),this.def.spriteClass=this}),Ext.define("Ext.draw.Path",{statics:{pathRe:/,?([achlmqrstvxz]),?/gi,pathRe2:/-/gi,pathSplitRe:/\\s|,/g},svgString:"",constructor:function(e){this.commands=[],this.params=[],this.cursor=null,this.startX=0,this.startY=0,e&&this.fromSvgString(e)},clear:function(){this.params.length=0,this.commands.length=0,this.cursor=null,this.startX=0,this.startY=0,this.dirt()},dirt:function(){this.svgString=""},moveTo:function(e,t){this.cursor||(this.cursor=[e,t]),this.params.push(e,t),this.commands.push("M"),this.startX=e,this.startY=t,this.cursor[0]=e,this.cursor[1]=t,this.dirt()},lineTo:function(e,t){this.cursor?(this.params.push(e,t),this.commands.push("L")):(this.cursor=[e,t],this.params.push(e,t),this.commands.push("M")),this.cursor[0]=e,this.cursor[1]=t,this.dirt()},bezierCurveTo:function(e,t,i,n,r,s){this.cursor||this.moveTo(e,t),this.params.push(e,t,i,n,r,s),this.commands.push("C"),this.cursor[0]=r,this.cursor[1]=s,this.dirt()},quadraticCurveTo:function(e,t,i,n){this.cursor||this.moveTo(e,t),this.bezierCurveTo((2*e+this.cursor[0])/3,(2*t+this.cursor[1])/3,(2*e+i)/3,(2*t+n)/3,i,n)},closePath:function(){this.cursor&&(this.cursor=null,this.commands.push("Z"),this.dirt())},arcTo:function(e,t,i,n,r,s,o){var a=this;if(void 0===s&&(s=r),void 0===o&&(o=0),a.cursor)if(0!==r&&0!==s){i-=e,n-=t;var l,c,u,d,h,f,g,p,m,x,y=a.cursor[0]-e,v=a.cursor[1]-t,E=i*v-n*y,b=Math.sqrt(y*y+v*v),C=Math.sqrt(i*i+n*n);if(0!=E){s!==r?(x=(u=(l=Math.cos(o))/r)*y+(d=(c=Math.sin(o))/s)*v,v=(h=-c/r)*y+(f=l/s)*v,y=x,x=u*i+d*n,n=h*i+f*n,i=x):(y/=r,v/=s,i/=r,n/=s),p=y*C+i*b,m=v*C+n*b;var S=((p*=g=1/(Math.sin(.5*Math.asin(Math.abs(E)/(b*C)))*Math.sqrt(p*p+m*m)))*y+(m*=g)*v)/(y*y+v*v),w=(p*i+m*n)/(i*i+n*n),T=y*S-p,P=v*S-m,I=i*w-p,A=n*w-m,k=Math.atan2(P,T),D=Math.atan2(A,I);0<E?D<k&&(D+=2*Math.PI):k<D&&(k+=2*Math.PI),s!==r?(p=l*p*r-c*m*s+e,m=c*m*s+l*m*s+t,a.lineTo(l*r*T-c*s*P+p,c*r*T+l*s*P+m)):(p=p*r+e,m=m*s+t,a.lineTo(r*T+p,s*P+m)),a.ellipse(p,m,r,s,o,k,D,E<0)}else a.lineTo(e,t)}else a.lineTo(e,t);else a.moveTo(e,t)},ellipse:function(e,t,i,n,r,s,o,a){var l,c,u,d,h=this,f=h.params,g=f.length;if(o-s>=2*Math.PI)return h.ellipse(e,t,i,n,r,s,s+Math.PI,a),void h.ellipse(e,t,i,n,r,s+Math.PI,o,a);if(a)for(s<o&&(s+=2*Math.PI),l=h.approximateArc(f,e,t,i,n,r,o,s),u=g,d=f.length-2;u<d;u+=2,d-=2)c=f[u],f[u]=f[d],f[d]=c,c=f[u+1],f[u+1]=f[d+1],f[d+1]=c;else o<s&&(o+=2*Math.PI),l=h.approximateArc(f,e,t,i,n,r,s,o);for(h.cursor?(h.cursor[0]=f[f.length-2],h.cursor[1]=f[f.length-1],h.commands.push("L")):(h.cursor=[f[f.length-2],f[f.length-1]],h.commands.push("M")),u=2;u<l;u+=6)h.commands.push("C");h.dirt()},arc:function(e,t,i,n,r,s){this.ellipse(e,t,i,i,0,n,r,s)},rect:function(e,t,i,n){0!==i&&0!==n&&(this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath())},approximateArc:function(e,t,i,n,r,s,o,a){var l,c,u,d,h,f,g=Math.cos(s),p=Math.sin(s),m=Math.cos(o),x=Math.sin(o),y=g*m*n-p*x*r,v=-g*x*n-p*m*r,E=p*m*n+g*x*r,b=-p*x*n+g*m*r,C=Math.PI/2,S=2,w=y,T=v,P=E,I=b,A=.547443256150549;for((a-=o)<0&&(a+=2*Math.PI),e.push(y+t,E+i);C<=a;)e.push(w+T*A+t,P+I*A+i,w*A+T+t,P*A+I+i,T+t,I+i),S+=6,a-=C,l=w,w=T,T=-l,l=P,P=I,I=-l;return a&&(c=(.3294738052815987+.012120855841304373*a)*a,h=(u=Math.cos(a))+c*(d=Math.sin(a)),f=d-c*u,e.push(w+T*c+t,P+I*c+i,w*h+T*f+t,P*h+I*f+i,w*u+T*d+t,P*u+I*d+i),S+=6),S},arcSvg:function(e,t,i,n,r,s,o){e<0&&(e=-e),t<0&&(t=-t);var a,l,c=this.cursor[0],u=this.cursor[1],d=(c-s)/2,h=(u-o)/2,f=Math.cos(i),g=Math.sin(i),p=d*f+h*g,m=-d*g+h*f,x=p/e,y=m/t,v=x*x+y*y,E=.5*(c+s),b=.5*(u+o),C=0,S=0;1<=v?(e*=v=Math.sqrt(v),t*=v):(v=Math.sqrt(1/v-1),n===r&&(v=-v),E+=f*(C=v*e*y)-g*(S=-v*t*x),b+=g*C+f*S),a=Math.atan2((m-S)/t,(p-C)/e),l=Math.atan2((-m-S)/t,(-p-C)/e)-a,r?l<=0&&(l+=2*Math.PI):0<=l&&(l-=2*Math.PI),this.ellipse(E,b,e,t,i,a,a+l,1-r)},fromSvgString:function(e){if(e){var t,i,n,r,s,o=this,a={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0,A:7,C:6,H:1,L:2,M:2,Q:4,S:4,T:2,V:1,Z:0},l="",c=0,u=0,d=!1;for(Ext.isString(e)?t=e.replace(Ext.draw.Path.pathRe," $1 ").replace(Ext.draw.Path.pathRe2," -").split(Ext.draw.Path.pathSplitRe):Ext.isArray(e)&&(t=e.join(",").split(Ext.draw.Path.pathSplitRe)),s=r=0;r<t.length;r++)""!==t[r]&&(t[s++]=t[r]);for(t.length=s,o.clear(),r=0;r<t.length;)switch(l=d,d=t[r],r++,d){case"M":for(o.moveTo(c=+t[r],u=+t[r+1]),r+=2;r<s&&!a.hasOwnProperty(t[r]);)o.lineTo(c=+t[r],u=+t[r+1]),r+=2;break;case"L":for(o.lineTo(c=+t[r],u=+t[r+1]),r+=2;r<s&&!a.hasOwnProperty(t[r]);)o.lineTo(c=+t[r],u=+t[r+1]),r+=2;break;case"A":for(;r<s&&!a.hasOwnProperty(t[r]);)o.arcSvg(+t[r],+t[r+1],t[r+2]*Math.PI/180,+t[r+3],+t[r+4],c=+t[r+5],u=+t[r+6]),r+=7;break;case"C":for(;r<s&&!a.hasOwnProperty(t[r]);)o.bezierCurveTo(+t[r],+t[r+1],i=+t[r+2],n=+t[r+3],c=+t[r+4],u=+t[r+5]),r+=6;break;case"Z":o.closePath();break;case"m":for(o.moveTo(c+=+t[r],u+=+t[r+1]),r+=2;r<s&&!a.hasOwnProperty(t[r]);)o.lineTo(c+=+t[r],u+=+t[r+1]),r+=2;break;case"l":for(o.lineTo(c+=+t[r],u+=+t[r+1]),r+=2;r<s&&!a.hasOwnProperty(t[r]);)o.lineTo(c+=+t[r],u+=+t[r+1]),r+=2;break;case"a":for(;r<s&&!a.hasOwnProperty(t[r]);)o.arcSvg(+t[r],+t[r+1],t[r+2]*Math.PI/180,+t[r+3],+t[r+4],c+=+t[r+5],u+=+t[r+6]),r+=7;break;case"c":for(;r<s&&!a.hasOwnProperty(t[r]);)o.bezierCurveTo(c+ +t[r],u+ +t[r+1],i=c+ +t[r+2],n=u+ +t[r+3],c+=+t[r+4],u+=+t[r+5]),r+=6;break;case"z":o.closePath();break;case"s":for("c"!==l&&"C"!==l&&"s"!==l&&"S"!==l&&(i=c,n=u);r<s&&!a.hasOwnProperty(t[r]);)o.bezierCurveTo(c+c-i,u+u-n,i=c+ +t[r],n=u+ +t[r+1],c+=+t[r+2],u+=+t[r+3]),r+=4;break;case"S":for("c"!==l&&"C"!==l&&"s"!==l&&"S"!==l&&(i=c,n=u);r<s&&!a.hasOwnProperty(t[r]);)o.bezierCurveTo(c+c-i,u+u-n,i=+t[r],n=+t[r+1],c=+t[r+2],u=+t[r+3]),r+=4;break;case"q":for(;r<s&&!a.hasOwnProperty(t[r]);)o.quadraticCurveTo(i=c+ +t[r],n=u+ +t[r+1],c+=+t[r+2],u+=+t[r+3]),r+=4;break;case"Q":for(;r<s&&!a.hasOwnProperty(t[r]);)o.quadraticCurveTo(i=+t[r],n=+t[r+1],c=+t[r+2],u=+t[r+3]),r+=4;break;case"t":for("q"!==l&&"Q"!==l&&"t"!==l&&"T"!==l&&(i=c,n=u);r<s&&!a.hasOwnProperty(t[r]);)o.quadraticCurveTo(i=c+c-i,n=u+u-n,c+=+t[r+1],u+=+t[r+2]),r+=2;break;case"T":for("q"!==l&&"Q"!==l&&"t"!==l&&"T"!==l&&(i=c,n=u);r<s&&!a.hasOwnProperty(t[r]);)o.quadraticCurveTo(i=c+c-i,n=u+u-n,c=+t[r+1],u=+t[r+2]),r+=2;break;case"h":for(;r<s&&!a.hasOwnProperty(t[r]);)o.lineTo(c+=+t[r],u),r++;break;case"H":for(;r<s&&!a.hasOwnProperty(t[r]);)o.lineTo(c=+t[r],u),r++;break;case"v":for(;r<s&&!a.hasOwnProperty(t[r]);)o.lineTo(c,u+=+t[r]),r++;break;case"V":for(;r<s&&!a.hasOwnProperty(t[r]);)o.lineTo(c,u=+t[r]),r++}}},clone:function(){var e=new Ext.draw.Path;return e.params=this.params.slice(0),e.commands=this.commands.slice(0),e.cursor=this.cursor?this.cursor.slice(0):null,e.startX=this.startX,e.startY=this.startY,e.svgString=this.svgString,e},transform:function(e){if(!e.isIdentity()){for(var t,i,n=e.getXX(),r=e.getYX(),s=e.getDX(),o=e.getXY(),a=e.getYY(),l=e.getDY(),c=this.params,u=0,d=c.length;u<d;u+=2)t=c[u],i=c[u+1],c[u]=t*n+i*r+s,c[u+1]=t*o+i*a+l;this.dirt()}},getDimension:function(e){if(e=e||{},!this.commands||!this.commands.length)return e.x=0,e.y=0,e.width=0,e.height=0,e;e.left=1/0,e.top=1/0,e.right=-1/0,e.bottom=-1/0;for(var t,i,n=0,r=0,s=this.commands,o=this.params,a=s.length;n<a;n++)switch(s[n]){case"M":case"L":t=o[r],i=o[r+1],e.left=Math.min(t,e.left),e.top=Math.min(i,e.top),e.right=Math.max(t,e.right),e.bottom=Math.max(i,e.bottom),r+=2;break;case"C":this.expandDimension(e,t,i,o[r],o[r+1],o[r+2],o[r+3],t=o[r+4],i=o[r+5]),r+=6}return e.x=e.left,e.y=e.top,e.width=e.right-e.left,e.height=e.bottom-e.top,e},getDimensionWithTransform:function(e,t){if(!this.commands||!this.commands.length)return(t=t||{}).x=0,t.y=0,t.width=0,t.height=0,t;t.left=1/0,t.top=1/0,t.right=-1/0,t.bottom=-1/0;for(var i,n,r=e.getXX(),s=e.getYX(),o=e.getDX(),a=e.getXY(),l=e.getYY(),c=e.getDY(),u=0,d=0,h=this.commands,f=this.params,g=h.length;u<g;u++)switch(h[u]){case"M":case"L":i=f[d]*r+f[d+1]*s+o,n=f[d]*a+f[d+1]*l+c,t.left=Math.min(i,t.left),t.top=Math.min(n,t.top),t.right=Math.max(i,t.right),t.bottom=Math.max(n,t.bottom),d+=2;break;case"C":this.expandDimension(t,i,n,f[d]*r+f[d+1]*s+o,f[d]*a+f[d+1]*l+c,f[d+2]*r+f[d+3]*s+o,f[d+2]*a+f[d+3]*l+c,i=f[d+4]*r+f[d+5]*s+o,n=f[d+4]*a+f[d+5]*l+c),d+=6}return(t=t||{}).x=t.left,t.y=t.top,t.width=t.right-t.left,t.height=t.bottom-t.top,t},expandDimension:function(e,t,i,n,r,s,o,a,l){var c=e.left,u=e.right,d=e.top,h=e.bottom,f=this.dim||(this.dim=[]);this.curveDimension(t,n,s,a,f),c=Math.min(c,f[0]),u=Math.max(u,f[1]),this.curveDimension(i,r,o,l,f),d=Math.min(d,f[0]),h=Math.max(h,f[1]),e.left=c,e.right=u,e.top=d,e.bottom=h},curveDimension:function(e,t,i,n,r){var s,o,a,l=3*(3*(t-i)-e+n),c=6*(e-2*t+i),u=-3*(e-t),d=Math.min(e,n),h=Math.max(e,n);if(0==l){if(0==c)return r[0]=d,void(r[1]=h);0<(s=-u/c)&&s<1&&(o=this.interpolate(e,t,i,n,s),d=Math.min(d,o),h=Math.max(h,o))}else 0<=(a=c*c-4*l*u)&&(0<(s=((a=Math.sqrt(a))-c)/2/l)&&s<1&&(o=this.interpolate(e,t,i,n,s),d=Math.min(d,o),h=Math.max(h,o)),0<a&&0<(s-=a/l)&&s<1&&(o=this.interpolate(e,t,i,n,s),d=Math.min(d,o),h=Math.max(h,o)));r[0]=d,r[1]=h},interpolate:function(e,t,i,n,r){var s;return 0===r?e:1===r?n:r*r*r*(n+(s=(1-r)/r)*(3*i+s*(3*t+s*e)))},fromStripes:function(e){var t,i,n,r=this,s=0,o=e.length;for(r.clear();s<o;s++)for(n=e[s],r.params.push.apply(r.params,n),r.commands.push("M"),t=2,i=n.length;t<i;t+=6)r.commands.push("C");r.cursor||(r.cursor=[]),r.cursor[0]=r.params[r.params.length-2],r.cursor[1]=r.params[r.params.length-1],r.dirt()},toStripes:function(e){var t,i,n,r,s,o,a,l,c,u=e||[],d=this.commands,h=this.params,f=d.length;for(c=l=0;l<f;l++)switch(d[l]){case"M":t=[o=r=h[c++],a=s=h[c++]],u.push(t);break;case"L":i=h[c++],n=h[c++],t.push((r+r+i)/3,(s+s+n)/3,(r+i+i)/3,(s+n+n)/3,r=i,s=n);break;case"C":t.push(h[c++],h[c++],h[c++],h[c++],r=h[c++],s=h[c++]);break;case"Z":i=o,n=a,t.push((r+r+i)/3,(s+s+n)/3,(r+i+i)/3,(s+n+n)/3,r=i,s=n)}return u},updateSvgString:function(){for(var e=[],t=this.commands,i=this.params,n=t.length,r=0,s=0;r<n;r++)switch(t[r]){case"M":e.push("M"+i[s]+","+i[s+1]),s+=2;break;case"L":e.push("L"+i[s]+","+i[s+1]),s+=2;break;case"C":e.push("C"+i[s]+","+i[s+1]+" "+i[s+2]+","+i[s+3]+" "+i[s+4]+","+i[s+5]),s+=6;break;case"Z":e.push("Z")}this.svgString=e.join("")},toString:function(){return this.svgString||this.updateSvgString(),this.svgString}}),Ext.define("Ext.draw.overrides.hittest.Path",{override:"Ext.draw.Path",rayOrigin:{x:-1e4,y:-1e4},isPointInPath:function(e,t){var i,n,r=this.commands,s=Ext.draw.PathUtil,o=this.rayOrigin,a=this.params,l=r.length,c=null,u=null,d=0,h=0,f=0;for(n=i=0;i<l;i++)switch(r[i]){case"M":null!==c&&s.linesIntersection(c,u,d,h,o.x,o.y,e,t)&&(f+=1),c=d=a[n],u=h=a[n+1],n+=2;break;case"L":s.linesIntersection(d,h,a[n],a[n+1],o.x,o.y,e,t)&&(f+=1),d=a[n],h=a[n+1],n+=2;break;case"C":f+=s.cubicLineIntersections(d,a[n],a[n+2],a[n+4],h,a[n+1],a[n+3],a[n+5],o.x,o.y,e,t).length,d=a[n+4],h=a[n+5],n+=6;break;case"Z":null!==c&&s.linesIntersection(c,u,d,h,o.x,o.y,e,t)&&(f+=1)}return f%2==1},isPointOnPath:function(e,t){var i,n,r=this.commands,s=Ext.draw.PathUtil,o=this.params,a=r.length,l=null,c=null,u=0,d=0;for(n=i=0;i<a;i++)switch(r[i]){case"M":if(null!==l&&s.pointOnLine(l,c,u,d,e,t))return!0;l=u=o[n],c=d=o[n+1],n+=2;break;case"L":if(s.pointOnLine(u,d,o[n],o[n+1],e,t))return!0;u=o[n],d=o[n+1],n+=2;break;case"C":if(s.pointOnCubic(u,o[n],o[n+2],o[n+4],d,o[n+1],o[n+3],o[n+5],e,t))return!0;u=o[n+4],d=o[n+5],n+=6;break;case"Z":if(null!==l&&s.pointOnLine(l,c,u,d,e,t))return!0}return!1},getSegmentIntersections:function(e,t,i,n,r,s,o,a){var l,c,u,d=arguments.length,h=Ext.draw.PathUtil,f=this.commands,g=this.params,p=f.length,m=null,x=null,y=0,v=0,E=[];for(c=l=0;l<p;l++)switch(f[l]){case"M":if(null!==m)switch(d){case 4:(u=h.linesIntersection(m,x,y,v,e,t,i,n))&&E.push(u);break;case 8:u=h.cubicLineIntersections(e,i,r,o,t,n,s,a,m,x,y,v),E.push.apply(E,u)}m=y=g[c],x=v=g[c+1],c+=2;break;case"L":switch(d){case 4:(u=h.linesIntersection(y,v,g[c],g[c+1],e,t,i,n))&&E.push(u);break;case 8:u=h.cubicLineIntersections(e,i,r,o,t,n,s,a,y,v,g[c],g[c+1]),E.push.apply(E,u)}y=g[c],v=g[c+1],c+=2;break;case"C":switch(d){case 4:u=h.cubicLineIntersections(y,g[c],g[c+2],g[c+4],v,g[c+1],g[c+3],g[c+5],e,t,i,n),E.push.apply(E,u);break;case 8:u=h.cubicsIntersections(y,g[c],g[c+2],g[c+4],v,g[c+1],g[c+3],g[c+5],e,i,r,o,t,n,s,a),E.push.apply(E,u)}y=g[c+4],v=g[c+5],c+=6;break;case"Z":if(null!==m)switch(d){case 4:(u=h.linesIntersection(m,x,y,v,e,t,i,n))&&E.push(u);break;case 8:u=h.cubicLineIntersections(e,i,r,o,t,n,s,a,m,x,y,v),E.push.apply(E,u)}}return E},getIntersections:function(e){var t,i,n,r=this.commands,s=this.params,o=r.length,a=null,l=null,c=0,u=0,d=[];for(i=t=0;t<o;t++)switch(r[t]){case"M":null!==a&&(n=e.getSegmentIntersections.call(e,a,l,c,u),d.push.apply(d,n)),a=c=s[i],l=u=s[i+1],i+=2;break;case"L":n=e.getSegmentIntersections.call(e,c,u,s[i],s[i+1]),d.push.apply(d,n),c=s[i],u=s[i+1],i+=2;break;case"C":n=e.getSegmentIntersections.call(e,c,u,s[i],s[i+1],s[i+2],s[i+3],s[i+4],s[i+5]),d.push.apply(d,n),c=s[i+4],u=s[i+5],i+=6;break;case"Z":null!==a&&(n=e.getSegmentIntersections.call(e,a,l,c,u),d.push.apply(d,n))}return d}}),Ext.define("Ext.draw.sprite.Path",{extend:Ext.draw.sprite.Sprite,alias:["sprite.path","Ext.draw.Sprite"],type:"path",isPath:!0,inheritableStatics:{def:{processors:{path:function(e,t){return e instanceof Ext.draw.Path||(e=new Ext.draw.Path(e)),e}},aliases:{d:"path"},triggers:{path:"bbox"},updaters:{path:function(e){var t=e.path;t&&t.bindAttr===e||(((t=new Ext.draw.Path).bindAttr=e).path=t),t.clear(),this.updatePath(t,e),this.scheduleUpdater(e,"bbox",["path"])}}}},updatePlainBBox:function(e){this.attr.path&&this.attr.path.getDimension(e)},updateTransformedBBox:function(e){this.attr.path&&this.attr.path.getDimensionWithTransform(this.attr.matrix,e)},render:function(e,t){var i=this.attr.matrix,n=this.attr;if(n.path&&0!==n.path.params.length){i.toContext(t),t.appendPath(n.path),t.fillStroke(n);var r=n.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;r&&(r.bbox&&this.renderBBox(e,t),r.xray&&this.renderXRay(e,t))}},renderXRay:function(e,t){var i,n,r=this.attr,s=r.matrix,o=r.inverseMatrix,a=r.path,l=a.commands,c=a.params,u=l.length,d=2*Math.PI;for(s.toContext(t),t.beginPath(),n=i=0;i<u;i++)switch(l[i]){case"M":case"L":t.moveTo(c[n]-2,c[n+1]-2),t.rect(c[n]-2,c[n+1]-2,4,4),n+=2;break;case"C":t.moveTo(c[n]+2,c[n+1]),t.arc(c[n],c[n+1],2,0,d,!0),n+=2,t.moveTo(c[n]+2,c[n+1]),t.arc(c[n],c[n+1],2,0,d,!0),n+=2,t.moveTo(c[n]+4,c[n+1]),t.rect(c[n]-2,c[n+1]-2,4,4),n+=2}for(o.toContext(t),t.strokeStyle="black",t.strokeOpacity=1,t.lineWidth=1,t.stroke(),s.toContext(t),t.beginPath(),n=i=0;i<u;i++)switch(l[i]){case"M":case"L":t.moveTo(c[n],c[n+1]),n+=2;break;case"C":t.lineTo(c[n],c[n+1]),n+=2,t.moveTo(c[n],c[n+1]),n+=2,t.lineTo(c[n],c[n+1]),n+=2}o.toContext(t),t.lineWidth=.5,t.stroke()},updatePath:function(e,t){}}),Ext.define("Ext.draw.overrides.hittest.sprite.Path",{override:"Ext.draw.sprite.Path",isPointInPath:function(e,t){var i,n,r,s=this.attr;return s.fillStyle===Ext.util.Color.RGBA_NONE?this.isPointOnPath(e,t):(i=s.path,s.matrix.isIdentity()||(n=i.params.slice(0),i.transform(s.matrix)),r=i.isPointInPath(e,t),n&&(i.params=n),r)},isPointOnPath:function(e,t){var i,n,r=this.attr,s=r.path;return r.matrix.isIdentity()||(i=s.params.slice(0),s.transform(r.matrix)),n=s.isPointOnPath(e,t),i&&(s.params=i),n},hitTest:function(e,t){var i,n=this.attr,r=n.path,s=n.matrix,o=e[0],a=e[1],l=null;return this.callParent([e,t])&&(t=t||Ext.draw.sprite.Sprite.defaultHitTestOptions,s.isIdentity()||(i=r.params.slice(0),r.transform(n.matrix)),t.fill&&t.stroke?n.fillStyle!==Ext.util.Color.NONE&&n.fillStyle!==Ext.util.Color.RGBA_NONE?r.isPointInPath(o,a)&&(l={sprite:this}):(r.isPointInPath(o,a)||r.isPointOnPath(o,a))&&(l={sprite:this}):t.stroke&&!t.fill?r.isPointOnPath(o,a)&&(l={sprite:this}):t.fill&&!t.stroke&&r.isPointInPath(o,a)&&(l={sprite:this}),i&&(r.params=i)),l},getIntersections:function(e){if(!e.isSprite||!e.isPath)return[];var t,i,n,r=this.attr,s=e.attr,o=r.path,a=s.path,l=r.matrix,c=s.matrix;return l.isIdentity()||(t=o.params.slice(0),o.transform(r.matrix)),c.isIdentity()||(i=a.params.slice(0),a.transform(s.matrix)),n=o.getIntersections(a),t&&(o.params=t),i&&(a.params=i),n}}),Ext.define("Ext.draw.sprite.Circle",{extend:Ext.draw.sprite.Path,alias:"sprite.circle",type:"circle",inheritableStatics:{def:{processors:{cx:"number",cy:"number",r:"number"},aliases:{radius:"r",x:"cx",y:"cy",centerX:"cx",centerY:"cy"},defaults:{cx:0,cy:0,r:4},triggers:{cx:"path",cy:"path",r:"path"}}},updatePlainBBox:function(e){var t=this.attr,i=t.cx,n=t.cy,r=t.r;e.x=i-r,e.y=n-r,e.width=r+r,e.height=r+r},updateTransformedBBox:function(e){var t,i,n=this.attr,r=n.cx,s=n.cy,o=n.r,a=n.matrix;t=a.getScaleX()*o,i=a.getScaleY()*o,e.x=a.x(r,s)-t,e.y=a.y(r,s)-i,e.width=t+t,e.height=i+i},updatePath:function(e,t){e.arc(t.cx,t.cy,t.r,0,2*Math.PI,!1)}}),Ext.define("Ext.draw.sprite.Arc",{extend:Ext.draw.sprite.Circle,alias:"sprite.arc",type:"arc",inheritableStatics:{def:{processors:{startAngle:"number",endAngle:"number",anticlockwise:"bool"},aliases:{from:"startAngle",to:"endAngle",start:"startAngle",end:"endAngle"},defaults:{startAngle:0,endAngle:2*Math.PI,anticlockwise:!1},triggers:{startAngle:"path",endAngle:"path",anticlockwise:"path"}}},updatePath:function(e,t){e.arc(t.cx,t.cy,t.r,t.startAngle,t.endAngle,t.anticlockwise)}}),Ext.define("Ext.draw.sprite.Arrow",{extend:Ext.draw.sprite.Path,alias:"sprite.arrow",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(e,t){var i=1.5*t.size,n=t.x-t.lineWidth/2,r=t.y;e.fromSvgString("M".concat(n-.7*i,",",r-.4*i,"l",[.6*i,0,0,.4*-i,i,.8*i,-i,.8*i,0,.4*-i,.6*-i,0],"z"))}}),Ext.define("Ext.draw.sprite.Composite",{extend:Ext.draw.sprite.Sprite,alias:"sprite.composite",type:"composite",isComposite:!0,config:{sprites:[]},constructor:function(e){this.sprites=[],this.map={},this.callParent([e])},addSprite:function(t){var i,e,n,r=0;if(Ext.isArray(t)){for(e=[];r<t.length;)e.push(this.addSprite(t[r++]));return e}return t&&t.type&&!t.isSprite&&(t=Ext.create("sprite."+t.type,t)),t&&t.isSprite&&!t.isComposite?(t.setSurface(null),t.setParent(this),i=this.attr,n=t.applyTransformations,t.applyTransformations=function(e){t.attr.dirtyTransform&&(i.dirtyTransform=!0,i.bbox.plain.dirty=!0,i.bbox.transform.dirty=!0),n.call(t,e)},this.sprites.push(t),this.map[t.id]=t.getId(),i.bbox.plain.dirty=!0,i.bbox.transform.dirty=!0,t):null},add:function(e){return this.addSprite(e)},removeSprite:function(e,t){var i,n;if(e){if(e.charAt&&(e=this.map[e]),!e||!e.isSprite)return null;if(e.destroyed||e.destroying)return e;if(i=e.getId(),n=this.map[i],delete this.map[i],t&&e.destroy(),!n)return e;e.setParent(null),Ext.Array.remove(this.sprites,e),this.dirtyZIndex=!0,this.setDirty(!0)}return e||null},addAll:function(e){var t=0;if(e.isSprite||e.type)this.add(e);else if(Ext.isArray(e))for(;t<e.length;)this.add(e[t++])},updatePlainBBox:function(e){var t,i,n,r,s=1/0,o=-1/0,a=1/0,l=-1/0;for(n=0,r=this.sprites.length;n<r;n++)(t=this.sprites[n]).applyTransformations(),s>(i=t.getBBox()).x&&(s=i.x),o<i.x+i.width&&(o=i.x+i.width),a>i.y&&(a=i.y),l<i.y+i.height&&(l=i.y+i.height);e.x=s,e.y=a,e.width=o-s,e.height=l-a},isVisible:function(){var e=this.attr,t=this.getParent();return!!(t&&(t.isSurface||t.isVisible())&&!e.hidden&&e.globalAlpha)},render:function(e,t,i){var n=this.attr,r=this.attr.matrix,s=this.sprites,o=s.length,a=0;for(r.toContext(t);a<o;a++)e.renderSprite(s[a],i);var l=n.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;l&&(n.inverseMatrix.toContext(t),l.bbox&&this.renderBBox(e,t))},destroy:function(){var e,t=this.sprites,i=t.length;for(e=0;e<i;e++)t[e].destroy();t.length=0,this.callParent()}}),Ext.define("Ext.draw.sprite.Cross",{extend:Ext.draw.sprite.Path,alias:"sprite.cross",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(e,t){var i=t.size/1.7,n=t.x-t.lineWidth/2,r=t.y;e.fromSvgString("M".concat(n-i,",",r,"l",[-i,-i,i,-i,i,i,i,-i,i,i,-i,i,i,i,-i,i,-i,-i,-i,i,-i,-i,"z"]))}}),Ext.define("Ext.draw.sprite.Diamond",{extend:Ext.draw.sprite.Path,alias:"sprite.diamond",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(e,t){var i=1.25*t.size,n=t.x-t.lineWidth/2,r=t.y;e.fromSvgString(["M",n,r-i,"l",i,i,-i,i,-i,-i,i,-i,"z"])}}),Ext.define("Ext.draw.sprite.Ellipse",{extend:Ext.draw.sprite.Path,alias:"sprite.ellipse",type:"ellipse",inheritableStatics:{def:{processors:{cx:"number",cy:"number",rx:"number",ry:"number",axisRotation:"number"},aliases:{radius:"r",x:"cx",y:"cy",centerX:"cx",centerY:"cy",radiusX:"rx",radiusY:"ry"},defaults:{cx:0,cy:0,rx:1,ry:1,axisRotation:0},triggers:{cx:"path",cy:"path",rx:"path",ry:"path",axisRotation:"path"}}},updatePlainBBox:function(e){var t=this.attr,i=t.cx,n=t.cy,r=t.rx,s=t.ry;e.x=i-r,e.y=n-s,e.width=r+r,e.height=s+s},updateTransformedBBox:function(e){var t,i,n,r,s,o,a,l,c=this.attr,u=c.cx,d=c.cy,h=c.rx,f=c.ry/h,g=c.matrix.clone();g.append(1,0,0,f,0,d*(1-f)),t=g.getXX(),n=g.getYX(),s=g.getDX(),i=g.getXY(),r=g.getYY(),o=g.getDY(),a=Math.sqrt(t*t+n*n)*h,l=Math.sqrt(i*i+r*r)*h,e.x=u*t+d*n+s-a,e.y=u*i+d*r+o-l,e.width=a+a,e.height=l+l},updatePath:function(e,t){e.ellipse(t.cx,t.cy,t.rx,t.ry,t.axisRotation,0,2*Math.PI,!1)}}),Ext.define("Ext.draw.sprite.EllipticalArc",{extend:Ext.draw.sprite.Ellipse,alias:"sprite.ellipticalArc",type:"ellipticalArc",inheritableStatics:{def:{processors:{startAngle:"number",endAngle:"number",anticlockwise:"bool"},aliases:{from:"startAngle",to:"endAngle",start:"startAngle",end:"endAngle"},defaults:{startAngle:0,endAngle:2*Math.PI,anticlockwise:!1},triggers:{startAngle:"path",endAngle:"path",anticlockwise:"path"}}},updatePath:function(e,t){e.ellipse(t.cx,t.cy,t.rx,t.ry,t.axisRotation,t.startAngle,t.endAngle,t.anticlockwise)}}),Ext.define("Ext.draw.sprite.Rect",{extend:Ext.draw.sprite.Path,alias:"sprite.rect",type:"rect",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number",radius:"number"},aliases:{},triggers:{x:"path",y:"path",width:"path",height:"path",radius:"path"},defaults:{x:0,y:0,width:8,height:8,radius:0}}},updatePlainBBox:function(e){var t=this.attr;e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height},updateTransformedBBox:function(e,t){this.attr.matrix.transformBBox(t,this.attr.radius,e)},updatePath:function(e,t){var i=t.x,n=t.y,r=t.width,s=t.height,o=Math.min(t.radius,.5*Math.abs(s),.5*Math.abs(r));0===o?e.rect(i,n,r,s):(e.moveTo(i+o,n),e.arcTo(i+r,n,i+r,n+s,o),e.arcTo(i+r,n+s,i,n+s,o),e.arcTo(i,n+s,i,n,o),e.arcTo(i,n,i+o,n,o),e.closePath())}}),Ext.define("Ext.draw.sprite.Image",{extend:Ext.draw.sprite.Rect,alias:"sprite.image",type:"image",statics:{imageLoaders:{}},inheritableStatics:{def:{processors:{src:"string"},triggers:{src:"src"},updaters:{src:"updateSource"},defaults:{src:"",width:null,height:null}}},updateSurface:function(e){e&&this.updateSource(this.attr)},updateSource:function(e){var t,i,n=e.src,r=this.getSurface(),s=Ext.draw.sprite.Image.imageLoaders[n],o=e.width,a=e.height;r&&(s?(Ext.Array.include(s.pendingSprites,this),Ext.Array.include(s.pendingSurfaces,r)):(t=new Image,s=Ext.draw.sprite.Image.imageLoaders[n]={image:t,done:!1,pendingSprites:[this],pendingSurfaces:[r]},t.width=o,t.height=a,t.onload=function(){var e;if(!s.done){for(s.done=!0,i=0;i<s.pendingSprites.length;i++)(e=s.pendingSprites[i]).destroyed||e.setDirty(!0);for(i=0;i<s.pendingSurfaces.length;i++)(e=s.pendingSurfaces[i]).destroyed||e.renderFrame()}},t.src=n))},render:function(e,t){var i,n=this.attr,r=n.matrix,s=n.src,o=n.x,a=n.y,l=n.width,c=n.height,u=Ext.draw.sprite.Image.imageLoaders[s];u&&u.done&&(r.toContext(t),i=u.image,t.drawImage(i,o,a,l||(i.naturalWidth||i.width)/e.devicePixelRatio,c||(i.naturalHeight||i.height)/e.devicePixelRatio));var d=n.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;d&&d.bbox&&this.renderBBox(e,t)},isVisible:function(){var e=this.attr,t=this.getParent();return!!(t&&(t.isSurface||t.isVisible())&&!e.hidden&&e.globalAlpha)}}),Ext.define("Ext.draw.sprite.Instancing",{extend:Ext.draw.sprite.Sprite,alias:"sprite.instancing",type:"instancing",isInstancing:!0,config:{template:null,instances:null},instances:null,applyTemplate:function(e){var t;return Ext.isObject(e)?(e.isInstancing||e.isComposite)&&Ext.raise("Can't use an instancing or composite sprite as a template for an instancing sprite."):Ext.raise("A template of an instancing sprite must either be a sprite instance or a valid config object from which a template sprite will be created."),e.isSprite||(e.xclass||e.type||(e.type="circle"),e=Ext.create(e.xclass||"sprite."+e.type,e)),(t=e.getSurface())&&t.remove(e),e.setParent(this),e},updateTemplate:function(e,t){t&&delete t.ownAttr,e.setSurface(this.getSurface()),e.ownAttr=e.attr,this.clearAll(),this.setDirty(!0)},updateInstances:function(e){var t,i;if(this.clearAll(),Ext.isArray(e))for(t=0,i=e.length;t<i;t++)this.add(e[t])},updateSurface:function(e){var t=this.getTemplate();t&&!t.destroyed&&t.setSurface(e)},get:function(e){return this.instances[e]},getCount:function(){return this.instances.length},clearAll:function(){this.getTemplate().attr.children=this.instances=[],this.position=0},createInstance:function(e,t,i){return this.add(e,t,i)},add:function(e,t,i){var n=this.getTemplate(),r=n.attr,s=Ext.Object.chain(r);return n.modifiers.target.prepareAttributes(s),n.attr=s,n.setAttributes(e,t,i),s.template=n,this.instances.push(s),n.attr=r,this.position++,s},getBBox:function(){return null},getBBoxFor:function(e,t){var i,n=this.getTemplate(),r=n.attr;return n.attr=this.instances[e],i=n.getBBox(t),n.attr=r,i},isVisible:function(){var e=this.attr,t=this.getParent();return!!(t&&t.isSurface&&!e.hidden&&e.globalAlpha)},isInstanceVisible:function(e){var t=this.getTemplate(),i=t.attr,n=this.instances,r=!1;return!Ext.isNumber(e)||e<0||e>=n.length||!this.isVisible()||(t.attr=n[e],r=t.isVisible(point,options),t.attr=i),r},render:function(e,t,i){this.getTemplate()||Ext.raise("An instancing sprite must have a template.");var n,r=this.getTemplate(),s=e.getRect(),o=this.attr.matrix,a=r.attr,l=this.instances,c=this.position;for(o.toContext(t),r.preRender(e,t,i),r.useAttributes(t,s),r.isSpriteInstance=!0,n=0;n<c;n++)l[n].hidden||(t.save(),r.attr=l[n],r.useAttributes(t,s),r.render(e,t,i),t.restore());r.isSpriteInstance=!1,r.attr=a},setAttributesFor:function(e,t,i){var n=this.getTemplate(),r=n.attr,s=this.instances[e];s&&(n.attr=s,t=i?Ext.apply({},t):n.self.def.normalize(t),n.modifiers.target.pushDown(s,t),n.attr=r)},destroy:function(){var e=this.getTemplate();this.instances=null,e&&e.destroy(),this.callParent()}}),Ext.define("Ext.draw.overrides.hittest.sprite.Instancing",{override:"Ext.draw.sprite.Instancing",hitTest:function(e,t){var i=this.getTemplate(),n=i.attr,r=this.instances,s=r.length,o=0,a=null;if(!this.isVisible())return a;for(;o<s;o++)if(i.attr=r[o],a=i.hitTest(e,t))return a.isInstance=!0,a.template=a.sprite,a.sprite=this,a.instance=r[o],a.index=o,a;return i.attr=n,a}}),Ext.define("Ext.draw.sprite.Line",{extend:Ext.draw.sprite.Sprite,alias:"sprite.line",type:"line",inheritableStatics:{def:{processors:{fromX:"number",fromY:"number",toX:"number",toY:"number",crisp:"bool"},defaults:{fromX:0,fromY:0,toX:1,toY:1,crisp:!1,strokeStyle:"black"},aliases:{x1:"fromX",y1:"fromY",x2:"toX",y2:"toY"},triggers:{crisp:"bbox"}}},updateLineBBox:function(e,t,i,n,r,s){var o,a,l,c,u,d,h,f,g,p=this.attr,m=p.matrix,x=p.lineWidth/2;p.crisp&&(i=this.align(i),r=this.align(r),n=this.align(n),s=this.align(s)),t&&(i=(u=m.transformPoint([i,n]))[0],n=u[1],r=(u=m.transformPoint([r,s]))[0],s=u[1]),o=Math.min(i,r),l=Math.max(i,r),a=Math.min(n,s),c=Math.max(n,s),d=Math.atan2(l-o,c-a),h=Math.sin(d),o-=f=x*Math.cos(d),a-=g=x*h,l+=f,c+=g,e.x=o,e.y=a,e.width=l-o,e.height=c-a},updatePlainBBox:function(e){var t=this.attr;this.updateLineBBox(e,!1,t.fromX,t.fromY,t.toX,t.toY)},updateTransformedBBox:function(e,t){var i=this.attr;this.updateLineBBox(e,!0,i.fromX,i.fromY,i.toX,i.toY)},align:function(e){return Math.round(e)-.5},render:function(e,t){var i=this.attr;i.matrix.toContext(t),t.beginPath(),i.crisp?(t.moveTo(this.align(i.fromX),this.align(i.fromY)),t.lineTo(this.align(i.toX),this.align(i.toY))):(t.moveTo(i.fromX,i.fromY),t.lineTo(i.toX,i.toY)),t.stroke();var n=i.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;n&&(this.attr.inverseMatrix.toContext(t),n.bbox&&this.renderBBox(e,t))}}),Ext.define("Ext.draw.sprite.Plus",{extend:Ext.draw.sprite.Path,alias:"sprite.plus",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(e,t){var i=t.size/1.3,n=t.x-t.lineWidth/2,r=t.y;e.fromSvgString("M".concat(n-i/2,",",r-i/2,"l",[0,-i,i,0,0,i,i,0,0,i,-i,0,0,i,-i,0,0,-i,-i,0,0,-i,"z"]))}}),Ext.define("Ext.draw.sprite.Sector",{extend:Ext.draw.sprite.Path,alias:"sprite.sector",type:"sector",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",margin:"number"},aliases:{rho:"endRho"},triggers:{centerX:"path,bbox",centerY:"path,bbox",startAngle:"path,bbox",endAngle:"path,bbox",startRho:"path,bbox",endRho:"path,bbox",margin:"path,bbox"},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:0,startRho:0,endRho:150,margin:0,path:"M 0,0"}}},getMidAngle:function(){return this.midAngle||0},updatePath:function(e,t){var i=Math.min(t.startAngle,t.endAngle),n=Math.max(t.startAngle,t.endAngle),r=this.midAngle=.5*(i+n),s=Ext.Number.isEqual(Math.abs(n-i),Ext.draw.Draw.pi2,1e-10),o=t.margin,a=t.centerX,l=t.centerY,c=Math.min(t.startRho,t.endRho),u=Math.max(t.startRho,t.endRho);o&&(a+=o*Math.cos(r),l+=o*Math.sin(r)),s||(e.moveTo(a+c*Math.cos(i),l+c*Math.sin(i)),e.lineTo(a+u*Math.cos(i),l+u*Math.sin(i))),e.arc(a,l,u,i,n,!1),e[s?"moveTo":"lineTo"](a+c*Math.cos(n),l+c*Math.sin(n)),e.arc(a,l,c,n,i,!0)}}),Ext.define("Ext.draw.sprite.Square",{extend:Ext.draw.sprite.Path,alias:"sprite.square",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"size"}}},updatePath:function(e,t){var i=1.2*t.size,n=2*i,r=t.x-t.lineWidth/2,s=t.y;e.fromSvgString("M".concat(r-i,",",s-i,"l",[n,0,0,n,-n,0,0,-n,"z"]))}}),Ext.define("Ext.draw.TextMeasurer",{singleton:!0,measureDiv:null,measureCache:{},precise:Ext.isIE8,measureDivTpl:{id:"ext-draw-text-measurer",tag:"div",style:{overflow:"hidden",position:"relative",float:"left",width:0,height:0},"data-sticky":!0,children:{tag:"div",style:{display:"block",position:"absolute",x:-1e5,y:-1e5,padding:0,margin:0,"z-index":-1e5,"white-space":"nowrap"}}},actualMeasureText:function(e,t){var i,n,r=Ext.draw.TextMeasurer,s=r.measureDiv;return s||(n=Ext.Element.create({"data-sticky":!0,style:{overflow:"hidden",position:"relative",float:"left",width:0,height:0}}),r.measureDiv=s=Ext.Element.create({style:{position:"absolute",x:1e5,y:1e5,"z-index":-1e5,"white-space":"nowrap",display:"block",padding:0,margin:0}}),Ext.getBody().appendChild(n),n.appendChild(s)),t&&s.setStyle({font:t,lineHeight:"normal"}),s.setText("("+e+")"),i=s.getSize(),s.setText("()"),i.width-=s.getSize().width,i},measureTextSingleLine:function(e,t){var i,n,r,s,o,a,l,c=0,u=0;if(this.precise)return this.preciseMeasureTextSingleLine(e,t);if(e=e.toString(),i=this.measureCache,r=e.split(""),i[t]||(i[t]={}),(i=i[t])[e])return i[e];for(o=0,a=r.length;o<a;o++)(n=i[s=r[o]])||(l=this.actualMeasureText(s,t),n=i[s]=l),c+=n.width,u=Math.max(u,n.height);return i[e]={width:c,height:u}},preciseMeasureTextSingleLine:function(e,t){var i;return e=e.toString(),(i=this.measureDiv||(this.measureDiv=Ext.getBody().createChild(this.measureDivTpl).down("div"))).setStyle({font:t||""}),Ext.util.TextMetrics.measure(i,e)},measureText:function(e,t){var i,n,r,s=e.split("\\n"),o=s.length,a=0,l=0;if(1===o)return this.measureTextSingleLine(e,t);for(r=[],n=0;n<o;n++)i=this.measureTextSingleLine(s[n],t),r.push(i),a+=i.height,l=Math.max(l,i.width);return{width:l,height:a,sizes:r}}}),Ext.define("Ext.draw.sprite.Text",function(){var t={"xx-small":!0,"x-small":!0,small:!0,medium:!0,large:!0,"x-large":!0,"xx-large":!0},i={normal:!0,bold:!0,bolder:!0,lighter:!0,100:!0,200:!0,300:!0,400:!0,500:!0,600:!0,700:!0,800:!0,900:!0},n={start:"start",left:"start",center:"center",middle:"center",end:"end",right:"end"},r={top:"top",hanging:"hanging",middle:"middle",center:"middle",alphabetic:"alphabetic",ideographic:"ideographic",bottom:"bottom"};return{extend:Ext.draw.sprite.Sprite,alias:"sprite.text",type:"text",lineBreakRe:/\\r?\\n/g,statics:{debug:!1,fontSizes:t,fontWeights:i,textAlignments:n,textBaselines:r},inheritableStatics:{def:{animationProcessors:{text:"text"},processors:{x:"number",y:"number",text:"string",fontSize:function(e){return Ext.isNumber(+e)?e+"px":e.match(Ext.dom.Element.unitRe)||e in t?e:void 0},fontStyle:"enums(,italic,oblique)",fontVariant:"enums(,small-caps)",fontWeight:function(e){return e in i?String(e):""},fontFamily:"string",textAlign:function(e){return n[e]||"center"},textBaseline:function(e){return r[e]||"alphabetic"},debug:"default",font:"string"},aliases:{"font-size":"fontSize","font-family":"fontFamily","font-weight":"fontWeight","font-variant":"fontVariant","text-anchor":"textAlign","dominant-baseline":"textBaseline"},defaults:{fontStyle:"",fontVariant:"",fontWeight:"",fontSize:"10px",fontFamily:"sans-serif",font:"10px sans-serif",textBaseline:"alphabetic",textAlign:"start",strokeStyle:"rgba(0, 0, 0, 0)",fillStyle:"#000",x:0,y:0,text:""},triggers:{fontStyle:"fontX,bbox",fontVariant:"fontX,bbox",fontWeight:"fontX,bbox",fontSize:"fontX,bbox",fontFamily:"fontX,bbox",font:"font,bbox,canvas",textBaseline:"bbox",textAlign:"bbox",x:"bbox",y:"bbox",text:"bbox"},updaters:{fontX:"makeFontShorthand",font:"parseFontShorthand"}}},config:{preciseMeasurement:void 0},constructor:function(e){var t;if(e&&e.font)for(t in e=Ext.clone(e))"font"!==t&&0===t.indexOf("font")&&delete e[t];Ext.draw.sprite.Sprite.prototype.constructor.call(this,e)},fontValuesMap:{italic:"fontStyle",oblique:"fontStyle","small-caps":"fontVariant",bold:"fontWeight",bolder:"fontWeight",lighter:"fontWeight",100:"fontWeight",200:"fontWeight",300:"fontWeight",400:"fontWeight",500:"fontWeight",600:"fontWeight",700:"fontWeight",800:"fontWeight",900:"fontWeight","xx-small":"fontSize","x-small":"fontSize",small:"fontSize",medium:"fontSize",large:"fontSize","x-large":"fontSize","xx-large":"fontSize"},makeFontShorthand:function(e){var t=[];e.fontStyle&&t.push(e.fontStyle),e.fontVariant&&t.push(e.fontVariant),e.fontWeight&&t.push(e.fontWeight),e.fontSize&&t.push(e.fontSize),e.fontFamily&&t.push(e.fontFamily),this.setAttributes({font:t.join(" ")},!0)},parseFontShorthand:function(e){for(var t,i,n,r,s=e.font,o=s.length,a={},l=this.fontValuesMap,c=0;c<o&&-1!==t;){if((t=s.indexOf(" ",c))<0)n=s.substr(c);else{if(!(c<t))continue;n=s.substr(c,t-c)}if(0<(i=n.indexOf("/")))n=n.substr(0,i);else if(0===i)continue;if("normal"!==n&&"inherit"!==n)if(r=l[n])a[r]=n;else{if(!n.match(Ext.dom.Element.unitRe)){a.fontFamily=s.substr(c);break}a.fontSize=n}c=t+1}a.fontStyle||(a.fontStyle=""),a.fontVariant||(a.fontVariant=""),a.fontWeight||(a.fontWeight=""),this.setAttributes(a,!0)},fontProperties:{fontStyle:!0,fontVariant:!0,fontWeight:!0,fontSize:!0,fontFamily:!0},setAttributes:function(e,t,i){var n,r;if(e&&e.font){for(n in r={},e)n in this.fontProperties||(r[n]=e[n]);e=r}this.callParent([e,t,i])},getBBox:function(e){var t=this.attr.bbox.plain,i=this.getSurface();return t.dirty&&(this.updatePlainBBox(t),t.dirty=!1),i&&i.getInherited().rtl&&i.getFlipRtlText()&&this.updatePlainBBox(t,!0),this.callParent([e])},rtlAlignments:{start:"end",center:"center",end:"start"},updatePlainBBox:function(e,t){var i,n,r=this.attr,s=r.x,o=r.y,a=[],l=r.font,c=r.text,u=r.textBaseline,d=r.textAlign,h=this.getPreciseMeasurement();t&&this.oldSize?i=this.oldSize:(n=Ext.draw.TextMeasurer.precise,Ext.isBoolean(h)&&(Ext.draw.TextMeasurer.precise=h),i=this.oldSize=Ext.draw.TextMeasurer.measureText(c,l),Ext.draw.TextMeasurer.precise=n);var f,g,p=this.getSurface(),m=p&&p.getInherited().rtl||!1,x=m&&p.getFlipRtlText(),y=i.sizes,v=i.height,E=i.width,b=y?y.length:0,C=0;switch(u){case"hanging":case"top":break;case"ideographic":case"bottom":o-=v;break;case"alphabetic":o-=.8*v;break;case"middle":o-=.5*v}switch(x&&(s=(g=p.getRect())[2]-g[0]-s,d=this.rtlAlignments[d]),d){case"start":if(m)for(;C<b;C++)f=y[C].width,a.push(-(E-f));break;case"end":if(s-=E,m)break;for(;C<b;C++)f=y[C].width,a.push(E-f);break;case"center":for(s-=.5*E;C<b;C++)f=y[C].width,a.push((m?-1:1)*(E-f)*.5)}r.textAlignOffsets=a,e.x=s,e.y=o,e.width=E,e.height=v},setText:function(e){this.setAttributes({text:e},!0)},render:function(e,t,i){var n,r,s,o,a,l=this.attr,c=Ext.draw.Matrix.fly(l.matrix.elements.slice(0)),u=this.getBBox(!0),d=l.textAlignOffsets,h=Ext.util.Color.RGBA_NONE;if(0!==l.text.length){for(o=l.text.split(this.lineBreakRe),a=u.height/o.length,n=l.bbox.plain.x,r=l.bbox.plain.y+.78*a,c.toContext(t),e.getInherited().rtl&&(n+=l.bbox.plain.width),s=0;s<o.length;s++)t.fillStyle!==h&&t.fillText(o[s],n+(d[s]||0),r+a*s),t.strokeStyle!==h&&t.strokeText(o[s],n+(d[s]||0),r+a*s);var f=l.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;f&&(this.attr.inverseMatrix.toContext(t),f.bbox&&this.renderBBox(e,t))}}}}),Ext.define("Ext.draw.sprite.Tick",{extend:Ext.draw.sprite.Line,alias:"sprite.tick",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"tick",y:"tick",size:"tick"},updaters:{tick:function(e){var t=1.5*e.size,i=e.lineWidth/2,n=e.x,r=e.y;this.setAttributes({fromX:n-i,fromY:r-t,toX:n-i,toY:r+t})}}}}}),Ext.define("Ext.draw.sprite.Triangle",{extend:Ext.draw.sprite.Path,alias:"sprite.triangle",inheritableStatics:{def:{processors:{x:"number",y:"number",size:"number"},defaults:{x:0,y:0,size:4},triggers:{x:"path",y:"path",size:"path"}}},updatePath:function(e,t){var i=2.2*t.size,n=t.x,r=t.y;e.fromSvgString("M".concat(n,",",r,"m0-",.48*i,"l",.5*i,",",.87*i,"-",i,",0z"))}}),Ext.define("Ext.draw.gradient.Linear",{extend:Ext.draw.gradient.Gradient,type:"linear",config:{degrees:0,radians:0},applyRadians:function(e,t){return Ext.isNumber(e)?e:t},applyDegrees:function(e,t){return Ext.isNumber(e)?e:t},updateRadians:function(e){this.setDegrees(Ext.draw.Draw.degrees(e))},updateDegrees:function(e){this.setRadians(Ext.draw.Draw.rad(e))},generateGradient:function(e,t){var i,n,r,s=this.getRadians(),o=Math.cos(s),a=Math.sin(s),l=t.width,c=t.height,u=t.x+.5*l,d=t.y+.5*c,h=this.getStops(),f=h.length;if(Ext.isNumber(u)&&Ext.isNumber(d)&&0<c&&0<l){for(n=Math.sqrt(c*c+l*l)*Math.abs(Math.cos(s-Math.atan(c/l)))/2,i=e.createLinearGradient(u+o*n,d+a*n,u-o*n,d-a*n),r=0;r<f;r++)i.addColorStop(h[r].offset,h[r].color);return i}return Ext.util.Color.NONE}}),Ext.define("Ext.draw.gradient.Radial",{extend:Ext.draw.gradient.Gradient,type:"radial",config:{start:{x:0,y:0,r:0},end:{x:0,y:0,r:1}},applyStart:function(e,t){var i;return t?(i={x:t.x,y:t.y,r:t.r},"x"in e?i.x=e.x:"centerX"in e&&(i.x=e.centerX),"y"in e?i.y=e.y:"centerY"in e&&(i.y=e.centerY),"r"in e?i.r=e.r:"radius"in e&&(i.r=e.radius),i):e},applyEnd:function(e,t){var i;return t?(i={x:t.x,y:t.y,r:t.r},"x"in e?i.x=e.x:"centerX"in e&&(i.x=e.centerX),"y"in e?i.y=e.y:"centerY"in e&&(i.y=e.centerY),"r"in e?i.r=e.r:"radius"in e&&(i.r=e.radius),i):e},generateGradient:function(e,t){var i,n=this.getStart(),r=this.getEnd(),s=.5*t.width,o=.5*t.height,a=t.x+s,l=t.y+o,c=e.createRadialGradient(a+n.x*s,l+n.y*o,n.r*Math.max(s,o),a+r.x*s,l+r.y*o,r.r*Math.max(s,o)),u=this.getStops(),d=u.length;for(i=0;i<d;i++)c.addColorStop(u[i].offset,u[i].color);return c}}),Ext.define("Ext.draw.Surface",{extend:Ext.draw.SurfaceBase,xtype:"surface",devicePixelRatio:window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI,deprecated:{"5.1.0":{statics:{methods:{stableSort:function(e){return Ext.Array.sort(e,function(e,t){return e.attr.zIndex-t.attr.zIndex})}}}}},cls:Ext.baseCSSPrefix+"surface",config:{rect:null,background:null,items:[],dirty:!1,flipRtlText:!1},isSurface:!0,isPendingRenderFrame:!1,dirtyPredecessorCount:0,emptyRect:[0,0,0,0],constructor:function(e){this.predecessors=[],this.successors=[],this.map={},this.callParent([e]),this.matrix=new Ext.draw.Matrix,this.inverseMatrix=this.matrix.inverse()},roundPixel:function(e){return Math.round(this.devicePixelRatio*e)/this.devicePixelRatio},waitFor:function(e){var t=this.predecessors;Ext.Array.contains(t,e)||(t.push(e),e.successors.push(this),e.getDirty()&&this.dirtyPredecessorCount++)},updateDirty:function(e){for(var t,i=this.successors,n=i.length,r=0;r<n;r++)t=i[r],e?(t.dirtyPredecessorCount++,t.setDirty(!0)):(t.dirtyPredecessorCount--,0===t.dirtyPredecessorCount&&t.isPendingRenderFrame&&t.renderFrame())},applyBackground:function(e,t){return this.setDirty(!0),Ext.isString(e)&&(e={fillStyle:e}),Ext.factory(e,Ext.draw.sprite.Rect,t)},applyRect:function(e,t){return t&&e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]?t:Ext.isArray(e)?[e[0],e[1],e[2],e[3]]:Ext.isObject(e)?[e.x||e.left,e.y||e.top,e.width||e.right-e.left,e.height||e.bottom-e.top]:void 0},updateRect:function(e){var t=e[0],i=e[1],n=t+e[2],r=i+e[3],s=this.getBackground(),o=this.element;o.setLocalXY(Math.floor(t),Math.floor(i)),o.setSize(Math.ceil(n-Math.floor(t)),Math.ceil(r-Math.floor(i))),s&&s.setAttributes({x:0,y:0,width:Math.ceil(n-Math.floor(t)),height:Math.ceil(r-Math.floor(i))}),this.setDirty(!0)},resetTransform:function(){this.matrix.set(1,0,0,1,0,0),this.inverseMatrix.set(1,0,0,1,0,0),this.setDirty(!0)},get:function(e){return this.map[e]||this.getItems()[e]},add:function(){var e,t,i,n,r,s,o=Array.prototype.slice.call(arguments),a=Ext.isArray(o[0]),l=this.map,c=[];if(!(e=Ext.Array.clean(a?o[0]:o)).length)return c;for(r=0,s=e.length;r<s;r++)(t=e[r])&&!t.destroyed&&(i=null,t.isSprite&&!l[t.getId()]?i=t:l[t.id]||(i=this.createItem(t)),i&&(l[i.getId()]=i,c.push(i),(n=i.getSurface())&&n.isSurface&&n.remove(i),i.setParent(this),i.setSurface(this),this.onAdd(i)));return(e=this.getItems())&&e.push.apply(e,c),this.dirtyZIndex=!0,this.setDirty(!0),a||1!==c.length?c:c[0]},onAdd:Ext.emptyFn,remove:function(e,t){var i,n,r=this.clearing;if(e){if(e.charAt&&(e=this.map[e]),!e||!e.isSprite)return null;if(i=e.id,n=this.map[i],delete this.map[i],e.destroyed||e.destroying)return n&&!r&&Ext.Array.remove(this.getItems(),e),e;if(!n)return t&&e.destroy(),e;e.setParent(null),e.setSurface(null),t&&e.destroy(),r||(Ext.Array.remove(this.getItems(),e),this.dirtyZIndex=!0,this.setDirty(!0))}return e||null},removeAll:function(e){var t,i,n=this.getItems();for(this.clearing=!!e,i=n.length-1;0<=i;i--)t=n[i],e?t.destroy():(t.setParent(null),t.setSurface(null));this.clearing=!1,n.length=0,this.map={},this.dirtyZIndex=!0,this.destroying||this.setDirty(!0)},applyItems:function(e){return this.getItems()&&this.removeAll(!0),Ext.Array.from(this.add(e))},createItem:function(e){return Ext.create(e.xclass||"sprite."+e.type,e)},getBBox:function(e,t){var i,n,r,s=1/0,o=-1/0,a=1/0,l=-1/0;for(n=0,r=(e=Ext.Array.from(e)).length;n<r;n++)s>(i=e[n].getBBox(t)).x&&(s=i.x),o<i.x+i.width&&(o=i.x+i.width),a>i.y&&(a=i.y),l<i.y+i.height&&(l=i.y+i.height);return{x:s,y:a,width:o-s,height:l-a}},getEventXY:function(e){var t,i=this.getInherited().rtl,n=e.getXY(),r=this.getOwnerBody(),s=r.getXY(),o=this.getRect()||this.emptyRect,a=[];return i?(t=r.getWidth(),a[0]=s[0]-n[0]-o[0]+t):a[0]=n[0]-s[0]-o[0],a[1]=n[1]-s[1]-o[1],a},clear:Ext.emptyFn,orderByZIndex:function(){var e,t,i=this.getItems(),n=!1;if(this.getDirty()){for(e=0,t=i.length;e<t;e++)if(i[e].attr.dirtyZIndex){n=!0;break}for(n&&(Ext.Array.sort(i,function(e,t){return e.attr.zIndex-t.attr.zIndex}),this.setDirty(!0)),e=0,t=i.length;e<t;e++)i[e].attr.dirtyZIndex=!1}},repaint:function(){var e=this;e.repaint=Ext.emptyFn,Ext.defer(function(){delete e.repaint,e.element.repaint()},1)},renderFrame:function(){var e,t,i,n,r,s=this;if(s.element&&s.getDirty()&&s.getRect())if(0<s.dirtyPredecessorCount)s.isPendingRenderFrame=!0;else if(e=s.getBackground(),t=s.getItems(),s.orderByZIndex(),s.getDirty()){for(s.clear(),s.clearTransform(),e&&s.renderSprite(e),n=0,r=t.length;n<r;n++){if(i=t[n],!1===s.renderSprite(i))return;i.attr.textPositionCount=s.textPosition}s.setDirty(!1)}},renderSprite:Ext.emptyFn,clearTransform:Ext.emptyFn,destroy:function(){this.destroying=!0,this.removeAll(!0),this.destroying=!1,this.predecessors=this.successors=null,this.hasListeners.destroy&&this.fireEvent("destroy",this),this.callParent()}}),Ext.define("Ext.draw.overrides.hittest.Surface",{override:"Ext.draw.Surface",hitTest:function(e,t){var i,n,r,s=this.getItems();for(t=t||Ext.draw.sprite.Sprite.defaultHitTestOptions,i=s.length-1;0<=i;i--)if((n=s[i]).hitTest&&(r=n.hitTest(e,t)))return r;return null},hitTestEvent:function(e,t){var i=this.getEventXY(e);return this.hitTest(i,t)}}),Ext.define("Ext.draw.engine.SvgContext",{toSave:["strokeOpacity","strokeStyle","fillOpacity","fillStyle","globalAlpha","lineWidth","lineCap","lineJoin","lineDash","lineDashOffset","miterLimit","shadowOffsetX","shadowOffsetY","shadowBlur","shadowColor","globalCompositeOperation","position","fillGradient","strokeGradient"],strokeOpacity:1,strokeStyle:"none",fillOpacity:1,fillStyle:"none",lineDas:[],lineDashOffset:0,globalAlpha:1,lineWidth:1,lineCap:"butt",lineJoin:"miter",miterLimit:10,shadowOffsetX:0,shadowOffsetY:0,shadowBlur:0,shadowColor:"none",globalCompositeOperation:"src",urlStringRe:/^url\\(#([\\w-]+)\\)$/,constructor:function(e){this.surface=e,this.state=[],this.matrix=new Ext.draw.Matrix,this.path=null,this.clear()},clear:function(){this.group=this.surface.mainGroup,this.position=0,this.path=null},getElement:function(e){return this.surface.getSvgElement(this.group,e,this.position++)},save:function(){var e,t,i=this.toSave,n={},r=this.getElement("g");for(t=0;t<i.length;t++)(e=i[t])in this&&(n[e]=this[e]);return this.position=0,n.matrix=this.matrix.clone(),this.state.push(n),this.group=r},restore:function(){for(var e,t,i=this.toSave,n=this.state.pop(),r=this.group,s=r.dom.childNodes;s.length>this.position;)r.last().destroy();for(t=0;t<i.length;t++)(e=i[t])in n?this[e]=n[e]:delete this[e];this.setTransform.apply(this,n.matrix.elements),this.group=r.getParent()},transform:function(e,t,i,n,r,s){var o;this.path&&(o=Ext.draw.Matrix.fly([e,t,i,n,r,s]).inverse(),this.path.transform(o)),this.matrix.append(e,t,i,n,r,s)},setTransform:function(e,t,i,n,r,s){this.path&&this.path.transform(this.matrix),this.matrix.reset(),this.transform(e,t,i,n,r,s)},scale:function(e,t){this.transform(e,0,0,t,0,0)},rotate:function(e){var t=Math.cos(e),i=Math.sin(e),n=-Math.sin(e),r=Math.cos(e);this.transform(t,i,n,r,0,0)},translate:function(e,t){this.transform(1,0,0,1,e,t)},setGradientBBox:function(e){this.bbox=e},beginPath:function(){this.path=new Ext.draw.Path},moveTo:function(e,t){this.path||this.beginPath(),this.path.moveTo(e,t),this.path.element=null},lineTo:function(e,t){this.path||this.beginPath(),this.path.lineTo(e,t),this.path.element=null},rect:function(e,t,i,n){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath()},strokeRect:function(e,t,i,n){this.beginPath(),this.rect(e,t,i,n),this.stroke()},fillRect:function(e,t,i,n){this.beginPath(),this.rect(e,t,i,n),this.fill()},closePath:function(){this.path||this.beginPath(),this.path.closePath(),this.path.element=null},arcSvg:function(e,t,i,n,r,s,o){this.path||this.beginPath(),this.path.arcSvg(e,t,i,n,r,s,o),this.path.element=null},arc:function(e,t,i,n,r,s){this.path||this.beginPath(),this.path.arc(e,t,i,n,r,s),this.path.element=null},ellipse:function(e,t,i,n,r,s,o,a){this.path||this.beginPath(),this.path.ellipse(e,t,i,n,r,s,o,a),this.path.element=null},arcTo:function(e,t,i,n,r,s,o){this.path||this.beginPath(),this.path.arcTo(e,t,i,n,r,s,o),this.path.element=null},bezierCurveTo:function(e,t,i,n,r,s){this.path||this.beginPath(),this.path.bezierCurveTo(e,t,i,n,r,s),this.path.element=null},strokeText:function(e,t,i){var n,r;e=String(e),this.strokeStyle&&(n=this.getElement("text"),r=this.surface.getSvgElement(n,"tspan",0),this.surface.setElementAttributes(n,{x:t,y:i,transform:this.matrix.toSvg(),stroke:this.strokeStyle,fill:"none",opacity:this.globalAlpha,"stroke-opacity":this.strokeOpacity,style:"font: "+this.font,"stroke-dasharray":this.lineDash.join(","),"stroke-dashoffset":this.lineDashOffset}),this.lineDash.length&&this.surface.setElementAttributes(n,{"stroke-dasharray":this.lineDash.join(","),"stroke-dashoffset":this.lineDashOffset}),r.dom.firstChild&&r.dom.removeChild(r.dom.firstChild),this.surface.setElementAttributes(r,{"alignment-baseline":"alphabetic"}),r.dom.appendChild(document.createTextNode(Ext.String.htmlDecode(e))))},fillText:function(e,t,i){var n,r;e=String(e),this.fillStyle&&(n=this.getElement("text"),r=this.surface.getSvgElement(n,"tspan",0),this.surface.setElementAttributes(n,{x:t,y:i,transform:this.matrix.toSvg(),fill:this.fillStyle,opacity:this.globalAlpha,"fill-opacity":this.fillOpacity,style:"font: "+this.font}),r.dom.firstChild&&r.dom.removeChild(r.dom.firstChild),this.surface.setElementAttributes(r,{"alignment-baseline":"alphabetic"}),r.dom.appendChild(document.createTextNode(Ext.String.htmlDecode(e))))},drawImage:function(e,t,i,n,r,s,o,a,l){var c=this.getElement("image"),u=t,d=i,h=void 0===n?e.width:n,f=void 0===r?e.height:r,g=null;void 0!==l&&(g=t+" "+i+" "+n+" "+r,u=s,d=o,h=a,f=l),c.dom.setAttributeNS("http://www.w3.org/1999/xlink","href",e.src),this.surface.setElementAttributes(c,{viewBox:g,x:u,y:d,width:h,height:f,opacity:this.globalAlpha,transform:this.matrix.toSvg()})},fill:function(){var e,t,i,n,r,s=this;s.path&&s.fillStyle&&(t=s.fillGradient,i=s.path.element,n=s.bbox,i||(e=s.path.toString(),i=s.path.element=s.getElement("path"),s.surface.setElementAttributes(i,{d:e,transform:s.matrix.toSvg()})),r=t&&n?t.generateGradient(s,n):s.fillStyle,s.surface.setElementAttributes(i,{fill:r,"fill-opacity":s.fillOpacity*s.globalAlpha}))},stroke:function(){var e,t,i,n,r,s=this;if(s.path&&s.strokeStyle){if(t=s.strokeGradient,i=s.path.element,n=s.bbox,!i||!s.path.svgString){if(!(e=s.path.toString()))return;i=s.path.element=s.getElement("path"),s.surface.setElementAttributes(i,{fill:"none",d:e,transform:s.matrix.toSvg()})}r=t&&n?t.generateGradient(s,n):s.strokeStyle,s.surface.setElementAttributes(i,{stroke:r,"stroke-linecap":s.lineCap,"stroke-linejoin":s.lineJoin,"stroke-width":s.lineWidth,"stroke-opacity":s.strokeOpacity*s.globalAlpha,"stroke-dasharray":s.lineDash.join(","),"stroke-dashoffset":s.lineDashOffset}),s.lineDash.length&&s.surface.setElementAttributes(i,{"stroke-dasharray":s.lineDash.join(","),"stroke-dashoffset":s.lineDashOffset})}},fillStroke:function(e,t){var i=this.fillStyle,n=this.strokeStyle,r=this.fillOpacity,s=this.strokeOpacity;void 0===t&&(t=e.transformFillStroke),t||e.inverseMatrix.toContext(this),i&&0!==r&&this.fill(),n&&0!==s&&this.stroke()},appendPath:function(e){this.path=e.clone()},setLineDash:function(e){this.lineDash=e},getLineDash:function(){return this.lineDash},createLinearGradient:function(e,t,i,n){var r=this.surface.getNextDef("linearGradient");return this.surface.setElementAttributes(r,{x1:e,y1:t,x2:i,y2:n,gradientUnits:"userSpaceOnUse"}),new Ext.draw.engine.SvgContext.Gradient(this,this.surface,r)},createRadialGradient:function(e,t,i,n,r,s){var o=this.surface.getNextDef("radialGradient");return this.surface.setElementAttributes(o,{fx:e,fy:t,cx:n,cy:r,r:s,gradientUnits:"userSpaceOnUse"}),new Ext.draw.engine.SvgContext.Gradient(this,this.surface,o,i/s)}}),Ext.define("Ext.draw.engine.SvgContext.Gradient",{isGradient:!0,constructor:function(e,t,i,n){this.ctx=e,this.surface=t,this.element=i,this.position=0,this.compression=n||0},addColorStop:function(e,t){var i=this.surface.getSvgElement(this.element,"stop",this.position++),n=this.compression;this.surface.setElementAttributes(i,{offset:(100*((1-n)*e+n)).toFixed(2)+"%","stop-color":t,"stop-opacity":Ext.util.Color.fly(t).a.toFixed(15)})},toString:function(){for(var e=this.element.dom.childNodes;e.length>this.position;)Ext.fly(e[e.length-1]).destroy();return"url(#"+this.element.getId()+")"}}),Ext.define("Ext.draw.engine.Svg",{extend:Ext.draw.Surface,isSVG:!0,config:{highPrecision:!1},getElementConfig:function(){return{reference:"element",style:{position:"absolute"},children:[{reference:"bodyElement",style:{width:"100%",height:"100%",position:"relative"},children:[{tag:"svg",reference:"svgElement",namespace:"http://www.w3.org/2000/svg",width:"100%",height:"100%",version:1.1}]}]}},constructor:function(e){var t=this;t.callParent([e]),t.mainGroup=t.createSvgNode("g"),t.defsElement=t.createSvgNode("defs"),t.svgElement.appendChild(t.mainGroup),t.svgElement.appendChild(t.defsElement),t.ctx=new Ext.draw.engine.SvgContext(t)},createSvgNode:function(e){var t=document.createElementNS("http://www.w3.org/2000/svg",e);return Ext.get(t)},getSvgElement:function(e,t,i){var n,r=e.dom.childNodes,s=r.length;if(i<s){if((n=r[i]).tagName===t)return Ext.get(n);Ext.destroy(n)}else s<i&&Ext.raise("Invalid position.");return n=Ext.get(this.createSvgNode(t)),0===i?e.insertFirst(n):n.insertAfter(Ext.fly(r[i-1])),n.cache={},n},setElementAttributes:function(e,t){var i,n,r=e.dom,s=e.cache;for(i in t)n=t[i],s[i]!==n&&(s[i]=n,r.setAttribute(i,n))},getNextDef:function(e){return this.getSvgElement(this.defsElement,e,this.defsPosition++)},clearTransform:function(){this.mainGroup.set({transform:this.matrix.toSvg()})},clear:function(){this.ctx.clear(),this.removeSurplusDefs(),this.defsPosition=0},removeSurplusDefs:function(){var e,t=this.defsElement,i=t.dom.childNodes;for(e=i.length-1;e>this.defsPosition;e--)t.removeChild(i[e])},renderSprite:function(e){var t=this.getRect(),i=this.ctx;return e.attr.hidden||0===e.attr.globalAlpha?(i.save(),void i.restore()):(e.element=i.save(),e.preRender(this),e.useAttributes(i,t),!1!==e.render(this,i,[0,0,t[2],t[3]])&&(e.setDirty(!1),void i.restore()))},toSVG:function(e,t){var i,n,r,s,o=Ext.getClassName(this);for(i='<svg version="1.1" baseProfile="full" xmlns="http://www.w3.org/2000/svg" width="'+e.width+'" height="'+e.height+'">',s=0;s<t.length;s++)n=t[s],Ext.getClassName(n)===o&&(i+='<g transform="translate('+(r=n.getRect())[0]+","+r[1]+')">',i+=this.serializeNode(n.svgElement.dom),i+="</g>");return i+="</svg>"},b64EncodeUnicode:function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,function(e,t){return String.fromCharCode("0x"+t)}))},flatten:function(e,t){var i='<?xml version="1.0" standalone="yes"?>';return i+=this.toSVG(e,t),{data:"data:image/svg+xml;base64,"+this.b64EncodeUnicode(i),type:"svg"}},serializeNode:function(e){var t,i,n,r,s="";if(e.nodeType===document.TEXT_NODE)return e.nodeValue;if(s+="<"+e.nodeName,e.attributes.length)for(t=0,i=e.attributes.length;t<i;t++)s+=" "+(n=e.attributes[t]).name+'="'+Ext.String.htmlEncode(n.value)+'"';if(s+=">",e.childNodes&&e.childNodes.length)for(t=0,i=e.childNodes.length;t<i;t++)r=e.childNodes[t],s+=this.serializeNode(r);return s+="</"+e.nodeName+">"},destroy:function(){this.ctx.destroy(),this.mainGroup.destroy(),this.defsElement.destroy(),delete this.mainGroup,delete this.defsElement,delete this.ctx,this.callParent()},remove:function(e,t){e&&e.element&&(e.element.destroy(),e.element=null),this.callParent(arguments)}}),Ext.draw||(Ext.draw={}),Ext.draw.engine||(Ext.draw.engine={}),Ext.draw.engine.excanvas=!0,document.createElement("canvas").getContext||function(){var B=Math,y=B.round,g=B.sin,p=B.cos,s=B.abs,o=B.sqrt,N=10,m=N/2;navigator.userAgent.match(/MSIE ([\\d.]+)?/)[1];function i(){return this.context_||(this.context_=new F(this))}var r=Array.prototype.slice;function v(e){return String(e).replace(/&/g,"&amp;").replace(/"/g,"&quot;")}function n(e,t,i){Ext.onReady(function(){e.namespaces[t]||e.namespaces.add(t,i,"#default#VML")})}function a(e){if(n(e,"g_vml_","urn:schemas-microsoft-com:vml"),n(e,"g_o_","urn:schemas-microsoft-com:office:office"),!e.styleSheets.ex_canvas_){var t=e.createStyleSheet();t.owningElement.id="ex_canvas_",t.cssText="canvas{display:inline-block;overflow:hidden;text-align:left;width:300px;height:150px}"}}a(document);var e={init:function(e){var t=e||document;t.createElement("canvas"),t.attachEvent("onreadystatechange",function(e,t,i){var n=r.call(arguments,2);return function(){return e.apply(t,n.concat(r.call(arguments)))}}(this.init_,this,t))},init_:function(e){for(var t=e.getElementsByTagName("canvas"),i=0;i<t.length;i++)this.initElement(t[i])},initElement:function(e){if(!e.getContext){e.getContext=i,a(e.ownerDocument),e.innerHTML="",e.attachEvent("onpropertychange",l),e.attachEvent("onresize",c);var t=e.attributes;t.width&&t.width.specified?e.style.width=t.width.nodeValue+"px":e.width=e.clientWidth,t.height&&t.height.specified?e.style.height=t.height.nodeValue+"px":e.height=e.clientHeight}return e}};function l(e){var t=e.srcElement;switch(e.propertyName){case"width":t.getContext().clearRect(),t.style.width=t.attributes.width.nodeValue+"px",t.firstChild.style.width=t.clientWidth+"px";break;case"height":t.getContext().clearRect(),t.style.height=t.attributes.height.nodeValue+"px",t.firstChild.style.height=t.clientHeight+"px"}}function c(e){var t=e.srcElement;t.firstChild&&(t.firstChild.style.width=t.clientWidth+"px",t.firstChild.style.height=t.clientHeight+"px")}e.init();for(var u=[],t=0;t<16;t++)for(var d=0;d<16;d++)u[16*t+d]=t.toString(16)+d.toString(16);function h(){return[[1,0,0],[0,1,0],[0,0,1]]}function f(e,t){for(var i=h(),n=0;n<3;n++)for(var r=0;r<3;r++){for(var s=0,o=0;o<3;o++)s+=e[n][o]*t[o][r];i[n][r]=s}return i}function x(e,t){t.fillStyle=e.fillStyle,t.lineCap=e.lineCap,t.lineJoin=e.lineJoin,t.lineDash=e.lineDash,t.lineWidth=e.lineWidth,t.miterLimit=e.miterLimit,t.shadowBlur=e.shadowBlur,t.shadowColor=e.shadowColor,t.shadowOffsetX=e.shadowOffsetX,t.shadowOffsetY=e.shadowOffsetY,t.strokeStyle=e.strokeStyle,t.globalAlpha=e.globalAlpha,t.font=e.font,t.textAlign=e.textAlign,t.textBaseline=e.textBaseline,t.arcScaleX_=e.arcScaleX_,t.arcScaleY_=e.arcScaleY_,t.lineScale_=e.lineScale_}var E={aliceblue:"#F0F8FF",antiquewhite:"#FAEBD7",aquamarine:"#7FFFD4",azure:"#F0FFFF",beige:"#F5F5DC",bisque:"#FFE4C4",black:"#000000",blanchedalmond:"#FFEBCD",blueviolet:"#8A2BE2",brown:"#A52A2A",burlywood:"#DEB887",cadetblue:"#5F9EA0",chartreuse:"#7FFF00",chocolate:"#D2691E",coral:"#FF7F50",cornflowerblue:"#6495ED",cornsilk:"#FFF8DC",crimson:"#DC143C",cyan:"#00FFFF",darkblue:"#00008B",darkcyan:"#008B8B",darkgoldenrod:"#B8860B",darkgray:"#A9A9A9",darkgreen:"#006400",darkgrey:"#A9A9A9",darkkhaki:"#BDB76B",darkmagenta:"#8B008B",darkolivegreen:"#556B2F",darkorange:"#FF8C00",darkorchid:"#9932CC",darkred:"#8B0000",darksalmon:"#E9967A",darkseagreen:"#8FBC8F",darkslateblue:"#483D8B",darkslategray:"#2F4F4F",darkslategrey:"#2F4F4F",darkturquoise:"#00CED1",darkviolet:"#9400D3",deeppink:"#FF1493",deepskyblue:"#00BFFF",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1E90FF",firebrick:"#B22222",floralwhite:"#FFFAF0",forestgreen:"#228B22",gainsboro:"#DCDCDC",ghostwhite:"#F8F8FF",gold:"#FFD700",goldenrod:"#DAA520",grey:"#808080",greenyellow:"#ADFF2F",honeydew:"#F0FFF0",hotpink:"#FF69B4",indianred:"#CD5C5C",indigo:"#4B0082",ivory:"#FFFFF0",khaki:"#F0E68C",lavender:"#E6E6FA",lavenderblush:"#FFF0F5",lawngreen:"#7CFC00",lemonchiffon:"#FFFACD",lightblue:"#ADD8E6",lightcoral:"#F08080",lightcyan:"#E0FFFF",lightgoldenrodyellow:"#FAFAD2",lightgreen:"#90EE90",lightgrey:"#D3D3D3",lightpink:"#FFB6C1",lightsalmon:"#FFA07A",lightseagreen:"#20B2AA",lightskyblue:"#87CEFA",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#B0C4DE",lightyellow:"#FFFFE0",limegreen:"#32CD32",linen:"#FAF0E6",magenta:"#FF00FF",mediumaquamarine:"#66CDAA",mediumblue:"#0000CD",mediumorchid:"#BA55D3",mediumpurple:"#9370DB",mediumseagreen:"#3CB371",mediumslateblue:"#7B68EE",mediumspringgreen:"#00FA9A",mediumturquoise:"#48D1CC",mediumvioletred:"#C71585",midnightblue:"#191970",mintcream:"#F5FFFA",mistyrose:"#FFE4E1",moccasin:"#FFE4B5",navajowhite:"#FFDEAD",oldlace:"#FDF5E6",olivedrab:"#6B8E23",orange:"#FFA500",orangered:"#FF4500",orchid:"#DA70D6",palegoldenrod:"#EEE8AA",palegreen:"#98FB98",paleturquoise:"#AFEEEE",palevioletred:"#DB7093",papayawhip:"#FFEFD5",peachpuff:"#FFDAB9",peru:"#CD853F",pink:"#FFC0CB",plum:"#DDA0DD",powderblue:"#B0E0E6",rosybrown:"#BC8F8F",royalblue:"#4169E1",saddlebrown:"#8B4513",salmon:"#FA8072",sandybrown:"#F4A460",seagreen:"#2E8B57",seashell:"#FFF5EE",sienna:"#A0522D",skyblue:"#87CEEB",slateblue:"#6A5ACD",slategray:"#708090",slategrey:"#708090",snow:"#FFFAFA",springgreen:"#00FF7F",steelblue:"#4682B4",tan:"#D2B48C",thistle:"#D8BFD8",tomato:"#FF6347",turquoise:"#40E0D0",violet:"#EE82EE",wheat:"#F5DEB3",whitesmoke:"#F5F5F5",yellowgreen:"#9ACD32"};function b(e){var t=e.indexOf("(",3),i=e.indexOf(")",t+1),n=e.substring(t+1,i).split(",");return 4==n.length&&"a"==e.charAt(3)||(n[3]=1),n}function C(e){return parseFloat(e)/100}function S(e,t,i){return Math.min(i,Math.max(t,e))}function w(e,t,i){return i<0&&i++,1<i&&i--,6*i<1?e+6*(t-e)*i:2*i<1?t:3*i<2?e+(t-e)*(2/3-i)*6:e}var T={};function V(e){if(e in T)return T[e];var t=1;if("#"==(e=String(e)).charAt(0))r=e;else if(/^rgb/.test(e)){for(var i,n=b(e),r="#",s=0;s<3;s++)i=-1!=n[s].indexOf("%")?Math.floor(255*C(n[s])):+n[s],r+=u[S(i,0,255)];t=+n[3]}else if(/^hsl/.test(e)){r=function(e){var t,i,n,r,s,o;if((r=parseFloat(e[0])/360%360)<0&&r++,s=S(C(e[1]),0,1),o=S(C(e[2]),0,1),0==s)t=i=n=o;else{var a=o<.5?o*(1+s):o+s-o*s,l=2*o-a;t=w(l,a,r+1/3),i=w(l,a,r),n=w(l,a,r-1/3)}return"#"+u[Math.floor(255*t)]+u[Math.floor(255*i)]+u[Math.floor(255*n)]}(n=b(e)),t=n[3]}else r=E[e]||e;return T[e]={color:r,alpha:t}}var P="normal",I="normal",A="normal",k=10,D="sans-serif",R={};var M={butt:"flat",round:"round"};function F(e){this.m_=h(),this.mStack_=[],this.aStack_=[],this.currentPath_=[],this.strokeStyle="#000",this.fillStyle="#000",this.lineWidth=1,this.lineJoin="miter",this.lineDash=[],this.lineCap="butt",this.miterLimit=+N,this.globalAlpha=1,this.font="10px sans-serif",this.textAlign="left",this.textBaseline="alphabetic";var t="width:"+(this.canvas=e).clientWidth+"px;height:"+e.clientHeight+"px;overflow:hidden;position:absolute",i=e.ownerDocument.createElement("div");i.style.cssText=t,e.appendChild(i);var n=i.cloneNode(!1);n.style.backgroundColor="red",n.style.filter="alpha(opacity=0)",e.appendChild(n),this.element_=i,this.arcScaleX_=1,this.arcScaleY_=1,this.lineScale_=1}var L=F.prototype;function O(e,t,i,n){e.currentPath_.push({type:"bezierCurveTo",cp1x:t.x,cp1y:t.y,cp2x:i.x,cp2y:i.y,x:n.x,y:n.y}),e.currentX_=n.x,e.currentY_=n.y}function H(e,t){var i,n=V(e.strokeStyle),r=n.color,s=n.alpha*e.globalAlpha,o=e.lineScale_*e.lineWidth;o<1&&(s*=o),t.push("<g_vml_:stroke",' opacity="',s,'"',' joinstyle="',e.lineJoin,'"',' dashstyle="',e.lineDash.join(" "),'"',' miterlimit="',e.miterLimit,'"',' endcap="',(i=e.lineCap,M[i]||"square"),'"',' weight="',o,'px"',' color="',r,'" />')}function z(e,t,i,n){var r=e.fillStyle,s=e.arcScaleX_,o=e.arcScaleY_,a=n.x-i.x,l=n.y-i.y;if(r instanceof _){var c=0,u={x:0,y:0},d=0,h=1;if("gradient"==r.type_){var f=r.x0_/s,g=r.y0_/o,p=r.x1_/s,m=r.y1_/o,x=G(e,f,g),y=G(e,p,m),v=y.x-x.x,E=y.y-x.y;(c=180*Math.atan2(v,E)/Math.PI)<0&&(c+=360),c<1e-6&&(c=0)}else{u={x:((x=G(e,r.x0_,r.y0_)).x-i.x)/a,y:(x.y-i.y)/l},a/=s*N,l/=o*N;var b=B.max(a,l);d=2*r.r0_/b,h=2*r.r1_/b-d}var C=r.colors_;C.sort(function(e,t){return e.offset-t.offset});for(var S=C.length,w=C[0].color,T=C[S-1].color,P=C[0].alpha*e.globalAlpha,I=C[S-1].alpha*e.globalAlpha,A=[],k=0;k<S;k++){var D=C[k];A.push(D.offset*h+d+" "+D.color)}t.push('<g_vml_:fill type="',r.type_,'"',' method="none" focus="100%"',' color="',w,'"',' color2="',T,'"',' colors="',A.join(","),'"',' opacity="',I,'"',' g_o_:opacity2="',P,'"',' angle="',c,'"',' focusposition="',u.x,",",u.y,'" />')}else if(r instanceof W){if(a&&l){var R=-i.x,M=-i.y;t.push("<g_vml_:fill",' position="',R/a*s*s,",",M/l*o*o,'"',' type="tile"',' src="',r.src_,'" />')}}else{var F=V(e.fillStyle),L=F.color,O=F.alpha*e.globalAlpha;t.push('<g_vml_:fill color="',L,'" opacity="',O,'" />')}}function G(e,t,i){var n=e.m_;return{x:N*(t*n[0][0]+i*n[1][0]+n[2][0])-m,y:N*(t*n[0][1]+i*n[1][1]+n[2][1])-m}}function $(e,t,i){var n;if((n=t,isFinite(n[0][0])&&isFinite(n[0][1])&&isFinite(n[1][0])&&isFinite(n[1][1])&&isFinite(n[2][0])&&isFinite(n[2][1]))&&(e.m_=t,i)){var r=t[0][0]*t[1][1]-t[0][1]*t[1][0];e.lineScale_=o(s(r))}}function _(e){this.type_=e,this.x0_=0,this.y0_=0,this.r0_=0,this.x1_=0,this.y1_=0,this.r1_=0,this.colors_=[]}function W(e,t){switch(!function(e){e&&1==e.nodeType&&"IMG"==e.tagName||Y("TYPE_MISMATCH_ERR");"complete"!=e.readyState&&Y("INVALID_STATE_ERR")}(e),t){case"repeat":case null:case"":this.repetition_="repeat";break;case"repeat-x":case"repeat-y":case"no-repeat":this.repetition_=t;break;default:Y("SYNTAX_ERR")}this.src_=e.src,this.width_=e.width,this.height_=e.height}function Y(e){throw new U(e)}function U(e){this.code=this[e],this.message=e+": DOM Exception "+this.code}L.clearRect=function(){this.textMeasureEl_&&(this.textMeasureEl_.removeNode(!0),this.textMeasureEl_=null),this.element_.innerHTML=""},L.beginPath=function(){this.currentPath_=[]},L.moveTo=function(e,t){var i=G(this,e,t);this.currentPath_.push({type:"moveTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},L.lineTo=function(e,t){var i=G(this,e,t);this.currentPath_.push({type:"lineTo",x:i.x,y:i.y}),this.currentX_=i.x,this.currentY_=i.y},L.bezierCurveTo=function(e,t,i,n,r,s){var o=G(this,r,s);O(this,G(this,e,t),G(this,i,n),o)},L.quadraticCurveTo=function(e,t,i,n){var r=G(this,e,t),s=G(this,i,n),o={x:this.currentX_+2/3*(r.x-this.currentX_),y:this.currentY_+2/3*(r.y-this.currentY_)};O(this,o,{x:o.x+(s.x-this.currentX_)/3,y:o.y+(s.y-this.currentY_)/3},s)},L.arc=function(e,t,i,n,r,s){i*=N;var o=s?"at":"wa",a=e+p(n)*i-m,l=t+g(n)*i-m,c=e+p(r)*i-m,u=t+g(r)*i-m;a!=c||s||(a+=.125);var d=G(this,e,t),h=G(this,a,l),f=G(this,c,u);this.currentPath_.push({type:o,x:d.x,y:d.y,radius:i,xStart:h.x,yStart:h.y,xEnd:f.x,yEnd:f.y})},L.rect=function(e,t,i,n){this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath()},L.strokeRect=function(e,t,i,n){var r=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath(),this.stroke(),this.currentPath_=r},L.fillRect=function(e,t,i,n){var r=this.currentPath_;this.beginPath(),this.moveTo(e,t),this.lineTo(e+i,t),this.lineTo(e+i,t+n),this.lineTo(e,t+n),this.closePath(),this.fill(),this.currentPath_=r},L.createLinearGradient=function(e,t,i,n){var r=new _("gradient");return r.x0_=e,r.y0_=t,r.x1_=i,r.y1_=n,r},L.createRadialGradient=function(e,t,i,n,r,s){var o=new _("gradientradial");return o.x0_=e,o.y0_=t,o.r0_=i,o.x1_=n,o.y1_=r,o.r1_=s,o},L.drawImage=function(e,t){var i,n,r,s,o,a,l,c,u=e.runtimeStyle.width,d=e.runtimeStyle.height;e.runtimeStyle.width="auto",e.runtimeStyle.height="auto";var h=e.width,f=e.height;if(e.runtimeStyle.width=u,e.runtimeStyle.height=d,3==arguments.length)i=t,n=arguments[2],o=a=0,l=r=h,c=s=f;else if(5==arguments.length)i=t,n=arguments[2],r=arguments[3],s=arguments[4],o=a=0,l=h,c=f;else{if(9!=arguments.length)throw Error("Invalid number of arguments");o=t,a=arguments[2],l=arguments[3],c=arguments[4],i=arguments[5],n=arguments[6],r=arguments[7],s=arguments[8]}var g=G(this,i,n),p=[],m=this.m_;p.push(" <g_vml_:group",' coordsize="',10*N,",",10*N,'"',' coordorigin="0,0"',' style="width:',y(10*m[0][0]),"px;height:",y(10*m[1][1]),"px;position:absolute;","top:",y(g.y/N),"px;left:",y(g.x/N),"px; rotation:",y(180*Math.atan(m[0][1]/m[1][1])/Math.PI),";"),p.push('" >','<g_vml_:image src="',e.src,'"',' style="width:',N*r,"px;"," height:",N*s,'px"',' cropleft="',o/h,'"',' croptop="',a/f,'"',' cropright="',(h-o-l)/h,'"',' cropbottom="',(f-a-c)/f,'"'," />","</g_vml_:group>"),this.element_.insertAdjacentHTML("BeforeEnd",p.join(""))},L.setLineDash=function(e){1===e.length&&((e=e.slice())[1]=e[0]),this.lineDash=e},L.getLineDash=function(){return this.lineDash},L.stroke=function(e){var t=[];t.push("<g_vml_:shape",' filled="',!!e,'"',' style="position:absolute;width:',10,"px;height:",10,'px;left:0px;top:0px;"',' coordorigin="0,0"',' coordsize="',10*N,",",10*N,'"',' stroked="',!e,'"',' path="');for(var i={x:null,y:null},n={x:null,y:null},r=0;r<this.currentPath_.length;r++){var s=this.currentPath_[r];switch(s.type){case"moveTo":t.push(" m ",y(s.x),",",y(s.y));break;case"lineTo":t.push(" l ",y(s.x),",",y(s.y));break;case"close":t.push(" x "),s=null;break;case"bezierCurveTo":t.push(" c ",y(s.cp1x),",",y(s.cp1y),",",y(s.cp2x),",",y(s.cp2y),",",y(s.x),",",y(s.y));break;case"at":case"wa":t.push(" ",s.type," ",y(s.x-this.arcScaleX_*s.radius),",",y(s.y-this.arcScaleY_*s.radius)," ",y(s.x+this.arcScaleX_*s.radius),",",y(s.y+this.arcScaleY_*s.radius)," ",y(s.xStart),",",y(s.yStart)," ",y(s.xEnd),",",y(s.yEnd))}s&&((null==i.x||s.x<i.x)&&(i.x=s.x),(null==n.x||s.x>n.x)&&(n.x=s.x),(null==i.y||s.y<i.y)&&(i.y=s.y),(null==n.y||s.y>n.y)&&(n.y=s.y))}t.push(' ">'),e?z(this,t,i,n):H(this,t),t.push("</g_vml_:shape>"),this.element_.insertAdjacentHTML("beforeEnd",t.join(""))},L.fill=function(){this.$stroke(!0)},L.closePath=function(){this.currentPath_.push({type:"close"})},L.save=function(){var e={};x(this,e),this.aStack_.push(e),this.mStack_.push(this.m_)},L.restore=function(){this.aStack_.length&&(x(this.aStack_.pop(),this),this.m_=this.mStack_.pop())},L.translate=function(e,t){$(this,f([[1,0,0],[0,1,0],[e,t,1]],this.m_),!1)},L.rotate=function(e){var t=p(e),i=g(e);$(this,f([[t,i,0],[-i,t,0],[0,0,1]],this.m_),!1)},L.scale=function(e,t){this.arcScaleX_*=e,this.arcScaleY_*=t,$(this,f([[e,0,0],[0,t,0],[0,0,1]],this.m_),!0)},L.transform=function(e,t,i,n,r,s){$(this,f([[e,t,0],[i,n,0],[r,s,1]],this.m_),!0)},L.setTransform=function(e,t,i,n,r,s){$(this,[[e,t,0],[i,n,0],[r,s,1]],!0)},L.drawText_=function(e,t,i,n,r){var s,o=this.m_,a=0,l=1e3,c={x:0,y:0},u=[],d=function(e,t){var i={};for(var n in e)i[n]=e[n];var r=parseFloat(t.currentStyle.fontSize),s=parseFloat(e.size);return"number"==typeof e.size?i.size=e.size:-1!=e.size.indexOf("px")?i.size=s:-1!=e.size.indexOf("em")?i.size=r*s:-1!=e.size.indexOf("%")?i.size=r/100*s:-1!=e.size.indexOf("pt")?i.size=s/.75:i.size=r,i.size*=.981,i}(function(e){if(R[e])return R[e];var t=document.createElement("div").style;try{t.font=e}catch(e){}return R[e]={style:t.fontStyle||P,variant:t.fontVariant||I,weight:t.fontWeight||A,size:t.fontSize||k,family:t.fontFamily||D}}(this.font),this.element_),h=(s=d).style+" "+s.variant+" "+s.weight+" "+s.size+"px "+s.family,f=this.element_.currentStyle,g=this.textAlign.toLowerCase();switch(g){case"left":case"center":case"right":break;case"end":g="ltr"==f.direction?"right":"left";break;case"start":g="rtl"==f.direction?"right":"left";break;default:g="left"}switch(this.textBaseline){case"hanging":case"top":c.y=d.size/1.75;break;case"middle":break;default:case null:case"alphabetic":case"ideographic":case"bottom":c.y=-d.size/3}switch(g){case"right":a=1e3,l=.05;break;case"center":a=l=500}var p=G(this,t+c.x,i+c.y);u.push('<g_vml_:line from="',-a,' 0" to="',l,' 0.05" ',' coordsize="100 100" coordorigin="0 0"',' filled="',!r,'" stroked="',!!r,'" style="position:absolute;width:1px;height:1px;left:0px;top:0px;">'),r?H(this,u):z(this,u,{x:-a,y:0},{x:l,y:d.size});var m=o[0][0].toFixed(3)+","+o[1][0].toFixed(3)+","+o[0][1].toFixed(3)+","+o[1][1].toFixed(3)+",0,0",x=y(p.x/N)+","+y(p.y/N);u.push('<g_vml_:skew on="t" matrix="',m,'" ',' offset="',x,'" origin="',a,' 0" />','<g_vml_:path textpathok="true" />','<g_vml_:textpath on="true" string="',v(e),'" style="v-text-align:',g,";font:",v(h),'" /></g_vml_:line>'),this.element_.insertAdjacentHTML("beforeEnd",u.join(""))},L.fillText=function(e,t,i,n){this.drawText_(e,t,i,n,!1)},L.strokeText=function(e,t,i,n){this.drawText_(e,t,i,n,!0)},L.measureText=function(e){if(!this.textMeasureEl_){this.element_.insertAdjacentHTML("beforeEnd",'<span style="position:absolute;top:-20000px;left:0;padding:0;margin:0;border:none;white-space:pre;"></span>'),this.textMeasureEl_=this.element_.lastChild}var t=this.element_.ownerDocument;return this.textMeasureEl_.innerHTML="",this.textMeasureEl_.style.font=this.font,this.textMeasureEl_.appendChild(t.createTextNode(e)),{width:this.textMeasureEl_.offsetWidth}},L.clip=function(){},L.arcTo=function(){},L.createPattern=function(e,t){return new W(e,t)},_.prototype.addColorStop=function(e,t){t=V(t),this.colors_.push({offset:e,color:t.color,alpha:t.alpha})};var X=U.prototype=new Error;X.INDEX_SIZE_ERR=1,X.DOMSTRING_SIZE_ERR=2,X.HIERARCHY_REQUEST_ERR=3,X.WRONG_DOCUMENT_ERR=4,X.INVALID_CHARACTER_ERR=5,X.NO_DATA_ALLOWED_ERR=6,X.NO_MODIFICATION_ALLOWED_ERR=7,X.NOT_FOUND_ERR=8,X.NOT_SUPPORTED_ERR=9,X.INUSE_ATTRIBUTE_ERR=10,X.INVALID_STATE_ERR=11,X.SYNTAX_ERR=12,X.INVALID_MODIFICATION_ERR=13,X.NAMESPACE_ERR=14,X.INVALID_ACCESS_ERR=15,X.VALIDATION_ERR=16,X.TYPE_MISMATCH_ERR=17,G_vmlCanvasManager=e,CanvasRenderingContext2D=F,CanvasGradient=_,CanvasPattern=W,DOMException=U}(),Ext.define("Ext.draw.engine.Canvas",{extend:Ext.draw.Surface,isCanvas:!0,config:{highPrecision:!1},statics:{contextOverrides:{setGradientBBox:function(e){this.bbox=e},fill:function(){var e=this.fillStyle,t=this.fillGradient,i=this.fillOpacity,n=this.globalAlpha,r=this.bbox;e!==Ext.util.Color.RGBA_NONE&&0!==i&&(t&&r&&(this.fillStyle=t.generateGradient(this,r)),1!==i&&(this.globalAlpha=n*i),this.$fill(),1!==i&&(this.globalAlpha=n),t&&r&&(this.fillStyle=e))},stroke:function(){var e=this.strokeStyle,t=this.strokeGradient,i=this.strokeOpacity,n=this.globalAlpha,r=this.bbox;e!==Ext.util.Color.RGBA_NONE&&0!==i&&(t&&r&&(this.strokeStyle=t.generateGradient(this,r)),1!==i&&(this.globalAlpha=n*i),this.$stroke(),1!==i&&(this.globalAlpha=n),t&&r&&(this.strokeStyle=e))},fillStroke:function(e,t){var i=this.fillStyle,n=this.fillOpacity,r=this.strokeStyle,s=this.strokeOpacity,o=this.shadowColor,a=this.shadowBlur,l=Ext.util.Color.RGBA_NONE;void 0===t&&(t=e.transformFillStroke),t||e.inverseMatrix.toContext(this),i!==l&&0!==n&&(this.fill(),this.shadowColor=l,this.shadowBlur=0),r!==l&&0!==s&&this.stroke(),this.shadowColor=o,this.shadowBlur=a},setLineDash:function(e){this.$setLineDash&&this.$setLineDash(e)},getLineDash:function(){if(this.$getLineDash)return this.$getLineDash()},ellipse:function(e,t,i,n,r,s,o,a){var l=Math.cos(r),c=Math.sin(r);this.transform(l*i,c*i,-c*n,l*n,e,t),this.arc(0,0,1,s,o,a),this.transform(l/i,-c/n,c/i,l/n,-(l*e+c*t)/i,(c*e-l*t)/n)},appendPath:function(e){var t=0,i=0,n=e.commands,r=e.params,s=n.length;for(this.beginPath();t<s;t++)switch(n[t]){case"M":this.moveTo(r[i],r[i+1]),i+=2;break;case"L":this.lineTo(r[i],r[i+1]),i+=2;break;case"C":this.bezierCurveTo(r[i],r[i+1],r[i+2],r[i+3],r[i+4],r[i+5]),i+=6;break;case"Z":this.closePath()}},save:function(){for(var e,t=this.toSave,i=t.length,n=i&&{},r=0;r<i;r++)(e=t[r])in this&&(n[e]=this[e]);this.state.push(n),this.$save()},restore:function(){var e,t=this.state.pop();if(t)for(e in t)this[e]=t[e];this.$restore()}}},splitThreshold:3e3,toSave:["fillGradient","strokeGradient"],element:{reference:"element",children:[{reference:"bodyElement",style:{width:"100%",height:"100%",position:"relative"}}]},createCanvas:function(){var e,t,i,n;for(n in e=Ext.Element.create({tag:"canvas",cls:Ext.baseCSSPrefix+"surface-canvas"}),window.G_vmlCanvasManager&&(G_vmlCanvasManager.initElement(e.dom),this.isVML=!0),t=Ext.draw.engine.Canvas.contextOverrides,(i=e.dom.getContext("2d")).ellipse&&delete t.ellipse,i.state=[],i.toSave=this.toSave,t)i["$"+n]=i[n];Ext.apply(i,t),this.getHighPrecision()?this.enablePrecisionCompensation(i):this.disablePrecisionCompensation(i),this.bodyElement.appendChild(e),this.canvases.push(e),this.contexts.push(i)},updateHighPrecision:function(e){var t,i,n=this.contexts,r=n.length;for(t=0;t<r;t++)i=n[t],e?this.enablePrecisionCompensation(i):this.disablePrecisionCompensation(i)},precisionNames:["rect","fillRect","strokeRect","clearRect","moveTo","lineTo","arc","arcTo","save","restore","updatePrecisionCompensate","setTransform","transform","scale","translate","rotate","quadraticCurveTo","bezierCurveTo","createLinearGradient","createRadialGradient","fillText","strokeText","drawImage"],disablePrecisionCompensation:function(e){var t,i,n=Ext.draw.engine.Canvas.contextOverrides,r=this.precisionNames,s=r.length;for(t=0;t<s;t++)(i=r[t])in n||delete e[i];this.setDirty(!0)},enablePrecisionCompensation:function(e){var t=this,c=1,u=1,d=0,h=0,o=new Ext.draw.Matrix,i=[],n={},r=Ext.draw.engine.Canvas.contextOverrides,f=e.constructor.prototype,s={toSave:t.toSave,rect:function(e,t,i,n){return f.rect.call(this,e*c+d,t*u+h,i*c,n*u)},fillRect:function(e,t,i,n){this.updatePrecisionCompensateRect(),f.fillRect.call(this,e*c+d,t*u+h,i*c,n*u),this.updatePrecisionCompensate()},strokeRect:function(e,t,i,n){this.updatePrecisionCompensateRect(),f.strokeRect.call(this,e*c+d,t*u+h,i*c,n*u),this.updatePrecisionCompensate()},clearRect:function(e,t,i,n){return f.clearRect.call(this,e*c+d,t*u+h,i*c,n*u)},moveTo:function(e,t){return f.moveTo.call(this,e*c+d,t*u+h)},lineTo:function(e,t){return f.lineTo.call(this,e*c+d,t*u+h)},arc:function(e,t,i,n,r,s){this.updatePrecisionCompensateRect(),f.arc.call(this,e*c+d,t*c+h,i*c,n,r,s),this.updatePrecisionCompensate()},arcTo:function(e,t,i,n,r){this.updatePrecisionCompensateRect(),f.arcTo.call(this,e*c+d,t*u+h,i*c+d,n*u+h,r*c),this.updatePrecisionCompensate()},save:function(){i.push(o),o=o.clone(),r.save.call(this),f.save.call(this)},restore:function(){o=i.pop(),r.restore.call(this),f.restore.call(this),this.updatePrecisionCompensate()},updatePrecisionCompensate:function(){o.precisionCompensate(t.devicePixelRatio,n),c=n.xx,u=n.yy,d=n.dx,h=n.dy,f.setTransform.call(this,t.devicePixelRatio,n.b,n.c,n.d,0,0)},updatePrecisionCompensateRect:function(){o.precisionCompensateRect(t.devicePixelRatio,n),c=n.xx,u=n.yy,d=n.dx,h=n.dy,f.setTransform.call(this,t.devicePixelRatio,n.b,n.c,n.d,0,0)},setTransform:function(e,t,i,n,r,s){o.set(e,t,i,n,r,s),this.updatePrecisionCompensate()},transform:function(e,t,i,n,r,s){o.append(e,t,i,n,r,s),this.updatePrecisionCompensate()},scale:function(e,t){this.transform(e,0,0,t,0,0)},translate:function(e,t){this.transform(1,0,0,1,e,t)},rotate:function(e){var t=Math.cos(e),i=Math.sin(e);this.transform(t,i,-i,t,0,0)},quadraticCurveTo:function(e,t,i,n){f.quadraticCurveTo.call(this,e*c+d,t*u+h,i*c+d,n*u+h)},bezierCurveTo:function(e,t,i,n,r,s){f.bezierCurveTo.call(this,e*c+d,t*u+h,i*c+d,n*u+h,r*c+d,s*u+h)},createLinearGradient:function(e,t,i,n){var r;return this.updatePrecisionCompensateRect(),r=f.createLinearGradient.call(this,e*c+d,t*u+h,i*c+d,n*u+h),this.updatePrecisionCompensate(),r},createRadialGradient:function(e,t,i,n,r,s){var o;return this.updatePrecisionCompensateRect(),o=f.createLinearGradient.call(this,e*c+d,t*c+h,i*c,n*c+d,r*c+h,s*c),this.updatePrecisionCompensate(),o},fillText:function(e,t,i,n){f.setTransform.apply(this,o.elements),void 0===n?f.fillText.call(this,e,t,i):f.fillText.call(this,e,t,i,n),this.updatePrecisionCompensate()},strokeText:function(e,t,i,n){f.setTransform.apply(this,o.elements),void 0===n?f.strokeText.call(this,e,t,i):f.strokeText.call(this,e,t,i,n),this.updatePrecisionCompensate()},fill:function(){var e=this.fillGradient,t=this.bbox;this.updatePrecisionCompensateRect(),e&&t&&(this.fillStyle=e.generateGradient(this,t)),f.fill.call(this),this.updatePrecisionCompensate()},stroke:function(){var e=this.strokeGradient,t=this.bbox;this.updatePrecisionCompensateRect(),e&&t&&(this.strokeStyle=e.generateGradient(this,t)),f.stroke.call(this),this.updatePrecisionCompensate()},drawImage:function(e,t,i,n,r,s,o,a,l){switch(arguments.length){case 3:return f.drawImage.call(this,e,t*c+d,i*u+h);case 5:return f.drawImage.call(this,e,t*c+d,i*u+h,n*c,r*u);case 9:return f.drawImage.call(this,e,t,i,n,r,s*c+d,o*u*h,a*c,l*u)}}};Ext.apply(e,s),this.setDirty(!0)},updateRect:function(e){this.callParent([e]);var t,i,n,r,s,o,a,l,c=this,u=Math.floor(e[0]),d=Math.floor(e[1]),h=Math.ceil(e[0]+e[2]),f=Math.ceil(e[1]+e[3]),g=c.devicePixelRatio,p=c.canvases,m=h-u,x=f-d,y=Math.round(c.splitThreshold/g),v=c.xSplits=Math.ceil(m/y),E=c.ySplits=Math.ceil(x/y);for(s=i=0;i<E;i++,s+=y)for(r=t=0;t<v;t++,r+=y)(n=i*v+t)>=p.length&&c.createCanvas(),(o=p[n].dom).style.left=r+"px",o.style.top=s+"px",(l=Math.min(y,x-s))*g!==o.height&&(o.height=l*g,o.style.height=l+"px"),(a=Math.min(y,m-r))*g!==o.width&&(o.width=a*g,o.style.width=a+"px"),c.applyDefaults(c.contexts[n]);for(c.activeCanvases=n=v*E;p.length>n;)p.pop().destroy();c.clear()},clearTransform:function(){var e,t,i,n=this.xSplits,r=this.ySplits,s=this.contexts,o=this.splitThreshold,a=this.devicePixelRatio;for(e=0;e<n;e++)for(t=0;t<r;t++)(i=s[t*n+e]).translate(-o*e,-o*t),i.scale(a,a),this.matrix.toContext(i)},renderSprite:function(e){for(var t,i,n,r,s,o,a,l,c,u,d,h=this.getRect(),f=this.matrix,g=e.getParent(),p=Ext.draw.Matrix.fly([1,0,0,1,0,0]),m=this.splitThreshold/this.devicePixelRatio,x=this.xSplits,y=this.ySplits,v=0,E=0,b=h[2],C=h[3];g&&g.isSprite;)p.prependMatrix(g.matrix||g.attr&&g.attr.matrix),g=g.getParent();if(p.prependMatrix(f),r=(r=e.getBBox())&&p.transformBBox(r),e.preRender(this),e.attr.hidden||0===e.attr.globalAlpha)e.setDirty(!1);else{for(i=u=0;u<y;u++,i+=m)for(t=c=0;c<x;c++,t+=m)if(d=u*x+c,n=this.contexts[d],a=(v=t)+(s=Math.min(m,b-t)),l=(E=i)+(o=Math.min(m,C-i)),!r||!(r.x>a||r.x+r.width<v||r.y>l||r.y+r.height<E)){if(n.save(),e.useAttributes(n,h),!1===e.render(this,n,[v,E,s,o]))return!1;n.restore()}e.setDirty(!1)}},flatten:function(e,t){var i,n,r,s,o,a,l=document.createElement("canvas"),c=Ext.getClassName(this),u=this.devicePixelRatio,d=l.getContext("2d");for(l.width=Math.ceil(e.width*u),l.height=Math.ceil(e.height*u),s=0;s<t.length;s++)if(i=t[s],Ext.getClassName(i)===c)for(r=i.getRect(),o=0;o<i.canvases.length;o++)a=(n=i.canvases[o]).getOffsetsTo(n.getParent()),d.drawImage(n.dom,(r[0]+a[0])*u,(r[1]+a[1])*u);return{data:l.toDataURL(),type:"png"}},applyDefaults:function(e){var t=Ext.util.Color.RGBA_NONE;e.strokeStyle=t,e.fillStyle=t,e.textAlign="start",e.textBaseline="alphabetic",e.miterLimit=1},clear:function(){var e,t,i,n=this.activeCanvases;for(e=0;e<n;e++)t=this.canvases[e].dom,(i=this.contexts[e]).setTransform(1,0,0,1,0,0),i.clearRect(0,0,t.width,t.height);this.setDirty(!0)},destroy:function(){var e,t=this.canvases,i=t.length;for(e=0;e<i;e++)this.contexts[e]=null,t[e].destroy(),t[e]=null;this.contexts=this.canvases=null,this.callParent()},privates:{initElement:function(){this.callParent(),this.canvases=[],this.contexts=[],this.activeCanvases=this.xSplits=this.ySplits=0}}},function(){var e=this.prototype,t=1e10;Ext.os.is.Android4&&Ext.browser.is.Chrome?t=3e3:Ext.is.iOS&&(t=2200),e.splitThreshold=t}),Ext.define("Ext.draw.Container",{extend:Ext.draw.ContainerBase,alternateClassName:"Ext.draw.Component",xtype:"draw",defaultType:"surface",isDrawContainer:!0,engine:"Ext.draw.engine.Canvas",config:{cls:[Ext.baseCSSPrefix+"draw-container",Ext.baseCSSPrefix+"unselectable"],resizeHandler:null,sprites:null,gradients:[],downloadServerUrl:void 0,touchAction:{panX:!1,panY:!1,pinchZoom:!1,doubleTapZoom:!1},surfaceZIndexes:{main:1}},defaultDownloadServerUrl:"http://svg.sencha.io",supportedFormats:["png","pdf","jpeg","gif"],supportedOptions:{version:Ext.isNumber,data:Ext.isString,format:function(e){return 0<=Ext.Array.indexOf(this.supportedFormats,e)},filename:Ext.isString,width:Ext.isNumber,height:Ext.isNumber,scale:Ext.isNumber,pdf:Ext.isObject,jpeg:Ext.isObject},initAnimator:function(){this.frameCallbackId=Ext.draw.Animator.addFrameCallback("renderFrame",this)},applyDownloadServerUrl:function(e){var t=this.defaultDownloadServerUrl;return e||(e=t,window.jasmine||Ext.log.warn("Using Sencha's download server could expose your data and pose a security risk. Please see Ext.draw.Container#download method docs for more info. (component id="+this.getId()+")")),e},applyGradients:function(e){var t,i,n,r,s=[];if(!Ext.isArray(e))return s;for(t=0,i=e.length;t<i;t++)n=e[t],Ext.isObject(n)&&("string"!=typeof n.type&&(n.type="linear"),n.angle&&(n.degrees=n.angle,delete n.angle),Ext.isObject(n.stops)&&(n.stops=function(e){var t,i=[];for(r in e)(t=e[r]).offset=r/100,i.push(t);return i}(n.stops)),s.push(n));return Ext.draw.gradient.GradientDefinition.add(s),s},applySprites:function(e){var t,i,n,r,s;if(e){for(t=[],r=0,s=(e=Ext.Array.from(e)).length;r<s;r++)(i=(n=e[r]).surface)&&i.isSurface||(Ext.isString(i)?(i=this.getSurface(i),delete n.surface):i=this.getSurface("main")),n=i.add(n),t.push(n);return t}},resizeDelay:500,resizeTimerId:0,lastResizeTime:null,size:null,handleResize:function(e,t){var i=this,n=i.element,r=i.getResizeHandler()||i.defaultResizeHandler,s=i.resizeDelay,o=i.lastResizeTime;n&&(e=e||n.getSize()).width&&e.height&&(i.size=e,i.stopResizeTimer(),!t&&o&&Ext.Date.now()-o<s?i.resizeTimerId=Ext.defer(i.handleResize,s,i,[e,!0]):(i.fireEvent("bodyresize",i,e),Ext.callback(r,null,[e],0,i),i.renderFrame(),i.lastResizeTime=Ext.Date.now()))},stopResizeTimer:function(){this.resizeTimerId&&(Ext.undefer(this.resizeTimerId),this.resizeTimerId=0)},defaultResizeHandler:function(t){this.getItems().each(function(e){e.setRect([0,0,t.width,t.height])})},getSurface:function(e,t){var i,n=this.getItems(),r=n.getCount(),s=this.getSurfaceZIndexes();return e=e||"main",t=t||e,i=this.createSurface(e),t in s&&i.element.setStyle("zIndex",s[t]),n.getCount()>r&&this.handleResize(null,!0),i},createSurface:function(e){var t=this.getItems();return e=this.getId()+"-"+(e||"main"),t.get(e)||this.add({xclass:this.engine,id:e})},renderFrame:function(){var e,t,i,n=this.getItems();for(e=0,t=n.length;e<t;e++)(i=n.items[e]).isSurface&&i.renderFrame()},getSurfaces:function(e){var t,i,n,r,s=Array.prototype.slice.call(this.items.items),o=this.getSurfaceZIndexes();if(e)for(i=1;i<s.length;i++){for(r=o[(n=s[i]).type],t=i-1;0<=t&&o[s[t].type]>r;)s[t+1]=s[t],t--;s[t+1]=n}return s},getImage:function(e){var t,i,n=this.bodyElement.getSize(),r=this.getSurfaces(!0),s=r[0];if((Ext.isIE||Ext.isEdge)&&s.isSVG)t={data:s.toSVG(n,r),type:"svg-markup"};else{if(t=s.flatten(n,r),"image"===e)return(i=new Image).src=t.data,t.data=i,t;if("stream"===e)return t.data=t.data.replace(/^data:image\\/[^;]+/,"data:application/octet-stream"),t}return t},download:function(e){var t,i,n,r=[];if(Ext.isIE8)return!1;for(i in(e=e||{}).version=2,e.data||(e.data=this.getImage().data),e)e.hasOwnProperty(i)&&(n=e[i],i in this.supportedOptions?this.supportedOptions[i].call(this,n)?r.push({tag:"input",type:"hidden",name:i,value:Ext.String.htmlEncode(Ext.isObject(n)?Ext.JSON.encode(n):n)}):Ext.log.error('Invalid value for image download option "'+i+'": '+n):Ext.log.error('Invalid image download option: "'+i+'"'));t=Ext.dom.Helper.markup({tag:"html",children:[{tag:"head"},{tag:"body",children:[{tag:"form",method:"POST",action:e.url||this.getDownloadServerUrl(),children:r},{tag:"script",type:"text/javascript",children:'document.getElementsByTagName("form")[0].submit();'}]}]}),window.open("","ImageDownload_"+Date.now()).document.write(t)},doDestroy:function(){var e=this.frameCallbackId;e&&Ext.draw.Animator.removeFrameCallback(e),this.stopResizeTimer(),this.callParent()}},function(){(location.search.match("svg")||Ext.os.is.BlackBerry&&10===Ext.os.version.getMajor()||Ext.browser.is.AndroidStock4&&(1===Ext.os.version.getMinor()||2===Ext.os.version.getMinor()||3===Ext.os.version.getMinor()))&&(Ext.draw.Container.prototype.engine="Ext.draw.engine.Svg")}),Ext.define("Ext.chart.theme.BaseTheme",{defaultsDivCls:"x-root"}),Ext.define("Ext.chart.theme.Base",{extend:Ext.chart.theme.BaseTheme,mixins:{factoryable:Ext.mixin.Factoryable},factoryConfig:{type:"chart.theme"},isTheme:!0,isBase:!0,config:{baseColor:null,colors:void 0,gradients:null,chart:{defaults:{captions:{title:{docked:"top",padding:5,style:{textAlign:"center",fontFamily:"default",fontWeight:"500",fillStyle:"black",fontSize:"default*1.6"}},subtitle:{docked:"top",style:{textAlign:"center",fontFamily:"default",fontWeight:"normal",fillStyle:"black",fontSize:"default*1.3"}},credits:{docked:"bottom",padding:5,style:{textAlign:"left",fontFamily:"default",fontWeight:"lighter",fillStyle:"black",fontSize:"default"}}},background:"white"}},axis:{defaults:{label:{x:0,y:0,textBaseline:"middle",textAlign:"center",fontSize:"default",fontFamily:"default",fontWeight:"default",fillStyle:"black"},title:{fillStyle:"black",fontSize:"default*1.23",fontFamily:"default",fontWeight:"default"},style:{strokeStyle:"black"},grid:{strokeStyle:"rgb(221, 221, 221)"}},top:{style:{textPadding:5}},bottom:{style:{textPadding:5}}},series:{defaults:{label:{fillStyle:"black",strokeStyle:"none",fontFamily:"default",fontWeight:"default",fontSize:"default*1.077",textBaseline:"middle",textAlign:"center"},labelOverflowPadding:5}},sprites:{text:{fontSize:"default",fontWeight:"default",fontFamily:"default",fillStyle:"black"}},legend:{label:{fontSize:14,fontWeight:"default",fontFamily:"default",fillStyle:"black"},border:{lineWidth:1,radius:4,fillStyle:"none",strokeStyle:"gray"},background:"white"},seriesThemes:void 0,markerThemes:{type:["circle","cross","plus","square","triangle","diamond"]},useGradients:!1,background:null},colorDefaults:["#94ae0a","#115fa6","#a61120","#ff8809","#ffd13e","#a61187","#24ad9a","#7c7474","#a66111"],constructor:function(e){this.initConfig(e),this.resolveDefaults()},defaultRegEx:/^default([+\\-/*]\\d+(?:\\.\\d+)?)?$/,defaultOperators:{"*":function(e,t){return e*t},"+":function(e,t){return e+t},"-":function(e,t){return e-t}},resolveChartDefaults:function(){var e,t,i,n,r=Ext.clone(this.getChart());for(e in r)if("captions"in(i=r[e]))for(t in i.captions)(n=i.captions[t])&&this.replaceDefaults(n.style);this.setChart(r)},resolveDefaults:function(){var a=this;Ext.onInternalReady(function(){var e,t,i,n=Ext.clone(a.getSprites()),r=Ext.clone(a.getLegend()),s=Ext.clone(a.getAxis()),o=Ext.clone(a.getSeries());for(t in a.superclass.defaults||(e=Ext.getBody().createChild({tag:"div",cls:a.defaultsDivCls}),a.superclass.defaults={fontFamily:e.getStyle("fontFamily"),fontWeight:e.getStyle("fontWeight"),fontSize:parseFloat(e.getStyle("fontSize")),fontVariant:e.getStyle("fontVariant"),fontStyle:e.getStyle("fontStyle")},e.destroy()),a.resolveChartDefaults(),a.replaceDefaults(n.text),a.setSprites(n),a.replaceDefaults(r.label),a.setLegend(r),s)i=s[t],a.replaceDefaults(i.label),a.replaceDefaults(i.title);for(t in a.setAxis(s),o)i=o[t],a.replaceDefaults(i.label);a.setSeries(o)})},replaceDefaults:function(e){var t,i,n,r,s=this.superclass.defaults,o=this.defaultRegEx;if(Ext.isObject(e))for(t in s)(n=o.exec(e[t]))&&(i=s[t],(n=n[1])&&(r=this.defaultOperators[n.charAt(0)],i=Math.round(r(i,parseFloat(n.substr(1))))),e[t]=i)},applyBaseColor:function(e){var t,i;return e&&((i=(t=e.isColor?e:Ext.util.Color.fromString(e)).getHSL()[2])<.15?t=t.createLighter(.3):i<.3?t=t.createLighter(.15):.85<i?t=t.createDarker(.3):.7<i&&(t=t.createDarker(.15)),this.setColors([t.createDarker(.3).toString(),t.createDarker(.15).toString(),t.toString(),t.createLighter(.12).toString(),t.createLighter(.24).toString(),t.createLighter(.31).toString()])),e},applyColors:function(e){return e||this.colorDefaults},updateUseGradients:function(e){e&&this.updateGradients({type:"linear",degrees:90})},updateBackground:function(e){var t;e&&((t=this.getChart()).defaults.background=e,this.setChart(t))},updateGradients:function(e){var t,i,n,r,s,o=this.getColors(),a=[];if(Ext.isObject(e)){for(r=0,s=o&&o.length||0;r<s;r++)(i=Ext.util.Color.fromString(o[r]))&&(n=i.createLighter(.15).toString(),t=Ext.apply(Ext.Object.chain(e),{stops:[{offset:1,color:i.toString()},{offset:0,color:n.toString()}]}),a.push(t));this.setColors(a)}},applySeriesThemes:function(e){var t;return this.getBaseColor(),this.getUseGradients(),this.getGradients(),t=this.getColors(),e=e||{fillStyle:Ext.Array.clone(t),strokeStyle:Ext.Array.map(t,function(e){return Ext.util.Color.fromString(e.stops?e.stops[0].color:e).createDarker(.15).toString()})}}}),Ext.define("Ext.chart.theme.Default",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.default","chart.theme.Default","chart.theme.Base"]}),Ext.define("Ext.chart.Util",{singleton:!0,expandRange:function(e,t){var i,n,r=t.length,s=e[0],o=e[1];for(i=0;i<r;i++)null!=(n=t[i])&&isFinite(n)&&((n<s||!isFinite(s))&&(s=n),(o<n||!isFinite(o))&&(o=n));e[0]=s,e[1]=o},defaultRange:[0,1],validateRange:function(e,t,i){var n,r;return t=t||this.defaultRange.slice(),0===i||0<i||(i=.5),e&&2===e.length?((e=[e[0],e[1]])[0]||(e[0]=0),e[1]||(e[1]=0),i&&e[0]===e[1]&&(e=[e[0]-i,e[0]+i])[0]===e[1]?t:(n=isFinite(e[0]),r=isFinite(e[1]),n||r?(n&&!r?e[1]=e[0]+Ext.Number.sign(e[1])*(t[1]-t[0]):r&&!n&&(e[0]=e[1]+Ext.Number.sign(e[0])*(t[1]-t[0])),[Math.min(e[0],e[1]),Math.max(e[0],e[1])]):t)):t},applyAnimation:function(e,t){return e?!0===e&&(e={easing:"easeInOut",duration:500}):e={duration:0},t?Ext.apply({},e,t):e}}),Ext.define("Ext.chart.Markers",{extend:Ext.draw.sprite.Instancing,isMarkers:!0,defaultCategory:"default",constructor:function(){this.callParent(arguments),this.categories={},this.revisions={}},destroy:function(){this.categories=null,this.revisions=null,this.callParent()},getMarkerFor:function(e,t){var i;if(e in this.categories&&t in(i=this.categories[e]))return this.get(i[t])},clear:function(e){(e=e||this.defaultCategory)in this.revisions?this.revisions[e]++:this.revisions[e]=1},clearAll:function(){this.callParent(),this.categories={},this.revisions={}},putMarkerFor:function(e,t,i,n,r){var s,o;e=e||this.defaultCategory,i in(s=this.categories[e]||(this.categories[e]={}))?this.setAttributesFor(s[i],t,n):(s[i]=this.getCount(),this.add(t,n)),(o=this.get(s[i]))&&(o.category=e,r||(o.revision=this.revisions[e]||(this.revisions[e]=1)))},getMarkerBBoxFor:function(e,t,i){var n;if(e in this.categories&&t in(n=this.categories[e]))return this.getBBoxFor(n[t],i)},getBBox:function(){return null},render:function(e,t,i){var n,r,s=e.getRect(),o=this.revisions,a=this.attr.matrix,l=this.getTemplate(),c=l.attr,u=this.instances.length;for(a.toContext(t),l.preRender(e,t,i),l.useAttributes(t,s),r=0;r<u;r++)(n=this.get(r)).hidden||n.revision!==o[n.category]||(t.save(),l.attr=n,l.useAttributes(t,s),l.render(e,t,i),t.restore());l.attr=c}}),Ext.define("Ext.chart.modifier.Callout",{extend:Ext.draw.modifier.Modifier,alternateClassName:"Ext.chart.label.Callout",prepareAttributes:function(e){e.hasOwnProperty("calloutOriginal")||(e.calloutOriginal=Ext.Object.chain(e),e.calloutOriginal.prototype=e),this._lower&&this._lower.prepareAttributes(e.calloutOriginal)},setAttrs:function(e,t){var i,n,r,s,o,a,l,c,u,d=e.callout,h=e.calloutOriginal,f=e.bbox.plain,g=(f.width||0)+e.labelOverflowPadding,p=(f.height||0)+e.labelOverflowPadding;return"callout"in t&&(d=t.callout),("callout"in t||"calloutPlaceX"in t||"calloutPlaceY"in t||"x"in t||"y"in t)&&(r="rotationRads"in t?h.rotationRads=t.rotationRads:h.rotationRads,s="x"in t?h.x=t.x:h.x,o="y"in t?h.y=t.y:h.y,a="calloutPlaceX"in t?t.calloutPlaceX:e.calloutPlaceX,l="calloutPlaceY"in t?t.calloutPlaceY:e.calloutPlaceY,c="calloutVertical"in t?t.calloutVertical:e.calloutVertical,r%=2*Math.PI,Math.cos(r)<0&&(r=(r+Math.PI)%(2*Math.PI)),r>Math.PI&&(r-=2*Math.PI),c?(r=r*(1-d)-Math.PI/2*d,u=g,g=p,p=u):r*=1-d,t.rotationRads=r,t.x=s*(1-d)+a*d,t.y=o*(1-d)+l*d,i=a-s,n=l-o,Math.abs(n*g)>Math.abs(i*p)?0<n?(t.calloutEndX=t.x-p/2*(i/n)*d,t.calloutEndY=t.y-p/2*d):(t.calloutEndX=t.x+p/2*(i/n)*d,t.calloutEndY=t.y+p/2*d):0<i?(t.calloutEndX=t.x-g/2,t.calloutEndY=t.y-g/2*(n/i)*d):(t.calloutEndX=t.x+g/2,t.calloutEndY=t.y+g/2*(n/i)*d),t.calloutStartX&&t.calloutStartY?t.calloutHasLine=0<i&&t.calloutStartX<t.calloutEndX||i<=0&&t.calloutStartX>t.calloutEndX||0<n&&t.calloutStartY<t.calloutEndY||n<=0&&t.calloutStartY>t.calloutEndY:t.calloutHasLine=!0),t},pushDown:function(e,t){return t=this.callParent([e.calloutOriginal,t]),this.setAttrs(e,t)},popUp:function(e,t){return e=e.prototype,t=this.setAttrs(e,t),this._upper?this._upper.popUp(e,t):Ext.apply(e,t)}}),Ext.define("Ext.chart.sprite.Label",{extend:Ext.draw.sprite.Text,alternateClassName:"Ext.chart.label.Label",inheritableStatics:{def:{processors:{callout:"limited01",calloutHasLine:"bool",calloutPlaceX:"number",calloutPlaceY:"number",calloutStartX:"number",calloutStartY:"number",calloutEndX:"number",calloutEndY:"number",calloutColor:"color",calloutWidth:"number",calloutVertical:"bool",labelOverflowPadding:"number",display:"enums(none,under,over,rotate,insideStart,insideEnd,inside,outside)",orientation:"enums(horizontal,vertical)",renderer:"default"},defaults:{callout:0,calloutHasLine:!0,calloutPlaceX:0,calloutPlaceY:0,calloutStartX:0,calloutStartY:0,calloutEndX:0,calloutEndY:0,calloutWidth:1,calloutVertical:!1,calloutColor:"black",labelOverflowPadding:5,display:"none",orientation:"",renderer:null},triggers:{callout:"transform",calloutPlaceX:"transform",calloutPlaceY:"transform",labelOverflowPadding:"transform",calloutRotation:"transform",display:"hidden"},updaters:{hidden:function(e){e.hidden="none"===e.display}}}},config:{animation:{customDurations:{callout:200}},field:null,calloutLine:!0,hideLessThan:20},applyCalloutLine:function(e){return e?Ext.apply({},e):e},createModifiers:function(){var e=this.callParent(arguments);e.callout=new Ext.chart.modifier.Callout({sprite:this}),e.animation.setUpper(e.callout),e.callout.setUpper(e.target)},render:function(e,t){var i=this,n=i.attr,r=n.calloutColor;t.save(),t.globalAlpha*=n.callout,0<t.globalAlpha&&n.calloutHasLine&&(r&&r.isGradient&&(r=r.getStops()[0].color),t.strokeStyle=r,t.fillStyle=r,t.lineWidth=n.calloutWidth,t.beginPath(),t.moveTo(i.attr.calloutStartX,i.attr.calloutStartY),t.lineTo(i.attr.calloutEndX,i.attr.calloutEndY),t.stroke(),t.beginPath(),t.arc(i.attr.calloutStartX,i.attr.calloutStartY,+n.calloutWidth,0,2*Math.PI,!0),t.fill(),t.beginPath(),t.arc(i.attr.calloutEndX,i.attr.calloutEndY,+n.calloutWidth,0,2*Math.PI,!0),t.fill()),t.restore(),Ext.draw.sprite.Text.prototype.render.apply(i,arguments)}}),Ext.define("Ext.chart.series.Series",{mixins:[Ext.mixin.Observable,Ext.mixin.Bindable],isSeries:!0,defaultBindProperty:"store",type:null,seriesType:"sprite",identifiablePrefix:"ext-line-",observableType:"series",darkerStrokeRatio:.15,config:{chart:null,title:null,renderer:null,showInLegend:!0,triggerAfterDraw:!1,theme:null,style:{},subStyle:{},themeStyle:{},colors:null,useDarkerStrokeColor:!0,store:null,label:null,labelOverflowPadding:null,showMarkers:!0,marker:null,markerSubStyle:null,itemInstancing:null,background:null,surface:null,overlaySurface:null,hidden:!1,highlight:!1,highlightCfg:{merge:function(e){return e},$value:{fillStyle:"yellow",strokeStyle:"red"}},animation:null,tooltip:null},directions:[],sprites:null,themeColorCount:function(){return 1},isStoreDependantColorCount:!1,themeMarkerCount:function(){return 0},getFields:function(e){var t,i,n=[],r=e.length;for(t=0;t<r;t++)i=this["get"+e[t]+"Field"](),Ext.isArray(i)?n.push.apply(n,i):n.push(i);return n},applyAnimation:function(e,t){return this.getChart().isSettingSeriesAnimation||(this.isUserAnimation=!0),Ext.chart.Util.applyAnimation(e,t)},updateAnimation:function(e){var t,i,n,r,s,o=this.getSprites();for(n=0,r=o.length;n<r;n++)(s=o[n]).isMarkerHolder&&((t=s.getMarker("items"))&&t.getTemplate().setAnimation(e),(i=s.getMarker("markers"))&&i.getTemplate().setAnimation(e)),s.setAnimation(e)},getAnimation:function(){var e=this.getChart();return e&&e.animationSuspendCount?{duration:0}:this.isUserAnimation?this.callParent():e.getAnimation()},updateTitle:function(){var e=this.getChart();e&&!e.isInitializing&&e.refreshLegendStore()},applyHighlight:function(e,t){var i=this.getHighlightCfg();return Ext.isObject(e)?e=Ext.merge({},i,e):!0===e&&(e=i),e&&(e.type="highlight"),e&&Ext.merge({},t,e)},updateHighlight:function(e){var t,i,n,r,s,o=this.sprites,a=this.getHighlightCfg();if(this.getStyle(),this.getMarker(),Ext.Object.isEmpty(e))Ext.Object.equals(a,this.defaultConfig.highlightCfg)||this.addItemHighlight();else for(this.addItemHighlight(),t=0,i=o.length;t<i;t++)(n=o[t]).isMarkerHolder&&((r=n.getMarker("items"))&&r.getTemplate().modifiers.highlight.setStyle(e),(s=n.getMarker("markers"))&&s.getTemplate().modifiers.highlight.setStyle(e))},updateHighlightCfg:function(e){this.isConfiguring||Ext.Object.equals(e,this.defaultConfig.highlightCfg)||this.addItemHighlight()},applyItemInstancing:function(e,t){return!e||!t||e.type&&e.type!==t.type||(e=Ext.merge({},t,e)),e&&!e.type&&(e=null),e},setAttributesForItem:function(e,t){var i,n=e&&e.sprite;if(n)if(n.isMarkerHolder&&"items"===e.category&&n.putMarker(e.category,t,e.index,!1,!0),n.isMarkerHolder&&"markers"===e.category)n.putMarker(e.category,t,e.index,!1,!0);else if(n.isInstancing)n.setAttributesFor(e.index,t);else if(Ext.isArray(n))for(i=0;i<n.length;i++)n[i].setAttributes(t);else n.setAttributes(t)},getBBoxForItem:function(e){var t=e&&e.sprite,i=null;return t&&(i=t.getMarker("items")&&"items"===e.category?t.getMarkerBBox(e.category,e.index):t instanceof Ext.draw.sprite.Instancing?t.getBBoxFor(e.index):t.getBBox()),i},dataRange:null,constructor:function(e){var t;(e=e||{}).tips&&(e=Ext.apply({tooltip:e.tips},e)),e.highlightCfg&&(e=Ext.apply({highlight:e.highlightCfg},e)),t="id"in e?e.id:"id"in this.config?this.config.id:this.getId(),this.setId(t),this.sprites=[],this.dataRange=[],this.mixins.observable.constructor.call(this,e),this.initBindable()},lookupViewModel:function(e){var t=this.getChart();return t?t.lookupViewModel(e):null},applyTooltip:function(e,t){var i=Ext.apply({xtype:"tooltip",renderer:Ext.emptyFn,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,hideDelay:200,mouseOffset:[20,20],trackMouse:!0},e);return Ext.create(i)},updateTooltip:function(){this.addItemHighlight()},addItemHighlight:function(){var e,t,i,n,r=this.getChart();if(r){for(e=r.getInteractions(),n=0;n<e.length;n++)if((t=e[n]).isItemHighlight||t.isItemEdit){i=!0;break}i||(e.push("itemhighlight"),r.setInteractions(e))}},showTooltip:function(e,t){var i=this.getTooltip();i&&(Ext.callback(i.renderer,i.scope,[i,e.record,e],0,this),i.showBy(t))},showTooltipAt:function(e,t,i){var n=this.getTooltip(),r=n.config.mouseOffset;n&&n.showAt&&(r&&(t+=r[0],i+=r[1]),Ext.callback(n.renderer,n.scope,[n,e.record,e],0,this),n.showAt([t,i]))},hideTooltip:function(e,t){var i=this.getTooltip();i&&(t?i.hide():i.delayHide())},applyStore:function(e){return e&&Ext.StoreManager.lookup(e)},getStore:function(){return this._store||this.getChart()&&this.getChart().getStore()},updateStore:function(e,t){var i,n,r,s,o=this.getChart(),a=o&&o.getStore();if((t=t||a)&&t!==e&&t.un({datachanged:"onDataChanged",update:"onDataChanged",scope:this}),e){for(e.on({datachanged:"onDataChanged",update:"onDataChanged",scope:this}),s=0,r=(i=this.getSprites()).length;s<r;s++)(n=i[s]).setStore&&n.setStore(e);this.onDataChanged()}this.fireEvent("storechange",this,e,t)},onStoreChange:function(e,t,i){this._store||this.updateStore(t,i)},defaultRange:[0,1],coordinate:function(e,t,i){var n,r,s,o,a=this,l=a.getStore(),c=a.getHidden(),u=l.getData().items,d=a["get"+e+"Axis"](),h=[NaN,NaN],f=a["fieldCategory"+e]||[e],g=a.getFields(f),p={},m=a.getSprites();if(m.length&&!Ext.isBoolean(c)||!c){for(n=0;n<f.length;n++)r=g[n],s=a.coordinateData(u,r,d),Ext.chart.Util.expandRange(h,s),p["data"+f[n]]=s;for(h=Ext.chart.Util.validateRange(h,a.defaultRange,0),a.dataRange[t]=h[0],a.dataRange[t+i]=h[1],p["dataMin"+e]=h[0],p["dataMax"+e]=h[1],d&&(o=d.getRange(!0),d.setBoundSeriesRange(o)),n=0;n<m.length;n++)m[n].setAttributes(p)}},coordinateData:function(e,t,i){var n,r,s=[],o=e.length,a=i&&i.getLayout();for(n=0;n<o;n++)r=e[n].data[t],Ext.isEmpty(r,!0)?s[n]=r:a?s[n]=a.getCoordFor(r,t,n,e):(r=+r,s[n]=Ext.isNumber(r)?r:n);return s},updateLabelData:function(){var e=this.getLabel();if(e){var t,i,n,r,s,o,a=this.getStore().getData().items,l=this.getSprites(),c=e.getTemplate(),u=Ext.Array.from(c.getField());if(l.length&&u.length)for(t=0;t<l.length;t++)if((s=l[t]).getField){for(r=[],o=s.getField(),Ext.Array.indexOf(u,o)<0&&(o=u[t]),i=0,n=a.length;i<n;i++)r.push(a[i].get(o));s.setAttributes({labels:r})}}},processData:function(){var e,t,i,n,r,s=this,o=s.directions;if(!s.isProcessingData&&s.getStore()){for(s.isProcessingData=!0,n=0,r=o.length;n<r;n++)(t=s["get"+(e=o[n])+"Axis"]())?t.processData(s):s[i="coordinate"+e]&&s[i]();s.updateLabelData(),s.isProcessingData=!1}},applyBackground:function(e){var t;return this.getChart()?((t=this.getSurface()).setBackground(e),t.getBackground()):e},updateChart:function(e,t){var i=this,n=i._store;t&&(t.un("axeschange","onAxesChange",i),i.clearSprites(),i.setSurface(null),i.setOverlaySurface(null),t.unregister(i),i.onChartDetached(t),n||i.updateStore(null)),e&&(i.setSurface(e.getSurface("series")),i.setOverlaySurface(e.getSurface("overlay")),e.on("axeschange","onAxesChange",i),e.getAxes()&&i.onAxesChange(e),i.onChartAttached(e),e.register(i),n||i.updateStore(e.getStore()))},onAxesChange:function(e,t){if(!e.destroying&&!e.destroyed){var i,n,r,s,o=e.getAxes(),a={},l={},c=!1,u=this.directions;for(r=0,s=u.length;r<s;r++)l[n=u[r]]=this.getFields(this["fieldCategory"+n]);for(r=0,s=o.length;r<s;r++)a[n=(i=o[r]).getDirection()]?a[n].push(i):a[n]=[i];for(r=0,s=u.length;r<s;r++)n=u[r],!t&&this["get"+n+"Axis"]()||a[n]&&(i=this.findMatchingAxis(a[n],l[n]))&&(this["set"+n+"Axis"](i),i.getNeedHighPrecision()&&(c=!0));this.getSurface().setHighPrecision(c)}},findMatchingAxis:function(e,t){var i,n,r,s;for(r=0;r<e.length;r++){if(!(n=(i=e[r]).getFields()).length)return i;if(t)for(s=0;s<t.length;s++)if(0<=Ext.Array.indexOf(n,t[s]))return i}},onChartDetached:function(e){this.fireEvent("chartdetached",e,this),e.un("storechange","onStoreChange",this)},onChartAttached:function(e){this.fireEvent("chartattached",e,this),e.on("storechange","onStoreChange",this),this.processData()},updateOverlaySurface:function(e){var t=this.getLabel();e&&t&&e.add(t)},getLabel:function(){return this.labelMarker},setLabel:function(e){var t,i=this.getChart(),n=this.labelMarker;!e&&n&&(n.getTemplate().destroy(),n.destroy(),this.labelMarker=n=null),e&&(n||((n=this.labelMarker=new Ext.chart.Markers({zIndex:10})).setTemplate(new Ext.chart.sprite.Label),this.getOverlaySurface().add(n)),(t=n.getTemplate()).setAttributes(e),t.setConfig(e),e.field&&t.setField(e.field),e.display&&n.setAttributes({hidden:"none"===e.display}),n.setDirty(!0)),this.updateLabelData(),!i||i.isInitializing||this.isConfiguring||i.redraw()},createItemInstancingSprite:function(e,t){var i,n,r=new Ext.chart.Markers,s=Ext.apply({modifiers:"highlight"},t),o=this.getStyle();return r.setAttributes({zIndex:Number.MAX_VALUE}),r.setTemplate(s),(i=r.getTemplate()).setAttributes(o),(n=i.getAnimation()).on("animationstart","onSpriteAnimationStart",this),n.on("animationend","onSpriteAnimationEnd",this),e.bindMarker("items",r),this.getSurface().add(r),r},getDefaultSpriteConfig:function(){return{type:this.seriesType,renderer:this.getRenderer()}},updateRenderer:function(e){var t=this.getChart();t&&t.isInitializing||this.sprites.length&&(this.sprites[0].setAttributes({renderer:e||null}),t&&!t.isInitializing&&t.redraw())},updateShowMarkers:function(e){var t=this.getSprite(),i=t&&t.getMarker("markers");i&&i.getTemplate().setAttributes({hidden:!e})},createSprite:function(){var e,t,i=this,n=i.getSurface(),r=i.getItemInstancing(),s=n.add(i.getDefaultSpriteConfig());return s.setAttributes(i.getStyle()),s.setSeries(i),r&&i.createItemInstancingSprite(s,r),s.isMarkerHolder&&(t=i.getLabel())&&t.getTemplate().getField()&&s.bindMarker("labels",t),s.setStore&&s.setStore(i.getStore()),(e=s.getAnimation()).on("animationstart","onSpriteAnimationStart",i),e.on("animationend","onSpriteAnimationEnd",i),i.sprites.push(s),s},getSprites:null,getSprite:function(){var e=this.getSprites();return e&&e[0]},withSprite:function(e){var t=this.getSprite();return t&&e(t)||void 0},forEachSprite:function(e){var t,i,n=this.getSprites();for(t=0,i=n.length;t<i;t++)e(n[t])},onDataChanged:function(){var e=this.getChart(),t=e&&e.getStore();this.getStore()!==t&&this.processData()},isXType:function(e){return"series"===e},getItemId:function(){return this.getId()},applyThemeStyle:function(e,t){var i,n;return n=(i=e&&e.subStyle&&e.subStyle.fillStyle)&&e.subStyle.strokeStyle,i&&!n&&(e.subStyle.strokeStyle=this.getStrokeColorsFromFillColors(i)),n=(i=e&&e.markerSubStyle&&e.markerSubStyle.fillStyle)&&e.markerSubStyle.strokeStyle,i&&!n&&(e.markerSubStyle.strokeStyle=this.getStrokeColorsFromFillColors(i)),Ext.apply(t||{},e)},applyStyle:function(e,t){return Ext.apply({},e,t)},applySubStyle:function(e,t){var i=Ext.ClassManager.getNameByAlias("sprite."+this.seriesType),n=Ext.ClassManager.get(i);return n&&n.def&&(e=n.def.batchedNormalize(e,!0)),Ext.merge({},t,e)},applyMarker:function(e,t){var i,n;return e&&(Ext.isObject(e)||(e={}),i=e.type||"circle",t&&i===t.type&&(e=Ext.merge({},t,e))),i&&(n=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+i))),n&&n.def?(e=n.def.normalize(e,!0)).type=i:(e=null,Ext.log.warn("Invalid series marker type: "+i)),e},updateMarker:function(e){var t,i,n,r,s,o=this.getSprites();for(r=0,s=o.length;r<s;r++)(t=o[r]).isMarkerHolder&&(i=t.getMarker("markers"),e?(i||(i=new Ext.chart.Markers,t.bindMarker("markers",i),this.getOverlaySurface().add(i)),n=Ext.Object.merge({modifiers:"highlight"},e),i.setTemplate(n),i.getTemplate().getAnimation().setCustomDurations({translationX:0,translationY:0})):i&&(t.releaseMarker("markers"),this.getOverlaySurface().remove(i,!0)),t.setDirty(!0));this.isConfiguring||(this.doUpdateStyles(),this.updateHighlight(this.getHighlight()))},applyMarkerSubStyle:function(e,t){var i=e&&e.type||t&&t.type||"circle",n=Ext.ClassManager.get(Ext.ClassManager.getNameByAlias("sprite."+i));return n&&n.def&&(e=n.def.batchedNormalize(e,!0)),Ext.merge(t||{},e)},updateHidden:function(e){this.getColors(),this.getSubStyle(),this.setSubStyle({hidden:e}),this.processData(),this.doUpdateStyles(),Ext.isArray(e)||this.updateLegendStore(e)},updateLegendStore:function(e,t){var i,n=this.getChart(),r=n&&n.getLegendStore(),s=this.getId();r&&(1<arguments.length?-1!==(i=r.findBy(function(e){return e.get("series")===s&&e.get("index")===t}))&&(i=r.getAt(i)):i=r.findRecord("series",s),i&&i.get("disabled")!==e&&i.set("disabled",e))},setHiddenByIndex:function(e,t){Ext.isArray(this.getHidden())?(this.getHidden()[e]=t,this.updateHidden(this.getHidden()),this.updateLegendStore(t,e)):this.setHidden(t)},getStrokeColorsFromFillColors:function(e){var t=this.getUseDarkerStrokeColor(),i=Ext.isNumber(t)?t:this.darkerStrokeRatio;return t?Ext.Array.map(e,function(e){return e=Ext.isString(e)?e:e.stops[0].color,(e=Ext.util.Color.fromString(e)).createDarker(i).toString()}):Ext.Array.clone(e)},updateThemeColors:function(e){var t=this.getThemeStyle(),i={fillStyle:Ext.Array.clone(e),strokeStyle:this.getStrokeColorsFromFillColors(e)};t.subStyle=Ext.apply(t.subStyle||{},i),t.markerSubStyle=Ext.apply(t.markerSubStyle||{},i),this.doUpdateStyles(),this.isConfiguring||this.getChart().refreshLegendStore()},themeOnlyIfConfigured:{},updateTheme:function(e){var t,i,n,r,s,o,a=e.getSeries(),l=this.getInitialConfig(),c=this.defaultConfig,u=this.self.getConfigurator().configs,d=a.defaults,h=a[this.type],f=this.themeOnlyIfConfigured;for(t in a=Ext.merge({},d,h))if(i=a[t],o=u[t],null!=i&&o){if(s=l[t],n=Ext.isObject(i),r=s===c[t],n){if(r&&f[t])continue;i=Ext.merge({},i,s)}(r||n)&&this[o.names.set](i)}},updateChartColors:function(e){this.getColors()||this.updateThemeColors(e)},updateColors:function(e){var t;this.updateThemeColors(e),this.isConfiguring||(t=this.getChart())&&t.refreshLegendStore()},updateStyle:function(){this.doUpdateStyles()},updateSubStyle:function(){this.doUpdateStyles()},updateThemeStyle:function(){this.doUpdateStyles()},doUpdateStyles:function(){var e,t,i,n,r=this.sprites,s=this.getItemInstancing(),o=r&&r.length;this.getConfig("showMarkers",!0);for(n=0;n<o;n++)t=r[n],e=this.getStyleByIndex(n),s&&t.getMarker("items").getTemplate().setAttributes(e),t.setAttributes(e),(i=t.isMarkerHolder&&t.getMarker("markers"))&&i.getTemplate().setAttributes(this.getMarkerStyleByIndex(n))},getStyleWithTheme:function(){var e=this.getThemeStyle(),t=Ext.clone(this.getStyle());return e&&e.style&&Ext.applyIf(t,e.style),t},getSubStyleWithTheme:function(){var e=this.getThemeStyle(),t=Ext.clone(this.getSubStyle());return e&&e.subStyle&&Ext.applyIf(t,e.subStyle),t},getStyleByIndex:function(e){var t,i,n,r,s=this.getThemeStyle(),o={};return t=this.getStyle(),i=s&&s.style||{},n=this.styleDataForIndex(this.getSubStyle(),e),r=this.styleDataForIndex(s&&s.subStyle,e),Ext.apply(o,i),Ext.apply(o,r),Ext.apply(o,t),Ext.apply(o,n),o},getMarkerStyleByIndex:function(e){var t,i,n,r,s,o,a,l,c=this.getThemeStyle(),u={};return t=this.getStyle(),i=c&&c.style||{},(n=this.styleDataForIndex(this.getSubStyle(),e)).hasOwnProperty("hidden")&&(n.hidden=n.hidden||!this.getConfig("showMarkers",!0)),r=this.styleDataForIndex(c&&c.subStyle,e),s=this.getMarker(),o=c&&c.marker||{},a=this.getMarkerSubStyle(),l=this.styleDataForIndex(c&&c.markerSubStyle,e),Ext.apply(u,i),Ext.apply(u,r),Ext.apply(u,o),Ext.apply(u,l),Ext.apply(u,t),Ext.apply(u,n),Ext.apply(u,s),Ext.apply(u,a),u},styleDataForIndex:function(e,t){var i,n,r={};if(e)for(n in e)i=e[n],Ext.isArray(i)?r[n]=i[t%i.length]:r[n]=i;return r},getItemForPoint:Ext.emptyFn,getItemByIndex:function(e,t){var i=this.getSprites(),n=i&&i[0];if(n)return void 0===t&&n.isMarkerHolder?t=this.getItemInstancing()?"items":"markers":t&&""!==t&&"sprites"!==t||(n=i[e]),n?{series:this,category:t,index:e,record:this.getStore().getData().items[e],field:this.getYField(),sprite:n}:void 0},onSpriteAnimationStart:function(e){this.fireEvent("animationstart",this,e)},onSpriteAnimationEnd:function(e){this.fireEvent("animationend",this,e)},resolveListenerScope:function(e){var t,i=Ext._namedScopes[e],n=this.getChart();return i?i.isThis?t=this:i.isController?t=n?n.resolveListenerScope(e,!1):this:i.isSelf&&((t=n?n.resolveListenerScope(e,!1):this)!==n||n.getInheritedConfig("defaultListenerScope")||(t=this)):t=n?n.resolveListenerScope(e,!1):e||this,t},provideLegendInfo:function(e){var t=this.getSubStyleWithTheme(),i=t.fillStyle;Ext.isArray(i)&&(i=i[0]),e.push({name:this.getTitle()||this.getYField()||this.getId(),mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||t.strokeStyle||"black",disabled:this.getHidden(),series:this.getId(),index:0})},clearSprites:function(){var e,t,i,n=this.sprites;for(t=0,i=n.length;t<i;t++)(e=n[t])&&e.isSprite&&e.destroy();this.sprites=[]},destroy:function(){var e=this._store,t=this.getConfig("tooltip",!0);e&&e.getAutoDestroy()&&Ext.destroy(e),this.setChart(null),this.clearListeners(),t&&Ext.destroy(t),this.callParent()}}),Ext.define("Ext.chart.interactions.Abstract",{xtype:"interaction",mixins:{observable:Ext.mixin.Observable},config:{gestures:{tap:"onGesture"},chart:null,enabled:!0},throttleGap:0,stopAnimationBeforeSync:!1,constructor:function(e){var t;t="id"in(e=e||{})?e.id:"id"in this.config?this.config.id:this.getId(),this.setId(t),this.mixins.observable.constructor.call(this,e)},updateChart:function(e,t){t!==e&&(t&&(t.unregister(this),this.removeChartListener(t)),e&&(e.register(this),this.addChartListener()))},updateEnabled:function(e){var t=this.getChart();t&&(e?this.addChartListener():this.removeChartListener(t))},onGesture:Ext.emptyFn,getItemForEvent:function(e){var t=this.getChart(),i=t.getEventXY(e);return t.getItemForPoint(i[0],i[1])},getItemsForEvent:function(e){var t=this.getChart(),i=t.getEventXY(e);return t.getItemsForPoint(i[0],i[1])},addChartListener:function(){var e,s=this,t=s.getChart(),i=s.getGestures();if(s.getEnabled())for(e in s.listeners=s.listeners||{},i)n(e,i[e]);function n(n,r){t.addElementListener(n,s.listeners[n]=function(e){var t,i=s.getLocks();if(s.getEnabled()&&(!(n in i)||i[n]===s))return!1===(t=(Ext.isFunction(r)?r:s[r]).apply(this,arguments))&&e&&e.stopPropagation&&e.stopPropagation(),t},s)}},removeChartListener:function(e){var t,i,n,r=this,s=r.getGestures();if(r.listeners)for(t in s)i=t,(n=r.listeners[i])&&(e.removeElementListener(i,n),delete r.listeners[i])},lockEvents:function(){for(var e=this.getLocks(),t=Array.prototype.slice.call(arguments),i=t.length;i--;)e[t[i]]=this},unlockEvents:function(){for(var e=this.getLocks(),t=Array.prototype.slice.call(arguments),i=t.length;i--;)delete e[t[i]]},getLocks:function(){var e=this.getChart();return e.lockedEvents||(e.lockedEvents={})},doSync:function(){var e=this.getChart();this.syncTimer&&(Ext.undefer(this.syncTimer),this.syncTimer=null),this.stopAnimationBeforeSync&&e.animationSuspendCount++,e.redraw(),this.stopAnimationBeforeSync&&e.animationSuspendCount--,this.syncThrottle=Date.now()+this.throttleGap},sync:function(){var e=this;if(e.throttleGap&&Ext.frameStartTime<e.syncThrottle){if(e.syncTimer)return;e.syncTimer=Ext.defer(function(){e.doSync()},e.throttleGap)}else e.doSync()},getItemId:function(){return this.getId()},isXType:function(e){return"interaction"===e},destroy:function(){this.setChart(null),delete this.listeners,this.callParent()}},function(){Ext.os.is.Android4&&(this.prototype.throttleGap=40)}),Ext.define("Ext.chart.MarkerHolder",{extend:Ext.Mixin,mixinConfig:{id:"markerHolder",after:{constructor:"constructor",preRender:"preRender"},before:{destroy:"destroy"}},isMarkerHolder:!0,surfaceMatrix:null,inverseSurfaceMatrix:null,deprecated:{6:{methods:{getBoundMarker:{message:"Please use the 'getMarker' method instead.",fn:function(e){var t=this.boundMarkers[e];return t?[t]:t}}}}},constructor:function(){this.boundMarkers={},this.cleanRedraw=!1},bindMarker:function(e,t){var i=this.boundMarkers;t&&t.isMarkers&&(i[e]&&i[e]===t&&Ext.log.warn(this.getId()," (MarkerHolder): the Markers instance '",t.getId(),"' is already bound under the name '",e,"'."),this.releaseMarker(e),(i[e]=t).on("destroy",this.onMarkerDestroy,this))},onMarkerDestroy:function(e){this.releaseMarker(e)},releaseMarker:function(e){var t,i=this.boundMarkers;if(e&&e.isMarkers){for(t in i)if(i[t]===e){delete i[t];break}}else e=i[t=e],delete i[t];return e||null},getMarker:function(e){return this.boundMarkers[e]||null},preRender:function(e,t,i){var n,r,s,o=this,a=o.getId(),l=o.boundMarkers,c=o.getParent();if(s=o.surfaceMatrix?o.surfaceMatrix.set(1,0,0,1,0,0):o.surfaceMatrix=new Ext.draw.Matrix,o.cleanRedraw=!o.attr.dirty,!o.cleanRedraw)for(n in l)(r=l[n])&&r.clear(a);for(;c&&c.attr&&c.attr.matrix;)s.prependMatrix(c.attr.matrix),c=c.getParent();s.prependMatrix(c.matrix),o.surfaceMatrix=s,o.inverseSurfaceMatrix=s.inverse(o.inverseSurfaceMatrix)},putMarker:function(e,t,i,n,r){var s=this.boundMarkers[e];s&&s.putMarkerFor(this.getId(),t,i,n,r)},getMarkerBBox:function(e,t,i){var n=this.boundMarkers[e];if(n)return n.getMarkerBBoxFor(this.getId(),t,i)},destroy:function(){var e,t=this.boundMarkers;for(e in t)t[e].destroy()}}),Ext.define("Ext.chart.axis.sprite.Axis",{extend:Ext.draw.sprite.Sprite,alias:"sprite.axis",type:"axis",mixins:{markerHolder:Ext.chart.MarkerHolder},inheritableStatics:{def:{processors:{grid:"bool",axisLine:"bool",minorTicks:"bool",minorTickSize:"number",majorTicks:"bool",majorTickSize:"number",length:"number",startGap:"number",endGap:"number",dataMin:"number",dataMax:"number",visibleMin:"number",visibleMax:"number",position:"enums(left,right,top,bottom,angular,radial,gauge)",minStepSize:"number",estStepSize:"number",titleOffset:"number",textPadding:"number",min:"number",max:"number",centerX:"number",centerY:"number",radius:"number",totalAngle:"number",baseRotation:"number",data:"default",enlargeEstStepSizeByText:"bool"},defaults:{grid:!1,axisLine:!0,minorTicks:!1,minorTickSize:3,majorTicks:!0,majorTickSize:5,length:0,startGap:0,endGap:0,visibleMin:0,visibleMax:1,dataMin:0,dataMax:1,position:"",minStepSize:0,estStepSize:20,min:0,max:1,centerX:0,centerY:0,radius:1,baseRotation:0,data:null,titleOffset:0,textPadding:0,scalingCenterY:0,scalingCenterX:0,strokeStyle:"black",enlargeEstStepSizeByText:!1},triggers:{minorTickSize:"bbox",majorTickSize:"bbox",position:"bbox,layout",axisLine:"bbox,layout",minorTicks:"layout",min:"layout",max:"layout",length:"layout",minStepSize:"layout",estStepSize:"layout",data:"layout",dataMin:"layout",dataMax:"layout",visibleMin:"layout",visibleMax:"layout",enlargeEstStepSizeByText:"layout"},updaters:{layout:"layoutUpdater"}}},config:{label:null,labelOffset:10,layout:null,segmenter:null,renderer:null,layoutContext:null,axis:null},thickness:0,stepSize:0,getBBox:function(){return null},defaultRenderer:function(e){return this.segmenter.renderer(e,this)},layoutUpdater:function(){var e=this.getAxis().getChart();if(!e.isInitializing){var t=this.attr,i=this.getLayout(),n=e.getInherited().rtl,r=t.dataMax-t.dataMin,s=t.dataMin+r*t.visibleMin,o=t.dataMin+r*t.visibleMax,a=o-s,l=t.position,c={attr:t,segmenter:this.getSegmenter(),renderer:this.defaultRenderer};"left"===l||"right"===l?(t.translationX=0,t.translationY=o*t.length/a,t.scalingX=1,t.scalingY=-t.length/a,t.scalingCenterY=0,t.scalingCenterX=0,this.applyTransformations(!0)):"top"!==l&&"bottom"!==l||(t.translationX=n?t.length+s*t.length/a+1:-s*t.length/a,t.translationY=0,t.scalingX=(n?-1:1)*t.length/a,t.scalingY=1,t.scalingCenterY=0,t.scalingCenterX=0,this.applyTransformations(!0)),i&&(i.calculateLayout(c),this.setLayoutContext(c))}},iterate:function(e,t){var i,n,r,s,o,a,l,c,u=Ext.Array.some,d=Math.abs;if(e.getLabel){for(e.min<e.from&&t.call(this,e.min,e.getLabel(e.min),-1,e),i=0;i<=e.steps;i++)t.call(this,e.get(i),e.getLabel(i),i,e);e.max>e.to&&t.call(this,e.max,e.getLabel(e.max),e.steps+1,e)}else{if(o=(s=this.getAxis()).floatingAxes,a=[],l=(e.to-e.from)/(e.steps+1),s.getFloating())for(r in o)a.push(o[r]);for(c=function(t){return!a.length||u(a,function(e){return d(e-t)>l})},e.min<e.from&&c(e.min)&&t.call(this,e.min,e.min,-1,e),i=0;i<=e.steps;i++)c(n=e.get(i))&&t.call(this,n,n,i,e);e.max>e.to&&c(e.max)&&t.call(this,e.max,e.max,e.steps+1,e)}},renderTicks:function(r,s,e,o){var n,t=this,a=t.attr,i=a.position,l=a.matrix,c=.5*a.lineWidth,u=l.getXX(),d=l.getDX(),h=l.getYY(),f=l.getDY(),g=e.majorTicks,p=a.majorTickSize,m=e.minorTicks,x=a.minorTickSize;if(g)switch(i){case"right":function y(n){return function(e,t,i){e=r.roundPixel(e*h+f)+c,s.moveTo(0,e),s.lineTo(n,e)}}t.iterate(g,y(p)),m&&t.iterate(m,y(x));break;case"left":function v(n){return function(e,t,i){e=r.roundPixel(e*h+f)+c,s.moveTo(o[2]-n,e),s.lineTo(o[2],e)}}t.iterate(g,v(p)),m&&t.iterate(m,v(x));break;case"bottom":function E(n){return function(e,t,i){e=r.roundPixel(e*u+d)-c,s.moveTo(e,0),s.lineTo(e,n)}}t.iterate(g,E(p)),m&&t.iterate(m,E(x));break;case"top":function b(n){return function(e,t,i){e=r.roundPixel(e*u+d)-c,s.moveTo(e,o[3]),s.lineTo(e,o[3]-n)}}t.iterate(g,b(p)),m&&t.iterate(m,b(x));break;case"angular":t.iterate(g,function(e,t,i){e=e/(a.max+1)*Math.PI*2+a.baseRotation,s.moveTo(a.centerX+a.length*Math.cos(e),a.centerY+a.length*Math.sin(e)),s.lineTo(a.centerX+(a.length+p)*Math.cos(e),a.centerY+(a.length+p)*Math.sin(e))});break;case"gauge":n=t.getGaugeAngles(),t.iterate(g,function(e,t,i){e=(e-a.min)/(a.max-a.min)*a.totalAngle-a.totalAngle+n.start,s.moveTo(a.centerX+a.length*Math.cos(e),a.centerY+a.length*Math.sin(e)),s.lineTo(a.centerX+(a.length+p)*Math.cos(e),a.centerY+(a.length+p)*Math.sin(e))})}},renderLabels:function(n,e,r,t){var i,s,o,a,l,c,u,d,h,f=this,g=f.attr,p=.5*g.lineWidth,m=g.position,x=g.matrix,y=g.textPadding,v=x.getXX(),E=x.getDX(),b=x.getYY(),C=x.getDY(),S=0,w=r.majorTicks,T=Math.max(g.majorTickSize,g.minorTickSize)+g.lineWidth,P=Ext.draw.Draw.isBBoxIntersect,I=f.getLabel(),A=f.getLabelOffset(),k=null,D=0,R=0,M=r.segmenter,F=f.getRenderer(),L=f.getAxis(),O=L.getTitle(),B=O&&""!==O.attr.text&&O.getBBox(),N=null;if(w&&I&&!I.attr.hidden){switch(i=I.attr.font,e.font!==i&&(e.font=i),I.setAttributes({translationX:0,translationY:0},!0),I.applyTransformations(),s=I.attr.inverseMatrix.elements.slice(0),m){case"left":switch(c=B?B.x+B.width:0,I.attr.textAlign){case"start":u=n.roundPixel(c+E)-p;break;case"end":u=n.roundPixel(t[2]-T+E)-p;break;default:u=n.roundPixel(c+(t[2]-c-T)/2+E)-p}I.setAttributes({translationX:u},!0);break;case"right":switch(c=B?t[2]-B.x:0,I.attr.textAlign){case"start":u=n.roundPixel(T+E)+p;break;case"end":u=n.roundPixel(t[2]-c+E)+p;break;default:u=n.roundPixel(T+(t[2]-T-c)/2+E)+p}I.setAttributes({translationX:u},!0);break;case"top":c=B?B.y+B.height:0,I.setAttributes({translationY:n.roundPixel(c+(t[3]-c-T)/2)-p},!0);break;case"bottom":c=B?t[3]-B.y:0,I.setAttributes({translationY:n.roundPixel(T+(t[3]-T-c)/2)+p},!0);break;case"radial":I.setAttributes({translationX:g.centerX},!0);break;case"angular":case"gauge":I.setAttributes({translationY:g.centerY},!0)}if("left"===m||"right"===m?f.iterate(w,function(e,t,i){void 0!==t&&(l=F?Ext.callback(F,null,[L,t,r,k],0,L):M.renderer(t,r,k),k=t,I.setAttributes({text:String(l),translationY:n.roundPixel(e*b+C)},!0),I.applyTransformations(),S=Math.max(S,I.getBBox().width+T),a=Ext.draw.Matrix.fly(I.attr.matrix.elements.slice(0)),o=a.prepend.apply(a,s).transformBBox(I.getBBox(!0)),N&&!P(o,N,y)||(n.renderSprite(I),D+=(N=o).height,R++))}):"top"===m||"bottom"===m?f.iterate(w,function(e,t,i){void 0!==t&&(l=F?Ext.callback(F,null,[L,t,r,k],0,L):M.renderer(t,r,k),k=t,I.setAttributes({text:String(l),translationX:n.roundPixel(e*v+E)},!0),I.applyTransformations(),S=Math.max(S,I.getBBox().height+T),a=Ext.draw.Matrix.fly(I.attr.matrix.elements.slice(0)),o=a.prepend.apply(a,s).transformBBox(I.getBBox(!0)),N&&!P(o,N,y)||(n.renderSprite(I),D+=(N=o).width,R++))}):"radial"===m?f.iterate(w,function(e,t,i){if(void 0!==t&&(l=F?Ext.callback(F,null,[L,t,r,k],0,L):M.renderer(t,r,k),k=t,void 0!==l)){if(I.setAttributes({text:String(l),translationX:g.centerX-n.roundPixel(e)/g.max*g.length*Math.cos(g.baseRotation+Math.PI/2),translationY:g.centerY-n.roundPixel(e)/g.max*g.length*Math.sin(g.baseRotation+Math.PI/2)},!0),I.applyTransformations(),o=I.attr.matrix.transformBBox(I.getBBox(!0)),N&&!P(o,N))return;n.renderSprite(I),D+=(N=o).width,R++}}):"angular"===m?(A+=g.majorTickSize+.5*g.lineWidth,f.iterate(w,function(e,t,i){if(void 0!==t&&(l=F?Ext.callback(F,null,[L,t,r,k],0,L):M.renderer(t,r,k),k=t,S=Math.max(S,Math.max(g.majorTickSize,g.minorTickSize)+("butt"!==g.lineCap?.5*g.lineWidth:0)),void 0!==l)){if(h=e/(g.max+1)*Math.PI*2+g.baseRotation,I.setAttributes({text:String(l),translationX:g.centerX+(g.length+A)*Math.cos(h),translationY:g.centerY+(g.length+A)*Math.sin(h)},!0),I.applyTransformations(),o=I.attr.matrix.transformBBox(I.getBBox(!0)),N&&!P(o,N))return;n.renderSprite(I),D+=(N=o).width,R++}})):"gauge"===m&&(d=f.getGaugeAngles(),A+=g.majorTickSize+.5*g.lineWidth,f.iterate(w,function(e,t,i){if(void 0!==t&&(l=F?Ext.callback(F,null,[L,t,r,k],0,L):M.renderer(t,r,k),k=t,void 0!==l)){if(h=(e-g.min)/(g.max-g.min)*g.totalAngle-g.totalAngle+d.start,I.setAttributes({text:String(l),translationX:g.centerX+(g.length+A)*Math.cos(h),translationY:g.centerY+(g.length+A)*Math.sin(h)},!0),I.applyTransformations(),o=I.attr.matrix.transformBBox(I.getBBox(!0)),N&&!P(o,N))return;n.renderSprite(I),D+=(N=o).width,R++}})),g.enlargeEstStepSizeByText&&R&&(D/=R,D+=T,D*=2,g.estStepSize<D&&(g.estStepSize=D)),1<Math.abs(f.thickness-S))return f.thickness=S,g.bbox.plain.dirty=!0,g.bbox.transform.dirty=!0,f.doThicknessChanged(),!1}},renderAxisLine:function(e,t,i,n){var r,s,o=this.attr,a=.5*o.lineWidth,l=o.position;if(o.axisLine&&o.length)switch(l){case"left":r=e.roundPixel(n[2])-a,t.moveTo(r,-o.endGap),t.lineTo(r,o.length+o.startGap+1);break;case"right":t.moveTo(a,-o.endGap),t.lineTo(a,o.length+o.startGap+1);break;case"bottom":t.moveTo(-o.startGap,a),t.lineTo(o.length+o.endGap,a);break;case"top":r=e.roundPixel(n[3])-a,t.moveTo(-o.startGap,r),t.lineTo(o.length+o.endGap,r);break;case"angular":t.moveTo(o.centerX+o.length,o.centerY),t.arc(o.centerX,o.centerY,o.length,0,2*Math.PI,!0);break;case"gauge":s=this.getGaugeAngles(),t.moveTo(o.centerX+Math.cos(s.start)*o.length,o.centerY+Math.sin(s.start)*o.length),t.arc(o.centerX,o.centerY,o.length,s.start,s.end,!0)}},getGaugeAngles:function(){var e,t=this.attr.totalAngle;return e=t<=Math.PI?.5*(Math.PI-t):.5*-(2*Math.PI-t),{start:e=2*Math.PI-e,end:e-t}},renderGridLines:function(e,t,i,n){var r,s,o,a=this,l=a.getAxis(),c=a.attr,u=c.matrix,d=c.startGap,h=c.endGap,f=u.getXX(),g=u.getYY(),p=u.getDX(),m=u.getDY(),x=c.position,y=l.getGridAlignment(),v=i.majorTicks;c.grid&&v&&("left"===x||"right"===x?(o=c.min*g+m+h+d,a.iterate(v,function(e,t,i){r=e*g+m+h,a.putMarker(y+"-"+(i%2?"odd":"even"),{y:r,height:o-r},s=i,!0),o=r}),s++,r=0,a.putMarker(y+"-"+(s%2?"odd":"even"),{y:r,height:o-r},s,!0)):"top"===x||"bottom"===x?(o=c.min*f+p+d,d&&a.putMarker(y+"-even",{x:0,width:o},-1,!0),a.iterate(v,function(e,t,i){r=e*f+p+d,a.putMarker(y+"-"+(i%2?"odd":"even"),{x:r,width:o-r},s=i,!0),o=r}),s++,r=c.length+c.startGap+c.endGap,a.putMarker(y+"-"+(s%2?"odd":"even"),{x:r,width:o-r},s,!0)):"radial"===x?a.iterate(v,function(e,t,i){e&&(r=e/c.max*c.length,a.putMarker(y+"-"+(i%2?"odd":"even"),{scalingX:r,scalingY:r},i,!0),o=r)}):"angular"===x&&a.iterate(v,function(e,t,i){c.length&&(r=e/(c.max+1)*Math.PI*2+c.baseRotation,a.putMarker(y+"-"+(i%2?"odd":"even"),{rotationRads:r,rotationCenterX:0,rotationCenterY:0,scalingX:c.length,scalingY:c.length},i,!0),o=r)}))},renderLimits:function(e){var t=this.attr,i=this.getAxis(),n=Ext.Array.from(i.getLimits());if(n.length&&t.dataMin!==t.dataMax){var r,s,o,a,l,c,u,d,h,f=i.getChart().getInnerPadding(),g=i.limits.surface.getRect(),p=t.matrix,m=t.position,x=Ext.Object.chain,y=i.limits.titles;if(y.attr.hidden=!1,y.instances=[],y.position=0,"left"===m||"right"===m){for(c=0,u=n.length;c<u;c++)if((a=x(n[c])).line||(a.line={}),l=(l=Ext.isString(a.value)?i.getCoordFor(a.value):a.value)*p.getYY()+p.getDY(),a.line.y=l+f.top,a.line.strokeStyle=a.line.strokeStyle||t.strokeStyle,this.putMarker("horizontal-limit-lines",a.line,c,!0),a.line.title){switch(y.add(a.line.title),r=y.getBBoxFor(y.position-1),s=a.line.title.position||("left"===m?"start":"end")){case"start":d=10;break;case"end":d=g[2]-10;break;case"middle":d=g[2]/2}y.setAttributesFor(y.position-1,{x:d,y:a.line.y-r.height/2,textAlign:s,fillStyle:a.line.title.fillStyle||a.line.strokeStyle})}}else if("top"===m||"bottom"===m){for(c=0,u=n.length;c<u;c++)if((a=x(n[c])).line||(a.line={}),l=(l=Ext.isString(a.value)?i.getCoordFor(a.value):a.value)*p.getXX()+p.getDX(),a.line.x=l+f.left,a.line.strokeStyle=a.line.strokeStyle||t.strokeStyle,this.putMarker("vertical-limit-lines",a.line,c,!0),a.line.title){switch(y.add(a.line.title),r=y.getBBoxFor(y.position-1),s=a.line.title.position||("top"===m?"end":"start")){case"start":h=g[3]-r.width/2-10;break;case"end":h=r.width/2+10;break;case"middle":h=g[3]/2}y.setAttributesFor(y.position-1,{x:a.line.x+r.height/2,y:h,fillStyle:a.line.title.fillStyle||a.line.strokeStyle,rotationRads:Math.PI/2})}}else if("radial"===m)for(c=0,u=n.length;c<u;c++)(a=x(n[c])).line||(a.line={}),(l=Ext.isString(a.value)?i.getCoordFor(a.value):a.value)>t.max||(l=l/t.max*t.length,a.line.cx=t.centerX,a.line.cy=t.centerY,a.line.scalingX=l,a.line.scalingY=l,a.line.strokeStyle=a.line.strokeStyle||t.strokeStyle,this.putMarker("circular-limit-lines",a.line,c,!0),a.line.title&&(y.add(a.line.title),r=y.getBBoxFor(y.position-1),y.setAttributesFor(y.position-1,{x:t.centerX,y:t.centerY-l-r.height/2,fillStyle:a.line.title.fillStyle||a.line.strokeStyle})));else if("angular"===m)for(c=0,u=n.length;c<u;c++)(a=x(n[c])).line||(a.line={}),l=(l=Ext.isString(a.value)?i.getCoordFor(a.value):a.value)/(t.max+1)*Math.PI*2+t.baseRotation,a.line.translationX=t.centerX,a.line.translationY=t.centerY,a.line.rotationRads=l,a.line.rotationCenterX=0,a.line.rotationCenterY=0,a.line.scalingX=t.length,a.line.scalingY=t.length,a.line.strokeStyle=a.line.strokeStyle||t.strokeStyle,this.putMarker("radial-limit-lines",a.line,c,!0),a.line.title&&(y.add(a.line.title),r=y.getBBoxFor(y.position-1),o=l>-.5*Math.PI&&l<.5*Math.PI||l>1.5*Math.PI&&l<2*Math.PI?1:-1,y.setAttributesFor(y.position-1,{x:t.centerX+.5*t.length*Math.cos(l)+o*r.height/2*Math.sin(l),y:t.centerY+.5*t.length*Math.sin(l)-o*r.height/2*Math.cos(l),rotationRads:1==o?l:l-Math.PI,fillStyle:a.line.title.fillStyle||a.line.strokeStyle}))}else i.limits&&(i.limits.titles.attr.hidden=!0)},doThicknessChanged:function(){var e=this.getAxis();e&&e.onThicknessChanged()},render:function(e,t,i){var n=this.getLayoutContext();if(n){if(!1===this.renderLabels(e,t,n,i))return!1;t.beginPath(),this.renderTicks(e,t,n,i),this.renderAxisLine(e,t,n,i),this.renderGridLines(e,t,n,i),this.renderLimits(i),t.stroke()}}}),Ext.define("Ext.chart.axis.segmenter.Segmenter",{config:{axis:null},constructor:function(e){this.initConfig(e)},renderer:function(e,t){return String(e)},from:function(e){return e},diff:Ext.emptyFn,align:Ext.emptyFn,add:Ext.emptyFn,preferredStep:Ext.emptyFn}),Ext.define("Ext.chart.axis.segmenter.Names",{extend:Ext.chart.axis.segmenter.Segmenter,alias:"segmenter.names",renderer:function(e,t){return e},diff:function(e,t,i){return Math.floor(t-e)},align:function(e,t,i){return Math.floor(e)},add:function(e,t,i){return e+t},preferredStep:function(e,t,i,n){return{unit:1,step:1}}}),Ext.define("Ext.chart.axis.segmenter.Numeric",{extend:Ext.chart.axis.segmenter.Segmenter,alias:"segmenter.numeric",isNumeric:!0,renderer:function(e,t){return e.toFixed(Math.max(0,t.majorTicks.unit.fixes))},diff:function(e,t,i){return Math.floor((t-e)/i.scale)},align:function(e,t,i){var n=i.scale*t;return Math.floor(e/n)*n},add:function(e,t,i){return e+t*i.scale},preferredStep:function(e,t){var i=Math.floor(Math.log(t)*Math.LOG10E),n=Math.pow(10,i);return(t/=n)<2?t=2:t<5?t=5:t<10&&(t=10,i++),{unit:{fixes:-i,scale:n},step:t}},leadingZeros:function(e){return-Math.floor(Ext.Number.log10(Math.abs(e)))},exactStep:function(e,t){var i=this.leadingZeros(t);return{unit:{fixes:i+(t%Math.pow(10,i)==0?0:1),scale:t<1?t:1},step:t<1?1:t}},adjustByMajorUnit:function(e,t,i){var n,r,s=i[0],o=i[1],a=e*t;0!==(n=s*(r=1<(r=Math.max(1/(s||1),1/(a||1)))?r:1)%(a*r)/r)&&(i[0]=s-n+(s<0?-a:0)),0!==(n=o*(r=1<(r=Math.max(1/(o||1),1/(a||1)))?r:1)%(a*r)/r)&&(i[1]=o-n+(0<o?a:0))}}),Ext.define("Ext.chart.axis.segmenter.Time",{extend:Ext.chart.axis.segmenter.Segmenter,alias:"segmenter.time",config:{step:null},renderer:function(e,t){var i=Ext.Date;switch(t.majorTicks.unit){case"y":return i.format(e,"Y");case"mo":return i.format(e,"Y-m");case"d":return i.format(e,"Y-m-d")}return i.format(e,"Y-m-d\\nH:i:s")},from:function(e){return new Date(e)},diff:function(e,t,i){return isFinite(e)&&(e=new Date(e)),isFinite(t)&&(t=new Date(t)),Ext.Date.diff(e,t,i)},updateStep:function(){var e=this.getAxis();e&&!this.isConfiguring&&e.performLayout()},align:function(e,t,i){return"d"===i&&7<=t?((e=Ext.Date.align(e,"d",t)).setDate(e.getDate()-e.getDay()+1),e):Ext.Date.align(e,i,t)},add:function(e,t,i){return Ext.Date.add(new Date(e),i,t)},timeBuckets:[{unit:Ext.Date.YEAR,steps:[1,2,5,10,20,50,100,200,500]},{unit:Ext.Date.MONTH,steps:[1,3,6]},{unit:Ext.Date.DAY,steps:[1,7,14]},{unit:Ext.Date.HOUR,steps:[1,6,12]},{unit:Ext.Date.MINUTE,steps:[1,5,15,30]},{unit:Ext.Date.SECOND,steps:[1,5,15,30]},{unit:Ext.Date.MILLI,steps:[1,2,5,10,20,50,100,200,500]}],getTimeBucket:function(e,t){var i,n,r,s,o,a,l,c=this.timeBuckets;for(a=0;a<c.length;a++)if(i=c[a].unit,0<(n=this.diff(e,t,i))){for(r=c[a].steps,l=0;l<r.length&&!(n<=(s=r[l]));l++);o={unit:i,step:s};break}return o=o||{unit:Ext.Date.MILLI,step:1}},preferredStep:function(e,t){var i=this.getStep();return i||this.getTimeBucket(new Date(+e),new Date(+e+Math.ceil(t)))}}),Ext.define("Ext.chart.axis.layout.Layout",{mixins:{observable:Ext.mixin.Observable},config:{axis:null},constructor:function(e){this.mixins.observable.constructor.call(this,e)},processData:function(e){var t,i,n=this.getAxis(),r=n.getDirection(),s=n.boundSeries;if(e)e["coordinate"+r]();else for(t=0,i=s.length;t<i;t++)s[t]["coordinate"+r]()},calculateMajorTicks:function(e){var t=e.attr,i=t.max-t.min,n=i/Math.max(1,t.length)*(t.visibleMax-t.visibleMin),r=t.min+i*t.visibleMin,s=t.min+i*t.visibleMax,o=t.estStepSize*n,a=this.snapEnds(e,t.min,t.max,o);a&&(this.trimByRange(e,a,r,s),e.majorTicks=a)},calculateMinorTicks:function(e){this.snapMinorEnds&&(e.minorTicks=this.snapMinorEnds(e))},calculateLayout:function(e){var t=e.attr;if(0===t.length)return null;t.majorTicks&&(this.calculateMajorTicks(e),t.minorTicks&&this.calculateMinorTicks(e))},snapEnds:Ext.emptyFn,trimByRange:function(e,t,i,n){var r=e.segmenter,s=t.unit,o=r.diff(t.from,i,s),a=r.diff(t.from,n,s),l=Math.max(0,Math.ceil(o/t.step)),c=Math.min(t.steps,Math.floor(a/t.step));if(c<t.steps&&(t.to=r.add(t.from,c*t.step,s)),t.max>n&&(t.max=t.to),t.from<i)for(t.from=r.add(t.from,l*t.step,s);t.from<i;)l++,t.from=r.add(t.from,t.step,s);t.min<i&&(t.min=t.from),t.steps=c-l}}),Ext.define("Ext.chart.axis.layout.Discrete",{extend:Ext.chart.axis.layout.Layout,alias:"axisLayout.discrete",isDiscrete:!0,processData:function(){var e,t,i,n=this.getAxis(),r=n.boundSeries,s=n.getDirection();for(this.labels=[],this.labelMap={},e=0,t=r.length;e<t;e++)(i=r[e])["get"+s+"Axis"]()===n&&i["coordinate"+s]();n.getSprites()[0].setAttributes({data:this.labels}),this.fireEvent("datachange",this.labels)},calculateLayout:function(e){e.data=this.labels,this.callParent([e])},calculateMajorTicks:function(e){var t,i=e.attr,n=e.data,r=i.max-i.min,s=i.min+r*i.visibleMin,o=i.min+r*i.visibleMax;(t=this.snapEnds(e,Math.max(0,i.min),Math.min(i.max,n.length-1),1))&&(this.trimByRange(e,t,s,o),e.majorTicks=t)},snapEnds:function(e,t,i,n){var r,s=e.data;return n=Math.ceil(n),{min:t,max:i,from:t,to:(r=Math.floor((i-t)/n))*n+t,step:n,steps:r,unit:1,getLabel:function(e){return s[this.from+this.step*e]},get:function(e){return this.from+this.step*e}}},trimByRange:function(e,t,i,n){var r=t.unit,s=Math.ceil((i-t.from)/r)*r,o=Math.floor((n-t.from)/r)*r,a=Math.max(0,Math.ceil(s/t.step)),l=Math.min(t.steps,Math.floor(o/t.step));if(l<t.steps&&(t.to=l),t.max>n&&(t.max=t.to),t.from<i&&0<t.step)for(t.from=t.from+a*t.step*r;t.from<i;)a++,t.from+=t.step*r;t.min<i&&(t.min=t.from),t.steps=l-a},getCoordFor:function(e,t,i,n){return this.labels.push(e),this.labels.length-1}}),Ext.define("Ext.chart.axis.layout.CombineByIndex",{extend:Ext.chart.axis.layout.Discrete,alias:"axisLayout.combineByIndex",getCoordFor:function(e,t,i,n){var r=this.labels,s=i;return r[i]!==e&&(s=r.push(e)-1),s}}),Ext.define("Ext.chart.axis.layout.CombineDuplicate",{extend:Ext.chart.axis.layout.Discrete,alias:"axisLayout.combineDuplicate",getCoordFor:function(e,t,i,n){var r;return e in this.labelMap?this.labelMap[e]:(r=this.labelMap[e]=this.labels.length,this.labels.push(e),r)}}),Ext.define("Ext.chart.axis.layout.Continuous",{extend:Ext.chart.axis.layout.Layout,alias:"axisLayout.continuous",isContinuous:!0,config:{adjustMinimumByMajorUnit:!1,adjustMaximumByMajorUnit:!1},getCoordFor:function(e,t,i,n){return+e},snapEnds:function(e,t,i,n){var r,s=e.segmenter,o=this.getAxis(),a=!o.spriteAnimationCount,l=o.getMajorTickSteps(),c=l&&s.exactStep?s.exactStep(t,(i-t)/l):s.preferredStep(t,n),u=c.unit,d=c.step,h=s.diff(t,i,u),f=(l||h)+1;return r=l||a&&+s.add(t,h,u)===i?t:s.align(t,d,u),{min:s.from(t),max:s.from(i),from:r,to:s.add(r,f,u),step:d,steps:f,unit:u,get:function(e){return s.add(this.from,this.step*e,this.unit)}}},snapMinorEnds:function(e){var t=e.majorTicks,i=this.getAxis().getMinorTickSteps(),n=e.segmenter,r=t.min,s=t.max,o=t.from,a=t.unit,l=t.step/i,c=l*a.scale,u=o-r,d=Math.floor(u/c),h=d+Math.floor((s-t.to)/c)+1,f=t.steps*i+h;return{min:r,max:s,from:r+u%c,to:n.add(o,f*l,a),step:l,steps:f,unit:a,get:function(e){return e%i+d+1!==0?n.add(this.from,this.step*e,a):null}}}}),Ext.define("Ext.chart.axis.Axis",{xtype:"axis",mixins:{observable:Ext.mixin.Observable},isAxis:!0,config:{position:"bottom",fields:[],label:void 0,grid:!1,limits:null,renderer:null,chart:null,style:null,margin:0,titleMargin:4,background:null,minimum:NaN,maximum:NaN,reconcileRange:!1,minZoom:1,maxZoom:1e4,layout:"continuous",segmenter:"numeric",hidden:!1,majorTickSteps:0,minorTickSteps:0,adjustByMajorUnit:!0,title:null,expandRangeBy:0,length:0,center:null,radius:null,totalAngle:Math.PI,rotation:null,visibleRange:[0,1],needHighPrecision:!1,linkedTo:null,floating:null},titleOffset:0,spriteAnimationCount:0,boundSeries:[],sprites:null,surface:null,range:null,defaultRange:[0,1],rangePadding:.5,xValues:[],yValues:[],masterAxis:null,applyRotation:function(e){var t=2*Math.PI;return(e%t+Math.PI)%t-Math.PI},updateRotation:function(e){var t=this.getSprites(),i=this.getPosition();!this.getHidden()&&"angular"===i&&t[0]&&t[0].setAttributes({baseRotation:e})},applyTitle:function(e,t){var i;return Ext.isString(e)&&(e={text:e}),t?t.setAttributes(e):(t=Ext.create("sprite.text",e),(i=this.getSurface())&&i.add(t)),t},getAdjustByMajorUnit:function(){return!this.getHidden()&&this.callParent()},applyFloating:function(e,t){return null===e?e={value:null,alongAxis:null}:Ext.isNumber(e)&&(e={value:e,alongAxis:null}),Ext.isObject(e)?(t&&t.alongAxis&&delete this.getChart().getAxis(t.alongAxis).floatingAxes[this.getId()],e):t},constructor:function(e){var t;this.sprites=[],this.labels=[],this.floatingAxes={},"angular"===(e=e||{}).position&&(e.style=e.style||{},e.style.estStepSize=1),t="id"in e?e.id:"id"in this.config?this.config.id:this.getId(),this.setId(t),this.mixins.observable.constructor.apply(this,arguments)},getAlignment:function(){switch(this.getPosition()){case"left":case"right":return"vertical";case"top":case"bottom":return"horizontal";case"radial":return"radial";case"angular":return"angular"}},getGridAlignment:function(){switch(this.getPosition()){case"left":case"right":return"horizontal";case"top":case"bottom":return"vertical";case"radial":return"circular";case"angular":return"radial"}},getSurface:function(){var e,t=this.getChart();return t&&!this.surface&&(e=this.surface=t.getSurface(this.getId(),"axis"),(this.gridSurface=t.getSurface("main")).waitFor(e),this.getGrid(),this.createLimits()),this.surface},createLimits:function(){var e,t=this.getChart(),i=this.getSprites()[0],n=this.getGridAlignment();this.getLimits()&&n&&(n=n.replace("3d",""),this.limits=e={surface:t.getSurface("overlay"),lines:new Ext.chart.Markers,titles:new Ext.draw.sprite.Instancing},e.lines.setTemplate({xclass:"grid."+n}),e.lines.getTemplate().setAttributes({strokeStyle:"black"},!0),e.surface.add(e.lines),i.bindMarker(n+"-limit-lines",this.limits.lines),this.limitTitleTpl=new Ext.draw.sprite.Text,e.titles.setTemplate(this.limitTitleTpl),e.surface.add(e.titles))},applyGrid:function(e){return!0===e?{}:e},updateGrid:function(e){var t,i,n,r=this,s=r.getChart(),o=r.gridSurface;s?(t=r.getSprites()[0],i=r.getGridAlignment(),e&&((n=r.gridSpriteEven)||((n=r.gridSpriteEven=new Ext.chart.Markers).setTemplate({xclass:"grid."+i}),o.add(n),t.bindMarker(i+"-even",n)),Ext.isObject(e)&&(n.getTemplate().setAttributes(e),Ext.isObject(e.even)&&n.getTemplate().setAttributes(e.even)),(n=r.gridSpriteOdd)||((n=r.gridSpriteOdd=new Ext.chart.Markers).setTemplate({xclass:"grid."+i}),o.add(n),t.bindMarker(i+"-odd",n)),Ext.isObject(e)&&(n.getTemplate().setAttributes(e),Ext.isObject(e.odd)&&n.getTemplate().setAttributes(e.odd)))):r.on({chartattached:Ext.bind(r.updateGrid,r,[e]),single:!0})},updateMinorTickSteps:function(e){var t,i=this.getSprites(),n=i&&i[0];n&&(n.setAttributes({minorTicks:!!e}),t=this.getSurface(),!this.isConfiguring&&t&&t.renderFrame())},getCoordFor:function(e,t,i,n){return this.getLayout().getCoordFor(e,t,i,n)},applyPosition:function(e){return e.toLowerCase()},applyLength:function(e,t){return 0<e?e:t},applyLabel:function(e,t){return t=t||new Ext.draw.sprite.Text({}),e&&(this.limitTitleTpl&&this.limitTitleTpl.setAttributes(e),t.setAttributes(e)),t},applyLayout:function(e,t){return(e=Ext.factory(e,null,t,"axisLayout")).setAxis(this),e},applySegmenter:function(e,t){return(e=Ext.factory(e,null,t,"segmenter")).setAxis(this),e},updateMinimum:function(){this.range=null},updateMaximum:function(){this.range=null},hideLabels:function(){this.getSprites()[0].setDirty(!0),this.setLabel({hidden:!0})},showLabels:function(){this.getSprites()[0].setDirty(!0),this.setLabel({hidden:!1})},renderFrame:function(){this.getSurface().renderFrame()},updateChart:function(e,t){var i,n=this;t&&(t.unregister(n),t.un("serieschange",n.onSeriesChange,n),n.linkAxis(),n.fireEvent("chartdetached",t,n)),e&&(e.on("serieschange",n.onSeriesChange,n),n.surface=null,i=n.getSurface(),n.getLabel().setSurface(i),i.add(n.getSprites()),i.add(n.getTitle()),e.register(n),n.fireEvent("chartattached",e,n))},applyBackground:function(e){return Ext.ClassManager.getByAlias("sprite.rect").def.normalize(e)},processData:function(){this.getLayout().processData(),this.range=null},getDirection:function(){return this.getChart().getDirectionForAxis(this.getPosition())},isSide:function(){var e=this.getPosition();return"left"===e||"right"===e},applyFields:function(e){return Ext.Array.from(e)},applyVisibleRange:function(e,t){var i;if(this.getChart(),e[0]>e[1]&&(i=e[0],e[0]=e[1],e[0]=i),e[1]===e[0]&&(e[1]+=1/this.getMaxZoom()),e[1]>e[0]+1?(e[0]=0,e[1]=1):e[0]<0?(e[1]-=e[0],e[0]=0):1<e[1]&&(e[0]-=e[1]-1,e[1]=1),!t||e[0]!==t[0]||e[1]!==t[1])return e},updateVisibleRange:function(e){this.fireEvent("visiblerangechange",this,e)},onSeriesChange:function(e){var t,i,n,r,s,o=e.getSeries(),a=[];if(o)for(n="get"+this.getDirection()+"Axis",r=0,s=o.length;r<s;r++)this===o[r][n]()&&a.push(o[r]);this.boundSeries=a,t=this.getLinkedTo(),(i=!Ext.isEmpty(t)&&e.getAxis(t))?this.linkAxis(i):this.getLayout().processData()},linkAxis:function(e){var t=this;function i(e,t,i){i.getLayout()[e]("datachange","onDataChange",t),i[e]("rangechange","onMasterAxisRangeChange",t)}t.masterAxis&&(t.masterAxis.destroyed||i("un",t,t.masterAxis),t.masterAxis=null),e&&(e.type!==this.type&&Ext.Error.raise("Linked axes must be of the same type."),i("on",t,e),t.onDataChange(e.getLayout().labels),t.onMasterAxisRangeChange(e,e.range),t.setStyle(Ext.apply({},t.config.style,e.config.style)),t.setTitle(Ext.apply({},t.config.title,e.config.title)),t.setLabel(Ext.apply({},t.config.label,e.config.label)),t.masterAxis=e)},onDataChange:function(e){this.getLayout().labels=e},onMasterAxisRangeChange:function(e,t){this.range=t},applyRange:function(e){return e?[null===e[0]?this.dataRange[0]:e[0],null===e[1]?this.dataRange[1]:e[1]]:this.dataRange.slice(0)},setBoundSeriesRange:function(e){var t,i,n,r,s,o=this.boundSeries,a={};for(a["range"+this.getDirection()]=e,i=0,s=o.length;i<s;i++)if(!0!==(t=o[i]).getHidden())for(n=t.getSprites(),r=0;r<n.length;r++)n[r].setAttributes(a)},getRange:function(e){var t,i,n=this,r=e?null:n.range,s=n.oldRange;return r||(n.masterAxis?r=n.masterAxis.range:(t=n.getMinimum(),i=n.getMaximum(),r=Ext.isNumber(t)&&Ext.isNumber(i)?[t,i]:n.calculateRange(),n.range=r)),!r||s&&r[0]===s[0]&&r[1]===s[1]||(n.fireEvent("rangechange",n,r,s),n.oldRange=r),r},isSingleDataPoint:function(e){return e[0]+this.rangePadding===0&&e[1]-this.rangePadding==0},calculateRange:function(){var e,t,i,n,r,s,o,a=this,l=a.boundSeries,c=a.getLayout(),u=a.getSegmenter(),d=a.getMinimum(),h=a.getMaximum(),f=a.getVisibleRange(),g="get"+a.getDirection()+"Range",p=a.getExpandRangeBy(),m=[NaN,NaN];for(r=0,s=l.length;r<s;r++)!0!==(n=l[r]).getHidden()&&(o=n[g]())&&Ext.chart.Util.expandRange(m,o);return m=Ext.chart.Util.validateRange(m,a.defaultRange,a.rangePadding),p&&!a.isSingleDataPoint(m)&&(m[0]-=p,m[1]+=p),isFinite(d)&&(m[0]=d),isFinite(h)&&(m[1]=h),m[0]=Ext.Number.correctFloat(m[0]),m[1]=Ext.Number.correctFloat(m[1]),a.range=m,a.getReconcileRange()&&a.reconcileRange(),m[0]!==m[1]&&a.getAdjustByMajorUnit()&&u.adjustByMajorUnit&&!a.getMajorTickSteps()&&((t=Ext.Object.chain(a.getSprites()[0].attr)).min=m[0],t.max=m[1],t.visibleMin=f[0],t.visibleMax=f[1],e={attr:t,segmenter:u},c.calculateLayout(e),(i=e.majorTicks)?(u.adjustByMajorUnit(i.step,i.unit.scale,m),t.min=m[0],t.max=m[1],e.majorTicks=null,c.calculateLayout(e),i=e.majorTicks,u.adjustByMajorUnit(i.step,i.unit.scale,m)):a.hasClearRangePending||(a.hasClearRangePending=!0,a.getChart().on("layout","clearRange",a))),m},clearRange:function(){this.hasClearRangePending=null,this.range=null},reconcileRange:function(){var e,t,i,n,r=this.getChart().getAxes(),s=this.getDirection();if(r)for(e=0,t=r.length;e<t;e++)n=(i=r[e]).getRange(),i!==this&&i.getDirection()===s&&n&&i.getReconcileRange()&&(n[0]<this.range[0]&&(this.range[0]=n[0]),n[1]>this.range[1]&&(this.range[1]=n[1]))},applyStyle:function(e,t){var i=Ext.ClassManager.getByAlias("sprite."+this.seriesType);return i&&i.def&&(e=i.def.normalize(e)),t=Ext.apply(t||{},e)},themeOnlyIfConfigured:{grid:!0},updateTheme:function(e){var t,i,n,r,s,o,a=e.getAxis(),l=this.getPosition(),c=this.getInitialConfig(),u=this.defaultConfig,d=this.self.getConfigurator().configs,h=a.defaults,f=a[l],g=this.themeOnlyIfConfigured;for(t in a=Ext.merge({},h,f))if(i=a[t],o=d[t],null!=i&&o){if(s=c[t],n=Ext.isObject(i),r=s===u[t],n){if(r&&g[t])continue;i=Ext.merge({},i,s)}(r||n)&&this[o.names.set](i)}},updateCenter:function(e){var t=this.getSprites()[0],i=e[0],n=e[1];t&&t.setAttributes({centerX:i,centerY:n}),this.gridSpriteEven&&this.gridSpriteEven.getTemplate().setAttributes({translationX:i,translationY:n,rotationCenterX:i,rotationCenterY:n}),this.gridSpriteOdd&&this.gridSpriteOdd.getTemplate().setAttributes({translationX:i,translationY:n,rotationCenterX:i,rotationCenterY:n})},getSprites:function(){if(this.getChart()){var e,t,i,n=this,r=n.getRange(),s=n.getPosition(),o=n.getChart().getAnimation(),a=n.getLength(),l=n.superclass;if(!1===o&&(o={duration:0}),t=Ext.applyIf({position:s,axis:n,length:a,grid:n.getGrid(),hidden:n.getHidden(),titleOffset:n.titleOffset,layout:n.getLayout(),segmenter:n.getSegmenter(),totalAngle:n.getTotalAngle(),label:n.getLabel()},n.getStyle()),r&&(t.min=r[0],t.max=r[1]),n.sprites.length)(e=n.sprites[0]).setAnimation(o),e.setAttributes(t);else{for(;!l.xtype;)l=l.superclass;(i=(e=Ext.create("sprite."+l.xtype,t)).getAnimation()).setCustomDurations({baseRotation:0}),i.on("animationstart","onAnimationStart",n),i.on("animationend","onAnimationEnd",n),e.setLayout(n.getLayout()),e.setSegmenter(n.getSegmenter()),e.setLabel(n.getLabel()),n.sprites.push(e),n.updateTitleSprite()}return n.getRenderer()&&e.setRenderer(n.getRenderer()),n.sprites}},performLayout:function(){if(!this.isConfiguring){var e=this.getSprites(),t=this.getSurface(),i=this.getChart(),n=e&&e[0];i&&t&&n&&(n.callUpdater(null,"layout"),i.scheduleLayout())}},updateTitleSprite:function(){var e,t,i,n,r,s,o,a=this,l=a.getLength();if(a.sprites[0]&&Ext.isNumber(l)&&(t=this.sprites[0].thickness,e=a.getSurface(),i=a.getTitle(),n=a.getPosition(),r=a.getMargin(),s=a.getTitleMargin(),o=e.roundPixel(l/2),i))switch(n){case"top":i.setAttributes({x:o,y:r+s/2,textBaseline:"top",textAlign:"center"},!0),i.applyTransformations(),a.titleOffset=i.getBBox().height+s;break;case"bottom":i.setAttributes({x:o,y:t+s/2,textBaseline:"top",textAlign:"center"},!0),i.applyTransformations(),a.titleOffset=i.getBBox().height+s;break;case"left":i.setAttributes({x:r+s/2,y:o,textBaseline:"top",textAlign:"center",rotationCenterX:r+s/2,rotationCenterY:o,rotationRads:-Math.PI/2},!0),i.applyTransformations(),a.titleOffset=i.getBBox().width+s;break;case"right":i.setAttributes({x:t-r+s/2,y:o,textBaseline:"bottom",textAlign:"center",rotationCenterX:t+s/2,rotationCenterY:o,rotationRads:Math.PI/2},!0),i.applyTransformations(),a.titleOffset=i.getBBox().width+s}},onThicknessChanged:function(){this.getChart().onThicknessChanged()},getThickness:function(){return this.getHidden()?0:(this.sprites[0]&&this.sprites[0].thickness||1)+this.titleOffset+this.getMargin()},onAnimationStart:function(){this.spriteAnimationCount++,1===this.spriteAnimationCount&&this.fireEvent("animationstart",this)},onAnimationEnd:function(){this.spriteAnimationCount--,0===this.spriteAnimationCount&&this.fireEvent("animationend",this)},getItemId:function(){return this.getId()},getAncestorIds:function(){return[this.getChart().getId()]},isXType:function(e){return"axis"===e},resolveListenerScope:function(e){var t,i=Ext._namedScopes[e],n=this.getChart();return i?i.isThis?t=this:i.isController?t=n?n.resolveListenerScope(e,!1):this:i.isSelf&&((t=n?n.resolveListenerScope(e,!1):this)!==n||n.getInheritedConfig("defaultListenerScope")||(t=this)):t=n?n.resolveListenerScope(e,!1):e||this,t},destroy:function(){this.setChart(null),this.surface.destroy(),this.surface=null,this.callParent()}}),Ext.define("Ext.chart.legend.LegendBase",{extend:Ext.dataview.DataView,config:{itemTpl:['<span class="',Ext.baseCSSPrefix,"legend-item-marker {[ values.disabled ? Ext.baseCSSPrefix + 'legend-item-inactive' : '' ]}\\" style=\\"background:{mark};\\"></span>{name}"],inline:!0,scrollable:!1},constructor:function(e){var t,i;this.callParent([e]),t=this.getScrollable(),i=t.onDrag,t.onDrag=function(e){e.stopPropagation(),i.call(this,e)}},updateDocked:function(e,t){var i=this.el;switch(this.callParent([e,t]),e){case"top":case"bottom":i.addCls(this.horizontalCls),i.removeCls(this.verticalCls);break;case"left":case"right":i.addCls(this.verticalCls),i.removeCls(this.horizontalCls)}},onChildTap:function(e,t){this.callParent([e,t]),this.toggleItem(t.viewIndex)}}),Ext.define("Ext.chart.legend.Legend",{extend:Ext.chart.legend.LegendBase,alternateClassName:"Ext.chart.Legend",xtype:"legend",alias:"legend.dom",type:"dom",isLegend:!0,isDomLegend:!0,config:{rect:null,toggleable:!0},baseCls:Ext.baseCSSPrefix+"legend",horizontalCls:Ext.baseCSSPrefix+"legend-horizontal",verticalCls:Ext.baseCSSPrefix+"legend-vertical",toggleItem:function(e){var t,i,n,r,s,o=0,a=!0;if(this.getToggleable()&&(i=this.getStore())){for(n=i.getCount(),s=0;s<n;s++)(r=i.getAt(s)).get("disabled")&&o++;a=1<n-o,(r=i.getAt(e))&&((t=r.get("disabled"))||a)&&r.set("disabled",!t)}},onResize:function(e,t,i,n){var r=this.chart;this.isConfiguring||r&&r.scheduleLayout()}}),Ext.define("Ext.chart.legend.sprite.Item",{extend:Ext.draw.sprite.Composite,alias:"sprite.legenditem",type:"legenditem",isLegendItem:!0,inheritableStatics:{def:{processors:{enabled:"limited01",markerLabelGap:"number"},animationProcessors:{enabled:null,markerLabelGap:null},defaults:{enabled:!0,markerLabelGap:5},triggers:{enabled:"enabled",markerLabelGap:"layout"},updaters:{layout:"layoutUpdater",enabled:"enabledUpdater"}}},config:{label:{$value:{type:"text"},lazy:!0},marker:{$value:{type:"circle"},lazy:!0},legend:null,store:null,record:null,series:null},applyLabel:function(e,t){var i;return e&&(e.isSprite&&"text"===e.type?i=e:t&&e.type===t.type?(t.setConfig(e),i=t,this.scheduleUpdater(this.attr,"layout")):i=new Ext.draw.sprite.Text(e)),i},defaultMarkerSize:10,updateLabel:function(e,t){this.removeSprite(t),e.setAttributes({textBaseline:"middle"}),this.addSprite(e),this.scheduleUpdater(this.attr,"layout")},applyMarker:function(e){var t;return e&&(t=e.isSprite?e:this.createMarker(e)),t=this.resetMarker(t,e)},createMarker:function(e){return delete e.animation,"image"===e.type&&(delete e.width,delete e.height),Ext.create("sprite."+e.type,e)},resetMarker:function(e,t){var i,n,r=t.size||this.defaultMarkerSize;return e.setTransform([1,0,0,1,0,0],!0),"image"===t.type?e.setAttributes({width:r,height:r}):(i=e.getBBox(),n=r/Math.max(i.width,i.height),e.setAttributes({scalingX:n,scalingY:n})),e},updateMarker:function(e,t){this.removeSprite(t),this.addSprite(e),this.scheduleUpdater(this.attr,"layout")},updateSurface:function(e,t){this.callParent([e,t]),e&&this.scheduleUpdater(this.attr,"layout")},enabledUpdater:function(e){var t=this.getMarker();t&&t.setAttributes({globalAlpha:e.enabled?1:.3})},layoutUpdater:function(){var e,t,i,n=this.attr,r=this.getLabel(),s=this.getMarker();t=s.getBBox(),e=r.getBBox(),i=Math.max(t.height,e.height),s.transform([1,0,0,1,-t.x,-t.y+(i-t.height)/2],!0),r.transform([1,0,0,1,-e.x+t.width+n.markerLabelGap,-e.y+(i-e.height)/2],!0),this.bboxUpdater(n)}}),Ext.define("Ext.chart.legend.sprite.Border",{extend:Ext.draw.sprite.Rect,alias:"sprite.legendborder",type:"legendborder",isLegendBorder:!0}),Ext.define("Ext.draw.PathUtil",function(){var P=Math.abs,x=Math.pow,y=Math.cos,v=Math.acos,E=Math.sqrt,b=Math.PI;return{singleton:!0,cubicRoots:function(e){var t=e[0],i=e[1],n=e[2],r=e[3];if(0===t)return this.quadraticRoots(i,n,r);var s,o,a,l,c=i/t,u=n/t,d=r/t,h=(3*u-x(c,2))/9,f=(9*c*u-27*d-2*x(c,3))/54,g=x(h,3)+x(f,2),p=[],m=Ext.Number.sign;for(0<=g?(s=m(f+E(g))*x(P(f+E(g)),1/3),o=m(f-E(g))*x(P(f-E(g)),1/3),p[0]=-c/3+(s+o),p[1]=-c/3-(s+o)/2,p[2]=p[1],0!==P(E(3)*(s-o)/2)&&(p[1]=-1,p[2]=-1)):(a=v(f/E(-x(h,3))),p[0]=2*E(-h)*y(a/3)-c/3,p[1]=2*E(-h)*y((a+2*b)/3)-c/3,p[2]=2*E(-h)*y((a+4*b)/3)-c/3),l=0;l<3;l++)(p[l]<0||1<p[l])&&(p[l]=-1);return p},quadraticRoots:function(e,t,i){var n,r,s,o;if(0===e)return this.linearRoot(t,i);if(0==(n=t*t-4*e*i))s=[-t/(2*e)];else{if(!(0<n))return[];s=[(-t-(r=E(n)))/(2*e),(-t+r)/(2*e)]}for(o=0;o<s.length;o++)(s[o]<0||1<s[o])&&(s[o]=-1);return s},linearRoot:function(e,t){var i=-t/e;return 0===e||i<0||1<i?[]:[i]},bezierCoeffs:function(e,t,i,n){var r=[];return r[0]=3*t-e-3*i+n,r[1]=3*e-6*t+3*i,r[2]=-3*e+3*t,r[3]=e,r},cubicLineIntersections:function(e,t,i,n,r,s,o,a,l,c,u,d){var h,f,g,p,m,x,y,v,E=[],b=[],C=c-d,S=u-l,w=l*(d-c)-c*(u-l),T=this.bezierCoeffs(e,t,i,n),P=this.bezierCoeffs(r,s,o,a);for(E[0]=C*T[0]+S*P[0],E[1]=C*T[1]+S*P[1],E[2]=C*T[2]+S*P[2],E[3]=C*T[3]+S*P[3]+w,f=this.cubicRoots(E),h=0;h<f.length;h++)(p=f[h])<0||1<p||(x=(m=p*p)*p,y=T[0]*x+T[1]*m+T[2]*p+T[3],v=P[0]*x+P[1]*m+P[2]*p+P[3],(g=u-l!=0?(y-l)/(u-l):(v-c)/(d-c))<0||1<g||b.push([y,v]));return b},splitCubic:function(e,t,i,n,r){var s=r*r,o=r-1,a=o*o,l=r*s*n-3*s*o*i+3*r*a*t-o*a*e;return[[e,r*t-o*e,s*i-2*r*o*t+a*e,l],[l,s*n-2*r*o*i+a*t,r*n-o*i,n]]},cubicDimension:function(e,t,i,n){var r,s,o,a=3*(3*(t-i)-e+n),l=6*(e-2*t+i),c=-3*(e-t),u=Math.min(e,n),d=Math.max(e,n);if(0==a){if(0==l)return[u,d];0<(r=-c/l)&&r<1&&(s=this.interpolateCubic(e,t,i,n,r),u=Math.min(u,s),d=Math.max(d,s))}else 0<=(o=l*l-4*a*c)&&(0<(r=((o=E(o))-l)/2/a)&&r<1&&(s=this.interpolateCubic(e,t,i,n,r),u=Math.min(u,s),d=Math.max(d,s)),0<o&&0<(r-=o/a)&&r<1&&(s=this.interpolateCubic(e,t,i,n,r),u=Math.min(u,s),d=Math.max(d,s)));return[u,d]},interpolateCubic:function(e,t,i,n,r){var s;return 0===r?e:1===r?n:r*r*r*(n+(s=(1-r)/r)*(3*i+s*(3*t+s*e)))},cubicsIntersections:function(e,t,i,n,r,s,o,a,l,c,u,d,h,f,g,p){var m,x,y,v,E=this,b=E.cubicDimension(e,t,i,n),C=E.cubicDimension(r,s,o,a),S=E.cubicDimension(l,c,u,d),w=E.cubicDimension(h,f,g,p),T=[];return b[0]>S[1]||b[1]<S[0]||C[0]>w[1]||C[1]<w[0]?[]:P(r-s)<1&&P(o-a)<1&&P(e-n)<1&&P(t-i)<1&&P(h-f)<1&&P(g-p)<1&&P(l-d)<1&&P(c-u)<1?[[.5*(e+n),.5*(r+s)]]:(m=E.splitCubic(e,t,i,n,.5),x=E.splitCubic(r,s,o,a,.5),y=E.splitCubic(l,c,u,d,.5),v=E.splitCubic(h,f,g,p,.5),T.push.apply(T,E.cubicsIntersections.apply(E,m[0].concat(x[0],y[0],v[0]))),T.push.apply(T,E.cubicsIntersections.apply(E,m[0].concat(x[0],y[1],v[1]))),T.push.apply(T,E.cubicsIntersections.apply(E,m[1].concat(x[1],y[0],v[0]))),T.push.apply(T,E.cubicsIntersections.apply(E,m[1].concat(x[1],y[1],v[1]))),T)},linesIntersection:function(e,t,i,n,r,s,o,a){var l,c,u=(i-e)*(a-s)-(n-t)*(o-r);return 0==u?null:(c=((i-e)*(t-s)-(n-t)*(e-r))/u,0<=(l=((o-r)*(t-s)-(e-r)*(a-s))/u)&&l<=1&&0<=c&&c<=1?[e+l*(i-e),t+l*(n-t)]:null)},pointOnLine:function(e,t,i,n,r,s){var o,a;return P(i-e)<P(n-t)&&(a=e,e=t,t=a,a=i,i=n,n=a,a=r,r=s,s=a),!((o=(r-e)/(i-e))<0||1<o)&&P(t+o*(n-t)-s)<4},pointOnCubic:function(e,t,i,n,r,s,o,a,l,c){var u,d,h,f,g,p=this.bezierCoeffs(e,t,i,n),m=this.bezierCoeffs(r,s,o,a);for(p[3]-=l,m[3]-=c,h=this.cubicRoots(p),f=this.cubicRoots(m),u=0;u<h.length;u++)for(g=h[u],d=0;d<f.length;d++)if(0<=g&&g<=1&&P(g-f[d])<.05)return!0;return!1}}}),Ext.define("Ext.draw.overrides.hittest.All",{}),Ext.define("Ext.chart.legend.SpriteLegend",{alias:"legend.sprite",type:"sprite",isLegend:!0,isSpriteLegend:!0,mixins:[Ext.mixin.Observable],config:{docked:"bottom",store:null,chart:null,surface:null,size:{width:0,height:0},toggleable:!0,padding:10,label:{preciseMeasurement:!0},marker:{},border:{$value:{type:"legendborder"},lazy:!0},background:null,hidden:!1},sprites:null,spriteZIndexes:{background:0,border:1,item:2},dockedValues:{left:!0,right:!0,top:!0,bottom:!0},constructor:function(e){this.oldSize={width:0,height:0},this.getId(),this.mixins.observable.constructor.call(this,e)},applyStore:function(e){return e&&Ext.StoreManager.lookup(e)},updateStore:function(e,t){var i=this;t&&(t.un("datachanged",i.onDataChanged,i),t.un("update",i.onDataUpdate,i)),e&&(e.on("datachanged",i.onDataChanged,i),e.on("update",i.onDataUpdate,i),i.onDataChanged(e)),i.performLayout()},applyDocked:function(e){return e in this.dockedValues||Ext.raise("Invalid 'docked' config value."),e},updateDocked:function(e){this.isTop="top"===e,this.isConfiguring||this.layoutChart()},updateHidden:function(e){var t;this.getChart(),(t=this.getSurface())&&t.setHidden(e),this.isConfiguring||this.layoutChart()},layoutChart:function(){var e;this.isConfiguring||(e=this.getChart())&&e.scheduleLayout()},computeRect:function(e){var t,i,n,r,s;if(this.getHidden())return null;switch(t=[0,0,0,0],i=this.getDocked(),r=(n=this.getSize()).height,s=n.width,i){case"top":t[1]=e[1],t[2]=e[2],t[3]=r,e[1]+=r,e[3]-=r;break;case"bottom":e[3]-=r,t[1]=e[3],t[2]=e[2],t[3]=r;break;case"left":e[0]+=s,e[2]-=s,t[2]=s,t[3]=e[3];break;case"right":e[2]-=s,t[0]=e[2],t[2]=s,t[3]=e[3]}return t},applyBorder:function(e){var t;return e&&(t=e.isSprite?e:Ext.create("sprite."+e.type,e)),t&&(t.isLegendBorder=!0,t.setAttributes({zIndex:this.spriteZIndexes.border})),t},updateBorder:function(e,t){var i=this.getSurface();this.borderSprite=null,i&&(t&&i.remove(t),e&&(this.borderSprite=i.add(e)))},scheduleLayout:function(){this.scheduledLayoutId||(this.scheduledLayoutId=Ext.draw.Animator.schedule("performLayout",this))},cancelLayout:function(){Ext.draw.Animator.cancel(this.scheduledLayoutId),this.scheduledLayoutId=null},performLayout:function(){var e,t,i=this,n=i.getSize(),r=i.getPadding(),s=i.getSprites(),o=i.getSurface(),a=i.getBackground(),l=o.getRect(),c=i.getStore(),u=s&&s.length||0;if(!o||!l||!c)return!1;i.cancelLayout();var d,h,f,g,p,m,x,y,v,E,b,C,S,w,T=i.getDocked(),P=l[2],I=l[3],A=i.borderSprite,k=[];for(e=0;e<u;e++)C=(t=s[e]).getBBox(),k.push(C);switch(C&&(b=C.height),T){case"bottom":case"top":if(!P)return!1;f=0;do{for(f++,e=g=p=m=0;e<u;e++)(C=k[e]).width>p&&(p=C.width,p=Math.min(p,P-4*r)),(e+1)%f==0&&(m+=p,p=0,g++);e%f!=0&&(m+=p,g++),E=(y=m+(g-1)*r)+4*r}while(P<E);v=b*f+(f-1)*r;break;case"right":case"left":if(!I)return!1;f=2*u;do{for(f=(f>>1)+f%2,e=g=p=x=m=0;e<u;e++)C=k[e],g||(x+=C.height),C.width>p&&(p=C.width),(e+1)%f==0&&(m+=p,p=0,g++);e%f!=0&&(m+=p,g++),E=(y=m+(g-1)*r)+4*r,v=x+(f-1)*r}while(I<v)}for(d=(P-y)/2,h=(I-v)/2,e=p=w=S=0;e<u;e++)t=s[e],C=k[e],t.setAttributes({translationX:d+S,translationY:h+w}),C.width>p&&(p=C.width),(e+1)%f==0?(S+=p+r,p=w=0):w+=C.height+r;return A&&A.setAttributes({hidden:!u,x:d-r,y:h-r,width:y+2*r,height:v+2*r}),n.width=A.attr.width+2*r,n.height=A.attr.height+2*r,n.width!==i.oldSize.width||n.height!==i.oldSize.height?(Ext.apply(i.oldSize,n),i.getChart().scheduleLayout(),!1):(a&&i.resizeBackground(o,a),o.renderFrame(),!0)},getSprites:function(){return this.updateSprites(),this.sprites},createSprite:function(e,t){var i,n,r,s=t.data,o=this.getChart().get(s.series),a=o.getMarker(),l=null;return e&&((i=o.getMarkerStyleByIndex(s.index)).fillStyle=s.mark,i.hidden=!1,a&&a.type&&(i.type=a.type),Ext.apply(i,this.getMarker()),i.surface=e,n=this.getLabel(),r={type:"legenditem",zIndex:this.spriteZIndexes.item,text:s.name,enabled:!s.disabled,marker:i,label:n,series:s.series,record:t},l=e.add(r)),l},updateSprites:function(){var e,t,i,n,r,s,o,a,l=this,c=l.getChart(),u=l.getStore(),d=l.getSurface();if(c&&u&&d){for(l.sprites=s=l.sprites||[],r=(t=u.getData().items).length,n=0;n<r;n++)e=t[n],(i=s[n])?l.updateSprite(i,e):(i=l.createSprite(d,e),d.add(i),s.push(i));for(o=Ext.Array.splice(s,n,s.length),n=0,r=o.length;n<r;n++)(i=o[n]).destroy();(a=l.getBorder())&&(l.borderSprite=a),l.updateTheme(c.getTheme())}},updateSprite:function(e,t){var i,n=t.data,r=this.getChart().get(n.series);e&&(e.getLabel().setAttributes({text:n.name}),e.setAttributes({enabled:!n.disabled}),e.setConfig({series:n.series,record:t}),(i=r.getMarkerStyleByIndex(n.index)).fillStyle=n.mark,i.hidden=!1,Ext.apply(i,this.getMarker()),e.getMarker().setAttributes({fillStyle:i.fillStyle,strokeStyle:i.strokeStyle}),e.layoutUpdater(e.attr))},updateChart:function(e,t){t&&this.setSurface(null),e&&this.setSurface(e.getSurface("legend"))},updateSurface:function(e,t){t&&(t.el.un("click","onClick",this),t.removeAll(!0)),e&&(e.isLegendSurface=!0,e.el.on("click","onClick",this))},onClick:function(e){var t,i,n=this.getChart(),r=this.getSurface();n&&n.hasFirstLayout&&r&&(i=r.getEventXY(e),(t=r.hitTest(i))&&t.sprite&&this.toggleItem(t.sprite))},applyBackground:function(e,t){var i,n=this.getChart(),r=this.getSurface();return(i=n.refreshBackground(r,e,t))&&i.setAttributes({zIndex:this.spriteZIndexes.background}),i},resizeBackground:function(e,t){var i=t.attr.width,n=t.attr.height,r=e.getRect();!r||i===r[2]&&n===r[3]||t.setAttributes({width:r[2],height:r[3]})},themeableConfigs:{background:!0},updateTheme:function(e){var t,i,n,r,s,o,a,l,c,u,d,h=this.getSurface().getItems(),f=e.getLegend(),g=this.getLabel(),p=this.self.getConfigurator().configs,m=this.themeableConfigs,x=this.themeOnlyIfConfigured,y=this.getInitialConfig(),v=this.defaultConfig;for(u=0,d=h.length;u<d;u++)if((o=h[u]).isLegendItem){if(a=f.label){for(l in c=null,a)l in g||((c=c||{})[l]=a[l]);c&&o.getLabel().setAttributes(c)}}else if(o.isLegendBorder&&(a=f.border)){for(l in c={},a)l in o.config||(c[l]=a[l]);o.setAttributes(c)}for(l in t=f.background,i=p.background,f)if(l in m&&(t=f[l],i=p[l],null!=t&&i)){if(s=y[l],n=Ext.isObject(t),r=s===v[l],n){if(r&&x[l])continue;t=Ext.merge({},t,s)}(r||n)&&this[i.names.set](t)}},onDataChanged:function(e){this.updateSprites(),this.scheduleLayout()},onDataUpdate:function(e,t){for(var i,n,r=this.sprites,s=r.length,o=0;o<s;o++)if((i=r[o]).getRecord()===t){n=i;break}n&&(this.updateSprite(n,t),this.scheduleLayout())},toggleItem:function(e){var t,i,n,r,s,o=0,a=!0;if(this.getToggleable()&&e.isLegendItem&&(t=this.getStore())){for(n=t.getCount(),i=0;i<n;i++)(r=t.getAt(i)).get("disabled")&&o++;a=1<n-o,(r=e.getRecord())&&((s=r.get("disabled"))||a)&&(r.set("disabled",!s),e.setAttributes({enabled:s}))}},destroy:function(){this.destroying=!0,this.cancelLayout(),this.setChart(null),this.callParent()}}),Ext.define("Ext.chart.Caption",{mixins:[Ext.mixin.Observable,Ext.mixin.Bindable],isCaption:!0,config:{weight:0,text:"",align:"center",alignTo:"series",padding:0,hidden:!1,docked:"top",style:{fontSize:"14px",fontWeight:"bold",fontFamily:"Verdana, Aria, sans-serif"},chart:null,sprite:{type:"text",preciseMeasurement:!0,zIndex:10},debug:!1,rect:null},surfaceName:"caption",constructor:function(e){var t;t="id"in e?e.id:"id"in this.config?this.config.id:this.getId(),this.setId(t),this.mixins.observable.constructor.call(this,e),this.initBindable()},updateChart:function(){this.isConfiguring||this.setSprite({type:"text"})},applySprite:function(e){var t=this.getChart(),i=this.surface=t.getSurface(this.surfaceName);return this.rectSprite=i.add({type:"rect",fillStyle:"yellow",strokeStyle:"red"}),e&&i.add(e)},updateSprite:function(e,t){t&&t.destroy()},updateText:function(e){this.getSprite().setAttributes({text:e})},updateStyle:function(e){this.getSprite().setAttributes(e)},updateDebug:function(e){var t=this.getSprite();e&&!this.rectSprite&&(this.rectSprite=this.surface.add({type:"rect",fillStyle:"yellow",strokeStyle:"red"})),t&&t.setAttributes({debug:e?{bbox:!0}:null}),this.rectSprite&&this.rectSprite.setAttributes({hidden:!e}),this.isConfiguring||this.surface.renderFrame()},updateRect:function(e){this.rectSprite&&this.rectSprite.setAttributes({x:e[0],y:e[1],width:e[2],height:e[3]})},updateDocked:function(){var e=this.getChart();e&&!this.isConfiguring&&e.scheduleLayout()},computeRect:function(e,t){if(this.getHidden())return null;var i=[0,0,e[2],0],n=this.getDocked(),r=this.getPadding(),s=this.getSprite().getBBox().height+2*r;switch(n){case"top":i[1]=t.top,i[3]=s,e[1]+=s,e[3]-=s,t.top+=s;break;case"bottom":e[3]-=s,t.bottom-=s,i[1]=t.bottom,i[3]=s}this.setRect(i)},alignRect:function(e){var t=this.surface.getRect(),i=this.getRect();i[0]=e[0]-t[0],i[2]=e[2],this.setRect(i.slice())},performLayout:function(){var e,t,i=this.getRect(),n=i[0],r=i[1],s=i[2],o=i[3],a=this.getSprite(),l=a.attr.translationX,c=a.attr.translationY,u=a.getBBox();switch(this.getAlign()){case"left":e=n-u.x;break;case"right":e=n+s-(u.x+u.width);break;case"center":e=n+(s-u.width)/2-u.x}t=r+(o-u.height)/2-u.y,a.setAttributes({translationX:l+e,translationY:c+t})},destroy:function(){this.rectSprite&&this.rectSprite.destroy(),this.getSprite().destroy(),this.callParent()}}),Ext.define("Ext.chart.legend.store.Item",{extend:Ext.data.Model,fields:["id","name","mark","disabled","series","index"]}),Ext.define("Ext.chart.legend.store.Store",{extend:Ext.data.Store,model:"Ext.chart.legend.store.Item",isLegendStore:!0,config:{autoDestroy:!0}}),Ext.define("Ext.chart.AbstractChart",{extend:Ext.draw.Container,isChart:!0,defaultBindProperty:"store",config:{store:"ext-empty-store",theme:"default",captions:null,style:null,animation:!Ext.isIE8,series:[],axes:[],legend:null,colors:null,insetPadding:{top:10,left:10,right:10,bottom:10},background:null,interactions:[],mainRect:null,resizeHandler:null,highlightItem:null,surfaceZIndexes:{background:0,main:1,grid:2,series:3,axis:4,chart:5,caption:6,overlay:7,legend:8}},legendStore:null,animationSuspendCount:0,chartLayoutSuspendCount:0,chartLayoutCount:0,scheduledLayoutId:null,axisThicknessSuspendCount:0,isThicknessChanged:!1,constructor:function(e){var t=this;t.itemListeners={},t.surfaceMap={},t.chartComponents={},t.isInitializing=!0,t.suspendChartLayout(),t.animationSuspendCount++,t.callParent(arguments),t.isInitializing=!1,t.getSurface("main"),t.getSurface("chart").setFlipRtlText(t.getInherited().rtl),t.getSurface("overlay").waitFor(t.getSurface("series")),t.animationSuspendCount--,t.resumeChartLayout()},applyAnimation:function(e,t){return Ext.chart.Util.applyAnimation(e,t)},updateAnimation:function(){if(!this.isConfiguring){var e,t,i=this.getSeries(),n=i.length;for(this.isSettingSeriesAnimation=!0,e=0;e<n;e++)(t=i[e]).isUserAnimation&&!this.animationSuspendCount||t.setAnimation(t.getAnimation());this.isSettingSeriesAnimation=!1}},getAnimation:function(){return this.animationSuspendCount?{duration:0}:this.callParent()},suspendAnimation:function(){this.animationSuspendCount++,1===this.animationSuspendCount&&this.updateAnimation()},resumeAnimation:function(){this.animationSuspendCount--,0===this.animationSuspendCount&&this.updateAnimation()},applyInsetPadding:function(e,t){return Ext.isObject(e)?t?Ext.apply(t,e):e:Ext.util.Format.parseBox(e)},suspendChartLayout:function(){this.chartLayoutSuspendCount++,1===this.chartLayoutSuspendCount&&(this.scheduledLayoutId?(this.layoutInSuspension=!0,this.cancelChartLayout()):this.layoutInSuspension=!1)},resumeChartLayout:function(){this.chartLayoutSuspendCount--,0===this.chartLayoutSuspendCount&&this.layoutInSuspension&&this.scheduleLayout()},cancelChartLayout:function(){this.scheduledLayoutId&&(Ext.draw.Animator.cancel(this.scheduledLayoutId),this.scheduledLayoutId=null,this.checkLayoutEnd())},scheduleLayout:function(){this.allowSchedule()&&!this.scheduledLayoutId&&(this.scheduledLayoutId=Ext.draw.Animator.schedule("doScheduleLayout",this))},allowSchedule:function(){return!0},doScheduleLayout:function(){this.scheduledLayoutId=null,this.chartLayoutSuspendCount?this.layoutInSuspension=!0:this.performLayout()},suspendThicknessChanged:function(){this.axisThicknessSuspendCount++},resumeThicknessChanged:function(){0<this.axisThicknessSuspendCount&&(this.axisThicknessSuspendCount--,0===this.axisThicknessSuspendCount&&this.isThicknessChanged&&this.onThicknessChanged())},onThicknessChanged:function(){0===this.axisThicknessSuspendCount?(this.isThicknessChanged=!1,this.performLayout()):this.isThicknessChanged=!0},applySprites:function(e){var t=this.getSurface("chart");return e=Ext.Array.from(e),t.removeAll(!0),t.add(e),e},initItems:function(){var e,t,i,n=this.items;if(n&&!n.isMixedCollection)for(this.items=[],e=0,t=(n=Ext.Array.from(n)).length;e<t;e++)(i=n[e]).type?Ext.raise("To add custom sprites to the chart use the 'sprites' config."):this.items.push(i);this.callParent()},applyBackground:function(e,t){var i=this.getSurface("background");return this.refreshBackground(i,e,t)},refreshBackground:function(e,t,i){var n,r,s;return t&&(i&&(n=i.attr.width,r=i.attr.height,s=i.type===(t.type||"rect")),t.isSprite?i=t:"image"===t.type&&Ext.isString(t.src)?s?i.setAttributes({src:t.src}):(e.remove(i,!0),i=e.add(t)):s?i.setAttributes({fillStyle:t}):(e.remove(i,!0),i=e.add({type:"rect",fillStyle:t,animation:{customDurations:{x:0,y:0,width:0,height:0}}}))),n&&r&&i.setAttributes({width:n,height:r}),i.setAnimation(this.getAnimation()),i},defaultResizeHandler:function(e){return this.scheduleLayout(),!1},applyMainRect:function(e,t){return t?(this.getSeries(),this.getAxes(),e[0]===t[0]&&e[1]===t[1]&&e[2]===t[2]&&e[3]===t[3]?t:e):e},register:function(e){var t=this.chartComponents,i=e.getId();void 0===i&&Ext.raise("Chart component id is undefined. Please ensure the component has an id."),i in t&&Ext.raise('Registering duplicate chart component id "'+i+'"'),t[i]=e},unregister:function(e){delete this.chartComponents[e.getId()]},get:function(e){return this.chartComponents[e]},getAxis:function(e){return e instanceof Ext.chart.axis.Axis?e:Ext.isNumber(e)?this.getAxes()[e]:Ext.isString(e)?this.get(e):void 0},getSurface:function(e,t){var i,n=this.surfaceMap;return e=e||"main",t=t||e,i=this.callParent([e,t]),n[t]||(n[t]=[]),Ext.Array.indexOf(n[t],i)<0&&(n[i.type=t].push(i),i.on("destroy",this.forgetSurface,this)),i},forgetSurface:function(e){var t,i,n=this.surfaceMap;n&&!this.destroying&&0<=(i=(t=n[e.type])?Ext.Array.indexOf(t,e):-1)&&t.splice(i,1)},applyAxes:function(e,t){var i,n,r,s,o,a,l,c,u,d={left:"right",right:"left"},h=[];for(this.animationSuspendCount++,this.getStore(),t||((t=[]).map={}),o=t.map,h.map={},l=0,u=(e=Ext.Array.from(e,!0)).length;l<u;l++)(i=e[l])&&(i instanceof Ext.chart.axis.Axis?(n=o[i.getId()],i.setChart(this)):(r=(i=Ext.Object.chain(i)).linkedTo,s=i.id,Ext.isNumber(r)?i=Ext.merge({},e[r],i):Ext.isString(r)&&Ext.Array.each(e,function(e){if(e.id===i.linkedTo)return i=Ext.merge({},e,i),!1}),i.id=s,(i.chart=this).getInherited().rtl&&(i.position=d[i.position]||i.position),s=i.getId&&i.getId()||i.id,i=Ext.factory(i,null,n=o[s],"axis")),i&&(h.push(i),h.map[i.getId()]=i));for(l in this.axesChangeSeries={},o)if(!h.map[l]&&(n=o[l])&&!n.destroyed){for(c=0,u=n.boundSeries.length;c<u;c++)a=n.boundSeries[c],this.axesChangeSeries[a.getId()]=a;n.destroy()}return this.animationSuspendCount--,h},updateAxes:function(e){var t,i,n,r=this.axesChangeSeries;for(t in r)r[t].onAxesChange(this,!0);for(i=0,n=e.length;i<n;i++)e[i].onSeriesChange(this);this.isConfiguring||this.destroying||this.scheduleLayout()},circularCopyArray:function(e,t,i){var n,r=[],s=e&&e.length;if(s)for(n=0;n<i;n++)r.push(e[(t+n)%s]);return r},circularCopyObject:function(e,t,i){var n,r,s={};if(i)for(n in e)e.hasOwnProperty(n)&&(r=e[n],Ext.isArray(r)?s[n]=this.circularCopyArray(r,t,i):s[n]=r);return s},getColors:function(){var e=this.config.colors,t=this.getTheme();return Ext.isArray(e)&&0<e.length&&(e=this.applyColors(e)),e||t&&t.getColors()},applyColors:function(e){return e=Ext.Array.map(e,function(e){return Ext.isString(e)?e:e.toString()})},updateColors:function(e){var t,i,n,r,s=this.getTheme(),o=e||s&&s.getColors(),a=0,l=this.getSeries(),c=l&&l.length;if(o.length)for(t=0;t<c;t++)r=(i=l[t]).themeColorCount(),n=this.circularCopyArray(o,a,r),a+=r,i.updateChartColors(n);this.isConfiguring||this.refreshLegendStore()},applyTheme:function(e){return e&&e.isTheme?e:Ext.Factory.chartTheme(e)},updateGradients:function(e){Ext.isEmpty(e)||this.updateTheme(this.getTheme())},updateTheme:function(e,t){var i,n=this.getAxes(),r=this.getSeries(),s=this.getColors();if(r){for(this.updateChartTheme(e),i=0;i<n.length;i++)n[i].updateTheme(e);for(i=0;i<r.length;i++)r[i].setTheme(e);this.updateSpriteTheme(e),this.updateColors(s),this.redraw(),this.fireEvent("themechange",this,e,t)}},themeOnlyIfConfigured:{captions:!0},updateChartTheme:function(e){var t,i,n,r,s,o,a=e.getChart(),l=this.getInitialConfig(),c=this.defaultConfig,u=this.self.getConfigurator().configs,d=a.defaults,h=a[this.xtype],f=this.themeOnlyIfConfigured;for(t in a=Ext.merge({},d,h))if(i=a[t],o=u[t],null!=i&&o){if(s=l[t],n=Ext.isObject(i),r=s===c[t],n){if(r&&f[t])continue;i=Ext.merge({},i,s)}(r||n)&&this[o.names.set](i)}},updateSpriteTheme:function(e){var t,i,n,r,s,o,a,l,c;for(this.getSprites(),t=this.getSurface("chart").getItems(),i=e.getSprites(),l=0,c=t.length;l<c;l++)if(r=i[(n=t[l]).type]){for(s in o={},a="text"===n.type,r)s in n.config||a&&0===s.indexOf("font")&&n.config.font||(o[s]=r[s]);n.setAttributes(o)}},addSeries:function(e){var t=this.getSeries();t=t.concat(Ext.Array.from(e)),this.setSeries(t)},removeSeries:function(e){var t,i,n,r=this.getSeries(),s=[],o={};for(t=0,i=(e=Ext.Array.from(e)).length;t<i;t++)"string"!=typeof(n=e[t])&&(n=n.getId()),o[n]=!0;for(t=0,i=r.length;t<i;t++)o[r[t].getId()]||s.push(r[t]);this.setSeries(s)},applySeries:function(e,t){var i,n,r,s,o,a=[];for(this.animationSuspendCount++,this.getAxes(),i=t?t.map:(t=[]).map={},a.map={},r=0,s=(e=Ext.Array.from(e,!0)).length;r<s;r++)(o=e[r])&&(n=i[o.getId&&o.getId()||o.id],o instanceof Ext.chart.series.Series?(n&&n!==o&&n.destroy(),o.setChart(this)):Ext.isObject(o)&&(o=n?(n.setConfig(o),n):(Ext.isString(o)&&(o={type:o}),o.chart=this,Ext.create(o.xclass||"series."+o.type,o))),a.push(o),a.map[o.getId()]=o);for(r in i)a.map[i[r].id]||i[r].destroy();return this.animationSuspendCount--,a},updateSeries:function(e,t){var i=this;i.destroying||(i.animationSuspendCount++,i.fireEvent("serieschange",i,e,t),Ext.isEmpty(e)||i.updateTheme(i.getTheme()),i.refreshLegendStore(),i.isConfiguring||i.destroying||i.scheduleLayout(),i.animationSuspendCount--)},defaultLegendType:"sprite",applyLegend:function(e,t){var i,n=null;return!t||t.destroyed||t.destroying||(this.legendStoreListeners&&this.legendStoreListeners.destroy(),this.legendStore&&this.legendStore.destroy(),t.destroy()),e&&(n=Ext.isBoolean(e)?Ext.create("legend."+this.defaultLegendType,{docked:"bottom",chart:this}):(e.docked=e.docked||"bottom",e.chart=this,i="legend."+(e.type||this.defaultLegendType),Ext.create(i,e))),n},updateLegend:function(e){this.destroyLegendStore(),e&&(this.getItems(),e.setStore(this.refreshLegendStore())),this.isConfiguring||this.scheduleLayout()},captionApplier:function(e,t){var i;return!t||t.destroyed||t.destroying||t.destroy(),e&&(e.chart=this,i=new Ext.chart.Caption(e)),i},applyCaptions:function(e,t){var i,n,r,s,o={};for(r in e)!(i=e[r])||i.length||i.text&&i.text.length?"string"==typeof i&&(i={text:i},this.getInitialConfig().captions[r]=i):i=null,n=t&&t[r],(i=this.captionApplier(i,n))&&(s=!0,o[r]=i);return s&&o},updateCaptions:function(){this.isConfiguring||this.scheduleLayout()},getLegendStore:function(){var e=this.legendStore;return e||(e=this.legendStore=new Ext.chart.legend.store.Store({chart:this}),this.legendStoreListeners=e.on({scope:this,update:"onLegendStoreUpdate",destroyable:!0})),e},destroyLegendStore:function(){var e=this.legendStore;!e||e.destroyed||e.destroying||e.destroy(),this.legendStore=null},refreshLegendStore:function(){var e,t,i,n,r,s=this.getLegendStore();if(s){for(i=[],n=0,r=(t=this.getSeries()).length;n<r;n++)(e=t[n]).getShowInLegend()&&e.provideLegendInfo(i);s.setData(i)}return s},onLegendStoreUpdate:function(e,t){var i;t&&(i=this.getSeries().map[t.get("series")])&&(i.setHiddenByIndex(t.get("index"),t.get("disabled")),this.redraw())},applyInteractions:function(e,t){var i,n,r,s,o=[];for(e=Ext.Array.from(e,!0),t||((t=[]).map={}),i=t.map,o.map={},r=0,s=e.length;r<s;r++)(n=(n=e[r])&&Ext.factory(n,null,i[n.getId&&n.getId()||n.id],"interaction"))&&(n.setChart(this),o.push(n),o.map[n.getId()]=n);for(r in i)o.map[r]||i[r].destroy();return o},getInteraction:function(e){var t,i,n=this.getInteractions(),r=n&&n.length,s=null;if(r)for(i=0;i<r;++i)if((t=n[i]).type===e){s=t;break}return s},applyStore:function(e){return e&&Ext.StoreManager.lookup(e)},updateStore:function(e,t){t&&!t.destroyed&&(t.un({datachanged:"onDataChanged",update:"onDataChanged",scope:this,order:"after"}),t.autoDestroy&&t.destroy()),e&&e.on({datachanged:"onDataChanged",update:"onDataChanged",scope:this,order:"after"}),this.fireEvent("storechange",this,e,t),this.onDataChanged()},redraw:function(){this.fireEvent("redraw",this)},performLayout:function(){if(this.destroying||this.destroyed)return Ext.raise("Attempting to lay out a dead chart: "+this.getId()),!1;var e,t=this,i=t.getLegend(),n=t.getChartRect(!0),r=t.getBackground(),s=!0;return t.cancelChartLayout(),t.fireEvent("beforelayout",t),r&&(t.getSurface("background").setRect(n.slice()),r.setAttributes({width:n[2],height:n[3]})),i&&i.isSpriteLegend&&!i.isTop&&(e=i.computeRect(n)),t.layoutCaptions(n),i&&i.isSpriteLegend&&i.isTop&&(e=i.computeRect(n)),e&&(t.getSurface("legend").setRect(e),s=i.performLayout()),t.getSurface("chart").setRect(n),s&&(t.hasFirstLayout=!0),s},layoutCaptions:function(e){var t,i,n,r,s,o=this.getCaptions(),a={left:0,top:0,right:e[2],bottom:e[3]};if(o){for(i in n=[],o)n.push(o[i]);for(n.sort(function(e,t){return e.getWeight()-t.getWeight()}),r=0,s=n.length;r<s;r++)t=n[r],r||this.getSurface(t.surfaceName).setRect(e.slice()),t.computeRect(e,a);this.captionList=n}},checkLayoutEnd:function(){this.chartLayoutCount||this.scheduledLayoutId||this.onLayoutEnd()},onLayoutEnd:function(){this.fireEvent("layout",this)},getChartRect:function(e){var t;return e&&(this.chartRect=null),this.chartRect?this.chartRect:(t=this.bodyElement.getSize(),this.chartRect=[0,0,t.width,t.height])},getEventXY:function(e){return this.getSurface("series").getEventXY(e)},getItemForPoint:function(e,t){var i,n,r=this.getSeries(),s=this.getMainRect(),o=r.length,a=1/0,l=null;if(!(this.hasFirstLayout&&s&&0<=e&&e<=s[2]&&0<=t&&t<=s[3]))return null;for(i=o-1;0<=i;i--)if(n=r[i].getItemForPoint(e,t)){if(!n.distance){l=n;break}n.distance<a&&(a=n.distance,l=n)}return l},getItemsForPoint:function(e,t){for(var i,n=this.getSeries(),r=n.length,s=this.hasFirstLayout?r-1:-1,o=[];0<=s;s--)!(i=n[s].getItemForPoint(e,t))||"items"!==i.category&&"markers"!==i.category||o.push(i);return o},onDataChanged:function(){var e,t,i,n,r=this;r.isInitializing||(e=r.getMainRect(),t=r.getStore(),i=r.getSeries(),n=r.getAxes(),t&&n&&i&&(e?(r.processData(),r.redraw()):r.on({redraw:r.onDataChanged,scope:r,single:!0})))},recordCount:0,processData:function(){for(var e,t=this.getStore().getCount(),i=this.getSeries(),n=i.length,r=!1,s=0;s<n;s++)(e=i[s]).processData(),!r&&e.isStoreDependantColorCount&&(r=!0);r&&t>this.recordCount&&(this.updateColors(this.getColors()),this.recordCount=t),this.isConfiguring||this.refreshLegendStore()},bindStore:function(e){this.setStore(e)},applyHighlightItem:function(e,t){if(!(e===t||Ext.isObject(e)&&Ext.isObject(t)&&(e.sprite&&(e.sprite[0]||e.sprite))===(t.sprite&&(t.sprite[0]||t.sprite))&&e.index===t.index))return e},updateHighlightItem:function(e,t){var i,n;t&&(n=t.series.getHighlight())&&t.series.setAttributesForItem(t,{highlighted:!1}),e&&(i=e.series.getHighlight())&&e.series.setAttributesForItem(e,{highlighted:!0}),(n||i)&&this.fireEvent("itemhighlight",this,e,t)},destroyChart:function(){this.setInteractions(null),this.setAxes(null),this.setSeries(null),this.setLegend(null),this.setStore(null),this.cancelChartLayout()},getRefItems:function(e){var t,i,n=this.getSeries(),r=this.getAxes(),s=this.getInteractions(),o=this.getLegend(),a=[];for(t=0,i=n.length;t<i;t++)a.push(n[t]),n[t].getRefItems&&a.push.apply(a,n[t].getRefItems(e));for(t=0,i=r.length;t<i;t++)a.push(r[t]),r[t].getRefItems&&a.push.apply(a,r[t].getRefItems(e));for(t=0,i=s.length;t<i;t++)a.push(s[t]),s[t].getRefItems&&a.push.apply(a,s[t].getRefItems(e));return o&&a.push(o),a}}),Ext.define("Ext.chart.overrides.AbstractChart",{override:"Ext.chart.AbstractChart",zIndex:0,updateLegend:function(e,t){this.callParent([e,t]),e&&e.isDomLegend&&this.add(e)},onItemRemove:function(e,t,i){var n=this.surfaceMap,r=e.type,s=n&&n[r];this.callParent([e,t,i]),s&&(Ext.Array.remove(s,e),0===s.length&&delete n[r])},doDestroy:function(){this.destroyChart(),this.callParent()}}),Ext.define("Ext.chart.grid.HorizontalGrid",{extend:Ext.draw.sprite.Sprite,alias:"grid.horizontal",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number"},defaults:{x:0,y:0,width:1,height:1,strokeStyle:"#DDD"}}},render:function(e,t,i){var n=this.attr,r=e.roundPixel(n.y),s=.5*t.lineWidth;t.beginPath(),t.rect(i[0]-e.matrix.getDX(),r+s,+i[2],n.height),t.fill(),t.beginPath(),t.moveTo(i[0]-e.matrix.getDX(),r+s),t.lineTo(i[0]+i[2]-e.matrix.getDX(),r+s),t.stroke()}}),Ext.define("Ext.chart.grid.VerticalGrid",{extend:Ext.draw.sprite.Sprite,alias:"grid.vertical",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number"},defaults:{x:0,y:0,width:1,height:1,strokeStyle:"#DDD"}}},render:function(e,t,i){var n=this.attr,r=e.roundPixel(n.x),s=.5*t.lineWidth;t.beginPath(),t.rect(r-s,i[1]-e.matrix.getDY(),n.width,i[3]),t.fill(),t.beginPath(),t.moveTo(r-s,i[1]-e.matrix.getDY()),t.lineTo(r-s,i[1]+i[3]-e.matrix.getDY()),t.stroke()}}),Ext.define("Ext.chart.CartesianChart",{extend:Ext.chart.AbstractChart,alternateClassName:"Ext.chart.Chart",xtype:["cartesian","chart"],isCartesian:!0,config:{flipXY:!1,innerRect:[0,0,1,1],innerPadding:{top:0,left:0,right:0,bottom:0}},applyInnerPadding:function(e,t){return Ext.isObject(e)?t?Ext.apply(t,e):e:Ext.util.Format.parseBox(e)},getDirectionForAxis:function(e){var t=this.getFlipXY();return"left"===e||"right"===e?t?"X":"Y":t?"Y":"X"},performLayout:function(){var e=this;if(!1!==e.callParent()){e.chartLayoutCount++,e.suspendAnimation();var t,i,n,r,s,o,a,l,c,u,d,h,f,g,p,m,x=e.getSurface("chart").getRect(),y=x[0],v=x[1],E=x[2],b=x[3],C=e.captionList,S=e.getAxes(),w=e.getSeries(),T=e.getInsetPadding(),P=e.getInnerPadding(),I=Ext.apply({},T),A=e.getInherited().rtl,k=e.getFlipXY();if(!(E<=0||b<=0)){for(e.suspendThicknessChanged(),g=0;g<S.length;g++){switch(n=(t=S[g]).getSurface(),h=(d=t.getFloating())?d.value:null,r=t.getThickness(),t.getPosition()){case"top":n.setRect([y,v+I.top+1,E,r]);break;case"bottom":n.setRect([y,v+b-(I.bottom+r),E,r]);break;case"left":n.setRect([y+I.left,v,r,b]);break;case"right":n.setRect([y+E-(I.right+r),v,r,b])}null===h&&(I[t.getPosition()]+=r)}if(E-=I.left+I.right,b-=I.top+I.bottom,a=[y+I.left,v+I.top,E,b],I.left+=P.left,I.top+=P.top,I.right+=P.right,I.bottom+=P.bottom,l=E-P.left-P.right,c=b-P.top-P.bottom,e.setInnerRect([I.left,I.top,l,c]),!(l<=0||c<=0)){for(e.setMainRect(a),e.getSurface().setRect(a),g=0,p=e.surfaceMap.grid&&e.surfaceMap.grid.length;g<p;g++)(o=e.surfaceMap.grid[g]).setRect(a),o.matrix.set(1,0,0,1,P.left,P.top),o.matrix.inverse(o.inverseMatrix);for(g=0;g<S.length;g++){switch((t=S[g]).getRange(!0),u=(f=(n=t.getSurface()).matrix).elements,t.getPosition()){case"top":case"bottom":u[4]=I.left,t.setLength(l);break;case"left":case"right":u[5]=I.top,t.setLength(c)}t.updateTitleSprite(),f.inverse(n.inverseMatrix)}for(g=0,p=w.length;g<p;g++)(s=(i=w[g]).getSurface()).setRect(a),k?A?s.matrix.set(0,-1,-1,0,P.left+l,P.top+c):s.matrix.set(0,-1,1,0,P.left,P.top+c):s.matrix.set(1,0,0,-1,P.left,P.top+c),s.matrix.inverse(s.inverseMatrix),i.getOverlaySurface().setRect(a);if(C)for(g=0,p=C.length;g<p;g++)"series"===(m=C[g]).getAlignTo()&&m.alignRect(a),m.performLayout();e.afterChartLayout(),e.redraw(),e.resumeAnimation(),e.resumeThicknessChanged(),e.chartLayoutCount--,e.checkLayoutEnd()}}}},afterChartLayout:Ext.emptyFn,refloatAxes:function(){var e,t,i,n,r,s,o,a,l,c=this.getAxes(),u=c&&c.length||0,d=this.getChartRect(),h=this.getInsetPadding(),f=this.getInnerPadding(),g=d[2]-h.left-h.right,p=d[3]-h.top-h.bottom;for(l=0;l<u;l++)if(null!==(r=(n=(e=c[l]).getFloating())?n.value:null)){if(i=(t=e.getSurface()).getRect()){switch(i=i.slice(),(s=this.getAxis(n.alongAxis))?(a="horizontal"===s.getAlignment(),Ext.isString(r)&&(r=s.getCoordFor(r)),s.floatingAxes[e.getId()]=r,o=s.getSprites()[0].attr.matrix,a?(r=r*o.getXX()+o.getDX(),e.floatingAtCoord=r+f.left+f.right):(r=r*o.getYY()+o.getDY(),e.floatingAtCoord=r+f.top+f.bottom)):(a="horizontal"===e.getAlignment(),e.floatingAtCoord=a?r+f.top+f.bottom:r+f.left+f.right,r=t.roundPixel(.01*r*(a?p:g))),e.getPosition()){case"top":i[1]=h.top+f.top+r-i[3]+1;break;case"bottom":i[1]=h.top+f.top+(s?r:p-r);break;case"left":i[0]=h.left+f.left+r-i[2];break;case"right":i[0]=h.left+f.left+(s?r:g-r)-1}t.setRect(i)}}else e.floatingAtCoord=null},redraw:function(){var e,t,i,n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v,E=this.getSeries(),b=this.getAxes(),C=this.getMainRect(),S=this.getInnerPadding(),w=this.getFlipXY();if(C){for(e=C[2]-S.left-S.right,t=C[3]-S.top-S.bottom,a=0;a<E.length;a++)for(n=(d=(x=E[a]).getXAxis())?(g=d.getVisibleRange(),[(n=d.getRange())[0]+(n[1]-n[0])*g[0],n[0]+(n[1]-n[0])*g[1]]):x.getXRange(),r=(h=x.getYAxis())?(g=h.getVisibleRange(),[(r=h.getRange())[0]+(r[1]-r[0])*g[0],r[0]+(r[1]-r[0])*g[1]]):x.getYRange(),o={visibleMinX:n[0],visibleMaxX:n[1],visibleMinY:r[0],visibleMaxY:r[1],innerWidth:e,innerHeight:t,flipXY:w},l=0,c=(i=x.getSprites()).length;l<c;l++)(p=(y=i[l]).attr.zIndex)<1e3&&(p+=100*(a+1)+1e3,y.attr.zIndex=p,(v=y.getMarker("items"))&&((m=v.attr.zIndex)===Number.MAX_VALUE?v.attr.zIndex=p:m<1e3&&(v.attr.zIndex=p+m))),y.setAttributes(o,!0);for(a=0;a<b.length;a++)for(s=(u=b[a]).isSide(),i=u.getSprites(),f=u.getRange(),g=u.getVisibleRange(),o={dataMin:f[0],dataMax:f[1],visibleMin:g[0],visibleMax:g[1]},s?(o.length=t,o.startGap=S.bottom,o.endGap=S.top):(o.length=e,o.startGap=S.left,o.endGap=S.right),l=0,c=i.length;l<c;l++)i[l].setAttributes(o,!0);this.renderFrame(),this.callParent()}},renderFrame:function(){this.refloatAxes(),this.callParent()}}),Ext.define("Ext.chart.grid.CircularGrid",{extend:Ext.draw.sprite.Circle,alias:"grid.circular",inheritableStatics:{def:{defaults:{r:1,strokeStyle:"#DDD"}}}}),Ext.define("Ext.chart.grid.RadialGrid",{extend:Ext.draw.sprite.Path,alias:"grid.radial",inheritableStatics:{def:{processors:{startRadius:"number",endRadius:"number"},defaults:{startRadius:0,endRadius:1,scalingCenterX:0,scalingCenterY:0,strokeStyle:"#DDD"},triggers:{startRadius:"path,bbox",endRadius:"path,bbox"}}},render:function(){this.callParent(arguments)},updatePath:function(e,t){var i=t.startRadius,n=t.endRadius;e.moveTo(i,0),e.lineTo(n,0)}}),Ext.define("Ext.chart.PolarChart",{extend:Ext.chart.AbstractChart,xtype:"polar",isPolar:!0,config:{center:[0,0],radius:0,innerPadding:0},getDirectionForAxis:function(e){return"radial"===e?"Y":"X"},updateCenter:function(e){var t,i,n=this.getAxes(),r=this.getSeries();for(t=0,i=n.length;t<i;t++)n[t].setCenter(e);for(t=0,i=r.length;t<i;t++)r[t].setCenter(e)},applyInnerPadding:function(e,t){return Ext.isNumber(e)?e:t},updateInnerPadding:function(){this.isConfiguring||this.performLayout()},doSetSurfaceRect:function(e,t){var i=this.getMainRect();e.setRect(t),e.matrix.set(1,0,0,1,i[0]-t[0],i[1]-t[1]),e.inverseMatrix.set(1,0,0,1,t[0]-i[0],t[1]-i[1])},applyAxes:function(e,t){var i,n,r,s=Ext.Array.from(this.config.series)[0];if(s&&"radar"===s.type&&e&&e.length){for(i=0,n=e.length;i<n;i++)if("angular"===e[i].position){r=!0;break}r||e.push({type:"category",position:"angular",fields:s.xField||s.angleField,style:{estStepSize:1},grid:!0})}return this.callParent([e,t])},performLayout:function(){var e=this,t=!0;try{if(e.chartLayoutCount++,e.suspendAnimation(),!1===this.callParent())return void(t=!1);e.suspendThicknessChanged();var i,n,r,s,o,a,l,c,u,d,h,f,g=e.getSurface("chart").getRect(),p=e.getInsetPadding(),m=e.getInnerPadding(),x=Ext.apply({},p),y=Math.max(1,g[2]-g[0]-p.left-p.right),v=Math.max(1,g[3]-g[1]-p.top-p.bottom),E=[g[0]+p.left,g[1]+p.top,y+g[0],v+g[1]],b=e.getSeries(),C=y-2*m,S=v-2*m,w=[.5*(g[0]+C)+m,.5*(g[1]+S)+m],T=.5*Math.min(C,S),P=e.getAxes(),I=[],A=[],k=T-m,D=e.surfaceMap.grid,R=e.captionList;if(e.setMainRect(E),e.doSetSurfaceRect(e.getSurface(),E),D)for(i=0,n=D.length;i<n;i++)e.doSetSurfaceRect(D[i],g);for(i=0,n=P.length;i<n;i++)switch((u=P[i]).getPosition()){case"angular":I.push(u);break;case"radial":A.push(u)}for(i=0,n=I.length;i<n;i++){for(l in(s=(u=I[i]).getFloating())&&s.value,e.doSetSurfaceRect(u.getSurface(),g),d=u.getThickness(),x)x[l]+=d;for(l in y=g[2]-x.left-x.right,v=g[3]-x.top-x.bottom,r=.5*Math.min(y,v),0===i&&(k=r-m),u.setMinimum(0),u.setLength(r),u.getSprites(),h=.5*u.sprites[0].attr.lineWidth,x)x[l]+=h}for(i=0,n=A.length;i<n;i++)u=A[i],e.doSetSurfaceRect(u.getSurface(),g),u.setMinimum(0),u.setLength(k),u.getSprites();for(i=0,n=b.length;i<n;i++)"gauge"!==(c=b[i]).type||o?c.setRadius(k):o=c,e.doSetSurfaceRect(c.getSurface(),E);if(e.doSetSurfaceRect(e.getSurface("overlay"),g),o?(o.setRect(E),a=o.getRadius()-m,e.setRadius(a),e.setCenter(o.getCenter()),o.setRadius(a),P.length&&"gauge"===P[0].getPosition()&&(u=P[0],e.doSetSurfaceRect(u.getSurface(),g),u.setTotalAngle(o.getTotalAngle()),u.setLength(a))):(e.setRadius(T),e.setCenter(w)),R)for(i=0,n=R.length;i<n;i++)"series"===(f=R[i]).getAlignTo()&&f.alignRect(E),f.performLayout();e.redraw()}finally{e.resumeAnimation(),t&&e.resumeThicknessChanged(),e.chartLayoutCount--,e.checkLayoutEnd()}},refloatAxes:function(){var e,t,i,n,r,s,o,a=this.getAxes(),l=this.getMainRect();if(l)for(o=.5*Math.min(l[2],l[3]),n=0,r=a.length;n<r;n++)null!==(t=(e=(s=a[n]).getFloating())?e.value:null)&&(i=this.getAxis(e.alongAxis),"angular"===s.getPosition()?(t=i?i.getLength()*t/i.getRange()[1]:.01*t*o,s.sprites[0].setAttributes({length:t},!0)):(t=i?(Ext.isString(t)&&(t=i.getCoordFor(t)),t/(i.getRange()[1]+1)*Math.PI*2-1.5*Math.PI+s.getRotation()):Ext.draw.Draw.rad(t),s.sprites[0].setAttributes({baseRotation:t},!0)))},redraw:function(){var e,t,i=this.getAxes(),n=this.getSeries();for(e=0,t=i.length;e<t;e++)i[e].getSprites();for(e=0,t=n.length;e<t;e++)n[e].getSprites();this.renderFrame(),this.callParent()},renderFrame:function(){this.refloatAxes(),this.callParent()}}),Ext.define("Ext.chart.SpaceFillingChart",{extend:Ext.chart.AbstractChart,xtype:"spacefilling",config:{},performLayout:function(){var e=this;try{if(e.chartLayoutCount++,e.suspendAnimation(),!1===e.callParent())return;var t,i,n,r=e.getSurface("chart").getRect(),s=e.getInsetPadding(),o=r[2]-s.left-s.right,a=r[3]-s.top-s.bottom,l=[s.left,s.top,o,a],c=e.getSeries();for(e.getSurface().setRect(l),e.setMainRect(l),i=0,n=c.length;i<n;i++)(t=c[i]).getSurface().setRect(l),t.setRect&&t.setRect(l),t.getOverlaySurface().setRect(r);e.redraw()}finally{e.resumeAnimation(),e.chartLayoutCount--,e.checkLayoutEnd()}},redraw:function(){var e,t,i=this.getSeries();for(e=0,t=i.length;e<t;e++)i[e].getSprites();this.renderFrame(),this.callParent()}}),Ext.define("Ext.chart.axis.sprite.Axis3D",{extend:Ext.chart.axis.sprite.Axis,alias:"sprite.axis3d",type:"axis3d",inheritableStatics:{def:{processors:{depth:"number"},defaults:{depth:0},triggers:{depth:"layout"}}},config:{animation:{customDurations:{depth:0}}},layoutUpdater:function(){var e=this.getAxis().getChart();if(!e.isInitializing){var t=this.attr,i=this.getLayout(),n=i.isDiscrete?0:t.depth,r=e.getInherited().rtl,s=t.dataMin+(t.dataMax-t.dataMin)*t.visibleMin,o=t.dataMin+(t.dataMax-t.dataMin)*t.visibleMax,a={attr:t,segmenter:this.getSegmenter(),renderer:this.defaultRenderer};"left"===t.position||"right"===t.position?(t.translationX=0,t.translationY=o*(t.length-n)/(o-s)+n,t.scalingX=1,t.scalingY=(-t.length+n)/(o-s),t.scalingCenterY=0,t.scalingCenterX=0,this.applyTransformations(!0)):"top"!==t.position&&"bottom"!==t.position||(t.translationX=r?t.length+s*t.length/(o-s)+1:-s*t.length/(o-s),t.translationY=0,t.scalingX=(r?-1:1)*(t.length-n)/(o-s),t.scalingY=1,t.scalingCenterY=0,t.scalingCenterX=0,this.applyTransformations(!0)),i&&(i.calculateLayout(a),this.setLayoutContext(a))}},renderAxisLine:function(e,t,i,n){var r,s,o=this.attr,a=.5*o.lineWidth,l=this.getLayout().isDiscrete?0:o.depth,c=o.position;if(o.axisLine&&o.length)switch(c){case"left":r=e.roundPixel(n[2])-a,t.moveTo(r,-o.endGap+l),t.lineTo(r,o.length+o.startGap);break;case"right":t.moveTo(a,-o.endGap),t.lineTo(a,o.length+o.startGap);break;case"bottom":t.moveTo(-o.startGap,a),t.lineTo(o.length-l+o.endGap,a);break;case"top":r=e.roundPixel(n[3])-a,t.moveTo(-o.startGap,r),t.lineTo(o.length+o.endGap,r);break;case"angular":t.moveTo(o.centerX+o.length,o.centerY),t.arc(o.centerX,o.centerY,o.length,0,2*Math.PI,!0);break;case"gauge":s=this.getGaugeAngles(),t.moveTo(o.centerX+Math.cos(s.start)*o.length,o.centerY+Math.sin(s.start)*o.length),t.arc(o.centerX,o.centerY,o.length,s.start,s.end,!0)}}}),Ext.define("Ext.chart.axis.Axis3D",{extend:Ext.chart.axis.Axis,xtype:"axis3d",config:{depth:0},onSeriesChange:function(e){var i,n=this,r="depthchange",s="onSeriesDepthChange";function t(e){var t=n.boundSeries;for(i=0;i<t.length;i++)t[i][e](r,s,n)}t("un"),n.callParent(arguments),t("on")},onSeriesDepthChange:function(e,t){var i,n,r=t,s=this.boundSeries;if(t>this.getDepth())r=t;else for(i=0;i<s.length;i++)(n=s[i])!==e&&n.getDepth&&r<(t=n.getDepth())&&(r=t);this.setDepth(r)},updateDepth:function(e){var t=this.getSprites(),i={depth:e};t&&t.length&&t[0].setAttributes(i),this.gridSpriteEven&&this.gridSpriteOdd&&(this.gridSpriteEven.getTemplate().setAttributes(i),this.gridSpriteOdd.getTemplate().setAttributes(i))},getGridAlignment:function(){switch(this.getPosition()){case"left":case"right":return"horizontal3d";case"top":case"bottom":return"vertical3d"}}}),Ext.define("Ext.chart.axis.Category",{extend:Ext.chart.axis.Axis,alias:"axis.category",type:"category",isCategory:!0,config:{layout:"combineDuplicate",segmenter:"names"}}),Ext.define("Ext.chart.axis.Category3D",{extend:Ext.chart.axis.Axis3D,alias:"axis.category3d",type:"category3d",config:{layout:"combineDuplicate",segmenter:"names"}}),Ext.define("Ext.chart.axis.Numeric",{extend:Ext.chart.axis.Axis,type:"numeric",alias:["axis.numeric","axis.radial"],config:{layout:"continuous",segmenter:"numeric",aggregator:"double"}}),Ext.define("Ext.chart.axis.Numeric3D",{extend:Ext.chart.axis.Axis3D,alias:["axis.numeric3d"],type:"numeric3d",config:{layout:"continuous",segmenter:"numeric",aggregator:"double"}}),Ext.define("Ext.chart.axis.Time",{extend:Ext.chart.axis.Numeric,alias:"axis.time",type:"time",config:{dateFormat:null,fromDate:null,toDate:null,layout:"continuous",segmenter:"time",aggregator:"time"},updateDateFormat:function(i){var e=this.getRenderer();e&&!e.isDefault||((e=function(e,t){return Ext.Date.format(new Date(t),i)}).isDefault=!0,this.setRenderer(e),this.performLayout())},updateRenderer:function(e){var t=this.getDateFormat();e?this.performLayout():t&&this.updateDateFormat(t)},updateFromDate:function(e){this.setMinimum(+e)},updateToDate:function(e){this.setMaximum(+e)},getCoordFor:function(e){return Ext.isString(e)&&(e=new Date(e)),+e}}),Ext.define("Ext.chart.axis.Time3D",{extend:Ext.chart.axis.Numeric3D,alias:"axis.time3d",type:"time3d",config:{dateFormat:null,fromDate:null,toDate:null,layout:"continuous",segmenter:"time",aggregator:"time"},updateDateFormat:function(i){this.setRenderer(function(e,t){return Ext.Date.format(new Date(t),i)})},updateFromDate:function(e){this.setMinimum(+e)},updateToDate:function(e){this.setMaximum(+e)},getCoordFor:function(e){return Ext.isString(e)&&(e=new Date(e)),+e}}),Ext.define("Ext.chart.grid.HorizontalGrid3D",{extend:Ext.chart.grid.HorizontalGrid,alias:"grid.horizontal3d",inheritableStatics:{def:{processors:{depth:"number"},defaults:{depth:0}}},render:function(e,t,i){var n,r,s=this.attr,o=e.roundPixel(s.x),a=e.roundPixel(s.y),l=e.matrix.getDX(),c=.5*t.lineWidth,u=s.height,d=s.depth;a<=i[1]||(n=i[0]+d-l,r=a+c-d,t.beginPath(),t.rect(n,r,i[2],u),t.fill(),t.beginPath(),t.moveTo(n,r),t.lineTo(n+i[2],r),t.stroke(),n=i[0]+o-l,r=a+c,t.beginPath(),t.moveTo(n,r),t.lineTo(n+d,r-d),t.lineTo(n+d,r-d+u),t.lineTo(n,r+u),t.closePath(),t.fill(),t.beginPath(),t.moveTo(n,r),t.lineTo(n+d,r-d),t.stroke())}}),Ext.define("Ext.chart.grid.VerticalGrid3D",{extend:Ext.chart.grid.VerticalGrid,alias:"grid.vertical3d",inheritableStatics:{def:{processors:{depth:"number"},defaults:{depth:0}}},render:function(e,t,i){var n,r,s=this.attr,o=e.roundPixel(s.x),a=e.matrix.getDY(),l=.5*t.lineWidth,c=s.width,u=s.depth;o>=i[2]||(n=o-l+u,r=i[1]-u-a,t.beginPath(),t.rect(n,r,c,i[3]),t.fill(),t.beginPath(),t.moveTo(n,r),t.lineTo(n,r+i[3]),t.stroke(),n=o-l,r=i[3],t.beginPath(),t.moveTo(n,r),t.lineTo(n+u,r-u),t.lineTo(n+u+c,r-u),t.lineTo(n+c,r),t.closePath(),t.fill(),n=o-l,r=i[3],t.beginPath(),t.moveTo(n,r),t.lineTo(n+u,r-u),t.stroke())}}),Ext.define("Ext.chart.interactions.CrossZoom",{extend:Ext.chart.interactions.Abstract,type:"crosszoom",alias:"interaction.crosszoom",isCrossZoom:!0,config:{axes:!0,gestures:{dragstart:"onGestureStart",drag:"onGesture",dragend:"onGestureEnd",dblclick:"onDoubleTap"},undoButton:{}},stopAnimationBeforeSync:!1,zoomAnimationInProgress:!1,constructor:function(){this.callParent(arguments),this.zoomHistory=[]},applyAxes:function(e){var i={};return!0===e?{top:{},right:{},bottom:{},left:{}}:(Ext.isArray(e)?(i={},Ext.each(e,function(e){i[e]={}})):Ext.isObject(e)&&Ext.iterate(e,function(e,t){!0===t?i[e]={}:!1!==t&&(i[e]=t)}),i)},applyUndoButton:function(e,t){var i=this;if(t&&t.destroy(),e)return Ext.create("Ext.Button",Ext.apply({cls:[],text:"Undo Zoom",disabled:!0,handler:function(){i.undoZoom()}},e))},getSurface:function(){return this.getChart()&&this.getChart().getSurface("overlay")},setSeriesOpacity:function(e){var t=this.getChart()&&this.getChart().getSurface("series");t&&t.element.setStyle("opacity",e)},onGestureStart:function(e){var t=this,i=t.getChart(),n=t.getSurface(),r=i.getInnerRect(),s=i.getInnerPadding(),o=s.left,a=o+r[2],l=s.top,c=l+r[3],u=i.getEventXY(e),d=u[0],h=u[1];if(e.claimGesture(),!t.zoomAnimationInProgress)return o<d&&d<a&&l<h&&h<c?(t.gestureEvent="drag",t.lockEvents(t.gestureEvent),t.startX=d,t.startY=h,t.selectionRect=n.add({type:"rect",globalAlpha:.5,fillStyle:"rgba(80,80,140,0.5)",strokeStyle:"rgba(80,80,140,1)",lineWidth:2,x:d,y:h,width:0,height:0,zIndex:1e4}),t.setSeriesOpacity(.8),!1):void 0},onGesture:function(e){var t=this;if(!t.zoomAnimationInProgress&&t.getLocks()[t.gestureEvent]===t){var i=t.getChart(),n=t.getSurface(),r=i.getInnerRect(),s=i.getInnerPadding(),o=s.left,a=o+r[2],l=s.top,c=l+r[3],u=i.getEventXY(e),d=u[0],h=u[1];return d<o?d=o:a<d&&(d=a),h<l?h=l:c<h&&(h=c),t.selectionRect.setAttributes({width:d-t.startX,height:h-t.startY}),Math.abs(t.startX-d)<11||Math.abs(t.startY-h)<11?t.selectionRect.setAttributes({globalAlpha:.5}):t.selectionRect.setAttributes({globalAlpha:1}),n.renderFrame(),!1}},onGestureEnd:function(e){var t=this;if(!t.zoomAnimationInProgress&&t.getLocks()[t.gestureEvent]===t){var i=t.getChart(),n=t.getSurface(),r=i.getInnerRect(),s=i.getInnerPadding(),o=s.left,a=o+r[2],l=s.top,c=l+r[3],u=r[2],d=r[3],h=i.getEventXY(e),f=h[0],g=h[1];f<o?f=o:a<f&&(f=a),g<l?g=l:c<g&&(g=c),Math.abs(t.startX-f)<11||Math.abs(t.startY-g)<11?n.remove(t.selectionRect):(t.zoomBy([Math.min(t.startX,f)/u,1-Math.max(t.startY,g)/d,Math.max(t.startX,f)/u,1-Math.min(t.startY,g)/d]),t.selectionRect.setAttributes({x:Math.min(t.startX,f),y:Math.min(t.startY,g),width:Math.abs(t.startX-f),height:Math.abs(t.startY-g)}),t.selectionRect.setAnimation(i.getAnimation()||{duration:0}),t.selectionRect.setAttributes({globalAlpha:0,x:0,y:0,width:u,height:d}),t.zoomAnimationInProgress=!0,i.suspendThicknessChanged(),t.selectionRect.getAnimation().on("animationend",function(){i.resumeThicknessChanged(),n.remove(t.selectionRect),t.selectionRect=null,t.zoomAnimationInProgress=!1})),n.renderFrame(),t.sync(),t.unlockEvents(t.gestureEvent),t.setSeriesOpacity(1),t.zoomAnimationInProgress||(n.remove(t.selectionRect),t.selectionRect=null)}},zoomBy:function(e){var t,i,n,r,s,o,a,l=this.getAxes(),c=this.getChart(),u=c.getAxes(),d={};for(c.getInherited().rtl&&(n=1-(e=e.slice())[0],r=1-e[2],e[0]=Math.min(n,r),e[2]=Math.max(n,r)),a=0;a<u.length;a++)(t=l[(i=u[a]).getPosition()])&&!1!==t.allowZoom&&(s=i.isSide(),o=i.getVisibleRange(),d[i.getId()]=o.slice(0),s?i.setVisibleRange([(o[1]-o[0])*e[1]+o[0],(o[1]-o[0])*e[3]+o[0]]):i.setVisibleRange([(o[1]-o[0])*e[0]+o[0],(o[1]-o[0])*e[2]+o[0]]));this.zoomHistory.push(d),this.getUndoButton().setDisabled(!1)},undoZoom:function(){var e,t,i=this.zoomHistory.pop(),n=this.getChart().getAxes();if(i)for(t=0;t<n.length;t++)i[(e=n[t]).getId()]&&e.setVisibleRange(i[e.getId()]);this.getUndoButton().setDisabled(0===this.zoomHistory.length),this.sync()},onDoubleTap:function(e){this.undoZoom()},destroy:function(){this.setUndoButton(null),this.callParent()}}),Ext.define("Ext.chart.interactions.Crosshair",{extend:Ext.chart.interactions.Abstract,type:"crosshair",alias:"interaction.crosshair",config:{axes:{top:{label:{},rect:{}},right:{label:{},rect:{}},bottom:{label:{},rect:{}},left:{label:{},rect:{}}},lines:{horizontal:{strokeStyle:"black",lineDash:[5,5]},vertical:{strokeStyle:"black",lineDash:[5,5]}},gesture:"drag"},applyAxes:function(e,t){return Ext.merge(t||{},e)},applyLines:function(e,t){return Ext.merge(t||{},e)},updateChart:function(e){e&&!e.isCartesian&&Ext.raise("Crosshair interaction can only be used on cartesian charts."),this.callParent(arguments)},getGestures:function(){var e={},t=this.getGesture();return e[t]="onGesture",e[t+"start"]="onGestureStart",e[t+"end"]="onGestureEnd",e[t+"cancel"]="onGestureCancel",e},onGestureStart:function(e){var t,i,n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v,E,b,C=this,S=C.getChart(),w=S.getTheme().getAxis(),T=S.getSurface("overlay"),P=S.getInnerRect(),I=P[2],A=P[3],k=S.getEventXY(e),D=k[0],R=k[1],M=S.getAxes(),F=C.getAxes(),L=C.getLines();if(e.claimGesture(),0<D&&D<I&&0<R&&R<A){for(C.lockEvents(C.getGesture()),v=Ext.apply({xclass:"Ext.chart.grid.HorizontalGrid",x:0,y:R,width:I},L.horizontal),E=Ext.apply({xclass:"Ext.chart.grid.VerticalGrid",x:D,y:0,height:A},L.vertical),C.axesLabels=C.axesLabels||{},b=0;b<M.length;b++)r=(n=(i=M[b]).getSurface()).getRect(),f=i.getSprites()[0],s=r[2],o=r[3],a=i.getPosition(),l=i.getAlignment(),y=(x=i.getTitle())&&""!==x.attr.text&&x.getBBox(),m=(p=(g=f.attr).axisLine?g.lineWidth:0)/2,h=Math.max(g.majorTickSize,g.minorTickSize)+p,(c=C.axesLabels[a]=n.add({type:"composite"})).labelRect=c.addSprite(Ext.apply({type:"rect",fillStyle:"white",x:"right"===a?p:0,y:"bottom"===a?p:0,width:s-p-("vertical"===l&&y?y.width:0),height:o-p-("horizontal"===l&&y?y.height:0),translationX:"left"===a&&y?y.width:0,translationY:"top"===a&&y?y.height:0},F.rect||F[a].rect)),"vertical"!==l||E.strokeStyle||(E.strokeStyle=g.strokeStyle),"horizontal"!==l||v.strokeStyle||(v.strokeStyle=g.strokeStyle),t=Ext.merge({},w.defaults,w[a]),u=Ext.apply({},i.config.label,t.label),d=F.label||F[a].label,c.labelText=c.addSprite(Ext.apply(u,d,{type:"text",x:C.calculateLabelTextPoint(!1,a,h,y,s,m),y:C.calculateLabelTextPoint(!0,a,h,y,o,m)}));return C.horizontalLine=T.add(v),C.verticalLine=T.add(E),!1}},onGesture:function(e){if(this.getLocks()[this.getGesture()]===this){var t,i,n,r,s,o,a,l,c,u,d,h,f,g,p,m,x,y,v,E=this.getChart(),b=E.getSurface("overlay"),C=Ext.Array.slice(E.getInnerRect()),S=E.getInnerPadding(),w=S.left,T=S.top,P=C[2],I=C[3],A=E.getEventXY(e),k=A[0],D=A[1],R=E.getAxes();for(k<0?k=0:P<k&&(k=P),D<0?D=0:I<D&&(D=I),k+=w,D+=T,v=0;v<R.length;v++)i=(t=R[v]).getPosition(),n=t.getAlignment(),r=t.getSurface(),o=(s=t.getSprites()[0]).attr.matrix,d=2*s.attr.textPadding,c=this.axesLabels[i],a=s.getLayoutContext(),l=t.getSegmenter(),c&&("vertical"===n?(f=o.getYY(),x=(D-(p=o.getDY())-T)/f,x=t.getLayout()instanceof Ext.chart.axis.layout.Discrete?(D=Math.round(x)*f+p+T,x=l.from(Math.round(x)),s.attr.data[x]):l.from(x),y=l.renderer(x,a),c.setAttributes({translationY:D-T}),c.labelText.setAttributes({text:y}),u=c.labelText.getBBox(),c.labelRect.setAttributes({height:u.height+d,y:-(u.height+d)/2})):(h=o.getXX(),m=(k-(g=o.getDX())-w)/h,m=t.getLayout()instanceof Ext.chart.axis.layout.Discrete?(k=Math.round(m)*h+g+w,m=l.from(Math.round(m)),s.attr.data[m]):l.from(m),y=l.renderer(m,a),c.setAttributes({translationX:k-w}),c.labelText.setAttributes({text:y}),u=c.labelText.getBBox(),c.labelRect.setAttributes({width:u.width+d,x:-(u.width+d)/2})),r.renderFrame());return this.horizontalLine.setAttributes({y:D,strokeStyle:s.attr.strokeStyle}),this.verticalLine.setAttributes({x:k,strokeStyle:s.attr.strokeStyle}),b.renderFrame(),!1}},onGestureEnd:function(e){var t,i,n,r,s,o=this.getChart(),a=o.getSurface("overlay"),l=o.getAxes();for(a.remove(this.verticalLine),a.remove(this.horizontalLine),s=0;s<l.length;s++)i=(t=l[s]).getPosition(),n=t.getSurface(),(r=this.axesLabels[i])&&(delete this.axesLabels[i],n.remove(r)),n.renderFrame();a.renderFrame(),this.unlockEvents(this.getGesture())},onGestureCancel:function(e){this.onGestureEnd(e)},privates:{vertMap:{top:"start",bottom:"end"},horzMap:{left:"start",right:"end"},calculateLabelTextPoint:function(e,t,i,n,r,s){var o,a,l;switch(t=e?(l="y",a="height",this.vertMap[t]):(l="x",a="width",this.horzMap[t])){case"start":return(o=n?n[l]+n[a]:0)+(r-o-i)/2-s;case"end":return i+(r-i-(o=n?r-n[l]:0))/2+s;default:return 0}}}}),Ext.define("Ext.chart.interactions.ItemHighlight",{extend:Ext.chart.interactions.Abstract,type:"itemhighlight",alias:"interaction.itemhighlight",isItemHighlight:!0,config:{gestures:{tap:"onTapGesture",mousemove:"onMouseMoveGesture",mousedown:"onMouseDownGesture",mouseup:"onMouseUpGesture",mouseleave:"onMouseUpGesture"},sticky:!1,multiTooltips:!1},constructor:function(e){this.callParent([e]),this.stickyHighlightItem=null,this.tooltipItems=[]},destroy:function(){this.stickyHighlightItem=this.tooltipItems=null,this.callParent()},onMouseMoveGesture:function(e){var t,i,n,r,s,o,a,l,c,u=this,d=u.tooltipItems,h="mouse"===e.pointerType,f=[];if(u.getSticky())return!0;if(h&&u.stickyHighlightItem&&(u.stickyHighlightItem=null,u.highlight(null)),u.isDragging)d.length&&h&&(u.hideTooltips(d),d.length=0);else if(!u.stickyHighlightItem){for(o=0,a=(n=u.getMultiTooltips()?u.getItemsForEvent(e):(t=u.getItemForEvent(e))?[t]:[]).length;o<a;o++)t=n[o],0===o&&t!==u.getChart().getHighlightItem()&&(u.highlight(t),u.sync()),(r=t.series.getTooltip())&&f.push(r);if(h)if(n.length){for(o=0,a=n.length;o<a;o++)if(r=(t=n[o]).series.getTooltip()){for(l=0,c=d.length;l<c;l++)i=d[l],Ext.Array.contains(n,i)||(s=i.series.getTooltip(),Ext.Array.contains(f,s)||i.series.hideTooltip(i,!0));r.getTrackMouse()?t.series.showTooltip(t,e):u.showUntracked(t)}u.tooltipItems=n}else u.hideTooltips(d),d.length=0;return!1}},highlight:function(e){this.getChart().setHighlightItem(e)},showTooltip:function(e,t){t.series.showTooltip(t,e),Ext.Array.include(this.tooltipItems,t)},showUntracked:function(e){var t,i,n,r,s=e.sprite.getMarker(e.category);s&&(n=(t=s.getSurface()).matrix.elements[3]<0,i=t.element.getXY(),r=Ext.clone(s.getBBoxFor(e.index)),n&&(r=(t.getInherited().rtl?t.inverseMatrix.clone().flipX().translate(e.sprite.attr.innerWidth,0,!0):t.inverseMatrix).transformBBox(r)),r.x+=i[0],r.y+=i[1],e.series.showTooltipAt(e,r.x+.5*r.width,r.y+.5*r.height))},onMouseDownGesture:function(){this.isDragging=!0},onMouseUpGesture:function(){this.isDragging=!1},isSameItem:function(e,t){return e&&t&&e.series===t.series&&e.field===t.field&&e.index===t.index},onTapGesture:function(e){var t;"mouse"===e.pointerType&&!this.getSticky()||(t=this.getItemForEvent(e),this.isSameItem(this.stickyHighlightItem,t)&&(t=null),this.stickyHighlightItem=t,this.highlight(t))},privates:{hideTooltips:function(e,t){var i,n,r;for(n=0,r=(e=Ext.isArray(e)?e:[e]).length;n<r;n++)(i=e[n])&&i.series&&!i.series.destroyed&&i.series.hideTooltip(i,t)}}}),Ext.define("Ext.chart.interactions.ItemEdit",{extend:Ext.chart.interactions.ItemHighlight,type:"itemedit",alias:"interaction.itemedit",isItemEdit:!0,config:{style:null,renderer:null,tooltip:!0,gestures:{dragstart:"onDragStart",drag:"onDrag",dragend:"onDragEnd"},cursors:{ewResize:"ew-resize",nsResize:"ns-resize",move:"move"}},item:null,applyTooltip:function(e){var t;return e&&(t=Ext.apply({},e,{renderer:this.defaultTooltipRenderer,constrainPosition:!0,shrinkWrapDock:!0,autoHide:!0,trackMouse:!0,mouseOffset:[20,20]}),e=new Ext.tip.ToolTip(t)),e},defaultTooltipRenderer:function(e,t,i,n){var r=[];i.xField&&r.push(i.xField+": "+i.xValue),i.yField&&r.push(i.yField+": "+i.yValue),e.setHtml(r.join("<br>"))},onDragStart:function(e){var t=this.getChart(),i=t.getHighlightItem();if(e.claimGesture(),i)return t.fireEvent("beginitemedit",t,this,this.item=i),!1},onDrag:function(e){var t=this.getChart().getHighlightItem(),i=t&&t.sprite.type;if(t)switch(i){case"barSeries":return this.onDragBar(e);case"scatterSeries":return this.onDragScatter(e)}},highlight:function(e){var t=this.getChart(),i=t.getFlipXY(),n=this.getCursors(),r=e&&e.sprite.type,s=t.el.dom.style;if(this.callParent([e]),e)switch(r){case"barSeries":s.cursor=i?n.ewResize:n.nsResize;break;case"scatterSeries":s.cursor=n.move}else t.el.dom.style.cursor="default"},onDragBar:function(e){var t,i,n,r,s=this.getChart(),o=s.getInherited().rtl,a=s.isCartesian&&s.getFlipXY(),l=s.getHighlightItem(),c=l.sprite.getMarker("items").getMarkerFor(l.sprite.getId(),l.index),u=l.sprite.getSurface(),d=u.getRect(),h=u.getEventXY(e),f=l.sprite.attr.matrix,g=this.getRenderer();r=a?o?d[2]-h[0]:h[0]:d[3]-h[1],t={x:c.x,y:r,width:c.width,height:c.height+(c.y-r),radius:c.radius,fillStyle:"none",lineDash:[4,4],zIndex:100},Ext.apply(t,this.getStyle()),Ext.isArray(l.series.getYField())&&(r=r-c.y-c.height),this.target={index:l.index,yField:l.field,yValue:(r-f.getDY())/f.getYY()},n=[s,{target:this.target,style:t,item:l}],(i=Ext.callback(g,null,n,0,s))&&Ext.apply(t,i),l.sprite.putMarker("items",t,"itemedit"),this.showTooltip(e,this.target,l),u.renderFrame()},onDragScatter:function(e){var t,i,n,r,s,o,a,l=this.getChart(),c=l.getInherited().rtl,u=l.isCartesian&&l.getFlipXY(),d=l.getHighlightItem(),h=d.sprite.getMarker("markers").getMarkerFor(d.sprite.getId(),d.index),f=d.sprite.getSurface(),g=f.getRect(),p=f.getEventXY(e),m=d.sprite.attr.matrix,x=d.series.getXAxis(),y=x&&x.getLayout().isContinuous,v=this.getRenderer();s=u?c?g[2]-p[0]:p[0]:g[3]-p[1],r=y?u?g[3]-p[1]:p[0]:h.translationX,a=y?(o=p[0],p[1]):u?(o=p[0],h.translationY):(o=h.translationX,p[1]),t={translationX:o,translationY:a,scalingX:h.scalingX,scalingY:h.scalingY,r:h.r,fillStyle:"none",lineDash:[4,4],zIndex:100},Ext.apply(t,this.getStyle()),this.target={index:d.index,yField:d.field,yValue:(s-m.getDY())/m.getYY()},y&&Ext.apply(this.target,{xField:d.series.getXField(),xValue:(r-m.getDX())/m.getXX()}),n=[l,{target:this.target,style:t,item:d}],(i=Ext.callback(v,null,n,0,l))&&Ext.apply(t,i),d.sprite.putMarker("markers",t,"itemedit"),this.showTooltip(e,this.target,d),f.renderFrame()},showTooltip:function(e,t,i){var n,r,s=this.getTooltip();s&&"modern"!==Ext.toolkit&&(n=s.config,r=this.getChart(),Ext.callback(n.renderer,null,[s,i,t,e],0,r),s.pointerEvent=e,s.isVisible()?s.realignToTarget():s.show())},hideTooltip:function(){var e=this.getTooltip();e&&"modern"!==Ext.toolkit&&e.hide()},onDragEnd:function(e){var t,i=this,n=i.target,r=i.getChart(),s=r.getStore();n&&(t=s.getAt(n.index),n.yField&&t.set(n.yField,n.yValue,{convert:!1}),n.xField&&t.set(n.xField,n.xValue,{convert:!1}),(n.yField||n.xField)&&i.getChart().onDataChanged(),i.target=null),i.hideTooltip(),i.item&&r.fireEvent("enditemedit",r,i,i.item,n),i.highlight(i.item=null)},destroy:function(){var e=this.getConfig("tooltip",!0);Ext.destroy(e),this.callParent()}}),Ext.define("Ext.chart.interactions.PanZoom",{extend:Ext.chart.interactions.Abstract,type:"panzoom",alias:"interaction.panzoom",config:{axes:{top:{},right:{},bottom:{},left:{}},minZoom:null,maxZoom:null,showOverflowArrows:!0,panGesture:"drag",zoomGesture:"pinch",zoomOnPanGesture:null,zoomOnPan:!1,doubleTapReset:!1,modeToggleButton:{xtype:"segmentedbutton",width:200,defaults:{ui:"default-toolbar"},cls:Ext.baseCSSPrefix+"panzoom-toggle",items:[{text:"Pan",value:"pan"},{text:"Zoom",value:"zoom"}]},hideLabelInGesture:!1},stopAnimationBeforeSync:!0,applyAxes:function(e,t){return Ext.merge(t||{},e)},updateZoomOnPan:function(e){this.getModeToggleButton().setValue(e?"zoom":"pan")},updateZoomOnPanGesture:function(e){this.setZoomOnPan(e)},getZoomOnPanGesture:function(){return this.getZoomOnPan()},applyModeToggleButton:function(e,t){return Ext.factory(e,"Ext.button.Segmented",t)},updateModeToggleButton:function(e){e&&e.on("change","onModeToggleChange",this)},onModeToggleChange:function(e,t){this.setZoomOnPan("zoom"===t)},getGestures:function(){var e={},t=this.getPanGesture(),i=this.getZoomGesture();return e[i]="onZoomGestureMove",e[i+"start"]="onZoomGestureStart",e[i+"end"]="onZoomGestureEnd",e[t]="onPanGestureMove",e[t+"start"]="onPanGestureStart",e[t+"end"]="onPanGestureEnd",e.doubletap="onDoubleTap",e},onDoubleTap:function(e){var t,i,n,r;if(this.getDoubleTapReset()){for(n=0,r=(i=(t=this.getChart()).getAxes()).length;n<r;n++)i[n].setVisibleRange([0,1]);t.redraw()}},onPanGestureStart:function(e){var t,i,n;if(!e||!e.touches||e.touches.length<2)return i=(t=this.getChart()).getInnerRect(),n=t.element.getXY(),e.claimGesture(),t.suspendAnimation(),this.startX=e.getX()-n[0]-i[0],this.startY=e.getY()-n[1]-i[1],this.oldVisibleRanges=null,this.hideLabels(),t.suspendThicknessChanged(),this.lockEvents(this.getPanGesture()),!1},onPanGestureMove:function(e){var t,i,n,r=this,s="mouse"===e.pointerType&&r.getZoomOnPan();if(r.getLocks()[r.getPanGesture()]===r)return i=(t=r.getChart()).getInnerRect(),n=t.element.getXY(),s?r.transformAxesBy(r.getZoomableAxes(e),0,0,(e.getX()-n[0]-i[0])/r.startX,r.startY/(e.getY()-n[1]-i[1])):r.transformAxesBy(r.getPannableAxes(e),e.getX()-n[0]-i[0]-r.startX,e.getY()-n[1]-i[1]-r.startY,1,1),r.sync(),!1},onPanGestureEnd:function(e){var t,i=this.getPanGesture();if(this.getLocks()[i]===this)return(t=this.getChart()).resumeThicknessChanged(),this.showLabels(),this.sync(),this.unlockEvents(i),t.resumeAnimation(),!1},onZoomGestureStart:function(e){if(e.touches&&2===e.touches.length){var t=this.getChart(),i=t.element.getXY(),n=t.getInnerRect(),r=i[0]+n[0],s=i[1]+n[1],o=[e.touches[0].point.x-r,e.touches[0].point.y-s,e.touches[1].point.x-r,e.touches[1].point.y-s],a=Math.max(44,Math.abs(o[2]-o[0])),l=Math.max(44,Math.abs(o[3]-o[1]));return e.claimGesture(),t.suspendAnimation(),t.suspendThicknessChanged(),this.lastZoomDistances=[a,l],this.lastPoints=o,this.oldVisibleRanges=null,this.hideLabels(),this.lockEvents(this.getZoomGesture()),!1}},onZoomGestureMove:function(e){if(this.getLocks()[this.getZoomGesture()]===this){var t=this.getChart(),i=t.getInnerRect(),n=t.element.getXY(),r=n[0]+i[0],s=n[1]+i[1],o=Math.abs,a=this.lastPoints,l=[e.touches[0].point.x-r,e.touches[0].point.y-s,e.touches[1].point.x-r,e.touches[1].point.y-s],c=Math.max(44,o(l[2]-l[0])),u=Math.max(44,o(l[3]-l[1])),d=this.lastZoomDistances||[c,u],h=c/d[0],f=u/d[1];return this.transformAxesBy(this.getZoomableAxes(e),i[2]*(h-1)/2+l[2]-a[2]*h,i[3]*(f-1)/2+l[3]-a[3]*f,h,f),this.sync(),!1}},onZoomGestureEnd:function(e){var t,i=this.getZoomGesture();if(this.getLocks()[i]===this)return(t=this.getChart()).resumeThicknessChanged(),this.showLabels(),this.sync(),this.unlockEvents(i),t.resumeAnimation(),!1},hideLabels:function(){this.getHideLabelInGesture()&&this.eachInteractiveAxes(function(e){e.hideLabels()})},showLabels:function(){this.getHideLabelInGesture()&&this.eachInteractiveAxes(function(e){e.showLabels()})},isEventOnAxis:function(e,t){var i=t.getSurface().getRect();return i[0]<=e.getX()&&e.getX()<=i[0]+i[2]&&i[1]<=e.getY()&&e.getY()<=i[1]+i[3]},getPannableAxes:function(e){var t,i,n=this.getAxes(),r=this.getChart().getAxes(),s=r.length,o=[],a=!1;if(e)for(t=0;t<s;t++)if(this.isEventOnAxis(e,r[t])){a=!0;break}for(t=0;t<s;t++)!(i=n[r[t].getPosition()])||!1===i.allowPan||a&&!this.isEventOnAxis(e,r[t])||o.push(r[t]);return o},getZoomableAxes:function(e){var t,i,n,r=this.getAxes(),s=this.getChart().getAxes(),o=[],a=s.length,l=!1;if(e)for(t=0;t<a;t++)if(this.isEventOnAxis(e,s[t])){l=!0;break}for(t=0;t<a;t++)!(n=r[(i=s[t]).getPosition()])||!1===n.allowZoom||l&&!this.isEventOnAxis(e,i)||o.push(i);return o},eachInteractiveAxes:function(e){var t,i=this.getAxes(),n=this.getChart().getAxes();for(t=0;t<n.length;t++)if(i[n[t].getPosition()]&&!1===e.call(this,n[t]))return},transformAxesBy:function(e,t,i,n,r){var s,o,a=this.getChart().getInnerRect(),l=this.getAxes(),c=this.oldVisibleRanges,u=!1;if(c||(this.oldVisibleRanges=c={},this.eachInteractiveAxes(function(e){c[e.getId()]=e.getVisibleRange()})),a){for(o=0;o<e.length;o++)s=l[e[o].getPosition()],u=this.transformAxisBy(e[o],c[e[o].getId()],t,i,n,r,this.minZoom||s.minZoom,this.maxZoom||s.maxZoom)||u;return u}},transformAxisBy:function(e,t,i,n,r,s,o,a){var l,c,u,d,h,f=t[1]-t[0],g=e.getVisibleRange(),p=o||this.getMinZoom()||e.config.minZoom,m=a||this.getMaxZoom()||e.config.maxZoom,x=this.getChart().getInnerRect();if(x&&(h=(u=e.isSide())?x[3]:x[2],d=u?-n:i,(f/=u?s:r)<0&&(f=-f),1<f*p&&(f=1),f*m<1&&(f=1/m),l=t[0],c=t[1],f!==(g=g[1]-g[0])||1!==g))return e.setVisibleRange([.5*(t[0]+t[1]-f)-d/h*f,.5*(t[0]+t[1]+f)-d/h*f]),1e-10<Math.abs(l-e.getVisibleRange()[0])||1e-10<Math.abs(c-e.getVisibleRange()[1])},destroy:function(){this.setModeToggleButton(null),this.callParent()}}),Ext.define("Ext.chart.interactions.Rotate",{extend:Ext.chart.interactions.Abstract,type:"rotate",alternateClassName:"Ext.chart.interactions.RotatePie3D",alias:["interaction.rotate","interaction.rotatePie3d"],config:{gesture:"rotate",gestures:{dragstart:"onGestureStart",drag:"onGesture",dragend:"onGestureEnd"},rotation:0},oldRotations:null,getAngle:function(e){var t=this.getChart(),i=t.getEventXY(e),n=t.getCenter();return Math.atan2(i[1]-n[1],i[0]-n[0])},onGestureStart:function(e){return e.claimGesture(),this.lockEvents("drag"),this.angle=this.getAngle(e),this.oldRotations={},this.getChart().suspendAnimation(),this.fireEvent("rotatestart",this,this.getRotation()),!1},onGesture:function(e){var t=this.getAngle(e)-this.angle;if(this.getLocks().drag===this)return this.doRotateTo(t,!0),!1},doRotateTo:function(e,t){var i,n,r,s,o,a,l,c=this.getChart(),u=c.getAxes(),d=c.getSeries(),h=this.oldRotations;for(a=0,l=u.length;a<l;a++)n=h[o=(r=u[a]).getId()]||(h[o]=r.getRotation()),i=e+(t?n:0),r.setRotation(i);for(a=0,l=d.length;a<l;a++)n=h[o=(s=d[a]).getId()]||(h[o]=s.getRotation()),i=Ext.draw.Draw.degrees(e+(t?n:0)),s.setRotation(i);this.setRotation(i),this.fireEvent("rotate",this,this.getRotation()),this.sync()},rotateTo:function(e,t,i){var n=this.getChart();i||n.suspendAnimation(),this.doRotateTo(e,t,i),this.oldRotations={},i||n.resumeAnimation()},onGestureEnd:function(e){var t=this;if(t.getLocks().drag===t)return t.onGesture(e),t.unlockEvents("drag"),t.getChart().resumeAnimation(),t.fireEvent("rotateend",t,t.getRotation()),t.fireEvent("rotationEnd",t,t.getRotation()),!1}}),Ext.define("Ext.chart.navigator.ContainerBase",{extend:Ext.Container,updateNavigator:function(e,t){t&&this.remove(t,!0),this.add(e)}}),Ext.define("Ext.chart.navigator.NavigatorBase",{extend:Ext.chart.CartesianChart,initialize:function(){this.callParent(),this.setupEvents()}}),Ext.define("Ext.chart.navigator.sprite.RangeMask",{extend:Ext.draw.sprite.Sprite,alias:"sprite.rangemask",inheritableStatics:{def:{processors:{min:"limited01",max:"limited01",thumbOpacity:"limited01"},defaults:{min:0,max:1,lineWidth:2,miterLimit:1,strokeStyle:"#787878",thumbOpacity:1}}},getBBox:function(e){var t=this.attr,i=t.bbox;return i.plain={x:0,y:0,width:1,height:1},e?i.plain:i.transform||(i.transform=t.matrix.transformBBox(i.plain))},renderThumb:function(e,t,i,n){var r=this.shapeSprite,s=this.textureSprite,o={opacity:this.attr.thumbOpacity,translationX:i,translationY:n};r||(r=this.shapeSprite=new Ext.draw.sprite.Rect({x:-9.5,y:-9.5,width:19,height:19,radius:4,lineWidth:1,fillStyle:{type:"linear",degrees:90,stops:[{offset:0,color:"#EEE"},{offset:1,color:"#FFF"}]},strokeStyle:"#999"}),s=this.textureSprite=new Ext.draw.sprite.Path({path:"M -4, -5, -4, 5 M 0, -5, 0, 5 M 4, -5, 4, 5",strokeStyle:{type:"linear",degrees:90,stops:[{offset:0,color:"#CCC"},{offset:1,color:"#BBB"}]},lineWidth:2})),t.save(),r.setAttributes(o),r.applyTransformations(),s.setAttributes(o),s.applyTransformations(),r.useAttributes(t),r.render(e,t),s.useAttributes(t),s.render(e,t),t.restore()},render:function(e,t){var i=this.attr,n=i.matrix.elements,r=n[0],s=n[3],o=n[4],a=n[5],l=i.min*r+o,c=i.max*r+o,u=Math.round(.5*s+a);t.beginPath(),t.moveTo(o,a),t.lineTo(r+o,a),t.lineTo(r+o,s+a),t.lineTo(o,s+a),t.lineTo(o,a),t.moveTo(l,a),t.lineTo(l,s+a),t.lineTo(c,s+a),t.lineTo(c,a),t.lineTo(l,a),t.fillStroke(i,!0),this.renderThumb(e,t,Math.round(l),u),this.renderThumb(e,t,Math.round(c),u)}}),Ext.define("Ext.chart.navigator.Navigator",{extend:Ext.chart.navigator.NavigatorBase,isNavigator:!0,config:{docked:"bottom",span:"series",insetPadding:0,innerPadding:0,navigatorContainer:null,axis:null,tolerance:20,minimum:.8,maximum:1,thumbGap:30,autoHideThumbs:!0,width:"100%",height:75},dragType:null,constructor:function(e){var t,i;t=[(e=e||{}).minimum||.8,e.maximum||1],this.callParent([e]),(i=this.overlaySurface).element.setStyle({zIndex:100}),this.rangeMask=i.add({type:"rangemask",min:t[0],max:t[1],fillStyle:"rgba(0, 0, 0, .25)"}),this.onDragEnd(),this.rangeMask.setAnimation({duration:500,customDurations:{min:0,max:0,translationX:0,translationY:0,scalingX:0,scalingY:0,scalingCenterX:0,scalingCenterY:0,fillStyle:0,strokeStyle:0}}),this.setVisibleRange(t)},createSurface:function(e){var t=this.callParent([e]);return"overlay"===e&&(this.overlaySurface=t),t},applyAxis:function(e){return this.getNavigatorContainer().getChart().getAxis(e)},updateAxis:function(e,t){var i="visiblerangechange",n="onAxisVisibleRangeChange";t&&t.un(i,n,this),e&&e.on(i,n,this),this.axis=e},getAxis:function(){return this.axis},onAxisVisibleRangeChange:function(e,t){this.setVisibleRange(t)},updateNavigatorContainer:function(e){var t,i,n,r,s=this,o=s.chart,a=s.chart=e&&e.getChart(),l=a&&a.getSeries(),c=s.chartLegendStore,u=[],d="onChartLegendStoreUpdate";for(o&&(o.un("layout","afterBoundChartLayout",s),o.un("themechange","onChartThemeChange",s),o.un("storechange","onChartStoreChange",s)),a.on("layout","afterBoundChartLayout",s),r=0;r<l.length;r++)t=l[r],n=s.getSeriesConfig(t),((i=Ext.create("series."+n.type,n)).parentSeries=t).navigatorSeries=i,u.push(i);c&&(c.un("update",d,s),s.chartLegendStore=null),a&&(s.setStore(a.getStore()),s.chartLegendStore=c=a.getLegendStore(),c&&c.on("update",d,s),a.on("themechange","onChartThemeChange",s),a.on("storechange","onChartStoreChange",s),s.onChartThemeChange(a,a.getTheme())),s.setSeries(u)},onChartThemeChange:function(e,t){this.setTheme(t)},onChartStoreChange:function(e,t){this.setStore(t)},addCustomStyle:function(e,t,i){var n,r;return t=t||{},i=i||{},e.style=e.style||{},e.subStyle=e.subStyle||{},n=t&&(t.fillStyle||t.fill),r=t&&(t.strokeStyle||t.stroke),n&&(e.style.fillStyle=n),r&&(e.style.strokeStyle=r),n=i&&(i.fillStyle||i.fill),r=i&&(i.strokeStyle||i.stroke),n&&(e.subStyle.fillStyle=n),r&&(e.subStyle.strokeStyle=r),e},getSeriesConfig:function(e){var t,i=e.getStyle();return e.isLine?t=this.addCustomStyle({type:"line",fill:!0,xField:e.getXField(),yField:e.getYField(),smooth:e.getSmooth()},i):e.isCandleStick?t=this.addCustomStyle({type:"line",fill:!0,xField:e.getXField(),yField:e.getCloseField()},i.raiseStyle):e.isArea||e.isBar?t=this.addCustomStyle({type:"area",xField:e.getXField(),yField:e.getYField()},i,e.getSubStyle()):Ext.raise("Navigator only works with 'line', 'bar', 'candlestick' and 'area' series."),t.style.fillOpacity=.2,t},onChartLegendStoreUpdate:function(e,t){var i,n=this.chart;n&&t&&(i=n.getSeries().map[t.get("series")])&&i.navigatorSeries&&(i.navigatorSeries.setHiddenByIndex(t.get("index"),t.get("disabled")),this.redraw())},setupEvents:function(){this.overlaySurface.element.on({scope:this,drag:"onDrag",dragstart:"onDragStart",dragend:"onDragEnd",dragcancel:"onDragEnd",mousemove:"onMouseMove"})},onMouseMove:function(e){var t=this.overlaySurface.element,i=t.dom.style;switch(this.getDragType(e.pageX-t.getXY()[0])){case"min":case"max":i.cursor="ew-resize";break;case"pan":i.cursor="move";break;default:i.cursor="default"}},getDragType:function(e){var t,i=this.getTolerance(),n=this.overlaySurface.element.getSize().width,r=this.rangeMask,s=n*r.attr.min,o=n*r.attr.max;return s+i<e&&e<o-i?t="pan":e<=s+i&&s-i<e?t="min":o-i<=e&&e<o+i&&(t="max"),t},onDragStart:function(e){var t,i;this.dragType||e&&e.touches&&1<e.touches.length||(t=e.touches[0].pageX-this.overlaySurface.element.getXY()[0],i=this.getDragType(t),this.rangeMask.attr.thumbOpacity=1,i&&(this.dragType=i,this.touchId=e.touches[0].identifier,this.dragX=t))},onDrag:function(e){if(e.touch.identifier===this.touchId){var t=this.overlaySurface.element,i=t.getSize().width,n=e.touches[0].pageX-t.getXY()[0],r=this.getThumbGap()/i,s=this.rangeMask,o=s.attr.min,a=s.attr.max,l=a-o,c=this.dragType,u=(n-this.dragX)/i;if("pan"===c)a+=u,(o+=u)<0&&(o=0,a=l),1<a&&(o=(a=1)-l);else if("min"===c)(o+=u)<0&&(o=0),a-r<o&&(o=a-r);else{if("max"!==c)return;1<(a+=u)&&(a=1),a<o+r&&(a=o+r)}this.dragX=n,this.setVisibleRange([o,a])}},onDragEnd:function(){var e=this.getAutoHideThumbs();this.dragType=null,e&&this.rangeMask.setAttributes({thumbOpacity:0})},updateMinimum:function(e){this.isConfiguring||this.setVisibleRange([e,this.getMaximum()])},updateMaximum:function(e){this.isConfiguring||this.setVisibleRange([this.getMinimum(),e])},getMinimum:function(){return this.rangeMask.attr.min},getMaximum:function(){return this.rangeMask.attr.max},setVisibleRange:function(e){var t=this.chart;this.axis.setVisibleRange(e),this.rangeMask.setAttributes({min:e[0],max:e[1]}),this.getSurface("overlay").renderFrame(),t.suspendAnimation(),t.redraw(),t.resumeAnimation()},afterBoundChartLayout:function(){var e="series"===this.getSpan(),t=this.chart.getMainRect(),i=this.element.getSize();t&&e&&(this.setInsetPadding({left:t[0],right:i.width-t[2]-t[0],top:0,bottom:0}),this.performLayout())},afterChartLayout:function(){var e=this.overlaySurface.element.getSize();this.rangeMask.setAttributes({scalingCenterX:0,scalingCenterY:0,scalingX:e.width,scalingY:e.height})},doDestroy:function(){var e=this.chart;e&&!e.destroyed&&e.un("layout","afterBoundChartLayout",this),this.callParent()}}),Ext.define("Ext.chart.navigator.Container",{extend:Ext.chart.navigator.ContainerBase,xtype:"chartnavigator",config:{chart:null,navigator:{}},layout:"fit",applyChart:function(e,t){return t&&t.destroy(),e&&(e.isCartesian&&Ext.raise("Only cartesian charts are supported."),e.isChart||(e.$initParent=this,delete(e=new Ext.chart.CartesianChart(e)).$initParent)),e},legendStore:null,surfaceRects:null,updateChart:function(e,t){e&&(this.legendStore=e.getLegendStore(),!this.items&&this.initItems&&this.initItems(),this.add(e))},applyNavigator:function(e,t){var i;return t&&t.destroy(),e&&(e.navigatorContainer=e.parent=this,i=new Ext.chart.navigator.Navigator(e)),i},preview:function(){this.getNavigator().preview(this.getImage())},download:function(e){(e=e||{}).data=this.getImage().data,this.getNavigator().download(e)},setVisibleRange:function(e){this.getNavigator().setVisibleRange(e)},getImage:function(e){var t,i,n,r,s=this.getChart(),o=this.getNavigator(),a=o.getDocked(),l=s.bodyElement.getSize(),c=o.bodyElement.getSize(),u=s.getSurfaces(!0),d=o.getSurfaces(!0),h={width:l.width,height:l.height+c.height};if("top"===a?this.shiftSurfaces(u,0,c.height):this.shiftSurfaces(d,0,l.height),r=(n=u.concat(d))[0],(Ext.isIE||Ext.isEdge)&&r.isSVG)t={data:r.toSVG(h,n),type:"svg-markup"};else{if(t=r.flatten(h,n),"image"===e)return(i=new Image).src=t.data,t.data=i,t;if("stream"===e)return t.data=t.data.replace(/^data:image\\/[^;]+/,"data:application/octet-stream"),t}return this.unshiftSurfaces(n),t},shiftSurfaces:function(e,t,i){var n,r=e.length,s=0;for(this.surfaceRects={};s<r;s++)n=e[s],this.shiftSurface(n,t,i)},shiftSurface:function(e,t,i){var n=e.getRect();this.surfaceRects[e.getId()]=n.slice(),n[0]+=t,n[1]+=i},unshiftSurfaces:function(e){var t,i,n,r=this.surfaceRects,s=e.length,o=0;if(r)for(;o<s;o++)i=(t=e[o]).getRect(),(n=r[t.getId()])&&(i[0]=n[0],i[1]=n[1]);this.surfaceRects=null}}),Ext.define("Ext.chart.plugin.ItemEvents",{extend:Ext.plugin.Abstract,alias:"plugin.chartitemevents",moveEvents:!1,mouseMoveEvents:{mousemove:!0,mouseover:!0,mouseout:!0},itemMouseMoveEvents:{itemmousemove:!0,itemmouseover:!0,itemmouseout:!0},init:function(e){var t="handleEvent";(this.chart=e).addElementListener({click:t,tap:t,dblclick:t,mousedown:t,mousemove:t,mouseup:t,mouseover:t,mouseout:t,priority:1001,scope:this})},hasItemMouseMoveListeners:function(){var e,t=this.chart.hasListeners;for(e in this.itemMouseMoveEvents)if(e in t)return!0;return!1},handleEvent:function(e){var t,i,n=this.chart,r=e.type in this.mouseMoveEvents,s=this.lastItem;r&&!this.hasItemMouseMoveListeners()&&!this.moveEvents||(t=n.getEventXY(e),i=n.getItemForPoint(t[0],t[1]),r&&!Ext.Object.equals(i,s)&&(s&&(n.fireEvent("itemmouseout",n,s,e),s.series.fireEvent("itemmouseout",s.series,s,e)),i&&(n.fireEvent("itemmouseover",n,i,e),i.series.fireEvent("itemmouseover",i.series,i,e))),i&&(n.fireEvent("item"+e.type,n,i,e),i.series.fireEvent("item"+e.type,i.series,i,e)),this.lastItem=i)}}),Ext.define("Ext.chart.series.Cartesian",{extend:Ext.chart.series.Series,config:{xField:null,yField:null,xAxis:null,yAxis:null},directions:["X","Y"],fieldCategoryX:["X"],fieldCategoryY:["Y"],applyXAxis:function(e,t){return this.getChart().getAxis(e)||t},applyYAxis:function(e,t){return this.getChart().getAxis(e)||t},updateXAxis:function(e){e.processData(this)},updateYAxis:function(e){e.processData(this)},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},getItemForPoint:function(e,t){var i,n=this.getSprites()[0],r=this.getStore();return n&&!this.getHidden()&&(i=n.getNearestDataPoint(e,t)),i?{series:this,sprite:n,category:this.getItemInstancing()?"items":"markers",index:i.index,record:r.getData().items[i.index],field:this.getYField(),distance:i.distance}:null},createSprite:function(){var e=this.callParent(),t=this.getChart(),i=this.getXAxis();return e.setAttributes({flipXY:t.getFlipXY(),xAxis:i}),e.setAggregator&&i&&i.getAggregator&&(i.getAggregator?e.setAggregator({strategy:i.getAggregator()}):e.setAggregator({})),e},getSprites:function(){var e=this.getChart(),t=this.sprites;return e?(t.length||this.createSprite(),t):Ext.emptyArray},getXRange:function(){return[this.dataRange[0],this.dataRange[2]]},getYRange:function(){return[this.dataRange[1],this.dataRange[3]]}}),Ext.define("Ext.chart.series.StackedCartesian",{extend:Ext.chart.series.Cartesian,config:{stacked:!0,splitStacks:!0,fullStack:!1,fullStackTotal:100,hidden:[]},reversedSpriteZOrder:!0,spriteAnimationCount:0,themeColorCount:function(){var e=this.getYField();return Ext.isArray(e)?e.length:1},updateStacked:function(){this.processData()},updateSplitStacks:function(){this.processData()},coordinateY:function(){return this.coordinateStacked("Y",1,2)},coordinateStacked:function(e,t,i){var n,r,s,o,a,l,c,u,d,h,f,g=this,p=g.getStore().getData().items,m=p.length,x=g["get"+e+"Axis"](),y=g.getHidden(),v=g.getSplitStacks(),E=g.getFullStack(),b=g.getFullStackTotal(),C=[0,0],S=g["fieldCategory"+e],w=[],T=[],P=[],I=g.getStacked(),A=g.getSprites(),k=[];if(A.length){for(r=0;r<S.length;r++){for(d=S[r],l=(a=g.getFields([d])).length,s=0;s<m;s++)w[s]=0,T[s]=0,P[s]=0;for(s=0;s<l;s++)y[s]||(k[s]=g.coordinateData(p,a[s],x));if(I&&E)for(c=[],v&&(u=[]),s=0;s<m;s++)for(c[s]=0,v&&(u[s]=0),o=0;o<l;o++)(h=k[o])&&(0<=(h=h[s])||!v?c[s]+=h:h<0&&(u[s]+=h));for(s=0;s<l;s++)if(f={},y[s])f["dataStart"+d]=w,f["data"+d]=w,A[s].setAttributes(f);else{if(h=k[s],I){for(n=[],o=0;o<m;o++)h[o]||(h[o]=0),0<=h[o]||!v?(E&&c[o]&&(h[o]*=b/c[o]),w[o]=T[o],T[o]+=h[o],n[o]=T[o]):(E&&u[o]&&(h[o]*=b/u[o]),w[o]=P[o],P[o]+=h[o],n[o]=P[o]);f["dataStart"+d]=w,f["data"+d]=n,Ext.chart.Util.expandRange(C,w),Ext.chart.Util.expandRange(C,n)}else f["dataStart"+d]=w,f["data"+d]=h,Ext.chart.Util.expandRange(C,h);A[s].setAttributes(f)}}for(C=Ext.chart.Util.validateRange(C,g.defaultRange),g.dataRange[t]=C[0],g.dataRange[t+i]=C[1],(f={})["dataMin"+e]=C[0],f["dataMax"+e]=C[1],r=0;r<A.length;r++)A[r].setAttributes(f)}},getFields:function(e){var t,i,n=[],r=e.length;for(t=0;t<r;t++)i=this["get"+e[t]+"Field"](),Ext.isArray(i)?n.push.apply(n,i):n.push(i);return n},updateLabelOverflowPadding:function(e){var t;this.isConfiguring||(t=this.getLabel())&&t.setAttributes({labelOverflowPadding:e})},updateLabelData:function(){var e=this.getLabel();e&&e.setAttributes({labelOverflowPadding:this.getLabelOverflowPadding()}),this.callParent()},getSprites:function(){var e,t,i=this,n=i.getChart(),r=i.getFields(i.fieldCategoryY),s=i.getItemInstancing(),o=i.sprites,a=i.getHidden(),l=!1,c=r.length;if(!n)return[];for(e=0;e<c;e++)(t=o[e])||((t=i.createSprite()).setAttributes({zIndex:(i.reversedSpriteZOrder?-1:1)*e}),t.setField(r[e]),l=!0,a.push(!1),s?t.getMarker("items").getTemplate().setAttributes(i.getStyleByIndex(e)):t.setAttributes(i.getStyleByIndex(e)));return l&&i.updateHidden(a),o},getItemForPoint:function(e,t){var i,n,r,s,o=this.getSprites(),a=this.getStore(),l=this.getHidden(),c=1/0,u=null,d=-1,h=-1;for(r=0,s=o.length;r<s;r++)l[r]||(i=o[r].getNearestDataPoint(e,t))&&i.distance<c&&(c=i.distance,h=i.index,d=r);return-1<d&&(n=this.getYField(),u={series:this,sprite:o[d],category:this.getItemInstancing()?"items":"markers",index:h,record:a.getData().items[h],field:"string"==typeof n?n:n[d],distance:c}),u},provideLegendInfo:function(e){var t,i,n,r,s=this.getSprites(),o=this.getTitle(),a=this.getYField(),l=this.getHidden(),c=1===s.length;for(n=0;n<s.length;n++)i=(t=this.getStyleByIndex(n)).fillStyle,o&&(Ext.isArray(o)?r=o[n]:c&&(r=o)),o&&r||(r=Ext.isArray(a)?a[n]:this.getId()),e.push({name:r,mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||t.strokeStyle||"black",disabled:l[n],series:this.getId(),index:n})},onSpriteAnimationStart:function(e){this.spriteAnimationCount++,1===this.spriteAnimationCount&&this.fireEvent("animationstart")},onSpriteAnimationEnd:function(e){this.spriteAnimationCount--,0===this.spriteAnimationCount&&this.fireEvent("animationend")}}),Ext.define("Ext.chart.series.sprite.Series",{extend:Ext.draw.sprite.Sprite,mixins:{markerHolder:Ext.chart.MarkerHolder},inheritableStatics:{def:{processors:{dataMinX:"number",dataMaxX:"number",dataMinY:"number",dataMaxY:"number",rangeX:"data",rangeY:"data",dataX:"data",dataY:"data",labels:"default",labelOverflowPadding:"number"},defaults:{dataMinX:0,dataMaxX:1,dataMinY:0,dataMaxY:1,rangeX:null,rangeY:null,dataX:null,dataY:null,labels:null,labelOverflowPadding:10},triggers:{dataX:"bbox",dataY:"bbox",dataMinX:"bbox",dataMaxX:"bbox",dataMinY:"bbox",dataMaxY:"bbox"}}},config:{store:null,series:null,field:null}}),Ext.define("Ext.chart.series.sprite.Cartesian",{extend:Ext.chart.series.sprite.Series,inheritableStatics:{def:{processors:{selectionTolerance:"number",flipXY:"bool",renderer:"default",visibleMinX:"number",visibleMinY:"number",visibleMaxX:"number",visibleMaxY:"number",innerWidth:"number",innerHeight:"number"},defaults:{selectionTolerance:20,flipXY:!1,renderer:null,transformFillStroke:!1,visibleMinX:0,visibleMinY:0,visibleMaxX:1,visibleMaxY:1,innerWidth:1,innerHeight:1},triggers:{dataX:"dataX,bbox",dataY:"dataY,bbox",visibleMinX:"panzoom",visibleMinY:"panzoom",visibleMaxX:"panzoom",visibleMaxY:"panzoom",innerWidth:"panzoom",innerHeight:"panzoom"},updaters:{dataX:function(e){this.processDataX(),this.scheduleUpdater(e,"dataY",["dataY"])},dataY:function(){this.processDataY()},panzoom:function(e){var t=e.visibleMaxX-e.visibleMinX,i=e.visibleMaxY-e.visibleMinY,n=e.flipXY?e.innerHeight:e.innerWidth,r=e.flipXY?e.innerWidth:e.innerHeight,s=this.getSurface(),o=!!s&&s.getInherited().rtl;e.scalingCenterX=0,e.scalingCenterY=0,e.scalingX=n/t,e.scalingY=r/i,e.translationX=-(e.visibleMinX*e.scalingX),e.translationY=-(e.visibleMinY*e.scalingY),o&&!e.flipXY&&(e.scalingX*=-1,e.translationX*=-1,e.translationX+=n),this.applyTransformations(!0)}}}},processDataY:Ext.emptyFn,processDataX:Ext.emptyFn,updatePlainBBox:function(e){var t=this.attr;e.x=t.dataMinX,e.y=t.dataMinY,e.width=t.dataMaxX-t.dataMinX,e.height=t.dataMaxY-t.dataMinY},binarySearch:function(e){var t,i,n=this.attr.dataX,r=0,s=n.length;if(e<=n[0])return r;if(e>=n[s-1])return s-1;for(;r+1<s;){if((i=n[t=r+s>>1])===e)return t;i<e?r=t:s=t}return r},render:function(e,t,i){var n,r=this.attr,s=r.inverseMatrix.clone();s.appendMatrix(e.inverseMatrix),null!==r.dataX&&void 0!==r.dataX&&null!==r.dataY&&void 0!==r.dataY&&(s.getXX()*s.getYX()||s.getXY()*s.getYY()?Ext.Logger.warn("Cartesian Series sprite does not support rotation/sheering"):(n=(n=s.transformList([[i[0]-1,i[3]+1],[i[0]+i[2]+1,-1]]))[0].concat(n[1]),this.renderClipped(e,t,n,i)))},renderClipped:Ext.emptyFn,getIndexNearPoint:function(e,t){var i=this.getNearestDataPoint(e,t);return i?i.index:-1},getNearestDataPoint:function(e,t){var i,n,r,s,o,a,l,c,u,d=this.attr,h=this.getSeries(),f=this.getSurface(),g=this.boundMarkers.items,p=d.matrix,m=d.dataX,x=d.dataY,y=d.selectionTolerance,v=1/0,E=-1,b=null;if(g){for(a=m.length,c=h.reversedSpriteZOrder?(o=a-1,l=-1):(o=0,l=a,1);o!==l;o+=c)if(u=this.getMarkerBBox("items",o),s=f.inverseMatrix.transformPoint([e,t]),Ext.draw.Draw.isPointInBBox(s[0],s[1],u)){E=o,v=0;break}}else for(o=0,a=m.length;o<a;o++)s=p.transformPoint([m[o],x[o]]),n=e-(s=f.matrix.transformPoint(s))[0],r=t-s[1],i=Math.sqrt(n*n+r*r),y&&y<i||i<v&&(v=i,E=o);return-1<E&&(b={index:E,distance:v}),b}}),Ext.define("Ext.chart.series.sprite.StackedCartesian",{extend:Ext.chart.series.sprite.Cartesian,inheritableStatics:{def:{processors:{groupCount:"number",groupOffset:"number",dataStartY:"data"},defaults:{selectionTolerance:20,groupCount:1,groupOffset:0,dataStartY:null},triggers:{dataStartY:"dataY,bbox"}}}}),Ext.define("Ext.chart.series.sprite.Area",{alias:"sprite.areaSeries",extend:Ext.chart.series.sprite.StackedCartesian,inheritableStatics:{def:{processors:{step:"bool"},defaults:{selectionTolerance:0,step:!1}}},renderClipped:function(e,t,i){var n,r,s,o,a,l,c,u,d=this.getStore(),h=this.getSeries(),f=this.attr,g=f.dataX,p=f.dataY,m=f.dataStartY,x=f.matrix,y=x.elements[0],v=x.elements[4],E=x.elements[3],b=x.elements[5],C=this.surfaceMatrix,S={},w=Math.min(i[0],i[2]),T=Math.max(i[0],i[2]),P=Math.max(0,this.binarySearch(w)),I=Math.min(g.length-1,this.binarySearch(T)+1),A=f.renderer,k={store:d};if(t.beginPath(),l=g[P]*y+v,c=p[P]*E+b,t.moveTo(l,c),f.step)for(a=c,s=P;s<=I;s++)n=g[s]*y+v,r=p[s]*E+b,t.lineTo(n,a),t.lineTo(n,a=r);else for(s=P;s<=I;s++)n=g[s]*y+v,r=p[s]*E+b,t.lineTo(n,r);if(m)if(f.step)for(o=g[I]*y+v,s=I;P<=s;s--)n=g[s]*y+v,r=m[s]*E+b,t.lineTo(o,r),t.lineTo(o=n,r);else for(s=I;P<=s;s--)n=g[s]*y+v,r=m[s]*E+b,t.lineTo(n,r);else t.lineTo(g[I]*y+v,r),t.lineTo(g[I]*y+v,b),t.lineTo(l,b),t.lineTo(l,p[s]*E+b);if(f.transformFillStroke&&f.matrix.toContext(t),t.fill(),f.transformFillStroke&&f.inverseMatrix.toContext(t),t.beginPath(),t.moveTo(l,c),f.step)for(s=P;s<=I;s++)n=g[s]*y+v,r=p[s]*E+b,t.lineTo(n,a),t.lineTo(n,a=r),S.translationX=C.x(n,r),S.translationY=C.y(n,r),A&&(u=Ext.callback(A,null,[this,S,k,s],0,h),Ext.apply(S,u)),this.putMarker("markers",S,s,!A);else for(s=P;s<=I;s++)n=g[s]*y+v,r=p[s]*E+b,t.lineTo(n,r),S.translationX=C.x(n,r),S.translationY=C.y(n,r),A&&(u=Ext.callback(A,null,[this,S,k,s],0,h),Ext.apply(S,u)),this.putMarker("markers",S,s,!A);f.transformFillStroke&&f.matrix.toContext(t),t.stroke()}}),Ext.define("Ext.chart.series.Area",{extend:Ext.chart.series.StackedCartesian,alias:"series.area",type:"area",seriesType:"areaSeries",isArea:!0,config:{splitStacks:!1}}),Ext.define("Ext.chart.series.sprite.Bar",{alias:"sprite.barSeries",extend:Ext.chart.series.sprite.StackedCartesian,inheritableStatics:{def:{processors:{minBarWidth:"number",maxBarWidth:"number",minGapWidth:"number",radius:"number",inGroupGapWidth:"number"},defaults:{minBarWidth:2,maxBarWidth:100,minGapWidth:5,inGroupGapWidth:3,radius:0}}},drawLabel:function(e,t,i,n,r,s){var o,a,l,c,u,d,h,f,g,p=this,m=p.attr,x=p.getMarker("labels"),y=x.getTemplate(),v=p.labelCfg||(p.labelCfg={}),E=p.surfaceMatrix,b=m.labelOverflowPadding,C=y.attr.display,S=y.attr.orientation,w="horizontal"===S&&m.flipXY||"vertical"===S&&!m.flipXY||!S,T=y.getCalloutLine();switch(v.x=E.x(t,n),v.y=E.y(t,n),c=T?T.length:0,m.flipXY?v.rotationRads=0:v.rotationRads=.5*-Math.PI,v.calloutVertical=!m.flipXY,S){case"horizontal":v.rotationRads=0,v.calloutVertical=!1;break;case"vertical":v.rotationRads=.5*-Math.PI,v.calloutVertical=!0}v.text=e,y.attr.renderer&&(x.get(r)||x.putMarkerFor("labels",{},r),h=[e,x,v,{store:p.getStore()},r],"string"==typeof(u=Ext.callback(y.attr.renderer,null,h,0,p.getSeries()))?v.text=u:"object"==typeof u&&("text"in u&&(v.text=u.text),d=!0)),(l=p.getMarkerBBox("labels",r,!0))||(p.putMarker("labels",v,r),l=p.getMarkerBBox("labels",r,!0)),a=0<c?c:0===c?(w?l.width:l.height)/2:(w?l.width:l.height)/2+b,f=2*b,n<i&&(a=-a,f=-f),o=w?"insideStart"===C?i+a:n-a:"insideStart"===C?i+f:n-f,v.x=E.x(t,o),v.y=E.y(t,o),g=this.getCalloutYPos(C,i,n,a,s),v.calloutStartX=E.x(t,g.start),v.calloutStartY=E.y(t,g.start),v.calloutPlaceX=E.x(t,g.place),v.calloutPlaceY=E.y(t,g.place),v.calloutColor=T&&T.color||p.attr.fillStyle,T?T.width&&(v.calloutWidth=T.width):v.calloutColor="none",v.callout=+(Math.abs(n-i)<=Math.abs(2*a)||"outside"===C),d&&Ext.apply(v,u),p.putMarker("labels",v,r)},callOutObj:{start:0,place:0},getCalloutYPos:function(e,t,i,n,r){var s=this.callOutObj,o="insideStart"===e,a=o?t:i,l=o?t-n:i+n,c=l+2*n;return this.fromSelf||o||!(c<=r[1]||c>=r[3])?(s.start=a,s.place=l):(this.fromSelf=!0,s=this.getCalloutYPos("insideStart",t,i,n,r),delete this.fromSelf),s},drawBar:function(e,t,i,n,r,s,o,a){var l,c={},u=this.attr.renderer;c.x=n,c.y=r,c.width=s-n,c.height=o-r,c.radius=this.attr.radius,u&&(l=Ext.callback(u,null,[this,c,{store:this.getStore()},a],0,this.getSeries()),Ext.apply(c,l)),this.putMarker("items",c,a,!u)},renderClipped:function(e,t,i,n){if(!this.cleanRedraw){var r,s,o,a,l,c,u,d,h=this.attr,f=h.dataX,g=h.dataY,p=h.labels,m=h.dataStartY,x=h.groupCount,y=h.groupOffset-.5*(x-1),v=h.inGroupGapWidth,E=t.lineWidth,b=h.matrix,C=b.elements[0],S=b.elements[3],w=b.elements[4],T=e.roundPixel(b.elements[5])-1,P=Math.abs(C)-h.minGapWidth,I=(Math.min(P,h.maxBarWidth)-v*(x-1))/x,A=e.roundPixel(Math.max(h.minBarWidth,I)),k=this.surfaceMatrix,D=.5*h.lineWidth,R=Math.min(i[0],i[2]),M=Math.max(i[0],i[2]),F=Math.max(0,Math.floor(R)),L=Math.min(f.length-1,Math.ceil(M)),O=p&&this.getMarker("labels");for(l=F;l<=L;l++)u=m?m[l]:0,d=g[l],c=f[l]*C+w+y*(A+v),r=e.roundPixel(c-A/2)+D,a=e.roundPixel(d*S+T+E),s=e.roundPixel(c+A/2)-D,o=e.roundPixel(u*S+T+E),this.drawBar(t,e,i,r,a-D,s,o-D,l),O&&null!=p[l]&&this.drawLabel(p[l],c,o,a,l,n),this.putMarker("markers",{translationX:k.x(c,a),translationY:k.y(c,a)},l,!0)}}}),Ext.define("Ext.chart.series.Bar",{extend:Ext.chart.series.StackedCartesian,alias:"series.bar",type:"bar",seriesType:"barSeries",isBar:!0,config:{itemInstancing:{type:"rect",animation:{customDurations:{x:0,y:0,width:0,height:0,radius:0}}}},getItemForPoint:function(e,t){var i,n;if(this.getSprites().length)return n=(i=this.getChart()).getInnerPadding(),e+=i.getInherited().rtl?n.right:-n.left,t+=n.bottom,this.callParent(arguments)},updateXAxis:function(e){this.is3D||e.isCategory||Ext.raise("'bar' series should be used with a 'category' axis. Please refer to the bar series docs."),e.setExpandRangeBy(.5),this.callParent(arguments)},updateHidden:function(e){this.callParent(arguments),this.updateStacked()},updateStacked:function(e){var t,i,n={},r=this.getSprites(),s=r.length,o=[];for(i=0;i<s;i++)r[i].attr.hidden||o.push(r[i]);if(t=o.length,this.getStacked())for(n.groupCount=1,i=n.groupOffset=0;i<t;i++)o[i].setAttributes(n);else for(n.groupCount=t,i=0;i<t;i++)o[n.groupOffset=i].setAttributes(n);this.callParent(arguments)}}),Ext.define("Ext.chart.series.sprite.Bar3D",{extend:Ext.chart.series.sprite.Bar,alias:"sprite.bar3dSeries",inheritableStatics:{def:{processors:{depthWidthRatio:"number",saturationFactor:"number",brightnessFactor:"number",colorSpread:"number"},defaults:{depthWidthRatio:1/3,saturationFactor:1,brightnessFactor:1,colorSpread:1,transformFillStroke:!0},triggers:{groupCount:"panzoom"},updaters:{panzoom:function(e){var t=e.visibleMaxX-e.visibleMinX,i=e.visibleMaxY-e.visibleMinY,n=e.flipXY?e.innerHeight:e.innerWidth,r=e.flipXY?e.innerWidth:e.innerHeight,s=this.getSurface(),o=!!s&&s.getInherited().rtl;o&&!e.flipXY?e.translationX=n+e.visibleMinX*n/t:e.translationX=-e.visibleMinX*n/t,e.translationY=-e.visibleMinY*(r-this.depth)/i,e.scalingX=(o&&!e.flipXY?-1:1)*n/t,e.scalingY=(r-this.depth)/i,e.scalingCenterX=0,e.scalingCenterY=0,this.applyTransformations(!0)}}}},config:{showStroke:!1},depth:0,drawBar:function(e,t,i,n,r,s,o,a){var l,c,u,d,h=this.attr,f={},g=h.renderer;f.x=.5*(n+s),f.y=r,f.width=.75*(s-n),f.height=o-r,f.depth=c=f.width*h.depthWidthRatio,f.orientation=h.flipXY?"horizontal":"vertical",f.saturationFactor=h.saturationFactor,f.brightnessFactor=h.brightnessFactor,f.colorSpread=h.colorSpread,c!==this.depth&&(this.depth=c,(u=this.getSeries()).fireEvent("depthchange",u,c)),g&&(d=[this,f,{store:this.getStore()},a],l=Ext.callback(g,null,d,0,this.getSeries()),Ext.apply(f,l)),this.putMarker("items",f,a,!g)}}),Ext.define("Ext.chart.sprite.Bar3D",{extend:Ext.draw.sprite.Sprite,alias:"sprite.bar3d",type:"bar3d",inheritableStatics:{def:{processors:{x:"number",y:"number",width:"number",height:"number",depth:"number",orientation:"enums(vertical,horizontal)",showStroke:"bool",saturationFactor:"number",brightnessFactor:"number",colorSpread:"number"},triggers:{x:"bbox",y:"bbox",width:"bbox",height:"bbox",depth:"bbox",orientation:"bbox"},defaults:{x:0,y:0,width:8,height:8,depth:8,orientation:"vertical",showStroke:!1,saturationFactor:1,brightnessFactor:1,colorSpread:1,lineJoin:"bevel"}}},constructor:function(e){this.callParent([e]),this.topGradient=new Ext.draw.gradient.Linear({}),this.rightGradient=new Ext.draw.gradient.Linear({}),this.frontGradient=new Ext.draw.gradient.Linear({})},updatePlainBBox:function(e){var t=this.attr,i=t.x,n=t.y,r=t.width,s=t.height,o=t.depth;e.x=i-.5*r,e.width=r+o,0<s?(e.y=n,e.height=s+o):(e.y=n+o,e.height=s-o)},render:function(e,t){var i,n,r,s=this,o=s.attr,a=o.x,l=o.y,c=l+o.height,u=l<c,d=.5*o.width,h=o.depth,f="horizontal"===o.orientation,g=o.globalAlpha<1,p=o.fillStyle,m=Ext.util.Color.create(p.isGradient?p.getStops()[0].color:p),x=o.saturationFactor,y=o.brightnessFactor,v=o.colorSpread,E=m.getHSV(),b={};o.showStroke||(t.strokeStyle=Ext.util.Color.RGBA_NONE),u&&(r=l,l=c,c=r),s.topGradient.setDegrees(f?0:80),s.topGradient.setStops([{offset:0,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*x,0,1),Ext.Number.constrain((.5+.1*v)*y,0,1))},{offset:1,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*x,0,1),Ext.Number.constrain((.5-.11*v)*y,0,1))}]),s.rightGradient.setDegrees(f?45:90),s.rightGradient.setStops([{offset:0,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*x,0,1),Ext.Number.constrain((.5-.14*v)*y,0,1))},{offset:1,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*(1+.4*v)*x,0,1),Ext.Number.constrain((.5-.32*v)*y,0,1))}]),f?s.frontGradient.setDegrees(0):s.frontGradient.setRadians(Math.atan2(l-c,2*d)),s.frontGradient.setStops([{offset:0,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*(1-.1*v)*x,0,1),Ext.Number.constrain((.5+.1*v)*y,0,1))},{offset:1,color:Ext.util.Color.fromHSV(E[0],Ext.Number.constrain(E[1]*(1+.1*v)*x,0,1),Ext.Number.constrain((.5-.23*v)*y,0,1))}]),(g||u)&&(t.beginPath(),t.moveTo(a-d,c),t.lineTo(a-d+h,c+h),t.lineTo(a+d+h,c+h),t.lineTo(a+d,c),t.closePath(),b.x=a-d,b.y=l,b.width=d+h,b.height=h,t.fillStyle=(f?s.rightGradient:s.topGradient).generateGradient(t,b),t.fillStroke(o)),g&&(t.beginPath(),t.moveTo(a-d,l),t.lineTo(a-d+h,l+h),t.lineTo(a-d+h,c+h),t.lineTo(a-d,c),t.closePath(),b.x=a+d,b.y=c,b.width=h,b.height=l+h-c,t.fillStyle=(f?s.topGradient:s.rightGradient).generateGradient(t,b),t.fillStroke(o)),n=e.roundPixel(l),t.beginPath(),t.moveTo(a-d,n),t.lineTo(a-d+h,l+h),t.lineTo(a+d+h,l+h),t.lineTo(a+d,n),t.closePath(),b.x=a-d,b.y=l,b.width=d+h,b.height=h,t.fillStyle=(f?s.rightGradient:s.topGradient).generateGradient(t,b),t.fillStroke(o),i=e.roundPixel(a+d),t.beginPath(),t.moveTo(i,e.roundPixel(l)),t.lineTo(a+d+h,l+h),t.lineTo(a+d+h,c+h),t.lineTo(i,c),t.closePath(),b.x=a+d,b.y=c,b.width=h,b.height=l+h-c,t.fillStyle=(f?s.topGradient:s.rightGradient).generateGradient(t,b),t.fillStroke(o),i=e.roundPixel(a+d),n=e.roundPixel(l),t.beginPath(),t.moveTo(a-d,c),t.lineTo(a-d,n),t.lineTo(i,n),t.lineTo(i,c),t.closePath(),b.x=a-d,b.y=c,b.width=2*d,b.height=l-c,t.fillStyle=s.frontGradient.generateGradient(t,b),t.fillStroke(o)}}),Ext.define("Ext.chart.series.Bar3D",{extend:Ext.chart.series.Bar,alias:"series.bar3d",type:"bar3d",seriesType:"bar3dSeries",is3D:!0,config:{itemInstancing:{type:"bar3d",animation:{customDurations:{x:0,y:0,width:0,height:0,depth:0}}},highlightCfg:{opacity:.8}},reversedSpriteZOrder:!1,updateXAxis:function(e,t){"category3d"!==e.type&&Ext.raise("'bar3d' series should be used with a 'category3d' axis. Please refer to the 'bar3d' series docs."),this.callParent([e,t])},getDepth:function(){var e=this.getSprites()[0];return e&&e.depth||0}}),Ext.define("Ext.chart.series.sprite.BoxPlot",{alias:"sprite.boxplotSeries",extend:Ext.chart.series.sprite.Cartesian,inheritableStatics:{def:{processors:{dataLow:"data",dataQ1:"data",dataQ3:"data",dataHigh:"data",minBoxWidth:"number",maxBoxWidth:"number",minGapWidth:"number"},aliases:{dataMedian:"dataY"},defaults:{minBoxWidth:2,maxBoxWidth:40,minGapWidth:5}}},renderClipped:function(e,t,i){if(!this.cleanRedraw){var n,r,s,o,a,l,c,u,d,h=this.attr,f=this.getSeries(),g=h.renderer,p={store:this.getStore()},m={},x=h.dataX,y=h.dataLow,v=h.dataQ1,E=h.dataY,b=h.dataQ3,C=h.dataHigh,S=Math.min(i[0],i[2]),w=Math.max(i[0],i[2]),T=Math.max(0,Math.floor(S)),P=Math.min(x.length-1,Math.ceil(w)),I=h.matrix,A=I.elements[0],k=I.elements[3],D=I.elements[4],R=I.elements[5],M=Math.abs(A)-h.minGapWidth,F=Math.min(M,h.maxBoxWidth),L=Math.round(Math.max(h.minBoxWidth,F));for(g&&(c=[this,m,p]),d=T;d<=P;d++)n=x[d]*A+D,r=y[d]*k+R,s=v[d]*k+R,o=E[d]*k+R,a=b[d]*k+R,l=C[d]*k+R,m.x=n,m.low=r,m.q1=s,m.median=o,m.q3=a,m.high=l,m.boxWidth=L,g&&(c[3]=d,u=Ext.callback(g,null,c,0,f),Ext.apply(m,u)),this.putMarker("items",m,d,!g)}}}),Ext.define("Ext.chart.sprite.BoxPlot",{extend:Ext.draw.sprite.Sprite,alias:"sprite.boxplot",type:"boxplot",inheritableStatics:{def:{processors:{x:"number",low:"number",q1:"number",median:"number",q3:"number",high:"number",boxWidth:"number",whiskerWidth:"number",crisp:"bool"},triggers:{x:"bbox",low:"bbox",high:"bbox",boxWidth:"bbox",whiskerWidth:"bbox",crisp:"bbox"},defaults:{x:0,low:-20,q1:-10,median:0,q3:10,high:20,boxWidth:12,whiskerWidth:.5,crisp:!0,fillStyle:"#ccc",strokeStyle:"#000"}}},updatePlainBBox:function(e){var t=this.attr,i=t.lineWidth/2,n=t.x-t.boxWidth/2-i,r=t.high-i,s=t.boxWidth+t.lineWidth,o=t.low-t.high+t.lineWidth;e.x=n,e.y=r,e.width=s,e.height=o},render:function(e,t){var i=this.attr;i.matrix.toContext(t),i.crisp?this.crispRender(e,t):this.softRender(e,t);var n=i.debug||this.statics().debug||Ext.draw.sprite.Sprite.debug;n&&(this.attr.inverseMatrix.toContext(t),n.bbox&&this.renderBBox(e,t))},softRender:function(e,t){var i=this.attr,n=i.x,r=i.low,s=i.q1,o=i.median,a=i.q3,l=i.high,c=i.boxWidth/2,u=i.boxWidth*i.whiskerWidth/2,d=t.getLineDash();t.setLineDash([]),t.beginPath(),t.moveTo(n-c,a),t.lineTo(n+c,a),t.lineTo(n+c,s),t.lineTo(n-c,s),t.closePath(),t.fillStroke(i,!0),t.setLineDash(d),t.beginPath(),t.moveTo(n,a),t.lineTo(n,l),t.moveTo(n,s),t.lineTo(n,r),t.stroke(),t.setLineDash([]),t.beginPath(),t.moveTo(n-u,r),t.lineTo(n+u,r),t.moveTo(n-c,o),t.lineTo(n+c,o),t.moveTo(n-u,l),t.lineTo(n+u,l),t.stroke()},alignLine:function(e,t){return t=t||this.attr.lineWidth,e=Math.round(e),t%2==1&&(e-=.5),e},crispRender:function(e,t){var i=this.attr,n=i.x,r=this.alignLine(i.low),s=this.alignLine(i.q1),o=this.alignLine(i.median),a=this.alignLine(i.q3),l=this.alignLine(i.high),c=i.boxWidth/2,u=i.boxWidth*i.whiskerWidth/2,d=this.alignLine(n),h=this.alignLine(n-c),f=this.alignLine(n+c),g=d+Math.round(-u),p=d+Math.round(u),m=t.getLineDash();t.setLineDash([]),t.beginPath(),t.moveTo(h,a),t.lineTo(f,a),t.lineTo(f,s),t.lineTo(h,s),t.closePath(),t.fillStroke(i,!0),t.setLineDash(m),t.beginPath(),t.moveTo(d,a),t.lineTo(d,l),t.moveTo(d,s),t.lineTo(d,r),t.stroke(),t.setLineDash([]),t.beginPath(),t.moveTo(g,r),t.lineTo(p,r),t.moveTo(h,o),t.lineTo(f,o),t.moveTo(g,l),t.lineTo(p,l),t.stroke()}}),Ext.define("Ext.chart.series.BoxPlot",{extend:Ext.chart.series.Cartesian,alias:"series.boxplot",type:"boxplot",seriesType:"boxplotSeries",isBoxPlot:!0,config:{itemInstancing:{type:"boxplot",animation:{customDurations:{x:0,low:0,q1:0,median:0,q3:0,high:0}}},lowField:"low",q1Field:"q1",medianField:"median",q3Field:"q3",highField:"high"},fieldCategoryY:["Low","Q1","Median","Q3","High"],updateXAxis:function(e){e.setExpandRangeBy(.5),this.callParent(arguments)}}),Ext.define("Ext.draw.LimitedCache",{config:{limit:40,feeder:function(){return 0},scope:null},cache:null,constructor:function(e){this.cache={},this.cache.list=[],this.cache.tail=0,this.initConfig(e)},get:function(e){var t=this.cache,i=this.getLimit(),n=this.getFeeder(),r=this.getScope()||this;return t[e]||(t.list[t.tail]&&delete t[t.list[t.tail].cacheId],t[e]=t.list[t.tail]={value:n.apply(r,Array.prototype.slice.call(arguments,1)),cacheId:e},t.tail++,t.tail===i&&(t.tail=0)),t[e].value},clear:function(){this.cache={},this.cache.list=[],this.cache.tail=0}}),Ext.define("Ext.draw.SegmentTree",{config:{strategy:"double"},time:function(e,t,i,n,r,s,o){var a,l,c,u,d,h,f=0,g=new Date(i[e.startIdx[0]]),p=new Date(i[e.endIdx[t-1]]),m=Ext.Date,x=[[m.MILLI,1,"ms1",null],[m.MILLI,2,"ms2","ms1"],[m.MILLI,5,"ms5","ms1"],[m.MILLI,10,"ms10","ms5"],[m.MILLI,50,"ms50","ms10"],[m.MILLI,100,"ms100","ms50"],[m.MILLI,500,"ms500","ms100"],[m.SECOND,1,"s1","ms500"],[m.SECOND,10,"s10","s1"],[m.SECOND,30,"s30","s10"],[m.MINUTE,1,"mi1","s10"],[m.MINUTE,5,"mi5","mi1"],[m.MINUTE,10,"mi10","mi5"],[m.MINUTE,30,"mi30","mi10"],[m.HOUR,1,"h1","mi30"],[m.HOUR,6,"h6","h1"],[m.HOUR,12,"h12","h6"],[m.DAY,1,"d1","h12"],[m.DAY,7,"d7","d1"],[m.MONTH,1,"mo1","d1"],[m.MONTH,3,"mo3","mo1"],[m.MONTH,6,"mo6","mo3"],[m.YEAR,1,"y1","mo3"],[m.YEAR,5,"y5","y1"],[m.YEAR,10,"y10","y5"],[m.YEAR,100,"y100","y10"]],y=f,v=t,E=e.startIdx,b=e.endIdx,C=e.minIdx,S=e.maxIdx,w=e.open,T=e.close,P=e.minX,I=e.minY,A=e.maxX,k=e.maxY;for(c=0;f+1<t&&c<x.length;c++)if(g=new Date(i[E[0]]),u=x[c],g=m.align(g,u[0],u[1]),!(m.diff(g,p,u[0])>2*i.length*u[1])){for(l=u[3]&&e.map["time_"+u[3]]?(a=e.map["time_"+u[3]][0],e.map["time_"+u[3]][1]):(a=y,v),h=g,E[f=t]=E[a],b[t]=b[a],C[t]=C[a],S[t]=S[a],w[t]=w[a],T[t]=T[a],P[t]=P[a],I[t]=I[a],A[t]=A[a],k[t]=k[a],h=Ext.Date.add(h,u[0],u[1]),d=a+1;d<l;d++)i[b[d]]<+h?(b[t]=b[d],T[t]=T[d],k[d]>k[t]&&(k[t]=k[d],A[t]=A[d],S[t]=S[d]),I[d]<I[t]&&(I[t]=I[d],P[t]=P[d],C[t]=C[d])):(E[++t]=E[d],b[t]=b[d],C[t]=C[d],S[t]=S[d],w[t]=w[d],T[t]=T[d],P[t]=P[d],I[t]=I[d],A[t]=A[d],k[t]=k[d],h=Ext.Date.add(h,u[0],u[1]));f<t&&(e.map["time_"+u[2]]=[f,t])}},double:function(e,t,i,n,r,s,o){for(var a,l,c,u,d,h,f,g,p,m,x,y,v=0,E=1;v+1<t;){for(a=v,v=t,E+=E,l=a;l<v;l+=2)y=l===v-1?(c=e.startIdx[l],u=e.endIdx[l],d=e.minIdx[l],h=e.maxIdx[l],f=e.open[l],g=e.close[l],p=e.minX[l],m=e.minY[l],x=e.maxX[l],e.maxY[l]):(c=e.startIdx[l],u=e.endIdx[l+1],f=e.open[l],g=e.close[l],m=e.minY[l]<=e.minY[l+1]?(d=e.minIdx[l],p=e.minX[l],e.minY[l]):(d=e.minIdx[l+1],p=e.minX[l+1],e.minY[l+1]),e.maxY[l]>=e.maxY[l+1]?(h=e.maxIdx[l],x=e.maxX[l],e.maxY[l]):(h=e.maxIdx[l+1],x=e.maxX[l+1],e.maxY[l+1])),e.startIdx[t]=c,e.endIdx[t]=u,e.minIdx[t]=d,e.maxIdx[t]=h,e.open[t]=f,e.close[t]=g,e.minX[t]=p,e.minY[t]=m,e.maxX[t]=x,e.maxY[t]=y,t++;e.map["double_"+E]=[v,t]}},none:Ext.emptyFn,aggregateData:function(e,t,i,n,r){var s,o,a=e.length,l=[],c=[],u=[],d=[],h=[],f=[],g=[],p=[],m=[],x=[],y={startIdx:l,endIdx:c,minIdx:u,maxIdx:d,open:h,minX:f,minY:g,maxX:p,maxY:m,close:x},v=1/0,E=-1/0;for(s=0;s<a;s++)o=e[s],h[d[u[c[l[s]=s]=s]=s]=s]=t[s],f[s]=o,g[s]=n[s],p[s]=o,m[s]=i[s],x[s]=r[s],o<v&&(v=o),E<o&&(E=o);return y.map={original:[0,a]},y.range=Math.abs(E-v),a&&this[this.getStrategy()](y,a,e,t,i,n,r),y},binarySearch:function(e,t,i,n,r){var s,o,a=this.dataX;if(n<=a[e[0]])return t;if(n>=a[e[i-1]])return i-1;for(;t+1<i;){if((o=a[e[s=t+i>>1]])===n)return s;o<n?t=s:i=s}return r?t:i},constructor:function(e){this.initConfig(e)},setData:function(e,t,i,n,r){i||(r=n=i=t),this.dataX=e,this.dataOpen=t,this.dataHigh=i,this.dataLow=n,this.dataClose=r,e.length===i.length&&e.length===n.length&&(this.cache=this.aggregateData(e,t,i,n,r))},getAggregation:function(e,t,i){if(!this.cache)return null;var n,r,s,o,a=1/0,l=this.cache,c=l.range,u=l.map,d=u.original;for(n in u)0!=(s=(r=u[n])[1]-r[0]-1)&&i<=(o=c/s)&&o<a&&(d=r,a=o);return{data:l,start:Math.max(this.binarySearch(l.startIdx,d[0],d[1],e,!0),d[0]),end:Math.min(this.binarySearch(l.endIdx,d[0],d[1],t,!1)+1,d[1])}}}),Ext.define("Ext.chart.series.sprite.Aggregative",{extend:Ext.chart.series.sprite.Cartesian,inheritableStatics:{def:{processors:{dataHigh:"data",dataLow:"data",dataClose:"data"},aliases:{dataOpen:"dataY"},defaults:{dataHigh:null,dataLow:null,dataClose:null}}},config:{aggregator:{}},applyAggregator:function(e,t){return Ext.factory(e,Ext.draw.SegmentTree,t)},constructor:function(){this.callParent(arguments)},processDataY:function(){var e,t=this.attr,i=t.dataHigh,n=t.dataLow,r=t.dataClose,s=t.dataY;this.callParent(arguments),t.dataX&&s&&0<s.length&&(e=this.getAggregator(),i?e.setData(t.dataX,t.dataY,i,n,r):e.setData(t.dataX,t.dataY))},getGapWidth:function(){return 1},renderClipped:function(e,t,i,n){var r=Math.min(i[0],i[2]),s=Math.max(i[0],i[2]),o=this.getAggregator(),a=o&&o.getAggregation(r,s,(s-r)/n[2]*this.getGapWidth());a&&(this.dataStart=a.data.startIdx[a.start],this.dataEnd=a.data.endIdx[a.end-1],this.renderAggregates(a.data,a.start,a.end,e,t,i,n))}}),Ext.define("Ext.chart.series.sprite.CandleStick",{alias:"sprite.candlestickSeries",extend:Ext.chart.series.sprite.Aggregative,inheritableStatics:{def:{processors:{raiseStyle:function(e,t){return Ext.merge({},t||{},e)},dropStyle:function(e,t){return Ext.merge({},t||{},e)},barWidth:"number",padding:"number",ohlcType:"enums(candlestick,ohlc)"},defaults:{raiseStyle:{strokeStyle:"green",fillStyle:"green"},dropStyle:{strokeStyle:"red",fillStyle:"red"},barWidth:15,padding:3,lineJoin:"miter",miterLimit:5,ohlcType:"candlestick"},triggers:{raiseStyle:"raiseStyle",dropStyle:"dropStyle"},updaters:{raiseStyle:function(){var e=this.raiseTemplate;e&&e.setAttributes(this.attr.raiseStyle)},dropStyle:function(){var e=this.dropTemplate;e&&e.setAttributes(this.attr.dropStyle)}}}},candlestick:function(e,t,i,n,r,s,o){var a=Math.min(t,r),l=Math.max(t,r);e.moveTo(s,n),e.lineTo(s,a),e.moveTo(s+o,l),e.lineTo(s+o,a),e.lineTo(s-o,a),e.lineTo(s-o,l),e.closePath(),e.moveTo(s,i),e.lineTo(s,l)},ohlc:function(e,t,i,n,r,s,o){e.moveTo(s,i),e.lineTo(s,n),e.moveTo(s,t),e.lineTo(s-o,t),e.moveTo(s,r),e.lineTo(s+o,r)},constructor:function(){var e=Ext.draw.sprite.Rect;this.callParent(arguments),this.raiseTemplate=new e({parent:this}),this.dropTemplate=new e({parent:this})},getGapWidth:function(){var e=this.attr;return e.barWidth+e.padding},renderAggregates:function(e,t,i,n,r,s){var o,a,l,c,u,d,h,f,g,p=this,m=p.attr,x=m.ohlcType,y=p.getSeries(),v=m.matrix,E=v.getXX(),b=v.getYY(),C=v.getDX(),S=v.getDY(),w=Math.round(.5*m.barWidth),T=m.dataX,P=e.open,I=e.close,A=e.maxY,k=e.minY,D=e.startIdx,R=m.lineWidth*n.devicePixelRatio/2,M=m.renderer,F=M&&{};for(p.rendererData=p.rendererData||{store:p.getStore()},R-=Math.floor(R),r.save(),(g=p.raiseTemplate).useAttributes(r,s),M||r.beginPath(),f=t;f<i;f++)P[f]<=I[f]&&(l=Math.round(P[f]*b+S)+R,c=Math.round(A[f]*b+S)+R,u=Math.round(k[f]*b+S)+R,d=Math.round(I[f]*b+S)+R,h=Math.round(T[D[f]]*E+C)+R,M&&(r.save(),r.beginPath(),F.open=l,F.high=c,F.low=u,F.close=d,F.mid=h,F.halfWidth=w,o=[p,F,p.rendererData,f],a=Ext.callback(M,null,o,0,y),Ext.apply(r,a)),p[x](r,l,c,u,d,h,w),M&&(r.fillStroke(g.attr),r.restore()));for(M||r.fillStroke(g.attr),r.restore(),r.save(),(g=p.dropTemplate).useAttributes(r,s),M||r.beginPath(),f=t;f<i;f++)P[f]>I[f]&&(l=Math.round(P[f]*b+S)+R,c=Math.round(A[f]*b+S)+R,u=Math.round(k[f]*b+S)+R,d=Math.round(I[f]*b+S)+R,h=Math.round(T[D[f]]*E+C)+R,M&&(r.save(),r.beginPath(),F.open=l,F.high=c,F.low=u,F.close=d,F.mid=h,F.halfWidth=w,o=[p,F,p.rendererData,f],a=Ext.callback(M,null,o,0,p.getSeries()),Ext.apply(r,a)),p[x](r,l,c,u,d,h,w),M&&(r.fillStroke(g.attr),r.restore()));M||r.fillStroke(g.attr),r.restore()}}),Ext.define("Ext.chart.series.CandleStick",{extend:Ext.chart.series.Cartesian,alias:"series.candlestick",type:"candlestick",seriesType:"candlestickSeries",isCandleStick:!0,config:{openField:null,highField:null,lowField:null,closeField:null},fieldCategoryY:["Open","High","Low","Close"],themeColorCount:function(){return 2}}),Ext.define("Ext.chart.series.Polar",{extend:Ext.chart.series.Series,config:{rotation:0,radius:null,center:[0,0],offsetX:0,offsetY:0,showInLegend:!0,xField:null,yField:null,angleField:null,radiusField:null,xAxis:null,yAxis:null},directions:["X","Y"],fieldCategoryX:["X"],fieldCategoryY:["Y"],deprecatedConfigs:{field:"angleField",lengthField:"radiusField"},constructor:function(e){var t,i=this.self.getConfigurator().configs;if(e)for(t in this.deprecatedConfigs)t in e&&!(e in i)&&Ext.raise("'"+t+"' config has been deprecated. Please use the '"+this.deprecatedConfigs[t]+"' config instead.");this.callParent([e])},getXField:function(){return this.getAngleField()},updateXField:function(e){this.setAngleField(e)},getYField:function(){return this.getRadiusField()},updateYField:function(e){this.setRadiusField(e)},applyXAxis:function(e,t){return this.getChart().getAxis(e)||t},applyYAxis:function(e,t){return this.getChart().getAxis(e)||t},getXRange:function(){return[this.dataRange[0],this.dataRange[2]]},getYRange:function(){return[this.dataRange[1],this.dataRange[3]]},themeColorCount:function(){var e=this.getStore();return e&&e.getCount()||0},isStoreDependantColorCount:!0,getDefaultSpriteConfig:function(){return{type:this.seriesType,renderer:this.getRenderer(),centerX:0,centerY:0,rotationCenterX:0,rotationCenterY:0}},applyRotation:function(e){return Ext.draw.sprite.AttributeParser.angle(Ext.draw.Draw.rad(e))},updateRotation:function(e){var t=this.getSprites();t&&t[0]&&t[0].setAttributes({baseRotation:e})}}),Ext.define("Ext.chart.series.Gauge",{alias:"series.gauge",extend:Ext.chart.series.Polar,type:"gauge",seriesType:"pieslice",config:{needle:!1,needleLength:90,needleWidth:4,donut:30,showInLegend:!1,value:null,colors:null,sectors:null,minimum:0,maximum:100,rotation:0,totalAngle:Math.PI/2,rect:[0,0,1,1],center:[.5,.75],radius:.5,wholeDisk:!1},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},updateNeedle:function(e){var t=this.getSprites(),i=this.valueToAngle(this.getValue());t&&t.length&&(t[0].setAttributes({startAngle:e?i:0,endAngle:i,strokeOpacity:e?1:0,lineWidth:e?this.getNeedleWidth():0}),this.doUpdateStyles())},themeColorCount:function(){var e=this.getStore();return(e&&e.getCount()||0)+(this.getNeedle()?0:1)},updateColors:function(e,t){var i,n=this.getSectors(),r=n&&n.length,s=this.getSprites(),o=Ext.Array.clone(e),a=e&&e.length;if(a&&e[0]){for(i=0;i<r;i++)o[i+1]=n[i].color||o[i+1]||e[i%a];s.length&&s[0].setAttributes({strokeStyle:o[0]}),this.setSubStyle({fillStyle:o,strokeStyle:o}),this.doUpdateStyles()}},updateRect:function(e){var t,i,n,r=this.getWholeDisk()?Math.PI:this.getTotalAngle()/2,s=this.getDonut()/100;i=r<=Math.PI/2?(t=2*Math.sin(r),1-s*Math.cos(r)):(t=2,1-Math.cos(r)),n=Math.min(e[2]/t,e[3]/i),this.setRadius(n),this.setCenter([e[2]/2,n+(e[3]-i*n)/2])},updateCenter:function(e){this.setStyle({centerX:e[0],centerY:e[1],rotationCenterX:e[0],rotationCenterY:e[1]}),this.doUpdateStyles()},updateRotation:function(e){this.setStyle({rotationRads:e-(this.getTotalAngle()+Math.PI)/2}),this.doUpdateStyles()},doUpdateShape:function(e,t){var i,n=this.getSectors(),r=n&&n.length||0;for(i=[e*(this.getNeedleLength()/100),e];r--;)i.push(e);this.setSubStyle({endRho:i,startRho:e/100*t}),this.doUpdateStyles()},updateRadius:function(e){var t=this.getDonut();this.doUpdateShape(e,t)},updateDonut:function(e){var t=this.getRadius();this.doUpdateShape(t,e)},valueToAngle:function(e){return e=this.applyValue(e),this.getTotalAngle()*(e-this.getMinimum())/(this.getMaximum()-this.getMinimum())},applyValue:function(e){return Math.min(this.getMaximum(),Math.max(e,this.getMinimum()))},updateValue:function(e){var t=this.getNeedle(),i=this.valueToAngle(e),n=this.getSprites();n[0].getRendererData().value=e,n[0].setAttributes({startAngle:t?i:0,endAngle:i}),this.doUpdateStyles()},processData:function(){var e,t,i,n,r,s,o,a=this.getStore(),l=a&&a.first();l&&(s=this.getXField())&&(o=l.get(s)),(i=this.getXAxis())&&(n=i.getMinimum(),r=i.getMaximum(),t=(e=i.getSprites()[0].getAnimation()).getDuration(),e.setDuration(0),Ext.isNumber(n)?this.setMinimum(n):i.setMinimum(this.getMinimum()),Ext.isNumber(r)?this.setMaximum(r):i.setMaximum(this.getMaximum()),e.setDuration(t)),Ext.isNumber(o)||(o=this.getMinimum()),this.setValue(o)},getDefaultSpriteConfig:function(){return{type:this.seriesType,renderer:this.getRenderer(),animation:{customDurations:{translationX:0,translationY:0,rotationCenterX:0,rotationCenterY:0,centerX:0,centerY:0,startRho:0,endRho:0,baseRotation:0}}}},normalizeSectors:function(e){var t,i,n,r,s=this,o=e&&e.length||0;if(o)for(t=0;t<o;t++)"number"==typeof(i=e[t])?(e[t]={start:0<t?e[t-1].end:s.getMinimum(),end:Math.min(i,s.getMaximum())},t===o-1&&e[t].end<s.getMaximum()&&(e[t+1]={start:e[t].end,end:s.getMaximum()})):(n="number"==typeof i.start?Math.max(i.start,s.getMinimum()):0<t?e[t-1].end:s.getMinimum(),r="number"==typeof i.end?Math.min(i.end,s.getMaximum()):s.getMaximum(),e[t].start=n,e[t].end=r);else e=[{start:s.getMinimum(),end:s.getMaximum()}];return e},getSprites:function(){var e,t,i=this,n=i.getStore(),r=i.getValue(),s=i.getLabel();if(!n&&!Ext.isNumber(r))return Ext.emptyArray;var o,a,l,c,u=i.getChart(),d=i.getAnimation()||u&&u.getAnimation(),h=i.sprites,f=0,g=[];if(h&&h.length)return h[0].setAnimation(d),h;for(c={store:n,field:i.getXField(),angleField:i.getXField(),value:r,series:i},i.needleSprite=o=i.createSprite(),o.setAttributes({zIndex:10},!0),o.setRendererData(c),o.setRendererIndex(f++),g.push(i.getNeedleWidth()),s&&s.getTemplate().setField(!0),e=0,t=(a=i.normalizeSectors(i.getSectors())).length;e<t;e++)l={startAngle:i.valueToAngle(a[e].start),endAngle:i.valueToAngle(a[e].end),label:a[e].label,fillStyle:a[e].color,strokeOpacity:0,doCallout:!1,labelOverflowPadding:-1},Ext.apply(l,a[e].style),(o=i.createSprite()).setRendererData(c),o.setRendererIndex(f++),o.setAttributes(l,!0),g.push(l.lineWidth);return i.setSubStyle({lineWidth:g}),i.doUpdateStyles(),h},doUpdateStyles:function(){this.callParent(),this.sprites.length&&this.needleSprite.setAttributes({startRho:this.getNeedle()?0:this.getRadius()/100*this.getDonut()})}}),Ext.define("Ext.chart.series.sprite.Line",{alias:"sprite.lineSeries",extend:Ext.chart.series.sprite.Aggregative,inheritableStatics:{def:{processors:{curve:"default",fillArea:"bool",nullStyle:"enums(gap,connect,origin)",preciseStroke:"bool",xAxis:"default",yCap:"default"},defaults:{curve:{type:"linear"},nullStyle:"connect",fillArea:!1,preciseStroke:!0,xAxis:null,yCap:Math.pow(2,20),yJump:50},triggers:{dataX:"dataX,bbox,curve",dataY:"dataY,bbox,curve",curve:"curve"},updaters:{curve:"curveUpdater"}}},list:null,curveUpdater:function(e){var t=e.dataX,i=e.dataY,n=e.curve,r=t&&i&&2<t.length&&2<i.length,s=n.type;r&&("natural"===s?(this.smoothX=Ext.draw.Draw.naturalSpline(t),this.smoothY=Ext.draw.Draw.naturalSpline(i)):"cardinal"===s?(this.smoothX=Ext.draw.Draw.cardinalSpline(t,n.tension),this.smoothY=Ext.draw.Draw.cardinalSpline(i,n.tension)):r=!1),r||(delete this.smoothX,delete this.smoothY)},updatePlainBBox:function(e){var t=this.attr,i=Math.min(0,t.dataMinY),n=Math.max(0,t.dataMaxY);e.x=t.dataMinX,e.y=i,e.width=t.dataMaxX-t.dataMinX,e.height=n-i},drawStrip:function(e,t){var i,n;for(e.moveTo(t[0],t[1]),i=2,n=t.length;i<n;i+=2)e.lineTo(t[i],t[i+1])},drawStraightStroke:function(e,t,i,n,r,s){var o,a,l,c,u,d,h,f,g,p,m,x,y,v,E,b,C,S,w,T,P=this.attr,I=P.nullStyle,A="connect"===I,k="origin"===I,D=P.renderer,R="step-after"===P.curve.type,M=!0,F=r.length,L={type:"line",smooth:!1,step:R},O=[];for(t.beginPath(),T=3;T<F;T+=3)b=r[T-3],C=r[T-2],v=r[T],E=r[T+1],S=r[T+3],w=r[T+4],c=Ext.isNumber(b),u=Ext.isNumber(v),d=Ext.isNumber(S),h=c&&Ext.isNumber(C),f=u&&Ext.isNumber(E),g=d&&Ext.isNumber(w),k&&(!h&&c&&(C=s,h=!0),!f&&u&&(E=s,f=!0),!g&&d&&(w=s,g=!0)),D&&(L.x=v,L.y=E,L.x0=b,L.y0=C,a=[this,L,this.rendererData,i+T/3],o=Ext.callback(D,null,a,0,this.getSeries())),p&&A&&h&&m&&(x=m[0],y=m[1],M&&(t.beginPath(),t.moveTo(x,y),O.push(x,y),l=x,M=!1),R&&(t.lineTo(b,y),O.push(b,y)),t.lineTo(b,C),O.push(b,C),p=!(m=[b,C])),A&&m&&f&&!h&&(b=m[0],C=m[1],h=!0),f&&(m=[v,E]),h&&f?(M&&(t.beginPath(),t.moveTo(b,C),O.push(b,C),l=b,M=!1),R&&(t.lineTo(v,C),O.push(v,C)),t.lineTo(v,E),O.push(v,E),!o&&g||(t.save(),Ext.apply(t,o),o=null,P.fillArea&&(t.lineTo(v,s),t.lineTo(l,s),t.closePath(),t.fill()),t.beginPath(),this.drawStrip(t,O),O=[],t.stroke(),t.restore(),t.beginPath(),M=!0)):p=!0},calculateScale:function(e,t){for(var i=0,n=e;n<t&&0<e;)n+=e>>++i;return Math.pow(2,0<i?i-1:i)},drawSmoothStroke:function(e,t,i,n,r,s){var o,a,l,c,u,d,h,f,g,p,m,x,y=this.attr,v=y.step,E=y.matrix,b=y.renderer,C=E.getXX(),S=E.getYY(),w=E.getDX(),T=E.getDY(),P=this.smoothX,I=this.smoothY,A=this.calculateScale(y.dataX.length,n),k={type:"line",smooth:!0,step:v};for(t.beginPath(),t.moveTo(P[3*i]*C+w,I[3*i]*S+T),g=0,p=3*i+1;g<r.length-3;g+=3,p+=3*A)o=P[p]*C+w,a=I[p]*S+T,l=P[p+1]*C+w,c=I[p+1]*S+T,u=e.roundPixel(r[g+3]),d=r[g+4],h=e.roundPixel(r[g]),f=r[g+1],b&&(k.x0=h,k.y0=f,k.cx1=o,k.cy1=a,k.cx2=l,k.cy2=c,k.x=u,k.y=d,x=[this,k,this.rendererData,i+g/3+1],m=Ext.callback(b,null,x,0,this.getSeries()),t.save(),Ext.apply(t,m)),y.fillArea&&(t.moveTo(h,f),t.bezierCurveTo(o,a,l,c,u,d),t.lineTo(u,s),t.lineTo(h,s),t.lineTo(h,f),t.closePath(),t.fill(),t.beginPath()),t.moveTo(h,f),t.bezierCurveTo(o,a,l,c,u,d),t.stroke(),t.moveTo(h,f),t.closePath(),b&&t.restore(),t.beginPath(),t.moveTo(u,d);t.beginPath()},drawLabel:function(e,t,i,n,r){var s,o,a,l,c,u,d,h=this,f=h.attr,g=h.getMarker("labels"),p=g.getTemplate(),m=h.labelCfg||(h.labelCfg={}),x=h.surfaceMatrix,y=f.labelOverflowPadding;switch(m.x=x.x(t,i),m.y=x.y(t,i),f.flipXY?m.rotationRads=.5*Math.PI:m.rotationRads=0,m.text=e,p.attr.renderer&&(u=[e,g,m,h.rendererData,n],"string"==typeof(c=Ext.callback(p.attr.renderer,null,u,0,h.getSeries()))?m.text=c:"object"==typeof c&&("text"in c&&(m.text=c.text),d=!0)),(l=h.getMarkerBBox("labels",n,!0))||(h.putMarker("labels",m,n),l=h.getMarkerBBox("labels",n,!0)),a=l.height/2,s=t,p.attr.display){case"under":o=i-a-y;break;case"rotate":s+=y,o=i-y,m.rotationRads=-Math.PI/4;break;default:o=i+a+y}m.x=x.x(s,o),m.y=x.y(s,o),d&&Ext.apply(m,c),h.putMarker("labels",m,n)},drawMarker:function(e,t,i){var n,r,s=this.attr.renderer,o=this.surfaceMatrix,a={};s&&this.getMarker("markers")&&(a.type="marker",a.x=e,a.y=t,r=[this,a,this.rendererData,i],(n=Ext.callback(s,null,r,0,this.getSeries()))&&Ext.apply(a,n)),a.translationX=o.x(e,t),a.translationY=o.y(e,t),delete a.x,delete a.y,this.putMarker("markers",a,i,!s)},drawStroke:function(e,t,i,n,r,s){this.smoothX&&this.smoothY?this.drawSmoothStroke(e,t,i,n,r,s):this.drawStraightStroke(e,t,i,n,r,s)},renderAggregates:function(e,t,i,n,r,s,o){var a,l,c,u,d,h,f,g,p,m,x,y,v,E,b,C,S,w,T=this,P=T.attr,I=P.dataX,A=P.dataY,k=P.labels,D=P.xAxis,R=P.yCap,M=P.smooth&&T.smoothX&&T.smoothY,F=k&&T.getMarker("labels"),L=T.getMarker("markers"),O=P.matrix,B=n.devicePixelRatio,N=O.getXX(),V=O.getYY(),H=O.getDX(),z=O.getDY(),G=T.list||(T.list=[]),$=e.minX,_=e.maxX,W=e.minY,Y=e.maxY,U=e.startIdx,X=!0;for(T.rendererData={store:T.getStore()},G.length=0,p=t;p<i;p++)x=$[p],y=_[p],v=W[p],E=Y[p],a=Ext.isNumber(x),c=Ext.isNumber(v),l=Ext.isNumber(y),u=Ext.isNumber(E),x<y?(G.push(a?x*N+H:null,c?v*V+z:null,U[p]),G.push(l?y*N+H:null,u?E*V+z:null,U[p])):y<x?(G.push(l?y*N+H:null,u?E*V+z:null,U[p]),G.push(a?x*N+H:null,c?v*V+z:null,U[p])):G.push(l?y*N+H:null,u?E*V+z:null,U[p]);if(G.length){for(p=0;p<G.length;p+=3)f=G[p],g=G[p+1],Ext.isNumber(f)&&Ext.isNumber(g)?(R<g?g=R:g<-R&&(g=-R),G[p+1]=g,m=G[p+2],L&&T.drawMarker(f,g,m),F&&k[m]&&T.drawLabel(k[m],f,g,m,o)):X=!1;T.isContinuousLine=X,M&&!X&&Ext.raise("Line smoothing in only supported for gapless data, where all data points are finite numbers."),d=D?(h="vertical"===D.getAlignment(),Ext.isNumber(D.floatingAtCoord)?(h?o[2]:o[3])-D.floatingAtCoord:h?o[0]:o[1]):P.flipXY?o[0]:o[1],P.preciseStroke?(P.fillArea&&r.fill(),P.transformFillStroke&&P.inverseMatrix.toContext(r),T.drawStroke(n,r,t,i,G,d),P.transformFillStroke&&P.matrix.toContext(r),r.stroke()):(T.drawStroke(n,r,t,i,G,d),X&&M&&P.fillArea&&!P.renderer&&(b=I[I.length-1]*N+H+B,C=A[A.length-1]*V+z,S=I[0]*N+H-B,w=A[0]*V+z,r.lineTo(b,C),r.lineTo(b,d-P.lineWidth),r.lineTo(S,d-P.lineWidth),r.lineTo(S,w)),P.transformFillStroke&&P.matrix.toContext(r),P.fillArea?r.fillStroke(P,!0):r.stroke(!0))}}}),Ext.define("Ext.chart.series.Line",{extend:Ext.chart.series.Cartesian,alias:"series.line",type:"line",seriesType:"lineSeries",isLine:!0,config:{selectionTolerance:20,curve:{type:"linear"},smooth:null,step:null,nullStyle:"gap",fill:void 0,aggregator:{strategy:"double"}},themeMarkerCount:function(){return 1},getDefaultSpriteConfig:function(){var e,t=this.callParent(arguments),i=Ext.apply({},this.getStyle()),n=!1;return void 0!==this.config.fill?this.config.fill&&(n=!0,void 0===i.fillStyle&&(void 0===i.strokeStyle?(e=this.getStyleWithTheme(),i.fillStyle=e.fillStyle,i.strokeStyle=e.strokeStyle):i.fillStyle=i.strokeStyle)):i.fillStyle&&(n=!0),n||delete i.fillStyle,i=Ext.apply(t||{},i),Ext.apply(i,{fillArea:n,selectionTolerance:this.config.selectionTolerance})},updateFill:function(t){this.withSprite(function(e){return e.setAttributes({fillArea:t})})},updateCurve:function(t){this.withSprite(function(e){return e.setAttributes({curve:t})})},getCurve:function(){return this.withSprite(function(e){return e.attr.curve})},updateNullStyle:function(t){this.withSprite(function(e){return e.setAttributes({nullStyle:t})})},updateSmooth:function(e){this.setCurve({type:e?"natural":"linear"})},updateStep:function(e){this.setCurve({type:e?"step-after":"linear"})}}),Ext.define("Ext.chart.series.sprite.PieSlice",{extend:Ext.draw.sprite.Sector,mixins:{markerHolder:Ext.chart.MarkerHolder},alias:"sprite.pieslice",inheritableStatics:{def:{processors:{doCallout:"bool",label:"string",rotateLabels:"bool",labelOverflowPadding:"number",renderer:"default"},defaults:{doCallout:!0,rotateLabels:!0,label:"",labelOverflowPadding:10,renderer:null}}},config:{rendererData:null,rendererIndex:0,series:null},setGradientBBox:function(e,t){var i=this.attr;if((i.fillStyle&&i.fillStyle.isGradient||i.strokeStyle&&i.strokeStyle.isGradient)&&!i.constrainGradients){var n=this.getMidAngle(),r=i.margin,s=i.centerX,o=i.centerY,a=i.endRho,l=i.matrix,c=l.getScaleX()*a,u=l.getScaleY()*a,d={width:c+c,height:u+u};r&&(s+=r*Math.cos(n),o+=r*Math.sin(n)),d.x=l.x(s,o)-c,d.y=l.y(s,o)-u,e.setGradientBBox(d)}else this.callParent([e,t])},render:function(e,t,i){var n,r=this,s=r.attr,o={};s.renderer&&(o={type:"sector",centerX:s.centerX,centerY:s.centerY,margin:s.margin,startAngle:Math.min(s.startAngle,s.endAngle),endAngle:Math.max(s.startAngle,s.endAngle),startRho:Math.min(s.startRho,s.endRho),endRho:Math.max(s.startRho,s.endRho)},n=Ext.callback(s.renderer,null,[r,o,r.getRendererData(),r.getRendererIndex()],0,r.getSeries()),r.setAttributes(n),r.useAttributes(t,i)),r.callParent([e,t,i]),s.label&&r.getMarker("labels")&&r.placeLabel()},placeLabel:function(){var e,t,i,n,r,s,o=this,a=o.attr,l=a.attributeId,c=Math.min(a.startAngle,a.endAngle),u=Math.max(a.startAngle,a.endAngle),d=.5*(c+u),h=a.margin,f=a.centerX,g=a.centerY,p=Math.sin(d),m=Math.cos(d),x=Math.min(a.startRho,a.endRho)+h,y=Math.max(a.startRho,a.endRho)+h,v=.5*(x+y),E=o.surfaceMatrix,b=o.labelCfg||(o.labelCfg={}),C=o.getMarker("labels"),S=C.getTemplate(),w=S.getHideLessThan(),T=S.getCalloutLine();if(s=T?T.length||40:0,E.appendMatrix(a.matrix),b.text=a.label,t=f+m*v,i=g+p*v,b.x=E.x(t,i),b.y=E.y(t,i),t=f+m*y,i=g+p*y,b.calloutStartX=E.x(t,i),b.calloutStartY=E.y(t,i),t=f+m*(y+s),i=g+p*(y+s),b.calloutPlaceX=E.x(t,i),b.calloutPlaceY=E.y(t,i),a.rotateLabels)switch(S.attr.orientation){case"horizontal":b.rotationRads=d+Math.atan2(E.y(1,0)-E.y(0,0),E.x(1,0)-E.x(0,0))+Math.PI/2;break;case"vertical":b.rotationRads=d+Math.atan2(E.y(1,0)-E.y(0,0),E.x(1,0)-E.x(0,0))}else b.rotationRads=0,Ext.log.warn("'series.style.rotateLabels' config is deprecated. Use 'series.label.orientation' config instead.");b.calloutColor=T&&T.color||o.attr.fillStyle,T?T.width&&(b.calloutWidth=T.width):b.calloutColor="none",b.globalAlpha=a.globalAlpha*a.fillOpacity,"none"!==S.display&&(b.hidden=a.startAngle==a.endAngle),S.attr.renderer&&(r=[o.attr.label,C,b,o.getRendererData(),o.getRendererIndex()],"string"==typeof(n=Ext.callback(S.attr.renderer,null,r,0,o.getSeries()))?b.text=n:Ext.apply(b,n)),o.putMarker("labels",b,l),(e=o.getMarkerBBox("labels",l,!0))&&(a.doCallout&&(w<(u-c)*y||a.highlighted)?"outside"===S.attr.display?o.putMarker("labels",{callout:1},l):"inside"===S.attr.display?o.putMarker("labels",{callout:0},l):o.putMarker("labels",{callout:1-o.sliceContainsLabel(a,e)},l):o.putMarker("labels",{globalAlpha:o.sliceContainsLabel(a,e)},l))},sliceContainsLabel:function(e,t){var i,n,r,s,o=e.labelOverflowPadding,a=(e.endRho+e.startRho)/2,l=a+(t.width+o)/2,c=a-(t.width+o)/2;return o<0?1:t.width+2*o>e.endRho-e.startRho?0:(n=Math.sqrt(e.endRho*e.endRho-l*l),r=Math.sqrt(e.endRho*e.endRho-c*c),s=(i=Math.abs(e.endAngle-e.startAngle))>Math.PI/2?c:Math.abs(Math.tan(i/2))*c,t.height+2*o>2*Math.min(n,r,s)?0:1)}}),Ext.define("Ext.chart.series.Pie",{extend:Ext.chart.series.Polar,type:"pie",alias:"series.pie",seriesType:"pieslice",isPie:!0,config:{donut:0,rotation:0,clockwise:!0,totalAngle:2*Math.PI,hidden:[],radiusFactor:100,highlightCfg:{margin:20},style:{}},directions:["X"],applyLabel:function(e,t){return Ext.isObject(e)&&!Ext.isString(e.orientation)&&Ext.apply(e=Ext.Object.chain(e),{orientation:"vertical"}),e},updateLabelData:function(){var e,t,i,n,r=this.getStore().getData().items,s=this.getSprites(),o=this.getLabel(),a=o&&o.getTemplate().getField(),l=this.getHidden();if(s.length&&a){for(i=[],e=0,t=r.length;e<t;e++)i.push(r[e].get(a));for(e=0,t=s.length;e<t;e++)(n=s[e]).setAttributes({label:i[e]}),n.putMarker("labels",{hidden:l[e]},n.attr.attributeId)}},coordinateX:function(){var e,t,i,n,r,s,o=this.getStore().getData().items,a=o.length,l=this.getXField(),c=this.getYField(),u=0,d=0,h=this.getHidden(),f=[],g=0,p=this.getTotalAngle(),m=this.getClockwise()?1:-1,x=this.getSprites();if(x){for(n=0;n<a;n++)e=Math.abs(Number(o[n].get(l)))||0,i=c&&Math.abs(Number(o[n].get(c)))||0,h[n]||(u+=e,d<i&&(d=i)),f[n]=u,n>=h.length&&(h[n]=!1);for(h.length=a,this.maxY=d,0!==u&&(t=p/u),n=0;n<a;n++)x[n].setAttributes({startAngle:g,endAngle:g=t?m*f[n]*t:0,globalAlpha:1});if(a<x.length){for(n=a;n<x.length;n++)(s=(r=x[n]).getMarker("labels"))&&(s.clear(r.getId()),r.releaseMarker("labels")),r.destroy();x.length=a}for(n=a;n<x.length;n++)x[n].setAttributes({startAngle:p,endAngle:p,globalAlpha:0})}},updateCenter:function(e){this.setStyle({translationX:e[0]+this.getOffsetX(),translationY:e[1]+this.getOffsetY()}),this.doUpdateStyles()},updateRadius:function(e){this.setStyle({startRho:e*this.getDonut()*.01,endRho:e*this.getRadiusFactor()*.01}),this.doUpdateStyles()},getStyleByIndex:function(e){var t,i,n,r=this.getStore().getAt(e),s=this.getYField(),o=this.getRadius(),a={};return r&&(n=s&&Math.abs(Number(r.get(s)))||0,t=o*this.getDonut()*.01,i=o*this.getRadiusFactor()*.01,(a=this.callParent([e])).startRho=t,a.endRho=this.maxY?t+(i-t)*n/this.maxY:i),a},updateDonut:function(e){var t=this.getRadius();this.setStyle({startRho:t*e*.01,endRho:t*this.getRadiusFactor()*.01}),this.doUpdateStyles()},rotationOffset:-Math.PI/2,updateRotation:function(e){this.setStyle({rotationRads:e+this.rotationOffset}),this.doUpdateStyles()},updateTotalAngle:function(e){this.processData()},getSprites:function(){var e=this,t=e.getChart(),i=e.getStore();if(!t||!i)return Ext.emptyArray;e.getColors(),e.getSubStyle();var n,r,s,o=i.getData().items.length,a=e.getAnimation()||t&&t.getAnimation(),l=e.sprites,c=!1,u=0,d=e.getLabel(),h=d&&d.getTemplate();for(s={store:i,field:e.getXField(),angleField:e.getXField(),radiusField:e.getYField(),series:e},r=0;r<o;r++)(n=l[r])||(n=e.createSprite(),e.getHighlight()&&(n.config.highlight=e.getHighlight(),n.addModifier("highlight",!0)),h&&h.getField()&&(h.setAttributes({labelOverflowPadding:e.getLabelOverflowPadding()}),h.getAnimation().setCustomDurations({callout:200})),n.setAttributes(e.getStyleByIndex(r)),n.setRendererData(s),c=!0),n.setRendererIndex(u++),n.setAnimation(a);return c&&e.doUpdateStyles(),e.sprites},betweenAngle:function(e,t,i){var n=2*Math.PI,r=this.rotationOffset;return t!==i&&(this.getClockwise()?(t+=r,i+=r):(e*=-1,t*=-1,i*=-1,t-=r,i-=r),e-=t,i-=t,e%=n,i%=n,e+=n,i+=n,(e%=n)<(i%=n)||Ext.Number.isEqual(i,0,1e-8))},getItemByIndex:function(e,t){return t=t||"sprites",this.callParent([e,t])},getItemForAngle:function(e){var t,i,n,r,s,o,a=this.getSprites();for(e%=2*Math.PI;e<0;)e+=2*Math.PI;if(a)for(n=(i=this.getStore()).getData().items,r=this.getHidden(),s=0,o=i.getCount();s<o;s++)if(!r[s]&&(t=a[s].attr).startAngle<=e&&t.endAngle>=e)return{series:this,sprite:a[s],index:s,record:n[s],field:this.getXField()};return null},getItemForPoint:function(e,t){var i,n,r,s,o=this,a=o.getSprites(),l=o.getCenter(),c=o.getOffsetX(),u=o.getOffsetY(),d=e-l[0]+c,h=t-l[1]+u,f=o.getStore(),g=o.getDonut(),p=f.getData().items,m=Math.atan2(h,d)-o.getRotation(),x=Math.sqrt(d*d+h*h),y=o.getRadius()*g*.01,v=o.getHidden(),E=null;for(i=0,n=p.length;i<n;i++)if(!v[i]){if(!(s=a[i]))break;if(x>=y+(r=s.attr).margin&&x<=r.endRho+r.margin&&o.betweenAngle(m,r.startAngle,r.endAngle)){E={series:o,sprite:a[i],index:i,record:p[i],field:o.getXField()};break}}return E},provideLegendInfo:function(e){var t,i,n,r,s,o,a,l=this.getStore();if(l)for(t=l.getData().items,i=this.getLabel().getTemplate().getField(),n=this.getXField(),r=this.getHidden(),s=0;s<t.length;s++)a=(o=this.getStyleByIndex(s)).fillStyle,Ext.isObject(a)&&(a=a.stops&&a.stops[0].color),e.push({name:i?String(t[s].get(i)):n+" "+s,mark:a||o.strokeStyle||"black",disabled:r[s],series:this.getId(),index:s})}}),Ext.define("Ext.chart.series.sprite.Pie3DPart",{extend:Ext.draw.sprite.Path,mixins:{markerHolder:Ext.chart.MarkerHolder},alias:"sprite.pie3dPart",inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",margin:"number",thickness:"number",bevelWidth:"number",distortion:"number",baseColor:"color",colorSpread:"number",baseRotation:"number",part:"enums(top,bottom,start,end,innerFront,innerBack,outerFront,outerBack)",label:"string"},aliases:{rho:"endRho"},triggers:{centerX:"path,bbox",centerY:"path,bbox",startAngle:"path,partZIndex",endAngle:"path,partZIndex",startRho:"path",endRho:"path,bbox",margin:"path,bbox",thickness:"path",distortion:"path",baseRotation:"path,partZIndex",baseColor:"partZIndex,partColor",colorSpread:"partColor",part:"path,partZIndex",globalAlpha:"canvas,alpha",fillOpacity:"canvas,alpha"},defaults:{centerX:0,centerY:0,startAngle:2*Math.PI,endAngle:2*Math.PI,startRho:0,endRho:150,margin:0,thickness:35,distortion:.5,baseRotation:0,baseColor:"white",colorSpread:.5,miterLimit:1,bevelWidth:5,strokeOpacity:0,part:"top",label:""},updaters:{alpha:"alphaUpdater",partColor:"partColorUpdater",partZIndex:"partZIndexUpdater"}}},config:{renderer:null,rendererData:null,rendererIndex:0,series:null},bevelParams:[],constructor:function(e){this.callParent([e]),this.bevelGradient=new Ext.draw.gradient.Linear({stops:[{offset:0,color:"rgba(255,255,255,0)"},{offset:.7,color:"rgba(255,255,255,0.6)"},{offset:1,color:"rgba(255,255,255,0)"}]})},updateRenderer:function(){this.setDirty(!0)},updateRendererData:function(){this.setDirty(!0)},updateRendererIndex:function(){this.setDirty(!0)},alphaUpdater:function(e){var t=e.globalAlpha,i=e.fillOpacity,n=this.oldOpacity,r=this.oldFillOpacity;(t===n||1!==t&&1!==n)&&(i===r||1!==i&&1!==r)||(this.scheduleUpdater(e,"path",["globalAlpha"]),this.oldOpacity=t,this.oldFillOpacity=i)},partColorUpdater:function(e){var t,i=Ext.util.Color.fly(e.baseColor),n=i.toString(),r=e.colorSpread;switch(e.part){case"top":t=new Ext.draw.gradient.Radial({start:{x:0,y:0,r:0},end:{x:0,y:0,r:1},stops:[{offset:0,color:i.createLighter(.1*r)},{offset:1,color:i.createDarker(.1*r)}]});break;case"bottom":t=new Ext.draw.gradient.Radial({start:{x:0,y:0,r:0},end:{x:0,y:0,r:1},stops:[{offset:0,color:i.createDarker(.2*r)},{offset:1,color:i.toString()}]});break;case"outerFront":case"outerBack":t=new Ext.draw.gradient.Linear({stops:[{offset:0,color:i.createDarker(.15*r).toString()},{offset:.3,color:n},{offset:.8,color:i.createLighter(.2*r).toString()},{offset:1,color:i.createDarker(.25*r).toString()}]});break;case"start":case"end":t=new Ext.draw.gradient.Linear({stops:[{offset:0,color:i.createDarker(.1*r).toString()},{offset:1,color:i.createLighter(.2*r).toString()}]});break;case"innerFront":case"innerBack":t=new Ext.draw.gradient.Linear({stops:[{offset:0,color:i.createDarker(.1*r).toString()},{offset:.2,color:i.createLighter(.2*r).toString()},{offset:.7,color:n},{offset:1,color:i.createDarker(.1*r).toString()}]})}e.fillStyle=t,e.canvasAttributes.fillStyle=t},partZIndexUpdater:function(e){var t,i=Ext.draw.sprite.AttributeParser.angle,n=e.baseRotation,r=e.startAngle,s=e.endAngle;switch(e.part){case"top":e.zIndex=6;break;case"outerFront":r=i(r+n),s=i(s+n),t=0<=r&&s<0?Math.sin(r):r<=0&&0<s?Math.sin(s):0<=r&&0<s?s<r?0:Math.max(Math.sin(r),Math.sin(s)):1,e.zIndex=4+t;break;case"outerBack":e.zIndex=1;break;case"start":e.zIndex=4+Math.sin(i(r+n));break;case"end":e.zIndex=4+Math.sin(i(s+n));break;case"innerFront":e.zIndex=2;break;case"innerBack":e.zIndex=4+Math.sin(i((r+s)/2+n));break;case"bottom":e.zIndex=0}e.dirtyZIndex=!0},updatePlainBBox:function(e){var t,i,n,r,s,o,a=this.attr,l=a.part,c=a.baseRotation,u=a.centerX,d=a.centerY;if("start"===l?i=a.startAngle+c:"end"===l&&(i=a.endAngle+c),Ext.isNumber(i))return s=Math.sin(i),o=Math.cos(i),n=Math.min(u+o*a.startRho,u+o*a.endRho),r=d+s*a.startRho*a.distortion,e.x=n,e.y=r,e.width=o*(a.endRho-a.startRho),void(e.height=a.thickness+s*(a.endRho-a.startRho)*2);t="innerFront"===l||"innerBack"===l?a.startRho:a.endRho,e.width=2*t,e.height=t*a.distortion*2+a.thickness,e.x=a.centerX-t,e.y=a.centerY-t*a.distortion},updateTransformedBBox:function(e){return"start"===this.attr.part||"end"===this.attr.part?this.callParent(arguments):this.updatePlainBBox(e)},updatePath:function(e){this.attr.globalAlpha&&(this.attr.endAngle<this.attr.startAngle||this[this.attr.part+"Renderer"](e))},render:function(e,t,i){var n,r,s=this,o=s.getRenderer(),a=s.attr,l=a.part;a.globalAlpha&&!Ext.Number.isEqual(a.startAngle,a.endAngle,1e-8)&&(o&&(n={type:"pie3dPart",part:a.part,margin:a.margin,distortion:a.distortion,centerX:a.centerX,centerY:a.centerY,baseRotation:a.baseRotation,startAngle:a.startAngle,endAngle:a.endAngle,startRho:a.startRho,endRho:a.endRho},(r=Ext.callback(o,null,[s,n,s.getRendererData(),s.getRendererIndex()],0,s.getSeries()))&&(r.part&&(r.part=l),s.setAttributes(r),s.useAttributes(t,i))),s.callParent([e,t]),s.bevelRenderer(e,t),a.label&&s.getMarker("labels")&&s.placeLabel())},placeLabel:function(){var e,t,i,n,r=this.attr,s=r.attributeId,o=r.margin,a=r.distortion,l=r.centerX,c=r.centerY,u=r.baseRotation,d=(r.startAngle+u+(r.endAngle+u))/2,h=r.startRho+o,f=r.endRho+o,g=(h+f)/2,p=Math.sin(d),m=Math.cos(d),x=this.surfaceMatrix,y=this.getMarker("labels"),v=y.getTemplate(),E=v.getCalloutLine(),b=E&&E.length||40,C={};x.appendMatrix(r.matrix),C.text=r.label,i=l+m*g,n=c+p*g*a,C.x=x.x(i,n),C.y=x.y(i,n),i=l+m*f,n=c+p*f*a,C.calloutStartX=x.x(i,n),C.calloutStartY=x.y(i,n),i=l+m*(f+b),n=c+p*(f+b)*a,C.calloutPlaceX=x.x(i,n),C.calloutPlaceY=x.y(i,n),C.calloutWidth=2,v.attr.renderer&&(e=[this.attr.label,y,C,this.getRendererData(),this.getRendererIndex()],"string"==typeof(t=Ext.callback(v.attr.renderer,null,e,0,this.getSeries()))?C.text=t:Ext.apply(C,t)),this.putMarker("labels",C,s),this.putMarker("labels",{callout:1},s)},bevelRenderer:function(e,t){var i,n=this.attr,r=n.bevelWidth,s=this.bevelParams;for(i=0;i<s.length;i++)t.beginPath(),t.ellipse.apply(t,s[i]),t.save(),t.lineWidth=r,t.strokeOpacity=r?1:0,t.strokeGradient=this.bevelGradient,t.stroke(n),t.restore()},lidRenderer:function(e,t){var i=this.attr,n=i.margin,r=i.distortion,s=i.centerX,o=i.centerY,a=i.baseRotation,l=i.startAngle+a,c=i.endAngle+a,u=(l+c)/2,d=i.startRho,h=i.endRho,f=Math.sin(c),g=Math.cos(c);s+=Math.cos(u)*n,o+=Math.sin(u)*n*r,e.ellipse(s,o+t,d,d*r,0,l,c,!1),e.lineTo(s+g*h,o+t+f*h*r),e.ellipse(s,o+t,h,h*r,0,c,l,!0),e.closePath()},topRenderer:function(e){this.lidRenderer(e,0)},bottomRenderer:function(e){var t=this.attr,i=Ext.util.Color.RGBA_NONE;(t.globalAlpha<1||t.fillOpacity<1||t.shadowColor!==i)&&this.lidRenderer(e,t.thickness)},sideRenderer:function(e,t){var i,n=this.attr,r=n.margin,s=n.centerX,o=n.centerY,a=n.distortion,l=n.baseRotation,c=n.startAngle+l,u=n.endAngle+l,d=!n.startAngle&&Ext.Number.isEqual(2*Math.PI,n.endAngle,1e-7),h=n.thickness,f=n.startRho,g=n.endRho,p="start"===t&&c||"end"===t&&u,m=Math.sin(p),x=Math.cos(p),y=n.globalAlpha<1;("start"===t&&x<0||"end"===t&&0<x||y)&&!d&&(i=(c+u)/2,s+=Math.cos(i)*r,o+=Math.sin(i)*r*a,e.moveTo(s+x*f,o+m*f*a),e.lineTo(s+x*g,o+m*g*a),e.lineTo(s+x*g,o+m*g*a+h),e.lineTo(s+x*f,o+m*f*a+h),e.closePath())},startRenderer:function(e){this.sideRenderer(e,"start")},endRenderer:function(e){this.sideRenderer(e,"end")},rimRenderer:function(e,t,i,n){var r,s,o,a=this,l=a.attr,c=l.margin,u=l.centerX,d=l.centerY,h=l.distortion,f=l.baseRotation,g=Ext.draw.sprite.AttributeParser.angle,p=l.startAngle+f,m=l.endAngle+f,x=g((p+m)/2),y=l.thickness,v=l.globalAlpha<1;function E(){e.ellipse(u,d+y,t,t*h,0,Math.PI,p,!0),e.lineTo(u+Math.cos(p)*t,d+Math.sin(p)*t*h),o=[u,d,t,t*h,0,p,Math.PI,!1],i||a.bevelParams.push(o),e.ellipse.apply(e,o),e.closePath()}function b(){e.ellipse(u,d+y,t,t*h,0,0,m,!1),e.lineTo(u+Math.cos(m)*t,d+Math.sin(m)*t*h),o=[u,d,t,t*h,0,m,0,!0],i||a.bevelParams.push(o),e.ellipse.apply(e,o),e.closePath()}function C(){e.ellipse(u,d+y,t,t*h,0,Math.PI,m,!1),e.lineTo(u+Math.cos(m)*t,d+Math.sin(m)*t*h),o=[u,d,t,t*h,0,m,Math.PI,!0],i&&a.bevelParams.push(o),e.ellipse.apply(e,o),e.closePath()}function S(){e.ellipse(u,d+y,t,t*h,0,p,0,!1),e.lineTo(u+t,d),o=[u,d,t,t*h,0,0,p,!0],i&&a.bevelParams.push(o),e.ellipse.apply(e,o),e.closePath()}a.bevelParams=[],p=g(p),m=g(m),u+=Math.cos(x)*c,d+=Math.sin(x)*c*h,r=0<=p&&0<=m,s=p<=0&&m<=0,n?i&&!v||(0<=p&&m<0?E():p<=0&&0<m?b():p<=0&&m<0?m<p&&(e.ellipse(u,d+y,t,t*h,0,0,Math.PI,!1),e.lineTo(u-t,d),o=[u,d,t,t*h,0,Math.PI,0,!0],i||a.bevelParams.push(o),e.ellipse.apply(e,o),e.closePath()):m<p?(E(),b()):(o=[u,d,t,t*h,0,p,m,!1],(r&&!i||s&&i)&&a.bevelParams.push(o),e.ellipse.apply(e,o),e.lineTo(u+Math.cos(m)*t,d+Math.sin(m)*t*h+y),e.ellipse(u,d+y,t,t*h,0,m,p,!0),e.closePath())):(i||v)&&(0<=p&&m<0?C():p<=0&&0<m?S():p<=0&&m<0?m<p?(C(),S()):(e.ellipse(u,d+y,t,t*h,0,p,m,!1),e.lineTo(u+Math.cos(m)*t,d+Math.sin(m)*t*h),o=[u,d,t,t*h,0,m,p,!0],i&&a.bevelParams.push(o),e.ellipse.apply(e,o),e.closePath()):m<p&&(e.ellipse(u,d+y,t,t*h,0,-Math.PI,0,!1),e.lineTo(u+t,d),o=[u,d,t,t*h,0,0,-Math.PI,!0],i&&a.bevelParams.push(o),e.ellipse.apply(e,o),e.closePath()))},innerFrontRenderer:function(e){this.rimRenderer(e,this.attr.startRho,!0,!0)},innerBackRenderer:function(e){this.rimRenderer(e,this.attr.startRho,!0,!1)},outerFrontRenderer:function(e){this.rimRenderer(e,this.attr.endRho,!1,!0)},outerBackRenderer:function(e){this.rimRenderer(e,this.attr.endRho,!1,!1)}}),Ext.define("Ext.chart.series.Pie3D",{extend:Ext.chart.series.Polar,type:"pie3d",seriesType:"pie3d",alias:"series.pie3d",is3D:!0,config:{rect:[0,0,0,0],thickness:35,distortion:.5,donut:0,hidden:[],highlightCfg:{margin:20},shadow:!1},rotationOffset:-Math.PI/2,setField:function(e){return this.setXField(e)},getField:function(){return this.getXField()},updateRotation:function(e){var t={baseRotation:e+this.rotationOffset};this.forEachSprite(function(e){e.setAttributes(t)})},updateColors:function(e){var t;this.setSubStyle({baseColor:e}),this.isConfiguring||(t=this.getChart())&&t.refreshLegendStore()},applyShadow:function(e){return!0===e?e={shadowColor:"rgba(0,0,0,0.8)",shadowBlur:30}:Ext.isObject(e)||(e={shadowColor:Ext.util.Color.RGBA_NONE}),e},updateShadow:function(e){var t,i,n=this.getSprites(),r=this.spritesPerSlice,s=n&&n.length;for(t=1;t<s;t+=r)"bottom"===(i=n[t]).attr.part&&i.setAttributes(e)},getStyleByIndex:function(e){var t=this.callParent([e]),i=this.getStyle(),n=t.fillStyle||t.fill||t.color,r=i.strokeStyle||i.stroke;return n&&(t.baseColor=n,delete t.fillStyle,delete t.fill,delete t.color),r&&(t.strokeStyle=r),t},doUpdateStyles:function(){for(var e,t,i=this.getSprites(),n=this.spritesPerSlice,r=i&&i.length,s=0,o=0;s<r;s+=n,o++)for(t=this.getStyleByIndex(o),e=0;e<n;e++)i[s+e].setAttributes(t)},coordinateX:function(){var e,t,i,n,r,s,o=this,a=o.getStore().getData().items,l=a.length,c=o.getXField(),u=o.getAnimation(),d=o.getRotation(),h=o.getHidden(),f=o.getSprites(!0),g=f.length,p=o.spritesPerSlice,m=o.getCenter(),x=o.getOffsetX(),y=o.getOffsetY(),v=o.getRadius(),E=o.getThickness(),b=o.getDistortion(),C=o.getRenderer(),S=o.getRendererData(),w=(o.getHighlight(),0),T=2*Math.PI,P=[],I=0;for(r=0;r<l;r++)e=Math.abs(+a[r].get(c))||0,h[r]||(I+=e),P[r]=I,r>=h.length&&(h[r]=!1);if(0!==I){for(t=2*Math.PI/I,r=0;r<l;r++)P[r]*=t;for(r=0;r<l;r++){for(n=this.getStyleByIndex(r),s=0;s<p;s++)(i=f[r*p+s]).setAnimation(u),i.setAttributes({centerX:m[0]+x,centerY:m[1]+y-E/2,endRho:v,startRho:v*o.getDonut()/100,baseRotation:d+o.rotationOffset,startAngle:w,endAngle:P[r]-1e-10,thickness:E,distortion:b,globalAlpha:1}),i.setAttributes(n),i.setConfig({renderer:C,rendererData:S,rendererIndex:r});w=P[r]}for(r*=p;r<g;r++)(i=f[r]).setAnimation(u),i.setAttributes({startAngle:T,endAngle:T,globalAlpha:0,baseRotation:d+o.rotationOffset})}},updateHighlight:function(t,e){this.callParent([t,e]),this.forEachSprite(function(e){t&&(e.modifiers.highlight?e.modifiers.highlight.setConfig(t):(e.config.highlight=t,e.addModifier(t,!0)))})},updateLabelData:function(){var e,t,i,n,r,s=this.getStore().getData().items,o=this.getSprites(),a=this.getLabel(),l=a&&a.getTemplate().getField(),c=this.getHidden(),u=this.spritesPerSlice,d="labels";if(o.length){if(l)for(t=[],r=0,e=s.length;r<e;r++)t.push(s[r].get(l));for(r=n=0,e=o.length;n<e;n+=u,r++)i=o[n],a?(i.getMarker(d)||i.bindMarker(d,a),t&&i.setAttributes({label:t[r]}),i.putMarker(d,{hidden:c[r]},i.attr.attributeId)):i.releaseMarker(d)}},applyRadius:function(){var e,t=this.getChart(),i=t.getInnerPadding(),n=t.getMainRect()||[0,0,1,1],r=n[2]-2*i,s=n[3]-2*i-this.getThickness(),o=r/2;return e=s/2<o*this.getDistortion()?s/(2*this.getDistortion()):o,Math.max(e,0)},forEachSprite:function(e){var t,i=this.sprites,n=i.length;for(t=0;t<n;t++)e(i[t],Math.floor(t/this.spritesPerSlice))},updateRadius:function(t){var i;this.getChart(),i=this.getDonut(),this.forEachSprite(function(e){e.setAttributes({endRho:t,startRho:t*i/100})})},updateDonut:function(t){var i;this.getChart(),i=this.getRadius(),this.forEachSprite(function(e){e.setAttributes({startRho:i*t/100})})},updateCenter:function(t){var i,n,r;this.getChart(),i=this.getOffsetX(),n=this.getOffsetY(),r=this.getThickness(),this.forEachSprite(function(e){e.setAttributes({centerX:t[0]+i,centerY:t[1]+n-r/2})})},updateThickness:function(t){var i,n;this.getChart(),this.setRadius(),i=this.getCenter(),n=this.getOffsetY(),this.forEachSprite(function(e){e.setAttributes({thickness:t,centerY:i[1]+n-t/2})})},updateDistortion:function(t){this.getChart(),this.setRadius(),this.forEachSprite(function(e){e.setAttributes({distortion:t})})},updateOffsetX:function(t){var i;this.getChart(),i=this.getCenter(),this.forEachSprite(function(e){e.setAttributes({centerX:i[0]+t})})},updateOffsetY:function(t){var i,n;this.getChart(),i=this.getCenter(),n=this.getThickness(),this.forEachSprite(function(e){e.setAttributes({centerY:i[1]+t-n/2})})},updateAnimation:function(t){this.getChart(),this.forEachSprite(function(e){e.setAnimation(t)})},updateRenderer:function(i){var n;this.getChart(),n=this.getRendererData(),this.forEachSprite(function(e,t){e.setConfig({renderer:i,rendererData:n,rendererIndex:t})})},getRendererData:function(){return{store:this.getStore(),angleField:this.getXField(),radiusField:this.getYField(),series:this}},getSprites:function(e){var t=this.getStore(),i=this.sprites;if(!t)return Ext.emptyArray;if(i&&!e)return i;var n,r,s,o=this.getSurface(),a=t.getData().items,l=this.spritesPerSlice,c=this.partNames.length,u=a.length;for(r=0;r<u;r++)if(!i[r*l])for(s=0;s<c;s++)(n=o.add({type:"pie3dPart",part:this.partNames[s],series:this})).getAnimation().setDurationOn("baseRotation",0),i.push(n);return i},betweenAngle:function(e,t,i){var n=2*Math.PI,r=this.rotationOffset;return i+=r,e-=t+=r,i-=t,e%=n,i%=n,e+=n,i+=n,(e%=n)<(i%=n)||0===i},getItemForPoint:function(e,t){var i,n,r,s,o,a=this.getSprites(),l=this.spritesPerSlice,c=null;if(!a)return c;for(i=this.getStore().getData().items,n=this.getHidden(),r=0,s=i.length;r<s;r++)if(!n[r]&&a[o=r*l].hitTest([e,t])){c={series:this,sprite:a.slice(o,o+l),index:r,record:i[r],category:"sprites",field:this.getXField()};break}return c},provideLegendInfo:function(e){var t,i,n,r,s,o,a=this.getStore();if(a)for(t=a.getData().items,i=this.getLabel().getTemplate().getField(),n=this.getField(),r=this.getHidden(),o=0;o<t.length;o++)s=this.getStyleByIndex(o).baseColor,e.push({name:i?String(t[o].get(i)):n+" "+o,mark:s||"black",disabled:r[o],series:this.getId(),index:o})}},function(){var e=this.prototype,t=Ext.chart.series.sprite.Pie3DPart.def.getInitialConfig().processors.part;e.partNames=t.replace(/^enums\\(|\\)/g,"").split(","),e.spritesPerSlice=e.partNames.length}),Ext.define("Ext.chart.series.sprite.Polar",{extend:Ext.chart.series.sprite.Series,inheritableStatics:{def:{processors:{centerX:"number",centerY:"number",startAngle:"number",endAngle:"number",startRho:"number",endRho:"number",baseRotation:"number"},defaults:{centerX:0,centerY:0,startAngle:0,endAngle:Math.PI,startRho:0,endRho:150,baseRotation:0},triggers:{centerX:"bbox",centerY:"bbox",startAngle:"bbox",endAngle:"bbox",startRho:"bbox",endRho:"bbox",baseRotation:"bbox"}}},updatePlainBBox:function(e){var t=this.attr;e.x=t.centerX-t.endRho,e.y=t.centerY+t.endRho,e.width=2*t.endRho,e.height=2*t.endRho}}),Ext.define("Ext.chart.series.sprite.Radar",{alias:"sprite.radar",extend:Ext.chart.series.sprite.Polar,getDataPointXY:function(e){var t,i,n,r,s,o=this.attr,a=o.centerX,l=o.centerY,c=o.matrix,u=o.dataMinX,d=o.dataMaxX,h=o.dataX,f=o.dataY,g=o.endRho,p=o.startRho,m=o.baseRotation;return s=o.rangeY?o.rangeY[1]:o.dataMaxY,i=(h[e]-u)/(d-u+1)*2*Math.PI+m,t=f[e]/s*(g-p)+p,n=a+Math.cos(i)*t,r=l+Math.sin(i)*t,[c.x(n,r),c.y(n,r)]},render:function(e,t){var i,n,r,s,o=this.attr,a=o.dataX.length,l=this.surfaceMatrix,c={};for(t.beginPath(),i=0;i<a;i++)n=(s=this.getDataPointXY(i))[0],r=s[1],0===i&&t.moveTo(n,r),t.lineTo(n,r),c.translationX=l.x(n,r),c.translationY=l.y(n,r),this.putMarker("markers",c,i,!0);t.closePath(),t.fillStroke(o)}}),Ext.define("Ext.chart.series.Radar",{extend:Ext.chart.series.Polar,type:"radar",seriesType:"radar",alias:"series.radar",themeColorCount:function(){return 1},isStoreDependantColorCount:!1,themeMarkerCount:function(){return 1},updateAngularAxis:function(e){e.processData(this)},updateRadialAxis:function(e){e.processData(this)},coordinateX:function(){return this.coordinate("X",0,2)},coordinateY:function(){return this.coordinate("Y",1,2)},updateCenter:function(e){this.setStyle({translationX:e[0]+this.getOffsetX(),translationY:e[1]+this.getOffsetY()}),this.doUpdateStyles()},updateRadius:function(e){this.setStyle({endRho:e}),this.doUpdateStyles()},updateRotation:function(e){var t,i,n=this.getChart().getAxes();for(t=0,i=n.length;t<i;t++)n[t].setRotation(e);this.setStyle({rotationRads:e}),this.doUpdateStyles()},updateTotalAngle:function(e){this.processData()},getItemForPoint:function(e,t){var i,n,r,s,o,a=this.sprites&&this.sprites[0],l=a.attr.dataX.length,c=this.getStore(),u=this.getMarker();if(this.getHidden())return null;if(a&&u)for(o=a.getMarker("markers"),r=0;r<l;r++)if(i=.25*((s=o.getBBoxFor(r)).width+s.height),n=a.getDataPointXY(r),Math.abs(n[0]-e)<i&&Math.abs(n[1]-t)<i)return{series:this,sprite:a,index:r,category:"markers",record:c.getData().items[r],field:this.getYField()};return this.callParent(arguments)},getDefaultSpriteConfig:function(){var e=this.callParent(),t={customDurations:{translationX:0,translationY:0,rotationRads:0,dataMinX:0,dataMaxX:0}};return e.animation?Ext.apply(e.animation,t):e.animation=t,e},getSprites:function(){var e=this.getChart(),t=this.sprites;return e?(t.length||this.createSprite(),t):Ext.emptyArray},provideLegendInfo:function(e){var t=this.getSubStyleWithTheme(),i=t.fillStyle;Ext.isArray(i)&&(i=i[0]),e.push({name:this.getTitle()||this.getYField()||this.getId(),mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||t.strokeStyle||"black",disabled:this.getHidden(),series:this.getId(),index:0})}}),Ext.define("Ext.chart.series.sprite.Scatter",{alias:"sprite.scatterSeries",extend:Ext.chart.series.sprite.Cartesian,renderClipped:function(e,t,i,n){if(!this.cleanRedraw){var r,s,o,a,l,c,u,d,h,f=this.attr,g=f.dataX,p=f.dataY,m=f.labels,x=this.getSeries(),y=m&&this.getMarker("labels"),v=this.surfaceMatrix,E=this.attr.matrix,b=E.getXX(),C=E.getYY(),S=E.getDX(),w=E.getDY(),T={},P=e.getInherited().rtl&&!f.flipXY?-1:1;for(c=f.flipXY?(o=n[1]-b*P,a=n[1]+n[3]+b*P,l=n[0]-C,n[0]+n[2]+C):(o=n[0]-b*P,a=n[0]+n[2]+b*P,l=n[1]-C,n[1]+n[3]+C),h=0;h<g.length;h++)u=g[h],d=(d=p[h])*C+w,o<=(u=u*b+S)&&u<=a&&l<=d&&d<=c&&(f.renderer?(s=[this,T={type:"markers",translationX:v.x(u,d),translationY:v.y(u,d)},{store:this.getStore()},h],r=Ext.callback(f.renderer,null,s,0,x),T=Ext.apply(T,r)):(T.translationX=v.x(u,d),T.translationY=v.y(u,d)),this.putMarker("markers",T,h,!f.renderer),y&&m[h]&&this.drawLabel(m[h],u,d,h,n))}},drawLabel:function(e,t,i,n,r){var s,o,a,l,c,u,d=this,h=d.attr,f=d.getMarker("labels"),g=f.getTemplate(),p=d.labelCfg||(d.labelCfg={}),m=d.surfaceMatrix,x=h.labelOverflowPadding,y=h.flipXY;switch(p.text=e,(l=d.getMarkerBBox("labels",n,!0))||(d.putMarker("labels",p,n),l=d.getMarkerBBox("labels",n,!0)),p.rotationRads=y?.5*Math.PI:0,a=l.height/2,s=t,g.attr.display){case"under":o=i-a-x;break;case"rotate":s+=x,o=i-x,p.rotationRads=-Math.PI/4;break;default:o=i+a+x}p.x=m.x(s,o),p.y=m.y(s,o),g.attr.renderer&&(u=[e,f,p,{store:d.getStore()},n],"string"==typeof(c=Ext.callback(g.attr.renderer,null,u,0,d.getSeries()))?p.text=c:Ext.apply(p,c)),d.putMarker("labels",p,n)}}),Ext.define("Ext.chart.series.Scatter",{extend:Ext.chart.series.Cartesian,alias:"series.scatter",type:"scatter",seriesType:"scatterSeries",config:{itemInstancing:null,marker:!0},themeMarkerCount:function(){return 1},provideLegendInfo:function(e){var t=this.getMarkerStyleByIndex(0),i=t.fillStyle;e.push({name:this.getTitle()||this.getYField()||this.getId(),mark:(Ext.isObject(i)?i.stops&&i.stops[0].color:i)||t.strokeStyle||"black",disabled:this.getHidden(),series:this.getId(),index:0})}}),Ext.define("Ext.chart.theme.Blue",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.blue","chart.theme.Blue"],config:{baseColor:"#4d7fe6"}}),Ext.define("Ext.chart.theme.BlueGradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.blue-gradients","chart.theme.Blue:gradients"],config:{baseColor:"#4d7fe6",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category1",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category1","chart.theme.Category1"],config:{colors:["#f0a50a","#c20024","#2044ba","#810065","#7eae29"]}}),Ext.define("Ext.chart.theme.Category1Gradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category1-gradients","chart.theme.Category1:gradients"],config:{colors:["#f0a50a","#c20024","#2044ba","#810065","#7eae29"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category2",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category2","chart.theme.Category2"],config:{colors:["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"]}}),Ext.define("Ext.chart.theme.Category2Gradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category2-gradients","chart.theme.Category2:gradients"],config:{colors:["#6d9824","#87146e","#2a9196","#d39006","#1e40ac"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category3",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category3","chart.theme.Category3"],config:{colors:["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"]}}),Ext.define("Ext.chart.theme.Category3Gradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category3-gradients","chart.theme.Category3:gradients"],config:{colors:["#fbbc29","#ce2e4e","#7e0062","#158b90","#57880e"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category4",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category4","chart.theme.Category4"],config:{colors:["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"]}}),Ext.define("Ext.chart.theme.Category4Gradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category4-gradients","chart.theme.Category4:gradients"],config:{colors:["#ef5773","#fcbd2a","#4f770d","#1d3eaa","#9b001f"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category5",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category5","chart.theme.Category5"],config:{colors:["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"]}}),Ext.define("Ext.chart.theme.Category5Gradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category5-gradients","chart.theme.Category5:gradients"],config:{colors:["#7eae29","#fdbe2a","#910019","#27b4bc","#d74dbc"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Category6",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category6","chart.theme.Category6"],config:{colors:["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"]}}),Ext.define("Ext.chart.theme.Category6Gradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.category6-gradients","chart.theme.Category6:gradients"],config:{colors:["#44dce1","#0b2592","#996e05","#7fb325","#b821a1"],gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.DefaultGradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.default-gradients","chart.theme.Base:gradients"],config:{gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Green",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.green","chart.theme.Green"],config:{baseColor:"#b1da5a"}}),Ext.define("Ext.chart.theme.GreenGradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.green-gradients","chart.theme.Green:gradients"],config:{baseColor:"#b1da5a",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Midnight",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.midnight","chart.theme.Midnight"],config:{colors:["#a837ff","#4ac0f2","#ff4d35","#ff8809","#61c102","#ff37ea"],chart:{defaults:{captions:{title:{docked:"top",padding:5,style:{textAlign:"center",fontFamily:"default",fontWeight:"bold",fillStyle:"rgb(224, 224, 227)",fontSize:"default*1.6"}},subtitle:{docked:"top",style:{textAlign:"center",fontFamily:"default",fontWeight:"normal",fillStyle:"rgb(224, 224, 227)",fontSize:"default*1.3"}},credits:{docked:"bottom",padding:5,style:{textAlign:"left",fontFamily:"default",fontWeight:"lighter",fillStyle:"rgb(224, 224, 227)",fontSize:"default"}}},background:"rgb(52, 52, 53)"}},axis:{defaults:{style:{strokeStyle:"rgb(224, 224, 227)"},label:{fillStyle:"rgb(224, 224, 227)"},title:{fillStyle:"rgb(224, 224, 227)"},grid:{strokeStyle:"rgb(112, 112, 115)"}}},series:{defaults:{label:{fillStyle:"rgb(224, 224, 227)"}}},sprites:{text:{fillStyle:"rgb(224, 224, 227)"}},legend:{label:{fillStyle:"white"},border:{lineWidth:2,fillStyle:"rgba(255, 255, 255, 0.3)",strokeStyle:"rgb(150, 150, 150)"},background:"rgb(52, 52, 53)"}}}),Ext.define("Ext.chart.theme.Muted",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.muted","chart.theme.Muted"],config:{colors:["#8ca640","#974144","#4091ba","#8e658e","#3b8d8b","#b86465","#d2af69","#6e8852","#3dcc7e","#a6bed1","#cbaa4b","#998baa"]}}),Ext.define("Ext.chart.theme.Purple",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.purple","chart.theme.Purple"],config:{baseColor:"#da5abd"}}),Ext.define("Ext.chart.theme.PurpleGradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.purple-gradients","chart.theme.Purple:gradients"],config:{baseColor:"#da5abd",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Red",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.red","chart.theme.Red"],config:{baseColor:"#e84b67"}}),Ext.define("Ext.chart.theme.RedGradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.red-gradients","chart.theme.Red:gradients"],config:{baseColor:"#e84b67",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Sky",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.sky","chart.theme.Sky"],config:{baseColor:"#4ce0e7"}}),Ext.define("Ext.chart.theme.SkyGradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.sky-gradients","chart.theme.Sky:gradients"],config:{baseColor:"#4ce0e7",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.Yellow",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.yellow","chart.theme.Yellow"],config:{baseColor:"#fec935"}}),Ext.define("Ext.chart.theme.YellowGradients",{extend:Ext.chart.theme.Base,singleton:!0,alias:["chart.theme.yellow-gradients","chart.theme.Yellow:gradients"],config:{baseColor:"#fec935",gradients:{type:"linear",degrees:90}}}),Ext.define("Ext.chart.theme.series.Series",{config:{}}),Ext.define("Ext.chart.theme.series.Area",{extend:Ext.chart.theme.series.Series,config:{}}),Ext.define("Ext.chart.theme.series.Bar",{extend:Ext.chart.theme.series.Series,config:{}}),Ext.define("Ext.chart.theme.series.Bar3D",{extend:Ext.chart.theme.series.Series,config:{}}),Ext.define("Ext.chart.theme.series.BoxPlot",{extend:Ext.chart.theme.series.Series,config:{}}),Ext.define("Ext.chart.theme.series.CandleStick",{extend:Ext.chart.theme.series.Series,config:{}}),Ext.define("Ext.chart.theme.series.Line",{extend:Ext.chart.theme.series.Series,config:{}}),Ext.define("Ext.chart.theme.series.Pie",{extend:Ext.chart.theme.series.Series,config:{}}),Ext.define("Ext.chart.theme.series.Pie3D",{extend:Ext.chart.theme.series.Series,config:{}}),Ext.define("Ext.chart.interactions.ItemInfo",{extend:Ext.chart.interactions.Abstract,type:"iteminfo",alias:"interaction.iteminfo",config:{gestures:{tap:"onInfoGesture"},panel:{modal:!0,centered:!0,width:300,height:200,scrollable:"vertical",hideOnMaskTap:!0,fullscreen:!1,hidden:!1,zIndex:30}},item:null,applyPanel:function(e,t){return Ext.factory(e,"Ext.Panel",t)},updatePanel:function(e,t){e&&e.on("hide","reset",this),t&&t.un("hide","reset",this)},onInfoGesture:function(e,t){var i=this.getPanel(),n=this.getItemForEvent(e);return n&&(this.item=n,this.fireEvent("show",this,n,i),Ext.Viewport.add(i),i.show("pop"),n.series.setAttributesForItem(n,{highlighted:!0}),this.sync()),!1},reset:function(){var e=this.item;e&&(e.series.setAttributesForItem(e,{highlighted:!1}),this.item=null,this.sync())}});`;document.getElementsByTagName("head")[0].appendChild(s);